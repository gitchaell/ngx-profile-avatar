(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"0Tit":function(e,t){var n="function"==typeof Float32Array;function r(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function a(e,t,n){return((r(t,n)*e+i(t,n))*e+s(t))*e}function o(e,t,n){return 3*r(t,n)*e*e+2*i(t,n)*e+s(t)}function u(e){return e}e.exports=function(e,t,r,i){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===i)return u;for(var s=n?new Float32Array(11):new Array(11),l=0;l<11;++l)s[l]=a(.1*l,e,r);return function(n){return 0===n?0:1===n?1:a(function(t){for(var n=0,i=1;10!==i&&s[i]<=t;++i)n+=.1;--i;var u=n+(t-s[i])/(s[i+1]-s[i])*.1,l=o(u,e,r);return l>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var s=o(t,n,r);if(0===s)return t;t-=(a(t,n,r)-e)/s}return t}(t,u,e,r):0===l?u:function(e,t,n,r,i){var s,o,u=0;do{(s=a(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(s)>1e-7&&++u<10);return o}(t,n,n+.1,e,r)}(n),t,i)}}},1:function(e,t){},"1h5C":function(e,t,n){var r;!function(n){"use strict";var i={s:1,n:0,d:1};function s(e,t){if(isNaN(e=parseInt(e,10)))throw c.InvalidParameter;return e*t}function a(e,t){if(0===t)throw c.DivisionByZero;var n=Object.create(c.prototype);n.s=e<0?-1:1;var r=l(e=e<0?-e:e,t);return n.n=e/r,n.d=t/r,n}function o(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r==0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var u=function(e,t){var n,r=0,a=1,o=1,u=0,l=0,h=0,d=1,p=1,f=0,m=1,g=1,y=1,v=1e7;if(null==e);else if(void 0!==t){if(o=(r=e)*(a=t),r%1!=0||a%1!=0)throw c.NonIntegerParameter}else switch(typeof e){case"object":if("d"in e&&"n"in e)r=e.n,a=e.d,"s"in e&&(r*=e.s);else{if(!(0 in e))throw c.InvalidParameter;r=e[0],1 in e&&(a=e[1])}o=r*a;break;case"number":if(e<0&&(o=e,e=-e),e%1==0)r=e;else if(e>0){for(e>=1&&(e/=p=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));m<=v&&y<=v;){if(e===(n=(f+g)/(m+y))){m+y<=v?(r=f+g,a=m+y):y>m?(r=g,a=y):(r=f,a=m);break}e>n?(f+=g,m+=y):(g+=f,y+=m),m>v?(r=g,a=y):(r=f,a=m)}r*=p}else(isNaN(e)||isNaN(t))&&(a=r=NaN);break;case"string":if(null===(m=e.match(/\d+|./g)))throw c.InvalidParameter;if("-"===m[f]?(o=-1,f++):"+"===m[f]&&f++,m.length===f+1?l=s(m[f++],o):"."===m[f+1]||"."===m[f]?("."!==m[f]&&(u=s(m[f++],o)),(++f+1===m.length||"("===m[f+1]&&")"===m[f+3]||"'"===m[f+1]&&"'"===m[f+3])&&(l=s(m[f],o),d=Math.pow(10,m[f].length),f++),("("===m[f]&&")"===m[f+2]||"'"===m[f]&&"'"===m[f+2])&&(h=s(m[f+1],o),p=Math.pow(10,m[f+1].length)-1,f+=3)):"/"===m[f+1]||":"===m[f+1]?(l=s(m[f],o),d=s(m[f+2],1),f+=3):"/"===m[f+3]&&" "===m[f+1]&&(u=s(m[f],o),l=s(m[f+2],o),d=s(m[f+4],1),f+=5),m.length<=f){o=r=h+(a=d*p)*u+p*l;break}default:throw c.InvalidParameter}if(0===a)throw c.DivisionByZero;i.s=o<0?-1:1,i.n=Math.abs(r),i.d=Math.abs(a)};function l(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function c(e,t){if(u(e,t),!(this instanceof c))return a(i.s*i.n,i.d);e=l(i.d,i.n),this.s=i.s,this.n=i.n/e,this.d=i.d/e}c.DivisionByZero=new Error("Division by Zero"),c.InvalidParameter=new Error("Invalid argument"),c.NonIntegerParameter=new Error("Parameters must be integer"),c.prototype={s:1,n:0,d:1,abs:function(){return a(this.n,this.d)},neg:function(){return a(-this.s*this.n,this.d)},add:function(e,t){return u(e,t),a(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return u(e,t),a(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return u(e,t),a(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return u(e,t),a(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return a(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new c(NaN);if(void 0===e)return a(this.s*this.n%this.d,1);if(u(e,t),0===i.n&&0===this.d)throw c.DivisionByZero;return a(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(e,t){return u(e,t),a(l(i.n,this.n)*l(i.d,this.d),i.d*this.d)},lcm:function(e,t){return u(e,t),0===i.n&&0===this.n?a(0,1):a(i.n*this.n,l(i.n,this.n)*l(i.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):a(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):a(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):a(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return a(this.s*this.d,this.n)},pow:function(e,t){if(u(e,t),1===i.d)return i.s<0?a(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):a(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var n=o(this.n),r=o(this.d),s=1,l=1;for(var c in n)if("1"!==c){if("0"===c){s=0;break}if(n[c]*=i.n,n[c]%i.d!=0)return null;n[c]/=i.d,s*=Math.pow(c,n[c])}for(var c in r)if("1"!==c){if(r[c]*=i.n,r[c]%i.d!=0)return null;r[c]/=i.d,l*=Math.pow(c,r[c])}return i.s<0?a(l,s):a(s,l)},equals:function(e,t){return u(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){u(e,t);var n=this.s*this.n*i.d-i.s*i.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=a(n[r-1],1),s=r-2;s>=0;s--)i=i.inverse().add(n[s]);if(i.sub(t).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return u(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,n),i=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),s=0;s<300;s++){if(r===i)return s;r=10*r%t,i=10*i%t}return 0}(0,n,r),s=this.s<0?"-":"";if(s+=t/n|0,t%=n,(t*=10)&&(s+="."),r){for(var a=i;a--;)s+=t/n|0,t%=n,t*=10;for(s+="(",a=r;a--;)s+=t/n|0,t%=n,t*=10;s+=")"}else for(a=e;t&&a--;)s+=t/n|0,t%=n,t*=10;return s}},void 0===(r=(function(){return c}).apply(t,[]))||(e.exports=r)}()},2:function(e,t){},"2SVd":function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},3:function(e,t){},"34t7":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"3Mn4":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},4:function(e,t){},"4xPs":function(e,t,n){var r=n("JNaD"),i=n("VdZX"),s=n("LJTJ"),a=n("eUH1"),o=n("9YWz"),u=n("B+jg"),l=n("wptm");l.alea=r,l.xor128=i,l.xorwow=s,l.xorshift7=a,l.xor4096=o,l.tychei=u,e.exports=l},5:function(e,t){},"5fPn":function(e,t,n){var r;!function(i,s,a){var o,u=a.pow(256,6),l=a.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=f(function e(t,n){var r,i=[],s=typeof t;if(n&&"object"==s)for(r in t)try{i.push(e(t[r],n-1))}catch(a){}return i.length?i:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(s)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(i.crypto||i.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,m(s)]}}():e,3),r),g=new d(r),y=function(){for(var e=g.g(6),t=u,n=0;e<l;)e=256*(e+n),t*=256,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,f(m(g.S),s),(t.pass||n||function(e,t,n,r){return r&&(r.S&&p(r,g),e.state=function(){return p(g,{})}),n?(a.random=e,t):e})(y,h,"global"in t?t.global:this==a,t.state)}function d(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[s=255&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=255&i+1],n=256*n+a[255&(a[i]=a[s=255&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(f(a.random(),s),e.exports){e.exports=h;try{o=n(8)}catch(g){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},"5o5E":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"5oMp":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"5vwH":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n=i[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,a,o=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,s=-32;s<u;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=o[127&s]^=r+(a=a+1640531527|0))?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,o[i]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=o,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},6:function(e,t){},"6XX6":function(e,t){e.exports=function e(t,n){"use strict";var r,i,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,l=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(a,"")||"",d=c(n).replace(a,"")||"",p=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(h.match(u),16)||1!==p.length&&h.match(o)&&Date.parse(h),g=parseInt(d.match(u),16)||m&&d.match(o)&&Date.parse(d)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var y=0,v=Math.max(p.length,f.length);y<v;y++){if(r=!(p[y]||"").match(l)&&parseFloat(p[y])||p[y]||0,i=!(f[y]||"").match(l)&&parseFloat(f[y])||f[y]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},7:function(e,t){},"7a9l":function(e,t,n){var r;!function(n){"use strict";var i=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},s=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},a=function(){throw SyntaxError("Invalid Param")};function o(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e/=2,t/=2,.5*Math.log(e*e+t*t)+Math.LN2)}function u(e,t){if(!(this instanceof u))return new u(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return u.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return u.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,s=0;null===r&&a();for(var o=0;o<r.length;o++){var l=r[o];" "===l||"\t"===l||"\n"===l||("+"===l?i++:"-"===l?s++:"i"===l||"I"===l?(i+s===0&&a()," "===r[o+1]||isNaN(r[o+1])?n.im+=parseFloat((s%2?"-":"")+"1"):(n.im+=parseFloat((s%2?"-":"")+r[o+1]),o++),i=s=0):((i+s===0||isNaN(l))&&a(),"i"===r[o+1]||"I"===r[o+1]?(n.im+=parseFloat((s%2?"-":"")+l),o++):n.re+=parseFloat((s%2?"-":"")+l),i=s=0))}i+s>0&&a();break;case"number":n.im=0,n.re=e;break;default:a()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}u.prototype={re:0,im:0,sign:function(){var e=this.abs();return new u(this.re/e,this.im/e)},add:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:0===n.im&&0===this.im?new u(this.re*n.re,0):new u(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new u(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return u.NAN;if(this.isInfinite()||n.isZero())return u.INFINITY;if(this.isZero()||n.isInfinite())return u.ZERO;e=this.re,t=this.im;var r,i,s=n.re,a=n.im;return 0===a?new u(e/s,t/s):Math.abs(s)<Math.abs(a)?new u((e*(i=s/a)+t)/(r=s*i+a),(t*i-e)/r):new u((e+t*(i=a/s))/(r=a*i+s),(t-e*i)/r)},pow:function(e,t){var n=new u(e,t);if(e=this.re,t=this.im,n.isZero())return u.ONE;if(0===n.im){if(0===t&&e>0)return new u(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new u(Math.pow(t,n.re),0);case 1:return new u(0,Math.pow(t,n.re));case 2:return new u(-Math.pow(t,n.re),0);case 3:return new u(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return u.ZERO;var r=Math.atan2(t,e),i=o(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new u(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new u(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new u(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return new u(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new u(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new u(o(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new u(Math.sin(e)*i(t),Math.cos(e)*s(t))},cos:function(){var e=this.re,t=this.im;return new u(Math.cos(e)*i(t),-Math.sin(e)*s(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+i(t);return new u(Math.sin(e)/n,s(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-i(t);return new u(-Math.sin(e)/n,s(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*i(2*t)+.5*Math.cos(2*e);return new u(Math.cos(e)*i(t)/n,Math.sin(e)*s(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*i(2*t)-.5*Math.cos(2*e);return new u(Math.sin(e)*i(t)/n,-Math.cos(e)*s(t)/n)},asin:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new u(0,1/0);if(-1===t)return new u(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new u((1-t*t-e*e)/n,-2*e/n).log();return new u(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new u(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atan():new u(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acos():new u(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asin():new u(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new u(s(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new u(i(e)*Math.cos(t),s(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=i(e)+Math.cos(t);return new u(s(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=i(e)-Math.cos(t);return new u(s(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-i(2*e);return new u(-2*s(e)*Math.cos(t)/n,2*i(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+i(2*e);return new u(2*i(e)*Math.cos(t)/n,-2*s(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,s=r*r+t*t,a=0!==s?new u((i*r-t*t)/s,(t*r+i*t)/s):new u(-1!==e?e/0:0,0!==t?t/0:0),l=a.re;return a.re=o(a.re,a.im)/2,a.im=Math.atan2(a.im,l)/2,n&&(a.im=-a.im),a},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atanh():new u(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new u(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asinh():new u(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return u.INFINITY;var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acosh():new u(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new u(e/n,-t/n)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new u(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new u(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new u(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new u(e,t);return Math.abs(n.re-this.re)<=u.EPSILON&&Math.abs(n.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<u.EPSILON&&(e=0),Math.abs(t)<u.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-15,void 0===(r=(function(){return u}).apply(t,[]))||(e.exports=r)}()},8:function(e,t){},"9/Hw":function(e,t,n){var r;!function(i,s){var a,o=this,u=s.pow(256,6),l=s.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=f(function e(t,n){var r,i=[],s=typeof t;if(n&&"object"==s)for(r in t)try{i.push(e(t[r],n-1))}catch(a){}return i.length?i:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(i)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(o.crypto||o.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,m(i)]}}():e,3),r),g=new d(r),y=function(){for(var e=g.g(6),t=u,n=0;e<l;)e=256*(e+n),t*=256,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,f(m(g.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&p(r,g),e.state=function(){return p(g,{})}),n?(s.random=e,t):e})(y,h,"global"in t?t.global:this==s,t.state)}function d(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[s=255&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=255&i+1],n=256*n+a[255&(a[i]=a[s=255&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,f(s.random(),i),e.exports){e.exports=h;try{a=n(3)}catch(g){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},"9YWz":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n=i[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,a,o=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,s=-32;s<u;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=o[127&s]^=r+(a=a+1640531527|0))?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,o[i]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=o,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"9rSQ":function(e,t,n){"use strict";var r=n("xTJ+");function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},"9wtq":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AUPredictor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BlendShapeKeys}));var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("qAop"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zhpf"),mathjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("eQl+"),bezier_easing__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("0Tit"),bezier_easing__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(bezier_easing__WEBPACK_IMPORTED_MODULE_4__),_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ws/Y"),_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__),a1_0x2c401b=a1_0x26cf;function a1_0x4794(){var e=["mouthLeft","_numTimes",'{"format": "layers-model", "generatedBy": "keras v2.6.0", "convertedBy": "TensorFlow.js Converter v3.11.0", "modelTopology": {"keras_version": "2.6.0", "backend": "tensorflow", "model_config": {"class_name": "Functional", "config": {"name": "model", "layers": [{"class_name": "InputLayer", "config": {"batch_input_shape": [null, 1160], "dtype": "float32", "sparse": false, "ragged": false, "name": "input_1"}, "name": "input_1", "inbound_nodes": []}, {"class_name": "Dense", "config": {"name": "dense", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense", "inbound_nodes": [[["input_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation", "inbound_nodes": [[["dense", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_1", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_1", "inbound_nodes": [[["activation", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization", "inbound_nodes": [[["dense_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_1", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_1", "inbound_nodes": [[["batch_normalization", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_2", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_2", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_1", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_1", "inbound_nodes": [[["dense_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_2", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_2", "inbound_nodes": [[["batch_normalization_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh1", "trainable": true, "dtype": "float32", "units": 56, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh1", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh1", "trainable": true, "dtype": "float32", "units": 192, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh1", "trainable": true, "dtype": "float32", "units": 170, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_3", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_3", "inbound_nodes": [[["ameh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_6", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_6", "inbound_nodes": [[["bmeh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_9", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_9", "inbound_nodes": [[["dmeh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_12", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_12", "inbound_nodes": [[["emeh1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh2", "trainable": true, "dtype": "float32", "units": 42, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh2", "inbound_nodes": [[["activation_3", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh2", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh2", "inbound_nodes": [[["activation_6", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh2", "trainable": true, "dtype": "float32", "units": 168, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh2", "inbound_nodes": [[["activation_9", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh2", "trainable": true, "dtype": "float32", "units": 136, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh2", "inbound_nodes": [[["activation_12", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "abatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "abatch_meh", "inbound_nodes": [[["ameh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "bbatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "bbatch_meh", "inbound_nodes": [[["bmeh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "dbatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "dbatch_meh", "inbound_nodes": [[["dmeh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "ebatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "ebatch_meh", "inbound_nodes": [[["emeh2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_4", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_4", "inbound_nodes": [[["abatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_7", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_7", "inbound_nodes": [[["bbatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_10", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_10", "inbound_nodes": [[["dbatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_13", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_13", "inbound_nodes": [[["ebatch_meh", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh3", "trainable": true, "dtype": "float32", "units": 21, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh3", "inbound_nodes": [[["activation_4", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh3", "trainable": true, "dtype": "float32", "units": 18, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh3", "inbound_nodes": [[["activation_7", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh3", "trainable": true, "dtype": "float32", "units": 132, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh3", "inbound_nodes": [[["activation_10", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh3", "trainable": true, "dtype": "float32", "units": 85, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh3", "inbound_nodes": [[["activation_13", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_2", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_2", "inbound_nodes": [[["ameh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_3", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_3", "inbound_nodes": [[["bmeh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_4", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_4", "inbound_nodes": [[["dmeh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_5", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_5", "inbound_nodes": [[["emeh3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_5", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_5", "inbound_nodes": [[["batch_normalization_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_8", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_8", "inbound_nodes": [[["batch_normalization_3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_11", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_11", "inbound_nodes": [[["batch_normalization_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_14", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_14", "inbound_nodes": [[["batch_normalization_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "a", "trainable": true, "dtype": "float32", "units": 7, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "a", "inbound_nodes": [[["activation_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "b", "trainable": true, "dtype": "float32", "units": 6, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "b", "inbound_nodes": [[["activation_8", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "d", "trainable": true, "dtype": "float32", "units": 12, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "d", "inbound_nodes": [[["activation_11", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "e", "trainable": true, "dtype": "float32", "units": 17, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "e", "inbound_nodes": [[["activation_14", 0, 0, {}]]]}], "input_layers": [["input_1", 0, 0]], "output_layers": [["a", 0, 0], ["b", 0, 0], ["d", 0, 0], ["e", 0, 0]]}}, "training_config": {"loss": {"class_name": "MeanSquaredError", "config": {"reduction": "auto", "name": "mean_squared_error"}}, "metrics": [[{"class_name": "MeanSquaredError", "config": {"name": "a_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "a_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "b_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "b_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "d_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "d_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "e_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "e_mean_absolute_error", "dtype": "float32"}}]], "weighted_metrics": null, "loss_weights": null, "optimizer_config": {"class_name": "Adam", "config": {"name": "Adam", "learning_rate": 0.0010000000474974513, "decay": 0.0, "beta_1": 0.8999999761581421, "beta_2": 0.9990000128746033, "epsilon": 1e-07, "amsgrad": false}}}}, "weightsManifest": [{"paths": ["group1-shard1of1.bin"], "weights": [{"name": "a/kernel", "shape": [21, 7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.556572911038482, "scale": 1.7865215094000194e-05, "original_dtype": "float32"}}, {"name": "a/bias", "shape": [7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.10618831217288971, "scale": 2.0704332983829415e-06, "original_dtype": "float32"}}, {"name": "abatch_meh/gamma", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.5954435467720032, "scale": 2.906645263843008e-05, "original_dtype": "float32"}}, {"name": "abatch_meh/beta", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.398840860885023, "scale": 4.080394553657963e-05, "original_dtype": "float32"}}, {"name": "abatch_meh/moving_mean", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -45.36759420988479, "scale": 0.0011905317713250792, "original_dtype": "float32"}}, {"name": "abatch_meh/moving_variance", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 272.3578186035156, "scale": 0.053539502146843054, "original_dtype": "float32"}}, {"name": "ameh1/kernel", "shape": [256, 56], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.9669180374410358, "scale": 0.00011625349580755021, "original_dtype": "float32"}}, {"name": "ameh1/bias", "shape": [56], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.5168186292428578, "scale": 4.6718779968671507e-05, "original_dtype": "float32"}}, {"name": "ameh2/kernel", "shape": [56, 42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.3650252736223236, "scale": 6.791951045697492e-05, "original_dtype": "float32"}}, {"name": "ameh2/bias", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.574758284531623e-05, "scale": 2.3699896743890158e-09, "original_dtype": "float32"}}, {"name": "ameh3/kernel", "shape": [42, 21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.387673316711673, "scale": 9.804281297460923e-05, "original_dtype": "float32"}}, {"name": "ameh3/bias", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.000730973485926314, "scale": 2.9787020616394217e-08, "original_dtype": "float32"}}, {"name": "b/kernel", "shape": [18, 6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5878396282318283, "scale": 1.7015156542544527e-05, "original_dtype": "float32"}}, {"name": "b/bias", "shape": [6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06554881483316422, "scale": 3.028060452765455e-06, "original_dtype": "float32"}}, {"name": "batch_normalization/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0659782737493515, "scale": 3.963848691769902e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.737366672465154, "scale": 8.230024447491669e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -639.2119206451883, "scale": 0.019872285041509306, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 28617.220703125, "scale": 2.8634100278000307, "original_dtype": "float32"}}, {"name": "batch_normalization_1/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.7101871967315674, "scale": 2.3909925532266425e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.6198879090019047, "scale": 3.6647389462058384e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -13.417481649510417, "scale": 0.0004462824430237957, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 50.368892669677734, "scale": 0.00735016585105779, "original_dtype": "float32"}}, {"name": "batch_normalization_2/gamma", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.07954882830381393, "scale": 3.61600275842587e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/beta", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3633462526154292, "scale": 2.088299383649275e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_mean", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.555408387268909, "scale": 0.00014231088023768906, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_variance", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 2.9835925102233887, "scale": 0.002103711746191373, "original_dtype": "float32"}}, {"name": "batch_normalization_3/gamma", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.13704028725624084, "scale": 3.136768624467326e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/beta", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.197779997613962, "scale": 1.8280019498412214e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_mean", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.34296822306711, "scale": 8.450012108076716e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_variance", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1.8258646726608276, "scale": 0.0005250956852648708, "original_dtype": "float32"}}, {"name": "batch_normalization_4/gamma", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.018790236537950786, "scale": 3.486129227820183e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/beta", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.0121277259881456, "scale": 1.5666399287797316e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_mean", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -17.618480081107837, "scale": 0.00044627473039103924, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_variance", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 7.623943328857422, "scale": 0.07896514896070637, "original_dtype": "float32"}}, {"name": "batch_normalization_5/gamma", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0004157903604209423, "scale": 2.8974031282717733e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/beta", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.638156025870049, "scale": 2.5022240268070646e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_mean", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -16.018785895385943, "scale": 0.0003304545826794418, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_variance", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 5.026840686798096, "scale": 0.02218802065655397, "original_dtype": "float32"}}, {"name": "bbatch_meh/gamma", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.5382624864578247, "scale": 2.495532742697705e-05, "original_dtype": "float32"}}, {"name": "bbatch_meh/beta", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3300857264544277, "scale": 4.7896497171567435e-05, "original_dtype": "float32"}}, {"name": "bbatch_meh/moving_mean", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -41.23182957402499, "scale": 0.0010736337249772157, "original_dtype": "float32"}}, {"name": "bbatch_meh/moving_variance", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 288.2581481933594, "scale": 0.04803069069500673, "original_dtype": "float32"}}, {"name": "bmeh1/kernel", "shape": [256, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.037021392137733, "scale": 7.896982141915162e-05, "original_dtype": "float32"}}, {"name": "bmeh1/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3618815611999877, "scale": 5.123322403129891e-05, "original_dtype": "float32"}}, {"name": "bmeh2/kernel", "shape": [48, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.2043543038892466, "scale": 8.140316796792111e-05, "original_dtype": "float32"}}, {"name": "bmeh2/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00010922925104205914, "scale": 5.599777045117355e-09, "original_dtype": "float32"}}, {"name": "bmeh3/kernel", "shape": [36, 18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.9007637238278763, "scale": 8.466117686007328e-05, "original_dtype": "float32"}}, {"name": "bmeh3/bias", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.001139454659517362, "scale": 2.9132376946727736e-08, "original_dtype": "float32"}}, {"name": "d/kernel", "shape": [132, 12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5991028362365703, "scale": 1.969890626497124e-05, "original_dtype": "float32"}}, {"name": "d/bias", "shape": [12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.09291373938322067, "scale": 3.661211894671195e-06, "original_dtype": "float32"}}, {"name": "dbatch_meh/gamma", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.9481399059295654, "scale": 3.6249010151980756e-05, "original_dtype": "float32"}}, {"name": "dbatch_meh/beta", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.7675781527363736, "scale": 4.439924022848895e-05, "original_dtype": "float32"}}, {"name": "dbatch_meh/moving_mean", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -93.1041650764091, "scale": 0.0026268703291597523, "original_dtype": "float32"}}, {"name": "dbatch_meh/moving_variance", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 416.5739440917969, "scale": 0.09431991524760744, "original_dtype": "float32"}}, {"name": "dense/kernel", "shape": [1160, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.302071191004524, "scale": 0.0001244848285831339, "original_dtype": "float32"}}, {"name": "dense/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.7899360630508045, "scale": 0.00017292907547785213, "original_dtype": "float32"}}, {"name": "dense_1/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.728972155174511, "scale": 0.00014147162937668684, "original_dtype": "float32"}}, {"name": "dense_1/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.659173342545318e-05, "scale": 8.986122406546762e-10, "original_dtype": "float32"}}, {"name": "dense_2/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.380055203386509, "scale": 0.00019140694282725572, "original_dtype": "float32"}}, {"name": "dense_2/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.0005605566668835558, "scale": 1.521102428317475e-08, "original_dtype": "float32"}}, {"name": "dmeh1/kernel", "shape": [256, 192], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.886825000451233, "scale": 9.821166869949547e-05, "original_dtype": "float32"}}, {"name": "dmeh1/bias", "shape": [192], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.4170925846814364, "scale": 6.929936594172529e-05, "original_dtype": "float32"}}, {"name": "dmeh2/kernel", "shape": [192, 168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.7923388286432544, "scale": 0.00012085690436141664, "original_dtype": "float32"}}, {"name": "dmeh2/bias", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.53316866229146e-05, "scale": 1.3870111869447297e-09, "original_dtype": "float32"}}, {"name": "dmeh3/kernel", "shape": [168, 132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.241508069892966, "scale": 0.00013638040407704227, "original_dtype": "float32"}}, {"name": "dmeh3/bias", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00012595775596559573, "scale": 3.5738779924411452e-09, "original_dtype": "float32"}}, {"name": "e/kernel", "shape": [85, 17], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.6249463344280604, "scale": 1.7811843311521986e-05, "original_dtype": "float32"}}, {"name": "e/bias", "shape": [17], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0452120378613472, "scale": 3.36981284915787e-06, "original_dtype": "float32"}}, {"name": "ebatch_meh/gamma", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.8508233428001404, "scale": 3.097433060523601e-05, "original_dtype": "float32"}}, {"name": "ebatch_meh/beta", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.0944821072104975, "scale": 6.662474495691375e-05, "original_dtype": "float32"}}, {"name": "ebatch_meh/moving_mean", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -65.29840389119866, "scale": 0.001759448276646961, "original_dtype": "float32"}}, {"name": "ebatch_meh/moving_variance", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 323.66790771484375, "scale": 0.08672052419657673, "original_dtype": "float32"}}, {"name": "emeh1/kernel", "shape": [256, 170], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.5674398564197314, "scale": 0.00012560523401238403, "original_dtype": "float32"}}, {"name": "emeh1/bias", "shape": [170], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.893315350761073, "scale": 7.135969209863836e-05, "original_dtype": "float32"}}, {"name": "emeh2/kernel", "shape": [170, 136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.05371150677961, "scale": 0.00019732581729645896, "original_dtype": "float32"}}, {"name": "emeh2/bias", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.348974392223888e-05, "scale": 9.267951825719906e-10, "original_dtype": "float32"}}, {"name": "emeh3/kernel", "shape": [136, 85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.8435495867867076, "scale": 0.00013598982471254477, "original_dtype": "float32"}}, {"name": "emeh3/bias", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00011991454833326964, "scale": 3.425542716484878e-09, "original_dtype": "float32"}}]}]}',"lessThan","acquire","spki","domainReentrant","customModelMetaUrl","zzDecode","getPrototypeOf","fromPartial","You must pass a function to execute","invalid varint encoding","already ended","createPrediction","constructor","of type ",'"iat" claim must be a number',"tune","crit","7TEzjFv","rpcCall",'unexpected "typ" JWT header value',"startsWith","isArray","isBusy","image","all","setMinCutoff","oneOfGetter","close","encode",'"exp" claim must be a number',"splice","buf","atan2","encrypt","dcodeIO","jawLeft","RS256","eyeBlink_L","has","some","mouthStretch_R","_faceStats","predict","3514830fpamlm","zzEncode","setAlpha","ZERO","-Infinity","The input to be decoded is not correctly encoded.","call","Stream has no video tracks","utf8Slice","length","stopped","toNumber","type","rem_u","6056793inCjTa","key64Re","util","state","initialized","sub","iss","ES512","pop","Infinity","private","width","AUPredictor initialized.","requestVideoFrameCallback","dcutoff should be >0","tris","fromHash",'" MUST be integrity protected',"nbf","boolean","array","apply","-----BEGIN PUBLIC KEY-----","bezier_y1","copy","then","Key must be ","_configure","invalid","shl","double","equals","sint64",' instances for symmetric algorithms must be of type "secret"',"usages","Service","minCutoff","clearTimeout has not been defined","fromJSON",'" is missing',"8pvGoqb","algorithm.hash","readDoubleBE","initialize","now","join","fromValue","https://hallway-public.nyc3.cdn.digitaloceanspaces.com/webSDK/Mouth_Smile_Opene_uint16_bin_norm_dist7/","subarray","+Infinity",'"iat" claim timestamp check failed (it should be in the past)',"toInt","rpcImpl must be a function","ECDSA","ERR_JOSE_GENERIC","shouldMirrorOutput","data_means","mouthRollUpper","lastRawValue","eyeLookUp_R","gte","zeroHash","rpcImpl","HS384","transformX","rollFilter","resolve"," Received function ","clockTolerance","jawOpen","ERR_JWT_CLAIM_VALIDATION_FAILED","fromInt","JWT Claims Set must be a top-level JSON object","roll","MAX_VALUE","mouthFrown_R","requestFrameToken","getNumBitsAbs","blendShapeTune","shiftRight","lcFirst","long"," must be ","mouthLowerDown_L","getModel","setVideoFrameCallback","uint64","fromNumber","eyeLookUp_L","isObject","freeze","code","mouthPress_R","_Buffer_from","customModelUrl","tensor","jawForward","browser","dataSync","len","browDown_R","https://hallway.nyc3.cdn.digitaloceanspaces.com/face_mesh/0.4.1633559619/","divide","browInnerUp","abs","stack","PS384","base64","skip","mod","floor","writeDoubleLE","alloc","val","-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoqnt8ovlPhSlFr2pKTeod2hshZ1hIXJj1mWhPj4EG3piVhflM3rK1YYtWEeAubOqolzOeODTYDXVGxdjd64cIKcXpHfEj5G0RirjcUmUrcoIagQMsPaAV/GcJXX9VVbrpWQnI7Spj7WlcMPhyofj6JHf0kvKChZN4ZG/UQouy4AbIWOtu5lxIw307JSkF1boS902tAycgNoCnX6YLDOTWKPPihkBB/zhJqeaTQbSki9ADan/94uddSGXiEsqljynrc6oxCAN7oYxz2URgNkA0cP/3gAYyoABWioxw8IEeLrDVV0OYOH/ZKGfcaovWI2m6n0+J03bwh3cP8oN7/u9qQIDAQAB-----END PUBLIC KEY-----","signature","readFloatBE","check_failed","newError","error","getVideoTracks",'" is not recognized',"mouthSmile_R","JWS Payload must be a string or an Uint8Array instance","Long","_slice","ceil","throw","skipQueue","mouthLowerDown_R","isOdd","ERR_JWS_INVALID","Initializing AUPredictor...","done","yaw","modulo","interior hyphen","mouthFrown_L","inquire","CryptoKey does not support this operation, its ","BufferWriter"," requires key modulusLength to be 2048 bits or larger","endsWith","isEven","set","toSigned","toLowerCase","comp","mouthStretch_L","Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, ","int64","blendShapes","max","sign","lastUpdateTime","one of type ","shru","push","CryptoKey does not support this operation, its usages must include ","iat","numTimes","seconds","getTracks","easingCurves","longFromHash","sorted","alpha","\0\0\0\0\0\0\0\0","exp","373667UJHCOK","_getScalerTriFeatureVectorDot","predictor-lock","use a NodeJS version that still implements Domain, or install a browser polyfill.","_lastUpdateTime"," at offset ","minute","jawRight","ldelim","P-256","mouthClose","subtle","toLong","mouthDimple_L","newBuffer","Tensor","writeFloatBE","forEach","build","transformZ","Ed448","Invalid time period format","eyeLookOut_R","pos","utf8","sint32","greaterThan","uint32","_dataStream","endScope","_listeners","HS256","one of ","fork","eyeLookOut_L","browOuterUp_L","getLowBitsUnsigned","head",' instances for asymmetric algorithm encryption must be of type "public"',"mouthUpperUp_R","division by zero","dir","DEFAULT_MAX_PENDING","NODE-ED448","states","lasttime","public","diffAmp","ECDH-ES+A128KW","isNegative","CryptoKey","urn:hallway:issuer","reduce","domains","negate","toUpperCase","weightSpecs","div","encodeDelimited","emit",'{"browDown_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browDown_R":{"fps":30,"minCutoff":0.001,"beta":10,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browInnerUp":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeBlink_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeBlink_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeLookDown_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookDown_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawOpen":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.030685920577617327,"bezier_y1":0.0040000000000000036,"bezier_x2":1,"bezier_y2":1},"mouthClose":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.023465703971119134,"bezier_y1":0.03200000000000003,"bezier_x2":1,"bezier_y2":1},"mouthFunnel":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPucker":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLeft":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRight":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawLeft":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawRight":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"noseSneer_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"noseSneer_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"tune_points":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1}}',"actionUnitModel","isBuffer","transform","claim","ONE","beta_","RSA-OAEP",'unexpected "sub" claim value',"isInteger",'Flattened JWS must have either of the "protected" or "header" members',"RS384","faceMeshResultsCallback","init","_acquireBatch","resultsCallback","__esModule","entries","unsigned","start","isSet","charCodeAt","startScope","value","name","read","Promise","900788OFFnrj","filter","map","unprotectedHeader","greaterThanOrEqual","startTime","neg","data_std","number","updateInterval","utf8Write","fromBits","writeDoubleBE","_tune",'{"tris": [[[7, 8, 9, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 35, 46, 52, 53, 55, 56, 63, 65, 66, 68, 69, 70, 71, 104, 105, 107, 108, 110, 111, 112, 113, 117, 118, 119, 120, 121, 124, 128, 130, 133, 139, 143, 144, 145, 151, 153, 154, 155, 156, 157, 158, 159, 160, 161, 163, 168, 173, 189, 190, 193, 221, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 243, 244, 245, 246, 247, 468, 469, 470, 471, 472], [60, 51, 43, 79, 13, 0, 38, 39, 73, 74, 73, 39, 39, 41, 74, 75, 74, 41, 50, 51, 53, 60, 53, 51, 2, 48, 29, 30, 29, 48, 36, 37, 71, 72, 71, 37, 10, 11, 56, 57, 56, 11, 19, 53, 62, 60, 62, 53, 5, 4, 46, 47, 46, 4, 63, 61, 78, 77, 78, 61, 8, 55, 9, 54, 9, 55, 11, 80, 57, 79, 57, 80, 18, 63, 1, 59, 1, 63, 32, 35, 12, 70, 12, 35, 18, 64, 63, 61, 63, 64, 50, 7, 51, 33, 51, 7, 66, 16, 67, 17, 67, 16, 37, 38, 72, 73, 72, 38, 80, 34, 42, 69, 42, 34, 16, 28, 17, 20, 17, 28, 15, 25, 40, 52, 40, 25, 17, 20, 15, 25, 15, 20, 49, 3, 50, 7, 50, 3, 9, 54, 19, 53, 19, 54, 34, 40, 69, 14, 69, 40, 8, 10, 55, 56, 55, 10, 68, 15, 34, 40, 34, 15, 22, 24, 28, 27, 28, 24, 18, 29, 21, 22, 21, 29, 28, 27, 20, 23, 20, 27, 1, 2, 18, 29, 18, 2, 3, 49, 4, 47, 4, 49, 67, 17, 68, 15, 68, 17, 5, 46, 31, 58, 31, 46, 21, 22, 16, 28, 16, 22, 35, 36, 70, 71, 70, 36, 29, 30, 22, 24, 22, 30, 14, 45, 32, 57, 79, 58, 0, 58, 79, 21, 16, 65, 66, 65, 16, 21, 65, 18, 64, 18, 65, 42, 6, 13, 0, 13, 6, 25, 26, 52, 44, 52, 26, 79, 80, 13, 42, 13, 80, 47, 49, 55, 54, 55, 49, 56, 57, 46, 58, 46, 57, 55, 56, 47, 46, 47, 56, 20, 23, 25, 26, 25, 23, 32, 12, 14, 69, 14, 12, 49, 50, 54, 53, 54, 50, 51, 33, 43, 76, 43, 33, 62, 60, 76, 43, 76, 60, 52, 44, 45, 70, 71, 31, 5, 31, 71, 12, 6, 69, 42, 69, 6, 71, 72, 5, 4, 5, 72, 72, 73, 4, 3, 4, 73, 73, 74, 3, 7, 3, 74, 7, 74, 33, 75, 33, 74, 61, 62, 77, 76, 77, 62, 64, 19, 61, 62, 61, 19, 64, 65, 19, 9, 19, 65, 65, 66, 9, 8, 9, 66, 67, 10, 66, 8, 66, 10, 10, 67, 11, 68, 11, 67, 11, 68, 80, 34, 80, 68, 33, 75, 76, 77, 76, 75, 75, 41, 77, 78, 77, 41, 40, 52, 14, 45, 14, 52, 6, 31, 0, 58, 0, 31, 12, 70, 6, 31, 6, 70, 85, 13, 83, 83, 43, 85, 84, 55, 82, 82, 47, 84]], [[8, 9, 151, 168, 249, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 263, 265, 276, 282, 283, 285, 286, 293, 295, 296, 298, 299, 300, 301, 333, 334, 336, 337, 339, 340, 341, 342, 346, 347, 348, 349, 350, 353, 357, 359, 362, 368, 372, 373, 374, 380, 381, 382, 383, 384, 385, 386, 387, 388, 390, 398, 413, 414, 417, 441, 442, 443, 444, 445, 446, 448, 449, 450, 451, 452, 453, 463, 464, 465, 466, 467, 473, 474, 475, 476, 477], [52, 60, 45, 15, 79, 4, 40, 73, 41, 74, 41, 73, 41, 74, 43, 75, 43, 74, 51, 54, 52, 60, 52, 54, 1, 31, 2, 32, 2, 31, 38, 71, 39, 72, 39, 71, 12, 57, 13, 58, 13, 57, 21, 62, 54, 60, 54, 62, 7, 48, 6, 49, 6, 48, 63, 78, 61, 77, 61, 78, 10, 11, 56, 55, 56, 11, 13, 58, 80, 79, 80, 58, 20, 0, 63, 3, 63, 0, 34, 14, 37, 70, 37, 14, 20, 63, 64, 61, 64, 63, 51, 52, 9, 35, 9, 52, 66, 67, 18, 19, 18, 67, 39, 72, 40, 73, 40, 72, 80, 44, 36, 69, 36, 44, 18, 19, 30, 22, 30, 19, 17, 42, 27, 53, 27, 42, 19, 17, 22, 27, 22, 17, 50, 51, 5, 9, 5, 51, 11, 21, 55, 54, 55, 21, 36, 69, 42, 16, 42, 69, 10, 56, 12, 57, 12, 56, 68, 36, 17, 42, 17, 36, 24, 30, 26, 29, 26, 30, 20, 23, 31, 24, 31, 23, 30, 22, 29, 25, 29, 22, 0, 20, 1, 31, 1, 20, 5, 6, 50, 49, 50, 6, 67, 68, 19, 17, 19, 68, 7, 33, 48, 59, 48, 33, 23, 18, 24, 30, 24, 18, 37, 70, 38, 71, 38, 70, 31, 24, 32, 26, 32, 24, 16, 34, 47, 58, 59, 79, 4, 79, 59, 23, 65, 18, 66, 18, 65, 23, 20, 65, 64, 65, 20, 44, 15, 8, 4, 8, 15, 27, 53, 28, 46, 28, 53, 79, 15, 80, 44, 80, 15, 49, 56, 50, 55, 50, 56, 57, 48, 58, 59, 58, 48, 56, 49, 57, 48, 57, 49, 22, 27, 25, 28, 25, 27, 34, 16, 14, 69, 14, 16, 50, 55, 51, 54, 51, 55, 52, 45, 35, 76, 35, 45, 62, 76, 60, 45, 60, 76, 53, 47, 46, 70, 33, 71, 7, 71, 33, 14, 69, 8, 44, 8, 69, 71, 7, 72, 6, 72, 7, 72, 6, 73, 5, 73, 6, 73, 5, 74, 9, 74, 5, 9, 35, 74, 75, 74, 35, 61, 77, 62, 76, 62, 77, 64, 61, 21, 62, 21, 61, 64, 21, 65, 11, 65, 21, 65, 11, 66, 10, 66, 11, 67, 66, 12, 10, 12, 66, 12, 13, 67, 68, 67, 13, 13, 80, 68, 36, 68, 80, 35, 76, 75, 77, 75, 76, 75, 77, 43, 78, 43, 77, 42, 16, 53, 47, 53, 16, 8, 4, 33, 59, 33, 4, 14, 8, 70, 33, 70, 8, 85, 45, 83, 85, 15, 83, 84, 56, 82, 82, 49, 84]], [[0, 2, 11, 12, 13, 14, 15, 16, 17, 18, 37, 38, 39, 40, 41, 42, 43, 57, 61, 62, 72, 73, 74, 76, 77, 78, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 95, 96, 97, 98, 106, 146, 164, 165, 167, 178, 179, 180, 181, 182, 183, 184, 185, 186, 191, 194, 200, 201, 202, 203, 204, 206, 207, 210, 212, 214, 216, 267, 268, 269, 270, 271, 272, 273, 287, 291, 292, 302, 303, 304, 306, 307, 308, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 335, 375, 391, 393, 402, 403, 404, 405, 406, 407, 408, 409, 410, 415, 418, 421, 422, 423, 424, 426, 427, 430, 432, 434, 436], [85, 116, 99, 25, 39, 57, 70, 0, 80, 10, 20, 0, 2, 80, 0, 2, 0, 20, 70, 80, 72, 10, 12, 20, 81, 72, 80, 21, 20, 12, 72, 81, 73, 12, 13, 21, 82, 73, 81, 22, 21, 13, 82, 113, 73, 22, 13, 54, 114, 73, 113, 55, 54, 13, 75, 86, 112, 15, 53, 26, 116, 112, 86, 57, 26, 53, 98, 73, 115, 38, 56, 13, 114, 115, 73, 55, 13, 56, 126, 125, 124, 68, 66, 67, 119, 124, 125, 61, 67, 66, 89, 90, 9, 29, 9, 30, 8, 9, 90, 8, 30, 9, 84, 104, 83, 24, 23, 44, 78, 83, 104, 18, 44, 23, 117, 121, 111, 58, 52, 63, 103, 111, 121, 43, 63, 52, 105, 120, 102, 46, 42, 62, 96, 97, 84, 36, 24, 37, 104, 84, 97, 44, 37, 24, 118, 89, 59, 60, 59, 29, 9, 59, 89, 9, 29, 59, 103, 97, 111, 43, 52, 37, 110, 111, 97, 51, 37, 52, 110, 97, 109, 51, 50, 37, 96, 109, 97, 36, 37, 50, 8, 90, 7, 8, 7, 30, 91, 7, 90, 31, 30, 7, 105, 72, 98, 46, 38, 12, 73, 98, 72, 13, 12, 38, 103, 76, 97, 43, 37, 16, 104, 97, 76, 44, 16, 37, 100, 79, 99, 40, 39, 19, 85, 99, 79, 25, 19, 39, 127, 123, 122, 69, 64, 65, 105, 106, 72, 46, 12, 47, 70, 72, 106, 10, 47, 12, 119, 125, 76, 61, 16, 67, 77, 76, 125, 17, 67, 16, 121, 119, 103, 63, 43, 61, 76, 103, 119, 16, 61, 43, 83, 79, 84, 23, 24, 19, 100, 84, 79, 40, 19, 24, 80, 71, 81, 20, 21, 11, 74, 81, 71, 14, 11, 21, 81, 74, 82, 21, 22, 14, 75, 82, 74, 15, 14, 22, 123, 127, 126, 65, 68, 69, 125, 126, 127, 67, 69, 68, 82, 75, 113, 22, 54, 15, 112, 113, 75, 53, 15, 54, 95, 96, 100, 35, 40, 36, 84, 100, 96, 24, 36, 40, 109, 96, 108, 50, 49, 36, 95, 108, 96, 35, 36, 49, 7, 91, 6, 7, 6, 31, 92, 6, 91, 32, 31, 6, 6, 92, 5, 6, 5, 32, 93, 5, 92, 33, 32, 5, 107, 108, 94, 48, 34, 49, 95, 94, 108, 35, 49, 34, 99, 94, 100, 39, 40, 34, 95, 100, 94, 35, 34, 40, 74, 87, 75, 14, 15, 27, 86, 75, 87, 26, 27, 15, 76, 77, 104, 16, 44, 17, 78, 104, 77, 18, 17, 44, 71, 88, 74, 11, 14, 28, 87, 74, 88, 27, 28, 14, 112, 116, 79, 53, 19, 57, 85, 79, 116, 25, 57, 19, 122, 98, 127, 64, 69, 38, 115, 127, 98, 56, 38, 69, 106, 101, 45, 47, 45, 41, 1, 45, 101, 1, 41, 45, 0, 70, 45, 0, 45, 10, 106, 45, 70, 47, 10, 45, 2, 3, 80, 2, 20, 3, 71, 80, 3, 11, 3, 20, 3, 4, 71, 3, 11, 4, 88, 71, 4, 28, 4, 11, 120, 105, 122, 62, 64, 46, 98, 122, 105, 38, 46, 64, 105, 102, 106, 46, 47, 42, 101, 106, 102, 41, 42, 47, 92, 108, 93, 32, 33, 49, 107, 93, 108, 48, 49, 33, 91, 109, 92, 31, 32, 50, 108, 92, 109, 49, 50, 32, 90, 110, 91, 30, 31, 51, 109, 91, 110, 50, 51, 31, 89, 111, 90, 29, 30, 52, 110, 90, 111, 51, 52, 30, 117, 111, 118, 58, 60, 52, 89, 118, 111, 29, 52, 60, 113, 112, 83, 54, 23, 53, 79, 83, 112, 19, 53, 23, 113, 83, 114, 54, 55, 23, 78, 114, 83, 18, 23, 55, 115, 114, 77, 56, 17, 55, 78, 77, 114, 18, 55, 17, 127, 115, 125, 69, 67, 56, 77, 125, 115, 17, 56, 67, 5, 93, 4, 5, 4, 33, 88, 4, 93, 28, 33, 4, 93, 107, 88, 33, 28, 48, 87, 88, 107, 27, 48, 28, 107, 94, 87, 48, 27, 34, 86, 87, 94, 26, 34, 27, 94, 99, 86, 34, 26, 39, 116, 86, 99, 57, 39, 26]], [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477], [0, 1, 36, 0, 36, 17, 1, 2, 41, 1, 41, 36, 2, 3, 31, 2, 31, 41, 3, 4, 48, 3, 48, 31, 4, 5, 48, 5, 6, 48, 6, 7, 59, 6, 59, 48, 7, 8, 58, 7, 58, 59, 8, 9, 56, 8, 56, 57, 8, 57, 58, 9, 10, 55, 9, 55, 56, 10, 11, 54, 10, 54, 55, 11, 12, 54, 12, 13, 54, 13, 14, 35, 13, 35, 54, 14, 15, 46, 14, 46, 35, 15, 16, 45, 15, 45, 46, 16, 26, 45, 17, 36, 18, 18, 37, 19, 18, 36, 37, 19, 38, 20, 19, 37, 38, 20, 39, 21, 20, 38, 39, 21, 39, 27, 22, 42, 23, 22, 27, 42, 23, 43, 24, 23, 42, 43, 24, 44, 25, 24, 43, 44, 25, 45, 26, 25, 44, 45, 27, 39, 28, 27, 28, 42, 28, 39, 29, 28, 29, 42, 29, 31, 30, 29, 30, 35, 29, 40, 31, 29, 35, 47, 29, 39, 40, 29, 47, 42, 30, 31, 32, 30, 32, 33, 30, 33, 34, 30, 34, 35, 31, 50, 32, 31, 40, 41, 31, 48, 49, 31, 49, 50, 32, 51, 33, 32, 50, 51, 33, 51, 34, 34, 52, 35, 34, 51, 52, 35, 46, 47, 35, 52, 53, 35, 53, 54, 36, 41, 37, 37, 40, 38, 37, 41, 40, 38, 40, 39, 42, 47, 43, 43, 47, 44, 44, 46, 45, 44, 47, 46, 48, 60, 49, 48, 59, 60, 49, 61, 50, 49, 60, 61, 50, 62, 51, 50, 61, 62, 51, 62, 52, 52, 63, 53, 52, 62, 63, 53, 64, 54, 53, 63, 64, 54, 64, 55, 55, 65, 56, 55, 64, 65, 56, 66, 57, 56, 65, 66, 57, 66, 58, 58, 67, 59, 58, 66, 67, 59, 67, 60, 60, 67, 61, 61, 66, 62, 61, 67, 66, 62, 66, 63, 63, 65, 64, 63, 66, 65, 21, 27, 22, 472, 33, 470, 470, 133, 472, 471, 159, 469, 469, 145, 471, 477, 362, 475, 477, 263, 475, 476, 386, 474, 474, 374, 476]]], "label_keys": [["browDown_L", "cheekSquint_L", "browOuterUp_L", "browDown_R", "browOuterUp_R", "cheekSquint_R", "browInnerUp"], ["eyeBlink_L", "eyeBlink_R", "eyeSquint_L", "eyeSquint_R", "eyeWide_L", "eyeWide_R"], ["eyeLookDown_L", "eyeLookDown_R", "eyeLookIn_L", "eyeLookIn_R", "eyeLookOut_L", "eyeLookOut_R", "eyeLookUp_L", "eyeLookUp_R"], ["jawOpen", "jawLeft", "jawRight", "mouthClose", "mouthFunnel", "mouthPucker", "mouthRollLower", "mouthRollUpper", "mouthShrugLower", "mouthShrugUpper", "noseSneer_L", "noseSneer_R"], ["mouthLeft", "mouthRight", "mouthSmile_L", "mouthSmile_R", "mouthFrown_L", "mouthFrown_R", "mouthDimple_L", "mouthDimple_R", "mouthStretch_L", "mouthStretch_R", "mouthPress_L", "mouthPress_R", "mouthLowerDown_L", "mouthLowerDown_R", "mouthUpperUp_L", "mouthUpperUp_R"]], "type": "multi_spur_dot", "data_min": [-0.0017550074262544513, -0.0015888019697740674, -0.0017187476623803377, -0.0027021938003599644, -0.00840499997138977, -0.012177195399999619, -0.006785913370549679, -0.011435691267251968, -0.009481549263000488, -0.011232671327888966, -0.005913160741329193, -0.006541644688695669, -0.004088891204446554, -0.0028658448718488216, 0.0008937628008425236, -0.0014253321569412947, -0.003379533998668194, -0.05247845500707626, -0.03722202777862549, -0.01632705330848694, -0.015382098965346813, -0.02333829551935196, -0.0063448259606957436, -0.006486705970019102, -0.026732610538601875, -0.002594631165266037, -0.0024819879326969385, -0.0011332901194691658, -0.014717886224389076, -0.020526109263300896, 0.0009483033209107816, -6.562717317137867e-05, 0.003971200902014971, -0.0025534299202263355, 0.005063787568360567, 8.11954087112099e-05, -0.013988249003887177, -0.006610263604670763, -0.0003309780149720609, 0.00545515026897192, -0.004532479215413332, -0.0015585519140586257, 0.002584811532869935, 0.002811002777889371, -0.020826643332839012, -0.0017957848031073809, -0.0023131167981773615, 0.0008118495461530983, -0.18270130455493927, -0.02499575726687908, -0.031774282455444336, 0.0010722535662353039, -0.0051225703209638596, -0.005623739678412676, -0.009153920225799084, 0.008124765940010548, -0.04908079281449318, -0.006196742877364159, -0.005988628137856722, 0.006428960710763931, 0.0003101342299487442, -0.00232656835578382, -0.001176844467408955, -0.00084810791304335, -0.006075503770262003, -0.02473851852118969, -0.015873298048973083, -0.01800304837524891, -0.008554470725357533, -0.02030240371823311, -0.004769818391650915, -0.013027854263782501, -0.005569886416196823, -0.002855725586414337, -0.02324126660823822, -0.0011017153738066554, -0.01515586581081152, -0.007202725391834974, -0.021577106788754463, -0.0047977459616959095, -0.015712302178144455, 0.0018171507399529219, -0.04218415543437004, 0.003599596442654729, -0.008515105582773685, 0.003922000527381897, -0.03360369801521301, 0.004381608683615923, -0.0012833441141992807, -0.0011298761237412691, -0.0034428401850163937, -0.0007926009711809456, -0.007261634338647127, -0.025431213900446892, -0.0021018001716583967, 0.0012902612797915936, -0.00821943674236536, 0.0015087845968082547, -0.03998952358961105, 0.003925271797925234, -0.00425840076059103, -0.004315055441111326, -0.0050179981626570225, -0.0028619857039302588, -0.004568891599774361, -0.0025188063737004995, -0.018748672679066658, 0.0018272872548550367, -0.03501500189304352, -0.060936089605093, -0.06657426059246063, -0.07045453786849976, -0.05476086586713791, 0.013215681537985802, -0.033690210431814194, 0.028368977829813957, -0.03590276837348938, -0.06219175085425377, -0.05718810483813286, -0.09179447591304779, -0.049490347504615784, 0.003276834264397621, -0.2224636822938919, 0.005630712490528822, -0.004936552606523037, 0.0021044814493507147, -0.0023064170964062214, 0.000921845727134496, -0.0016314919339492917, -0.0032274883706122637, -0.014002657495439053, 0.0007550256559625268, -0.004097432363778353, -0.004856402985751629, -0.0015870482893660665, -0.0033077180851250887, -0.016597673296928406, 0.005158626474440098, -0.03445936739444733, 0.00545958336442709, -0.022790541872382164, -0.011063412763178349, -0.01793551817536354, -0.00035710117663256824, -0.03299255669116974, -0.05196274071931839, -0.049705177545547485, -0.06774846464395523, -0.01917189545929432, 0.004815578460693359, -0.012143676169216633, -0.0023987065069377422, 0.0005946963792666793, -0.001411741366609931, 7.520611688960344e-05, -0.013843615539371967, 0.014278718270361423, 0.001808188739232719, -0.06429895013570786, -0.003280320903286338, -0.022841110825538635, -0.017019130289554596, 0.00048229319509118795, -0.00966423936188221, -0.004826822783797979, -0.0011247374350205064, -0.041764434427022934, -0.10759850591421127, -0.04113900661468506, -0.12872539460659027, -0.002331000519916415, -0.007355756126344204, -0.007285710424184799, 9.530829265713692e-05, 0.001222519320435822, -0.005669853650033474, 0.0021250322461128235, -0.004807861056178808, -0.01985650695860386, -0.00402058707550168, 0.0022181477397680283, -0.00294042332097888, 0.0011985059827566147, -0.005299006123095751, 0.004811618942767382, -0.005190132185816765, -0.04117422178387642, -0.09933539479970932, -0.062477342784404755, -0.13131371140480042, -0.028346074745059013, -0.004036494065076113, -0.007280837744474411, -0.00048430555034428835, -0.005807450041174889, -0.0051109096966683865, 0.002538948552682996, -0.004422084894031286, -3.6005385481985286e-05, -0.0023883762769401073, -0.004277486819773912, -0.0021956029813736677, -0.005624614655971527, -0.0037700277753174305, 0.0009276365162804723, 0.0012946042697876692, -0.00729520944878459, -0.0934818908572197, -0.013185937888920307, -0.006523772142827511, -0.01293903961777687, -0.002899773186072707, -0.012736348435282707, -0.013921556994318962, -0.0031980155035853386, -0.00262717017903924, -0.013627937063574791, -0.013069857843220234, -0.010410521179437637, -0.00437180744484067, -0.008226401172578335, -0.011711595579981804, -0.003236369928345084, -0.002269494580104947, -0.005061361473053694, -0.009619944728910923, -0.004189006984233856, -0.00493813119828701, 0.001313506276346743, -0.0005794925382360816, -0.0007508127600885928, -0.00255648628808558, -0.008849035948514938, 0.0015626826789230108, 0.002015381818637252, 0.003440193133428693, -0.0169757679104805, 0.008412284776568413, -0.0024139813613146544, 0.007210076320916414, 0.004792986903339624, -0.024742357432842255, 0.0032899959478527308, -0.0026013581082224846, 0.011801465414464474, -0.009576565586030483, 0.010437027551233768, -0.002092166803777218, -0.011856031604111195, -0.009130856953561306, -0.005431095138192177, -0.009956598281860352, -0.0008372836746275425, -0.0015743045369163156, -0.006356232333928347, -0.002174090128391981, -0.0005838467041030526, -0.0015569630777463317, -0.01587550714612007, 0.0004350940871518105, 0.0016732083167880774, -0.0030427975580096245, -0.0050909495912492275, -0.004462432581931353, -0.0017954494105651975, 0.002329146256670356, -0.0049954853020608425, 0.0029943769332021475, -0.023720422759652138, 0.010021002031862736, -0.04896392300724983, 0.00955036748200655, -0.003149070544168353, -0.003595980117097497, -0.0044156694784760475, -0.00015828415052965283, -0.007738469168543816, -0.0006288129952736199, -0.007669622078537941, 0.0032958819065243006, -0.015032083727419376, -0.06351669132709503, -0.032248154282569885, -0.18025453388690948, -0.06163984164595604, -0.09758920222520828, -0.05956967547535896, -0.15200407803058624, -0.001096255611628294, -0.00139527244027704, -0.0028954821173101664, -0.002875474514439702, -0.011264363303780556, -0.014317790977656841, -0.010434065014123917, -0.01481181662529707, -0.011153372935950756, -0.007928225211799145, -0.005756193306297064, -0.006947657559067011, -0.0035682523157447577, -0.00456055486574769, -0.0018615118460729718, 0.0007266966858878732, -0.061812303960323334, -0.007415087893605232, -0.08674275130033493, -0.04630497470498085, -0.02018740214407444, -0.02930389530956745, -0.0054146163165569305, -0.019008932635188103, -0.001769978436641395, -0.030524788424372673, -0.00014460454985965043, -0.005722136236727238, -0.019330516457557678, -0.013080030679702759, -0.0005406397976912558, 0.0006768343737348914, -0.003592651104554534, -0.00011539365368662402, -0.0007877812604419887, 0.001867897342890501, -0.004998684860765934, -0.018355347216129303, 0.0033769430592656136, -0.002138799522072077, 0.005226228851824999, -0.0060445996932685375, 0.00563605735078454, 0.0006765238358639181, -0.004361319821327925, -0.025803610682487488, 0.000510705285705626, -0.0015869643539190292, -0.03488793224096298, -0.17181245982646942, -0.005682847928255796, -0.03906115144491196, -0.0038437219336628914, -0.0062820790335536, 0.0022861266043037176, -0.004289176315069199, -0.007193434052169323, -0.036163829267024994, -0.003429545322433114, -0.006793618202209473, -0.0032077347859740257, 0.00011159323912579566, -0.0019818281289190054, -0.001566017046570778, -0.004464716650545597, -0.006538650020956993, 0.001966161886230111, -0.017514653503894806, -0.015502318739891052, -0.02005508542060852, -0.00971568189561367, -0.01379891112446785, -0.002751927822828293, -0.007097617257386446, -0.0010141932871192694, -0.022898994386196136, 0.011320621706545353, -0.01667596586048603, 0.013757219538092613, -0.023103035986423492, -0.002773732878267765, -0.011905886232852936, -0.0027192996349185705, -0.03863510489463806, 0.0026216416154056787, -0.010501322336494923, 0.003675147658213973, -0.036132875829935074, 0.0014550071209669113, -0.0018736012279987335, 0.0019570349249988794, -0.004570788703858852, -0.024695543572306633, -0.0070677087642252445, 0.0015389658510684967, -0.0015470845391973853, -0.0017567910254001617, -0.01030063722282648, -0.0004982421523891389, -0.03609298914670944, -0.002823418006300926, -0.010021904483437538, -0.000822446309030056, -0.008871868252754211, -0.004276425112038851, -0.0027345081325620413, -0.00210174429230392, -0.03211423382163048, -0.1239132508635521, -0.03809807822108269, -0.22577586770057678, -0.06880004703998566, 0.006170286331325769, -0.046202756464481354, 0.01874195598065853, -0.031128570437431335, -0.14452524483203888, -0.03727085888385773, -0.19164685904979706, -0.05660000815987587, -0.005821654573082924, -0.07455462217330933, -0.012828732840716839, -0.17196810245513916, 0.006120102945715189, -0.005307846236974001, 0.0050476123578846455, -0.0035822747740894556, -0.004437021445482969, -0.004186282865703106, -0.001121386419981718, -0.013540775515139103, -0.0007832555565983057, -0.004128068685531616, -0.002604132052510977, -0.0006470903754234314, 0.00934524368494749, -0.020768797025084496, 0.02071642130613327, -0.036626044660806656, -0.015338278375566006, -0.018702659755945206, -0.0023613718803972006, -0.014420952647924423, -0.09450634568929672, -0.041014645248651505, -0.15458405017852783, -0.04692044109106064, 0.0024283176753669977, -0.020913168787956238, -0.0030568446964025497, -0.011409053578972816, -0.0018502924358472228, -8.079489634837955e-05, -0.01686715893447399, -0.004737157374620438, 0.007374128792434931, 0.015073728747665882, -0.021714771166443825, -0.04924936220049858, -0.028673412278294563, 0.0005148854106664658, -0.010022389702498913, 0.0009542204206809402, -0.0022619464434683323, -0.004738507326692343, -0.20920825004577637, -0.053124573081731796, -0.1343402862548828, -0.04354647919535637, -0.009980801492929459, -0.0014624247560277581, 0.00033216102747246623, -0.00853058136999607, -0.007161133456975222, 0.0016002418706193566, -0.00674074562266469, 0.004149973392486572, -0.0049417936243116856, -0.01840830408036709, -0.003805524669587612, 0.0006072089308872819, -0.0068114749155938625, 0.002082789782434702, -0.007076718844473362, 0.004669892136007547, -0.15106898546218872, -0.04195433109998703, -0.19100460410118103, -0.06171984225511551, -0.0033198946621268988, -0.024084772914648056, -0.0021770154125988483, -0.010920047760009766, -0.00709277531132102, -0.003812472801655531, -0.005868278909474611, 0.0023881052620708942, -0.0023940149694681168, -5.4608844948234037e-05, -0.001964323688298464, -0.003951669670641422, -0.003661360824480653, -0.004194484557956457, 0.0006211569416336715, -0.0007705226889811456, -0.14360688626766205, -0.006210861727595329, -0.007739512249827385, -0.008927994407713413, -0.003718102350831032, -0.0090349605306983, -0.01290854997932911, -0.004998357966542244, -0.004569604992866516, -0.0022221889812499285, -0.011524578556418419, -0.0159295666962862, -0.0012933453544974327, -0.011573835276067257, -0.011216502636671066, -0.012415648438036442, -0.0023467191495001316, -0.0053845904767513275, -0.006211387924849987, -0.007682466879487038, -0.0036011007614433765, -0.004763314966112375, -0.0021101797465234995, 0.0010817794827744365, -0.005372007843106985, -0.0014367243275046349, 0.001060896785929799, -0.0074447025544941425, 0.0025269915349781513, 0.0007522053783759475, 0.004856477957218885, -0.007255106698721647, 0.0055701700039207935, -0.0031268696766346693, -0.023120691999793053, 0.006284522358328104, -0.0017701038159430027, 0.0038350927643477917, -0.008014312945306301, 0.009922790341079235, -0.0014460731763392687, 0.008490183390676975, 0.0021334330085664988, -0.009615948423743248, 0.0011934987269341946, -0.004463811870664358, 0.0006682063103653491, -0.002030304167419672, 0.0012410152703523636, -0.005908595863729715, -0.0028675224166363478, 0.00019662964041344821, -0.0004395789874251932, -0.022811641916632652, -0.002813180675730109, 0.0007484991801902652, -0.0050108544528484344, -0.006222299300134182, 0.00028754191589541733, -0.003109501674771309, -0.0002497186360415071, -0.008227615617215633, 0.0012362507404759526, -0.01818208023905754, -0.0004104207328055054, -0.047850366681814194, -0.004527592565864325, -0.0020121841225773096, 2.5093655494856648e-05, -0.00423873495310545, -0.0010890704579651356, -0.004439406096935272, 0.0007468892727047205, -0.005535487551242113, -0.029513470828533173, -0.07137080281972885, -0.010449573397636414, -0.06309930980205536, -0.07058767974376678, -0.17850437760353088, -0.06531018763780594, -0.0978664979338646, -0.006045295391231775, -0.005661287344992161, -0.004807377699762583, -0.005653973203152418, 0.0055648935958743095, -0.005067060701549053, -0.005116194020956755, 0.0033998049329966307, 0.004790185485035181, -0.0026523973792791367, -0.003076146822422743, 0.0032513479236513376, -0.01402913685888052, 0.0028308462351560593, -0.0016663633286952972, -0.0158160962164402, -0.0030019800178706646, 0.0009702600655145943, -0.0011858252109959722, -0.001725122332572937, -0.010960761457681656, 0.0012620642082765698, -0.00041617784881964326, -0.006936001591384411, -0.000968805281445384, 0.0006372143398039043, -0.00011386282130843028, -0.0007841656915843487, 0.00041235960088670254, -0.00772911636158824, -0.006658187136054039, 4.0546619857195765e-05, 0.0010429632384330034, -0.008548825047910213, -0.006776439491659403, 0.0009567182860337198, -0.0046468693763017654, -0.0005580070428550243, -0.00044720774167217314, -0.007303833030164242, -0.0016883499920368195, -0.0002393221657257527, -0.00016272826178465039, -0.0008628210052847862, -0.01528827752918005, -0.04696725308895111, -0.04328825697302818, -0.017725083976984024, -0.013940648175776005, -0.03673973307013512, -0.0376172699034214, -0.019602665677666664, -0.01371542178094387, 0.03389925882220268, 0.03171230107545853, -0.006756296381354332, 0.020775265991687775, 0.018827250227332115, 0.019953398033976555, 0.020913492888212204, -0.014863859862089157, -0.06588846445083618, -0.067988820374012, -0.018099281936883926, -0.023277945816516876, -0.0762646272778511, -0.06295018643140793, -0.01959771290421486, -0.007107370533049107, 0.00014098981046117842, 0.0001657917455304414, -0.006901054177433252, -0.010065849870443344, 0.000545539369340986, 0.0008877046639099717, -0.009749294258654118, 0.01933789998292923, -0.006816227920353413, -0.010929225943982601, 0.028245653957128525, 0.017888268455863, -0.002430209657177329, -0.007239288184791803, 0.020528949797153473, 0.022753342986106873, -0.028654687106609344, -0.028138337656855583, 0.020207542926073074, -0.006661432795226574, 0.0014252347173169255, 0.0005114582017995417, -0.006003751419484615, -0.00836870726197958, 0.0019027983071282506, 0.0013873932184651494, -0.00830660481005907, -0.005349602550268173, 0.016998272389173508, 0.016633981838822365, -0.00483625428751111, 0.0027292652521282434, 0.012664729729294777, 0.012340669520199299, 0.0034173615276813507, -0.01711096242070198, -0.06766404956579208, -0.056872665882110596, -0.017429541796445847, -0.023178614675998688, -0.07428869605064392, -0.08287251740694046, -0.023087764158844948, 0.0009956430876627564, -0.015787316486239433, -0.016686467453837395, -0.001452335505746305, 0.0004431893758010119, -0.002495462540537119, -0.0031423072796314955, -0.0008392774034291506, 0.004603215958923101, -0.008040600456297398, -0.010952301323413849, 0.0023781093768775463, 0.004196403082460165, -0.005828905384987593, -0.007322467397898436, 0.0023391975555568933, -0.014215744100511074, -0.04533449187874794, -0.041230764240026474, -0.01375406514853239, -0.013538516126573086, -0.034997716546058655, -0.03780592605471611, -0.014576926827430725, -0.049390438944101334, -0.01738622598350048, -0.019763343036174774, -0.04363982006907463, -0.044301122426986694, -0.01634133793413639, -0.016169728711247444, -0.059706948697566986, -0.0004388031375128776, -0.005225528497248888, -0.0043638297356665134, -0.0004663611180149019, -3.061230745515786e-05, -0.0023387824185192585, -0.00286985095590353, 2.936377677542623e-05, 0.00918550044298172, 0.020199058577418327, 0.02824549935758114, 0.01444602757692337, -0.07582846283912659, -0.039788272231817245, -0.036580491811037064, -0.10252363979816437, -0.04883879795670509, -0.02264079824090004, -0.027699651196599007, -0.09117710590362549, 0.03240462392568588, -0.007947408594191074, -0.00949480477720499, 0.03050868771970272, 0.028644803911447525, -0.00520807970315218, -0.005842485465109348, 0.027817944064736366, 0.029159149155020714, -0.007168091833591461, -0.011589918285608292, 0.032167691737413406, 0.02241133153438568, -0.00315028871409595, -0.0036084619350731373, 0.025336820632219315, -0.007219528313726187, 0.0005717524909414351, 0.00029486624407581985, -0.007270591799169779, -0.004822599235922098, -1.6687314200680703e-05, -0.00022568815620616078, -0.005906475242227316, -0.013400690630078316, 0.0009048269712366164, -0.0008720164187252522, -0.012498537078499794, -0.0038177594542503357, 0.0003958342131227255, -0.0005065423902124166, -0.005072413943707943, -0.0072682942263782024, -0.0015056958654895425, -0.0021522503811866045, -0.0085648437961936, -0.0028109767008572817, -0.0015007847687229514, -0.0011184073518961668, -0.0015273081371560693, -0.03966642543673515, 0.0841207206249237, 0.08589240163564682, -0.027911560609936714, 0.025170082226395607, 0.0578308068215847, 0.059659574180841446, 0.03880349174141884, -0.011483533307909966, 0.0007374511915259063, -0.0005013322224840522, -0.006271709222346544, -0.0007398260058835149, 0.0004977225326001644, -0.000291619187919423, -0.0004558905493468046, -0.0022692917846143246, -0.00031230287277139723, -0.0004854651924688369, -0.0029451348818838596, -0.006115255877375603, 0.0009175703162327409, 0.0006290946039371192, -0.005320174153894186, -0.0017410111613571644, -0.01197733636945486, -0.010226906277239323, -0.0016034391010180116, -0.0013423492200672626, -0.0061634862795472145, -0.005252036731690168, -0.0009041364537551999, 0.004599188454449177, -0.006844657473266125, -0.009581747464835644, 0.003590831533074379, 0.003592825261875987, -0.005524179898202419, -0.0055524129420518875, 0.003020654199644923, 0.0026109092868864536, -0.006911212578415871, -0.005778111517429352, 0.002397613599896431, -0.0002256018779007718, -0.003424223978072405, -0.001954244449734688, 0.00011693056876538321, -0.0027809871826320887, -0.0006996587035246193, -0.0006883858586661518, -0.0023617022670805454, -0.004836219362914562, 6.748591113137081e-05, 4.0136823372449726e-05, -0.003559766337275505, -0.0005596810951828957, -0.004184838384389877, -0.0028487129602581263, -0.00032399402698501945, -0.0012840424897149205, -0.007020408287644386, -0.004513151478022337, -0.0007841573096811771, -0.007233802229166031, -0.0019782988820225, -0.0016112641897052526, -0.008746213279664516, -0.003379994770511985, -0.0016046288656070828, -0.0009218735503964126, -0.0061158002354204655, -0.06569132208824158, -0.016457105055451393, -0.016147594898939133, -0.07335231453180313, -0.03360828757286072, -0.016747821122407913, -0.016171732917428017, -0.040471918880939484, -0.010333070531487465, -0.001599182141944766, -0.002680606907233596, -0.013598616234958172, -0.004086735192686319, -0.00189745775423944, -0.001847253879532218, -0.006739071104675531, -0.0034283380955457687, 5.0362312322249636e-05, 0.0003793757641687989, -0.002326889894902706, 7.323188765440136e-05, 0.0006063703913241625, 0.0006077517173253, 4.0592672689854226e-07, 0.0035124323330819607, 0.01089155301451683, 0.015240035019814968, 0.0042736041359603405, 0.003887722035869956, 0.01859378069639206, 0.021623743698000908, 0.0034113407600671053, -0.007972557097673416, 0.011656898073852062, 0.01042073406279087, -0.00573944253847003, -0.005246983841061592, 0.011213698424398899, 0.011503457091748714, -0.003049667924642563, -0.07616200298070908, -0.013729897327721119, -0.01472389418631792, -0.10297046601772308, -0.07364169508218765, -0.013666439801454544, -0.01475105993449688, -0.10152357816696167, -0.006708221975713968, 0.005982368253171444, 0.006099741905927658, -0.006404302082955837, -0.003269408131018281, 0.004696938209235668, 0.004777426365762949, -0.0042374590411782265, -0.007772132754325867, 0.00143259740434587, 0.002181034069508314, -0.009460732340812683, -0.006562178023159504, 0.00046114245196804404, 0.00047662912402302027, -0.008317760191857815, 0.035505231469869614, -0.006239328999072313, -0.010590475983917713, 0.03587409853935242, 0.02186494879424572, 0.009203917346894741, -0.0014413496246561408, 0.02226690761744976, -0.01060116570442915, 0.02647348865866661, 0.02396969124674797, -0.006268142722547054, -0.010061622597277164, 0.035051748156547546, 0.03929473087191582, -0.0023070552852004766, -6.426733307307586e-05, -0.008624549023807049, -0.008426294662058353, -0.00034232932375743985, 2.3171362045104615e-05, -0.0036035089287906885, -0.0034748432226479053, 0.00011241766333114356, 2.5616642233217135e-05, -0.01336352527141571, -0.014813861809670925, -0.0008253547130152583, 0.0001553465990582481, -0.004811761435121298, -0.006928318180143833, 0.0003864490718115121, 0.0012765225255861878, -0.01704893819987774, -0.016908487305045128, -0.0016229844186455011, 2.8652348191826604e-05, -0.006605285685509443, -0.010170716792345047, -0.001410383847542107, -0.062245018780231476, -0.027189016342163086, -0.03072996251285076, -0.08479258418083191, -0.03646257147192955, -0.02014448493719101, -0.02259751968085766, -0.03307178243994713, -0.005343543365597725, 0.018728775903582573, 0.024783464148640633, -0.006328159477561712, 0.0021016444079577923, 0.01549041923135519, 0.019102193415164948, 0.0005087766330689192, -0.0054718670435249805, -0.000341697916155681, -0.00041323958430439234, -0.004589085001498461, -0.00043313446803949773, 0.0005452987970784307, 0.0006272486643865705, -0.00020728804520331323, 0.0005605931510217488, -0.004252469167113304, -0.0035884238313883543, 0.00024493830278515816, 0.001367409829981625, -0.008794465102255344, -0.00854357611387968, 0.0007034845184534788, -0.015769651159644127, -0.055282946676015854, -0.06119707226753235, -0.018377184867858887, -0.022471023723483086, -0.0521090105175972, -0.06277498602867126, -0.01807698979973793, -0.022325003519654274, 0.032900139689445496, 0.03312921151518822, -0.023631177842617035, 0.008489558473229408, 0.02198556251823902, 0.022638360038399696, 0.012833341024816036, -0.10092896968126297, -0.007863509468734264, -0.0078087192960083485, -0.09635179489850998, -0.012055609375238419, -0.007382173091173172, -0.006888116709887981, -0.0079734418541193, -0.17152728140354156, -0.006571047939360142, -0.006926593370735645, -0.14787603914737701, -0.0032189073972404003, -0.005765177309513092, -0.00611438974738121, -0.0031016694847494364, -0.1725601851940155, -0.004838674329221249, -0.005547360982745886, -0.1725870966911316, 0.0008443516562692821, -0.004096240270882845, -0.004509693942964077, -0.0002680102188605815, -0.12231101095676422, -0.005086295306682587, -0.005986839532852173, -0.13405992090702057, 0.0007216954254545271, -0.0031789622735232115, -0.003750934498384595, 9.101020259549841e-05, -0.07394794374704361, 0.01898699626326561, 0.0784023329615593, -0.008211439475417137, -0.10013681650161743, 0.01707828789949417, -0.055859945714473724, 0.004363321233540773, -0.1429523229598999, 0.20962825417518616, 0.30189764499664307, -0.14085352420806885, 0.006279100198298693, 0.0266476608812809, -0.1141248568892479, 0.14827358722686768, -0.005405576899647713, 0.04045424982905388, 0.05865837633609772, 0.058835990726947784, 0.09641452878713608, 0.027323829010128975, -0.0031988564878702164, -0.025808481499552727, 0.2807534337043762, 0.6693254113197327, 0.37055957317352295, -0.05712592974305153, -0.003276233095675707, 0.025898050516843796, -0.24270524084568024, 0.5921747088432312, -0.6957690715789795, 0.2319674789905548, 0.07611296325922012, -0.00644589401781559, -0.06195696443319321, -0.02550996094942093, 0.9649220108985901, -0.05507628992199898, 0.10060697793960571, -0.13770614564418793, -0.018686190247535706, 1.284175992012024, -0.04201856628060341, 1.316433072090149, -0.06736090779304504, 0.5376058220863342, -0.8982057571411133, 0.3340030610561371, -0.002154209418222308, 0.7263802289962769, -0.06095598638057709, -0.35455194115638733, -0.004409575369209051, 0.11899102479219437, -0.5837915539741516, 0.5059089660644531, 0.1672084778547287, -0.30817002058029175, 0.25577312707901, -0.347360223531723, -0.19340364634990692, -0.01487851794809103, 0.0963641032576561, -0.21059150993824005, 0.003939735237509012, -0.04660046473145485, -0.05789317935705185, 0.0013987553538754582, -0.2402401864528656, 0.9873924255371094, -0.027747323736548424, -0.03686317428946495, 0.5323299169540405, -0.7375632524490356, 0.247849240899086, -0.02701573632657528, -0.06063912808895111, 0.31797051429748535, 0.36898118257522583, -0.026747683063149452, -0.18201202154159546, -0.17546416819095612, 0.2671070992946625, 0.009929713793098927, 0.10489723086357117, -0.11290787905454636, 0.19573774933815002, -0.27427592873573303, 0.006807482335716486, -0.04950438067317009, 0.32612308859825134, -0.08895852416753769, -0.0880751758813858, 0.3880513608455658, 0.3359605073928833, -0.017861258238554, -0.0338505394756794, 0.39399394392967224, 0.012797990813851357, -0.021994592621922493, -0.031668566167354584, 0.008746340870857239, 0.33820170164108276, -0.2321101576089859, -0.04773007705807686, 0.046494558453559875, -0.06026547774672508, -0.05482165142893791, -0.4393479824066162, 0.2682640552520752, -0.3505781888961792, 0.9110074043273926, 0.9436298608779907, -0.20858818292617798, -0.059400320053100586, 0.061031524091959, 0.045665327459573746, -0.1395794153213501, -0.450369268655777, 0.5726431012153625, -0.12002208083868027, 0.011141400784254074, 0.013398603536188602, -0.04891210049390793, 0.05766274780035019, -0.13170713186264038, -0.2509750723838806, 0.17947393655776978, -0.1075071468949318, 0.1182883158326149, 0.3896220326423645, 0.14173883199691772, -0.08669650554656982, -0.2050056755542755, 0.32954421639442444, -0.47129255533218384, -0.03835580125451088, 0.06468944996595383, -0.013088957406580448, -0.06356703490018845, -0.14633439481258392, 0.022571904584765434, -0.03487197682261467, -0.054408036172389984, -0.0021362064871937037, -0.016524236649274826, -0.033146247267723083, -0.0031798246782273054, -0.0019636666402220726, -0.02372274547815323, 0.24607069790363312, -0.10825299471616745, 0.023242169991135597, -0.049140945076942444, 0.42635753750801086, -0.0752435252070427, -0.47220492362976074, 0.20920124650001526, 0.011527356691658497, 0.0031455920543521643, -0.009182516485452652, 0.004422810859978199, 0.009970464743673801, 0.005533569026738405, -0.07238771766424179, 0.03134161978960037, -0.062168776988983154, 0.10902909189462662, -0.0229549128562212, -0.003442106768488884, 0.14196990430355072, 0.23318608105182648, -0.0014517403906211257, -0.01359589397907257, 0.5067964792251587, -0.04042511805891991, 0.4921152591705322, 0.15805912017822266, 0.014073921367526054, 0.34256136417388916, 0.28166770935058594, -0.5545210242271423, -0.00631805881857872, -0.011597431264817715, 0.17966437339782715, -0.027621205896139145, -0.09016994386911392, 0.5330501794815063, -0.03540848195552826, 0.00283635500818491, 0.5983527898788452, 0.12992610037326813, 0.7187473773956299, -0.47408565878868103, -0.6846879124641418, 0.030332067981362343, 0.7610382437705994, 0.02657151035964489, 0.8967934250831604, 0.04059344530105591, 0.5247260332107544, -0.024696731939911842, 0.14641518890857697, -0.8374667763710022, -0.19611681997776031, -0.14699965715408325, -0.23048052191734314, 0.2608278691768646, -0.018463974818587303, -0.008795540779829025, -0.29646384716033936, 0.004307615105062723, -0.002931284951046109, -0.012486997060477734, -0.00398692162707448, -0.02745361626148224, -0.010179318487644196, -0.02978643961250782, -0.009584405459463596, -0.02363409474492073, -0.005882218014448881, -0.011731592006981373, -0.003569596679881215, -0.012929435819387436, -0.01146947592496872, -0.02493930049240589, -0.011636428534984589, -0.028100116178393364], "data_max": [0.008349306881427765, 0.005672150757163763, 0.014356470666825771, 0.02379765547811985, 0.06808670610189438, 0.051368679851293564, 0.05698595941066742, 0.055431921035051346, 0.046252913773059845, 0.05065183714032173, 0.039162248373031616, 0.053484514355659485, 0.02072051353752613, 0.10316137969493866, 0.06896251440048218, 0.04357532039284706, 0.6764539480209351, 1.513785481452942, 1.2356493473052979, 0.7237898111343384, 0.14310680329799652, 0.09747528284788132, 0.10897786915302277, 0.10122590512037277, 0.03539795055985451, 0.31710758805274963, 0.05534624308347702, 0.25714215636253357, 0.1061478927731514, 0.05987474322319031, 0.06965920329093933, 0.044535547494888306, 0.05982903391122818, 0.05053604394197464, 0.05826690047979355, 0.04762769863009453, 0.11541672796010971, 0.1317714899778366, 0.08735601603984833, 0.1195395365357399, 0.3974659740924835, 0.06514158844947815, 0.3676466941833496, 0.0614975243806839, 0.03144760802388191, 0.1769673079252243, 0.03816024959087372, 0.1311076581478119, 0.20745962858200073, 0.6800547242164612, 0.2049279361963272, 0.4648285210132599, 0.18801157176494598, 0.11124785989522934, 0.0899101197719574, 0.18225827813148499, 0.1674463450908661, 0.2703116238117218, 0.17656309902668, 0.16157472133636475, 0.033622995018959045, 0.02541462332010269, 0.02733018808066845, 0.03221754729747772, 0.18345117568969727, 0.09031009674072266, 0.14199095964431763, 0.13315033912658691, 0.09469197690486908, 0.059229422360658646, 0.0890376940369606, 0.05771556869149208, 0.03330990672111511, 0.07355577498674393, 0.01829608716070652, 0.09782955795526505, 0.08069887012243271, 0.1352771520614624, 0.07236023992300034, 0.1625991314649582, 0.10591074079275131, 0.2284781038761139, 0.07852916419506073, 0.2589837610721588, 0.07984018325805664, 0.14050664007663727, 0.07740873843431473, 0.17834687232971191, 0.033743999898433685, 0.04762502759695053, 0.03344056010246277, 0.0511842742562294, 0.2885180711746216, 0.06120173633098602, 0.21099472045898438, 0.07125423103570938, 0.05900163948535919, 0.1249275952577591, 0.03128783404827118, 0.17900227010250092, 0.08209634572267532, 0.4112873673439026, 0.08187774568796158, 0.3932150900363922, 0.15663687884807587, 0.1418062150478363, 0.06559181958436966, 0.23211146891117096, 1.0302798748016357, 0.37175142765045166, 0.9141867756843567, 0.4938003718852997, 0.08577699959278107, 0.30230313539505005, 0.05921987071633339, 0.29368525743484497, 0.8957617282867432, 0.22073514759540558, 0.894860565662384, 0.37379610538482666, 0.18016254901885986, 1.0419650077819824, 0.17946967482566833, 1.2297052145004272, 0.03127046674489975, 0.056422095745801926, 0.041047289967536926, 0.048244260251522064, 0.17171093821525574, 0.0998927503824234, 0.12752032279968262, 0.15131548047065735, 0.04750961810350418, 0.050682805478572845, 0.06080193817615509, 0.03900217264890671, 0.058593638241291046, 0.18033914268016815, 0.05392996966838837, 0.20760226249694824, 0.14634232223033905, 0.15446126461029053, 0.09049750119447708, 0.19762638211250305, 1.1127889156341553, 0.5309557318687439, 1.0771925449371338, 0.4915632903575897, 0.15900449454784393, 0.26576289534568787, 0.016284963116049767, 0.09554287046194077, 0.04012329503893852, 0.05125878006219864, 0.21054545044898987, 0.23178435862064362, 0.1843944489955902, 0.24094857275485992, 0.1341746747493744, 0.34199368953704834, 0.24493078887462616, 0.20733551681041718, 0.03723606839776039, 0.021061444655060768, 0.024686943739652634, 0.047101013362407684, 1.1957427263259888, 0.4238695502281189, 1.3375520706176758, 0.25563547015190125, 0.09655347466468811, 0.02356044016778469, 0.022419696673750877, 0.07240051031112671, 0.06122269853949547, 0.3062049150466919, 0.08921023458242416, 0.27765607833862305, 0.031178487464785576, 0.20449167490005493, 0.05928901210427284, 0.14307810366153717, 0.06572449952363968, 0.29026299715042114, 0.07996624708175659, 0.2585676610469818, 0.9186116456985474, 0.20564013719558716, 0.979293942451477, 0.24969114363193512, 0.07936578243970871, 0.1504940688610077, 0.09061235934495926, 0.10413055866956711, 0.05068710818886757, 0.2370714545249939, 0.10737115144729614, 0.15727266669273376, 0.021663960069417953, 0.007971254177391529, 0.012868929654359818, 0.01998109556734562, 0.03549323230981827, 0.031001901254057884, 0.024995509535074234, 0.019378207623958588, 1.7579928636550903, 0.603255569934845, 0.06884075701236725, 0.08767224848270416, 0.04991159588098526, 0.10980807989835739, 0.05892716348171234, 0.06627549231052399, 0.05544927716255188, 0.057400330901145935, 0.06871574372053146, 0.07158517092466354, 0.04919140040874481, 0.07551632076501846, 0.0756913498044014, 0.054524876177310944, 0.06177141144871712, 0.05267295986413956, 0.05678672716021538, 0.04390588402748108, 0.04817986488342285, 0.044334929436445236, 0.05677465721964836, 0.04641563445329666, 0.056819524616003036, 0.05262887477874756, 0.042976729571819305, 0.0884852334856987, 0.07150378078222275, 0.05819135904312134, 0.060970183461904526, 0.11834677308797836, 0.059772033244371414, 0.10719452798366547, 0.19482199847698212, 0.07062593847513199, 0.13223206996917725, 0.1270359754562378, 0.15294373035430908, 0.10047248005867004, 0.1333674192428589, 0.11388808488845825, 0.049736835062503815, 0.0730263963341713, 0.06423891335725784, 0.06044207885861397, 0.06824725866317749, 0.06418463587760925, 0.055221471935510635, 0.08067412674427032, 0.06581048667430878, 0.06716645509004593, 0.030897758901119232, 0.10386382043361664, 0.06678584218025208, 0.04657614603638649, 0.05417937412858009, 0.06673312187194824, 0.08239397406578064, 0.09648013114929199, 0.07537046074867249, 0.10726933181285858, 0.09659025073051453, 0.21478307247161865, 0.05900653824210167, 0.2610757648944855, 0.03647148609161377, 0.050088364630937576, 0.024171102792024612, 0.05635756254196167, 0.0540706105530262, 0.0953555554151535, 0.045485761016607285, 0.10102840512990952, 1.0636638402938843, 0.33594557642936707, 0.870901882648468, 0.14826737344264984, 0.407716304063797, 0.39994481205940247, 0.5319401621818542, 0.23560801148414612, 0.013692444190382957, 0.0048681264743208885, 0.014118478633463383, 0.030284307897090912, 0.053486086428165436, 0.06827282905578613, 0.06037027761340141, 0.05676674097776413, 0.04868278279900551, 0.048423830419778824, 0.05307643115520477, 0.04015098512172699, 0.10241597890853882, 0.023188896477222443, 0.041004981845617294, 0.07106988877058029, 1.3315119743347168, 0.7001356482505798, 0.6611624956130981, 1.2903028726577759, 0.09933722019195557, 0.13947676122188568, 0.09074509143829346, 0.10753612220287323, 0.32211941480636597, 0.034159425646066666, 0.2600895166397095, 0.055051714181900024, 0.06062901020050049, 0.1063435822725296, 0.04468721151351929, 0.062283046543598175, 0.04972069337964058, 0.06794975697994232, 0.04684329032897949, 0.06621643900871277, 0.12617290019989014, 0.12644091248512268, 0.1232776865363121, 0.08922047168016434, 0.06278026849031448, 0.41461703181266785, 0.06225666403770447, 0.38617873191833496, 0.18115289509296417, 0.03423745930194855, 0.13460737466812134, 0.03730665519833565, 0.6677278876304626, 0.20130714774131775, 0.49817126989364624, 0.19429410994052887, 0.13071168959140778, 0.1677394062280655, 0.18350379168987274, 0.08171524107456207, 0.2688418924808502, 0.17512403428554535, 0.1636405885219574, 0.18197156488895416, 0.027141742408275604, 0.03587888553738594, 0.030418701469898224, 0.029257064685225487, 0.0935673713684082, 0.19055680930614471, 0.13882361352443695, 0.1601465344429016, 0.06152663379907608, 0.09421981126070023, 0.0638168677687645, 0.08812052756547928, 0.0797778069972992, 0.03462808579206467, 0.10869485884904861, 0.022844593971967697, 0.13673347234725952, 0.07672435790300369, 0.16454283893108368, 0.051539480686187744, 0.26014643907546997, 0.10175818204879761, 0.29465192556381226, 0.07989417016506195, 0.15719838440418243, 0.08510775119066238, 0.19233521819114685, 0.054759860038757324, 0.04948506876826286, 0.035231925547122955, 0.05104586482048035, 0.03230052813887596, 0.05129454284906387, 0.29853448271751404, 0.07274146378040314, 0.21742941439151764, 0.1429339051246643, 0.059467993676662445, 0.20278790593147278, 0.03128458559513092, 0.4304691255092621, 0.08479622006416321, 0.4046287536621094, 0.09557303786277771, 0.15030087530612946, 0.17824259400367737, 0.261583149433136, 0.06656207144260406, 0.33612769842147827, 1.7890833616256714, 0.4576065242290497, 1.9782384634017944, 0.32280224561691284, 0.09021876752376556, 0.3124014735221863, 0.05978744849562645, 0.257584810256958, 2.0167834758758545, 0.34229445457458496, 1.9636132717132568, 0.9427706599235535, 0.18174336850643158, 1.0884089469909668, 0.15398436784744263, 0.06084952875971794, 0.03275132551789284, 0.054003242403268814, 0.039168812334537506, 0.11100117117166519, 0.19541054964065552, 0.16135098040103912, 0.14541611075401306, 0.05566278472542763, 0.04455737769603729, 0.040943119674921036, 0.05111705884337425, 0.17930488288402557, 0.062199972569942474, 0.21223585307598114, 0.050017811357975006, 0.1588629186153412, 0.14488545060157776, 0.20151908695697784, 0.10386504232883453, 0.47722670435905457, 1.315027117729187, 0.49706971645355225, 1.6171525716781616, 0.2728373408317566, 0.1542547643184662, 0.10942566394805908, 0.016508502885699272, 0.05966943874955177, 0.04504777491092682, 0.2331983596086502, 0.22758278250694275, 0.26672276854515076, 0.19778059422969818, 0.3443162143230438, 0.1228068619966507, 0.2066270112991333, 0.24519169330596924, 0.02194538712501526, 0.04188670590519905, 0.04043510928750038, 0.030313992872834206, 0.687596321105957, 1.8356554508209229, 0.2848058044910431, 2.3098862171173096, 0.021490583196282387, 0.10001937299966812, 0.07632005214691162, 0.026833435520529747, 0.3075956106185913, 0.07361912727355957, 0.2766689658164978, 0.09250988066196442, 0.22160875797271729, 0.030324311926960945, 0.15955939888954163, 0.061966490000486374, 0.2921532094478607, 0.07635524123907089, 0.2721116244792938, 0.08359531313180923, 0.3760293126106262, 1.7420833110809326, 0.30068227648735046, 1.520578145980835, 0.15278686583042145, 0.07512302696704865, 0.10311869531869888, 0.08835823088884354, 0.23786142468452454, 0.05691982060670853, 0.15510724484920502, 0.10657677054405212, 0.008334869518876076, 0.021539956331253052, 0.021513160318136215, 0.010316160507500172, 0.03138723969459534, 0.0226146150380373, 0.01916218176484108, 0.018481088802218437, 0.6192165017127991, 2.696153402328491, 0.08729328960180283, 0.07382968813180923, 0.09891343116760254, 0.0563386008143425, 0.07005707174539566, 0.06320015341043472, 0.06049492955207825, 0.05811283737421036, 0.0695347860455513, 0.06902224570512772, 0.07916412502527237, 0.05295887589454651, 0.05029428005218506, 0.07796914130449295, 0.05240410193800926, 0.06598079204559326, 0.043376240879297256, 0.05926866456866264, 0.047579050064086914, 0.04968387633562088, 0.040921375155448914, 0.06360478699207306, 0.04503268748521805, 0.061434607952833176, 0.09201855212450027, 0.04454139620065689, 0.055451683700084686, 0.073920838534832, 0.12560482323169708, 0.06341881304979324, 0.10869581252336502, 0.057750072330236435, 0.0613960400223732, 0.2120513916015625, 0.12082380056381226, 0.13945452868938446, 0.09993907064199448, 0.16844166815280914, 0.12174542248249054, 0.14653223752975464, 0.08002104610204697, 0.053137652575969696, 0.06302641332149506, 0.06599833071231842, 0.06701190024614334, 0.07445545494556427, 0.08703914284706116, 0.06201395019888878, 0.07212744653224945, 0.0742398276925087, 0.10702183842658997, 0.030238237231969833, 0.04117811471223831, 0.06868474930524826, 0.06212208420038223, 0.05348493531346321, 0.08828842639923096, 0.08104672282934189, 0.1028069406747818, 0.07228555530309677, 0.23892341554164886, 0.09859469532966614, 0.2960006892681122, 0.05743416026234627, 0.03818168863654137, 0.04054000973701477, 0.044457126408815384, 0.026767659932374954, 0.11728772521018982, 0.054344747215509415, 0.11045248806476593, 0.056433044373989105, 0.823777973651886, 0.24333907663822174, 1.1403231620788574, 0.3078289031982422, 0.4957813322544098, 0.2115127593278885, 0.36414045095443726, 0.3516906499862671, 0.17609389126300812, 0.1577739119529724, 0.14900998771190643, 0.19692039489746094, 0.08392494171857834, 0.038975637406110764, 0.04349235072731972, 0.08183898776769638, 0.08606470376253128, 0.03319874033331871, 0.035671282559633255, 0.08384941518306732, 0.020852355286478996, 0.1409895420074463, 0.12500503659248352, 0.023016078397631645, 0.02248646505177021, 0.12329311668872833, 0.1103644147515297, 0.023713110014796257, 0.015589541755616665, 0.11020654439926147, 0.1028345376253128, 0.01617252640426159, 0.019523387774825096, 0.10221291333436966, 0.09586472064256668, 0.019017258659005165, 0.09875120222568512, 0.023175690323114395, 0.023404143750667572, 0.09075693041086197, 0.10357924550771713, 0.01739657297730446, 0.018106980249285698, 0.09574408829212189, 0.009341597557067871, 0.07678013294935226, 0.08340135961771011, 0.01048195082694292, 0.010367287322878838, 0.07112227380275726, 0.07902144640684128, 0.012005685828626156, 0.5360978245735168, 0.18104064464569092, 0.15969577431678772, 0.5418282747268677, 0.5332912802696228, 0.13361138105392456, 0.1365017592906952, 0.5449246168136597, 0.1421641707420349, 0.24663691222667694, 0.2391645461320877, 0.1332544982433319, 0.18428312242031097, 0.18848590552806854, 0.1836477816104889, 0.19435866177082062, 0.769553542137146, 0.19113165140151978, 0.1883496791124344, 0.7560417652130127, 0.8064625859260559, 0.16825176775455475, 0.1961187869310379, 0.8079618215560913, 0.00678535969927907, 0.07910274714231491, 0.07803421467542648, 0.006931595038622618, 0.0027460947167128325, 0.08071334660053253, 0.0790175125002861, 0.002409097272902727, 0.14078658819198608, 0.1366545408964157, 0.14952170848846436, 0.14364974200725555, 0.12411246448755264, 0.15654844045639038, 0.16261026263237, 0.12616299092769623, 0.14647436141967773, 0.04669737070798874, 0.0404495894908905, 0.14269989728927612, 0.018153296783566475, 0.07945048063993454, 0.08076074719429016, 0.018040355294942856, 0.009354538284242153, 0.08921752125024796, 0.09456862509250641, 0.008685726672410965, 0.09034053236246109, 0.11483027040958405, 0.11588134616613388, 0.08401724696159363, 0.1083529070019722, 0.10127004981040955, 0.10323911905288696, 0.09844524413347244, 0.6003931760787964, 0.1589658409357071, 0.1737227439880371, 0.6476812958717346, 0.5963484644889832, 0.1634300947189331, 0.16956734657287598, 0.642507016658783, 0.11479503661394119, 0.01898818649351597, 0.022111812606453896, 0.10138207674026489, 0.10669893771409988, 0.019579138606786728, 0.020343346521258354, 0.09629844129085541, 0.1180909052491188, 0.046011123806238174, 0.04020935669541359, 0.11057516932487488, 0.11770402640104294, 0.046374447643756866, 0.04176134988665581, 0.10915406048297882, 0.5369492173194885, 0.13682785630226135, 0.14409451186656952, 0.5895155072212219, 0.552986204624176, 0.16479244828224182, 0.19480296969413757, 0.5583574175834656, 0.14008165895938873, 0.4787417948246002, 0.49161794781684875, 0.1533423662185669, 0.14011336863040924, 0.4966813623905182, 0.5076850652694702, 0.1407073587179184, 0.09061423689126968, 0.009235210716724396, 0.009057236835360527, 0.08512385189533234, 0.09567609429359436, 0.006125580985099077, 0.006489085033535957, 0.08885009586811066, 0.2318415343761444, 0.21224403381347656, 0.18479956686496735, 0.22689907252788544, 0.3209224343299866, 0.5956022143363953, 0.5685640573501587, 0.32096418738365173, 0.1781027466058731, 0.5804927945137024, 0.558323085308075, 0.18589794635772705, 0.1394391655921936, 0.12171268463134766, 0.11251603811979294, 0.13248324394226074, 0.11397114396095276, 0.1401534527540207, 0.12968559563159943, 0.1158437579870224, 0.12512323260307312, 0.1267443746328354, 0.11827042698860168, 0.11393579840660095, 0.10411746799945831, 0.14308352768421173, 0.1358683556318283, 0.10207723081111908, 0.0027349863667041063, 0.07785692811012268, 0.07791268080472946, 0.0027376622892916203, 0.005406789481639862, 0.07780538499355316, 0.07777811586856842, 0.005248602945357561, 0.02169765718281269, 0.09517282992601395, 0.08957036584615707, 0.02137831225991249, 0.021944940090179443, 0.08269070088863373, 0.08042729645967484, 0.0219681728631258, 0.013961263932287693, 0.08572200685739517, 0.080621138215065, 0.013244742527604103, 0.013682729564607143, 0.0777520164847374, 0.07204551249742508, 0.013510194607079029, 0.1738416999578476, 0.6441306471824646, 0.6205596923828125, 0.18304966390132904, 0.32763728499412537, 0.44796496629714966, 0.425108939409256, 0.306691437959671, 0.010911070741713047, 0.0885467529296875, 0.08905385434627533, 0.012210092507302761, 0.01736409217119217, 0.0834425613284111, 0.08490283042192459, 0.018059248104691505, 0.01823158748447895, 0.06238380819559097, 0.06153620034456253, 0.017726976424455643, 0.007953855209052563, 0.07119819521903992, 0.07221643626689911, 0.007251082919538021, 0.09802976250648499, 0.02433079108595848, 0.024465598165988922, 0.08725199848413467, 0.09010285884141922, 0.01889411173760891, 0.020498892292380333, 0.08088558167219162, 0.11059598624706268, 0.045024506747722626, 0.043351415544748306, 0.10280727595090866, 0.10383274406194687, 0.049696411937475204, 0.046135589480400085, 0.09621112793684006, 0.08993737399578094, 0.026147538796067238, 0.02725105918943882, 0.08625251799821854, 0.08176705241203308, 0.027068106457591057, 0.029153738170862198, 0.07935348153114319, 0.02819560468196869, 0.07506302744150162, 0.0698932409286499, 0.023547887802124023, 0.02002549357712269, 0.08355472981929779, 0.07462388277053833, 0.016101311892271042, 0.059710100293159485, 0.009559386409819126, 0.01021283958107233, 0.05524997413158417, 0.06375153362751007, 0.010969586670398712, 0.012405681423842907, 0.05945056676864624, 0.013950400054454803, 0.0657510831952095, 0.06504601240158081, 0.016158420592546463, 0.010985762812197208, 0.06197886914014816, 0.06271852552890778, 0.011626837775111198, 0.15690571069717407, 0.49270886182785034, 0.5222122669219971, 0.1871236115694046, 0.12584497034549713, 0.5821676254272461, 0.6322730779647827, 0.1224188283085823, 0.02317129261791706, 0.07358245551586151, 0.07169412076473236, 0.02349483035504818, 0.02418951503932476, 0.06632933020591736, 0.06309864670038223, 0.02442300319671631, 0.01141140516847372, 0.10890796780586243, 0.12897498905658722, 0.010685225017368793, 0.007666117511689663, 0.1116151213645935, 0.130783811211586, 0.007160963956266642, 0.12943442165851593, 0.13693904876708984, 0.11787217110395432, 0.1284751296043396, 0.1304548680782318, 0.11891846358776093, 0.11624626070261002, 0.12574346363544464, 0.03351086005568504, 0.07063766568899155, 0.06703447550535202, 0.04357372596859932, 0.03261176869273186, 0.06651786714792252, 0.06627804785966873, 0.04153983294963837, 0.1525651216506958, 0.6273330450057983, 0.6487682461738586, 0.14236919581890106, 0.19307640194892883, 0.5867601037025452, 0.5820944309234619, 0.17640890181064606, 0.03773675486445427, 0.07960091531276703, 0.08006780594587326, 0.04045010730624199, 0.043088581413030624, 0.07555907219648361, 0.07471678406000137, 0.04472183436155319, 0.029768897220492363, 0.07088787108659744, 0.07032835483551025, 0.03612912446260452, 0.02906092256307602, 0.0664457380771637, 0.0653582289814949, 0.03458814695477486, 0.2136254608631134, 0.07490253448486328, 0.07527337223291397, 0.20219746232032776, 0.19189347326755524, 0.100594162940979, 0.10708574950695038, 0.17307963967323303, 0.07432111352682114, 0.17451806366443634, 0.16158615052700043, 0.07972022891044617, 0.046100419014692307, 0.17981892824172974, 0.16506892442703247, 0.05256161838769913, 0.08311336487531662, 0.028245121240615845, 0.02783273532986641, 0.07499343156814575, 0.07452823221683502, 0.026046158745884895, 0.025067931041121483, 0.06924928724765778, 0.10156140476465225, 0.041745223104953766, 0.03602055087685585, 0.09183886647224426, 0.0941835567355156, 0.03518077731132507, 0.03345433250069618, 0.08525111526250839, 0.11279694736003876, 0.034208737313747406, 0.03233148530125618, 0.1046457588672638, 0.10977500677108765, 0.032425977289676666, 0.03165360912680626, 0.10333172231912613, 0.17642588913440704, 0.6882777214050293, 0.6468811631202698, 0.17530928552150726, 0.18638162314891815, 0.6063037514686584, 0.6358646750450134, 0.2219354808330536, 0.08575557917356491, 0.1522865742444992, 0.15627145767211914, 0.0946047380566597, 0.10325897485017776, 0.13620533049106598, 0.14095963537693024, 0.10414255410432816, 0.012704014778137207, 0.11100514233112335, 0.12930993735790253, 0.013718661852180958, 0.010017530992627144, 0.10665369778871536, 0.1267017424106598, 0.009415175765752792, 0.11993817239999771, 0.020872624590992928, 0.020395932719111443, 0.1331881284713745, 0.12549027800559998, 0.004697326570749283, 0.007253553718328476, 0.13911904394626617, 0.5045966506004333, 0.22197312116622925, 0.22162945568561554, 0.5144121050834656, 0.5528397560119629, 0.12113390117883682, 0.11611922085285187, 0.5383970737457275, 0.09688371419906616, 0.27476051449775696, 0.25236907601356506, 0.09614943712949753, 0.15601733326911926, 0.17405693233013153, 0.1620418131351471, 0.14081239700317383, 0.10623186081647873, 2.2706687450408936, 2.3358254432678223, 0.1068853959441185, 0.10560343414545059, 2.129997730255127, 2.254873514175415, 0.11350049823522568, 0.08194103837013245, 1.9138668775558472, 2.0513296127319336, 0.07284533977508545, 0.16704128682613373, 1.628330111503601, 1.784407615661621, 0.18149395287036896, 0.06972602754831314, 1.323169469833374, 1.4429523944854736, 0.0687553808093071, 0.2171306312084198, 0.9984128475189209, 1.0822029113769531, 0.22946225106716156, 0.044934168457984924, 0.7075914740562439, 0.7607077956199646, 0.04410487040877342, 0.1918485462665558, 0.4235049784183502, 0.45546239614486694, 0.2114814966917038, 0.2432108223438263, 0.47114795446395874, 0.7994376420974731, 1.1804901361465454, 0.005376606248319149, 0.36584779620170593, 0.3900587260723114, 0.35152456164360046, 0.02895672619342804, 1.2447905540466309, 1.4650791883468628, 0.5032419562339783, 0.0725283995270729, 0.15316617488861084, 0.07883904874324799, 0.9966694116592407, 0.017956826835870743, 0.20991231501102448, 0.20762453973293304, 0.21386732161045074, 0.797603964805603, 0.3447200655937195, 0.032225511968135834, 0.010364256799221039, 1.4409863948822021, 2.605710744857788, 1.8172281980514526, 0.8804658055305481, 0.04888208955526352, 0.25440868735313416, 0.14487366378307343, 1.692124366760254, 0.11179595440626144, 1.7124601602554321, 0.4953001141548157, 0.29652196168899536, 0.046824246644973755, 0.13706490397453308, 3.675518035888672, 1.6434593200683594, 1.2724311351776123, 0.28950169682502747, 0.09570178389549255, 4.338246822357178, 0.09692833572626114, 4.472177982330322, 0.9416369199752808, 2.3624839782714844, -0.1997743546962738, 1.5417006015777588, 0.11407104879617691, 3.3114798069000244, 0.4679356515407562, 0.072076216340065, 0.08220023661851883, 1.6973872184753418, 0.07429879158735275, 2.2614054679870605, 0.857371985912323, 0.09513282775878906, 1.203830599784851, 0.38829007744789124, 0.07319151610136032, 0.341673344373703, 0.5962036848068237, 0.04327670484781265, 0.34663090109825134, 0.01348208636045456, 0.010210143402218819, 0.08032652735710144, 0.5776411294937134, 3.3730573654174805, 0.05313333496451378, 0.0484578013420105, 2.3372585773468018, -0.08579545468091965, 1.332088589668274, 0.059247396886348724, 0.4891608953475952, 1.6098058223724365, 1.2855390310287476, 0.04728373885154724, 0.2519562542438507, 0.35544028878211975, 1.229941487312317, 0.21987681090831757, 0.6687581539154053, 0.4266337752342224, 0.8735748529434204, -0.021184932440519333, 0.056420739740133286, -0.0007528388523496687, 1.7453796863555908, 0.027713989838957787, 0.036322981119155884, 1.916714072227478, 1.7607418298721313, 0.21710264682769775, 0.21344685554504395, 1.916892170906067, 0.11670029908418655, -0.0009059818694368005, -0.0005993525846861303, 0.17949463427066803, 1.5696945190429688, 0.06401512026786804, 0.27418750524520874, 0.5248119831085205, 0.06972552090883255, 0.07248697429895401, -0.057930491864681244, 1.24066960811615, 0.033574674278497696, 2.508976697921753, 2.7148585319519043, 0.03133438900113106, 0.06941238790750504, 0.5669744610786438, 0.5430120229721069, 0.0735003799200058, -0.11049481481313705, 1.6435365676879883, -0.0009347707382403314, 0.14279590547084808, 0.05283520743250847, -0.01176627166569233, 0.5022004246711731, 0.09475389122962952, 0.3559330403804779, 1.1023976802825928, 0.3964761793613434, 0.7025829553604126, 1.754889965057373, 1.075143575668335, 0.5725009441375732, 0.19170914590358734, 1.7373096942901611, 0.1179027259349823, 0.2562268376350403, 0.7511534094810486, 0.09517258405685425, 0.017482344061136246, 0.1424380987882614, 0.40638861060142517, 0.07960847020149231, 0.06906680762767792, 0.12009253352880478, 0.011914415284991264, 0.008260407485067844, 0.06266318261623383, 0.054594218730926514, 0.005186849739402533, 0.7619826793670654, 0.36346644163131714, 0.28957870602607727, 0.2501959204673767, 2.0529685020446777, -0.012078973464667797, -0.10420624911785126, 1.3044954538345337, 0.04378150403499603, 0.012136157602071762, -0.0020360462367534637, 0.02018699049949646, 0.5344423055648804, 0.4133152365684509, 0.05833093076944351, 0.5789175629615784, 0.5303189158439636, 0.7169333696365356, 0.004144710022956133, 0.026051277294754982, 1.2594009637832642, 1.5243374109268188, 0.026902908459305763, 0.0030490770004689693, 2.6393306255340576, 0.26073259115219116, 1.8038398027420044, 0.9269912838935852, 0.13201288878917694, 1.4710512161254883, 1.2756671905517578, 0.006609570700675249, 0.10219670832157135, 0.07703149318695068, 0.9961103200912476, 0.19744545221328735, 0.6094313859939575, 1.9854542016983032, -0.001592517364770174, 0.046772152185440063, 2.495866537094116, 1.484893798828125, 2.7942912578582764, 0.5577430129051208, 0.06420143693685532, 0.9916814565658569, 2.91664719581604, 0.1339062750339508, 3.641533851623535, 1.1290959119796753, 2.7008180618286133, 0.024551374837756157, 1.1679887771606445, -0.11201747506856918, 0.24917101860046387, 0.3768630623817444, 0.04315502569079399, 1.2865806818008423, 0.015524918213486671, 0.02876356989145279, 0.03112761490046978, 0.4346376657485962, 0.20285660028457642, 0.04259456321597099, 0.2503029406070709, 0.02496136538684368, 0.07594813406467438, 0.09186459332704544, 0.10173232853412628, 0.06542108207941055, 0.20320385694503784, 0.0469539500772953, 0.21358722448349, 0.04497377201914787, 0.08664047718048096, 0.054968591779470444, 0.08284500986337662, 0.055721741169691086], "data_means": [0.0009033591682377821, 0.001946241024355613, 0.006604708225581771, 0.003524304855770593, 0.04023071141069897, 0.013507506106528955, 0.03476033512359655, 0.01897788239394318, 0.026881373440389506, 0.01522928983921765, 0.021924807924592588, 0.020185855355813846, 0.010917921081665562, 0.022647268579699564, 0.023498861789676025, 0.01006632787276985, 0.24390031490122013, 0.19759839523302514, 0.21372031584592296, 0.2277783942783446, 0.0823189419025111, 0.011344599799608189, 0.06265885575394305, 0.03100468595166216, 0.01705246439845696, 0.055732899551093375, 0.018812013416860156, 0.05397335053311248, 0.011470688295120698, 0.02613497879853425, 0.016926986877096324, 0.02067868021614126, 0.03172597159348641, 0.012841616769081346, 0.028656085142229594, 0.015911503218786243, 0.043970676598668296, 0.03718430934873205, 0.030529569784060615, 0.050625416161283375, 0.052590506086668765, 0.028855257865016606, 0.05646282682189302, 0.02498293712953359, 0.014536122945427806, 0.03710826532558438, 0.014314440002116886, 0.03732994827007575, 0.05489769670315692, 0.08920344938567801, 0.0644001131495216, 0.07970103293984994, 0.039655522848969234, 0.04420173177778673, 0.021614310486703127, 0.0622429441397794, 0.06716843650126171, 0.09215225975241757, 0.09106441741738357, 0.06825627883525602, 0.009024934309685997, 0.00929782515454882, 0.00613690658086962, 0.012185852882842834, 0.04071306297842625, 0.0506722934744422, 0.019817167656316786, 0.07156818879633392, 0.058045527021569836, 0.015258838932591919, 0.053859332747167976, 0.01944503320728776, 0.009465778221311429, 0.027068335911354383, 0.0010067600512876549, 0.03552735408151769, 0.019107148286565217, 0.08019023567321067, 0.0006196433163442468, 0.09867774064572223, 0.026682389919670004, 0.08172583245584339, 0.010822959937615442, 0.09758526243718965, 0.019905021574626622, 0.0692179914751092, 0.0019883161948526353, 0.08713469685522882, 0.01225430049373675, 0.021131407647024453, 0.00849914118929621, 0.024886566952939688, 0.036391972103836843, 0.022261410083659346, 0.03263943768169871, 0.026013944504840295, 0.019319082774179062, 0.04811630076848549, 0.0015578856097783692, 0.06587749793247952, 0.0405660535259371, 0.06674885741733955, 0.03384177035499277, 0.07347314058944887, 0.033859646829978045, 0.05528453510264499, 0.009012332383907114, 0.08013184954924839, 0.14430153858897599, 0.12290598605284643, 0.0853483533456871, 0.18185917129267723, 0.012536106903815434, 0.17683052655693834, 0.008651708768678587, 0.18071492469707867, 0.10942692690081775, 0.087887125118464, 0.06840625735085615, 0.12890779466970498, 0.05905190917542559, 0.1593043952094274, 0.03540622356843426, 0.18295008081933037, 0.009148850728241453, 0.029531214999362846, 0.014092989740128625, 0.02458707598624748, 0.036696071100161896, 0.04393267928004217, 0.01597386804263124, 0.06465488233688443, 0.011923444260113287, 0.02696126450943777, 0.019996949891973766, 0.018887758876730106, 0.01774116915079003, 0.12101001533947454, -0.003030889801015409, 0.1417820742939855, 0.05627976472858698, 0.03525878376095258, 0.04112408182407617, 0.05041446666336213, 0.18967686365365824, 0.1509596944191512, 0.16116279167169595, 0.1794737663990267, 0.06289228392091718, 0.08964356050643336, 0.0038515226875822975, 0.016570536345915737, 0.01127278071287369, 0.009149278320996837, 0.12035694650809825, 0.05211371239027834, 0.09935011985525705, 0.07312053904329088, 0.03937066064858882, 0.217388640430183, 0.13008038603890862, 0.12667891503599316, 0.015083565381111929, 0.0002251459194520864, 0.006739316967360744, 0.008569394333265836, 0.09717898720372428, 0.07172399480728016, 0.08605580453422867, 0.08284717747418045, 0.027023192299200274, 0.00515641803481292, 0.004924981780343836, 0.02725462855364963, 0.025366071793530218, 0.061995612483671435, 0.03110428795900481, 0.056257396318019896, 0.008357391309922687, 0.037542726808790755, 0.019735031679957014, 0.02616508643968256, 0.024581304735467498, 0.05796123131389697, 0.03198513256075612, 0.05055740348866916, 0.08322857158019925, 0.07350880845136569, 0.04729319373708317, 0.10944418629505305, 0.03701491787832492, 0.05573164719065986, 0.048091831796167966, 0.04465473327413727, 0.02145597242200833, 0.04909668944328527, 0.03795398247097054, 0.03259867939513749, 0.005692172154987668, 0.0012576628180422397, 0.0016629149315607722, 0.005286920041241352, 0.005809238538870442, 0.011030476680834058, 0.008294273862969347, 0.00854544135688744, 0.14231215176626189, 0.08392618406782999, 0.024472524385218276, 0.016688762641616645, 0.017219629775578157, 0.023941657251484175, 0.03153646323590668, 0.028661784671822232, 0.029250080776411728, 0.030948167131474306, 0.03785939831995346, 0.009258413076324013, 0.028287366726251723, 0.018830444670686175, 0.04246931020322991, 0.009430361804986593, 0.034849471540582, 0.017050200467646215, 0.03293804623054026, 0.011282001791879685, 0.028300559301164298, 0.01591948872072992, 0.016222811610460897, 0.014967617842415692, 0.014912973437392616, 0.016277456015189026, 0.017160421312570704, 0.03957507734523435, 0.030840868642248543, 0.02589463001718983, 0.02846492343640923, 0.060822443184537105, 0.029810979413500256, 0.059476387206868916, 0.0849060116480422, 0.0014727278446802037, 0.05515191681771616, 0.0312268226753417, 0.07526307376414972, 0.02082408540078774, 0.06034566608520718, 0.03574149308141959, 0.007542809569107636, 0.04422126802372104, 0.014803730129121923, 0.036960347463603396, 0.019048137090054946, 0.02748940428868331, 0.009806227495393097, 0.036731313883350804, 0.017589068569783185, 0.02629345643969331, 0.0005628338875767339, 0.04331969112286254, 0.020841075356232478, 0.011448549490578414, 0.017260958502329324, 0.015028666344135463, 0.019499105209438358, 0.023681355047722865, 0.013417928490411917, 0.029762531766799286, 0.024097573707663706, 0.0822905742722793, 0.002843369242361242, 0.10354477873620284, 0.013344561728763823, 0.008053569946846884, 0.0070959073931909054, 0.0143022242823584, 0.0123926355963334, 0.031995736983481335, 0.009690081523688143, 0.03469829105679509, 0.16226496302910925, 0.0569996414443674, 0.17588426218434564, 0.03352727495506584, -0.009100079731400453, 0.0783580982602945, -0.008965498350829033, 0.06435546756789849, 0.0039570800554748105, 0.0019414115762088197, 0.0033655860124712756, 0.003832078698749061, 0.014252387514052589, 0.039645374143761875, 0.019777488781299264, 0.03412027287670517, 0.01590112228156803, 0.026698034714444582, 0.02084737426000796, 0.02175178273621531, 0.023926323170258147, 0.011365468711009255, 0.010639217411793528, 0.024652574469908373, 0.19311242008065102, 0.24936959128090788, 0.22746860247910997, 0.21501340887727172, 0.012179083856217932, 0.08303586552530844, 0.032265297788038695, 0.06294965159191504, 0.05499337015370511, 0.016739053253135804, 0.05333513366603272, 0.01839728974215506, 0.026566119189426064, 0.011782329701498792, 0.021171888295314318, 0.017176560596051414, 0.012536240240400912, 0.03160322900562424, 0.015544563274248977, 0.028594905971633295, 0.03824928691253166, 0.04625464631351037, 0.05245701163729991, 0.03204692158779941, 0.029488447363294153, 0.05309734780788433, 0.025399821449227287, 0.05718597372376122, 0.0363993266259635, 0.014671477034079608, 0.03668213513432386, 0.014388668525642847, 0.08754738006007634, 0.05770498332623726, 0.07935246110852433, 0.06589990227770873, 0.04385556972074023, 0.04044965909726849, 0.061992797350816635, 0.022312431467252765, 0.09440621697363397, 0.0687414575949707, 0.06925969540160735, 0.09388797916902603, 0.009111028777809407, 0.008982421881722267, 0.011964070074464143, 0.0061293805851526904, 0.05164934034869428, 0.0424921185967414, 0.07307298331260291, 0.02106847563212118, 0.01631854675890415, 0.05733332977223506, 0.02016817651222267, 0.053483700018546916, 0.02794807148034548, 0.009331911362968787, 0.03691706386298508, 0.00036291898048002795, 0.08133153510569996, 0.020128829215122837, 0.10059392054334595, 0.0008664437760290627, 0.08281521610240998, 0.027004233499341796, 0.09799556419401594, 0.01182388540725473, 0.07065657156536821, 0.02054828181420676, 0.08925075776579149, 0.001954095612868621, 0.020832047617260048, 0.012189554776866564, 0.02443602077302867, 0.008585581621986712, 0.022227109552778377, 0.03654917978639399, 0.02556457001233768, 0.03321171932759244, 0.04959593043875683, 0.019293414215824777, 0.0672433171485572, 0.0016460275045228332, 0.0663307487088586, 0.04069204562691852, 0.07309084776897182, 0.03393194656426629, 0.056413222464623554, 0.03439383083259939, 0.08192022495554203, 0.00888682834306105, 0.12057259220058483, 0.14584831663799935, 0.17941242875882604, 0.08700848008825723, 0.17852027958054711, 0.013120392888951476, 0.18249430451798662, 0.009146367951415924, 0.08757524680174499, 0.11286200349902328, 0.1273546022253635, 0.07308264807250132, 0.15732541986460968, 0.05930432448854295, 0.18064844184083118, 0.035981302508854854, 0.02898827836752665, 0.009034303247745625, 0.024280789723760465, 0.01374179189159587, 0.04525232697931775, 0.03789899113601641, 0.0666604885341898, 0.01649082957915636, 0.02721463667244087, 0.011765719773185614, 0.019088582824846545, 0.019891773620727426, 0.12191495499160206, 0.01863645676327623, 0.143149270097183, -0.0025978583471345683, 0.03458100128389385, 0.057523686193698194, 0.05067879598887526, 0.041425891488471506, 0.14781145229180176, 0.19125960627617697, 0.17692633293535456, 0.162144725636571, 0.09127619514716424, 0.06519654666646969, 0.017911582528537168, 0.003802464046539574, 0.009915313513067254, 0.011798733061237571, 0.05378479928571712, 0.11966419253125272, 0.07407152184253556, 0.09937746997458545, 0.21868802794501496, 0.0411779486171207, 0.12608049877720898, 0.1337854777770914, -0.00017738028067204104, 0.015514321528702735, 0.008249408005875323, 0.007087533241951219, 0.07168871593659291, 0.1016905874369847, 0.08420567518169766, 0.08917362819136077, 0.005760862625350098, 0.02677941533894707, 0.027990401624479036, 0.004549876339820684, 0.06522847414394911, 0.025555809746723102, 0.058802002268741486, 0.031982281618403455, 0.04025922832852147, 0.008197985530962645, 0.02819511733712502, 0.02026209652249564, 0.061178480908811346, 0.025253295815120022, 0.05400142365124812, 0.03243035307120342, 0.07539696495623288, 0.08874009350312638, 0.11222286220383897, 0.051914196257301336, 0.05743437435208322, 0.03751808654262207, 0.046075963136719175, 0.04887649775796426, 0.05149434866645121, 0.021642706234943992, 0.03428029507239528, 0.03885675982808604, 0.0013062525446635596, 0.00577510495863392, 0.005382340753384082, 0.0016990167496395835, 0.01121899594172559, 0.005797953895110903, 0.008700829023015633, 0.008316120813732857, 0.08688568395854554, 0.1462039067909434, 0.016439266936016814, 0.024474539282088276, 0.023864716055468804, 0.017049090163132802, 0.029488547637327257, 0.0315912872368818, 0.03189296105877612, 0.0291868738158448, 0.009478708990919602, 0.037903526910165485, 0.01922777895472042, 0.028154456945139378, 0.010037153798389145, 0.042235398912432824, 0.01748039265766612, 0.03479216005407062, 0.011698261640365522, 0.03231702850483681, 0.016159589839920302, 0.0278557003061905, 0.014622622764775519, 0.01623449535274285, 0.016076386335688236, 0.014780731780977385, 0.04047275889979148, 0.016830108870415958, 0.02635734616867517, 0.030945521601482107, 0.06092411674824982, 0.0280340179297422, 0.059864068908634646, 0.029094065768252738, 0.0022033419757675463, 0.0845340239394202, 0.031206039560507822, 0.05553132635160458, 0.020350544989543258, 0.0749530070034191, 0.03527227123221871, 0.060031280758774105, 0.0452748259532358, 0.007914196163169292, 0.03795911450311967, 0.015229907612411171, 0.02826512997986905, 0.019301496391703934, 0.03774712193203154, 0.009819504441392797, 0.027358893357524606, 0.017560614950263734, 0.04436746383617268, 0.0005520444712611666, 0.011581876907864348, 0.020785006489387813, 0.014946291514028001, 0.01742059188302208, 0.023890996071526734, 0.020254554492145645, 0.03009808501981339, 0.014047465543209332, 0.08331576964024615, 0.025133005873865216, 0.10589604682684112, 0.002552728684031523, 0.007722702763816291, 0.01375163266292138, 0.014123522487702043, 0.0073508129386605885, 0.03149307429558608, 0.012990943888771832, 0.034507934575508804, 0.009976083608269171, 0.17925307565302293, 0.07354947194148644, 0.1629096131725557, 0.06068211363174524, -0.008917432074088561, 0.05567747822580003, -0.00854060959202281, 0.06807630419028761, 0.0034628888953279363, 0.003057698850169123, 0.002975976748236677, 0.0035116250869681653, 0.02873374580948926, 0.003015967245377856, 0.0029140256088217944, 0.02870837210483546, 0.028607374784593423, 0.003142338269410062, 0.0030140494963352676, 0.02860834821640537, 0.001277498030998623, 0.03462246386698344, 0.03446863506094898, 0.0013685929770640881, 0.004702494051515391, 0.031197467844775506, 0.03111217916872517, 0.004725048869723946, 0.0017869346711888762, 0.02739152887471873, 0.027530227033146382, 0.0017958110031376811, 0.0035230775012550218, 0.025655386044136322, 0.025713995740426723, 0.0036120422954966243, 0.022857747416142098, 0.0008937404179463302, 0.000914286829020581, 0.022564822432398646, 0.024067549375202484, -0.00031606154024672395, -0.0002931095496692241, 0.023772218810807072, 0.001212974009829999, 0.01672255258395953, 0.016532406475755837, 0.0011586641935669257, 0.002340998715273014, 0.01559452787880978, 0.015346881526941483, 0.0023441891421200857, 0.049604742384054074, 0.03272190027153067, 0.033553995574714626, 0.05083095618344005, 0.04809483093860063, 0.03423181171637711, 0.0343120555312526, 0.05007289622836532, 0.026586954889757968, 0.09038664962668083, 0.09139441482948564, 0.026630330928138476, 0.054569614492795376, 0.06240399002348863, 0.06320452058521918, 0.0548202251701957, 0.05244179025108032, 0.03685465291733981, 0.03486796322705893, 0.051024380564171655, 0.05478384464294198, 0.034512598523500936, 0.03283897501262413, 0.05305336877883457, -0.0007287828951283684, 0.011439927424606935, 0.011579896425632496, -0.0007363350883802034, -0.0018092010568810835, 0.01252034558631904, 0.012674507520457165, -0.0018309461832261985, 0.05057248933660359, 0.02969632991018095, 0.02991375667965348, 0.050591176017803156, 0.043879950110163886, 0.03638886913556381, 0.036758458640773775, 0.043746474056824594, 0.0517281412027695, 0.0037312372608305873, 0.003928354480344128, 0.05194931857822874, 0.0015728361924445358, 0.01694903077775081, 0.016945963605050757, 0.0015287727157464286, -0.0009054166118248042, 0.019427283582232627, 0.019382256632735854, -0.0009075203112765442, 0.019199832840827286, 0.047925683159991656, 0.047838885623045474, 0.019337494310789585, 0.02804487907090021, 0.039080636929630076, 0.03904505136792013, 0.028131328567099222, 0.028662976811949195, 0.033680865824625046, 0.032420086454900014, 0.029338405218412578, 0.03717892493989398, 0.02516491769617865, 0.024186514122958247, 0.03757197755008694, 0.02427270714338594, 0.003781193389961745, 0.0035807300716053036, 0.02439615996127734, 0.0224907390671491, 0.005563161466554605, 0.00553388442859793, 0.0224430056051596, 0.03183827996747825, 0.007175750986857408, 0.007107675220171631, 0.03182705655758607, 0.030611839868768566, 0.008402191086725689, 0.00815062165289521, 0.0307841101257207, 0.06659910853100234, 0.03302834630539114, 0.03439368373083219, 0.06699721565258906, 0.0619745230692448, 0.03765293176766889, 0.03826889503365349, 0.06312200434843869, 0.03250489984775991, 0.03332153471927117, 0.03593355613039457, 0.033175560736563345, 0.031102506062162857, 0.03472392850638517, 0.03741113856462494, 0.03169797830393706, 0.013137733222132363, 0.002322190318210948, 0.0022071983337412873, 0.01312281163795205, 0.013348313829364184, 0.00211160971109808, 0.00209872617291163, 0.013231283799516333, 0.057740951367456696, 0.05695977193143405, 0.05732290578824624, 0.05803762715912189, 0.05904977238766275, 0.037751972156961265, 0.03700405576246708, 0.059983725717844175, 0.043315576682638385, 0.05348616786270005, 0.053650419676746046, 0.04333736180496055, 0.052015067974568216, 0.025832360748408948, 0.026058215361541206, 0.052394331312468095, 0.0466880810883594, 0.031159347633215904, 0.03152634868094068, 0.04692619798979437, 0.050052812279655766, 0.028181301682888463, 0.02844572902040891, 0.05017226124778833, 0.04245077462144937, 0.0357833393418081, 0.036133942689398214, 0.04248404758129375, -0.0017873739569911724, 0.01153235743630635, 0.011648571910892799, -0.001826289515655755, -0.0005560808009751997, 0.010301064280990056, 0.010364953397947484, -0.0005426710026095717, 0.002281402239953896, 0.026118231801719287, 0.026043577064885987, 0.002304423060363109, 0.0048379028688982475, 0.02356173117181394, 0.02349998552336687, 0.0048480146023070795, 0.0019689820083371263, 0.02260932915910584, 0.022632423137884237, 0.001985306015427505, 0.0025180436417977193, 0.022060267525922928, 0.022021819803423336, 0.002595909349626776, 0.023849685986085122, 0.1851472833571807, 0.18621379311050998, 0.023804273513020946, 0.0794325949387711, 0.12956437440103485, 0.13041057080503116, 0.07960749581862431, 0.0009267656768053537, 0.022170074973273658, 0.02202900335305681, 0.0010146493353219107, 0.0035715709704645777, 0.01952526967976127, 0.01939107633297596, 0.003652576355529723, 0.0032947479909884686, 0.01383910713730872, 0.013955256999744267, 0.0032674012981244657, -0.00026649167334631457, 0.017400346802032434, 0.017463231860048826, -0.00024057356239459978, 0.01815280842440751, 0.003057529715769915, 0.0030238754462654544, 0.018141961953385053, 0.017212579654348557, 0.003997758485479041, 0.003977543336834023, 0.017188294062475365, 0.02846325056391301, 0.006072715254876633, 0.006068449688642811, 0.02876308913591221, 0.026245343519129445, 0.008290622299919346, 0.00826655833381365, 0.02656498049085919, 0.024702980759858495, 0.003935018508599894, 0.003635189476197106, 0.02472217202430232, 0.022529960785145128, 0.006108038483460617, 0.006022475608417645, 0.022334885891643046, 0.002761205250013273, 0.014274511517374125, 0.014528369312578506, 0.002765619372895427, 0.0014224903602503877, 0.015613226406358814, 0.01578017634878153, 0.0015138123370080617, 0.01333686572954922, 0.002566542486710415, 0.002442252943357483, 0.013257223306247259, 0.013711841119991143, 0.0021915670964267535, 0.0019780036311242855, 0.013721472618898493, 0.0007095422865579428, 0.01825604129867606, 0.01816786945769192, 0.0006787576565504217, 0.002390589114331522, 0.016574994471251686, 0.016495165715905664, 0.0023514613983265393, 0.03812124106731505, 0.02737171361485877, 0.029810368154986187, 0.03846027968158362, 0.025278245962880645, 0.040214708718441614, 0.04239416406681978, 0.02587648376967873, 0.002884603065072348, 0.01950737150796497, 0.019501361139992304, 0.0029465805540180266, 0.00434184840405694, 0.018050126168621814, 0.018220677131500704, 0.00422726456231893, 0.0019052577414447529, 0.01400450938391781, 0.013976642841756322, 0.0019463673421362797, 0.00213393648128215, 0.013775830644395826, 0.013795608075334321, 0.0021274021092743426, 0.04117578096960604, 0.037750033303980586, 0.037761404082733555, 0.04090828536554991, 0.03732693832086324, 0.0415988759525977, 0.04163662785755562, 0.03703306159011691, 0.01346788422013429, 0.033979608114795425, 0.03293818417977388, 0.01358069944053998, 0.01458205622934181, 0.03286543610543433, 0.03192471970185327, 0.014594163917412138, 0.02312137474878105, 0.05979876370571548, 0.05955116652194442, 0.02296823377730827, 0.035957305139113466, 0.04696283331525959, 0.04727026520591305, 0.03524913509280042, 0.004716207414950523, 0.02850719610368788, 0.028494005335544782, 0.004573754442110756, 0.007328828109208335, 0.025894575409082514, 0.025720280248325896, 0.007347479530083797, 0.004356088345486068, 0.023345413888552134, 0.02320776679303281, 0.004435367856987374, 0.006145200237762098, 0.021556301995688643, 0.02141652969871485, 0.0062266049509820875, 0.08156341749668089, 0.021959121933011985, 0.022086936308967867, 0.08224796501059126, 0.0652886105767759, 0.03823392885128881, 0.03906750002040147, 0.065267401298427, 0.026619454200473805, 0.06121282412024444, 0.062209646629078894, 0.026498028038612436, 0.018130594982476343, 0.06970168333994857, 0.07067469819103807, 0.018032976472548697, 0.02095453078352435, 0.004061172250879262, 0.004036440990213596, 0.020876602151555863, 0.01975905980852648, 0.005256643226110368, 0.0051367079217290975, 0.01977633522051971, 0.023413398036445224, 0.004229501965938378, 0.00423310381821725, 0.023282739908998828, 0.021964233949738416, 0.0056786660525771585, 0.005617888451940927, 0.02189795527612065, 0.028976634367570173, 0.0054122123826138265, 0.005252054204241407, 0.02847579781736937, 0.027495364409302656, 0.006893482340107342, 0.006567776180599739, 0.027160075840557737, 0.03642700456063297, 0.04505762973773155, 0.047540612485456234, 0.03818464772217632, 0.03695679222557632, 0.044527842073729194, 0.047651369041737265, 0.03807389116240805, 0.022738908035835847, 0.055056072854833944, 0.054732200744350964, 0.022587358364432764, 0.030155725947687697, 0.04763925494339079, 0.04710332538660859, 0.03021623372139397, 0.00245165189996758, 0.016785365990951196, 0.01662998928080491, 0.002524587157668153, 0.0032970229119632264, 0.015939994978610147, 0.015851381088992908, 0.0033031953492081286, 0.014723950957359164, 0.00022688626413635405, 0.00022746858609221367, 0.014552461780223786, 0.017422084161530755, -0.0024712469397604924, -0.0024453170155227474, 0.017225247381335844, 0.03387346292310759, 0.03098707405635666, 0.03153224034064424, 0.035930994917319575, 0.03711660763738331, 0.027743929340500777, 0.028055332826511, 0.03940790243077146, 0.013428740592732065, 0.07803675168024769, 0.07809181339571486, 0.013012182707533458, 0.038029233220937694, 0.05343625905385081, 0.05323766707781173, 0.037866329024384617, 0.02015789606411893, 0.04496906920388186, 0.044614465533777674, 0.019679029743430807, 0.021516447543953827, 0.04361051772718932, 0.043298074708291286, 0.020995420571605077, 0.0162017963381712, 0.040915602745291206, 0.040725902850041996, 0.016101595698811283, 0.021585352920004592, 0.03553204616021259, 0.03531649595288832, 0.021511002589974668, 0.012963063077017991, 0.02993918018169093, 0.02974239094329893, 0.012913925809204295, 0.020249502671839347, 0.022652740587517522, 0.02257588683840648, 0.020080429916372253, 0.010465610842470087, 0.016577482723780613, 0.016469874133953347, 0.010320646536174982, 0.017482297855832985, 0.009560795710455788, 0.00955432390532837, 0.01723619676556323, 0.04863335373031755, 0.20478340606298745, 0.33417952126076, 0.1490207785724731, -0.03494139372513147, 0.12649271283165145, 0.0741434654808976, 0.1266999409849009, -0.033453617104272595, 0.5283529482725062, 0.6735341344507316, 0.08302492909902691, 0.03012495073124185, 0.07101740524378808, -0.014403024953316102, 0.39139811772078975, 0.010272273409410889, 0.10044567285512662, 0.10106542491212994, 0.1141054975825465, 0.25978807005192633, 0.14350458207997813, 0.01003009493291757, -0.004427184575370566, 0.7150369064964459, 1.31776967219086, 0.8169072472690376, 0.26830465022891903, 0.019504063621973617, 0.10633883233458505, -0.08907319627912606, 0.9357144401358458, -0.21116741497620076, 0.6988974634491498, 0.18660711474316416, 0.06229958056522604, -0.02759786991136261, 0.06478562167338951, 1.7104727914006965, 0.41580538166620484, 0.48568272007136515, 0.04783838250127539, 0.020814886785350074, 2.1457300774676713, 0.007356470395559214, 2.172330240322502, 0.04616755613459663, 1.2008605797405867, -0.397478543812714, 0.61570690319105, 0.039989607869967116, 1.5309872887707028, 0.15418153034972162, -0.09123551705301218, 0.02096537247679933, 0.37120263845735463, -0.18266548205572158, 1.0359188254865128, 0.4036638351924194, -0.07519339205637042, 0.5227127445442219, 0.05410189050035575, -0.08656818655789404, 0.16657423238426147, 0.30572260913137167, -0.11091625441585885, 0.10010135196281703, -0.009880016732427456, -0.01877337473866218, 0.025040060376531937, 0.11735972788089417, 1.6263755839334684, 0.009259374068977994, 0.0024252748329659252, 1.11716752643206, -0.27701805120151307, 0.5399486211625079, 0.00734523170521713, 0.21724784090701474, 0.6970913369233964, 0.6671322765556199, 0.010057593141333237, -0.037225148728744, 0.0776805184899941, 0.5571163714513864, 0.08984774913348495, 0.3212303862278484, 0.12490339328697884, 0.4203408747847555, -0.09187043163949977, 0.02449115539215194, -0.018343959760495777, 0.813619437205731, -0.01959681556097678, -0.018026980880008286, 0.8893789744649984, 0.8178676376083235, 0.04958066958602028, 0.04356156184428969, 0.8891779018105791, 0.05792540820467329, -0.011395646437098629, -0.01572515024927436, 0.07940661793232942, 0.7203871709240296, -0.07545039104425516, 0.11230946721460933, 0.20193722774963016, 0.003015365496301932, 0.005020013767844134, -0.1972052154638354, 0.5464803806299969, -0.16677134711627328, 1.4488628758487014, 1.5488833293539046, -0.09961726258639443, -0.028874030626161746, 0.22121914104861132, 0.1388464257132178, -0.06122867112531885, -0.2414905193497684, 0.9401684079616982, -0.05108257596980704, 0.06053970768822435, 0.023913930021069653, -0.021732186618391613, 0.1992948746014453, -0.031621500073963464, 0.03462049455599401, 0.5054791341469824, 0.07991382384148721, 0.35964336237587563, 0.81343579322516, 0.46568127497507195, 0.29591979407982366, -0.09854421853756713, 0.6770918747240255, -0.12994342628495664, 0.040768102941021976, 0.2920687846150235, 0.0436553293936579, -0.02960461776320916, 0.026481443331620363, 0.1205941743418337, 0.00999988297513895, 0.00396283122556497, 0.030118630585207577, -3.283558766888098e-05, -0.006499152944784987, 0.015956284664620363, 0.013218262679743643, -0.005182883415759822, 0.40497902239582223, 0.09615922699676556, 0.12476304908181121, 0.06975857919875515, 0.888721670440536, -0.03546832699048165, -0.20148933860906257, 0.5343262261606857, 0.021573540098168517, 0.005242773140795682, -0.004219171481335252, 0.008690428521787016, 0.1653922797490988, 0.0952738065377342, -0.010516924987284897, 0.2004586095074282, 0.15706853050581984, 0.3243949801450732, -0.00538015687244109, 0.006184493427559534, 0.5598011131015412, 0.6254860508905735, 0.009652516001244654, -0.004445555660409587, 1.2290466425764304, 0.07190826189616341, 0.851468266786895, 0.3785713014755912, 0.05826399783315324, 0.6730296204612914, 0.5622110434457817, -0.1343074222169542, 0.020230808442028295, 0.02029758124779886, 0.4542380888359486, 0.06345544653838558, 0.24654618397499248, 1.0249548080909383, -0.01167330322614518, 0.016030926824456507, 1.3483019053604102, 0.5645309617594004, 1.3150834532314095, -0.044127312532821435, -0.20760175367187667, 0.32398804253692387, 1.314991089940065, 0.048506206238237266, 1.61287365972475, 0.4393180480882201, 1.2863722840566914, -0.0016053611026388911, 0.43989800747930846, -0.32351171863053607, 0.03758474976054287, 0.05377273129973486, -0.05976952717682914, 0.5774630625610535, 0.0008270380440922077, 0.0035305855536817534, -0.054486278010241786, 0.11242516453075374, 0.025171519269912342, 0.00858760043526758, 0.02703876262316723, 0.005073571021887128, -0.0013000665482681816, 0.011852797275328808, -0.0013088952194782327, 0.009820130788535133, 0.02672573088218935, 0.010897625191157041, 0.024758130206384572, 0.008915863082490698, -0.001224541353522044, 0.008180156469535292, -0.001188089747493027, 0.009979459639974975], "data_vars": [1.0594801205308153e-06, 2.72553588980069e-07, 3.7988368634865136e-06, 6.730361387678675e-06, 5.382387910664084e-05, 1.4978481289035853e-05, 3.5773445538152376e-05, 2.0224043314169212e-05, 2.6317390289297953e-05, 1.227910370727598e-05, 1.8648014356658804e-05, 1.4662624916554039e-05, 9.799171659967827e-06, 0.00017095841321037328, 7.311893974981522e-05, 2.9441713510149237e-05, 0.005225893288629064, 0.0028374739657766428, 0.00678398211868441, 0.002322501276525359, 0.00013862722041777442, 5.255941875272884e-05, 8.58021780011788e-05, 5.038473873323951e-05, 2.8834719546333655e-05, 0.0013151360089039715, 3.15490192363032e-05, 0.0008209740273787001, 0.0001172119890501515, 7.833936052847098e-05, 3.080665301040198e-05, 2.3855366066862103e-05, 4.098870774195066e-05, 1.577872604882566e-05, 3.777997866542689e-05, 1.7139442116454595e-05, 0.0001266338168132882, 0.00019123168186105624, 4.597980577459236e-05, 0.00014712887075672365, 0.0018658199991028772, 3.416392848559877e-05, 0.001478144088557997, 2.8455102615764692e-05, 2.1201380628526838e-05, 0.0003988532432003527, 1.4588718155896496e-05, 0.00019983088975605276, 0.0005583788067640479, 0.000534455297628438, 0.00041846648624599485, 0.00035519160956331696, 0.00010893942929291084, 9.09931676521948e-05, 3.704344852322119e-05, 0.00016569538794032488, 0.0004594615237641983, 0.0007473696876091683, 0.0003232885648217517, 0.0002356087809258197, 6.903223820408824e-06, 9.731763441141467e-06, 4.943062046791749e-06, 1.2067491014262364e-05, 0.000282518172429494, 6.421520075549829e-05, 0.00022520252256963866, 0.0001305839418841626, 8.05853318759496e-05, 2.154865663645441e-05, 6.849526638026344e-05, 1.9905856718580128e-05, 1.063394425178834e-05, 6.684350021462971e-05, 1.2243595462802196e-05, 0.00011764053314451079, 4.8706751674116746e-05, 0.00012179014160801195, 3.9239010304833594e-05, 0.00018678456283816288, 7.59212460544177e-05, 0.0005390414758983796, 4.463243783750214e-05, 0.0007154965023986585, 7.853140632135996e-05, 0.00014656040832005196, 4.540224426132477e-05, 0.00025333310840939746, 8.93263004497438e-06, 2.5541485784743427e-05, 6.6961859693778205e-06, 3.07060482378342e-05, 0.0009295672533190327, 6.394837261505954e-05, 0.00043944951989356815, 4.5976043522878764e-05, 2.9207621277667296e-05, 0.00018984344627069193, 2.0565122878195812e-05, 0.000368023639285626, 6.328525393661417e-05, 0.002120390043420581, 5.670296365350776e-05, 0.0019229787935683331, 0.0002193701562054889, 0.00021380304685861287, 5.257695527372076e-05, 0.0005328186713886013, 0.003814391219656698, 0.0008305742738303386, 0.002654193160324723, 0.0012865001262028913, 6.65716243667182e-05, 0.0010030085716642944, 2.608440140339554e-05, 0.0009714798439484752, 0.0026367131321440762, 0.00033373695172968107, 0.0018241938840383304, 0.0006939411172079906, 0.00036774940900889116, 0.0013835494689630576, 0.0003236062115370001, 0.0019398536708528547, 6.9349123331590025e-06, 2.8212777060862372e-05, 1.0520786701974194e-05, 2.223965436649442e-05, 0.0002841007467161194, 8.35507749589621e-05, 0.0001868079734183123, 0.00017785691073792312, 1.5040203945242374e-05, 2.1106750654828438e-05, 2.014651574732065e-05, 1.3751005877251281e-05, 4.039833658480404e-05, 0.0002941485977866763, 2.7693942679989096e-05, 0.0004117018128223004, 0.00011790802462844803, 0.00011509538582381228, 6.519024603837533e-05, 0.00016213059168665529, 0.005903053302286863, 0.001588309274099357, 0.004786686836110475, 0.0015325057267862325, 0.00013753248252362508, 0.0004274627780234333, 9.126708743567628e-06, 0.00011621143917080332, 8.505602516428852e-06, 3.475490238169531e-05, 0.00044549906467956685, 0.0004950659769685739, 0.0003520399406755685, 0.0005233835821065716, 0.0001854131539241624, 0.001288761678244539, 0.0006267461831987571, 0.00045050900910631854, 2.2111706877839136e-05, 4.0591065209522494e-06, 1.0764652121215444e-05, 8.458620084713004e-06, 0.0011354624118341714, 0.00047674312631690985, 0.0008284944694969081, 0.0005062678778341236, 0.00010051244590174548, 9.63640333502573e-06, 8.925428115883175e-06, 6.470059069342805e-05, 3.536558243021772e-05, 0.0014407558324813078, 7.062666024618787e-05, 0.0011398964647312138, 2.6524731792599268e-05, 0.0005790577238575185, 2.313234770159121e-05, 0.0002757053962291123, 4.242263899258239e-05, 0.0012787117686122815, 5.037567854500018e-05, 0.0009977659871532926, 0.0015498954953229265, 0.0002545094331805259, 0.0009067194447282792, 0.0006139468867998354, 5.792205125306312e-05, 0.00018607646040982737, 5.687970128678185e-05, 9.993866173432596e-05, 3.947069101117978e-05, 0.0008518351053578166, 0.00012896899612514274, 0.0003753703719456032, 2.4627795913546084e-06, 1.0976770033251338e-06, 1.2838225709455346e-06, 4.1076045595827125e-06, 5.205744076071994e-06, 1.4363290542444095e-05, 1.3838820807275359e-06, 4.675906729856298e-06, 0.0012042540454591155, 0.0007251887783729236, 3.0118107959853865e-05, 3.535110053751745e-05, 1.7155083332954026e-05, 4.7429870637447556e-05, 4.646046118769793e-05, 5.099185095581704e-05, 2.623175882477902e-05, 4.0155149421197127e-05, 3.578654731262653e-05, 2.248446272990295e-05, 2.1816581629413414e-05, 2.5767940328241642e-05, 4.6046122194404476e-05, 1.7910188450481216e-05, 3.1516709181278855e-05, 1.6733073839620444e-05, 3.235934484917388e-05, 1.2664208427478894e-05, 2.2913501824478763e-05, 1.3080697172451038e-05, 1.7639602231210943e-05, 1.691637100385546e-05, 1.8790203604608645e-05, 1.742243847999937e-05, 2.072873003580199e-05, 8.173765376737344e-05, 3.707455365325117e-05, 3.288124146827863e-05, 5.776563236440849e-05, 0.00013844566676100658, 2.5310417305476104e-05, 0.00013090567247848905, 0.0004551501948939528, 6.580804229596052e-05, 0.00019366860048942327, 0.00017888524401412392, 0.00024890852595073863, 0.00013769675254980478, 0.00016768135371975844, 0.00018049930151472747, 3.8020972625608456e-05, 3.624636995182391e-05, 4.781449297998094e-05, 2.9392546563003094e-05, 5.877569363846459e-05, 3.029918664333598e-05, 4.50557338132182e-05, 4.9126860606107744e-05, 4.692762117159518e-05, 3.634602031165738e-05, 1.328324011174233e-05, 0.00010006177450698811, 2.6005991748777444e-05, 1.2087272541558745e-05, 2.2154778823852434e-05, 2.0779639848173243e-05, 2.0449343251717482e-05, 2.9990687351420636e-05, 1.4909388681776284e-05, 4.544158817316401e-05, 4.7410137989570686e-05, 0.000509364689853423, 4.025966413131982e-05, 0.0007597799815349537, 1.6077247826510004e-05, 9.46928645848218e-06, 7.849952096537642e-06, 1.4638087065272441e-05, 1.9033532774381275e-05, 5.9592194467675424e-05, 1.852478548202761e-05, 5.938890733828287e-05, 0.0030674286681230006, 0.00037027426368636986, 0.0038221061281181576, 0.00025683718396529704, 0.0002810714744834999, 0.0010356764474608688, 0.0002771951488042809, 0.0006982421214743314, 3.989063291967361e-06, 2.886712735656816e-07, 3.671604629569832e-06, 7.776125261306862e-06, 1.662905028704839e-05, 5.303564654566287e-05, 2.095799373053182e-05, 3.518568668426357e-05, 1.3615743459573504e-05, 2.7103885863378598e-05, 1.6124509904006974e-05, 1.9269593591349022e-05, 0.0001896603421464517, 1.0802718302957497e-05, 3.239612874467313e-05, 8.805876780318547e-05, 0.002657483682664032, 0.005545986272358718, 0.0024383602004632767, 0.006805730363136899, 5.049520486134653e-05, 0.0001450821936100045, 5.218467379589039e-05, 8.691148773624864e-05, 0.0013072194292576911, 3.1636301011706656e-05, 0.0008259194322667765, 2.920649012044813e-05, 8.586513923936261e-05, 0.00011410225703478834, 2.8167876709062274e-05, 3.23753769573201e-05, 1.4386710196565252e-05, 4.154294106928284e-05, 1.5467029340489954e-05, 3.846667303088213e-05, 0.00019466793706713728, 0.00014424235912089022, 0.0001539456278170183, 5.367565324182263e-05, 4.488339586641347e-05, 0.0018459472165018676, 2.934853341919321e-05, 0.001451140232307887, 0.0004086938898506197, 2.4670905532773632e-05, 0.00020493353524847678, 1.4582483736128335e-05, 0.0005469165058671916, 0.0005018116113807328, 0.0003505513967033428, 0.00038392131044362926, 0.00010093614483008115, 0.00010216691798561244, 0.00017349402511244067, 3.5719120836273674e-05, 0.0007938609399408804, 0.0005071729709766206, 0.0002513785236284059, 0.0003634408991069559, 1.009386294159729e-05, 6.35935259812004e-06, 1.2514507930647499e-05, 4.532351099854603e-06, 6.820484285330995e-05, 0.0003165136385308242, 0.00014078474897105217, 0.00024837245826614683, 2.2874529017175536e-05, 8.249541596168185e-05, 2.0764759446661313e-05, 6.941898849135086e-05, 7.198516491245287e-05, 1.1038006363088498e-05, 0.00012616478743427182, 1.1770277061748145e-05, 0.00013431477176269486, 5.340208921553055e-05, 0.000209955759045609, 4.181038356394016e-05, 0.0005491049921753959, 7.359725529386096e-05, 0.0007095865583166179, 4.749631315965734e-05, 0.00015778888570367911, 8.135479556482263e-05, 0.0002691801304123532, 4.8823863604869186e-05, 2.5478508546013452e-05, 8.402027430345306e-06, 2.966169259180345e-05, 6.424385466109649e-06, 7.259270272280489e-05, 0.0009013820073693063, 4.334714309475501e-05, 0.00042500444687302647, 0.00020466659134382194, 3.0451779636919616e-05, 0.00038903646287579953, 2.1414635967875257e-05, 0.002091925139605111, 6.704713121554934e-05, 0.0018982382834611304, 5.413316352103373e-05, 0.0002253345825814175, 0.0002350199159922918, 0.0005631019408299877, 5.485341657401156e-05, 0.000893003516032224, 0.003974664028897229, 0.0013825110137737906, 0.0027854986136836655, 0.0011139854337367681, 5.893910828042108e-05, 0.001104527098907065, 2.357686004898443e-05, 0.00038127028931351576, 0.002753305541562316, 0.0007599345405812764, 0.0019364797653093214, 0.0014197973808631641, 0.0003262614035357424, 0.001967335122018848, 0.0002840962851013697, 2.8541765785971127e-05, 7.038523433405274e-06, 2.3363396036289937e-05, 1.0381025025151376e-05, 8.804632461431727e-05, 0.00031310651680594787, 0.00019293140720539554, 0.00020476966850655086, 2.1022798589621955e-05, 1.6603221990393116e-05, 1.3379594794981458e-05, 2.1750908557069433e-05, 0.00034056915960214637, 3.963149043231508e-05, 0.00047662512938142544, 2.8063725544958754e-05, 0.00011824217820738248, 0.00012024631493814224, 0.0001617605351590279, 6.547254455289843e-05, 0.0016911000058703741, 0.0059833933022530395, 0.0015826378777956225, 0.004929458372073227, 0.00041340463123020534, 0.00015613844632310578, 0.00013616697113046097, 1.0517754082391674e-05, 4.0599309254680175e-05, 9.906946287010044e-06, 0.0005300195513288564, 0.0004651586435184858, 0.0005693578810630607, 0.00036852427958986055, 0.0014026523090673187, 0.00019992141581249854, 0.000471143907764555, 0.0007232345957248597, 4.220988817819786e-06, 2.3318678358921362e-05, 8.918937289783813e-06, 1.1819459720737379e-05, 0.0004947720866344912, 0.0012536213932252947, 0.0005450334673496501, 0.0009422788305095586, 1.0793877618552273e-05, 0.00010276351545406927, 6.721708892870326e-05, 9.114764600588951e-06, 0.0016395141939564034, 3.984322992251746e-05, 0.001281557326066383, 8.153000998534548e-05, 0.0006771397377354394, 2.9020293570717066e-05, 0.00032346827477380596, 2.6158493145993326e-05, 0.0014703977033993399, 4.333347856930253e-05, 0.0011614821816555833, 5.594344333283241e-05, 0.00029342167089840875, 0.0016783439180827334, 0.0006811830536370498, 0.00103254559971164, 0.00018596196950305746, 7.185864764449183e-05, 0.00010270906838083589, 6.81023908656535e-05, 0.0009530744656703594, 4.196076121243067e-05, 0.00041481185742566113, 0.00015174895884640714, 1.308589401714769e-06, 2.3483779785318378e-06, 4.473219552290187e-06, 1.290128157917126e-06, 1.564595023951315e-05, 5.752944671330411e-06, 5.2332005777634825e-06, 1.4335919535561773e-06, 0.0008012569145745162, 0.0013041030325391398, 4.066122322779061e-05, 3.112917151359397e-05, 5.3139271538946026e-05, 1.7704370390000434e-05, 5.335118036498261e-05, 5.076067753601732e-05, 4.14375299195684e-05, 2.7826700900967583e-05, 2.4921739120871814e-05, 3.709416286909844e-05, 2.8226730024582733e-05, 2.237791590635615e-05, 1.9817148670105723e-05, 4.867321884792953e-05, 1.7647917672507583e-05, 3.336846870688537e-05, 1.338636076347479e-05, 3.304390154901161e-05, 1.3431685284735607e-05, 2.3752317402267957e-05, 1.6271843611418986e-05, 1.7490864541389843e-05, 1.6916958972574546e-05, 1.8544774450939302e-05, 8.4290810572701e-05, 2.1012165531900607e-05, 3.5285717024879804e-05, 3.90051782313286e-05, 0.0001504116346373979, 5.6808343466785675e-05, 0.00014391068257186247, 2.478027876948236e-05, 6.872259501529872e-05, 0.0004700693933369619, 0.000185264553862014, 0.00020440561339353085, 0.00014038092054105157, 0.0002537785565665306, 0.00018363246361181412, 0.00017304890715759798, 3.997543339358139e-05, 4.3703645630370785e-05, 3.318296648457938e-05, 5.3790687445191556e-05, 3.287151771452928e-05, 6.621150252527674e-05, 5.226832736147495e-05, 5.012885499764175e-05, 4.0893197111986885e-05, 5.129649959552995e-05, 0.00010700083783896036, 1.4696610687008682e-05, 1.2252053163148733e-05, 2.6339505913995684e-05, 2.0209485671857402e-05, 2.3515964325263428e-05, 3.086313418333645e-05, 2.3108580584172636e-05, 4.7086339482070564e-05, 1.7002849247245414e-05, 0.000526775162629274, 4.972016833670023e-05, 0.0007937344677830592, 4.448499283137594e-05, 9.979479349650605e-06, 1.718021396225208e-05, 1.533085333552541e-05, 8.560415067516582e-06, 7.031777212638991e-05, 1.937512362494311e-05, 6.746262514771441e-05, 2.0866454006894525e-05, 0.004484593106525537, 0.0007668633766489154, 0.0030792645823952422, 0.00040701724896781064, 0.0003079171281180028, 0.0006502751077376835, 0.0003026982738919248, 0.0010683636652686237, 7.380826644880708e-05, 8.767555852105811e-05, 8.586963935385035e-05, 7.452072471361698e-05, 4.920818909294053e-05, 5.1076814276089675e-06, 5.280467803255978e-06, 5.0012218918678475e-05, 5.1315562805696116e-05, 2.9926894343767807e-06, 3.1282787171297654e-06, 5.231017232493421e-05, 2.6995513415273745e-06, 8.317840305466506e-05, 8.527858440735452e-05, 2.8848691133020246e-06, 3.197438698151059e-06, 6.427759576227202e-05, 6.510412604777124e-05, 3.4200361855872223e-06, 1.0930500956427844e-06, 5.0006521150210716e-05, 4.934381323545789e-05, 1.2150285470595734e-06, 2.204378526965042e-06, 4.094760623768627e-05, 4.0494659080191176e-05, 2.3048697417565745e-06, 3.631712062847348e-05, 1.6087346279806101e-06, 1.5795127714626879e-06, 3.449773933162498e-05, 3.8410113264787835e-05, 7.968609067409286e-07, 7.54982520509772e-07, 3.663219895014984e-05, 7.005645047100158e-07, 2.8933343047735935e-05, 2.849427840279321e-05, 7.005870823241553e-07, 7.186326436270446e-07, 2.807141354312301e-05, 2.722173772681299e-05, 7.263923361359025e-07, 0.0005748062997494172, 7.844123024687041e-05, 7.369185239816194e-05, 0.0006657247166769471, 0.000548876968526337, 6.112311305859667e-05, 6.259301832718787e-05, 0.0006443077121636475, 6.572694163487291e-05, 0.00024821734343091886, 0.00026346482874760926, 6.554586160349207e-05, 9.707101379650248e-05, 0.00017033783056814695, 0.0001804611233436268, 9.861449458364352e-05, 0.0006930568792454487, 0.00015514264761862744, 0.0001320027762165087, 0.0007085530264936803, 0.0007871453158197991, 0.00015119453092530082, 0.00012895585380845044, 0.0008066999589798472, 1.034755340285389e-06, 3.368636098823187e-05, 3.3907346109831475e-05, 1.0664281048537583e-06, 6.817795006145992e-07, 3.7713410328312895e-05, 3.796549374366082e-05, 7.593141554810855e-07, 9.63607861114164e-05, 0.00016442209750320883, 0.00013704455349696667, 7.672023803388378e-05, 6.241748157321283e-05, 0.00020017651296967955, 0.00016126828505704245, 5.004489235380213e-05, 0.000102006168303008, 2.8795739964100456e-05, 2.4456504856942155e-05, 9.004075678305491e-05, 4.09233714299581e-06, 4.329014689344e-05, 4.2341046404766565e-05, 3.91540675524413e-06, 1.433305805200348e-06, 5.361463329354774e-05, 5.2342653037891905e-05, 1.4340675326900563e-06, 5.8026236440518094e-05, 6.82725767618621e-05, 6.701268004247009e-05, 6.225420301378221e-05, 7.397851497173414e-05, 6.918936128803613e-05, 6.937241269980972e-05, 7.920422099520613e-05, 0.0003651419437893758, 0.0001372237861984732, 0.00012770533825599476, 0.00036932087676698174, 0.0004926794293880091, 0.00013809872858761504, 0.00013015138228627345, 0.0005019439576907384, 6.643060055650643e-05, 4.155122193681433e-06, 4.115083964435009e-06, 6.4469319801529e-05, 5.514226660152654e-05, 2.0048750106420783e-06, 2.001652764289049e-06, 5.32590120574903e-05, 8.67072713425863e-05, 1.0355574613781575e-05, 1.0148190282555193e-05, 8.785209656700202e-05, 8.15460565069817e-05, 1.2153466507199566e-05, 1.1925310289271221e-05, 8.184310746183355e-05, 0.0008248400078191776, 8.056395147235542e-05, 8.594712396412276e-05, 0.0009116735494243868, 0.0007443043385693175, 9.411292273322973e-05, 0.00010187733308670901, 0.0008442927167990665, 8.714442100577892e-05, 0.0004019647020428796, 0.00041461392223092307, 9.28454957140103e-05, 7.358304596003851e-05, 0.00044489825967648794, 0.0004746281249334342, 7.383791601601093e-05, 3.4594909862063656e-05, 1.1255487050824329e-06, 1.0350356966630901e-06, 3.412482244812239e-05, 3.852096965612535e-05, 2.204799194406762e-07, 2.115861839015694e-07, 3.74415320962922e-05, 0.0002865712160648112, 0.00017079251586722303, 0.00014721457797135145, 0.00025499609593609285, 0.00031915733991977845, 0.0007379175096554074, 0.0007672092225756608, 0.00026040492985396455, 0.0001768068168344776, 0.0008593821178686512, 0.000880411018782785, 0.00015905347594424396, 8.225754869055655e-05, 0.00013209466568600954, 0.00010699709623987626, 8.453042977292899e-05, 6.040144094242186e-05, 0.00016391034022622918, 0.0001336149658288617, 6.078396596978433e-05, 5.759516284861461e-05, 0.0001500916510703256, 0.00012001119650064457, 4.747137483366554e-05, 4.0962214620813084e-05, 0.00017194745503194071, 0.00013514226826199185, 3.448166270081673e-05, 3.547497677673516e-07, 3.036416279060138e-05, 3.066900264586907e-05, 4.0424831104298443e-07, 4.3974987742151497e-07, 2.9614195545265745e-05, 2.968233429764669e-05, 4.331177230579997e-07, 3.3050434025198383e-06, 5.361758688649746e-05, 5.3052218478669644e-05, 3.1824066989472778e-06, 3.3496948541293564e-06, 4.5508464059287835e-05, 4.441584700918188e-05, 3.2985719227681086e-06, 1.428909773089303e-06, 3.363385128034181e-05, 3.281282590392399e-05, 1.4347328032300456e-06, 1.6542821385719143e-06, 2.9329845712894246e-05, 2.8338369312012055e-05, 1.6254595813571563e-06, 0.00021026307710566363, 0.0010925110837346518, 0.0010350053304132125, 0.00018425809763950545, 0.00045753421984828915, 0.0005769741651165493, 0.0005260894038302856, 0.0004220543257882114, 1.1062332955682802e-06, 3.928817062942873e-05, 3.7693850973500995e-05, 1.0575637484680397e-06, 1.957641110897599e-06, 3.2462767902798574e-05, 3.159821333986785e-05, 1.7849670272787905e-06, 2.2724039314337258e-06, 2.7809925192343464e-05, 2.737673907576963e-05, 2.2662603373686167e-06, 7.975525628647507e-07, 3.5423045610205394e-05, 3.504132897184692e-05, 7.77745329182233e-07, 5.059459782736882e-05, 4.956888957672382e-06, 4.829148000150586e-06, 4.850182449122898e-05, 4.1655476422815715e-05, 3.424203988537197e-06, 3.3221456706416073e-06, 3.993260456516565e-05, 7.309903699073522e-05, 1.0567608484287605e-05, 9.97421878720741e-06, 7.249624657794608e-05, 6.256899482349968e-05, 1.5022805879781487e-05, 1.4160685630548545e-05, 6.234668535382133e-05, 4.881545108686454e-05, 4.657793399647491e-06, 4.393124328825578e-06, 4.8397057720475864e-05, 4.188836595654353e-05, 5.747616284205044e-06, 5.377559598453116e-06, 4.15533689863155e-05, 2.6178371708873654e-06, 3.0720942640474924e-05, 2.987501383800604e-05, 2.469225889377192e-06, 2.065834536164378e-06, 3.5312511541192126e-05, 3.421162668189442e-05, 1.8452265013482172e-06, 1.8027843375079875e-05, 1.1167827040778146e-06, 1.0160326343044813e-06, 1.7263075914591007e-05, 2.2885636213750884e-05, 1.5913745605607775e-06, 1.4965203497486081e-06, 2.1955686521187286e-05, 1.2843038275090144e-06, 2.8584156387949048e-05, 2.7919224372100145e-05, 1.1470989483830683e-06, 8.19167840298043e-07, 2.5830889319138603e-05, 2.486849184820467e-05, 8.385502977668323e-07, 0.0001345817268736535, 0.0004609122320990311, 0.0005063558022713558, 0.0001483029504132185, 6.575319369800412e-05, 0.0006490963588467264, 0.0007395909693945843, 6.891778968186606e-05, 3.104043189451991e-06, 4.0732580034462656e-05, 4.0057558652267166e-05, 3.302210308130301e-06, 2.7119271360563616e-06, 3.2080650470481e-05, 3.199685054016754e-05, 2.62949887547284e-06, 6.205801703668073e-07, 2.3435136685035433e-05, 2.3564870457758668e-05, 6.111407357442097e-07, 1.7364822917457815e-07, 2.3396634951514785e-05, 2.412478202058324e-05, 1.6617048287102596e-07, 0.00010577427206275059, 8.097429633672431e-05, 6.81775525358065e-05, 8.856608222585093e-05, 0.0001262607449564163, 6.661871631104395e-05, 5.4807696673640976e-05, 0.00010255449047653664, 1.4183822017694884e-05, 2.4413479914436795e-05, 2.7834662182947393e-05, 1.4086130089120049e-05, 9.771237470405123e-06, 2.3209326059032636e-05, 2.6616221829314822e-05, 9.810247996929998e-06, 0.00013251767077957952, 0.0010884403075358854, 0.001084258701316466, 0.00011577565644882892, 0.00014038050132153372, 0.000817444118885173, 0.0008251341355283005, 0.00011598642635467235, 4.961574018107203e-06, 4.914665752821996e-05, 5.015333996767014e-05, 4.836332823371192e-06, 7.137939107402958e-06, 4.431798023505323e-05, 4.498455935510227e-05, 6.864582412150762e-06, 4.705954345267453e-06, 4.204399091714339e-05, 4.2485718046191276e-05, 4.7918814680223065e-06, 4.18855849863504e-06, 3.8623924977088175e-05, 3.8249047860901636e-05, 4.4602310717939e-06, 0.00023399488691256272, 4.7073718065383475e-05, 4.493855625724958e-05, 0.00020339517028317717, 0.00020343699724544265, 5.57538273729579e-05, 5.250949890319037e-05, 0.0001751908092586548, 5.074823254782748e-05, 9.811263830196532e-05, 0.00010090359479026399, 5.077950423387889e-05, 2.1507121504022256e-05, 0.00010663511208717571, 0.00010309294331898183, 2.1760317374897242e-05, 3.7693055201634435e-05, 4.577140202819219e-06, 4.439624400136502e-06, 3.677311510489764e-05, 3.083027938034853e-05, 4.082330546227533e-06, 3.957059338425908e-06, 3.0207473360351686e-05, 5.778164883701727e-05, 9.827040316223498e-06, 9.495752238848753e-06, 5.672481915820477e-05, 4.915904531361034e-05, 8.019393134515162e-06, 7.67077903291333e-06, 4.832725108851232e-05, 7.060737824679604e-05, 7.087459457777584e-06, 7.024246867748977e-06, 6.819720116417174e-05, 6.464653895854007e-05, 5.643332659783258e-06, 5.448958231798164e-06, 6.370210740737886e-05, 0.00017407749567632339, 0.0006552468477936813, 0.0006481075869470452, 0.00018448423784217407, 0.00015268141475435, 0.0006108142979046571, 0.0006130722460031794, 0.00016198069718283907, 5.2953352649156803e-05, 0.00012819539704001553, 0.00012247072064465393, 5.316043853056784e-05, 6.860664324599582e-05, 0.00012420655139888103, 0.00011649256006491355, 7.138000577207459e-05, 9.291471082572729e-07, 2.7352308562128744e-05, 2.654887025666355e-05, 8.606095420509763e-07, 5.537846395185544e-07, 2.5590772574211888e-05, 2.495377990595971e-05, 5.510433828377089e-07, 3.24899192745148e-05, 8.989999716263888e-07, 8.28089939106559e-07, 3.1885405643919995e-05, 4.070294574753956e-05, 5.463908801342247e-07, 5.466547417920515e-07, 3.984310082621543e-05, 0.0004606443676811983, 0.0001015653935648403, 8.862608692447569e-05, 0.0005385981846836117, 0.0005583609459689752, 4.5695426458850135e-05, 4.193868288953972e-05, 0.0006282743449053935, 0.00010365184094127442, 0.0002337741399291531, 0.00020398806789257185, 8.275986013634972e-05, 0.00014326591107720582, 0.00012324123332968596, 0.00010672000598673305, 0.00011246420095652848, 4.519486004513718e-05, 0.014267650713839508, 0.014239215945462179, 4.375686120747138e-05, 4.602734988962144e-05, 0.013178365971423368, 0.013120058611808443, 4.3214105593794766e-05, 8.780313952694347e-05, 0.01082106003425755, 0.010816486093976221, 8.810023082971834e-05, 8.287885303854529e-05, 0.008085113642837441, 0.008085517397519906, 8.330451842159912e-05, 0.00010198310740547659, 0.0054145075473547915, 0.0054008568260358525, 0.00010566411728876022, 0.00012138889448550911, 0.003090848845883638, 0.003081707429654503, 0.00011914462580340149, 5.879247623032381e-05, 0.0015575930185571564, 0.0015469430834569788, 5.942270235216951e-05, 0.00010513774100118838, 0.0005539897554077421, 0.0005491775670206694, 0.00010216636407601404, 0.00020313773750427674, 0.0006635680792487921, 0.0013997434948345032, 0.007026700589887805, 2.56126819554745e-05, 0.0003761783286083079, 0.0005976046748648476, 0.0002906714972704942, 0.00015987099729948792, 0.004209202172586877, 0.005755379591615814, 0.001388123704463277, 2.4743695593854282e-05, 7.639953383809642e-05, 0.00017155451643810854, 0.0022839357476078744, 4.511232734672015e-06, 0.00014461097013792755, 0.00012016473737666442, 0.00012081642921351525, 0.001287404370312779, 0.000559119062741553, 1.2211363787686158e-05, 1.1943189770155127e-05, 0.00591788288202052, 0.019970213002928627, 0.011754112899173096, 0.0024562012465942883, 1.4966125424274376e-05, 0.00023154900645144116, 0.00045763796416625687, 0.006776609650876252, 0.004514175647521074, 0.014246316348391613, 0.0008767979765407122, 0.00018983794011457854, 1.7306137938797073e-05, 8.033268812390195e-05, 0.03407008217281547, 0.009033510198987566, 0.004784162356266646, 0.0009148315931940271, 9.674660838662389e-05, 0.05119441117301382, 8.159015275370149e-05, 0.05306120971223334, 0.00599150788386126, 0.01467267156401233, 0.0021825866379098446, 0.0052640944097296005, 0.00010816876005299564, 0.03834762676326592, 0.0016495416744712014, 0.001188717036299078, 6.297683999298468e-05, 0.010334266801472265, 0.0022021872519213596, 0.014402347502940505, 0.001942761715832034, 0.000733996632362841, 0.007071271115505972, 0.0008679402634111199, 0.0002893251565461353, 0.0006049124346317719, 0.0008918202020026816, 0.00018872808514114477, 0.0003803693186580078, 1.0433743941757444e-05, 1.6620916755727897e-05, 3.8407130452044214e-05, 0.003018393146749446, 0.034685579243857644, 2.6158463555000625e-05, 2.9174757763911876e-05, 0.019370178198613305, 0.0022742455769488045, 0.005614655505149592, 1.3537792252405265e-05, 0.0012835246306086888, 0.00826166558382751, 0.004342307530414021, 2.0190440888740574e-05, 0.00043911047754837307, 0.0007110761076740471, 0.0035900761491488536, 0.0001313651617928921, 0.0016026406003944993, 0.0015325373372423088, 0.0020368890468971832, 0.0001834908820637703, 1.995098967858798e-05, 1.742255620556468e-05, 0.01123970499901931, 3.874465089471696e-05, 3.826287067121454e-05, 0.012821405831850626, 0.011399677585419493, 0.00014067605178906035, 0.00013476469008755215, 0.012971114644962258, 5.589956235246366e-05, 2.156021697065197e-06, 3.6593093085241535e-06, 8.667524574060525e-05, 0.009529199161653519, 0.0004432162566449831, 0.0003712097415578356, 0.0007127187598614023, 9.99060923144683e-05, 9.709561650753267e-05, 0.0008781382729594536, 0.005303694150017595, 0.0004200359221073041, 0.0102602571470586, 0.011731014242210444, 0.0003298130152788408, 2.1671197686147745e-05, 0.0008185238365552727, 0.0002961379734956069, 6.060044851056479e-05, 0.0004587564663591653, 0.004920448813340636, 8.215994027169422e-05, 0.00011518520448716753, 7.526827441138758e-06, 6.255837606217936e-06, 0.0007030857665976702, 5.591064818289419e-05, 0.0017663077955264732, 0.0037088124319359372, 0.0012121835180012811, 0.0015485836482227908, 0.007846585290566203, 0.0035311539219088804, 0.001038033380678755, 0.00016815954914440898, 0.006174188459948834, 0.002327755629472236, 0.00036181279444963025, 0.0014930931235972488, 3.118254855740899e-05, 1.5214208925518525e-05, 0.00014832280696650866, 0.0005808587333023869, 7.41353373174063e-05, 6.075581693139708e-05, 7.19239594832535e-05, 1.940848324161595e-06, 5.3008475782724834e-06, 1.996063491647412e-05, 1.4265780986755467e-05, 3.561953143583157e-06, 0.001608354886672519, 0.0005683950596934541, 0.00046496223731354243, 0.000607975541107159, 0.010788206047899599, 3.2779466326862344e-05, 0.0005829646249128405, 0.0050109353162559, 9.284660622989134e-06, 4.821815294353416e-07, 5.014127567432289e-07, 2.2616977194664663e-06, 0.0012882891782310508, 0.0005457962064423119, 7.157132602068503e-05, 0.0008556125010799068, 0.0015784865841231262, 0.0018903071876847917, 2.724052286138611e-06, 3.3968025715006133e-06, 0.0047496979914099105, 0.01155329972927938, 2.6166348081548594e-06, 9.072354966005404e-07, 0.028601383495686482, 0.0003352337899649174, 0.010868165074294032, 0.003537232566733904, 7.9260832822755e-05, 0.009361233155720365, 0.005983685358632272, 0.0008632653376820973, 4.0191168946359705e-05, 3.3130672905955115e-05, 0.004938751146984588, 0.00019241372782642852, 0.002505745406896359, 0.010845348993885574, 7.74723734228028e-06, 1.1984625501550946e-05, 0.01664856693711803, 0.011553323369603677, 0.021663160432844258, 0.0030285801966769502, 0.0018885408487559284, 0.004192168270427411, 0.021089477680105707, 4.795356948788662e-05, 0.03054924807601293, 0.0045193144548754316, 0.027618018124121166, 7.443953831486155e-06, 0.00496997682640464, 0.0022018376042287737, 0.0005228414329810238, 0.0007457928802658777, 0.00026654365162378737, 0.008096586116532856, 1.9870943719848092e-06, 2.4436384596768505e-06, 0.00014937311317124135, 0.00040143819601704466, 8.54224552076957e-05, 5.8208580629595665e-06, 8.6023355554555e-05, 5.667500726567963e-06, 7.346991348116933e-06, 1.894369483792884e-05, 7.185934556625867e-06, 1.7956148534892538e-05, 8.972296265525944e-05, 1.4430903429912857e-05, 9.129305628479893e-05, 6.114683719898276e-06, 8.014289411734202e-06, 1.4820639946981858e-05, 7.750950581008709e-06, 1.871186712950176e-05], "data_std": [0.001029310507344997, 0.0005220666518559378, 0.00194906050790798, 0.00259429400563596, 0.007336475932397028, 0.0038702042955166918, 0.0059810906645989224, 0.0044971149989931555, 0.005130047786258716, 0.003504155205934232, 0.004318334673998624, 0.0038291807108772028, 0.003130362863945301, 0.013075106623288901, 0.008550961334833367, 0.005426021886257854, 0.07229034021658125, 0.05326794501176709, 0.08236493257864302, 0.048192336284157866, 0.011774006132908816, 0.007249787497073886, 0.009262946507520098, 0.007098220814629502, 0.005369796974405425, 0.03626480399649185, 0.005616851363201915, 0.028652644334837583, 0.010826448588994985, 0.008850952520970326, 0.00555037413247089, 0.004884195539376173, 0.006402242399499621, 0.0039722444598520945, 0.006146542008758004, 0.004139980931895049, 0.011253169189756643, 0.01382865437636852, 0.006780841081650001, 0.01212966902915012, 0.04319513860497356, 0.0058449917438435075, 0.03844663949629404, 0.005334332443311412, 0.004604495697525066, 0.01997131050282762, 0.003819518052830291, 0.014136155409306052, 0.02363004034622133, 0.0231182892452802, 0.020456453413189562, 0.018846527785332686, 0.010437405295039129, 0.009539033895117198, 0.0060863329290485905, 0.012872272058200327, 0.0214350536216777, 0.027338062982025048, 0.017980227051451594, 0.015349553118114537, 0.002627398679380201, 0.0031195774459278082, 0.002223299810370106, 0.0034738294451890357, 0.01680827690245178, 0.008013438759702247, 0.015006749233916006, 0.011427333104629558, 0.008976933322463167, 0.004642053062649587, 0.00827618670525644, 0.004461598000557662, 0.003260972899578949, 0.008175787436976925, 0.0034990849464970404, 0.010846222067822086, 0.006979022257746191, 0.011035857085338318, 0.006264104908511159, 0.013666914898328842, 0.008713279867789036, 0.023217266762010975, 0.006680751292893796, 0.026748766371529332, 0.00886179475734797, 0.012106213624418329, 0.006738118747938832, 0.01591644144931264, 0.002988750582597079, 0.005053858504622327, 0.002587698971939708, 0.005541303839155023, 0.030488805377040157, 0.007996772637449407, 0.020963051302078334, 0.006780563658198245, 0.0054044075787885665, 0.01377836878119801, 0.00453487848549394, 0.019183942224830275, 0.00795520294754409, 0.04604769313896822, 0.007530137027538593, 0.043851782102536416, 0.014811149725983089, 0.014622005568957114, 0.0072509968468977256, 0.02308286532015905, 0.061760757926507814, 0.02881968552622215, 0.05151886218002803, 0.03586781462819963, 0.008159143604981971, 0.03167031057101105, 0.005107289046391984, 0.031168571413339997, 0.051348935063388376, 0.018268468784484404, 0.04271058281080147, 0.026342762140823248, 0.019176793501753393, 0.03719609480796415, 0.017989058105887593, 0.044043769943691864, 0.0026334221714641583, 0.0053115701125808715, 0.0032435762210828644, 0.004715893803564115, 0.016855288390179485, 0.00914061130116373, 0.013667771340577523, 0.013336300489188263, 0.0038781701800259328, 0.004594208381737646, 0.004488487022073323, 0.0037082348735282774, 0.006355968579595406, 0.017150760851538813, 0.005262503461280486, 0.02029043648673681, 0.010858546156297721, 0.01072825175990069, 0.008074047686159361, 0.01273305115385371, 0.07683133021292071, 0.03985359800694734, 0.06918588610482976, 0.03914723140640002, 0.011727424377229003, 0.020675172986541934, 0.0030210443134068106, 0.010780140962473697, 0.0029164366127911734, 0.005895328861199798, 0.02110684876241754, 0.022250078133988067, 0.018762727431681368, 0.02287757815212466, 0.013616649878885863, 0.035899326988740876, 0.025034899304745707, 0.021225197504530283, 0.004702308675303987, 0.0020147224426586034, 0.0032809529288326347, 0.0029083706924518758, 0.03369662315179626, 0.021834448156912732, 0.028783579858956184, 0.022500397281695353, 0.010025589553824028, 0.0031042556813229366, 0.002987545500219733, 0.008043667738875597, 0.005946896874019065, 0.03795728958291553, 0.00840396693509606, 0.0337623527724478, 0.005150216674335097, 0.024063618261963817, 0.00480960993237406, 0.016604378826957433, 0.006513266384279273, 0.0357590795269157, 0.00709758258458471, 0.03158743400710625, 0.03936871213696133, 0.015953351785143018, 0.03011178249005328, 0.02477795162639227, 0.007610653799317317, 0.0136409845835932, 0.007541863250336872, 0.009996932616274152, 0.0062825704143431435, 0.02918621430329423, 0.011356451740096585, 0.019374477333481882, 0.0015693245653320437, 0.0010477008176598575, 0.0011330589441620126, 0.002026722615352854, 0.0022816099745732164, 0.003789893209899732, 0.0011763851753263197, 0.0021623845009286157, 0.03470236368691786, 0.02692932933388657, 0.005487996716458007, 0.005945679148551279, 0.004141869545622366, 0.006886934778074173, 0.0068161911055734, 0.0071408578585361185, 0.005121694917190892, 0.006336809088271251, 0.005982185830666457, 0.004741778435345008, 0.00467082237185417, 0.005076213187824329, 0.006785729304533483, 0.004232043058675233, 0.005613974454989874, 0.004090608003661613, 0.00568852747634868, 0.0035586807144613146, 0.004786804970382516, 0.003616724647032317, 0.004199952646305782, 0.004112951617008819, 0.004334766845472619, 0.00417401946329906, 0.004552881509088721, 0.0090408878860084, 0.00608888771889014, 0.005734216726657498, 0.007600370541257084, 0.011766293671373607, 0.005030945965270955, 0.011441401683294274, 0.02133424933982803, 0.008112215621885337, 0.013916486643166201, 0.013374798840136771, 0.01577683510564583, 0.011734425957404341, 0.012949183515564155, 0.01343500284758911, 0.006166114872884583, 0.006020495822756122, 0.006914802454154489, 0.005421489330710068, 0.007666530743332644, 0.005504469696831474, 0.006712356800202012, 0.007009055614425366, 0.0068503737979467355, 0.006028766068745525, 0.003644617965129175, 0.01000308824848547, 0.005099607019053276, 0.0034766755013315156, 0.004706886319410363, 0.004558469024592933, 0.0045220950069317966, 0.005476375384450982, 0.0038612677557735213, 0.0067410376184356075, 0.006885502014346571, 0.022569109194946594, 0.00634505036475833, 0.0275641067610571, 0.004009644351623969, 0.00307722057358295, 0.0028017765964718964, 0.003825975309025457, 0.004362743720914773, 0.0077195980768220976, 0.0043040429228839725, 0.007706419878145939, 0.055384372056772484, 0.019242511886091426, 0.06182318438998559, 0.01602614064474966, 0.016765186383798418, 0.03218192734223463, 0.01664917862251111, 0.02642427144642462, 0.001997263951501494, 0.0005372813728072858, 0.0019161431652070864, 0.0027885704691305298, 0.004077873255392863, 0.007282557692573597, 0.0045779901409386875, 0.005931752412589687, 0.0036899516879728253, 0.0052061392474057585, 0.0040155335765010075, 0.00438971452276216, 0.013771722555528474, 0.00328674889563494, 0.005691759723027065, 0.009383963331300132, 0.05155078741070821, 0.07447137888047138, 0.049379754965605864, 0.08249685062556569, 0.007105997808988301, 0.012045006999167933, 0.007223896026099102, 0.009322633090294213, 0.036155489614409744, 0.005624615632352726, 0.02873881403723502, 0.005404302926414112, 0.009266344437768467, 0.010681865803069627, 0.005307341774284211, 0.005689936463381652, 0.0037929817026404506, 0.006445381375006667, 0.003932814429958519, 0.0062021506778602315, 0.013952345217458507, 0.012010094051292447, 0.01240748273490712, 0.007326366987929463, 0.006699507136081987, 0.042964487853364056, 0.005417428672275548, 0.038093834570805375, 0.020216178913202654, 0.004966981531350165, 0.014315499825310912, 0.0038187018391239104, 0.023386246083268506, 0.022401152010125124, 0.018723017831090767, 0.019593910034590576, 0.01004669820538475, 0.010107765232019016, 0.013171713066736637, 0.005976547568310125, 0.028175537970744773, 0.022520501126232086, 0.015854921117066646, 0.019064125972804415, 0.003177084031245836, 0.0025217756835452356, 0.003537585042178845, 0.0021289319152698618, 0.008258622333858713, 0.017790830181046196, 0.011865274921848721, 0.015759836873081738, 0.00478273237984058, 0.009082698715782763, 0.0045568365613286275, 0.00833180583615286, 0.00848440716328801, 0.003322349524521539, 0.011232309977661399, 0.003430783738702885, 0.011589424997069305, 0.007307673310673552, 0.0144898502078389, 0.006466094923826912, 0.02343298939903733, 0.00857888426859, 0.026638065964266586, 0.006891756899344124, 0.012561404607116161, 0.009019689327511377, 0.01640670992040614, 0.006987407502419563, 0.005047624049591397, 0.0028986250930993656, 0.005446254914324471, 0.0025346371468337727, 0.008520135135243155, 0.03002302462060254, 0.006583854729165507, 0.020615635980319076, 0.014306173190054073, 0.0055183131151575315, 0.019724007272250727, 0.004627595052278803, 0.045737568142667044, 0.008188231262949854, 0.0435687764742267, 0.0073575242793370195, 0.015011148609664002, 0.01533035929103724, 0.023729769085054066, 0.007406309241046552, 0.029883164424676045, 0.06304493658413203, 0.03718213299117992, 0.05277782312376729, 0.03337642032538493, 0.007677181011310146, 0.0332344264115851, 0.004855600894738408, 0.01952614373893411, 0.05247195004535581, 0.027566910247274295, 0.04400545154079573, 0.0376801987901227, 0.018062707536129305, 0.04435465163902032, 0.016855156039069164, 0.005342449418194909, 0.002653021566705645, 0.004833569699124027, 0.003221959811225363, 0.009383300305026866, 0.017694816099805836, 0.01388997506136694, 0.0143097752779892, 0.0045850625502409405, 0.004074705141527803, 0.0036578128430773296, 0.004663786933069459, 0.018454515967701413, 0.006295354670891472, 0.021831745907769845, 0.005297520697926414, 0.01087392193311054, 0.010965688074085558, 0.012718511515072348, 0.00809151064714732, 0.04112298634426218, 0.07735239687464791, 0.039782381499799915, 0.07021010163839123, 0.020332354296298434, 0.01249553705620954, 0.011669060421921765, 0.0032431087065332353, 0.006371758725397579, 0.0031475301884191743, 0.023022153490254913, 0.021567536797661567, 0.02386122128188456, 0.019196986211118153, 0.03745200006765084, 0.014139356980163508, 0.02170584962088688, 0.02689302132012801, 0.002054504518812209, 0.0048289417431691345, 0.0029864589884650706, 0.003437944112509303, 0.022243472899583176, 0.035406516253725026, 0.023345951840729264, 0.03069656056481831, 0.003285403722307545, 0.010137234112620132, 0.00819860286443387, 0.0030190668426831745, 0.04049091495578241, 0.0063121493900665454, 0.03579884531750128, 0.00902939698902122, 0.02602190880268854, 0.005387048688355904, 0.017985223789928385, 0.005114537432260451, 0.03834576512992458, 0.006582816917498353, 0.03408052496156101, 0.0074795349676856525, 0.017129555478715985, 0.04096759595195614, 0.02609948378104536, 0.03213324757492837, 0.01363678736004406, 0.008476948014733358, 0.010134548257363813, 0.008252417274087242, 0.03087190414714258, 0.006477712652814315, 0.020366930486100776, 0.012318642735561703, 0.0011439359255285102, 0.0015324418352850584, 0.0021149987121249474, 0.0011358380861360153, 0.003955496206484485, 0.0023985296894827902, 0.0022876189756520825, 0.0011973270036026822, 0.028306481847352846, 0.03611236675349789, 0.006376615342624221, 0.005579352248567388, 0.007289668822309147, 0.004207656163471587, 0.007304189233924776, 0.0071246528010856305, 0.00643719891875095, 0.005275101980148591, 0.004992167777716592, 0.006090497752162662, 0.005312883400243481, 0.004730530192944143, 0.0044516456137147446, 0.006976619442676341, 0.004200942474315446, 0.005776544703097637, 0.0036587375915026745, 0.005748382515891893, 0.003664926368255658, 0.004873634927060905, 0.004033837330807848, 0.004182208093984546, 0.004113023094096913, 0.004306364412232121, 0.009181002699743694, 0.004583902871124192, 0.005940178198074516, 0.0062454125749488, 0.012264242114268534, 0.007537130983788571, 0.011996277863231682, 0.004977979386205046, 0.008289909228411293, 0.02168108376758325, 0.013611192227795992, 0.014297049114888388, 0.01184824546255907, 0.015930428637250495, 0.013551105623225514, 0.013154805477755951, 0.006322612861276688, 0.006610873288028654, 0.005760465821839357, 0.007334213485111513, 0.0057333687928241, 0.008137045073322179, 0.0072296837663534735, 0.007080173373416907, 0.006394778894691112, 0.007162157467937294, 0.01034412093118407, 0.0038336158762986, 0.0035002932967322514, 0.005132202832507274, 0.004495496154136649, 0.004849326172290685, 0.005555459853453758, 0.004807138502703312, 0.006861948665071065, 0.004123451133122037, 0.02295158300922344, 0.007051252962183404, 0.028173293520336935, 0.006669707102367835, 0.003159031394217317, 0.004144902165582691, 0.003915463361535313, 0.0029258187003839767, 0.008385569278611315, 0.004401718258242242, 0.008213563486557732, 0.004567981393010979, 0.06696710465986667, 0.027692298146757617, 0.05549112165378568, 0.0201746684970983, 0.017547567584084205, 0.02550049230382981, 0.017398226170846406, 0.03268583279141934, 0.008591173752684035, 0.009363522762350616, 0.009266587254963413, 0.008632538717759508, 0.007014854887518382, 0.002260018014885936, 0.0022979268489784392, 0.007071931767111337, 0.0071634881730687685, 0.0017299391418130236, 0.0017686940710958934, 0.00723257715651442, 0.001643031144417955, 0.009120219463075714, 0.00923464045901921, 0.0016984902452772653, 0.0017881383330578926, 0.008017330962500676, 0.008068712787537504, 0.0018493339843271206, 0.0010454903613342328, 0.007071528911784969, 0.007024515160169981, 0.0011022833333855563, 0.001484714964888898, 0.006399031664063421, 0.006363541394553128, 0.0015181797461949538, 0.006026368776342308, 0.0012683590296050287, 0.0012567866849480416, 0.0058734776182109505, 0.006197589310755258, 0.0008926706597289555, 0.0008688973014745598, 0.006052453961010347, 0.0008369973146372788, 0.005378972304049904, 0.005338003222441254, 0.000837010801796581, 0.0008477220320523966, 0.005298246270524145, 0.005217445517378499, 0.0008522865340575917, 0.023975118346932455, 0.008856705383316666, 0.00858439586681334, 0.02580164174382993, 0.023428123452942984, 0.00781812720915928, 0.007911574958703727, 0.02538321713580939, 0.00810721540572797, 0.015754914897609534, 0.01623159969773803, 0.008096039871658987, 0.00985246232149621, 0.013051353591415219, 0.013433581925295531, 0.009930483099207386, 0.026325973471943043, 0.012455627146740844, 0.011489246111756363, 0.02661865936694935, 0.028056110133441503, 0.012296118530873913, 0.01135587309758481, 0.02840246395966109, 0.0010172292466722479, 0.005803995260872623, 0.005823001469159309, 0.001032680059289303, 0.0008256994008806106, 0.006141124516594082, 0.006161614540334442, 0.0008713863411145974, 0.00981635299443823, 0.012822718023227713, 0.011706602987073862, 0.008759008964139937, 0.00790047350310175, 0.014148374923279337, 0.012699145052208927, 0.007074241468440424, 0.010099810310248801, 0.0053661662259103056, 0.004945351843594362, 0.009488980808445915, 0.002022952580510925, 0.006579524822769498, 0.006506999800581414, 0.0019787386778562068, 0.0011972075029836507, 0.007322201396680355, 0.00723482225337236, 0.0011975255874886583, 0.007617495417820617, 0.008262722115735354, 0.008186127292100344, 0.007890133269709847, 0.008601076384484336, 0.008318014263514828, 0.008329010307342026, 0.008899675330887421, 0.019108687652200917, 0.01171425568264895, 0.011300678663513744, 0.01921772298600908, 0.02219638325016058, 0.011751541540904966, 0.011408390871909738, 0.022404105822164348, 0.008150496951505867, 0.0020384116840524223, 0.002028566973120436, 0.008029278909187861, 0.007425783904849813, 0.0014159360898861495, 0.0014147977821190735, 0.007297877229543554, 0.00931167392806397, 0.00321800786415782, 0.0031856224325169475, 0.009372944924995666, 0.009030285516360028, 0.0034861822251855347, 0.003453304256689703, 0.009046718049206218, 0.028720027991267306, 0.008975742391153804, 0.009270767172360805, 0.03019393232794276, 0.02728194162022413, 0.009701181512229824, 0.010093430194275334, 0.029056715519808263, 0.009335117621421753, 0.020049057385395443, 0.02036207067640526, 0.009635636757060235, 0.008578056071164289, 0.021092611494940305, 0.021785961648121806, 0.008592899162448663, 0.005881743777321795, 0.0010609188023041314, 0.0010173670412703029, 0.005841645525716396, 0.006206526376011412, 0.00046955289312352894, 0.0004599849822565617, 0.006118948610365362, 0.016928414458088247, 0.013068761068564343, 0.012133201472461892, 0.0159685971812208, 0.017864975228636015, 0.027164637116210616, 0.027698541885371165, 0.016137066953259026, 0.013296872445597033, 0.02931521990142068, 0.029671720859815075, 0.01261164049377574, 0.009069594736842245, 0.011493244349878303, 0.010343940073292974, 0.00919404316788479, 0.007771836394470863, 0.012802747370241637, 0.011559193995640947, 0.007796407247558604, 0.00758914770238494, 0.012251189781826318, 0.010954962186180497, 0.006889947375246457, 0.006400173014912416, 0.01311287363745799, 0.01162507067772028, 0.005872108880190892, 0.0005956087371482655, 0.0055103686619500675, 0.005537960152065837, 0.0006358052461587466, 0.0006631363942821378, 0.005441892643673315, 0.0054481496214445774, 0.0006581168004678195, 0.0018179778333411655, 0.007322403081400085, 0.007283695386180675, 0.0017839301272603919, 0.0018302171603745158, 0.006745996150257413, 0.006664521513895944, 0.0018161971046029416, 0.0011953701406214323, 0.0057994699137371005, 0.005728248065850849, 0.0011978033241021022, 0.0012861889979983168, 0.0054157036212198915, 0.005323379501032409, 0.0012749351282936542, 0.014500450927666478, 0.03305315542780525, 0.03217149872811667, 0.013574170237605886, 0.021390049552263528, 0.024020286532773695, 0.022936638895668337, 0.02054396081061808, 0.0010517762573704925, 0.0062680276506592355, 0.006139531820383456, 0.001028379185158879, 0.0013991572859752398, 0.00569761071878367, 0.005621228810488668, 0.0013360265818009723, 0.001507449478899285, 0.005273511656604493, 0.005232278573983769, 0.0015054103551419516, 0.0008930579840440097, 0.0059517262714447305, 0.005919571688209116, 0.0008818987068718453, 0.007112987967610293, 0.0022264071859550718, 0.0021975322523573085, 0.006964325128196484, 0.006454105392911996, 0.0018504604801338495, 0.001822675415602462, 0.006319224997194328, 0.008549797482439874, 0.003250785825656253, 0.003158198661770252, 0.008514472771578172, 0.007910056562598, 0.003875926454382421, 0.0037630686454738697, 0.007895991727061354, 0.006986805499429947, 0.0021581921600375372, 0.0020959781317622514, 0.006956799387683669, 0.006472122214277441, 0.0023974186710303737, 0.0023189565753702927, 0.006446190269167945, 0.0016179731675424552, 0.0055426476200886995, 0.005465804043140043, 0.0015713770678539229, 0.0014373011292573236, 0.0059424331330854814, 0.005849070582741708, 0.0013583911444603198, 0.004245920792369998, 0.0010567794018042813, 0.0010079844414992135, 0.0041548857883931065, 0.004783893415801703, 0.0012614969522598053, 0.001223323485325369, 0.004685689545967305, 0.0011332712947520617, 0.005346415283902762, 0.005283864530066999, 0.0010710270530584502, 0.0009050789138511863, 0.005082409794491054, 0.004986831844789302, 0.0009157239200582413, 0.0116009364653744, 0.0214688665769535, 0.022502351038754947, 0.01217796988061715, 0.008108834299577474, 0.025477369543316798, 0.027195421846233317, 0.008301673908427508, 0.0017618295006759284, 0.006382208084547436, 0.006329104095546791, 0.0018171984779132688, 0.0016467929851855581, 0.005663978325389407, 0.005656575867091994, 0.0016215729633515846, 0.0007877691098074405, 0.00484098509448598, 0.004854366123167747, 0.0007817549077199387, 0.00041671120596232847, 0.004837006817393871, 0.004911698486326623, 0.00040764013893509793, 0.010284661980967124, 0.008998571905403896, 0.008256969936714468, 0.009410955436397037, 0.011236580661233928, 0.008162028933484857, 0.007403222046760517, 0.01012691910091794, 0.00376614152916415, 0.004940999890147418, 0.005275856535478139, 0.003753149356090169, 0.003125897866278603, 0.004817605843054477, 0.005159091182496664, 0.0031321315420859957, 0.011511631977247166, 0.032991518721269646, 0.032928083778386893, 0.010759909685904847, 0.01184822777133921, 0.02859097967690462, 0.02872514813762151, 0.010769699455169228, 0.0022274590945979686, 0.007010467711088895, 0.0070819022845327465, 0.0021991663928341556, 0.0026716921805108756, 0.006657175094216257, 0.0067070529560383126, 0.002620034811247889, 0.0021693211715344165, 0.00648413378310036, 0.00651810693730866, 0.0021890366529645653, 0.002046596809006366, 0.006214814959199362, 0.006184581462063673, 0.002111925915318504, 0.015296891413374245, 0.006861028936346463, 0.0067036226219298455, 0.014261667864705627, 0.014263134201340273, 0.007466848556985597, 0.00724634383004218, 0.013235966502626652, 0.007123779372483926, 0.009905182396198736, 0.010045078137588776, 0.0071259739147627316, 0.004637577115695464, 0.01032642784738148, 0.010153469521251434, 0.004664795534093348, 0.0061394670128305465, 0.002139425203838456, 0.0021070416227821657, 0.006064084028515571, 0.005552502082876559, 0.002020477801468636, 0.0019892358679718973, 0.0054961325821300646, 0.007601424132162161, 0.003134811049524915, 0.0030815178465893643, 0.007531588090051445, 0.007011351176029506, 0.002831853303848058, 0.0027696171274949415, 0.0069517804257982945, 0.008402819660494686, 0.002662228288065767, 0.002650329577193934, 0.00825815967175325, 0.00804030714329621, 0.002375569965246921, 0.002334300373087869, 0.007981359997355015, 0.01319384309730578, 0.025597789900569178, 0.025457957242226745, 0.013582497481765791, 0.012356432120735743, 0.024714657551838687, 0.02476029575758697, 0.012727163752495647, 0.007276905430824068, 0.011322340616675313, 0.011066649025095805, 0.007291120526405241, 0.008282912727174893, 0.011144799298277247, 0.010793171918621215, 0.008448668875750463, 0.0009639227708988272, 0.005229943456876828, 0.005152559583028958, 0.0009276904343858334, 0.0007441670776905912, 0.005058732309009035, 0.004995375852321796, 0.0007423229639703388, 0.005699992918812689, 0.0009481560903281636, 0.0009099944720197805, 0.005646716359435809, 0.006379886029353468, 0.0007391825756430035, 0.0007393610361603129, 0.006312139164040621, 0.021462627231566927, 0.010077965745369464, 0.009414142920334049, 0.023207718213637714, 0.023629662417583863, 0.006759839233210368, 0.006476008252738697, 0.025065401351372644, 0.01018095481481351, 0.015289674291140185, 0.014282439143667718, 0.009097244645295065, 0.011969373879915599, 0.011101406817592353, 0.010330537545874999, 0.010604914000430577, 0.0067227122536322485, 0.11944727168855515, 0.11932818588021096, 0.006614896915861303, 0.006784345944129135, 0.11479706429793128, 0.11454282435756699, 0.006573743651359913, 0.00937033294642957, 0.1040243242432151, 0.10400233696401356, 0.009386172320478585, 0.009103782347933484, 0.08991725998292786, 0.08991950510050589, 0.00912713089758217, 0.010098668595685105, 0.07358333743011927, 0.07349052201499083, 0.01027930529212749, 0.011017662841342946, 0.055595403100289126, 0.05551312844413025, 0.010915339014588667, 0.007667625201476909, 0.03946635299286161, 0.03933119733057944, 0.007708612219600199, 0.01025366963585176, 0.02353698696536458, 0.023434537909262674, 0.01010773783178086, 0.014252639667944909, 0.02575981520214755, 0.037413146016266836, 0.08382541732605812, 0.005060897346861967, 0.019395317182462058, 0.024445954161473174, 0.01704909080480523, 0.01264401033293978, 0.06487836444136733, 0.0758642181243293, 0.03725753218428828, 0.00497430352852078, 0.008740682687187336, 0.013097882135601487, 0.04779054035693543, 0.0021239662743725513, 0.012025430143571894, 0.010961967769368072, 0.01099165270619097, 0.035880417644068456, 0.02364569860971659, 0.003494476182160376, 0.00345589203681989, 0.07692777705107902, 0.14131600405802813, 0.10841638667274009, 0.049560077144757235, 0.0038686076854954387, 0.015216734421400709, 0.021392474475063816, 0.08232016551778945, 0.06718761528377885, 0.11935793374716074, 0.029610774669716296, 0.013778168968138637, 0.004160064655602972, 0.008962850446364815, 0.18458082829160635, 0.09504477996706377, 0.06916763951637099, 0.03024618311777582, 0.009835985379545045, 0.226261819963099, 0.009032726761820126, 0.2303501893036629, 0.07740483114031875, 0.12113080353077961, 0.04671816175653581, 0.07255407920806108, 0.010400421147866832, 0.19582550079922154, 0.040614550034085095, 0.034477775976693714, 0.007935794855777502, 0.1016575958867426, 0.04692746798966848, 0.1200097808636467, 0.044076770705577265, 0.02709237221733898, 0.08409085036736144, 0.02946082591189731, 0.01700956073936465, 0.024594967668849898, 0.029863358853328633, 0.013737834077508171, 0.019503059212800638, 0.003230130638497063, 0.00407687585728679, 0.00619734866310136, 0.05493990486658532, 0.1862406487420446, 0.005114534539427867, 0.005401366286775215, 0.13917678757110793, 0.047689050912644554, 0.07493100496556543, 0.00367937389407563, 0.03582631198726278, 0.09089370486357957, 0.06589618752563779, 0.00449337744783816, 0.020954963076759956, 0.02666601034414498, 0.059917244171848, 0.011461464208070978, 0.04003299389746537, 0.03914763514239792, 0.045131907193217344, 0.013545880630795855, 0.004466653073453095, 0.0041740335654573595, 0.10601747497002233, 0.006224520133690384, 0.006185698883005423, 0.11323164677708536, 0.10676927266502986, 0.011860693562733183, 0.011608819495864002, 0.11389080140626923, 0.0074766009892506405, 0.0014683397757553247, 0.0019129321233447238, 0.00930995412129433, 0.09761761706604766, 0.02105270188467464, 0.01926680413451685, 0.02669679306323893, 0.009995303512873848, 0.009853710798858096, 0.02963339793137894, 0.07282646599978332, 0.02049477792285889, 0.10129292742861468, 0.10830980676841061, 0.01816075481027264, 0.004655233365380059, 0.02860985558431347, 0.017208659840196937, 0.0077846289899111305, 0.02141860094308602, 0.07014591088111007, 0.009064212060167956, 0.010732437024607577, 0.002743506413540664, 0.0025011672487496583, 0.02651576449204643, 0.007477342320831259, 0.04202746477633969, 0.06090001996663004, 0.034816425979719415, 0.03935204757344643, 0.08858095331709974, 0.05942351320739023, 0.03221852542682168, 0.012967634678090256, 0.07857600435214833, 0.048246819889731965, 0.019021377301594915, 0.038640563189441854, 0.005584133644300519, 0.0039005395685108137, 0.012178785118660591, 0.024101011043157233, 0.0086101879954741, 0.00779460178145087, 0.008480799460148406, 0.0013931433250608477, 0.0023023569615227965, 0.004467732637084959, 0.003777006882010604, 0.0018873137374541512, 0.04010430010201548, 0.02384103730321846, 0.02156298303374425, 0.024657160037343293, 0.10386628927568174, 0.005725335477232958, 0.024144660380979486, 0.07078796024929593, 0.00304707410854891, 0.0006943929215043465, 0.0007081050464042951, 0.0015038941849300656, 0.03589274548193619, 0.023362281704540588, 0.008459983807353594, 0.029250854706827062, 0.03973017221361023, 0.04347766308904828, 0.0016504703227076247, 0.0018430416629855693, 0.06891805272502924, 0.10748627693468306, 0.0016176015603834152, 0.0009524891057647539, 0.1691194355941578, 0.018309390758977136, 0.10425049196188012, 0.05947463801263446, 0.00890285531853433, 0.09675346585895704, 0.07735428468179556, 0.029381377395930528, 0.0063396505381889704, 0.005755925026088779, 0.07027624881127754, 0.01387132754376554, 0.05005742109713962, 0.10414100534316717, 0.0027833859492137052, 0.0034618817861895496, 0.12902932588027433, 0.10748638690366179, 0.14718410387281725, 0.055032537618003315, 0.04345734516460858, 0.06474695568462976, 0.1452221666279143, 0.006924851585982664, 0.17478343192652138, 0.06722584662817889, 0.16618669659187876, 0.0027283610156073838, 0.070498062571993, 0.046923742436305885, 0.022865726163431237, 0.027309208708160653, 0.016326164632999, 0.08998103198192858, 0.0014096433492145485, 0.0015632141438961108, 0.01222182937089376, 0.020035922639525354, 0.009242426911136256, 0.0024126454490785766, 0.009274877657120605, 0.002380651324022055, 0.0027105334065672263, 0.004352435506464035, 0.0026806593510973874, 0.004237469591028653, 0.009472220576784486, 0.0037988028943224806, 0.009554739990434012, 0.0024727886524930263, 0.0028309520327505023, 0.0038497584270940763, 0.0027840529055692723, 0.00432572157327558], "label_norm": {"browDown_L": [0.16184226283028932, 0.20977234886071028], "cheekSquint_L": [0.16185153609579386, 0.2097683718446928], "browOuterUp_L": [0.15270091543678424, 0.16839646529867786], "browDown_R": [0.06948338508522964, 0.16283591380307832], "browOuterUp_R": [0.06948302474716682, 0.16283847961001208], "cheekSquint_R": [0.05328527165206706, 0.0987137094443144], "browInnerUp": [0.12377143222455209, 0.11054432239365392], "eyeBlink_L": [0.12378660998864666, 0.11056262499764855], "eyeBlink_R": [0.190942831872188, 0.279206755584966], "eyeSquint_L": [0.19093755749443306, 0.2792060904994797], "eyeSquint_R": [0.14227027950930204, 0.1416391784898584], "eyeWide_L": [0.14227035540092334, 0.14163926447890837], "eyeWide_R": [0.11309330373911854, 0.18565386881570314], "eyeLookDown_L": [0.11306353298758509, 0.18566134365607134], "eyeLookDown_R": [0.06285944359725414, 0.17045273250250584], "eyeLookIn_L": [0.0628729756892031, 0.1704466309400626], "eyeLookIn_R": [0.07485748085688285, 0.16893314702185766], "eyeLookOut_L": [0.07485740438210119, 0.1689329351938502], "eyeLookOut_R": [0.18266849983368028, 0.14296388111660893], "eyeLookUp_L": [0.18265154591402213, 0.14292028255240136], "eyeLookUp_R": [0.08961160259588949, 0.16585373167085588], "jawOpen": [0.08961131633644744, 0.16585278449154386], "jawLeft": [0.11765810615884183, 0.08816165020315778], "jawRight": [0.026571828761178935, 0.05492373416723142], "mouthClose": [0.15299164237732532, 0.150655587484649], "mouthFunnel": [0.026557468328964346, 0.054797332139965196], "mouthPucker": [0.09498957945671399, 0.09181490726836748], "mouthRollLower": [0.14519119410745168, 0.12731614011549094], "mouthRollUpper": [0.10349672362506636, 0.11123604030718619], "mouthShrugLower": [0.10465714266768646, 0.09383210265018498], "mouthShrugUpper": [0.0678096379479136, 0.07960643467573829], "noseSneer_L": [0.08945952378613364, 0.08728771405812234], "noseSneer_R": [0.2222825280831422, 0.1261008077133412], "mouthLeft": [0.022971706246310317, 0.08432441787704713], "mouthRight": [0.02298672339965462, 0.0843408328391454], "mouthSmile_L": [0.13505946631542162, 0.21724098606264428], "mouthSmile_R": [0.13508046237566498, 0.21726259548479832], "mouthFrown_L": [0.051900052605321746, 0.09449455049264716], "mouthFrown_R": [0.05189726627093182, 0.09449150605096043], "mouthDimple_L": [0.09506372589428794, 0.06431724885890054], "mouthDimple_R": [0.09506641018113879, 0.06431844000329903], "mouthStretch_L": [0.20472376314609514, 0.16635334721205874], "mouthStretch_R": [0.20473381382347117, 0.1663557625463717], "mouthPress_L": [0.07839229651774052, 0.0643156347072905], "mouthPress_R": [0.07839077916451218, 0.06430965774739499], "mouthLowerDown_L": [0.17512900932173842, 0.09322782743034486], "mouthLowerDown_R": [0.1751238538275112, 0.09322656028013022], "mouthUpperUp_L": [0.0822388672075358, 0.09820284010334808], "mouthUpperUp_R": [0.08224144650194605, 0.09820911130340014]}, "label_norm_mm": {"browDown_L": [-0.8073297739028931, 1.6146595478057861], "cheekSquint_L": [-0.8073297739028931, 1.6353405714035034], "browOuterUp_L": [0.0, 0.9911944270133972], "browDown_R": [-0.7330395579338074, 1.470625638961792], "browOuterUp_R": [-0.725012481212616, 1.4660791158676147], "cheekSquint_R": [0.0, 0.9704002141952515], "browInnerUp": [0.005171118304133415, 0.8572343587875366], "eyeBlink_L": [0.00921106431633234, 0.8549602031707764], "eyeBlink_R": [0.0, 0.999589204788208], "eyeSquint_L": [0.0, 0.9996109008789062], "eyeSquint_R": [0.0, 1.0], "eyeWide_L": [0.0, 1.0], "eyeWide_R": [0.0, 1.0], "eyeLookDown_L": [0.0, 1.0], "eyeLookDown_R": [0.0, 1.0], "eyeLookIn_L": [0.0, 1.0], "eyeLookIn_R": [0.0, 1.0], "eyeLookOut_L": [0.0, 1.0], "eyeLookOut_R": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_L": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_R": [0.0, 0.9534252882003784], "jawOpen": [0.0, 0.9534395337104797], "jawLeft": [0.0, 0.8010596036911011], "jawRight": [0.0, 0.7739279270172119], "mouthClose": [0.0, 1.0], "mouthFunnel": [0.0, 0.7443013787269592], "mouthPucker": [0.0, 0.9496217966079712], "mouthRollLower": [0.0, 0.9745720624923706], "mouthRollUpper": [0.0, 0.9714981913566589], "mouthShrugLower": [0.006537656299769878, 0.8364248275756836], "mouthShrugUpper": [0.0, 0.9035037159919739], "noseSneer_L": [0.0, 0.9107782244682312], "noseSneer_R": [0.02829817868769169, 0.9374051094055176], "mouthLeft": [0.0, 1.0], "mouthRight": [0.0, 1.0], "mouthSmile_L": [0.0, 0.9820542931556702], "mouthSmile_R": [0.0, 0.9820542931556702], "mouthFrown_L": [0.0, 0.867120623588562], "mouthFrown_R": [0.0, 0.867120623588562], "mouthDimple_L": [0.0, 0.7573938965797424], "mouthDimple_R": [0.0, 0.7562941908836365], "mouthStretch_L": [0.0, 0.9634690284729004], "mouthStretch_R": [0.0, 0.9634690284729004], "mouthPress_L": [0.0011928933672606945, 0.8130543828010559], "mouthPress_R": [0.00045785587280988693, 0.813126266002655], "mouthLowerDown_L": [0.008856703527271748, 0.9179792404174805], "mouthLowerDown_R": [0.008817199617624283, 0.9179792404174805], "mouthUpperUp_L": [0.0, 0.9093780517578125], "mouthUpperUp_R": [0.0, 0.9063169956207275]}}',"freq","RSA-OAEP-512","Array","tongueOut",'Extension Header Parameter "',"send","Ed25519","Reader","_startTime","algorithm","shiftLeft","toBytesBE","P-521","performance"," Received ","maxPending","rpc","[object Object]","_state","UONE","EventEmitter","multiply","ERR_JWT_INVALID","round","split","format","subtract","onUpdate","toBytes","request must be specified","LN2","alpha should be in (0.0., 1.0]","finish","setDerivateCutoff",'{"tris": [[[6, 7, 8, 9, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 35, 46, 47, 50, 52, 53, 55, 56, 63, 65, 66, 68, 69, 70, 71, 100, 101, 104, 105, 107, 108, 110, 111, 112, 113, 114, 116, 117, 118, 119, 120, 121, 122, 123, 124, 128, 130, 133, 139, 143, 144, 145, 151, 153, 154, 155, 156, 157, 158, 159, 160, 161, 163, 168, 173, 188, 189, 190, 193, 221, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 243, 244, 245, 246, 247], [69, 60, 52, 89, 14, 1, 45, 46, 83, 84, 83, 46, 50, 46, 40, 17, 40, 46, 46, 50, 84, 85, 84, 50, 59, 60, 62, 69, 62, 60, 18, 31, 43, 44, 43, 31, 3, 57, 34, 35, 34, 57, 43, 44, 81, 82, 81, 44, 11, 12, 65, 66, 65, 12, 22, 62, 72, 69, 72, 62, 6, 5, 55, 56, 55, 5, 73, 71, 88, 87, 88, 71, 9, 64, 10, 63, 10, 64, 12, 90, 66, 89, 66, 90, 21, 73, 2, 68, 2, 73, 37, 42, 13, 80, 13, 42, 21, 74, 73, 71, 73, 74, 59, 8, 60, 38, 60, 8, 76, 19, 77, 20, 77, 19, 44, 45, 82, 83, 82, 45, 90, 39, 51, 79, 51, 39, 19, 33, 20, 23, 20, 33, 16, 28, 49, 61, 49, 28, 20, 23, 16, 28, 16, 23, 48, 42, 41, 37, 41, 42, 58, 4, 59, 8, 59, 4, 10, 63, 22, 62, 22, 63, 39, 49, 79, 15, 79, 49, 9, 11, 64, 65, 64, 11, 78, 16, 39, 49, 39, 16, 25, 27, 33, 32, 33, 27, 73, 47, 68, 0, 68, 47, 21, 34, 24, 25, 24, 34, 31, 30, 44, 45, 44, 30, 33, 32, 23, 26, 23, 32, 2, 3, 21, 34, 21, 3, 30, 17, 45, 46, 45, 17, 4, 58, 5, 56, 5, 58, 77, 20, 78, 16, 78, 20, 6, 55, 36, 67, 36, 55, 24, 25, 19, 33, 19, 25, 42, 43, 80, 81, 80, 43, 34, 35, 25, 27, 25, 35, 41, 37, 54, 15, 54, 37, 66, 89, 67, 1, 67, 89, 48, 18, 42, 43, 42, 18, 24, 19, 75, 76, 75, 19, 24, 75, 21, 74, 21, 75, 51, 7, 14, 1, 14, 7, 28, 29, 61, 53, 61, 29, 73, 88, 47, 70, 47, 88, 89, 90, 14, 51, 14, 90, 56, 58, 64, 63, 64, 58, 65, 66, 55, 67, 55, 66, 64, 65, 56, 55, 56, 65, 23, 26, 28, 29, 28, 26, 37, 13, 15, 79, 15, 13, 58, 59, 63, 62, 63, 59, 60, 38, 52, 86, 52, 38, 72, 69, 86, 52, 86, 69, 61, 53, 54, 80, 81, 36, 6, 36, 81, 13, 7, 79, 51, 79, 7, 81, 82, 6, 5, 6, 82, 82, 83, 5, 4, 5, 83, 83, 84, 4, 8, 4, 84, 8, 84, 38, 85, 38, 84, 71, 72, 87, 86, 87, 72, 74, 22, 71, 72, 71, 22, 74, 75, 22, 10, 22, 75, 75, 76, 10, 9, 10, 76, 77, 11, 76, 9, 76, 11, 11, 77, 12, 78, 12, 77, 12, 78, 90, 39, 90, 78, 38, 85, 86, 87, 86, 85, 85, 50, 87, 88, 87, 50, 70, 88, 40, 50, 40, 88, 49, 61, 15, 54, 15, 61, 7, 36, 1, 67, 1, 36, 13, 80, 7, 36, 7, 80]], [[6, 8, 9, 151, 168, 249, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 263, 265, 276, 277, 280, 282, 283, 285, 286, 293, 295, 296, 298, 299, 300, 301, 329, 330, 333, 334, 336, 337, 339, 340, 341, 342, 343, 345, 346, 347, 348, 349, 350, 351, 352, 353, 357, 359, 362, 368, 372, 373, 374, 380, 381, 382, 383, 384, 385, 386, 387, 388, 390, 398, 412, 413, 414, 417, 441, 442, 443, 444, 445, 446, 448, 449, 450, 451, 452, 453, 463, 464, 465, 466, 467], [61, 69, 54, 16, 89, 5, 47, 83, 48, 84, 48, 83, 52, 42, 48, 19, 48, 42, 48, 84, 52, 85, 52, 84, 60, 63, 61, 69, 61, 63, 20, 45, 33, 46, 33, 45, 2, 36, 3, 37, 3, 36, 45, 81, 46, 82, 46, 81, 13, 66, 14, 67, 14, 66, 24, 72, 63, 69, 63, 72, 8, 57, 7, 58, 7, 57, 73, 88, 71, 87, 71, 88, 11, 12, 65, 64, 65, 12, 14, 67, 90, 89, 90, 67, 23, 1, 73, 4, 73, 1, 39, 15, 44, 80, 44, 15, 23, 73, 74, 71, 74, 73, 60, 61, 10, 40, 10, 61, 76, 77, 21, 22, 21, 77, 46, 82, 47, 83, 47, 82, 90, 53, 41, 79, 41, 53, 21, 22, 35, 25, 35, 22, 18, 51, 30, 62, 30, 51, 22, 18, 25, 30, 25, 18, 50, 43, 44, 39, 44, 43, 59, 60, 6, 10, 6, 60, 12, 24, 64, 63, 64, 24, 41, 79, 51, 17, 51, 79, 11, 65, 13, 66, 13, 65, 78, 41, 18, 51, 18, 41, 27, 35, 29, 34, 29, 35, 73, 4, 49, 0, 49, 4, 23, 26, 36, 27, 36, 26, 33, 46, 32, 47, 32, 46, 35, 25, 34, 28, 34, 25, 1, 23, 2, 36, 2, 23, 32, 47, 19, 48, 19, 47, 6, 7, 59, 58, 59, 7, 77, 78, 22, 18, 22, 78, 8, 38, 57, 68, 57, 38, 26, 21, 27, 35, 27, 21, 44, 80, 45, 81, 45, 80, 36, 27, 37, 29, 37, 27, 43, 56, 39, 17, 39, 56, 67, 68, 89, 5, 89, 68, 50, 44, 20, 45, 20, 44, 26, 75, 21, 76, 21, 75, 26, 23, 75, 74, 75, 23, 53, 16, 9, 5, 9, 16, 30, 62, 31, 55, 31, 62, 73, 49, 88, 70, 88, 49, 89, 16, 90, 53, 90, 16, 58, 65, 59, 64, 59, 65, 66, 57, 67, 68, 67, 57, 65, 58, 66, 57, 66, 58, 25, 30, 28, 31, 28, 30, 39, 17, 15, 79, 15, 17, 59, 64, 60, 63, 60, 64, 61, 54, 40, 86, 40, 54, 72, 86, 69, 54, 69, 86, 62, 56, 55, 80, 38, 81, 8, 81, 38, 15, 79, 9, 53, 9, 79, 81, 8, 82, 7, 82, 8, 82, 7, 83, 6, 83, 7, 83, 6, 84, 10, 84, 6, 10, 40, 84, 85, 84, 40, 71, 87, 72, 86, 72, 87, 74, 71, 24, 72, 24, 71, 74, 24, 75, 12, 75, 24, 75, 12, 76, 11, 76, 12, 77, 76, 13, 11, 13, 76, 13, 14, 77, 78, 77, 14, 14, 90, 78, 41, 78, 90, 40, 86, 85, 87, 85, 86, 85, 87, 52, 88, 52, 87, 70, 42, 88, 52, 88, 42, 51, 17, 62, 56, 62, 17, 9, 5, 38, 68, 38, 5, 15, 9, 80, 38, 80, 9]], [[0, 2, 11, 12, 13, 14, 15, 16, 17, 18, 32, 36, 37, 38, 39, 40, 41, 42, 43, 57, 61, 62, 64, 72, 73, 74, 76, 77, 78, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 95, 96, 97, 98, 106, 129, 146, 164, 165, 167, 178, 179, 180, 181, 182, 183, 184, 185, 186, 191, 194, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 210, 211, 212, 214, 216, 240, 262, 266, 267, 268, 269, 270, 271, 272, 273, 287, 291, 292, 294, 302, 303, 304, 306, 307, 308, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 335, 358, 375, 391, 393, 402, 403, 404, 405, 406, 407, 408, 409, 410, 415, 418, 421, 422, 423, 424, 425, 426, 427, 428, 430, 431, 432, 434, 436, 460], [97, 129, 111, 28, 42, 61, 81, 0, 92, 12, 23, 0, 2, 92, 0, 2, 0, 23, 81, 92, 83, 12, 14, 23, 93, 83, 92, 24, 23, 14, 83, 93, 84, 14, 15, 24, 94, 84, 93, 25, 24, 15, 79, 140, 130, 10, 62, 74, 134, 130, 140, 68, 74, 62, 94, 126, 84, 25, 15, 58, 127, 84, 126, 59, 58, 15, 86, 98, 125, 17, 57, 29, 129, 125, 98, 61, 29, 57, 110, 84, 128, 41, 60, 15, 127, 128, 84, 59, 15, 60, 142, 141, 139, 76, 73, 75, 132, 139, 141, 66, 75, 73, 101, 102, 9, 32, 9, 33, 8, 9, 102, 8, 33, 9, 96, 117, 95, 27, 26, 48, 89, 95, 117, 20, 48, 26, 130, 134, 124, 62, 56, 68, 115, 124, 134, 46, 68, 56, 118, 133, 114, 50, 45, 67, 116, 114, 133, 47, 67, 45, 108, 109, 96, 39, 27, 40, 117, 96, 109, 48, 40, 27, 131, 101, 64, 65, 64, 32, 9, 64, 101, 9, 32, 64, 115, 109, 124, 46, 56, 40, 123, 124, 109, 55, 40, 56, 123, 109, 122, 55, 54, 40, 108, 122, 109, 39, 40, 54, 8, 102, 7, 8, 7, 33, 103, 7, 102, 34, 33, 7, 135, 80, 136, 69, 70, 11, 133, 136, 80, 67, 11, 70, 118, 83, 110, 50, 41, 14, 84, 110, 83, 15, 14, 41, 114, 144, 113, 45, 44, 78, 115, 87, 109, 46, 40, 18, 117, 109, 87, 48, 18, 40, 112, 90, 111, 43, 42, 21, 97, 111, 90, 28, 21, 42, 135, 136, 137, 69, 71, 70, 143, 137, 136, 77, 70, 71, 118, 119, 83, 50, 14, 51, 81, 83, 119, 12, 51, 14, 63, 138, 64, 63, 64, 72, 131, 64, 138, 65, 72, 64, 132, 141, 87, 66, 18, 75, 88, 87, 141, 19, 75, 18, 139, 132, 140, 73, 74, 66, 134, 140, 132, 68, 66, 74, 134, 132, 115, 68, 46, 66, 87, 115, 132, 18, 66, 46, 95, 90, 96, 26, 27, 21, 112, 96, 90, 43, 21, 27, 92, 82, 93, 23, 24, 13, 85, 93, 82, 16, 13, 24, 133, 80, 116, 67, 47, 11, 114, 91, 144, 45, 78, 22, 93, 85, 94, 24, 25, 16, 86, 94, 85, 17, 16, 25, 137, 143, 142, 71, 76, 77, 141, 142, 143, 75, 77, 76, 94, 86, 126, 25, 58, 17, 125, 126, 86, 57, 17, 58, 107, 108, 112, 38, 43, 39, 96, 112, 108, 27, 39, 43, 122, 108, 121, 54, 53, 39, 107, 121, 108, 38, 39, 53, 7, 103, 6, 7, 6, 34, 104, 6, 103, 35, 34, 6, 6, 104, 5, 6, 5, 35, 105, 5, 104, 36, 35, 5, 120, 121, 106, 52, 37, 53, 107, 106, 121, 38, 53, 37, 111, 106, 112, 42, 43, 37, 107, 112, 106, 38, 37, 43, 85, 99, 86, 16, 17, 30, 98, 86, 99, 29, 30, 17, 87, 88, 117, 18, 48, 19, 89, 117, 88, 20, 19, 48, 82, 100, 85, 13, 16, 31, 99, 85, 100, 30, 31, 16, 125, 129, 90, 57, 21, 61, 97, 90, 129, 28, 61, 21, 136, 110, 143, 70, 77, 41, 128, 143, 110, 60, 41, 77, 119, 113, 49, 51, 49, 44, 1, 49, 113, 1, 44, 49, 0, 81, 49, 0, 49, 12, 119, 49, 81, 51, 12, 49, 2, 3, 92, 2, 23, 3, 82, 92, 3, 13, 3, 23, 3, 4, 82, 3, 13, 4, 100, 82, 4, 31, 4, 13, 133, 118, 136, 67, 70, 50, 110, 136, 118, 41, 50, 70, 118, 114, 119, 50, 51, 45, 113, 119, 114, 44, 45, 51, 104, 121, 105, 35, 36, 53, 120, 105, 121, 52, 53, 36, 103, 122, 104, 34, 35, 54, 121, 104, 122, 53, 54, 35, 102, 123, 103, 33, 34, 55, 122, 103, 123, 54, 55, 34, 101, 124, 102, 32, 33, 56, 123, 102, 124, 55, 56, 33, 130, 124, 131, 62, 65, 56, 101, 131, 124, 32, 56, 65, 126, 125, 95, 58, 26, 57, 90, 95, 125, 21, 57, 26, 126, 95, 127, 58, 59, 26, 89, 127, 95, 20, 26, 59, 128, 127, 88, 60, 19, 59, 89, 88, 127, 20, 59, 19, 143, 128, 141, 77, 75, 60, 88, 141, 128, 19, 60, 75, 138, 79, 131, 72, 65, 10, 130, 131, 79, 62, 10, 65, 114, 116, 91, 45, 22, 47, 5, 105, 4, 5, 4, 36, 100, 4, 105, 31, 36, 4, 105, 120, 100, 36, 31, 52, 99, 100, 120, 30, 52, 31, 120, 106, 99, 52, 30, 37, 98, 99, 106, 29, 37, 30, 106, 111, 98, 37, 29, 42, 129, 98, 111, 61, 42, 29]]], "label_keys": [["browDown_L", "browDown_R", "cheekSquint_L", "cheekSquint_R", "browOuterUp_L", "browOuterUp_R", "browInnerUp"], ["eyeBlink_L", "eyeBlink_R", "eyeSquint_L", "eyeSquint_R", "eyeWide_L", "eyeWide_R"], ["mouthClose", "jawOpen", "mouthFunnel", "mouthPucker", "mouthRollLower", "mouthRollUpper", "mouthShrugLower", "mouthShrugUpper", "mouthLowerDown_L", "mouthLowerDown_R", "mouthUpperUp_L", "mouthUpperUp_R"], ["jawForward", "jawLeft", "jawRight", "noseSneer_L", "noseSneer_R", "mouthLeft", "mouthRight", "mouthSmile_L", "mouthSmile_R", "mouthFrown_L", "mouthFrown_R", "mouthDimple_L", "mouthDimple_R", "mouthStretch_L", "mouthStretch_R", "mouthPress_L", "mouthPress_R"]], "type": "dot_features_norm_no_iris_upper_lower_mouth_eye_features_tri", "data_min": [], "data_max": [], "data_means": [0.0009584624785929918, 0.0010070432908833027, 0.00561505788937211, 0.0026129777543246746, 0.03180234506726265, 0.010580021888017654, 0.027208315208554268, 0.015174049884080887, 0.019053246825933456, 0.021434327587485313, 0.023129519075155258, 0.017358053475618362, 0.021504685282707214, 0.012309825979173183, 0.01748153753578663, 0.016332970932126045, 0.007263301406055689, 0.019363461062312126, 0.018046963959932327, 0.008579800836741924, 0.09151671826839447, 0.03532027080655098, 0.0941653698682785, 0.03267161548137665, 0.19824782013893127, 0.14688214659690857, 0.1675434559583664, 0.17758649587631226, 0.0660620629787445, 0.010029759258031845, 0.05049744248390198, 0.025594374164938927, 0.013388559222221375, 0.020216817036271095, 0.012813664972782135, 0.020791713148355484, 0.005662212613970041, 0.02311328984797001, 0.012632292695343494, 0.016143208369612694, 0.0262139979749918, 0.01095395628362894, 0.024555042386054993, 0.012612915597856045, 0.03407197818160057, 0.029567919671535492, 0.02421543002128601, 0.03942446410655975, 0.022325247526168823, 0.024682793766260147, 0.026570377871394157, 0.020437659695744514, 0.015178601257503033, 0.014258328825235367, 0.01086408831179142, 0.018572842702269554, 0.050395336002111435, 0.07209660112857819, 0.0543065071105957, 0.06818541884422302, 0.03203488886356354, 0.036361970007419586, 0.017763681709766388, 0.050633177161216736, 0.055964384227991104, 0.06320002675056458, 0.07204209268093109, 0.047122325748205185, 0.007759011350572109, 0.007501004729419947, 0.005381112918257713, 0.009878900833427906, 0.04116656258702278, 0.03795693442225456, 0.021997306495904922, 0.057126183062791824, 0.0457286611199379, 0.012790507636964321, 0.04283333197236061, 0.015685833990573883, 0.007983056828379631, 0.01715342327952385, 0.0001388487871736288, 0.024997632950544357, 0.01792411133646965, 0.06537957489490509, 0.0016012341948226094, 0.08170245587825775, 0.022745070978999138, 0.06553371995687485, 0.0096671711653471, 0.07861161977052689, 0.01801632158458233, 0.05676553025841713, 0.002364120213314891, 0.0724177435040474, 0.16681423783302307, 0.020389752462506294, 0.10783695429563522, 0.0793670192360878, 0.010316131636500359, 0.017139554023742676, 0.00734533229842782, 0.0201103538274765, 0.016856234520673752, 0.019879693165421486, 0.01631445810198784, 0.020421473309397697, 0.016912968829274178, 0.03552190586924553, 0.0013489547418430448, 0.05108591914176941, 0.027389558032155037, 0.02548580802977085, 0.023887960240244865, 0.02898740954697132, 0.031152784824371338, 0.04223264753818512, 0.009229506365954876, 0.06415592133998871, 0.11480626463890076, 0.09074558317661285, 0.06654737889766693, 0.13900445401668549, 0.06196732074022293, 0.03686026856303215, 0.06424575299024582, 0.03458184748888016, 0.015535380691289902, 0.13692401349544525, 0.009726780466735363, 0.1427326202392578, 0.059599608182907104, 0.015147252939641476, 0.0530291311442852, 0.021717732772231102, 0.08841946721076965, 0.06840980798006058, 0.055165842175483704, 0.10166344046592712, 0.053360484540462494, 0.11954861134290695, 0.037103503942489624, 0.13580559194087982, 0.034810394048690796, 0.018781214952468872, 0.03361587971448898, 0.019975729286670685, 0.007251198869198561, 0.023421205580234528, 0.011118563823401928, 0.019553840160369873, 0.0357130765914917, 0.0331711508333683, 0.016715677455067635, 0.05216854438185692, 0.009014262817800045, 0.022483978420495987, 0.01571260765194893, 0.015785636380314827, 0.016640055924654007, 0.09721265733242035, -0.00042073571239598095, 0.11427345126867294, 0.04610998183488846, 0.02854100614786148, 0.03372888267040253, 0.04092211276292801, 0.15157905220985413, 0.11156394332647324, 0.12671184539794922, 0.13643115758895874, 0.04176277667284012, 0.08159783482551575, 0.05207235738635063, 0.07128825038671494, 0.0034653223119676113, 0.013019933365285397, 0.009557103738188744, 0.006928151473402977, 0.1444462388753891, 0.08576080948114395, 0.0763494074344635, 0.15385763347148895, 0.09526139497756958, 0.049970757216215134, 0.07605482637882233, 0.06917732208967209, 0.040304362773895264, 0.1658620834350586, 0.11258336156606674, 0.09358307719230652, 0.01204579696059227, 5.064598371973261e-05, 0.0057475995272397995, 0.006348843220621347, 0.07918871194124222, 0.05989256873726845, 0.06970753520727158, 0.0693737342953682, 0.0296676903963089, 0.05262714624404907, 0.038453031331300735, 0.043841809034347534, 0.011802580207586288, 0.0048634945414960384, 8.753117435844615e-05, 0.016578542068600655, 0.020046120509505272, 0.053619563579559326, 0.024722063913941383, 0.04894360899925232, 0.006824055220931768, 0.03101937659084797, 0.016941962763667107, 0.02090146765112877, 0.020358260720968246, 0.05029279738664627, 0.027824176475405693, 0.04282688349485397, 0.06812911480665207, 0.06166563555598259, 0.038949258625507355, 0.0908455029129982, 0.030823418870568275, 0.04373401030898094, 0.04018499329686165, 0.03437243402004242, 0.01560981385409832, 0.04182998836040497, 0.029431475326418877, 0.02800832875072956, 0.0049715787172317505, 0.0010853813728317618, 0.0017884960398077965, 0.00426846370100975, 0.004917975980788469, 0.008242158219218254, 0.00675099017098546, 0.006409144960343838, 0.11439801007509232, 0.0708015188574791, 0.020787399262189865, 0.013736214488744736, 0.015147298574447632, 0.01937631517648697, 0.02438150718808174, 0.020754879340529442, 0.02355070784687996, 0.021585674956440926, 0.03039160743355751, 0.008083038032054901, 0.0230221226811409, 0.015452520921826363, 0.03354590758681297, 0.0077066319063305855, 0.027673253789544106, 0.013579286634922028, 0.02557680942118168, 0.008482919074594975, 0.021638723090291023, 0.012421006336808205, 0.013443629257380962, 0.012055521830916405, 0.012470507994294167, 0.0130286430940032, 0.013020467944443226, 0.029497845098376274, 0.024993717670440674, 0.017524592578411102, 0.025103121995925903, 0.04234560579061508, 0.024430440738797188, 0.04301828891038895, 0.05709700658917427, 0.002964586950838566, 0.03635567054152489, 0.023705918341875076, 0.054073382169008255, 0.015899060294032097, 0.041219908744096756, 0.028752528131008148, 0.009372779168188572, 0.03327846899628639, 0.015318827703595161, 0.027332421392202377, 0.019466083496809006, 0.020176872611045837, 0.011795789003372192, 0.02784717082977295, 0.016592970117926598, 0.01821114681661129, 0.0011994709493592381, 0.03360464423894882, 0.017300834879279137, 0.00896559376269579, 0.014446187764406204, 0.011820241808891296, 0.015813909471035004, 0.019322317093610764, 0.010514000430703163, 0.024622224271297455, 0.041107531636953354, 0.038539379835128784, 0.03859834745526314, 0.041048564016819, 0.020250065252184868, 0.06527622789144516, 0.00219165813177824, 0.08333463221788406, 0.01176728680729866, 0.006148751359432936, 0.0063952491618692875, 0.011520789004862309, 0.010927334427833557, 0.02626844123005867, 0.009048189036548138, 0.028147585690021515, 0.003189746756106615, 0.001047678291797638, 0.002412316156551242, 0.00251014088280499, 0.010876696556806564, 0.03212699666619301, 0.015587999485433102, 0.027415689080953598, 0.021553292870521545, 0.019081899896264076, 0.017451027408242226, 0.023184167221188545, 0.012576878070831299, 0.021577639505267143, 0.01652698963880539, 0.017627527937293053, 0.01924513280391693, 0.007476259488612413, 0.008556446991860867, 0.018164945766329765, 0.03625088557600975, 0.09242618083953857, 0.033533915877342224, 0.095143161714077, 0.15025664865970612, 0.19932259619235992, 0.18025469779968262, 0.1693245768547058, 0.010089603252708912, 0.067097008228302, 0.025773154571652412, 0.051413461565971375, 0.02059110812842846, 0.013834694400429726, 0.021093230694532394, 0.01333257369697094, 0.02354457415640354, 0.005520888604223728, 0.01634461246430874, 0.012720850296318531, 0.010927006602287292, 0.026938797906041145, 0.01261371374130249, 0.025252094492316246, 0.029094919562339783, 0.034333735704422, 0.03931177407503128, 0.024116873741149902, 0.024822339415550232, 0.0223153755068779, 0.020639237016439438, 0.026498476043343544, 0.014609248377382755, 0.015299099497497082, 0.018758079037070274, 0.011150269769132137, 0.07315195351839066, 0.04974095895886421, 0.0686292052268982, 0.054263703525066376, 0.03522201627492905, 0.032127756625413895, 0.049603421241045, 0.017746344208717346, 0.06473400443792343, 0.05677974969148636, 0.048350632190704346, 0.07316312193870544, 0.007188798859715462, 0.007735166233032942, 0.009540391154587269, 0.0053835720755159855, 0.03764266148209572, 0.04062659665942192, 0.05644158273935318, 0.021827679127454758, 0.012895357795059681, 0.046591758728027344, 0.015888530761003494, 0.043598588556051254, 0.017102740705013275, 0.0080290287733078, 0.02491878718137741, 0.00021298231149557978, 0.06472694873809814, 0.018105728551745415, 0.08136855065822601, 0.0014641237212345004, 0.06540029495954514, 0.023037368431687355, 0.07821951061487198, 0.010218163020908833, 0.056045565754175186, 0.017681453377008438, 0.07130908221006393, 0.0024179299362003803, 0.021195458248257637, 0.1665366142988205, 0.08005531132221222, 0.10767676681280136, 0.017210761085152626, 0.010162414982914925, 0.02012740820646286, 0.0072457692585885525, 0.01963777467608452, 0.01670161262154579, 0.020161297172307968, 0.01617809571325779, 0.03517119958996773, 0.01748495176434517, 0.05088501796126366, 0.0017711336258798838, 0.025902649387717247, 0.028176549822092056, 0.02947438322007656, 0.024604814127087593, 0.04187890142202377, 0.03176398575305939, 0.06394246965646744, 0.009700409136712551, 0.09019935876131058, 0.11635902523994446, 0.13888733088970184, 0.06767105311155319, 0.037246719002723694, 0.06175660341978073, 0.03479745611548424, 0.06420587748289108, 0.1381712406873703, 0.014585934579372406, 0.1431790292263031, 0.009578125551342964, 0.015641242265701294, 0.06039672717452049, 0.022193705663084984, 0.05384426563978195, 0.06801073998212814, 0.0897948294878006, 0.10126852989196777, 0.05653705075383186, 0.12121204286813736, 0.052906885743141174, 0.1375453621149063, 0.03657355159521103, 0.019182659685611725, 0.0351303294301033, 0.020298253744840622, 0.034014735370874405, 0.023697182536125183, 0.006918806117027998, 0.019837481901049614, 0.010778509080410004, 0.03319263830780983, 0.03562372177839279, 0.05193181335926056, 0.016884544864296913, 0.02264363318681717, 0.008681918494403362, 0.01594884693622589, 0.015376707538962364, 0.09719572961330414, 0.016590096056461334, 0.11399760842323303, -0.00021180477051530033, 0.027895493432879448, 0.047106485813856125, 0.04042673483490944, 0.034575242549180984, 0.11196717619895935, 0.1533479392528534, 0.1370055079460144, 0.12830962240695953, 0.08240267634391785, 0.04252122715115547, 0.07165717333555222, 0.053266722708940506, 0.01277428213506937, 0.00353052606806159, 0.006763224955648184, 0.009541581384837627, 0.08542919903993607, 0.1457022726535797, 0.15400540828704834, 0.07712607085704803, 0.04989008978009224, 0.0959622710943222, 0.06930959224700928, 0.07654276490211487, 0.16842858493328094, 0.03971026837825775, 0.09518996626138687, 0.11294887959957123, -3.1399158615386114e-05, 0.012013934552669525, 0.006212912499904633, 0.005769622046500444, 0.05893167853355408, 0.0803028792142868, 0.06843945384025574, 0.07079508900642395, 0.05311926454305649, 0.02992238849401474, 0.044531743973493576, 0.038509905338287354, 0.004900534171611071, 0.01187540590763092, 0.01663953997194767, 0.00013639865210279822, 0.0528947077691555, 0.020423905923962593, 0.04845243692398071, 0.024866178631782532, 0.030551737174391747, 0.006982103455811739, 0.020579732954502106, 0.01695410907268524, 0.04955659806728363, 0.020606623962521553, 0.04210541024804115, 0.02805781178176403, 0.06058310717344284, 0.06956096738576889, 0.09050605446100235, 0.03963801637291908, 0.044286422431468964, 0.030812732875347137, 0.03472260758280754, 0.04037655144929886, 0.041398532688617706, 0.01574314758181572, 0.027675652876496315, 0.02946602739393711, 0.0010518224444240332, 0.005036170594394207, 0.004156096838414669, 0.0019318965496495366, 0.008338944986462593, 0.0049943700432777405, 0.006442762911319733, 0.006890552118420601, 0.07090817391872406, 0.11592648178339005, 0.012915708124637604, 0.021528594195842743, 0.01876692846417427, 0.015677371993660927, 0.021062389016151428, 0.024030504748225212, 0.02172125317156315, 0.023371640592813492, 0.007864276878535748, 0.03158018738031387, 0.015553937293589115, 0.023890526965260506, 0.00788877159357071, 0.03452903404831886, 0.013775202445685863, 0.028642605990171432, 0.008731149137020111, 0.025845520198345184, 0.012492726556956768, 0.022083943709731102, 0.011747396551072598, 0.013323877938091755, 0.012793575413525105, 0.012277700006961823, 0.029758449643850327, 0.013404075056314468, 0.017863111570477486, 0.02529941312968731, 0.043395426124334335, 0.02519271709024906, 0.04389430209994316, 0.024693841114640236, 0.002487616613507271, 0.058051180094480515, 0.023873046040534973, 0.03666575253009796, 0.016282064840197563, 0.05492701008915901, 0.02919151447713375, 0.042017560452222824, 0.033046647906303406, 0.009194583632051945, 0.027417104691267014, 0.014824125915765762, 0.020230920985341072, 0.01949259452521801, 0.027841465547680855, 0.01188204251229763, 0.01780499704182148, 0.016780059784650803, 0.033200085163116455, 0.0013849688693881035, 0.008716283366084099, 0.0171784870326519, 0.011522030457854271, 0.01437273807823658, 0.019000761210918427, 0.015753036364912987, 0.024310650303959846, 0.010443147271871567, 0.03801502287387848, 0.041074130684137344, 0.0406385138630867, 0.038450632244348526, 0.06523336470127106, 0.021197663620114326, 0.08364110440015793, 0.0027899143751710653, 0.00596371665596962, 0.011900968849658966, 0.01132891420274973, 0.006535771768540144, 0.025395188480615616, 0.010891971178352833, 0.02721889689564705, 0.009068263694643974, 0.005885453894734383, 0.0054228948429226875, 0.005574987269937992, 0.005757585167884827, 0.02890717424452305, 0.005003248807042837, 0.005023003555834293, 0.028751889243721962, 0.02841075323522091, 0.005499669816344976, 0.005609978921711445, 0.028164919465780258, 0.004022703506052494, 0.03839637711644173, 0.03788066655397415, 0.004002286586910486, 0.009675349108874798, 0.03274373337626457, 0.032409556210041046, 0.00947339367121458, 0.005360433366149664, 0.027826568111777306, 0.027799731120467186, 0.005095434375107288, 0.006560017820447683, 0.026626983657479286, 0.02638670988380909, 0.006508455611765385, 0.06350692361593246, 0.023178592324256897, 0.023110024631023407, 0.0635368749499321, 0.05302991345524788, 0.03365560993552208, 0.03351029008626938, 0.053136613219976425, 0.02166939340531826, 0.0014093514764681458, 0.0013514403253793716, 0.021760348230600357, 0.02303030714392662, 4.8440502723678946e-05, 6.647076952503994e-05, 0.023045316338539124, 0.0018620425835251808, 0.01770467683672905, 0.01757699064910412, 0.0019222425762563944, 0.0033565135672688484, 0.01621020957827568, 0.016202935948967934, 0.0032962963450700045, 0.03636700659990311, 0.0316324457526207, 0.031528618186712265, 0.03634941577911377, 0.03428526967763901, 0.0337141752243042, 0.0336156003177166, 0.034262433648109436, 0.02603255771100521, 0.08683351427316666, 0.08607469499111176, 0.025721756741404533, 0.05249905586242676, 0.06036701425909996, 0.05943998694419861, 0.052356451749801636, 0.03646713122725487, 0.035266466438770294, 0.035771239548921585, 0.03638780489563942, 0.037209950387477875, 0.03452363982796669, 0.03482655808329582, 0.03733248636126518, -0.0002757781185209751, 0.0109507255256176, 0.010928465984761715, -0.00032790936529636383, -0.0018051794031634927, 0.012480128556489944, 0.012420364655554295, -0.0018198058241978288, 0.04993613436818123, 0.029402825981378555, 0.029640506953001022, 0.05021069198846817, 0.04305045306682587, 0.03628851845860481, 0.03647952899336815, 0.043371666222810745, 0.0501881018280983, 0.005071873310953379, 0.00533944321796298, 0.04992153123021126, 0.03345107659697533, 0.021808896213769913, 0.0218220092356205, 0.033438969403505325, 0.0020475040655583143, 0.01665797457098961, 0.016705896705389023, 0.001984044909477234, -0.0007108051795512438, 0.01941628009080887, 0.019466400146484375, -0.0007764579495415092, 0.01718723401427269, 0.046921566128730774, 0.046952616423368454, 0.01680903695523739, 0.026005148887634277, 0.03810364753007889, 0.03810646012425423, 0.025655193254351616, 0.02122175507247448, 0.03213158994913101, 0.031721025705337524, 0.020796164870262146, 0.026631057262420654, 0.026722287759184837, 0.026339052245020866, 0.026178138330578804, 0.025202926248311996, 0.00400166492909193, 0.0040250071324408054, 0.025163402780890465, 0.023121457546949387, 0.0060831340961158276, 0.00614088773727417, 0.023047523573040962, 0.032835137099027634, 0.007676077075302601, 0.007502107415348291, 0.032841552048921585, 0.03135661408305168, 0.009154606610536575, 0.009135511703789234, 0.03120815008878708, 0.06754796952009201, 0.05221839249134064, 0.05170522630214691, 0.06815771013498306, 0.05621564760804176, 0.06355070322751999, 0.06337576359510422, 0.05648715794086456, 0.05275442451238632, 0.02998337708413601, 0.029943551868200302, 0.052415672689676285, 0.0471675731241703, 0.03557022660970688, 0.03534575179219246, 0.04701347276568413, -0.010977497324347496, 0.050810106098651886, 0.05046600475907326, -0.010850799269974232, 0.031163765117526054, 0.02661798894405365, 0.026900576427578926, 0.03143700957298279, 0.030816037207841873, 0.02696571871638298, 0.02708219178020954, 0.031255390495061874, 0.011860005557537079, 0.002034959848970175, 0.0020777415484189987, 0.011862294748425484, 0.012294488959014416, 0.001600475749000907, 0.0015799064422026277, 0.012360128574073315, 0.04621139541268349, 0.06659480184316635, 0.0668988898396492, 0.04529530182480812, 0.05774557963013649, 0.055060598999261856, 0.055333755910396576, 0.05686045065522194, 0.06291753053665161, 0.025610987097024918, 0.026066213846206665, 0.06281393021345139, 0.04662888124585152, 0.04189964011311531, 0.04235084354877472, 0.04652930423617363, 0.07389014214277267, 0.028019752353429794, 0.02825934812426567, 0.07388510555028915, 0.06283166259527206, 0.039078239351511, 0.039033193141222, 0.06311126053333282, 0.05160742625594139, 0.0267635527998209, 0.02726048044860363, 0.05158013105392456, 0.04642927274107933, 0.03194170817732811, 0.03218497335910797, 0.04665563255548477, 0.03325378894805908, 0.05761918053030968, 0.057019222527742386, 0.03293166309595108, 0.035597898066043854, 0.05527506396174431, 0.05488429218530655, 0.03506658226251602, 0.04883366450667381, 0.028310345485806465, 0.02860073745250702, 0.04922343045473099, 0.041031040251255035, 0.03611297160387039, 0.03647473827004433, 0.04134942218661308, -0.0014812566805630922, 0.010813038796186447, 0.010801656171679497, -0.0015018400736153126, -0.00013526449038181454, 0.009467046707868576, 0.00939848180860281, -9.866552863968536e-05, 0.0032999105751514435, 0.02620586007833481, 0.02596632018685341, 0.0031941451597958803, 0.006410648580640554, 0.02309512533247471, 0.022840628400444984, 0.006319834850728512, 0.03457927703857422, 0.016057437285780907, 0.015435897745192051, 0.03370242938399315, 0.01257686410099268, 0.0005941065610386431, 0.0005570741486735642, 0.012616035528481007, 0.0035972348414361477, 0.0229113157838583, 0.02259695902466774, 0.0034995581954717636, 0.004937628284096718, 0.021570926532149315, 0.02130502089858055, 0.004791495390236378, 0.02415172941982746, 0.1815473735332489, 0.18159063160419464, 0.023847796022892, 0.07796955108642578, 0.12772957980632782, 0.12746043503284454, 0.0779779702425003, 0.0033393865451216698, 0.023043733090162277, 0.02318986877799034, 0.0032425702083855867, 0.00563826272264123, 0.02074485644698143, 0.020650634542107582, 0.005781804211437702, 0.0033272167202085257, 0.012992696836590767, 0.013114207424223423, 0.0033701101783663034, -0.0003833834489341825, 0.016703296452760696, 0.016810836270451546, -0.00032651846413500607, 0.018602682277560234, 0.002742969198152423, 0.002836626023054123, 0.0185400303453207, 0.01726001501083374, 0.004085636232048273, 0.004149062093347311, 0.017227593809366226, 0.02894480712711811, 0.0055397492833435535, 0.005638373550027609, 0.028890712186694145, 0.026413876563310623, 0.008070678450167179, 0.007992072030901909, 0.026537014171481133, 0.02460050769150257, 0.003218489931896329, 0.003222785657271743, 0.024727094918489456, 0.022859511896967888, 0.004959487821906805, 0.005032500252127647, 0.022917380556464195, 0.0025244655553251505, 0.015221891924738884, 0.014963808469474316, 0.0025685701984912157, 0.0013849899405613542, 0.01636136882007122, 0.01620597019791603, 0.001326410099864006, 0.010839248076081276, 0.0022033562418073416, 0.0022428384982049465, 0.011020133271813393, 0.012255043722689152, 0.0007875615265220404, 0.0008589223143644631, 0.012404047884047031, 0.0009708598372526467, 0.01784399338066578, 0.01775168813765049, 0.0010606428841128945, 0.002536135958507657, 0.016278717666864395, 0.016183776780962944, 0.0026285548228770494, 0.03594512119889259, 0.0190235935151577, 0.019178375601768494, 0.03621656820178032, 0.02550216019153595, 0.029466552659869194, 0.02975623682141304, 0.02563871443271637, 0.0024548270739614964, 0.019185489043593407, 0.019094014540314674, 0.0025419818703085184, 0.0041571566835045815, 0.01748315989971161, 0.01746705174446106, 0.004168943967670202, 0.0028575921896845102, 0.012579746544361115, 0.01249763835221529, 0.002832249039784074, 0.0021403837017714977, 0.01329695526510477, 0.013146352022886276, 0.0021835342049598694, 0.04091670736670494, 0.0363510437309742, 0.03658076003193855, 0.041083838790655136, 0.03681156411767006, 0.04045617952942848, 0.04061256721615791, 0.037052031606435776, 0.009813188575208187, 0.031673695892095566, 0.03110058233141899, 0.009862997569143772, 0.011644204147160053, 0.02984267845749855, 0.029404066503047943, 0.011559509672224522, 0.02586270123720169, 0.048224180936813354, 0.04866808280348778, 0.026108378544449806, 0.0367041751742363, 0.037382714450359344, 0.03794226422905922, 0.036834198981523514, 0.005035281181335449, 0.028216466307640076, 0.027931049466133118, 0.005106007680296898, 0.008300041779875755, 0.02495170384645462, 0.024808544665575027, 0.008228513412177563, 0.0028414654079824686, 0.022080281749367714, 0.02223893441259861, 0.0030836700461804867, 0.005222175270318985, 0.019699575379490852, 0.01992814801633358, 0.005394455976784229, 0.07707154750823975, 0.0213310569524765, 0.021293269470334053, 0.0774119570851326, 0.06386612355709076, 0.03453648090362549, 0.03457747772336006, 0.06412775814533234, 0.0224266666918993, 0.06177789717912674, 0.06093547120690346, 0.023190302774310112, 0.01488575804978609, 0.06931880861520767, 0.0689135193824768, 0.01521222572773695, 0.02058957889676094, 0.0025650118477642536, 0.00264900759793818, 0.020495131611824036, 0.0194379985332489, 0.0037165924441069365, 0.003712523030117154, 0.019431615248322487, 0.023611566051840782, 0.0038703985046595335, 0.0038902158848941326, 0.02359255589544773, 0.02205014042556286, 0.00543182622641325, 0.005516957025974989, 0.021965812891721725, 0.02932065911591053, 0.005788552574813366, 0.005839203018695116, 0.029211916029453278, 0.02777433767914772, 0.0073348721489310265, 0.007345658726990223, 0.02770545892417431, 0.03813246265053749, 0.03281630948185921, 0.03254169598221779, 0.038419581949710846, 0.037398938089609146, 0.03354983776807785, 0.033561866730451584, 0.03739940747618675, 0.020764091983437538, 0.05284073203802109, 0.052730362862348557, 0.020392371341586113, 0.027968278154730797, 0.04563654586672783, 0.04563106968998909, 0.027491668239235878, 0.003587540704756975, 0.015605240128934383, 0.01563517190515995, 0.0037281657569110394, 0.004649173468351364, 0.014543607831001282, 0.01455957256257534, 0.004803764168173075, 0.013164635747671127, 0.0012220651842653751, 0.001275696326047182, 0.01318086963146925, 0.016515467315912247, -0.002128767780959606, -0.0020458644721657038, 0.01650243066251278, 0.021150927990674973, 0.03208109736442566, 0.03199780732393265, 0.021062655374407768, 0.026418741792440414, 0.026813281700015068, 0.026625534519553185, 0.02643493190407753, 0.013586469925940037, 0.07683483511209488, 0.07664096355438232, 0.013630985282361507, 0.037456393241882324, 0.05296491086483002, 0.0529322549700737, 0.03733968734741211, 0.07388583570718765, 0.023125478997826576, 0.02316446416079998, 0.07409963011741638, 0.06479888409376144, 0.03221243619918823, 0.03208654746413231, 0.0651775598526001, 0.029349476099014282, 0.009595082141458988, 0.009606669656932354, 0.02913002483546734, 0.020677318796515465, 0.05212793126702309, 0.051827386021614075, 0.020386960357427597, 0.020626911893486977, 0.05217834189534187, 0.051684122532606125, 0.020530223846435547, 0.017139526084065437, 0.04883945360779762, 0.048462361097335815, 0.017079805955290794, 0.021977834403514862, 0.04400114715099335, 0.043872442096471786, 0.021669724956154823, 0.014090077951550484, 0.03774363547563553, 0.03770215064287186, 0.013648035004734993, 0.021229658275842667, 0.030604055151343346, 0.030437707901000977, 0.020912474021315575, 0.009046846069395542, 0.02356758527457714, 0.023380117490887642, 0.00901411660015583, 0.017866218462586403, 0.014748211950063705, 0.014626993797719479, 0.017767243087291718], "data_vars": [5.339471726983902e-07, 1.0307996234359962e-07, 1.26115037346608e-06, 2.386340383964125e-06, 2.9954388082842343e-05, 6.357935490086675e-06, 1.9627850633696653e-05, 7.6134110713610426e-06, 8.97258723853156e-06, 1.5318291843868792e-05, 1.5571380572509952e-05, 8.785131285549141e-06, 1.3617334843729623e-05, 5.164934464119142e-06, 9.32976217882242e-06, 7.902936886239331e-06, 4.997736141376663e-06, 6.60526129649952e-05, 3.537176235113293e-05, 1.1856940545840189e-05, 0.00022829818772152066, 7.924408419057727e-05, 0.00016681707347743213, 2.8484722861321643e-05, 0.003092251718044281, 0.0009263755055144429, 0.0024961286690086126, 0.0011078238021582365, 8.693015843164176e-05, 2.3594233425683342e-05, 4.535955667961389e-05, 1.8810880646924488e-05, 1.0703782209020574e-05, 0.00018983187328558415, 6.595052127522649e-06, 0.00013729541387874633, 2.009636773436796e-05, 3.944470881833695e-05, 8.817787602311e-06, 1.686139512457885e-05, 1.6497513570357114e-05, 5.966903700027615e-06, 1.5199826520984061e-05, 5.170092208572896e-06, 7.504005770897493e-05, 7.579872180940583e-05, 2.341326944588218e-05, 4.1173545469064265e-05, 0.00023085300927050412, 2.179864895879291e-05, 0.0002099464909406379, 1.4605384421884082e-05, 1.1845731023640838e-05, 6.835807289462537e-05, 3.901034233422251e-06, 3.98140364268329e-05, 0.00025921579799614847, 0.0001825896615628153, 0.00023648107890039682, 0.00013593139010481536, 3.4907159715658054e-05, 3.388454206287861e-05, 1.1770227501983754e-05, 5.333644003258087e-05, 0.00033793176407925785, 0.00038753831177018583, 0.0001652137580094859, 0.00010718466364778578, 2.3263669390871655e-06, 4.642587555281352e-06, 1.9181256902811583e-06, 4.915379577141721e-06, 0.0001428022515028715, 3.2106352591654286e-05, 0.00011494761565700173, 5.817900091642514e-05, 4.539143628790043e-05, 8.435114068561234e-06, 3.458294304437004e-05, 6.916564416314941e-06, 4.807743152923649e-06, 1.3158594811102375e-05, 5.014738690078957e-06, 2.7017786123906262e-05, 1.7176887922687456e-05, 5.903050987399183e-05, 1.559161137265619e-05, 0.00010063863010145724, 2.3609813069924712e-05, 0.0001404913200531155, 2.056349148915615e-05, 0.0001773668482201174, 2.7743521059164777e-05, 3.8985370338195935e-05, 2.3982496713870205e-05, 6.953470438020304e-05, 0.0008761662757024169, 0.0001267491898033768, 0.0002760574279818684, 0.000106927560409531, 2.617656264192192e-06, 7.007308795436984e-06, 2.208859086749726e-06, 1.020562103803968e-05, 0.00013550715812016279, 3.316766378702596e-05, 8.19336564745754e-05, 1.859996518760454e-05, 1.601444455445744e-05, 5.401159432949498e-05, 8.95907032827381e-06, 0.000120900287583936, 2.3000147848506458e-05, 0.00029302662005648017, 1.661068745306693e-05, 0.00030591170070692897, 9.396838868269697e-05, 5.5984837672440335e-05, 3.0237053579185158e-05, 0.00014935039507690817, 0.0012065068585798144, 0.0002564573078416288, 0.0007396160508506, 0.000507824239321053, 0.00017627057968638837, 5.194248296902515e-05, 0.00019475765293464065, 2.9068189178360626e-05, 3.3988060749834403e-05, 0.0005500542465597391, 1.4063813978282269e-05, 0.0005427420837804675, 7.990156154846773e-05, 1.2508435247582383e-05, 5.6239532568724826e-05, 1.315402096224716e-05, 0.0007000158075243235, 0.00011491913755889982, 0.0004734531103167683, 0.0002777900081127882, 8.497729140799493e-05, 0.0005325073725543916, 5.4575659305555746e-05, 0.0006970558315515518, 3.0297485864139162e-05, 1.106584841181757e-05, 2.892175871238578e-05, 9.670769941294566e-06, 2.1843188733328134e-06, 9.972275620384607e-06, 3.5535992992663523e-06, 7.003615792200435e-06, 0.00012718614016193897, 2.1346131688915193e-05, 9.397634858032688e-05, 5.2645256801042706e-05, 5.189589955989504e-06, 1.7297157683060504e-05, 9.264905202144291e-06, 9.248475180356763e-06, 1.8295020709047094e-05, 0.00020150317868683487, 1.1790296412073076e-05, 0.0002721990749705583, 3.629479033406824e-05, 3.9438022213289514e-05, 2.0190263967378996e-05, 5.234523632680066e-05, 0.002315798308700323, 0.0005255487631075084, 0.0017152737127617002, 0.0006335361395031214, 7.689293852308765e-05, 0.0001910604041768238, 6.269967707339674e-05, 0.00011766421084757894, 2.2986280328041175e-06, 3.631356230471283e-05, 5.925298864895012e-06, 1.0488174666534178e-05, 0.000590055191423744, 0.0002761102223303169, 0.00011898963566636667, 0.0003839934361167252, 0.0002221450413344428, 0.000256335741141811, 0.0001485140819568187, 0.0002800534130074084, 0.00013493977894540876, 0.0007362337200902402, 0.0004501925141084939, 0.00024544421466998756, 6.601310360565549e-06, 1.5482263506783056e-06, 3.0824560326436767e-06, 3.097056833212264e-06, 0.00036895027733407915, 0.00013028043031226844, 0.0003524291096255183, 0.00017893491894938052, 5.572280861088075e-05, 8.318486652569845e-05, 5.996014442644082e-05, 5.1891729526687413e-05, 2.2803860701969825e-05, 2.1511843897314975e-06, 3.058362153751659e-06, 1.2175853044027463e-05, 2.5624289264669642e-05, 0.0004943641251884401, 4.715563409263268e-05, 0.0003912097599823028, 8.980783604783937e-06, 0.00018343949341215193, 1.6803898688522168e-05, 8.6967833340168e-05, 3.081850445596501e-05, 0.0004281283472664654, 4.166453072684817e-05, 0.0003371997154317796, 0.0003483959590084851, 8.421517122769728e-05, 0.00021387498418334872, 0.0002644033229444176, 5.751719800173305e-05, 5.652706022374332e-05, 4.3793344957521185e-05, 3.028929313586559e-05, 2.2703135982737876e-05, 0.0003146201779600233, 7.872438436606899e-05, 0.00014197341806720942, 9.864589856078965e-07, 4.889377009931195e-07, 7.182078434198047e-07, 2.0284710444684606e-06, 2.3586617317050695e-06, 6.9051229729666375e-06, 1.4292193100118311e-06, 3.0697578949911986e-06, 0.00047801650362089276, 0.00017434947949368507, 9.419650268682744e-06, 1.6317306290147826e-05, 5.582439825957408e-06, 2.1793168343720026e-05, 2.9128064852557145e-05, 1.6426987713202834e-05, 1.744684050208889e-05, 1.155661084339954e-05, 1.7585305613465607e-05, 1.1479922250146046e-05, 9.348799721919931e-06, 1.1180415640410502e-05, 2.2477399397757836e-05, 8.60706131788902e-06, 1.4323951290862169e-05, 5.655125278281048e-06, 1.8365235519013368e-05, 4.402026661409764e-06, 1.2736490134557243e-05, 4.080222424818203e-06, 5.544946816371521e-06, 5.229740963841323e-06, 6.484339337475831e-06, 4.58053000329528e-06, 1.4055100109544583e-05, 2.2858059310237877e-05, 1.6393991245422512e-05, 1.22332758110133e-05, 5.8673147577792406e-05, 5.9761296142823994e-05, 2.442411641823128e-05, 6.142393976915628e-05, 0.00013384433987084776, 2.565453905845061e-05, 5.6817574659362435e-05, 5.9890950069529936e-05, 7.935538451420143e-05, 5.4284562793327495e-05, 5.249865716905333e-05, 6.207748810993508e-05, 2.073114228551276e-05, 2.0126011804677546e-05, 2.1313784600351937e-05, 1.451853404432768e-05, 2.8675285648205318e-05, 6.6730108301271684e-06, 2.4220194973167963e-05, 1.1048656233469956e-05, 1.9325423636473715e-05, 7.081286639731843e-06, 6.204327291925438e-06, 2.260140172438696e-05, 9.461315130465664e-06, 5.590543878497556e-06, 1.0471171663084533e-05, 6.837932232883759e-06, 7.481475677195704e-06, 6.164016667753458e-06, 8.316515959450044e-06, 8.609632459410932e-06, 3.666979682748206e-05, 1.8399179680272937e-05, 3.485421621007845e-05, 2.0353712898213416e-05, 1.5415525922435336e-05, 0.00016653124475851655, 1.7831882360042073e-05, 0.00023260530724655837, 5.5297605285886675e-06, 3.3190021895279642e-06, 2.6304171569790924e-06, 5.439733740786323e-06, 5.865151251782663e-06, 2.6468329451745376e-05, 6.065211891836952e-06, 2.484555443516001e-05, 1.5917236169116222e-06, 1.0177103604291915e-07, 5.999109475851583e-07, 2.3223456082632765e-06, 6.494849458249519e-06, 3.0323511964525096e-05, 8.013011211005505e-06, 1.9777162378886715e-05, 1.6899635738809593e-05, 9.515288184047677e-06, 9.355171641800553e-06, 1.674672785156872e-05, 5.3662151913158596e-06, 1.3874386240786407e-05, 8.250160135503393e-06, 9.252091331291012e-06, 6.507631769636646e-05, 5.230781425780151e-06, 1.1506783266668208e-05, 3.574077345547266e-05, 7.52280539018102e-05, 0.0002267898089485243, 3.068911246373318e-05, 0.00016579889052081853, 0.0009007648332044482, 0.0029540415853261948, 0.0010663717985153198, 0.002413744805380702, 2.319840496056713e-05, 8.569993224227801e-05, 1.784108826541342e-05, 4.3856554839294404e-05, 0.00019668843015097082, 9.75241982814623e-06, 0.00014196612755768, 6.1445648498192895e-06, 4.071030343766324e-05, 2.032967677223496e-05, 1.7188363926834427e-05, 8.846054697642103e-06, 6.030089934938587e-06, 1.61248190124752e-05, 5.190496267459821e-06, 1.4966636626922991e-05, 7.659417315153405e-05, 8.422042446909472e-05, 4.1391376726096496e-05, 2.5046767405001447e-05, 2.3463571778847836e-05, 0.00023769712424837053, 1.5520585293415934e-05, 0.0002128564810846001, 7.009634282439947e-05, 1.1848454960272647e-05, 4.026897659059614e-05, 4.140718374401331e-06, 0.00019482933566905558, 0.0002654529525898397, 0.0001426533708581701, 0.00024362550175283104, 3.0204939321265556e-05, 3.277920768596232e-05, 4.8053876525955275e-05, 1.0936147191387136e-05, 0.000365819112630561, 0.0003595411835703999, 0.00010061085049528629, 0.0001816860749386251, 4.309588803153019e-06, 2.4806529381748987e-06, 4.743605131807271e-06, 2.0285065147618297e-06, 3.2485437259310856e-05, 0.00014442905376199633, 5.829970177728683e-05, 0.00011876373901031911, 7.977551831572782e-06, 4.7501416702289134e-05, 6.906859198352322e-06, 3.5845921956934035e-05, 1.2780126780853607e-05, 4.996105872123735e-06, 2.601349842734635e-05, 4.88013165522716e-06, 5.987683834973723e-05, 1.689407872618176e-05, 0.00010151757305720821, 1.5481342416023836e-05, 0.00013895791198592633, 2.4349725208594464e-05, 0.0001743668835842982, 2.0861607481492683e-05, 3.703436232171953e-05, 2.8818039936595596e-05, 6.543185736518353e-05, 2.46959607466124e-05, 0.0001229270565090701, 0.0008401681552641094, 0.00010855605796677992, 0.00026714178966358304, 6.957046025490854e-06, 2.4529661004635273e-06, 9.477852472628001e-06, 2.137260025847354e-06, 3.367578028701246e-05, 0.00013649674656335264, 1.8859915144275874e-05, 8.333923324244097e-05, 5.275322837405838e-05, 1.6317007975885645e-05, 0.00011919342796318233, 8.457525837002322e-06, 0.0003065184282604605, 2.0731946278829128e-05, 0.00031789159402251244, 1.4618172826885711e-05, 5.545864041778259e-05, 9.913223038893193e-05, 0.00014807989646214992, 3.191066571162082e-05, 0.0002513255749363452, 0.0011581791331991553, 0.00048766323016025126, 0.0007211781921796501, 5.368792699300684e-05, 0.0001759060105541721, 3.06355650536716e-05, 0.00019748852355405688, 0.0005421460955403745, 2.9637985790031962e-05, 0.0005371818551793694, 1.2615709238161799e-05, 1.3204609786043875e-05, 8.1241836596746e-05, 1.3613327610073611e-05, 5.81062886340078e-05, 0.00011225118942093104, 0.0006791549385525286, 0.0002684740466065705, 0.0004670906055252999, 0.0005263508064672351, 8.16240135463886e-05, 0.0006887301569804549, 5.019495074520819e-05, 1.1391373845981434e-05, 3.0804993002675474e-05, 1.0035151717602275e-05, 2.8952761567779817e-05, 1.0326361007173546e-05, 1.9139135929435724e-06, 7.241671937663341e-06, 3.283363639638992e-06, 2.126998697349336e-05, 0.00013298753765411675, 5.04260569869075e-05, 9.964529454009607e-05, 1.690606768534053e-05, 5.112467079015914e-06, 8.939731742430013e-06, 9.503976798441727e-06, 0.0002035998331848532, 1.7050620954250917e-05, 0.0002756546309683472, 1.130000782723073e-05, 3.566162195056677e-05, 3.6949979403289035e-05, 4.828510282095522e-05, 1.9862432964146137e-05, 0.0005006029969081283, 0.00223131594248116, 0.0006000260473228991, 0.0016720013227313757, 0.00019855394202750176, 7.552130409749225e-05, 0.00012138607417000458, 6.772428605472669e-05, 3.53441500919871e-05, 2.268265916427481e-06, 1.0146704880753532e-05, 5.518977559404448e-06, 0.00026475032791495323, 0.0006173101137392223, 0.0003728623269125819, 0.00011736035958165303, 0.000259831256698817, 0.00022564007667824626, 0.00028946675593033433, 0.000146037113154307, 0.0007548145367763937, 0.00013338547432795167, 0.00024216444580815732, 0.0004720342403743416, 1.424441734343418e-06, 6.345506790239597e-06, 2.864832367777126e-06, 3.0445501124631846e-06, 0.00012987558147870004, 0.0004055512836202979, 0.00017392513109371066, 0.0004054513992741704, 8.838995563564822e-05, 5.6979351938935e-05, 5.7212295359931886e-05, 6.131385453045368e-05, 2.106941337842727e-06, 2.2393935068976134e-05, 1.1740244190150406e-05, 2.9978377824591007e-06, 0.0004817536973860115, 2.6617753974278457e-05, 0.00038335632416419685, 4.668962355935946e-05, 0.00017787171236705035, 8.592536687501706e-06, 8.483664714731276e-05, 1.5543382687610574e-05, 0.0004164507845416665, 2.962770486192312e-05, 0.0003271162568125874, 4.010033080703579e-05, 8.032572804950178e-05, 0.0003506809880491346, 0.0002458902890793979, 0.00022691242338623852, 5.872736073797569e-05, 5.3017625759821385e-05, 3.0769955628784373e-05, 4.1999639506684616e-05, 0.00030922124278731644, 2.4555347408750094e-05, 0.00013889411638956517, 8.106879249680787e-05, 5.016700583837519e-07, 1.0399634220448206e-06, 1.9458975657471456e-06, 7.188016866166436e-07, 6.573944119736552e-06, 2.4050041247392073e-06, 3.0922026326152263e-06, 1.5230231156238005e-06, 0.00017269383533857763, 0.0005526632303372025, 1.466191497456748e-05, 8.759228876442648e-06, 2.0091463738936e-05, 5.071353371022269e-06, 1.6490816051373258e-05, 2.8583304811036214e-05, 1.1626651030383073e-05, 1.737899219733663e-05, 1.0815121640916914e-05, 1.668307595537044e-05, 1.0583248695184011e-05, 8.939039616961963e-06, 8.154158422257751e-06, 2.292508725076914e-05, 5.691562819265528e-06, 1.4648512660642155e-05, 4.690470632340293e-06, 1.777456964191515e-05, 4.461410753719974e-06, 1.2310450983932242e-05, 5.155460712558124e-06, 5.436189439933514e-06, 4.338019607530441e-06, 6.739976015524007e-06, 2.2663300114800222e-05, 1.482426614529686e-05, 1.179907030746108e-05, 1.860922020568978e-05, 5.74729529034812e-05, 6.232690066099167e-05, 6.363628199324012e-05, 2.614464028738439e-05, 2.587586459412705e-05, 0.00012556732690427452, 6.2491228163708e-05, 5.38785861863289e-05, 5.772897566203028e-05, 7.287222251761705e-05, 6.616409518755972e-05, 4.66664569103159e-05, 2.2217338482732885e-05, 2.016534563153982e-05, 1.5665638784412295e-05, 2.0917832443956286e-05, 7.1623044277657755e-06, 2.9190838176873513e-05, 1.1657727554847952e-05, 2.5200171876349486e-05, 7.033369456621585e-06, 2.0190762370475568e-05, 2.2016509319655597e-05, 6.478790510300314e-06, 5.259912541077938e-06, 1.0346470844524447e-05, 6.353963726724032e-06, 1.1814815479738172e-05, 6.144574399513658e-06, 6.924326953594573e-06, 9.044991202245e-06, 7.955294677230995e-06, 1.8732929675024934e-05, 3.6463541619013995e-05, 2.1212539650150575e-05, 3.425675822654739e-05, 0.0001643048890400678, 1.6000725736375898e-05, 0.00023365205561276525, 1.7795251551433466e-05, 3.003647634614026e-06, 5.289710770739475e-06, 4.982992777513573e-06, 2.4736243631195975e-06, 2.3668337234994397e-05, 5.536486696655629e-06, 2.2232861738302745e-05, 5.583108304563211e-06, 9.331059118267149e-05, 0.00012983992928639054, 0.0001277391129406169, 9.627899999031797e-05, 3.918042784789577e-05, 2.604472456368967e-06, 2.4987373308249516e-06, 3.86592437280342e-05, 3.945919524994679e-05, 1.7854944189821254e-06, 1.7285958620050224e-06, 3.9641643525101244e-05, 1.551284185552504e-06, 5.478897219290957e-05, 5.623513789032586e-05, 1.8897321751865093e-06, 1.4360318800754612e-06, 4.161777178524062e-05, 4.182115299045108e-05, 1.659839313106204e-06, 7.227097853501618e-07, 3.366342207300477e-05, 3.2932224712567404e-05, 8.038132932597364e-07, 9.61282012212905e-07, 2.702393612707965e-05, 2.6691961465985514e-05, 9.161105936073e-07, 7.749829819658771e-05, 8.603712194599211e-05, 8.615553088020533e-05, 7.603126869071275e-05, 5.874380440218374e-05, 0.00010983548418153077, 0.00011027861182810739, 5.6060842325678095e-05, 2.6669635190046392e-05, 1.1172118092872552e-06, 1.1001947086697328e-06, 2.8777129045920447e-05, 2.6504596462473273e-05, 7.285511287591362e-07, 6.940010734979296e-07, 2.8468686650739983e-05, 8.148739993885101e-07, 2.3004859031061642e-05, 2.2938655092730187e-05, 8.043734283091908e-07, 9.394225344294682e-07, 1.847938801802229e-05, 1.8747596186585724e-05, 1.030870635077008e-06, 6.087447764002718e-05, 3.12684423988685e-05, 3.290722816018388e-05, 5.813570896862075e-05, 5.066502490080893e-05, 3.458158244029619e-05, 3.586319871828891e-05, 4.893045115750283e-05, 6.325239519355819e-05, 0.0002104303566738963, 0.00020714617858175188, 6.106025830376893e-05, 9.153464634437114e-05, 0.00015282293315976858, 0.0001469405833631754, 8.684358181199059e-05, 5.947280442342162e-05, 8.474782953271642e-05, 8.822282688925043e-05, 6.26414330326952e-05, 6.349800969474018e-05, 9.325578139396384e-05, 9.688183490652591e-05, 6.688966823276132e-05, 6.695335059703211e-07, 3.3915355743374676e-05, 3.2755382562754676e-05, 6.061383714950352e-07, 4.6235788886406226e-07, 3.5312426916789263e-05, 3.43622341461014e-05, 4.4857199554826366e-07, 8.120956044876948e-05, 0.0001464051747461781, 0.00014712550910189748, 7.769755757180974e-05, 5.4891286708880216e-05, 0.00017181930888909847, 0.00016787229105830193, 5.2807798056164756e-05, 6.752836634404957e-05, 2.3325439542531967e-05, 2.325934656255413e-05, 6.967531953705475e-05, 2.826210948114749e-05, 1.6882817362784408e-05, 1.5822193745407276e-05, 2.8516415113699622e-05, 1.7034864185916376e-06, 3.278916483395733e-05, 3.206613109796308e-05, 1.5392214436360518e-06, 8.867603469298047e-07, 4.2089057387784123e-05, 4.074320531799458e-05, 8.374831281798834e-07, 6.068753282306716e-05, 6.90485248924233e-05, 7.253897638292983e-05, 5.8950874517904595e-05, 7.536619523307309e-05, 7.512318552471697e-05, 7.811195973772556e-05, 7.403466588584706e-05, 4.845193325309083e-05, 7.412064587697387e-05, 6.834091618657112e-05, 4.8079458792926744e-05, 5.666831202688627e-05, 7.192205521278083e-05, 6.643450615229085e-05, 5.550569039769471e-05, 4.86037642986048e-05, 3.602425067583681e-06, 3.2815123631735332e-06, 4.6647575800307095e-05, 3.9443937566829845e-05, 1.2964900406586821e-06, 1.1923772262889543e-06, 3.7092719139764085e-05, 8.331074786838144e-05, 3.760154640986002e-06, 2.9797245133522665e-06, 8.519503171555698e-05, 7.77694585849531e-05, 4.879384050582303e-06, 4.232885657984298e-06, 7.924954843474552e-05, 8.961817366071045e-05, 0.00014411855954676867, 0.0001463231019442901, 8.672439435031265e-05, 7.038908370304853e-05, 0.00016853534907568246, 0.00016773154493421316, 6.951862451387569e-05, 0.00011185216862941161, 3.7167112168390304e-05, 3.735943391802721e-05, 0.00010615312930895016, 9.793408389668912e-05, 4.754646943183616e-05, 4.8231355322059244e-05, 9.408502228325233e-05, 2.2656279270449886e-06, 5.171993689145893e-05, 5.528430483536795e-05, 2.293264969921438e-06, 4.922153311781585e-05, 8.473724301438779e-05, 8.39242129586637e-05, 4.6431694499915466e-05, 4.653619907912798e-05, 7.187482697190717e-05, 6.997976743150502e-05, 4.522898234426975e-05, 4.281392102711834e-05, 1.6805444147394155e-06, 1.6520908729944495e-06, 4.102958700968884e-05, 5.329980922397226e-05, 5.117981345392764e-07, 4.6155543032000423e-07, 5.143351518199779e-05, 0.00014328306133393198, 0.0001732324599288404, 0.00016761838924139738, 0.00015104914200492203, 0.00020399660570546985, 0.00011505798465805128, 0.00010784030746435747, 0.00022129352146293968, 0.00012034493556711823, 0.00014502884005196393, 0.00015382740821223706, 0.00011713431013049558, 8.084840374067426e-05, 0.00015228685515467077, 0.0001541484525660053, 8.020001405384392e-05, 0.00011231336975470185, 0.00010077429033117369, 0.00010386859503341839, 0.00011354185699019581, 8.084882574621588e-05, 0.00013950903667137027, 0.00014250200183596462, 8.157434785971418e-05, 6.200381903909147e-05, 0.00010934368037851527, 0.00010806738282553852, 6.241286610020325e-05, 5.052820415585302e-05, 0.00013519718777388334, 0.00013429572572931647, 5.0172762712463737e-05, 5.2068891818635166e-05, 0.00010852551349671558, 0.00010118396312464029, 5.002778925700113e-05, 4.7345252824015915e-05, 0.00012550261453725398, 0.00011898486991412938, 4.545283809420653e-05, 4.4866967073176056e-05, 0.00012633681762963533, 0.00012370750482659787, 4.2809362639673054e-05, 3.7692399928346276e-05, 0.00013882758503314108, 0.00013709336053580046, 3.547091182554141e-05, 5.899769917050435e-07, 3.1037619919516146e-05, 3.043389915546868e-05, 6.211440108927491e-07, 5.466299057843571e-07, 3.2336043659597635e-05, 3.184481101925485e-05, 5.829370479659701e-07, 1.0288929388480028e-06, 3.373081926838495e-05, 3.380937050678767e-05, 1.0515927897358779e-06, 1.7136208043666556e-06, 2.695959119591862e-05, 2.7235060770181008e-05, 1.7199635067299823e-06, 7.655907393200323e-05, 1.9877286831615493e-05, 1.883660297608003e-05, 7.089962309692055e-05, 7.47660033084685e-06, 7.417871188408753e-07, 8.094060603980324e-07, 7.2330021794186905e-06, 7.506157544412417e-07, 2.1353289412218146e-05, 2.1461841242853552e-05, 7.399995070045406e-07, 7.572307367809117e-07, 1.860951306298375e-05, 1.871464519354049e-05, 7.689735070925963e-07, 0.00016881329065654427, 0.0010041117202490568, 0.0009110623504966497, 0.00018195106531493366, 0.00035114827915094793, 0.0005473628407344222, 0.0005086870514787734, 0.0003466935595497489, 5.6157222161346e-07, 3.312068656668998e-05, 3.431721415836364e-05, 5.834183411934646e-07, 1.2494278962549288e-06, 2.9511651518987492e-05, 2.9497632567654364e-05, 1.4148569107419462e-06, 1.5386738141387468e-06, 1.8374525097897276e-05, 1.8059898138744757e-05, 1.5756945686007384e-06, 6.567933610313048e-07, 2.447979204589501e-05, 2.4704346287762746e-05, 7.146128950807906e-07, 3.540631223586388e-05, 2.1436494535009842e-06, 2.1361313429224538e-06, 3.298069350421429e-05, 2.7622114430414513e-05, 1.6989689584079315e-06, 1.6908143152249977e-06, 2.634062184370123e-05, 6.430796929635108e-05, 3.0379273994185496e-06, 2.7812563985207817e-06, 6.465100886998698e-05, 5.093229265185073e-05, 5.864334525540471e-06, 5.623914148600306e-06, 5.0038754125125706e-05, 3.8543563277926296e-05, 1.0847425073734485e-06, 1.1248948794673197e-06, 3.745517824427225e-05, 3.041516538360156e-05, 2.0216282337059965e-06, 2.129810354745132e-06, 3.0267878173617646e-05, 1.1479072554720915e-06, 1.993005207623355e-05, 1.8595381334307604e-05, 1.1269822834947263e-06, 6.455704806285212e-07, 2.2485781300929375e-05, 2.122598743881099e-05, 7.059550171106821e-07, 1.1559379345271736e-05, 1.4550485047948314e-06, 1.4854376786388457e-06, 1.112360132538015e-05, 1.6786867490736768e-05, 4.5117306513020594e-07, 4.782516498380573e-07, 1.6130970834637992e-05, 3.668225190267549e-07, 1.4489904970105272e-05, 1.4713354175910354e-05, 3.208506598184613e-07, 8.777510061008797e-07, 1.3046496860624757e-05, 1.289222200284712e-05, 8.46305113100243e-07, 6.838694389443845e-05, 4.85128111904487e-05, 4.761421223520301e-05, 6.641656364081427e-05, 5.078837421024218e-05, 6.313870107987896e-05, 6.188006227603182e-05, 5.0001704948954284e-05, 8.960128639046161e-07, 1.9983477614005096e-05, 2.0408357158885337e-05, 9.04602813989186e-07, 5.035493586547091e-07, 1.59017708938336e-05, 1.5989227904356085e-05, 5.32300248323736e-07, 1.2509742646216182e-06, 2.9081844331813045e-05, 3.1682149710832164e-05, 1.4299232589110034e-06, 7.011852289906528e-07, 3.15185752697289e-05, 3.422334702918306e-05, 8.087938567769015e-07, 7.964775431901217e-05, 5.251578477327712e-05, 5.138714186614379e-05, 8.008594159036875e-05, 9.760991088114679e-05, 4.129824446863495e-05, 4.387429362395778e-05, 9.422142466064543e-05, 1.5789506505825557e-05, 2.7106625566375442e-05, 2.906534427893348e-05, 1.683635127847083e-05, 1.0627438314259052e-05, 2.585527727205772e-05, 2.7540118026081473e-05, 1.1448461918917019e-05, 4.9262383981840685e-05, 0.00021458353148773313, 0.0002140799624612555, 4.6725606807740405e-05, 4.127931606490165e-05, 0.0001299676951020956, 0.00013101904187351465, 4.121046731597744e-05, 1.743606844684109e-06, 3.493124677333981e-05, 3.5967095755040646e-05, 1.901621089928085e-06, 2.7937162485613953e-06, 3.151126657030545e-05, 3.266126805101521e-05, 2.826375066433684e-06, 7.074182235555782e-07, 2.8920949262101203e-05, 2.9072349207126535e-05, 8.669560429552803e-07, 8.080678526312113e-07, 2.7483252779347822e-05, 2.675249197636731e-05, 9.515133569948375e-07, 0.00015991553664207458, 3.766631562029943e-05, 3.793861105805263e-05, 0.00016614138439763337, 0.0001507236884208396, 3.713477781275287e-05, 3.8781221519457176e-05, 0.00015274400357156992, 5.372344458010048e-05, 9.360956028103828e-05, 9.789044997887686e-05, 5.784836321254261e-05, 2.6164589144173078e-05, 8.252171392086893e-05, 8.575742685934529e-05, 2.8283220672165044e-05, 2.379599209234584e-05, 6.908703085173329e-07, 7.544057893937861e-07, 2.296855927852448e-05, 1.8405657101538964e-05, 1.0306633839718415e-06, 1.0758084272310953e-06, 1.776330464053899e-05, 3.844401362584904e-05, 4.017223091068445e-06, 3.5885677789337933e-06, 3.883387034875341e-05, 3.121536792605184e-05, 3.27567795466166e-06, 3.3407789032935398e-06, 3.098238448728807e-05, 5.0366590585326776e-05, 3.958227807743242e-06, 3.3973019526456483e-06, 4.968115172232501e-05, 4.6008179197087884e-05, 2.326412413822254e-06, 2.0732704797410406e-06, 4.567075666273013e-05, 9.33438423089683e-05, 9.50303438003175e-05, 9.172539284918457e-05, 9.044481703313068e-05, 7.09503801772371e-05, 9.725021664053202e-05, 9.22109538805671e-05, 6.953517004149035e-05, 5.7132063375320286e-05, 0.00011271332914475352, 0.00010843962081708014, 5.7211709645343944e-05, 7.478769111912698e-05, 0.00012072209210600704, 0.00011660149903036654, 7.40239120204933e-05, 5.963749458715029e-07, 3.21340630762279e-05, 3.4305761801078916e-05, 7.447749226230371e-07, 1.0599520692267106e-06, 2.8412665415089577e-05, 3.111658588750288e-05, 1.1794464853664977e-06, 3.515973730827682e-05, 5.271274403639836e-07, 5.273775514069712e-07, 3.617610127548687e-05, 4.335060657467693e-05, 3.3114989150817564e-07, 3.6263801916902594e-07, 4.522862582234666e-05, 3.688338983920403e-05, 5.7667588407639414e-05, 5.650289313052781e-05, 3.503351399558596e-05, 7.191784970927984e-05, 3.985942748840898e-05, 4.217925379634835e-05, 6.774670328013599e-05, 8.470545435557142e-05, 0.00022046933008823544, 0.0002066808519884944, 8.196205453714356e-05, 0.00010675665544113144, 0.00012018878624076024, 0.00011461091344244778, 0.0001044997334247455, 0.00010763148020487279, 0.00010678513353923336, 0.00010971113078994676, 0.00010491009015822783, 9.928819054039195e-05, 0.00012178243196103722, 0.00012385068112052977, 9.642702207202092e-05, 1.1504734175105114e-05, 8.811111001705285e-06, 8.225454621424433e-06, 1.1661988537525758e-05, 1.8874299712479115e-05, 0.011746448464691639, 0.011881430633366108, 1.9365446860319935e-05, 3.1039409805089235e-05, 0.01104643102735281, 0.0111555689945817, 3.494667907943949e-05, 4.665603773901239e-05, 0.009346614591777325, 0.009475046768784523, 3.8916881749173626e-05, 5.02498987771105e-05, 0.007213188800960779, 0.007363167125731707, 5.629674706142396e-05, 7.109723810572177e-05, 0.005030478350818157, 0.005152884870767593, 6.508886144729331e-05, 8.27993790153414e-05, 0.003045598976314068, 0.003134653903543949, 8.878632070263848e-05, 4.68103498860728e-05, 0.0016695850063115358, 0.001716217608191073, 4.6092027332633734e-05, 7.503974484279752e-05, 0.0007057961774989963, 0.000721720396541059, 7.992346945684403e-05], "data_std": [0.0007307169144041836, 0.0003210606810171157, 0.0011230094823986292, 0.0015447784680873156, 0.005473060067743063, 0.002521494636312127, 0.004430333152413368, 0.002759241033345461, 0.0029954276978969574, 0.0039138589054346085, 0.003946058917790651, 0.0029639722779393196, 0.0036901673302054405, 0.0022726492024958134, 0.003054465865716338, 0.0028112162835896015, 0.0022355616092681885, 0.008127275854349136, 0.0059474166482687, 0.003443390829488635, 0.015109539963304996, 0.008901914581656456, 0.012915768660604954, 0.005337107926607132, 0.05560801923274994, 0.03043641708791256, 0.04996127262711525, 0.033283986151218414, 0.009323634207248688, 0.004857389722019434, 0.006734950467944145, 0.0043371510691940784, 0.003271663561463356, 0.013777948915958405, 0.0025680833496153355, 0.011717312969267368, 0.004482897464185953, 0.006280502304434776, 0.0029694759286940098, 0.004106262698769569, 0.004061713349074125, 0.002442724537104368, 0.0038986955769360065, 0.0022737837862223387, 0.008662566542625427, 0.008706246502697468, 0.00483872601762414, 0.006416661664843559, 0.015193847939372063, 0.004668902140110731, 0.014489530585706234, 0.003821699181571603, 0.003441762877628207, 0.008267894387245178, 0.0019751035142689943, 0.006309836637228727, 0.01610017940402031, 0.013512574136257172, 0.01537794154137373, 0.01165896188467741, 0.005908227991312742, 0.005821043159812689, 0.0034307765308767557, 0.007303180173039436, 0.01838291995227337, 0.01968599297106266, 0.012853550724685192, 0.010353002697229385, 0.001525243278592825, 0.0021546664647758007, 0.0013849640963599086, 0.002217065542936325, 0.011949989944696426, 0.005666246637701988, 0.010721362195909023, 0.007627516053617001, 0.006737316492944956, 0.0029043268878012896, 0.0058807265013456345, 0.002629936207085848, 0.0021926567424088717, 0.003627477679401636, 0.002239361172541976, 0.005197863560169935, 0.004144500941038132, 0.007683131378144026, 0.003948621451854706, 0.01003188081085682, 0.0048589929938316345, 0.011852903291583061, 0.004534698557108641, 0.013317914679646492, 0.005267211701720953, 0.0062438263557851315, 0.00489719258621335, 0.008338747546076775, 0.029600106179714203, 0.011258293874561787, 0.016614975407719612, 0.01034057792276144, 0.0016179172089323401, 0.002647132147103548, 0.001486223074607551, 0.0031946238595992327, 0.011640754528343678, 0.005759137216955423, 0.009051721543073654, 0.004312767647206783, 0.00400180509313941, 0.007349258288741112, 0.002993170637637377, 0.010995466262102127, 0.0047958469949662685, 0.017118019983172417, 0.0040756212547421455, 0.017490331083536148, 0.009693729691207409, 0.007482301443815231, 0.005498822778463364, 0.012220899574458599, 0.034734807908535004, 0.016014285385608673, 0.02719588205218315, 0.02253495529294014, 0.013276693411171436, 0.007207113318145275, 0.013955559581518173, 0.005391492508351803, 0.0058299279771745205, 0.023453235626220703, 0.0037501752376556396, 0.02329682558774948, 0.00893876701593399, 0.0035367265809327364, 0.00749930227175355, 0.0036268471740186214, 0.026457812637090683, 0.010720034129917622, 0.021758977323770523, 0.016667034476995468, 0.009218312799930573, 0.023076120764017105, 0.007387534249573946, 0.026401814073324203, 0.005504315253347158, 0.0033265370875597, 0.005377895198762417, 0.003109786193817854, 0.0014779440825805068, 0.0031578911002725363, 0.0018850993365049362, 0.002646434586495161, 0.011277683079242706, 0.004620187450200319, 0.00969413947314024, 0.007255705073475838, 0.002278067171573639, 0.004158985335379839, 0.0030438306275755167, 0.0030411304906010628, 0.004277267958968878, 0.014195181429386139, 0.0034337001852691174, 0.01649845764040947, 0.006024515721946955, 0.0062799700535833836, 0.004493357613682747, 0.007235000841319561, 0.04812274128198624, 0.02292484976351261, 0.04141586273908615, 0.02517014369368553, 0.00876886211335659, 0.013822460547089577, 0.007918313145637512, 0.010847313329577446, 0.0015161227202042937, 0.006026073358952999, 0.0024341936223208904, 0.0032385450322180986, 0.02429105155169964, 0.016616564244031906, 0.010908236727118492, 0.01959574967622757, 0.014904530718922615, 0.01601048931479454, 0.012186635285615921, 0.01673479564487934, 0.011616358533501625, 0.027133626863360405, 0.021217741072177887, 0.0156666599214077, 0.0025693015195429325, 0.001244277460500598, 0.001755692414008081, 0.0017598456470295787, 0.01920807920396328, 0.011414045467972755, 0.018773095682263374, 0.013376655988395214, 0.007464771158993244, 0.009120574221014977, 0.007743393536657095, 0.007203591521829367, 0.004775338806211948, 0.001466691610403359, 0.0017488173907622695, 0.0034893914125859737, 0.005062044132500887, 0.022234300151467323, 0.006866996176540852, 0.019779022783041, 0.002996795577928424, 0.013543983921408653, 0.00409925589337945, 0.009325654245913029, 0.005551441572606564, 0.020691262558102608, 0.00645480677485466, 0.018362998962402344, 0.018665367737412453, 0.009176881983876228, 0.014624465256929398, 0.016260484233498573, 0.0075840093195438385, 0.007518447935581207, 0.006617654114961624, 0.005503571126610041, 0.00476478086784482, 0.017737535759806633, 0.008872676640748978, 0.01191525999456644, 0.0009932063985615969, 0.0006992408307269216, 0.0008474714122712612, 0.0014242440229281783, 0.0015357935335487127, 0.002627760171890259, 0.001195499557070434, 0.0017520724795758724, 0.02186358906328678, 0.013204146176576614, 0.00306914490647614, 0.004039468709379435, 0.0023627188056707382, 0.004668315406888723, 0.0053970422595739365, 0.004053022246807814, 0.004176941700279713, 0.0033995015546679497, 0.004193483851850033, 0.0033882034476846457, 0.0030575806740671396, 0.0033437127713114023, 0.004741033539175987, 0.002933779265731573, 0.003784699598327279, 0.0023780507035553455, 0.00428546778857708, 0.0020981007255613804, 0.0035688220523297787, 0.0020199560094624758, 0.0023547711316496134, 0.0022868625819683075, 0.002546436619013548, 0.002140217227861285, 0.003749013179913163, 0.004781010095030069, 0.00404894957318902, 0.0034976101014763117, 0.007659839931875467, 0.007730543147772551, 0.004942076280713081, 0.007837343029677868, 0.011569111607968807, 0.005065030883997679, 0.007537743542343378, 0.007738924119621515, 0.008908163756132126, 0.007367806043475866, 0.007245595566928387, 0.007878926582634449, 0.004553146194666624, 0.004486202262341976, 0.004616685677319765, 0.0038103193510323763, 0.005354931112378836, 0.0025832171086221933, 0.004921401850879192, 0.003323951968923211, 0.0043960693292319775, 0.0026610686909407377, 0.002490848768502474, 0.004754093009978533, 0.0030759251676499844, 0.0023644331376999617, 0.0032359189353883266, 0.0026149440091103315, 0.00273522874340415, 0.002482743700966239, 0.002883837092667818, 0.0029342174530029297, 0.006055559031665325, 0.004289426375180483, 0.005903746001422405, 0.0045115090906620026, 0.0039262608624994755, 0.012904698960483074, 0.0042227813974022865, 0.0152514036744833, 0.0023515443317592144, 0.001821812940761447, 0.0016218561213463545, 0.0023323236964643, 0.002421807497739792, 0.0051447381265461445, 0.0024627652019262314, 0.0049845315515995026, 0.0012616353342309594, 0.0003190157294739038, 0.0007745391922071576, 0.0015239244094118476, 0.002548499498516321, 0.0055066789500415325, 0.0028307263273745775, 0.0044471523724496365, 0.004110916517674923, 0.003084686119109392, 0.0030586225911974907, 0.0040922765620052814, 0.002316509373486042, 0.003724833717569709, 0.0028723091818392277, 0.0030417251400649548, 0.008066989481449127, 0.0022870900575071573, 0.0033921650610864162, 0.005978358909487724, 0.00867341086268425, 0.015059541910886765, 0.005539775360375643, 0.012876291759312153, 0.030012745410203934, 0.054351095110177994, 0.032655347138643265, 0.049129877239465714, 0.004816472064703703, 0.009257425554096699, 0.004223871044814587, 0.006622428074479103, 0.014024564996361732, 0.003122886409983039, 0.011914953589439392, 0.002478823298588395, 0.0063804625533521175, 0.00450884411111474, 0.004145885352045298, 0.0029742317274212837, 0.0024556240532547235, 0.004015571903437376, 0.0022782660089433193, 0.0038686736952513456, 0.00875180959701538, 0.00917716883122921, 0.006433613132685423, 0.0050046746619045734, 0.004843920934945345, 0.015417429618537426, 0.003939617425203323, 0.014589602127671242, 0.008372356183826923, 0.003442158456891775, 0.006345784291625023, 0.002034875564277172, 0.013958128169178963, 0.01629272662103176, 0.011943758465349674, 0.015608507208526134, 0.0054959021508693695, 0.005725312978029251, 0.006932090502232313, 0.003306984668597579, 0.019126398488879204, 0.018961571156978607, 0.010030495934188366, 0.013479097746312618, 0.002075954806059599, 0.0015750088496133685, 0.0021779818926006556, 0.0014242564793676138, 0.005699599627405405, 0.012017863802611828, 0.007635423913598061, 0.010897877626121044, 0.002824455965310335, 0.006892126984894276, 0.00262809032574296, 0.005987146403640509, 0.003574930364266038, 0.0022351969964802265, 0.005100342910736799, 0.0022091020364314318, 0.007738012354820967, 0.004110240843147039, 0.010075593367218971, 0.003934633918106556, 0.011788041330873966, 0.004934544209390879, 0.013204805552959442, 0.0045674508437514305, 0.00608558626845479, 0.005368243437260389, 0.008088995702564716, 0.00496950326487422, 0.011087247170507908, 0.028985654935240746, 0.010419024154543877, 0.016344472765922546, 0.002637621248140931, 0.0015661948127672076, 0.00307861203327775, 0.001461937092244625, 0.005803083535283804, 0.01168318185955286, 0.004342800471931696, 0.009129032492637634, 0.007263141684234142, 0.00403943145647645, 0.010917574167251587, 0.0029081825632601976, 0.01750766858458519, 0.0045532346703112125, 0.017829515039920807, 0.0038233718369156122, 0.007447056006640196, 0.00995651725679636, 0.012168807908892632, 0.005648952443152666, 0.01585325039923191, 0.034032031893730164, 0.02208309806883335, 0.026854760944843292, 0.007327204570174217, 0.013262956403195858, 0.0055349403992295265, 0.014053060673177242, 0.023284031078219414, 0.005444078240543604, 0.02317718416452408, 0.003551859874278307, 0.003633814863860607, 0.009013425558805466, 0.0036896243691444397, 0.007622748147696257, 0.01059486623853445, 0.026060601696372032, 0.01638517715036869, 0.02161227911710739, 0.02294233627617359, 0.009034601040184498, 0.0262436680495739, 0.007084839511662722, 0.0033751109149307013, 0.0055502247996628284, 0.0031678308732807636, 0.0053807771764695644, 0.003213465679436922, 0.0013834426645189524, 0.0026910353917628527, 0.001812005415558815, 0.004611939657479525, 0.01153202261775732, 0.007101130671799183, 0.009982248768210411, 0.0041116988286376, 0.0022610765881836414, 0.0029899384826421738, 0.0030828521121293306, 0.014268841594457626, 0.004129239823669195, 0.01660284958779812, 0.0033615485299378633, 0.005971735343337059, 0.006078649312257767, 0.006948748137801886, 0.004456729162484407, 0.02237415872514248, 0.04723680764436722, 0.024495428428053856, 0.04089011251926422, 0.014090917073190212, 0.008690299466252327, 0.011017534881830215, 0.008229476399719715, 0.005945094395428896, 0.001506076310761273, 0.003185389330610633, 0.0023492504842579365, 0.01627114973962307, 0.024845726788043976, 0.019309643656015396, 0.010833298787474632, 0.016119282692670822, 0.015021320432424545, 0.01701372303068638, 0.012084581889212132, 0.02747388742864132, 0.011549263261258602, 0.015561633743345737, 0.021726349368691444, 0.001193499774672091, 0.0025190289597958326, 0.0016925815725699067, 0.0017448639264330268, 0.011396297253668308, 0.02013830468058586, 0.013188067823648453, 0.020135823637247086, 0.0094015933573246, 0.007548466790467501, 0.0075638811103999615, 0.007830316200852394, 0.0014515307266265154, 0.004732223227620125, 0.003426403971388936, 0.001731426571495831, 0.021948888897895813, 0.005159239750355482, 0.019579486921429634, 0.006832980550825596, 0.013336854986846447, 0.0029313028790056705, 0.009210681542754173, 0.003942509647458792, 0.02040712535381317, 0.005443133879452944, 0.018086355179548264, 0.00633248221129179, 0.008962461724877357, 0.018726477399468422, 0.015680888667702675, 0.015063612721860409, 0.0076633780263364315, 0.007281320169568062, 0.005547067150473595, 0.0064807129092514515, 0.01758468709886074, 0.004955335054546595, 0.011785334907472134, 0.009003820829093456, 0.0007082867086865008, 0.0010197859955951571, 0.001394954277202487, 0.0008478217059746385, 0.00256397039629519, 0.0015508076176047325, 0.0017584660090506077, 0.0012341082328930497, 0.013141302391886711, 0.023508790880441666, 0.0038290880620479584, 0.0029595994856208563, 0.0044823503121733665, 0.0022519666235893965, 0.004060888662934303, 0.005346335470676422, 0.0034097875468432903, 0.004168811719864607, 0.0032886352855712175, 0.004084492102265358, 0.0032531905453652143, 0.002989822765812278, 0.0028555486351251602, 0.00478801503777504, 0.0023856996558606625, 0.0038273376412689686, 0.0021657494362443686, 0.004215989727526903, 0.0021122051402926445, 0.0035086253192275763, 0.0022705639712512493, 0.002331563737243414, 0.0020827914122492075, 0.0025961464270949364, 0.004760598763823509, 0.0038502293173223734, 0.0034349774941802025, 0.00431384053081274, 0.0075810919515788555, 0.00789473857730627, 0.00797723513096571, 0.005113183055073023, 0.00508683267980814, 0.011205682530999184, 0.007905139587819576, 0.007340203505009413, 0.007597958669066429, 0.008536523208022118, 0.008134131319820881, 0.006831285078078508, 0.004713527392596006, 0.004490584135055542, 0.003957984037697315, 0.0045736017636954784, 0.0026762480847537518, 0.005402854643762112, 0.0034143414814025164, 0.00501997722312808, 0.002652049995958805, 0.0044934130273759365, 0.004692175425589085, 0.002545346738770604, 0.0022934498265385628, 0.003216593060642481, 0.002520706970244646, 0.0034372685477137566, 0.0024788251612335443, 0.0026314116548746824, 0.0030074892565608025, 0.0028205132111907005, 0.0043281554244458675, 0.006038505118340254, 0.004605707246810198, 0.005852927453815937, 0.012818146497011185, 0.004000090528279543, 0.015285681001842022, 0.004218441899865866, 0.0017331034177914262, 0.0022999371867626905, 0.002232261700555682, 0.001572776003740728, 0.004865011665970087, 0.002352973911911249, 0.004715173505246639, 0.002362860133871436, 0.009659741073846817, 0.011394732631742954, 0.011302173137664795, 0.0098121864721179, 0.006259426940232515, 0.0016138377832248807, 0.0015807395102456212, 0.006217655725777149, 0.00628165528178215, 0.0013362239114940166, 0.0013147607678547502, 0.006296161096543074, 0.0012455056421458721, 0.007401957176625729, 0.007499008905142546, 0.001374675310216844, 0.0011983454460278153, 0.006451183930039406, 0.006466927472501993, 0.0012883475283160806, 0.0008501234115101397, 0.005802018567919731, 0.00573866069316864, 0.0008965563611127436, 0.0009804499568417668, 0.005198454950004816, 0.0051664263010025024, 0.0009571366827003658, 0.008803311735391617, 0.009275619871914387, 0.009282000362873077, 0.008719591423869133, 0.0076644509099423885, 0.010480242781341076, 0.010501362383365631, 0.007487379014492035, 0.005164265166968107, 0.0010569824371486902, 0.0010489017004147172, 0.0053644319996237755, 0.005148261319845915, 0.0008535520755685866, 0.0008330672862939537, 0.005335605703294277, 0.0009027037303894758, 0.004796338267624378, 0.00478943157941103, 0.0008968687034212053, 0.0009692381136119366, 0.004298765677958727, 0.004329849500209093, 0.0010153179755434394, 0.007802209816873074, 0.005591819062829018, 0.0057364823296666145, 0.00762467784807086, 0.0071179368533194065, 0.005880610551685095, 0.005988589022308588, 0.006995030678808689, 0.007953137159347534, 0.014506218023598194, 0.01439257338643074, 0.007814106531441212, 0.009567374363541603, 0.012362156994640827, 0.012121904641389847, 0.009318990632891655, 0.007711861282587051, 0.00920585822314024, 0.009392701089382172, 0.007914634421467781, 0.007968563586473465, 0.009656903333961964, 0.009842856787145138, 0.008178610354661942, 0.0008182502933777869, 0.005823689047247171, 0.005723231937736273, 0.0007785488851368427, 0.0006799690308980644, 0.005942426156252623, 0.005861931014806032, 0.0006697551580145955, 0.00901163462549448, 0.012099800631403923, 0.012129530310630798, 0.008814621716737747, 0.007408865261822939, 0.013107986189424992, 0.01295655407011509, 0.007266897242516279, 0.008217564783990383, 0.00482964189723134, 0.00482279434800148, 0.008347174152731895, 0.0053162118420004845, 0.004108870401978493, 0.003977712243795395, 0.005340076517313719, 0.001305176760070026, 0.005726182367652655, 0.005662696436047554, 0.0012406536843627691, 0.0009416795219294727, 0.006487607955932617, 0.006383040454238653, 0.0009151410195045173, 0.007790220435708761, 0.008309544064104557, 0.008516981266438961, 0.007677947171032429, 0.008681370876729488, 0.008667362853884697, 0.008838096633553505, 0.008604340255260468, 0.006960742175579071, 0.00860933493822813, 0.008266856893897057, 0.006933935452252626, 0.007527835667133331, 0.008480687625706196, 0.008150736801326275, 0.007450214121490717, 0.006971640046685934, 0.0018980056047439575, 0.0018114944687113166, 0.006829902995377779, 0.006280440837144852, 0.0011386352125555277, 0.0010919602354988456, 0.006090379320085049, 0.009127472527325153, 0.0019391118548810482, 0.001726187882013619, 0.009230115450918674, 0.008818699046969414, 0.0022089327685534954, 0.002057397738099098, 0.008902221918106079, 0.009466687217354774, 0.012004938907921314, 0.012096408754587173, 0.009312593378126621, 0.008389820344746113, 0.01298211608082056, 0.012951121665537357, 0.008337782695889473, 0.010576018132269382, 0.006096483673900366, 0.006112236529588699, 0.010303064249455929, 0.009896164759993553, 0.006895394995808601, 0.00694487988948822, 0.009699743241071701, 0.0015052002854645252, 0.007191657554358244, 0.007435341831296682, 0.0015143529744818807, 0.007015806157141924, 0.009205283597111702, 0.009161015972495079, 0.006814080756157637, 0.006821744609624147, 0.008477902039885521, 0.008365390822291374, 0.00672524981200695, 0.006543234921991825, 0.0012963581830263138, 0.0012853369116783142, 0.006405434105545282, 0.0073006716556847095, 0.000715400674380362, 0.00067937868880108, 0.007171716541051865, 0.011970090679824352, 0.013161780312657356, 0.012946751900017262, 0.012290204875171185, 0.014282737858593464, 0.010726508684456348, 0.010384619235992432, 0.01487593725323677, 0.01097018364816904, 0.012042791582643986, 0.01240271795541048, 0.010822860524058342, 0.008991573937237263, 0.012340456247329712, 0.012415653094649315, 0.008955446071922779, 0.01059779990464449, 0.010038639418780804, 0.010191594250500202, 0.010655602440237999, 0.008991597220301628, 0.01181139424443245, 0.011937419883906841, 0.009031851775944233, 0.007874250411987305, 0.010456752963364124, 0.010395546443760395, 0.007900181226432323, 0.00710831955075264, 0.011627432890236378, 0.011588603258132935, 0.007083273492753506, 0.007215877529233694, 0.010417558252811432, 0.010059024207293987, 0.007073032669723034, 0.0068807885982096195, 0.011202794499695301, 0.010908018797636032, 0.0067418720573186874, 0.006698281038552523, 0.011239965446293354, 0.011122387833893299, 0.006542886607348919, 0.006139413453638554, 0.011782512068748474, 0.01170868705958128, 0.005955745931714773, 0.0007680996204726398, 0.005571141839027405, 0.0055166929960250854, 0.0007881268975324929, 0.0007393442210741341, 0.005686479154974222, 0.005643120501190424, 0.000763503136113286, 0.001014343579299748, 0.005807823967188597, 0.005814582575112581, 0.0010254719527438283, 0.0013090533902868629, 0.005192262586206198, 0.005218721926212311, 0.0013114737812429667, 0.008749804459512234, 0.0044583952985703945, 0.0043401154689490795, 0.008420191705226898, 0.0027343372348695993, 0.000861270644236356, 0.0008996699471026659, 0.002689424203708768, 0.0008663808112032712, 0.004620961844921112, 0.004632692784070969, 0.0008602322195656598, 0.0008701900369487703, 0.004313874524086714, 0.004326042719185352, 0.0008769113337621093, 0.012992816977202892, 0.031687721610069275, 0.030183808878064156, 0.013488924130797386, 0.01873895153403282, 0.023395786061882973, 0.02255409210920334, 0.018619708716869354, 0.000749381200876087, 0.00575505755841732, 0.005858089774847031, 0.0007638182723894715, 0.0011177781270816922, 0.005432462785393, 0.00543117243796587, 0.0011894776253029704, 0.0012404329609125853, 0.004286551848053932, 0.00424969382584095, 0.0012552667176350951, 0.0008104278822429478, 0.004947705660015345, 0.004970346577465534, 0.0008453478221781552, 0.005950320512056351, 0.001464120694436133, 0.001461551059037447, 0.005742881912738085, 0.0052556744776666164, 0.0013034450821578503, 0.0013003131607547402, 0.00513231148943305, 0.008019224740564823, 0.0017429650761187077, 0.0016677099047228694, 0.008040585555136204, 0.007136686239391565, 0.002421638695523143, 0.0023714792914688587, 0.007073807530105114, 0.006208346225321293, 0.0010415096767246723, 0.0010606106370687485, 0.006120063364505768, 0.005514994729310274, 0.0014218396972864866, 0.001459387014620006, 0.005501625128090382, 0.0010714043164625764, 0.0044643087312579155, 0.004312236327677965, 0.0010615942301228642, 0.0008034739876165986, 0.004741917364299297, 0.004607167094945908, 0.0008402112871408463, 0.0033999087754637003, 0.0012062538880854845, 0.001218785298988223, 0.003335206303745508, 0.004097178112715483, 0.0006716941716149449, 0.0006915574194863439, 0.004016337916254997, 0.0006056587444618344, 0.003806560765951872, 0.003835798939689994, 0.0005664367927238345, 0.0009368836763314903, 0.003611993510276079, 0.003590574022382498, 0.0009199484484270215, 0.008269639685750008, 0.006965113803744316, 0.0069003053940832615, 0.00814963597804308, 0.007126596290618181, 0.007945986464619637, 0.0078663881868124, 0.007071188185364008, 0.0009465795592404902, 0.004470288287848234, 0.004517560824751854, 0.000951106077991426, 0.0007096120971255004, 0.003987702541053295, 0.003998653031885624, 0.0007295890827663243, 0.0011184696340933442, 0.005392758641391993, 0.005628689657896757, 0.0011957939714193344, 0.0008373680175282061, 0.005614140536636114, 0.005850072484463453, 0.0008993296651169658, 0.008924558758735657, 0.007246777415275574, 0.007168482523411512, 0.008949074894189835, 0.009879772551357746, 0.006426371168345213, 0.0066237673163414, 0.009706771932542324, 0.003973601385951042, 0.005206402391195297, 0.005391228478401899, 0.004103212151676416, 0.003259975230321288, 0.005084808450192213, 0.0052478681318461895, 0.0033835575450211763, 0.007018716540187597, 0.014648670330643654, 0.01463147159665823, 0.0068356129340827465, 0.0064248982816934586, 0.01140033733099699, 0.011446354910731316, 0.006419538054615259, 0.001320457085967064, 0.005910266190767288, 0.005997257307171822, 0.0013789928052574396, 0.0016714413650333881, 0.005613489542156458, 0.005715003702789545, 0.0016811826499179006, 0.0008410816080868244, 0.00537782022729516, 0.005391878075897694, 0.0009311047615483403, 0.00089892593678087, 0.00524244736880064, 0.005172281060367823, 0.0009754554484970868, 0.012645771726965904, 0.006137289106845856, 0.006159432698041201, 0.01288958452641964, 0.012276957742869854, 0.006093831267207861, 0.0062274569645524025, 0.012358964420855045, 0.007329627871513367, 0.009675203822553158, 0.009893960319459438, 0.0076058111153542995, 0.005115133244544268, 0.009084146469831467, 0.009260530583560467, 0.005318196956068277, 0.004878113511949778, 0.0008311860729008913, 0.0008685653447173536, 0.004792552441358566, 0.004290181677788496, 0.0010152158793061972, 0.0010372118558734655, 0.004214653745293617, 0.006200323812663555, 0.0020043011754751205, 0.0018943515606224537, 0.00623168284073472, 0.005587071646004915, 0.0018098833970725536, 0.0018277798080816865, 0.00556618208065629, 0.007096942514181137, 0.0019895294681191444, 0.0018431771313771605, 0.007048485800623894, 0.006782933138310909, 0.0015252581797540188, 0.0014398855855688453, 0.00675801420584321, 0.009661462157964706, 0.009748350828886032, 0.00957733765244484, 0.009510247968137264, 0.00842320453375578, 0.009861552156507969, 0.009602653793990612, 0.008338775485754013, 0.007558575365692377, 0.010616653598845005, 0.010413434356451035, 0.007563842460513115, 0.008647987619042397, 0.010987360961735249, 0.010798217728734016, 0.0086037153378129, 0.0007722531445324421, 0.005668691359460354, 0.005857111886143684, 0.000863003428094089, 0.001029539736919105, 0.005330353043973446, 0.005578224081546068, 0.0010860232869163156, 0.005929564591497183, 0.0007260354468598962, 0.0007262076251208782, 0.006014657206833363, 0.006584117654711008, 0.000575456244405359, 0.0006021943408995867, 0.006725223269313574, 0.0060731698758900166, 0.007593917660415173, 0.007516840472817421, 0.005918911658227444, 0.008480438962578773, 0.006313432473689318, 0.006494555622339249, 0.008230838924646378, 0.009203556925058365, 0.014848209917545319, 0.014376399107277393, 0.009053289890289307, 0.010332311503589153, 0.01096306461840868, 0.010705648921430111, 0.010222511366009712, 0.010374559089541435, 0.01033368892967701, 0.010474308393895626, 0.010242562741041183, 0.009964345954358578, 0.011035507544875145, 0.011128822341561317, 0.009819726459681988, 0.0033918628469109535, 0.0029683515895158052, 0.002868005307391286, 0.0034149654675275087, 0.004344456363469362, 0.10838103294372559, 0.10900197178125381, 0.004400618840008974, 0.005571302492171526, 0.10510200262069702, 0.10561992973089218, 0.005911571439355612, 0.006830522324889898, 0.09667789191007614, 0.09733985364437103, 0.006238339468836784, 0.0070887161418795586, 0.08493049442768097, 0.0858088955283165, 0.0075031160376966, 0.008431917987763882, 0.07092586159706116, 0.07178359478712082, 0.008067767135798931, 0.009099416434764862, 0.05518694594502449, 0.05598798021674156, 0.009422649629414082, 0.006841809023171663, 0.040860556066036224, 0.041427258402109146, 0.006789111066609621, 0.00866254884749651, 0.026566823944449425, 0.026864854618906975, 0.008939992636442184], "label_norm": {}, "label_norm_mm": {}}',"toBytesLE","mouthShrugLower","getBinFileUrl","JWS Payload must be a string",'"spki" must be SPKI formatted string',"leftAmp","mins","getLowBits","merge","filterWithAlpha","parse","maxOccupationTime","isNode","transformY","fromBytesBE","_initializePromise","requestDelimited","rotation","versions","hours","Invalid Compact JWS","shiftRightUnsigned","browOuterUp_R","message","add","readDoubleLE","fixed64","stop","customBinFileUrl","key32Re","multiFaceLandmarks","stream","toHash","algorithm.name","16tHBtks","modelJSON","signature verification failed","_push","_Buffer_allocUnsafe","Compact JWS must be a string or Uint8Array","reset","Uint8Array","1900695YiNQRH","custom","timeout","slice","eyeSquint_R","oneOfSetter","rem_s","secs","__isLong__","starting","RS512","off","minimal","exports","b64","mouthRight","weeks","mozNow","writeFloatLE","Maximum occupation time is exceeded in queue ","height","test","concat","not","4680054JNsNPf","hasOwnProperty"," or ","defineProperty","deriveBits","toJSON","NaN","mouthPress_L","JWTs MUST NOT use unencoded payload","fixed32","secret","includes"," is not supported either by JOSE or your javascript runtime","tail","min",'"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present',"PBES2","dataStream","JWS Protected and JWS Unprotected Header Parameter names must be disjoint","eyeLookIn_R",'"nbf" claim timestamp check failed',"pitch","eyeLookDown_L","createElement","function","header","end","captureStackTrace","low","EdDSA","sec","reason",'JWS "alg" (Algorithm) Header Parameter missing or invalid',"_initialize","object","count","high","ECDH-ES+A192KW","getHighBitsUnsigned","_timeSum","process","avatarDensePredictor","requestAnimationFrame","NODE-ED25519","utf-8","roots","fromString","ERR_JWT_EXPIRED","clearTimeout","BufferReader","CryptoKey does not support this operation","quire","ECDH-ES+A256KW","setTimeout","getHighBits","and","fromCharCode","HMAC","run","replace","setOptions",'{"format": "layers-model", "generatedBy": "keras v2.6.0", "convertedBy": "TensorFlow.js Converter v3.11.0", "modelTopology": {"keras_version": "2.6.0", "backend": "tensorflow", "model_config": {"class_name": "Functional", "config": {"name": "model", "layers": [{"class_name": "InputLayer", "config": {"batch_input_shape": [null, 1266], "dtype": "float32", "sparse": false, "ragged": false, "name": "input_1"}, "name": "input_1", "inbound_nodes": []}, {"class_name": "Dense", "config": {"name": "dense", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense", "inbound_nodes": [[["input_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation", "inbound_nodes": [[["dense", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_1", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_1", "inbound_nodes": [[["activation", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization", "inbound_nodes": [[["dense_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_1", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_1", "inbound_nodes": [[["batch_normalization", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_2", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_2", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_5", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_5", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_8", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_8", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_11", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_11", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_14", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_14", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_2", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_2", "inbound_nodes": [[["dense_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_5", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_5", "inbound_nodes": [[["dense_5", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_8", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_8", "inbound_nodes": [[["dense_8", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_11", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_11", "inbound_nodes": [[["dense_11", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_14", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_14", "inbound_nodes": [[["dense_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "shared", "trainable": true, "dtype": "float32", "units": 96, "activation": "swish", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "shared", "inbound_nodes": [[["activation_2", 0, 0, {}]], [["activation_5", 0, 0, {}]], [["activation_8", 0, 0, {}]], [["activation_11", 0, 0, {}]], [["activation_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_3", "trainable": true, "dtype": "float32", "units": 42, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_3", "inbound_nodes": [[["shared", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_6", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_6", "inbound_nodes": [[["shared", 1, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_9", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_9", "inbound_nodes": [[["shared", 2, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_12", "trainable": true, "dtype": "float32", "units": 72, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_12", "inbound_nodes": [[["shared", 3, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_15", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_15", "inbound_nodes": [[["shared", 4, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_1", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_1", "inbound_nodes": [[["dense_3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_2", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_2", "inbound_nodes": [[["dense_6", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_3", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_3", "inbound_nodes": [[["dense_9", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_4", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_4", "inbound_nodes": [[["dense_12", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_5", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_5", "inbound_nodes": [[["dense_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_3", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_3", "inbound_nodes": [[["batch_normalization_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_6", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_6", "inbound_nodes": [[["batch_normalization_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_9", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_9", "inbound_nodes": [[["batch_normalization_3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_12", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_12", "inbound_nodes": [[["batch_normalization_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_15", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_15", "inbound_nodes": [[["batch_normalization_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_4", "trainable": true, "dtype": "float32", "units": 21, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_4", "inbound_nodes": [[["activation_3", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_7", "trainable": true, "dtype": "float32", "units": 18, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_7", "inbound_nodes": [[["activation_6", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_10", "trainable": true, "dtype": "float32", "units": 24, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_10", "inbound_nodes": [[["activation_9", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_13", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_13", "inbound_nodes": [[["activation_12", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_16", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_16", "inbound_nodes": [[["activation_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_4", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_4", "inbound_nodes": [[["dense_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_7", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_7", "inbound_nodes": [[["dense_7", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_10", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_10", "inbound_nodes": [[["dense_10", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_13", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_13", "inbound_nodes": [[["dense_13", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_16", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_16", "inbound_nodes": [[["dense_16", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "a", "trainable": true, "dtype": "float32", "units": 7, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "a", "inbound_nodes": [[["activation_4", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "b", "trainable": true, "dtype": "float32", "units": 6, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "b", "inbound_nodes": [[["activation_7", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "c", "trainable": true, "dtype": "float32", "units": 8, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "c", "inbound_nodes": [[["activation_10", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "d", "trainable": true, "dtype": "float32", "units": 12, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "d", "inbound_nodes": [[["activation_13", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "e", "trainable": true, "dtype": "float32", "units": 16, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "e", "inbound_nodes": [[["activation_16", 0, 0, {}]]]}], "input_layers": [["input_1", 0, 0]], "output_layers": [["a", 0, 0], ["b", 0, 0], ["c", 0, 0], ["d", 0, 0], ["e", 0, 0]]}}, "training_config": {"loss": {"class_name": "MeanSquaredError", "config": {"reduction": "auto", "name": "mean_squared_error"}}, "metrics": [[{"class_name": "MeanSquaredError", "config": {"name": "a_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "a_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "b_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "b_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "c_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "c_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "d_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "d_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "e_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "e_mean_absolute_error", "dtype": "float32"}}]], "weighted_metrics": null, "loss_weights": null, "optimizer_config": {"class_name": "Adam", "config": {"name": "Adam", "learning_rate": 0.0010000000474974513, "decay": 0.0, "beta_1": 0.8999999761581421, "beta_2": 0.9990000128746033, "epsilon": 1e-07, "amsgrad": false}}}}, "weightsManifest": [{"paths": ["group1-shard1of1.bin"], "weights": [{"name": "a/kernel", "shape": [21, 7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.34152484037805736, "scale": 9.998385162423367e-06, "original_dtype": "float32"}}, {"name": "a/bias", "shape": [7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05245498940348625, "scale": 2.5705616638954565e-06, "original_dtype": "float32"}}, {"name": "b/kernel", "shape": [18, 6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.49812461368150135, "scale": 1.4075292842088198e-05, "original_dtype": "float32"}}, {"name": "b/bias", "shape": [6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05327168479561806, "scale": 3.762704696063729e-06, "original_dtype": "float32"}}, {"name": "batch_normalization/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.6943549513816833, "scale": 4.430730073468549e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.579886580037427, "scale": 7.17555939073447e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2468.1569582629986, "scale": 0.07718779579256313, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 439589.96875, "scale": 51.03764066910811, "original_dtype": "float32"}}, {"name": "batch_normalization_1/gamma", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.24011404812335968, "scale": 1.8985137346817335e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/beta", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.7531593294995136, "scale": 1.1959655887249125e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_mean", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4832.2838959501605, "scale": 0.09189646843051423, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_variance", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1683400.125, "scale": 127.26468108644237, "original_dtype": "float32"}}, {"name": "batch_normalization_2/gamma", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.21489904820919037, "scale": 1.690830133540994e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/beta", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.9055880334267783, "scale": 1.3959182930400135e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_mean", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5010.460415001437, "scale": 0.08848807754801824, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_variance", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1195131.5, "scale": 356.11878385595486, "original_dtype": "float32"}}, {"name": "batch_normalization_3/gamma", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.25988802313804626, "scale": 2.0154197619673844e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/beta", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4214927238326438, "scale": 2.3814587432277496e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_mean", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4516.991902261345, "scale": 0.09553301261074712, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_variance", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1302695.875, "scale": 239.49736972610054, "original_dtype": "float32"}}, {"name": "batch_normalization_4/gamma", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20372924208641052, "scale": 1.2058584442889562e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/beta", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5091016292572021, "scale": 7.333824422545552e-06, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_mean", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5581.663886533228, "scale": 0.13759802505936714, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_variance", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1547579.875, "scale": 266.28256847486074, "original_dtype": "float32"}}, {"name": "batch_normalization_5/gamma", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20020067691802979, "scale": 1.4120464495211178e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/beta", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.0803118545666908, "scale": 1.6702409625335354e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_mean", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5893.203580423688, "scale": 0.15120471020971618, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_variance", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1174690.375, "scale": 252.40655565728238, "original_dtype": "float32"}}, {"name": "c/kernel", "shape": [24, 8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.5177297037499278, "scale": 2.771855910419008e-05, "original_dtype": "float32"}}, {"name": "c/bias", "shape": [8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0011589399073272943, "scale": 2.454352526953003e-06, "original_dtype": "float32"}}, {"name": "d/kernel", "shape": [36, 12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.15260927745549588, "scale": 7.149314974959986e-06, "original_dtype": "float32"}}, {"name": "d/bias", "shape": [12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06730722635984421, "scale": 3.79263997723693e-06, "original_dtype": "float32"}}, {"name": "dense/kernel", "shape": [1266, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -17.766702855722013, "scale": 0.0004408501738349424, "original_dtype": "float32"}}, {"name": "dense/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -32.2838449468545, "scale": 0.0006995567606417149, "original_dtype": "float32"}}, {"name": "dense_1/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -15.679528270048255, "scale": 0.00036315379539670776, "original_dtype": "float32"}}, {"name": "dense_1/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.192216108751227e-05, "scale": 8.993424732360127e-10, "original_dtype": "float32"}}, {"name": "dense_10/kernel", "shape": [48, 24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4914666624994, "scale": 0.00011503602762266674, "original_dtype": "float32"}}, {"name": "dense_10/bias", "shape": [24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4884052329353725, "scale": 6.925375681497543e-05, "original_dtype": "float32"}}, {"name": "dense_11/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.527113251610789, "scale": 0.0003040893041288097, "original_dtype": "float32"}}, {"name": "dense_11/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.077751987095218, "scale": 0.00020590211212421307, "original_dtype": "float32"}}, {"name": "dense_12/kernel", "shape": [96, 72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.040607545991925, "scale": 0.0002703182319122475, "original_dtype": "float32"}}, {"name": "dense_12/bias", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.242119919933536e-05, "scale": 2.699762086386201e-09, "original_dtype": "float32"}}, {"name": "dense_13/kernel", "shape": [72, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.645381233680709, "scale": 0.0001528868824755144, "original_dtype": "float32"}}, {"name": "dense_13/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.1402740888594924, "scale": 4.8027438844681385e-05, "original_dtype": "float32"}}, {"name": "dense_14/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.119709127176868, "scale": 0.00028039937053181863, "original_dtype": "float32"}}, {"name": "dense_14/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.081811899195512, "scale": 0.00027500845124103605, "original_dtype": "float32"}}, {"name": "dense_15/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.011770248267565, "scale": 0.00027143886289962544, "original_dtype": "float32"}}, {"name": "dense_15/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.66976530797628e-05, "scale": 2.967733268261449e-09, "original_dtype": "float32"}}, {"name": "dense_16/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.360003139687646, "scale": 0.0001221625293939203, "original_dtype": "float32"}}, {"name": "dense_16/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.117162990980711, "scale": 6.43648655689071e-05, "original_dtype": "float32"}}, {"name": "dense_2/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.283893973543414, "scale": 0.00023756733727944455, "original_dtype": "float32"}}, {"name": "dense_2/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.288528963516677, "scale": 0.0001738561084689397, "original_dtype": "float32"}}, {"name": "dense_3/kernel", "shape": [96, 42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.805625922701546, "scale": 0.0003913238663926972, "original_dtype": "float32"}}, {"name": "dense_3/bias", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00023975147793200651, "scale": 5.611634629997344e-09, "original_dtype": "float32"}}, {"name": "dense_4/kernel", "shape": [42, 21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.910697617828778, "scale": 9.83204932200824e-05, "original_dtype": "float32"}}, {"name": "dense_4/bias", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.2725718021392822, "scale": 4.936938509521272e-05, "original_dtype": "float32"}}, {"name": "dense_5/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.804166829475978, "scale": 0.000304168831559025, "original_dtype": "float32"}}, {"name": "dense_5/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.093871475057325, "scale": 0.00017886326607153874, "original_dtype": "float32"}}, {"name": "dense_6/kernel", "shape": [96, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.628214164030146, "scale": 0.00023941252645788108, "original_dtype": "float32"}}, {"name": "dense_6/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00018072614102045825, "scale": 5.3396602558783386e-09, "original_dtype": "float32"}}, {"name": "dense_7/kernel", "shape": [36, 18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.399672209062356, "scale": 0.00010582749336273526, "original_dtype": "float32"}}, {"name": "dense_7/bias", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4238353799521228, "scale": 2.524262276977844e-05, "original_dtype": "float32"}}, {"name": "dense_8/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.658081016895599, "scale": 0.0003199952267359894, "original_dtype": "float32"}}, {"name": "dense_8/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.988045453686931, "scale": 0.00010946545492113887, "original_dtype": "float32"}}, {"name": "dense_9/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.9635740770340115, "scale": 0.0002236393629990736, "original_dtype": "float32"}}, {"name": "dense_9/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.43627593902066e-05, "scale": 3.4019985236795956e-09, "original_dtype": "float32"}}, {"name": "e/kernel", "shape": [48, 16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.21210380814900756, "scale": 8.544304227723476e-06, "original_dtype": "float32"}}, {"name": "e/bias", "shape": [16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06371922045946121, "scale": 2.9261341000018006e-06, "original_dtype": "float32"}}, {"name": "shared/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.98148017837316, "scale": 0.0002198997183814514, "original_dtype": "float32"}}, {"name": "shared/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -14.595442970970305, "scale": 0.0005023211374920948, "original_dtype": "float32"}}]}]}',"yawFilter","JWS Unprotected Header incorrect type","beta","asPromise","_stop","buffer","extractable","fromBytesLE","Avatar Webkit: ","noseSneer_R","arraybuffer","ES384","reverse","eyeBlink_R","week","protected","raw","second","setBeta","key","hash","_onPredict","faceMeshCalculator","write","neq","pow","aud","RSASSA-PKCS1-v1_5","domain","isZero","srcObject","noseSneer_L","bezier_x2","transformTune","UZERO","_promiseTry","isString","days","Right","illegal buffer","keys","algorithms"," + ","Invalid clockTolerance option type","webkitNow","ERR_JWS_SIGNATURE_VERIFICATION_FAILED","onResults","PS256","verify","SHA-","Private accessor was defined without a getter","invalid wire type ","mouthUpperUp_L","onPredict","weightData","isLong","create","process.chdir is not supported","getSettings","started","_predictionQuality","cheekSquint_L","readFloatLE","isset","pool","toUnsigned","cheekSquint_R","NODE-","cheekPuff","skipType","substring","node","mouthFunnel","_video","string","HS512","auTuner","Instance","playsInline","mouthSmile_L","begin","zero",'" option must be an array of strings',"sfixed64","decode","paused","Invalid or unsupported EC Key Curve or OKP Key Sub Type","weightsManifest","model","modelMeta","video","bool","emptyObject","modelInitializer","ProtocolError","log","queues","int32","async-lock timed out in queue ","data","bezier_x1","filters","LongBits","lastIndexOf","rotationTune","faceStats","fps","pitchFilter","ctx","global","eyeLookIn_L","payload","compare","Avatar WebKit: API token not set! This could be a configuration mistake, or if you need to sign up for an API token, you can do that here: https://joinhallway.com/sdk/","dcutoff","generatedBy","get","mincutoff","protectedHeader","msNow","ERR_JOSE_ALG_NOT_ALLOWED","0.9.9","setFrequency","mincutoff should be >0","urn:hallway:audience","browDown_L","mouthPucker","muted","getTime","RSA-PSS","undefined","DEFAULT_TIMEOUT","float","hasLastRawValue",' instances for asymmetric algorithms must not be of type "secret"',"weights","decrypt","setTimeout has not been defined","toJSONOptions","Writer","PS512","alg ","convertedBy","fun","sqrt","prototype","byteLength","play","JWS Signature missing or incorrect type","9001650GgveSs","unshift","from","eqz","mouthDimple_R","rightAmp","sfixed32","mouthShrugUpper","bytes","shr","ES256","fromBytes","allocUnsafe","oNow","notEquals","userDefinedMetadata","Module","next","maxTokenAge",'"exp" claim timestamp check failed',"xor",' instances for asymmetric algorithm verifying must be of type "public"',"eyeSquint_L","importKey","_start","toString","DEFAULT_MAX_OCCUPATION_TIME","index out of range: ","eyeWide_L","Left","mouthRollLower","writeBytesBuffer",' instances for asymmetric algorithm decryption must be of type "private"',"unspecified","loadFiltersAndCurvesFromTune","typ","mul","eyeLookDown_R","predictFace","_stream",", or ","bind","Buffer","eyeWide_R","paths","ERR_JOSE_NOT_SUPPORTED","indexOf","hour","toARKitConvention","lessThanOrEqual","radix"];return(a1_0x4794=function(){return e})()}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){var t=a1_0x26cf;try{u(r[t(754)](e))}catch(n){s(n)}}function o(e){var t=a1_0x26cf;try{u(r[t(281)](e))}catch(n){s(n)}}function u(e){var t,r=a1_0x26cf;e[r(287)]?i(e[r(406)]):(t=e.value,t instanceof n?t:new n((function(e){e(t)})))[r(873)](a,o)}u((r=r[a1_0x26cf(869)](e,t||[])).next())}))}function __classPrivateFieldGet(e,t,n,r){var i=a1_0x26cf;if("a"===n&&!r)throw new TypeError(i(638));if("function"==typeof t?e!==t||!r:!t[i(829)](e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r[i(840)](e):r?r.value:t.get(e)}function getDefaultExportFromCjs(e){var t=a1_0x26cf;return e&&e[t(399)]&&Object.prototype[t(527)][t(840)](e,"default")?e.default:e}!function(e,t){for(var n=a1_0x26cf,r=e();;)try{if(825040==parseInt(n(323))/1+-parseInt(n(410))/2+-parseInt(n(834))/3+parseInt(n(494))/4*(parseInt(n(502))/5)+parseInt(n(526))/6*(parseInt(n(808))/7)+-parseInt(n(888))/8*(-parseInt(n(848))/9)+-parseInt(n(737))/10)break;r.push(r.shift())}catch(i){r.push(r.shift())}}(a1_0x4794);var asyncLock={exports:{}},global$1=typeof global!==a1_0x2c401b(718)?global:typeof self!==a1_0x2c401b(718)?self:typeof window!==a1_0x2c401b(718)?window:{};function defaultSetTimout(){throw new Error(a1_0x2c401b(725))}function defaultClearTimeout(){throw new Error(a1_0x2c401b(885))}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){var t=a1_0x2c401b;if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(n){try{return cachedSetTimeout[t(840)](null,e,0)}catch(r){return cachedSetTimeout[t(840)](this,e,0)}}}function runClearTimeout(e){var t=a1_0x2c401b;if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(n){try{return cachedClearTimeout[t(840)](null,e)}catch(r){return cachedClearTimeout[t(840)](this,e)}}}typeof global$1[a1_0x2c401b(579)]===a1_0x2c401b(550)&&(cachedSetTimeout=setTimeout),typeof global$1[a1_0x2c401b(574)]===a1_0x2c401b(550)&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){var e=a1_0x2c401b;draining&&currentQueue&&(draining=!1,currentQueue[e(843)]?queue=currentQueue[e(524)](queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){var e=a1_0x2c401b;if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex][e(584)]();queueIndex=-1,n=queue[e(843)]}currentQueue=null,draining=!1,runClearTimeout(t)}}function nextTick(e){var t=a1_0x2c401b,n=new Array(arguments[t(843)]-1);if(arguments[t(843)]>1)for(var r=1;r<arguments[t(843)];r++)n[r-1]=arguments[r];queue[t(311)](new Item(e,n)),1===queue[t(843)]&&!draining&&runTimeout(drainQueue)}function Item(e,t){var n=a1_0x2c401b;this[n(731)]=e,this[n(868)]=t}Item.prototype[a1_0x2c401b(584)]=function(){var e=a1_0x2c401b;this[e(731)].apply(null,this[e(868)])};var title=a1_0x2c401b(251),platform=a1_0x2c401b(251),browser=!0,env={},argv=[],version$1="",versions={},release={},config={};function noop$1(){}var on=noop$1,addListener=noop$1,once=noop$1,off=noop$1,removeListener=noop$1,removeAllListeners=noop$1,emit=noop$1;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error(a1_0x2c401b(645))}function umask(){return 0}var performance$1=global$1[a1_0x2c401b(438)]||{},performanceNow=performance$1[a1_0x2c401b(892)]||performance$1[a1_0x2c401b(519)]||performance$1[a1_0x2c401b(707)]||performance$1[a1_0x2c401b(750)]||performance$1[a1_0x2c401b(632)]||function(){return(new Date).getTime()};function hrtime(e){var t=a1_0x2c401b,n=.001*performanceNow[t(840)](performance$1),r=Math[t(264)](n),i=Math[t(264)](n%1*1e9);return e&&(r-=e[0],(i-=e[1])<0&&(r--,i+=1e9)),[r,i]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick,title,browser,env,argv,version:version$1,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform,release,config,uptime},AsyncLock$1=function(e){var t=a1_0x2c401b;if(e=e||{},this[t(409)]=e.Promise||Promise,this[t(684)]=Object[t(644)](null),this.domainReentrant=e.domainReentrant||!1,this[t(794)]){if(void 0===process||typeof process[t(616)]===t(718))throw new Error(t(303)+t(326));this[t(376)]=Object[t(644)](null)}this.timeout=e[t(504)]||AsyncLock$1.DEFAULT_TIMEOUT,this[t(471)]=e.maxOccupationTime||AsyncLock$1[t(763)],e[t(440)]===1/0||Number[t(392)](e[t(440)])&&e[t(440)]>=0?this[t(440)]=e[t(440)]:this[t(440)]=AsyncLock$1.DEFAULT_MAX_PENDING};AsyncLock$1[a1_0x2c401b(719)]=0,AsyncLock$1.DEFAULT_MAX_OCCUPATION_TIME=0,AsyncLock$1[a1_0x2c401b(365)]=1e3,AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(792)]=function(e,t,n,r){var i=a1_0x2c401b;if(Array.isArray(e))return this[i(397)](e,t,n,r);if(typeof t!==i(550))throw new Error(i(799));var s=null,a=null,o=null;typeof n!==i(550)&&(r=n,n=null,o=new(this[i(409)])((function(e,t){s=e,a=t}))),r=r||{};var u=!1,l=null,c=null,h=this,d=function(t,r,l){var d=i;c&&(clearTimeout(c),c=null),t&&(!!h[d(684)][e]&&0===h[d(684)][e][d(843)]&&delete h[d(684)][e],h.domainReentrant&&delete h[d(376)][e]),!u&&(o?r?a(r):s(l):typeof n===d(550)&&n(r,l),u=!0),t&&h[d(684)][e]&&h.queues[e][d(843)]>0&&h[d(684)][e].shift()()},p=function(n){var r=i;if(u)return d(n);if(l&&(clearTimeout(l),l=null),h.domainReentrant&&n&&(h[r(376)][e]=process[r(616)]),1===t[r(843)]){var s=!1;t((function(e,t){!s&&(s=!0,d(n,e,t))}))}else h[r(623)]((function(){return t()}))[r(873)]((function(e){d(n,void 0,e)}),(function(e){d(n,e)}))};if(h.domainReentrant&&process[i(616)]&&(p=process[i(616)].bind(p)),h[i(684)][e])if(h.domainReentrant&&process[i(616)]&&process[i(616)]===h.domains[e])p(!1);else if(h.queues[e][i(843)]>=h[i(440)])d(!1,new Error("Too many pending tasks in queue "+e));else{var f=function(){p(!0)};r[i(282)]?h[i(684)][e].unshift(f):h[i(684)][e][i(311)](f);var m=r[i(504)]||h[i(504)];m&&(l=setTimeout((function(){l=null,d(!1,new Error(i(686)+e))}),m))}else h[i(684)][e]=[],p(!0);var g=r.maxOccupationTime||h[i(471)];return g&&(c=setTimeout((function(){h.queues[e]&&d(!1,new Error(i(521)+e))}),g)),o||void 0},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(397)]=function(e,t,n,r){var i=a1_0x2c401b;typeof n!==i(550)&&(r=n,n=null);var s=this,a=t;if(e[i(600)]().forEach((function(e){var t,n;t=e,n=a,a=function(e){s[a1_0x26cf(792)](t,n,e,r)}})),typeof n!==i(550))return new this.Promise((function(e,t){1===a.length?a((function(n,r){n?t(n):e(r)})):e(a())}));a(n)},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(813)]=function(e){var t=a1_0x2c401b;return e?!!this[t(684)][e]:Object[t(628)](this.queues).length>0},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(623)]=function(e){var t=a1_0x2c401b;try{return this.Promise[t(914)](e())}catch(n){return this[t(409)].reject(n)}};var lib=AsyncLock$1,_0x53a39f;_0x53a39f=asyncLock,_0x53a39f[a1_0x2c401b(515)]=lib;var AsyncLock=getDefaultExportFromCjs(asyncLock[a1_0x2c401b(515)]),crypto$1=crypto;const isCryptoKey=e=>e instanceof CryptoKey,encoder=new TextEncoder,decoder=new TextDecoder;function concat(...e){var t=a1_0x2c401b;const n=e[t(375)]((e,{length:t})=>e+t,0),r=new Uint8Array(n);let i=0;return e[t(340)](e=>{var n=t;r[n(298)](e,i),i+=e[n(843)]}),r}const decodeBase64=e=>{var t=a1_0x2c401b;const n=atob(e),r=new Uint8Array(n.length);for(let i=0;i<n[t(843)];i++)r[i]=n[t(404)](i);return r},decode=e=>{var t=a1_0x2c401b;let n=e;n instanceof Uint8Array&&(n=decoder[t(672)](n)),n=n.replace(/-/g,"+").replace(/_/g,"/")[t(585)](/\s/g,"");try{return decodeBase64(n)}catch(r){throw new TypeError(t(839))}};class JOSEError extends Error{constructor(e){var t,n=a1_0x2c401b;super(e),this[n(245)]=n(902),this[n(407)]=this[n(803)][n(407)],null===(t=Error[n(553)])||void 0===t||t.call(Error,this,this[n(803)])}static get[a1_0x2c401b(245)](){return a1_0x2c401b(902)}}class JWTClaimValidationFailed extends JOSEError{constructor(e,t=a1_0x2c401b(770),n=a1_0x2c401b(770)){var r=a1_0x2c401b;super(e),this.code=r(918),this[r(387)]=t,this[r(557)]=n}static get code(){return a1_0x2c401b(918)}}class JWTExpired extends JOSEError{constructor(e,t=a1_0x2c401b(770),n=a1_0x2c401b(770)){var r=a1_0x2c401b;super(e),this[r(245)]=r(573),this.claim=t,this.reason=n}static get[a1_0x2c401b(245)](){return"ERR_JWT_EXPIRED"}}class JOSEAlgNotAllowed extends JOSEError{constructor(){var e=a1_0x2c401b;super(...arguments),this[e(245)]=e(708)}static get[a1_0x2c401b(245)](){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class JOSENotSupported extends JOSEError{constructor(){var e=a1_0x2c401b;super(...arguments),this[e(245)]=e(782)}static get[a1_0x2c401b(245)](){return a1_0x2c401b(782)}}class JWSInvalid extends JOSEError{constructor(){var e=a1_0x2c401b;super(...arguments),this[e(245)]=e(285)}static get[a1_0x2c401b(245)](){return a1_0x2c401b(285)}}class JWTInvalid extends JOSEError{constructor(){var e=a1_0x2c401b;super(...arguments),this[e(245)]=e(447)}static get[a1_0x2c401b(245)](){return a1_0x2c401b(447)}}class JWSSignatureVerificationFailed extends JOSEError{constructor(){var e=a1_0x2c401b;super(...arguments),this.code=e(633),this[e(483)]=e(496)}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function isCloudflareWorkers(){return typeof WebSocketPair===a1_0x2c401b(550)}function isNodeJs(){var e=a1_0x2c401b;try{return void 0!==process[e(478)][e(659)]}catch(t){return!1}}function unusable(e,t=a1_0x2c401b(493)){var n=a1_0x2c401b;return new TypeError(n(293)+t+n(236)+e)}function isAlgorithm(e,t){return e[a1_0x2c401b(407)]===t}function getHashLength(e){var t=a1_0x2c401b;return parseInt(e[t(407)][t(505)](4),10)}function getNamedCurve$1(e){var t=a1_0x2c401b;switch(e){case t(747):return"P-256";case t(599):return"P-384";case t(855):return t(437);default:throw new Error("unreachable")}}function checkUsage(e,t){var n=a1_0x2c401b;if(t[n(843)]&&!t[n(830)](t=>e[n(882)].includes(t))){let e=n(312);if(t[n(843)]>2){const r=t[n(856)]();e+=n(355)+t[n(893)](", ")+n(777)+r+"."}else 2===t[n(843)]?e+=n(355)+t[0]+n(528)+t[1]+".":e+=t[0]+".";throw new TypeError(e)}}function checkSigCryptoKey(e,t,...n){var r=a1_0x2c401b;switch(t){case r(354):case"HS384":case r(663):{if(!isAlgorithm(e[r(434)],"HMAC"))throw unusable("HMAC");const n=parseInt(t.slice(2),10);if(getHashLength(e[r(434)][r(608)])!==n)throw unusable(r(637)+n,r(889));break}case"RS256":case"RS384":case r(512):{if(!isAlgorithm(e[r(434)],"RSASSA-PKCS1-v1_5"))throw unusable(r(615));const n=parseInt(t[r(505)](2),10);if(getHashLength(e.algorithm[r(608)])!==n)throw unusable(r(637)+n,r(889));break}case r(635):case"PS384":case r(728):{if(!isAlgorithm(e.algorithm,r(717)))throw unusable(r(717));const n=parseInt(t[r(505)](2),10);if(getHashLength(e[r(434)][r(608)])!==n)throw unusable("SHA-"+n,r(889));break}case isNodeJs()&&r(555):if(e.algorithm[r(407)]!==r(569)&&e[r(434)][r(407)]!==r(366))throw unusable("NODE-ED25519 or NODE-ED448");break;case isCloudflareWorkers()&&r(555):if(!isAlgorithm(e[r(434)],r(569)))throw unusable(r(569));break;case r(747):case"ES384":case r(855):{if(!isAlgorithm(e[r(434)],r(901)))throw unusable(r(901));const n=getNamedCurve$1(t);if(e[r(434)].namedCurve!==n)throw unusable(n,"algorithm.namedCurve");break}default:throw new TypeError(r(576))}checkUsage(e,n)}crypto$1.getRandomValues[a1_0x2c401b(778)](crypto$1);var invalidKeyInput=(e,...t)=>{var n=a1_0x2c401b;let r=n(874);if(t[n(843)]>2){const e=t.pop();r+="one of type "+t[n(893)](", ")+", or "+e+"."}else 2===t[n(843)]?r+=n(309)+t[0]+n(528)+t[1]+".":r+=n(804)+t[0]+".";return null==e?r+=n(439)+e:typeof e===n(550)&&e[n(407)]?r+=n(915)+e[n(407)]:typeof e===n(560)&&null!=e&&e[n(803)]&&e[n(803)].name&&(r+=" Received an instance of "+e[n(803)][n(407)]),r},isKeyLike=e=>isCryptoKey(e);const types=[a1_0x2c401b(373)],isDisjoint=(...e)=>{var t=a1_0x2c401b;const n=e[t(411)](Boolean);if(0===n.length||1===n[t(843)])return!0;let r;for(const i of n){const e=Object[t(628)](i);if(r&&0!==r.size)for(const n of e){if(r[t(829)](n))return!1;r[t(484)](n)}else r=new Set(e)}return!0};function isObjectLike(e){return"object"==typeof e&&null!==e}function isObject(e){var t=a1_0x2c401b;if(!isObjectLike(e)||Object.prototype[t(762)][t(840)](e)!==t(442))return!1;if(null===Object[t(797)](e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}var checkKeyLength=(e,t)=>{var n=a1_0x2c401b;if(e[n(811)]("RS")||e[n(811)]("PS")){const{modulusLength:r}=t[n(434)];if("number"!=typeof r||r<2048)throw new TypeError(e+n(295))}};const findOid=(e,t,n=0)=>{var r=a1_0x2c401b;0===n&&(t[r(738)](t[r(843)]),t[r(738)](6));let i=e[r(783)](t[0],n);if(-1===i)return!1;const s=e[r(896)](i,i+t.length);return s[r(843)]===t[r(843)]&&(s.every((e,n)=>e===t[n])||findOid(e,t,i+1))},getNamedCurve=e=>{var t=a1_0x2c401b;switch(!0){case findOid(e,[42,134,72,206,61,3,1,7]):return t(332);case findOid(e,[43,129,4,0,34]):return"P-384";case findOid(e,[43,129,4,0,35]):return t(437);case(isCloudflareWorkers()||isNodeJs())&&findOid(e,[43,101,112]):return t(431);case isNodeJs()&&findOid(e,[43,101,113]):return t(343);default:throw new JOSENotSupported(t(674))}},genericImport=async(e,t,n,r,i)=>{var s,a=a1_0x2c401b;let o,u;const l=new Uint8Array(atob(n[a(585)](e,""))[a(449)]("")[a(412)](e=>e.charCodeAt(0))),c="spki"===t;switch(r){case a(635):case a(260):case a(728):o={name:a(717),hash:"SHA-"+r[a(505)](-3)},u=c?[a(636)]:[a(307)];break;case a(827):case"RS384":case a(512):o={name:a(615),hash:a(637)+r[a(505)](-3)},u=c?["verify"]:[a(307)];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case a(426):o={name:a(390),hash:"SHA-"+(parseInt(r.slice(-3),10)||1)},u=c?[a(824),"wrapKey"]:[a(724),"unwrapKey"];break;case a(747):o={name:a(901),namedCurve:"P-256"},u=c?[a(636)]:[a(307)];break;case a(599):o={name:a(901),namedCurve:"P-384"},u=c?[a(636)]:[a(307)];break;case a(855):o={name:a(901),namedCurve:"P-521"},u=c?[a(636)]:["sign"];break;case"ECDH-ES":case a(371):case a(563):case a(578):o={name:"ECDH",namedCurve:getNamedCurve(l)},u=c?[]:[a(530)];break;case(isCloudflareWorkers()||isNodeJs())&&a(555):const e=getNamedCurve(l)[a(378)]();o={name:"NODE-"+e,namedCurve:a(655)+e},u=c?[a(636)]:[a(307)];break;default:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value')}return crypto$1[a(334)].importKey(t,l,o,null!==(s=null==i?void 0:i[a(594)])&&void 0!==s&&s,u)},fromSPKI=(e,t,n)=>genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,a1_0x2c401b(793),e,t,n);async function importSPKI(e,t,n){var r=a1_0x2c401b;if(typeof e!==r(662)||0!==e[r(783)](r(870)))throw new TypeError(r(464));return fromSPKI(e,t,n)}const symmetricTypeCheck=e=>{var t=a1_0x2c401b;if(!(e instanceof Uint8Array)){if(!isKeyLike(e))throw new TypeError(invalidKeyInput(e,...types,t(501)));if(e[t(846)]!==t(536))throw new TypeError(types[t(893)](" or ")+t(881))}},asymmetricTypeCheck=(e,t)=>{var n=a1_0x2c401b;if(!isKeyLike(e))throw new TypeError(invalidKeyInput(e,...types));if(e[n(846)]===n(536))throw new TypeError(types[n(893)](n(528))+n(722));if(t===n(307)&&"public"===e[n(846)])throw new TypeError(types[n(893)](n(528))+' instances for asymmetric algorithm signing must be of type "private"');if("decrypt"===t&&e[n(846)]===n(369))throw new TypeError(types[n(893)](n(528))+n(769));if(e[n(434)]&&t===n(636)&&e[n(846)]===n(858))throw new TypeError(types[n(893)](n(528))+n(758));if(e[n(434)]&&"encrypt"===t&&e.type===n(858))throw new TypeError(types[n(893)](n(528))+n(361))},checkKeyType=(e,t,n)=>{var r=a1_0x2c401b;e.startsWith("HS")||e===r(364)||e.startsWith(r(542))||/^A\d{3}(?:GCM)?KW$/[r(523)](e)?symmetricTypeCheck(t):asymmetricTypeCheck(t,n)};function validateCrit(e,t,n,r,i){var s=a1_0x2c401b;if(void 0!==i[s(807)]&&void 0===r[s(807)])throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r[s(807)])return new Set;if(!Array[s(812)](r[s(807)])||0===r[s(807)][s(843)]||r[s(807)].some(e=>typeof e!==s(662)||0===e[s(843)]))throw new e(s(541));let a;a=void 0!==n?new Map([...Object[s(400)](n),...t[s(400)]()]):t;for(const o of r[s(807)]){if(!a.has(o))throw new JOSENotSupported(s(429)+o+s(275));if(void 0===i[o])throw new e(s(429)+o+s(887));if(a.get(o)&&void 0===r[o])throw new e(s(429)+o+s(865))}return new Set(r[s(807)])}const validateAlgorithms=(e,t)=>{var n=a1_0x2c401b;if(void 0!==t&&(!Array.isArray(t)||t[n(830)](e=>typeof e!==n(662))))throw new TypeError('"'+e+n(670));if(t)return new Set(t)};function subtleDsa(e,t){var n=a1_0x2c401b;const r=n(637)+e[n(505)](-3);switch(e){case n(354):case n(911):case n(663):return{hash:r,name:n(583)};case n(635):case n(260):case"PS512":return{hash:r,name:n(717),saltLength:e.slice(-3)>>3};case n(827):case n(394):case n(512):return{hash:r,name:n(615)};case n(747):case"ES384":case n(855):return{hash:r,name:n(901),namedCurve:t.namedCurve};case(isCloudflareWorkers()||isNodeJs())&&n(555):const{namedCurve:i}=t;return{name:i,namedCurve:i};default:throw new JOSENotSupported(n(729)+e+n(538))}}function getCryptoKey(e,t,n){var r=a1_0x2c401b;if(isCryptoKey(t))return checkSigCryptoKey(t,e,n),t;if(t instanceof Uint8Array){if(!e[r(811)]("HS"))throw new TypeError(invalidKeyInput(t,...types));return crypto$1[r(334)][r(760)](r(604),t,{hash:r(637)+e[r(505)](-3),name:"HMAC"},!1,[n])}throw new TypeError(invalidKeyInput(t,...types,"Uint8Array"))}const verify=async(e,t,n,r)=>{var i=a1_0x2c401b;const s=await getCryptoKey(e,t,i(636));checkKeyLength(e,s);const a=subtleDsa(e,s[i(434)]);try{return await crypto$1[i(334)][i(636)](a,s,n,r)}catch(o){return!1}};async function flattenedVerify(e,t,n){var r,i=a1_0x2c401b;if(!isObject(e))throw new JWSInvalid("Flattened JWS must be an object");if(void 0===e[i(603)]&&void 0===e[i(551)])throw new JWSInvalid(i(393));if(void 0!==e[i(603)]&&typeof e[i(603)]!==i(662))throw new JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new JWSInvalid("JWS Payload missing");if(typeof e[i(269)]!==i(662))throw new JWSInvalid(i(736));if(void 0!==e[i(551)]&&!isObject(e[i(551)]))throw new JWSInvalid(i(589));let s={};if(e[i(603)]){const t=decode(e.protected);try{s=JSON.parse(decoder.decode(t))}catch(m){throw new JWSInvalid("JWS Protected Header is invalid")}}if(!isDisjoint(s,e[i(551)]))throw new JWSInvalid(i(544));const a={...s,...e[i(551)]};let o=!0;if(validateCrit(JWSInvalid,new Map([[i(516),!0]]),null==n?void 0:n[i(807)],s,a)[i(829)]("b64")&&(o=s[i(516)],typeof o!==i(867)))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:u}=a;if(typeof u!==i(662)||!u)throw new JWSInvalid(i(558));const l=n&&validateAlgorithms(i(629),n[i(629)]);if(l&&!l[i(829)](u))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(o){if(typeof e.payload!==i(662))throw new JWSInvalid(i(463))}else if(typeof e.payload!==i(662)&&!(e.payload instanceof Uint8Array))throw new JWSInvalid(i(277));let c=!1;typeof t===i(550)&&(t=await t(s,e),c=!0),checkKeyType(u,t,i(636));const h=concat(encoder[i(819)](null!==(r=e.protected)&&void 0!==r?r:""),encoder[i(819)]("."),typeof e.payload===i(662)?encoder.encode(e[i(699)]):e[i(699)]),d=decode(e[i(269)]);if(!(await verify(u,t,d,h)))throw new JWSSignatureVerificationFailed;let p;p=o?decode(e.payload):"string"==typeof e[i(699)]?encoder[i(819)](e.payload):e.payload;const f={payload:p};return void 0!==e[i(603)]&&(f[i(706)]=s),void 0!==e[i(551)]&&(f[i(413)]=e[i(551)]),c?{...f,key:t}:f}async function compactVerify(e,t,n){var r=a1_0x2c401b;if(e instanceof Uint8Array&&(e=decoder[r(672)](e)),"string"!=typeof e)throw new JWSInvalid(r(499));const{0:i,1:s,2:a,length:o}=e.split(".");if(3!==o)throw new JWSInvalid(r(480));const u=await flattenedVerify({payload:s,protected:i,signature:a},t,n),l={payload:u[r(699)],protectedHeader:u.protectedHeader};return typeof t===r(550)?{...l,key:u[r(607)]}:l}var epoch=e=>Math[a1_0x2c401b(264)](e[a1_0x2c401b(716)]()/1e3);const minute=60,hour=60*minute,day=24*hour,week=7*day,year=365.25*day,REGEX=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var secs=e=>{var t=a1_0x2c401b;const n=REGEX.exec(e);if(!n)throw new TypeError(t(344));const r=parseFloat(n[1]);switch(n[2][t(300)]()){case t(556):case t(509):case t(605):case t(315):case"s":return Math[t(448)](r);case t(329):case"minutes":case"min":case t(466):case"m":return Math[t(448)](r*minute);case t(784):case t(479):case"hr":case"hrs":case"h":return Math[t(448)](r*hour);case"day":case t(625):case"d":return Math[t(448)](r*day);case t(602):case t(518):case"w":return Math[t(448)](r*week);default:return Math[t(448)](r*year)}};const normalizeTyp=e=>e.toLowerCase()[a1_0x2c401b(585)](/^application\//,""),checkAudiencePresence=(e,t)=>{var n=a1_0x2c401b;return typeof e===n(662)?t[n(537)](e):!!Array.isArray(e)&&t[n(830)](Set.prototype[n(829)].bind(new Set(e)))};var jwtPayload=(e,t,n={})=>{var r=a1_0x2c401b;const{typ:i}=n;if(i&&("string"!=typeof e[r(772)]||normalizeTyp(e[r(772)])!==normalizeTyp(i)))throw new JWTClaimValidationFailed(r(810),r(772),r(271));let s;try{s=JSON[r(470)](decoder[r(672)](t))}catch(d){}if(!isObject(s))throw new JWTInvalid(r(920));const{issuer:a}=n;if(a&&!(Array.isArray(a)?a:[a])[r(537)](s[r(854)]))throw new JWTClaimValidationFailed('unexpected "iss" claim value',r(854),"check_failed");const{subject:o}=n;if(o&&s.sub!==o)throw new JWTClaimValidationFailed(r(391),"sub","check_failed");const{audience:u}=n;if(u&&!checkAudiencePresence(s[r(614)],typeof u===r(662)?[u]:u))throw new JWTClaimValidationFailed('unexpected "aud" claim value',r(614),"check_failed");let l;switch(typeof n[r(916)]){case r(662):l=secs(n[r(916)]);break;case"number":l=n[r(916)];break;case r(718):l=0;break;default:throw new TypeError(r(631))}const{currentDate:c}=n,h=epoch(c||new Date);if((void 0!==s[r(313)]||n[r(755)])&&typeof s[r(313)]!==r(418))throw new JWTClaimValidationFailed(r(805),r(313),r(876));if(void 0!==s[r(866)]){if("number"!=typeof s[r(866)])throw new JWTClaimValidationFailed('"nbf" claim must be a number',r(866),r(876));if(s[r(866)]>h+l)throw new JWTClaimValidationFailed(r(546),r(866),r(271))}if(void 0!==s[r(322)]){if(typeof s[r(322)]!==r(418))throw new JWTClaimValidationFailed(r(820),r(322),r(876));if(s[r(322)]<=h-l)throw new JWTExpired(r(756),r(322),r(271))}if(n[r(755)]){const e=h-s[r(313)];if(e-l>("number"==typeof n.maxTokenAge?n[r(755)]:secs(n[r(755)])))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat",r(271));if(e<0-l)throw new JWTClaimValidationFailed(r(898),r(313),r(271))}return s};async function jwtVerify(e,t,n){var r,i=a1_0x2c401b;const s=await compactVerify(e,t,n);if((null===(r=s.protectedHeader[i(807)])||void 0===r?void 0:r[i(537)](i(516)))&&!1===s[i(706)][i(516)])throw new JWTInvalid(i(534));const a={payload:jwtPayload(s[i(706)],s[i(699)],n),protectedHeader:s[i(706)]};return typeof t===i(550)?{...a,key:s[i(607)]}:a}var version=a1_0x2c401b(709);function extent(e){let t=1/0,n=-1/0;for(let r=0;r<e.length;r++){const i=e[r];i<t&&(t=i),i>n&&(n=i)}return[t,n]}function scaleLinear(e,t,n){return(e-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0]}function computeFeature_dot(e,t,n){const r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],i=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.c)(r,i)}function getTriDotFeatures(e,t,n,r,i){var s=a1_0x2c401b;const a=[];for(let o=0;o<t[s(843)]/3;o++){const u=[t[3*o],t[3*o+1],t[3*o+2]],l=e[u[0]],c=e[u[1]],h=e[u[2]],d=computeFeature_dot(l,c,h),p=computeFeature_dot(l,h,c),f=(d-n[i+2*o])/r[i+2*o],m=(p-n[i+2*o+1])/r[i+2*o+1];a[s(311)](f),a[s(311)](m)}return a}function normalizePoints(e){var t=a1_0x2c401b;let n=[0,0],r=[0,0],i=[0,0];if(e[t(843)]>0){const s=e[0][t(843)],a=2;n=extent(e[t(412)](e=>e?e[0]:0)),r=extent(e[t(412)](e=>e?e[1]:0)),3===s&&(i=extent(e[t(412)](e=>e?e[2]:0)));const o=e=>Math[t(258)](e[1]-e[0]),u=o(n),l=o(r),c=o(i),h=Math[t(306)](u,l,c),d=a/2,p=(e,t)=>[e/h*-t,t*(e/h)],f=p(u,d),m=p(l,d),g=p(c,d),y=new Array(e[t(843)]);for(let v=0;v<e[t(843)];v++){const t=e[v],a=scaleLinear(t[0],n,f),o=scaleLinear(t[1],r,m);let u=0;3===s&&(u=scaleLinear(t[2],i,g)||0),y[v]=[a,o,u]}return y}return[]}function findRotation(e,t,n,r){const i=e[t],s=e[n],a=[(i[0]+s[0])/2,i[1],i[2]],o=e[r];let u=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.f)(i,s);u=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.b)(u,Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.e)(u));let l=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.f)(a,o);l=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.b)(l,Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.e)(l));const c=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.a)(u,l);return rotationMatrixToEulerAngles(Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.d)([u,l,c]).toArray())}function findTransform(e,t){const n=e[t];return{x:n.x-.5,y:.5-n.y,z:20*-n.z-1}}function rotationMatrixToEulerAngles(e){var t=a1_0x2c401b;const n=Math[t(732)](Math[t(613)](e[0][0],2)+Math[t(613)](e[1][0],2));let r=0,i=0,s=0;return n<1e-6?(r=Math[t(823)](-e[1][2],e[1][1]),i=Math[t(823)](-e[2][0],n),s=0):(r=Math[t(823)](e[2][1],e[2][2]),i=Math[t(823)](-e[2][0],n),s=Math[t(823)](e[1][0],-e[0][0])),{pitch:r,yaw:i,roll:s}}const fetchJSON=e=>__awaiter(void 0,void 0,void 0,(function*(){return(yield axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(e)).data}));class JSONHandler{constructor(e,t){var n=a1_0x2c401b;this.modelJSON=e,this[n(364)]=t}load(){return __awaiter(this,void 0,void 0,(function*(){var e=a1_0x26cf;const t=this[e(495)],n={modelTopology:t.modelTopology,format:t[e(450)],generatedBy:t[e(703)],convertedBy:t[e(730)]};if(null!=t.signature&&(n.signature=t.signature),null!=t[e(752)]&&(n.userDefinedMetadata=t[e(752)]),null!=t[e(681)]&&(n[e(681)]=t[e(681)]),null!=t[e(675)]){const[r,i]=yield loadWeights(t[e(675)],this[e(364)]);n[e(379)]=r,n[e(642)]=i}return null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}))}}function loadWeights(e,t){return __awaiter(this,void 0,void 0,(function*(){var n=a1_0x26cf;const r=[],i=[];for(const s of e){for(const e of s[n(781)]){const i=t+e,s=yield(yield axios__WEBPACK_IMPORTED_MODULE_1___default.a[n(704)](i,{responseType:n(598),withCredentials:!1})).data;r[n(311)](s)}i.push(...s[n(723)])}return[i,concatenateArrayBuffers(r)]}))}function concatenateArrayBuffers(e){var t=a1_0x2c401b;if(1===e[t(843)])return e[0];let n=0;e[t(340)](e=>{n+=e[t(734)]});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{r.set(new Uint8Array(e),i),i+=e.byteLength}),r[t(593)]}class LowPassFilter{[a1_0x2c401b(836)](e){var t=a1_0x2c401b;(e<=0||e>1)&&console[t(683)](t(456)+e),this.a=e}constructor(e,t=0){var n=a1_0x2c401b;this.y=this.s=t,this[n(836)](e),this[n(852)]=!1}[a1_0x2c401b(411)](e){var t;return this.initialized?t=this.a*e+(1-this.a)*this.s:(t=e,this[a1_0x2c401b(852)]=!0),this.y=e,this.s=t,t}[a1_0x2c401b(469)](e,t){return this[a1_0x2c401b(836)](t),this.filter(e)}hasLastRawValue(){return this[a1_0x2c401b(852)]}lastRawValue(){return this.y}reset(){this[a1_0x2c401b(852)]=!1}}class OneEuroFilter{[a1_0x2c401b(320)](e){var t=1/this[a1_0x2c401b(425)];return 1/(1+1/(2*Math.PI*e)/t)}[a1_0x2c401b(710)](e){e<=0&&console.log("freq should be >0"),this.freq=e}[a1_0x2c401b(816)](e){var t=a1_0x2c401b;e<=0&&console[t(683)](t(711)),this[t(705)]=e}[a1_0x2c401b(606)](e){this[a1_0x2c401b(389)]=e}[a1_0x2c401b(458)](e){var t=a1_0x2c401b;e<=0&&console[t(683)](t(862)),this[t(702)]=e}constructor(e,t=1,n=0,r=1){var i=a1_0x2c401b;this.setFrequency(e),this.setMinCutoff(t),this[i(606)](n),this[i(458)](r),this.x=new LowPassFilter(this[i(320)](t)),this.dx=new LowPassFilter(this[i(320)](r)),this[i(368)]=void 0}[a1_0x2c401b(500)](){var e=a1_0x2c401b;this.x[e(500)](),this.dx[e(500)](),this[e(368)]=void 0}filter(e,t){var n=a1_0x2c401b;void 0!==this[n(368)]&&void 0!==t&&(this.freq=1/(t-this[n(368)])),this.lasttime=t;var r=this.x[n(721)]()?(e-this.x[n(906)]())*this[n(425)]:0,i=this.dx[n(469)](r,this.alpha(this[n(702)])),s=this[n(705)]+this[n(389)]*Math[n(258)](i);return this.x.filterWithAlpha(e,this[n(320)](s))}}class BlendShapeFactory{constructor(){}static[a1_0x2c401b(644)]({browDown_L:e=0,browDown_R:t=0,browInnerUp:n=0,browOuterUp_L:r=0,browOuterUp_R:i=0,cheekSquint_L:s=0,cheekSquint_R:a=0,eyeBlink_L:o=0,eyeBlink_R:u=0,eyeLookDown_L:l=0,eyeLookDown_R:c=0,eyeLookIn_L:h=0,eyeLookIn_R:d=0,eyeLookOut_L:p=0,eyeLookOut_R:f=0,eyeLookUp_L:m=0,eyeLookUp_R:g=0,eyeSquint_L:y=0,eyeSquint_R:v=0,eyeWide_L:b=0,eyeWide_R:_=0,jawLeft:x=0,jawOpen:w=0,jawRight:S=0,mouthClose:E=0,mouthDimple_L:C=0,mouthDimple_R:k=0,mouthFrown_L:T=0,mouthFrown_R:A=0,mouthFunnel:M=0,mouthLeft:N=0,mouthLowerDown_L:I=0,mouthLowerDown_R:D=0,mouthPress_L:R=0,mouthPress_R:L=0,mouthPucker:O=0,mouthRight:F=0,mouthRollLower:P=0,mouthRollUpper:z=0,mouthShrugLower:$=0,mouthShrugUpper:B=0,mouthSmile_L:U=0,mouthSmile_R:V=0,mouthStretch_L:W=0,mouthStretch_R:H=0,mouthUpperUp_L:G=0,mouthUpperUp_R:j=0,noseSneer_L:q=0,noseSneer_R:K=0,cheekPuff:X=0,jawForward:Z=0,tongueOut:Y=0}={}){return{browDown_L:e,browDown_R:t,browInnerUp:n,browOuterUp_L:r,browOuterUp_R:i,cheekSquint_L:s,cheekSquint_R:a,eyeBlink_L:o,eyeBlink_R:u,eyeLookDown_L:l,eyeLookDown_R:c,eyeLookIn_L:h,eyeLookIn_R:d,eyeLookOut_L:p,eyeLookOut_R:f,eyeLookUp_L:m,eyeLookUp_R:g,eyeSquint_L:y,eyeSquint_R:v,eyeWide_L:b,eyeWide_R:_,jawLeft:x,jawOpen:w,jawRight:S,mouthClose:E,mouthDimple_L:C,mouthDimple_R:k,mouthFrown_L:T,mouthFrown_R:A,mouthFunnel:M,mouthLeft:N,mouthLowerDown_L:I,mouthLowerDown_R:D,mouthPress_L:R,mouthPress_R:L,mouthPucker:O,mouthRight:F,mouthRollLower:P,mouthRollUpper:z,mouthShrugLower:$,mouthShrugUpper:B,mouthSmile_L:U,mouthSmile_R:V,mouthStretch_L:W,mouthStretch_R:H,mouthUpperUp_L:G,mouthUpperUp_R:j,noseSneer_L:q,noseSneer_R:K,cheekPuff:X,jawForward:Z,tongueOut:Y}}}class BlendShapeKeys{constructor(){}static[a1_0x2c401b(785)](e){var t=a1_0x2c401b;return e.endsWith("_L")?e[t(658)](0,e[t(691)]("_L"))[t(524)](t(766)):e[t(296)]("_R")?e[t(658)](0,e.lastIndexOf("_R"))[t(524)]("Right"):e}static fromARKitConvention(e){var t=a1_0x2c401b;return[t(826),"jawRight","mouthLeft","mouthRight"].includes(e)?e:e[t(296)](t(766))?e[t(658)](0,e[t(691)](t(766)))[t(524)]("_L"):e[t(296)](t(626))?e.substring(0,e.lastIndexOf("Right"))[t(524)]("_R"):e}}BlendShapeKeys[a1_0x2c401b(561)]=52,BlendShapeKeys[a1_0x2c401b(713)]="browDown_L",BlendShapeKeys[a1_0x2c401b(254)]=a1_0x2c401b(254),BlendShapeKeys.browInnerUp=a1_0x2c401b(257),BlendShapeKeys.browOuterUp_L=a1_0x2c401b(358),BlendShapeKeys[a1_0x2c401b(482)]=a1_0x2c401b(482),BlendShapeKeys[a1_0x2c401b(656)]=a1_0x2c401b(656),BlendShapeKeys.cheekSquint_L="cheekSquint_L",BlendShapeKeys[a1_0x2c401b(654)]=a1_0x2c401b(654),BlendShapeKeys.eyeBlink_L=a1_0x2c401b(828),BlendShapeKeys.eyeBlink_R=a1_0x2c401b(601),BlendShapeKeys[a1_0x2c401b(548)]=a1_0x2c401b(548),BlendShapeKeys[a1_0x2c401b(774)]=a1_0x2c401b(774),BlendShapeKeys[a1_0x2c401b(698)]="eyeLookIn_L",BlendShapeKeys[a1_0x2c401b(545)]=a1_0x2c401b(545),BlendShapeKeys[a1_0x2c401b(357)]=a1_0x2c401b(357),BlendShapeKeys[a1_0x2c401b(345)]="eyeLookOut_R",BlendShapeKeys[a1_0x2c401b(242)]=a1_0x2c401b(242),BlendShapeKeys[a1_0x2c401b(907)]="eyeLookUp_R",BlendShapeKeys[a1_0x2c401b(759)]=a1_0x2c401b(759),BlendShapeKeys[a1_0x2c401b(506)]="eyeSquint_R",BlendShapeKeys.eyeWide_L=a1_0x2c401b(765),BlendShapeKeys[a1_0x2c401b(780)]=a1_0x2c401b(780),BlendShapeKeys.jawForward=a1_0x2c401b(250),BlendShapeKeys.jawLeft="jawLeft",BlendShapeKeys[a1_0x2c401b(917)]="jawOpen",BlendShapeKeys[a1_0x2c401b(330)]="jawRight",BlendShapeKeys[a1_0x2c401b(333)]=a1_0x2c401b(333),BlendShapeKeys[a1_0x2c401b(336)]=a1_0x2c401b(336),BlendShapeKeys[a1_0x2c401b(741)]=a1_0x2c401b(741),BlendShapeKeys[a1_0x2c401b(291)]=a1_0x2c401b(291),BlendShapeKeys[a1_0x2c401b(923)]="mouthFrown_R",BlendShapeKeys[a1_0x2c401b(660)]=a1_0x2c401b(660),BlendShapeKeys[a1_0x2c401b(788)]=a1_0x2c401b(788),BlendShapeKeys[a1_0x2c401b(237)]="mouthLowerDown_L",BlendShapeKeys.mouthLowerDown_R="mouthLowerDown_R",BlendShapeKeys[a1_0x2c401b(533)]=a1_0x2c401b(533),BlendShapeKeys.mouthPress_R=a1_0x2c401b(246),BlendShapeKeys[a1_0x2c401b(714)]="mouthPucker",BlendShapeKeys[a1_0x2c401b(517)]="mouthRight",BlendShapeKeys[a1_0x2c401b(767)]="mouthRollLower",BlendShapeKeys[a1_0x2c401b(905)]="mouthRollUpper",BlendShapeKeys.mouthShrugLower=a1_0x2c401b(461),BlendShapeKeys[a1_0x2c401b(744)]=a1_0x2c401b(744),BlendShapeKeys.mouthSmile_L=a1_0x2c401b(667),BlendShapeKeys.mouthSmile_R=a1_0x2c401b(276),BlendShapeKeys[a1_0x2c401b(302)]=a1_0x2c401b(302),BlendShapeKeys[a1_0x2c401b(831)]=a1_0x2c401b(831),BlendShapeKeys.mouthUpperUp_L=a1_0x2c401b(640),BlendShapeKeys[a1_0x2c401b(362)]="mouthUpperUp_R",BlendShapeKeys.noseSneer_L="noseSneer_L",BlendShapeKeys.noseSneer_R=a1_0x2c401b(597),BlendShapeKeys[a1_0x2c401b(428)]="tongueOut",BlendShapeKeys[a1_0x2c401b(319)]=[BlendShapeKeys.browDown_L,BlendShapeKeys[a1_0x2c401b(254)],BlendShapeKeys.browInnerUp,BlendShapeKeys[a1_0x2c401b(358)],BlendShapeKeys[a1_0x2c401b(482)],BlendShapeKeys[a1_0x2c401b(656)],BlendShapeKeys[a1_0x2c401b(649)],BlendShapeKeys.cheekSquint_R,BlendShapeKeys[a1_0x2c401b(828)],BlendShapeKeys[a1_0x2c401b(601)],BlendShapeKeys.eyeLookDown_L,BlendShapeKeys.eyeLookDown_R,BlendShapeKeys[a1_0x2c401b(698)],BlendShapeKeys[a1_0x2c401b(545)],BlendShapeKeys.eyeLookOut_L,BlendShapeKeys[a1_0x2c401b(345)],BlendShapeKeys.eyeLookUp_L,BlendShapeKeys[a1_0x2c401b(907)],BlendShapeKeys[a1_0x2c401b(759)],BlendShapeKeys[a1_0x2c401b(506)],BlendShapeKeys[a1_0x2c401b(765)],BlendShapeKeys[a1_0x2c401b(780)],BlendShapeKeys[a1_0x2c401b(250)],BlendShapeKeys[a1_0x2c401b(826)],BlendShapeKeys[a1_0x2c401b(917)],BlendShapeKeys[a1_0x2c401b(330)],BlendShapeKeys[a1_0x2c401b(333)],BlendShapeKeys[a1_0x2c401b(336)],BlendShapeKeys.mouthDimple_R,BlendShapeKeys[a1_0x2c401b(291)],BlendShapeKeys[a1_0x2c401b(923)],BlendShapeKeys.mouthFunnel,BlendShapeKeys[a1_0x2c401b(788)],BlendShapeKeys.mouthLowerDown_L,BlendShapeKeys.mouthLowerDown_R,BlendShapeKeys.mouthPress_L,BlendShapeKeys.mouthPress_R,BlendShapeKeys[a1_0x2c401b(714)],BlendShapeKeys[a1_0x2c401b(517)],BlendShapeKeys.mouthRollLower,BlendShapeKeys.mouthRollUpper,BlendShapeKeys[a1_0x2c401b(461)],BlendShapeKeys[a1_0x2c401b(744)],BlendShapeKeys[a1_0x2c401b(667)],BlendShapeKeys[a1_0x2c401b(276)],BlendShapeKeys[a1_0x2c401b(302)],BlendShapeKeys[a1_0x2c401b(831)],BlendShapeKeys[a1_0x2c401b(640)],BlendShapeKeys[a1_0x2c401b(362)],BlendShapeKeys[a1_0x2c401b(619)],BlendShapeKeys.noseSneer_R,BlendShapeKeys[a1_0x2c401b(428)]];const TUNE_PARAMS=a1_0x2c401b(383);class AUTuner{constructor(){var e=a1_0x2c401b;this[e(689)]={},this.easingCurves={},this[e(695)]=new OneEuroFilter(20,.001,1,1),this[e(913)]=new OneEuroFilter(20,.001,5,1),this[e(588)]=new OneEuroFilter(20,.001,5,1),this[e(912)]=new OneEuroFilter(20,.001,1,1),this[e(473)]=new OneEuroFilter(20,.001,5,1),this[e(342)]=new OneEuroFilter(20,.001,5,1),this[e(692)]=t=>{var n=e;return{pitch:this.pitchFilter[n(411)](t[n(547)]),yaw:this.yawFilter[n(411)](t[n(288)]),roll:this[n(913)][n(411)](t[n(921)])}},this.transformTune=t=>{var n=e;return{x:this[n(912)].filter(t.x),y:this[n(473)][n(411)](t.y),z:this[n(342)].filter(t.z)}},this.blendShapeTune=(t,n)=>{var r=e;const i=BlendShapeFactory[r(644)]();n[r(340)]((e,n)=>{var s=r;e[s(340)]((e,r)=>{var a=s;const o=t[n][r],u=Math[a(540)](Math[a(306)](o,0),1),l=this.filters[e],c=this[a(317)][e];let h=l[a(411)](u);h=c(h),i[e]=1.15*h})});const s=i.mouthSmile_L,a=i[r(276)],o=i[r(828)],u=i[r(601)],l=this.diffAmp(.5,i[r(713)],i[r(254)]);i[r(713)]=l[r(465)]*(1-o/2),i[r(254)]=l[r(742)]*(1-u/2);const c=this[r(370)](.5,i[r(358)],i.browOuterUp_R);i[r(358)]=c[r(465)],i[r(482)]=c[r(742)];const h=this.diffAmp(.5,i[r(667)],i.mouthSmile_R);i[r(667)]=h[r(465)],i[r(276)]=h.rightAmp,i[r(640)]=i[r(640)]*(1-.2*i.mouthSmile_R),i[r(362)]=i[r(362)]*(1-.2*i[r(667)]);const d=this[r(370)](.2,i[r(640)],i[r(362)]);return i.mouthUpperUp_L=d.leftAmp,i[r(362)]=d[r(742)],i[r(828)]=o*(1-.5*a),i[r(601)]=u*(1-.5*s),i[r(744)]=i[r(744)]/2,i},this[e(423)]=JSON[e(470)](TUNE_PARAMS),this[e(771)](this[e(423)])}get tune(){return this[a1_0x2c401b(423)]}set[a1_0x2c401b(806)](e){this[a1_0x2c401b(423)]=e,this.loadFiltersAndCurvesFromTune(e)}[a1_0x2c401b(771)](e){var t=a1_0x2c401b;BlendShapeKeys[t(319)][t(340)](n=>{var r,i=t;const s=null!==(r=e[n])&&void 0!==r?r:{fps:120,minCutoff:.01,beta:25,bezier_x1:.08894012120656589,bezier_y1:.003999877929687479,bezier_x2:.8217921067661327,bezier_y2:.8839998779296875};this[i(689)][n]=new OneEuroFilter(s[i(694)],s[i(884)],s[i(590)],1),this[i(317)][n]=bezier_easing__WEBPACK_IMPORTED_MODULE_4___default()(s[i(688)],s[i(871)],s[i(620)],s.bezier_y2)})}[a1_0x2c401b(370)](e,t,n){var r=a1_0x2c401b;const i=(t-n)*e,s=(n-t)*e;return{leftAmp:Math[r(540)](Math[r(306)](i+t,0),1),rightAmp:Math[r(540)](Math[r(306)](s+n,0),1)}}}const CENTER_POINT=5,leftEyePoint=33,rightEyePoint=263,bottomChinPoint=152;class AvatarDenseCombinePredictor{constructor(){this[a1_0x2c401b(664)]=new AUTuner}[a1_0x2c401b(586)]({predictionQuality:e,customBinFileUrl:t,customModelMetaUrl:n,customModelUrl:r}){return __awaiter(this,void 0,void 0,(function*(){var i=a1_0x26cf;this.customBinFileUrl=t,this[i(795)]=n,this.customModelUrl=r,yield this[i(396)](e)}))}predictFace(e){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;if(e[t(490)].length<1)return;Object(_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.engine)()[t(405)]();const n=e[t(490)][0][t(412)](n=>[n.x*e[t(814)][t(859)],n.y*e[t(814)][t(522)],n.z*e[t(814)][t(859)]]),r=findRotation(n,leftEyePoint,rightEyePoint,bottomChinPoint),i=this[t(664)][t(692)](r),s=findTransform(e[t(490)][0],CENTER_POINT),a=this[t(664)][t(621)](s),o=yield this[t(802)](this[t(384)],this[t(677)],n),u={blendShapes:this[t(664)][t(232)](o,this[t(677)].label_keys),rotation:i,transform:a};return Object(_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.engine)()[t(352)](),u}))}[a1_0x2c401b(238)](e){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;return e===t(503)?yield fetchJSON(this[t(248)]):e===t(562)?JSON.parse(MODEL_HIGH):e===t(554)?JSON[t(470)](MODEL_LITE):void 0}))}[a1_0x2c401b(462)](e){var t=a1_0x2c401b;return e===t(503)?this[t(488)]:e===t(562)?t(895):e===t(554)?"https://hallway-public.nyc3.cdn.digitaloceanspaces.com/webSDK/LiteModelV2/":void 0}getModelMeta(e){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;return e===t(503)?yield fetchJSON(this.customModelMetaUrl):e===t(562)?JSON[t(470)](ALL_AU_META_HIGH):"low"===e?JSON.parse(ALL_AU_META_LITE):void 0}))}[a1_0x2c401b(396)](e){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;const n=yield this[t(238)](e),r=this[t(462)](e);this[t(677)]=yield this.getModelMeta(e),this[t(384)]=yield _tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.loadLayersModel(new JSONHandler(n,r))}))}[a1_0x2c401b(324)](e,t,n,r){var i=a1_0x2c401b;let s=[],a=0;for(let o=0;o<t[i(843)];o++){const u=t[o],l=u[0],c=u[1],h=[];for(let t=0;t<l.length;t++){const n=l[t];h[i(311)](e[n])}const d=getTriDotFeatures(normalizePoints(h),c,n,r,a);s=s.concat(d),a+=c[i(843)]/3*2}return _tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__[i(249)]([s])}createPrediction(e,t,n){return __awaiter(this,void 0,void 0,(function*(){var r=a1_0x26cf;const i=this[r(324)](n,t[r(863)],t[r(904)],t[r(417)]),s=e[r(833)](i);let a=[];const o=[];if(s instanceof _tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__[r(338)])a[r(311)](s[r(252)]());else if(s instanceof Array){for(let e=0;e<s.length;e++)o.push(s[e].data());a=yield Promise[r(815)](o)}return a}))}}const MODEL_HIGH=a1_0x2c401b(587),MODEL_LITE=a1_0x2c401b(790),ALL_AU_META_HIGH=a1_0x2c401b(424),ALL_AU_META_LITE=a1_0x2c401b(459);class MediaPipeFaceMeshCalculator{constructor(e,t=!1,n){var r=a1_0x2c401b;this[r(430)]=e=>__awaiter(this,void 0,void 0,(function*(){var t=r;return this[t(676)][t(430)]({image:e})})),this[r(818)]=()=>{this[r(676)].close()},this[r(398)]=e,this[r(676)]=new _mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__.FaceMesh({locateFile:e=>r(255)+e}),this[r(586)]({selfieMode:t,refineLandmarks:n}),this[r(676)][r(634)](this[r(398)])}init(){return __awaiter(this,void 0,void 0,(function*(){var e=a1_0x26cf;return this[e(676)][e(891)]()}))}[a1_0x2c401b(586)]({selfieMode:e,refineLandmarks:t}){this[a1_0x2c401b(676)].setOptions({maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5,refineLandmarks:t,selfieMode:e})}}const requestVideoFrameCallback=(e,t)=>{var n=a1_0x2c401b;return(null==e?void 0:e[n(861)])?e[n(861)](t):window[n(568)](t)},cancelVideoFrameCallback=(e,t)=>{(null==e?void 0:e.cancelVideoFrameCallback)?e.cancelVideoFrameCallback(t):window.cancelAnimationFrame(t)};class Stats{constructor(){var e=a1_0x2c401b;this._startTime=0,this[e(789)]=0,this._timeSum=0,this._lastUpdateTime=0,this[e(419)]=1e3}get[a1_0x2c401b(415)](){return this[a1_0x2c401b(433)]}get[a1_0x2c401b(314)](){return this[a1_0x2c401b(789)]}get timeSum(){return this[a1_0x2c401b(565)]}get[a1_0x2c401b(308)](){return this[a1_0x2c401b(327)]}[a1_0x2c401b(668)](){var e=a1_0x2c401b;this[e(433)]=(performance||Date)[e(892)]()}[a1_0x2c401b(552)](){var e=a1_0x2c401b;const t=(performance||Date)[e(892)]();if(this._timeSum+=t-this[e(415)],this[e(789)]++,t-this[e(327)]>=this[e(419)]){const n=this[e(565)]/this[e(789)];this._timeSum=0,this[e(789)]=0,this[e(452)]&&this[e(452)](n),this._lastUpdateTime=t}}}var _AUPredictor_authenticate;const DEFAULT_FPS=40,lockKey=a1_0x2c401b(325),lock=new AsyncLock;class AUPredictor{constructor(e){var t=a1_0x2c401b;this.lastFrameTime=performance[t(892)](),this[t(903)]=!1,this[t(661)]=document[t(549)](t(678)),this[t(351)]=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a,this._state="stopped",this._faceStats=new Stats,_AUPredictor_authenticate[t(298)](this,()=>__awaiter(this,void 0,void 0,(function*(){var e=t;const n=yield axios__WEBPACK_IMPORTED_MODULE_1___default.a[e(704)]("https://kits.joinhallway.com/auth",{headers:{authorization:"Bearer "+this.apiToken}});let r=!1;const i=yield importSPKI(e(268),e(827));return yield jwtVerify(n[e(687)],i,{issuer:e(374),audience:e(712)}),r=!0,!0}))),this[t(395)]=e=>__awaiter(this,void 0,void 0,(function*(){var n=t;if(this[n(851)]!==n(844)){if(this.requestFrameToken&&cancelVideoFrameCallback(this[n(661)],this[n(230)]),this[n(491)]&&!this[n(661)][n(673)]||this.stop(),!this[n(230)])return;this[n(239)]()}this.lastFrameTime=performance[n(892)]();const r=yield this[n(567)][n(775)](e);this._faceStats.end(),r&&(this[n(609)]&&this[n(641)](r),this[n(351)][n(754)](r))})),this[t(833)]=e=>__awaiter(this,void 0,void 0,(function*(){var n=t;"stopped"!==this[n(851)]&&(console.warn("AVATAR_WEBKIT: predict was called while stream was not stoppped. Stopping stream..."),yield this[n(487)]()),yield this[n(891)](),yield this.faceMeshCalculator[n(430)](e)}));const{apiToken:n,fps:r=DEFAULT_FPS,onPredict:i,predictionQuality:s=t(562),shouldMirrorOutput:a=!1,refineLandmarks:o}=e;console[t(683)](t(596)+version),!n&&console[t(273)](t(701)),this[t(661)].autoplay=!0,this[t(661)][t(715)]=!0,this[t(661)][t(666)]=!0,this.apiToken=n,this[t(648)]=s,this[t(610)]=new MediaPipeFaceMeshCalculator(this.faceMeshResultsCallback,a,null!=o?o:"high"===s),this.avatarDensePredictor=new AvatarDenseCombinePredictor,this[t(609)]=i,this.frameRateMs=1e3/(r>0?r:DEFAULT_FPS)}[a1_0x2c401b(891)](){return __awaiter(this,void 0,void 0,(function*(){var e=a1_0x26cf;return lock[e(792)](lockKey,()=>this[e(559)]())}))}[a1_0x2c401b(559)](){var e=a1_0x2c401b;return!this[e(475)]&&(console[e(683)](e(286)),this[e(475)]=__classPrivateFieldGet(this,_AUPredictor_authenticate,"f")[e(840)](this)[e(873)](()=>Promise[e(815)]([this[e(610)][e(396)](),this[e(567)][e(396)](this[e(648)])]))[e(873)](()=>console[e(683)](e(860)))),this._initializePromise}get[a1_0x2c401b(693)](){return this[a1_0x2c401b(832)]}get[a1_0x2c401b(543)](){return this[a1_0x2c401b(351)]}get[a1_0x2c401b(678)](){return this._video}get stream(){return this._stream}get state(){return this[a1_0x2c401b(443)]}get[a1_0x2c401b(641)](){return this._onPredict}set onPredict(e){this[a1_0x2c401b(609)]=e}get auTuner(){return this.avatarDensePredictor.auTuner}[a1_0x2c401b(586)]({shouldMirrorOutput:e,predictionQuality:t,customBinFileUrl:n,customModelMetaUrl:r,customModelUrl:i,refineLandmarks:s}){return __awaiter(this,void 0,void 0,(function*(){var a=a1_0x26cf;this[a(648)]=null!=t?t:this[a(648)],this[a(903)]=null!=e?e:this[a(903)],yield this[a(487)](),s=null!=s?s:t===a(562),this[a(610)][a(586)]({selfieMode:e,refineLandmarks:s}),yield this.avatarDensePredictor[a(586)]({predictionQuality:t,customBinFileUrl:n,customModelMetaUrl:r,customModelUrl:i}),yield this[a(402)]({stream:this[a(491)]})}))}[a1_0x2c401b(402)](e){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;return lock[t(792)](lockKey,()=>this[t(761)](e))}))}[a1_0x2c401b(761)]({stream:e}){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;if(!e)throw Error("Start was called but stream was "+e);if(!e[t(274)]().length)throw Error(t(841));const n=e[t(274)]()[0],r=this._stream===e;this[t(776)]=e;try{(this[t(443)]!==t(844)||this[t(230)])&&this[t(592)]({stopStream:!r}),this[t(443)]=t(511);const{width:i,height:s}=n[t(646)]();this[t(661)][t(859)]=i,this[t(661)][t(522)]=s,this._video[t(618)]=e,yield Promise.all([this[t(559)](),this[t(661)][t(735)]()]),this.setVideoFrameCallback(),this[t(443)]=t(647)}catch(i){throw this[t(592)]({stopStream:!r}),i}}))}stop(e={}){return __awaiter(this,void 0,void 0,(function*(){var t=a1_0x26cf;return lock[t(792)](lockKey,()=>this[t(592)](e))}))}[a1_0x2c401b(592)]({stopStream:e=!1}){var t;return __awaiter(this,void 0,void 0,(function*(){var n=a1_0x26cf;cancelVideoFrameCallback(this[n(661)],this.requestFrameToken),this[n(230)]=void 0,this[n(678)].srcObject=null,e&&(null===(t=this[n(776)])||void 0===t||t[n(316)]()[n(340)](e=>e[n(487)]()),this[n(776)]=void 0),this[n(443)]=n(844)}))}setVideoFrameCallback(){var e=a1_0x2c401b;this[e(230)]=requestVideoFrameCallback(this[e(661)],()=>{var t=e;this[t(832)][t(668)](),this[t(610)][t(430)](this[t(661)])})}}_AUPredictor_authenticate=new WeakMap;var commonjsGlobal=typeof globalThis!==a1_0x2c401b(718)?globalThis:typeof window!==a1_0x2c401b(718)?window:void 0!==global$1?global$1:typeof self!==a1_0x2c401b(718)?self:{},long=Long,wasm=null;try{wasm=new(WebAssembly[a1_0x2c401b(665)])(new(WebAssembly[a1_0x2c401b(753)])(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{})[a1_0x2c401b(515)]}catch(a1_0x34f0a2){}function Long(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function isLong(e){return!0===(e&&e[a1_0x2c401b(510)])}a1_0x2c401b(733),a1_0x2c401b(510),Object[a1_0x2c401b(529)](Long.prototype,"__isLong__",{value:!0}),Long[a1_0x2c401b(643)]=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(n=fromBits(e,(0|e)<0?-1:0,!0),i&&(UINT_CACHE[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(n=fromBits(e,e<0?-1:0,!1),i&&(INT_CACHE[e]=n),n)}function fromNumber(e,t){var n=a1_0x2c401b;if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t)[n(416)]():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,n){return new Long(e,t,n)}Long[a1_0x2c401b(919)]=fromInt,Long[a1_0x2c401b(241)]=fromNumber,Long[a1_0x2c401b(421)]=fromBits;var pow_dbl=Math[a1_0x2c401b(613)];function fromString(e,t,n){var r,i=a1_0x2c401b;if(0===e[i(843)])throw Error("empty string");if(e===i(532)||e===i(857)||e===i(897)||e===i(838))return ZERO;if(typeof t===i(418)?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError(i(787));if((r=e[i(783)]("-"))>0)throw Error(i(290));if(0===r)return fromString(e[i(658)](1),t,n)[i(416)]();for(var s=fromNumber(pow_dbl(n,8)),a=ZERO,o=0;o<e[i(843)];o+=8){var u=Math.min(8,e.length-o),l=parseInt(e.substring(o,o+u),n);if(u<8){var c=fromNumber(pow_dbl(n,u));a=a[i(773)](c)[i(484)](fromNumber(l))}else a=(a=a[i(773)](s))[i(484)](fromNumber(l))}return a[i(401)]=t,a}function fromValue(e,t){var n=a1_0x2c401b;return typeof e===n(418)?fromNumber(e,t):typeof e===n(662)?fromString(e,t):fromBits(e[n(554)],e[n(562)],typeof t===n(867)?t:e[n(401)])}Long[a1_0x2c401b(572)]=fromString,Long[a1_0x2c401b(894)]=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long[a1_0x2c401b(837)]=ZERO;var UZERO=fromInt(0,!0);Long[a1_0x2c401b(622)]=UZERO;var ONE=fromInt(1);Long[a1_0x2c401b(388)]=ONE;var UONE=fromInt(1,!0);Long[a1_0x2c401b(444)]=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long[a1_0x2c401b(922)]=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long[a1_0x2c401b(733)];LongPrototype[a1_0x2c401b(899)]=function(){var e=a1_0x2c401b;return this[e(401)]?this[e(554)]>>>0:this[e(554)]},LongPrototype[a1_0x2c401b(845)]=function(){var e=a1_0x2c401b;return this[e(401)]?(this[e(562)]>>>0)*TWO_PWR_32_DBL+(this[e(554)]>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype[a1_0x2c401b(762)]=function(e){var t=a1_0x2c401b;if((e=e||10)<2||36<e)throw RangeError(t(787));if(this[t(617)]())return"0";if(this[t(372)]()){if(this.eq(MIN_VALUE)){var n=fromNumber(e),r=this.div(n),i=r[t(773)](n)[t(853)](this);return r[t(762)](e)+i[t(899)]()[t(762)](e)}return"-"+this[t(416)]()[t(762)](e)}for(var s=fromNumber(pow_dbl(e,6),this[t(401)]),a=this,o="";;){var u=a[t(380)](s),l=(a.sub(u[t(773)](s))[t(899)]()>>>0)[t(762)](e);if((a=u)[t(617)]())return l+o;for(;l[t(843)]<6;)l="0"+l;o=""+l+o}},LongPrototype[a1_0x2c401b(580)]=function(){return this.high},LongPrototype[a1_0x2c401b(564)]=function(){return this.high>>>0},LongPrototype[a1_0x2c401b(467)]=function(){return this[a1_0x2c401b(554)]},LongPrototype[a1_0x2c401b(359)]=function(){return this[a1_0x2c401b(554)]>>>0},LongPrototype[a1_0x2c401b(231)]=function(){var e=a1_0x2c401b;if(this[e(372)]())return this.eq(MIN_VALUE)?64:this.neg()[e(231)]();for(var t=0!=this.high?this[e(562)]:this[e(554)],n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},LongPrototype[a1_0x2c401b(617)]=function(){return 0===this[a1_0x2c401b(562)]&&0===this.low},LongPrototype[a1_0x2c401b(740)]=LongPrototype[a1_0x2c401b(617)],LongPrototype.isNegative=function(){return!this[a1_0x2c401b(401)]&&this.high<0},LongPrototype.isPositive=function(){var e=a1_0x2c401b;return this[e(401)]||this[e(562)]>=0},LongPrototype[a1_0x2c401b(284)]=function(){return 1==(1&this[a1_0x2c401b(554)])},LongPrototype[a1_0x2c401b(297)]=function(){return 0==(1&this[a1_0x2c401b(554)])},LongPrototype[a1_0x2c401b(879)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),(this[t(401)]===e[t(401)]||this[t(562)]>>>31!=1||e.high>>>31!=1)&&this[t(562)]===e[t(562)]&&this[t(554)]===e[t(554)]},LongPrototype.eq=LongPrototype.equals,LongPrototype[a1_0x2c401b(751)]=function(e){return!this.eq(e)},LongPrototype[a1_0x2c401b(612)]=LongPrototype[a1_0x2c401b(751)],LongPrototype.ne=LongPrototype[a1_0x2c401b(751)],LongPrototype[a1_0x2c401b(791)]=function(e){return this[a1_0x2c401b(301)](e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this[a1_0x2c401b(301)](e)<=0},LongPrototype.lte=LongPrototype[a1_0x2c401b(786)],LongPrototype.le=LongPrototype[a1_0x2c401b(786)],LongPrototype[a1_0x2c401b(349)]=function(e){return this[a1_0x2c401b(301)](e)>0},LongPrototype.gt=LongPrototype[a1_0x2c401b(349)],LongPrototype.greaterThanOrEqual=function(e){return this[a1_0x2c401b(301)](e)>=0},LongPrototype[a1_0x2c401b(908)]=LongPrototype[a1_0x2c401b(414)],LongPrototype.ge=LongPrototype[a1_0x2c401b(414)],LongPrototype[a1_0x2c401b(700)]=function(e){var t=a1_0x2c401b;if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e[t(372)]();return n&&!r?-1:!n&&r?1:this[t(401)]?e[t(562)]>>>0>this[t(562)]>>>0||e[t(562)]===this[t(562)]&&e[t(554)]>>>0>this[t(554)]>>>0?-1:1:this[t(853)](e).isNegative()?-1:1},LongPrototype[a1_0x2c401b(301)]=LongPrototype[a1_0x2c401b(700)],LongPrototype[a1_0x2c401b(377)]=function(){var e=a1_0x2c401b;return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this[e(525)]().add(ONE)},LongPrototype[a1_0x2c401b(416)]=LongPrototype[a1_0x2c401b(377)],LongPrototype[a1_0x2c401b(484)]=function(e){var t=a1_0x2c401b;isLong(e)||(e=fromValue(e));var n=this[t(562)]>>>16,r=65535&this.high,i=this[t(554)]>>>16,s=65535&this[t(554)],a=e[t(562)]>>>16,o=65535&e[t(562)],u=e[t(554)]>>>16,l=0,c=0,h=0,d=0;return h+=(d+=s+(65535&e[t(554)]))>>>16,c+=(h+=i+u)>>>16,l+=(c+=r+o)>>>16,l+=n+a,fromBits((h&=65535)<<16|(d&=65535),(l&=65535)<<16|(c&=65535),this[t(401)])},LongPrototype[a1_0x2c401b(451)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),this[t(484)](e[t(416)]())},LongPrototype[a1_0x2c401b(853)]=LongPrototype[a1_0x2c401b(451)],LongPrototype[a1_0x2c401b(446)]=function(e){var t=a1_0x2c401b;if(this[t(617)]())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this[t(554)],this.high,e[t(554)],e[t(562)]),wasm.get_high(),this[t(401)]);if(e[t(617)]())return ZERO;if(this.eq(MIN_VALUE))return e[t(284)]()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this[t(284)]()?MIN_VALUE:ZERO;if(this[t(372)]())return e[t(372)]()?this.neg()[t(773)](e[t(416)]()):this[t(416)]().mul(e)[t(416)]();if(e.isNegative())return this[t(773)](e.neg())[t(416)]();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this[t(845)]()*e[t(845)](),this.unsigned);var n=this[t(562)]>>>16,r=65535&this[t(562)],i=this[t(554)]>>>16,s=65535&this.low,a=e[t(562)]>>>16,o=65535&e.high,u=e[t(554)]>>>16,l=65535&e[t(554)],c=0,h=0,d=0,p=0;return d+=(p+=s*l)>>>16,h+=(d+=i*l)>>>16,d&=65535,h+=(d+=s*u)>>>16,c+=(h+=r*l)>>>16,h&=65535,c+=(h+=i*u)>>>16,h&=65535,c+=(h+=s*o)>>>16,c+=n*l+r*u+i*o+s*a,fromBits((d&=65535)<<16|(p&=65535),(c&=65535)<<16|(h&=65535),this[t(401)])},LongPrototype.mul=LongPrototype.multiply,LongPrototype[a1_0x2c401b(256)]=function(e){var t,n,r,i=a1_0x2c401b;if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error(i(363));if(wasm)return this[i(401)]||-2147483648!==this[i(562)]||-1!==e[i(554)]||-1!==e[i(562)]?fromBits((this[i(401)]?wasm.div_u:wasm.div_s)(this[i(554)],this[i(562)],e[i(554)],e[i(562)]),wasm.get_high(),this.unsigned):this;if(this.isZero())return this[i(401)]?UZERO:ZERO;if(this[i(401)]){if(e[i(401)]||(e=e[i(653)]()),e.gt(this))return UZERO;if(e.gt(this[i(310)](1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this[i(746)](1)[i(380)](e)[i(877)](1)).eq(ZERO)?e[i(372)]()?ONE:NEG_ONE:(n=this.sub(e[i(773)](t)),r=t.add(n[i(380)](e)));if(e.eq(MIN_VALUE))return this[i(401)]?UZERO:ZERO;if(this[i(372)]())return e[i(372)]()?this[i(416)]()[i(380)](e[i(416)]()):this[i(416)]()[i(380)](e)[i(416)]();if(e[i(372)]())return this[i(380)](e[i(416)]())[i(416)]();r=ZERO}for(n=this;n[i(908)](e);){t=Math[i(306)](1,Math.floor(n.toNumber()/e[i(845)]()));for(var s=Math[i(280)](Math[i(683)](t)/Math[i(455)]),a=s<=48?1:pow_dbl(2,s-48),o=fromNumber(t),u=o.mul(e);u[i(372)]()||u.gt(n);)u=(o=fromNumber(t-=a,this.unsigned))[i(773)](e);o.isZero()&&(o=ONE),r=r[i(484)](o),n=n[i(853)](u)}return r},LongPrototype.div=LongPrototype[a1_0x2c401b(256)],LongPrototype[a1_0x2c401b(289)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),wasm?fromBits((this[t(401)]?wasm[t(847)]:wasm[t(508)])(this[t(554)],this[t(562)],e[t(554)],e[t(562)]),wasm.get_high(),this[t(401)]):this.sub(this[t(380)](e)[t(773)](e))},LongPrototype[a1_0x2c401b(263)]=LongPrototype[a1_0x2c401b(289)],LongPrototype.rem=LongPrototype[a1_0x2c401b(289)],LongPrototype[a1_0x2c401b(525)]=function(){return fromBits(~this.low,~this.high,this[a1_0x2c401b(401)])},LongPrototype[a1_0x2c401b(581)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]&e[t(554)],this[t(562)]&e.high,this[t(401)])},LongPrototype.or=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]|e[t(554)],this[t(562)]|e[t(562)],this[t(401)])},LongPrototype[a1_0x2c401b(757)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]^e[t(554)],this.high^e[t(562)],this.unsigned)},LongPrototype[a1_0x2c401b(435)]=function(e){var t=a1_0x2c401b;return isLong(e)&&(e=e[t(899)]()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this[t(562)]<<e|this[t(554)]>>>32-e,this[t(401)]):fromBits(0,this[t(554)]<<e-32,this[t(401)])},LongPrototype[a1_0x2c401b(877)]=LongPrototype[a1_0x2c401b(435)],LongPrototype[a1_0x2c401b(233)]=function(e){var t=a1_0x2c401b;return isLong(e)&&(e=e[t(899)]()),0==(e&=63)?this:e<32?fromBits(this[t(554)]>>>e|this[t(562)]<<32-e,this[t(562)]>>e,this[t(401)]):fromBits(this[t(562)]>>e-32,this.high>=0?0:-1,this[t(401)])},LongPrototype[a1_0x2c401b(746)]=LongPrototype[a1_0x2c401b(233)],LongPrototype[a1_0x2c401b(481)]=function(e){var t=a1_0x2c401b;if(isLong(e)&&(e=e[t(899)]()),0==(e&=63))return this;var n=this[t(562)];return e<32?fromBits(this.low>>>e|n<<32-e,n>>>e,this[t(401)]):32===e?fromBits(n,0,this.unsigned):fromBits(n>>>e-32,0,this[t(401)])},LongPrototype[a1_0x2c401b(310)]=LongPrototype[a1_0x2c401b(481)],LongPrototype.shr_u=LongPrototype[a1_0x2c401b(481)],LongPrototype[a1_0x2c401b(299)]=function(){var e=a1_0x2c401b;return this[e(401)]?fromBits(this[e(554)],this[e(562)],!1):this},LongPrototype.toUnsigned=function(){var e=a1_0x2c401b;return this[e(401)]?this:fromBits(this.low,this[e(562)],!0)},LongPrototype[a1_0x2c401b(453)]=function(e){var t=a1_0x2c401b;return e?this.toBytesLE():this[t(436)]()},LongPrototype[a1_0x2c401b(460)]=function(){var e=this[a1_0x2c401b(562)],t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype[a1_0x2c401b(436)]=function(){var e=a1_0x2c401b,t=this[e(562)],n=this[e(554)];return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]},Long[a1_0x2c401b(748)]=function(e,t,n){return n?Long[a1_0x2c401b(595)](e,t):Long.fromBytesBE(e,t)},Long[a1_0x2c401b(595)]=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long[a1_0x2c401b(474)]=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,t){for(var n=a1_0x2c401b,r=new Array(arguments[n(843)]-1),i=0,s=2,a=!0;s<arguments.length;)r[i++]=arguments[s++];return new Promise((function(n,s){r[i]=function(e){var t=a1_0x26cf;if(a)if(a=!1,e)s(e);else{for(var r=new Array(arguments[t(843)]-1),i=0;i<r[t(843)];)r[i++]=arguments[i];n.apply(null,r)}};try{e.apply(t||null,r)}catch(o){a&&(a=!1,s(o))}}))}var base64$1={};!function(e){var t=a1_0x2c401b,n=e;n[t(843)]=function(e){var n=e[t(843)];if(!n)return 0;for(var r=0;--n%4>1&&"="===e.charAt(n);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),i=new Array(123),s=0;s<64;)i[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n[t(819)]=function(e,n,i){for(var s,a=t,o=null,u=[],l=0,c=0;n<i;){var h=e[n++];switch(c){case 0:u[l++]=r[h>>2],s=(3&h)<<4,c=1;break;case 1:u[l++]=r[s|h>>4],s=(15&h)<<2,c=2;break;case 2:u[l++]=r[s|h>>6],u[l++]=r[63&h],c=0}l>8191&&((o||(o=[]))[a(311)](String[a(582)][a(869)](String,u)),l=0)}return c&&(u[l++]=r[s],u[l++]=61,1===c&&(u[l++]=61)),o?(l&&o[a(311)](String[a(582)][a(869)](String,u[a(505)](0,l))),o[a(893)]("")):String[a(582)][a(869)](String,u.slice(0,l))},n[t(672)]=function(e,n,r){for(var s,a=t,o=r,u=0,l=0;l<e[a(843)];){var c=e[a(404)](l++);if(61===c&&u>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(u){case 0:s=c,u=1;break;case 1:n[r++]=s<<2|(48&c)>>4,s=c,u=2;break;case 2:n[r++]=(15&s)<<4|(60&c)>>2,s=c,u=3;break;case 3:n[r++]=(3&s)<<6|c,u=0}}if(1===u)throw Error("invalid encoding");return r-o},n[t(523)]=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter[a1_0x2c401b(733)].on=function(e,t,n){var r=a1_0x2c401b;return(this[r(353)][e]||(this._listeners[e]=[]))[r(311)]({fn:t,ctx:n||this}),this},EventEmitter.prototype.off=function(e,t){var n=a1_0x2c401b;if(void 0===e)this[n(353)]={};else if(void 0===t)this[n(353)][e]=[];else for(var r=this._listeners[e],i=0;i<r[n(843)];)r[i].fn===t?r[n(821)](i,1):++i;return this},EventEmitter[a1_0x2c401b(733)].emit=function(e){var t=a1_0x2c401b,n=this._listeners[e];if(n){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<n.length;)n[i].fn[t(869)](n[i++][t(696)],r)}return this};var float=factory(factory);function factory(e){var t=a1_0x2c401b;return typeof Float32Array!==t(718)?function(){var n=t,r=new Float32Array([-0]),i=new Uint8Array(r[n(593)]),s=128===i[3];function a(e,t,n){r[0]=e,t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3]}function o(e,t,n){r[0]=e,t[n]=i[3],t[n+1]=i[2],t[n+2]=i[1],t[n+3]=i[0]}function u(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],r[0]}function l(e,t){return i[3]=e[t],i[2]=e[t+1],i[1]=e[t+2],i[0]=e[t+3],r[0]}e[n(520)]=s?a:o,e[n(339)]=s?o:a,e[n(650)]=s?u:l,e.readFloatBE=s?l:u}():function(){var n=t;function r(e,t,n,r){var i=a1_0x26cf,s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((s<<31|Math[i(448)](t/1401298464324817e-60))>>>0,n,r);else{var a=Math[i(264)](Math.log(t)/Math[i(455)]);e((s<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,r)}}function i(e,t,r){var i=n,s=e(t,r),a=2*(s>>31)+1,o=s>>>23&255,u=8388607&s;return 255===o?u?NaN:a*(1/0):0===o?1401298464324817e-60*a*u:a*Math[i(613)](2,o-150)*(u+8388608)}e[n(520)]=r[n(778)](null,writeUintLE),e.writeFloatBE=r[n(778)](null,writeUintBE),e[n(650)]=i[n(778)](null,readUintLE),e[n(270)]=i[n(778)](null,readUintBE)}(),typeof Float64Array!==t(718)?function(){var n=t,r=new Float64Array([-0]),i=new Uint8Array(r[n(593)]),s=128===i[7];function a(e,t,n){r[0]=e,t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7]}function o(e,t,n){r[0]=e,t[n]=i[7],t[n+1]=i[6],t[n+2]=i[5],t[n+3]=i[4],t[n+4]=i[3],t[n+5]=i[2],t[n+6]=i[1],t[n+7]=i[0]}function u(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],i[4]=e[t+4],i[5]=e[t+5],i[6]=e[t+6],i[7]=e[t+7],r[0]}function l(e,t){return i[7]=e[t],i[6]=e[t+1],i[5]=e[t+2],i[4]=e[t+3],i[3]=e[t+4],i[2]=e[t+5],i[1]=e[t+6],i[0]=e[t+7],r[0]}e[n(265)]=s?a:o,e[n(422)]=s?o:a,e[n(485)]=s?u:l,e[n(890)]=s?l:u}():function(){var n=t;function r(e,t,n,r,i,s){var a,o=a1_0x26cf,u=r<0?1:0;if(u&&(r=-r),0===r)e(0,i,s+t),e(1/r>0?0:2147483648,i,s+n);else if(isNaN(r))e(0,i,s+t),e(2146959360,i,s+n);else if(r>17976931348623157e292)e(0,i,s+t),e((u<<31|2146435072)>>>0,i,s+n);else if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,s+t),e((u<<31|a/4294967296)>>>0,i,s+n);else{var l=Math[o(264)](Math[o(683)](r)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=r*Math.pow(2,-l))>>>0,i,s+t),e((u<<31|l+1023<<20|1048576*a&1048575)>>>0,i,s+n)}}function i(e,t,n,r,i){var s=e(r,i+t),a=e(r,i+n),o=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+s;return 2047===u?l?NaN:o*(1/0):0===u?5e-324*o*l:o*Math.pow(2,u-1075)*(l+4503599627370496)}e[n(265)]=r.bind(null,writeUintLE,0,4),e[n(422)]=r.bind(null,writeUintBE,4,0),e[n(485)]=i[n(778)](null,readUintLE,0,4),e[n(890)]=i[n(778)](null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(_0x637a7a){var _0x5d8707=a1_0x2c401b;try{var _0x4f88ed=eval(_0x5d8707(577)[_0x5d8707(585)](/^/,"re"))(_0x637a7a);if(_0x4f88ed&&(_0x4f88ed[_0x5d8707(843)]||Object[_0x5d8707(628)](_0x4f88ed).length))return _0x4f88ed}catch(_0x59817){}return null}var utf8$2={},_0x421d98,_0x727c26,_0xfb84c1;_0x421d98=utf8$2,_0x727c26=a1_0x2c401b,_0xfb84c1=_0x421d98,_0xfb84c1[_0x727c26(843)]=function(e){for(var t=_0x727c26,n=0,r=0,i=0;i<e[t(843)];++i)(r=e[t(404)](i))<128?n+=1:r<2048?n+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(i+1))?(++i,n+=4):n+=3;return n},_0xfb84c1[_0x727c26(408)]=function(e,t,n){var r=_0x727c26;if(n-t<1)return"";for(var i,s=null,a=[],o=0;t<n;)(i=e[t++])<128?a[o++]=i:i>191&&i<224?a[o++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(i>>10),a[o++]=56320+(1023&i)):a[o++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((s||(s=[]))[r(311)](String[r(582)].apply(String,a)),o=0);return s?(o&&s[r(311)](String[r(582)][r(869)](String,a[r(505)](0,o))),s[r(893)]("")):String.fromCharCode[r(869)](String,a[r(505)](0,o))},_0xfb84c1.write=function(e,t,n){for(var r,i,s=_0x727c26,a=n,o=0;o<e[s(843)];++o)(r=e[s(404)](o))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(o+1)))?(++o,t[n++]=(r=65536+((1023&r)<<10)+(1023&i))>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-a};var pool_1=pool,longbits,hasRequiredLongbits,hasRequiredMinimal;function pool(e,t,n){var r=n||8192,i=r>>>1,s=null,a=r;return function(n){var o=a1_0x26cf;if(n<1||n>i)return e(n);a+n>r&&(s=e(r),a=0);var u=t[o(840)](s,a,a+=n);return 7&a&&(a=1+(7|a)),u}}function requireLongbits(){var e=a1_0x2c401b;if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=n;var t=requireMinimal();function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=n[e(669)]=new n(0,0);r[e(845)]=function(){return 0},r.zzEncode=r[e(796)]=function(){return this},r[e(843)]=function(){return 1};var i=n[e(909)]=e(321);n[e(241)]=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var i=e>>>0,s=(e-i)/4294967296>>>0;return t&&(s=~s>>>0,i=~i>>>0,++i>4294967295&&(i=0,++s>4294967295&&(s=0))),new n(i,s)},n[e(739)]=function(i){var s=e;if(typeof i===s(418))return n[s(241)](i);if(t[s(624)](i)){if(!t[s(278)])return n[s(241)](parseInt(i,10));i=t[s(278)][s(572)](i)}return i.low||i[s(562)]?new n(i[s(554)]>>>0,i[s(562)]>>>0):r},n.prototype[e(845)]=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},n[e(733)][e(335)]=function(e){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String[e(733)][e(404)];return n.fromHash=function(t){var a=e;return t===i?r:new n((s[a(840)](t,0)|s[a(840)](t,1)<<8|s[a(840)](t,2)<<16|s[a(840)](t,3)<<24)>>>0,(s[a(840)](t,4)|s[a(840)](t,5)<<8|s[a(840)](t,6)<<16|s.call(t,7)<<24)>>>0)},n.prototype[e(492)]=function(){return String[e(582)](255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n[e(733)][e(835)]=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype[e(796)]=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal?minimal:(hasRequiredMinimal=1,function(e){var t=a1_0x26cf,n=e;function r(e,n,r){for(var i=t,s=Object[i(628)](n),a=0;a<s[i(843)];++a)void 0!==e[s[a]]&&r||(e[s[a]]=n[s[a]]);return e}function i(e){var n=t;function i(e,t){var n=a1_0x26cf;if(!(this instanceof i))return new i(e,t);Object.defineProperty(this,n(483),{get:function(){return e}}),Error[n(553)]?Error[n(553)](this,i):Object[n(529)](this,"stack",{value:(new Error)[n(259)]||""}),t&&r(this,t)}return(i[n(733)]=Object.create(Error[n(733)]))[n(803)]=i,Object[n(529)](i[n(733)],n(407),{get:function(){return e}}),i.prototype.toString=function(){return this.name+": "+this[n(483)]},i}n[t(591)]=aspromise,n[t(261)]=base64$1,n[t(445)]=eventemitter,n.float=float,n[t(292)]=inquire_1,n[t(347)]=utf8$2,n.pool=pool_1,n[t(690)]=requireLongbits(),n[t(472)]=Boolean(typeof commonjsGlobal!==t(718)&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal[t(566)][t(478)]&&commonjsGlobal[t(566)][t(478)].node),n[t(697)]=n[t(472)]&&commonjsGlobal||typeof window!==t(718)&&window||typeof self!==t(718)&&self||commonjsGlobal,n.emptyArray=Object[t(244)]?Object[t(244)]([]):[],n[t(680)]=Object[t(244)]?Object[t(244)]({}):{},n.isInteger=Number[t(392)]||function(e){var n=t;return typeof e===n(418)&&isFinite(e)&&Math[n(264)](e)===e},n[t(624)]=function(e){return typeof e===t(662)||e instanceof String},n[t(243)]=function(e){return e&&"object"==typeof e},n[t(651)]=n[t(403)]=function(e,n){var r=t,i=e[n];return!(null==i||!e.hasOwnProperty(n))&&("object"!=typeof i||(Array[r(812)](i)?i[r(843)]:Object.keys(i)[r(843)])>0)},n[t(779)]=function(){var e=t;try{var r=n[e(292)]("buffer")[e(779)];return r.prototype.utf8Write?r:null}catch(i){return null}}(),n._Buffer_from=null,n[t(498)]=null,n[t(337)]=function(e){var r=t;return typeof e===r(418)?n[r(779)]?n[r(498)](e):new n.Array(e):n[r(779)]?n[r(247)](e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array=typeof Uint8Array!==t(718)?Uint8Array:Array,n[t(278)]=n[t(697)][t(825)]&&n[t(697)][t(825)][t(278)]||n[t(697)][t(278)]||n[t(292)](t(235)),n.key2Re=/^true|false|0|1$/,n[t(489)]=/^-?(?:0|[1-9][0-9]*)$/,n[t(849)]=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){var r=t;return e?n[r(690)][r(739)](e)[r(492)]():n.LongBits.zeroHash},n[t(318)]=function(e,r){var i=t,s=n.LongBits[i(864)](e);return n.Long?n[i(278)][i(421)](s.lo,s.hi,r):s[i(845)](Boolean(r))},n[t(468)]=r,n[t(234)]=function(e){var n=t;return e.charAt(0)[n(300)]()+e[n(658)](1)},n[t(272)]=i,n[t(682)]=i(t(682)),n[t(817)]=function(e){for(var n=t,r={},i=0;i<e[n(843)];++i)r[e[i]]=1;return function(){for(var e=n,t=Object[e(628)](this),i=t[e(843)]-1;i>-1;--i)if(1===r[t[i]]&&null!=this[t[i]])return t[i]}},n[t(507)]=function(e){return function(t){for(var n=a1_0x26cf,r=0;r<e[n(843)];++r)e[r]!==t&&delete this[e[r]]}},n[t(726)]={longs:String,enums:String,bytes:String,json:!0},n[t(875)]=function(){var e=t,r=n.Buffer;r?(n._Buffer_from=r[e(739)]!==Uint8Array[e(739)]&&r.from||function(e,t){return new r(e,t)},n[e(498)]=r[e(749)]||function(e){return new r(e)}):n._Buffer_from=n[e(498)]=null}}(minimal),minimal)}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4[a1_0x2c401b(690)],base64=util$4[a1_0x2c401b(261)],utf8$1=util$4[a1_0x2c401b(347)];function Op(e,t,n){var r=a1_0x2c401b;this.fn=e,this[r(253)]=t,this[r(754)]=void 0,this.val=n}function noop(){}function State(e){var t=a1_0x2c401b;this[t(360)]=e[t(360)],this.tail=e.tail,this[t(253)]=e[t(253)],this[t(754)]=e[t(367)]}function Writer$1(){var e=a1_0x2c401b;this[e(253)]=0,this[e(360)]=new Op(noop,0,0),this[e(539)]=this[e(360)],this.states=null}var create$1=function(){var e=a1_0x2c401b;return util$4[e(779)]?function(){return(Writer$1[e(644)]=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,n){t[n]=255&e}function writeVarint32(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function VarintOp(e,t){var n=a1_0x2c401b;this[n(253)]=e,this[n(754)]=void 0,this[n(267)]=t}function writeVarint64(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function writeFixed32(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer$1[a1_0x2c401b(644)]=create$1(),Writer$1[a1_0x2c401b(266)]=function(e){return new util$4.Array(e)},util$4[a1_0x2c401b(427)]!==Array&&(Writer$1[a1_0x2c401b(266)]=util$4[a1_0x2c401b(652)](Writer$1[a1_0x2c401b(266)],util$4.Array[a1_0x2c401b(733)].subarray)),Writer$1.prototype[a1_0x2c401b(497)]=function(e,t,n){var r=a1_0x2c401b;return this[r(539)]=this[r(539)][r(754)]=new Op(e,t,n),this[r(253)]+=t,this},VarintOp[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](Op[a1_0x2c401b(733)]),VarintOp[a1_0x2c401b(733)].fn=writeVarint32,Writer$1.prototype[a1_0x2c401b(350)]=function(e){var t=a1_0x2c401b;return this[t(253)]+=(this.tail=this[t(539)][t(754)]=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e))[t(253)],this},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(685)]=function(e){return e<0?this[a1_0x2c401b(497)](writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this[a1_0x2c401b(350)]((e<<1^e>>31)>>>0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(240)]=function(e){var t=a1_0x2c401b,n=LongBits$1.from(e);return this[t(497)](writeVarint64,n.length(),n)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(304)]=Writer$1[a1_0x2c401b(733)][a1_0x2c401b(240)],Writer$1.prototype[a1_0x2c401b(880)]=function(e){var t=a1_0x2c401b,n=LongBits$1[t(739)](e).zzEncode();return this._push(writeVarint64,n[t(843)](),n)},Writer$1.prototype[a1_0x2c401b(679)]=function(e){return this[a1_0x2c401b(497)](writeByte,1,e?1:0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(535)]=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(743)]=Writer$1[a1_0x2c401b(733)][a1_0x2c401b(535)],Writer$1.prototype[a1_0x2c401b(486)]=function(e){var t=a1_0x2c401b,n=LongBits$1[t(739)](e);return this[t(497)](writeFixed32,4,n.lo)[t(497)](writeFixed32,4,n.hi)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(671)]=Writer$1.prototype[a1_0x2c401b(486)],Writer$1[a1_0x2c401b(733)][a1_0x2c401b(720)]=function(e){var t=a1_0x2c401b;return this[t(497)](util$4[t(720)].writeFloatLE,4,e)},Writer$1[a1_0x2c401b(733)].double=function(e){var t=a1_0x2c401b;return this[t(497)](util$4[t(720)][t(265)],8,e)};var writeBytes=util$4[a1_0x2c401b(427)][a1_0x2c401b(733)][a1_0x2c401b(298)]?function(e,t,n){t[a1_0x2c401b(298)](e,n)}:function(e,t,n){for(var r=a1_0x2c401b,i=0;i<e[r(843)];++i)t[n+i]=e[i]};function a1_0x26cf(e,t){var n=a1_0x4794();return(a1_0x26cf=function(e,t){return n[e-=230]})(e,t)}Writer$1[a1_0x2c401b(733)].bytes=function(e){var t=a1_0x2c401b,n=e[t(843)]>>>0;if(!n)return this[t(497)](writeByte,1,0);if(util$4.isString(e)){var r=Writer$1[t(266)](n=base64[t(843)](e));base64[t(672)](e,r,0),e=r}return this.uint32(n)[t(497)](writeBytes,n,e)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(662)]=function(e){var t=a1_0x2c401b,n=utf8$1[t(843)](e);return n?this[t(350)](n)[t(497)](utf8$1[t(611)],n,e):this._push(writeByte,1,0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(356)]=function(){var e=a1_0x2c401b;return this.states=new State(this),this.head=this[e(539)]=new Op(noop,0,0),this[e(253)]=0,this},Writer$1[a1_0x2c401b(733)].reset=function(){var e=a1_0x2c401b;return this.states?(this[e(360)]=this.states[e(360)],this[e(539)]=this[e(367)][e(539)],this[e(253)]=this[e(367)][e(253)],this.states=this[e(367)][e(754)]):(this[e(360)]=this[e(539)]=new Op(noop,0,0),this[e(253)]=0),this},Writer$1.prototype.ldelim=function(){var e=a1_0x2c401b,t=this[e(360)],n=this[e(539)],r=this[e(253)];return this.reset().uint32(r),r&&(this[e(539)][e(754)]=t.next,this[e(539)]=n,this.len+=r),this},Writer$1.prototype[a1_0x2c401b(457)]=function(){for(var e=a1_0x2c401b,t=this[e(360)][e(754)],n=this[e(803)][e(266)](this[e(253)]),r=0;t;)t.fn(t[e(267)],n,r),r+=t[e(253)],t=t[e(754)];return n},Writer$1[a1_0x2c401b(875)]=function(e){var t=a1_0x2c401b;BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1[t(875)]()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](Writer[a1_0x2c401b(733)])).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer[a1_0x2c401b(840)](this)}function writeStringBuffer(e,t,n){var r=a1_0x2c401b;e[r(843)]<40?util$3.utf8.write(e,t,n):t[r(420)]?t[r(420)](e,n):t.write(e,n)}BufferWriter[a1_0x2c401b(875)]=function(){var e=a1_0x2c401b;BufferWriter[e(266)]=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3[e(779)]&&util$3.Buffer[e(733)]instanceof Uint8Array&&"set"===util$3[e(779)].prototype[e(298)].name?function(t,n,r){n[e(298)](t,r)}:function(t,n,r){var i=e;if(t[i(872)])t[i(872)](n,r,0,t[i(843)]);else for(var s=0;s<t.length;)n[r++]=t[s++]}},BufferWriter[a1_0x2c401b(733)][a1_0x2c401b(745)]=function(e){var t=a1_0x2c401b;util$3[t(624)](e)&&(e=util$3._Buffer_from(e,t(261)));var n=e.length>>>0;return this[t(350)](n),n&&this[t(497)](BufferWriter[t(768)],n,e),this},BufferWriter[a1_0x2c401b(733)].string=function(e){var t=a1_0x2c401b,n=util$3[t(779)][t(734)](e);return this[t(350)](n),n&&this[t(497)](writeStringBuffer,n,e),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2[a1_0x2c401b(690)],utf8=util$2[a1_0x2c401b(347)];function indexOutOfRange(e,t){var n=a1_0x2c401b;return RangeError(n(764)+e[n(346)]+n(630)+(t||1)+" > "+e.len)}function Reader$1(e){var t=a1_0x2c401b;this[t(822)]=e,this[t(346)]=0,this[t(253)]=e[t(843)]}var create_array=typeof Uint8Array!==a1_0x2c401b(718)?function(e){var t=a1_0x2c401b;if(e instanceof Uint8Array||Array[t(812)](e))return new Reader$1(e);throw Error(t(627))}:function(e){var t=a1_0x2c401b;if(Array[t(812)](e))return new Reader$1(e);throw Error(t(627))},create=function(){var e=a1_0x2c401b;return util$2[e(779)]?function(t){var n=e;return(Reader$1[n(644)]=function(e){var t=n;return util$2[t(779)][t(385)](e)?new BufferReader$1(e):create_array(e)})(t)}:create_array},_0x46f220;function readLongVarint(){var e=a1_0x2c401b,t=new LongBits(0,0),n=0;if(!(this[e(253)]-this[e(346)]>4)){for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this[e(822)][this.pos])<<7*n)>>>0,this[e(822)][this.pos++]<128)return t}return t.lo=(t.lo|(127&this[e(822)][this[e(346)]++])<<7*n)>>>0,t}for(;n<4;++n)if(t.lo=(t.lo|(127&this[e(822)][this[e(346)]])<<7*n)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this[e(822)][this[e(346)]])>>4)>>>0,this[e(822)][this[e(346)]++]<128)return t;if(n=0,this.len-this.pos>4){for(;n<5;++n)if(t.hi=(t.hi|(127&this[e(822)][this.pos])<<7*n+3)>>>0,this[e(822)][this[e(346)]++]<128)return t}else for(;n<5;++n){if(this[e(346)]>=this[e(253)])throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this[e(822)][this.pos])<<7*n+3)>>>0,this[e(822)][this[e(346)]++]<128)return t}throw Error(e(800))}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){var e=a1_0x2c401b;if(this[e(346)]+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this[e(346)]+=4),readFixed32_end(this[e(822)],this[e(346)]+=4))}Reader$1[a1_0x2c401b(644)]=create(),Reader$1[a1_0x2c401b(733)][a1_0x2c401b(279)]=util$2[a1_0x2c401b(427)][a1_0x2c401b(733)][a1_0x2c401b(896)]||util$2.Array[a1_0x2c401b(733)][a1_0x2c401b(505)],Reader$1.prototype.uint32=(_0x46f220=4294967295,function(){var e=a1_0x26cf;if(_0x46f220=(127&this[e(822)][this[e(346)]])>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this.buf[this[e(346)]])<<7)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this.buf[this[e(346)]])<<14)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this[e(822)][this[e(346)]])<<21)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(15&this[e(822)][this[e(346)]])<<28)>>>0,this.buf[this[e(346)]++]<128)return _0x46f220;if((this[e(346)]+=5)>this[e(253)])throw this[e(346)]=this[e(253)],indexOutOfRange(this,10);return _0x46f220}),Reader$1[a1_0x2c401b(733)].int32=function(){return 0|this[a1_0x2c401b(350)]()},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(348)]=function(){var e=this[a1_0x2c401b(350)]();return e>>>1^-(1&e)|0},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(679)]=function(){return 0!==this[a1_0x2c401b(350)]()},Reader$1.prototype[a1_0x2c401b(535)]=function(){var e=a1_0x2c401b;if(this[e(346)]+4>this[e(253)])throw indexOutOfRange(this,4);return readFixed32_end(this[e(822)],this.pos+=4)},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(743)]=function(){var e=a1_0x2c401b;if(this.pos+4>this[e(253)])throw indexOutOfRange(this,4);return 0|readFixed32_end(this[e(822)],this[e(346)]+=4)},Reader$1.prototype.float=function(){var e=a1_0x2c401b;if(this[e(346)]+4>this[e(253)])throw indexOutOfRange(this,4);var t=util$2[e(720)][e(650)](this[e(822)],this[e(346)]);return this[e(346)]+=4,t},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(878)]=function(){var e=a1_0x2c401b;if(this[e(346)]+8>this[e(253)])throw indexOutOfRange(this,4);var t=util$2[e(720)][e(485)](this[e(822)],this[e(346)]);return this[e(346)]+=8,t},Reader$1[a1_0x2c401b(733)].bytes=function(){var e=a1_0x2c401b,t=this[e(350)](),n=this.pos,r=this[e(346)]+t;if(r>this[e(253)])throw indexOutOfRange(this,t);return this[e(346)]+=t,Array[e(812)](this.buf)?this[e(822)].slice(n,r):n===r?new(this.buf[e(803)])(0):this[e(279)][e(840)](this[e(822)],n,r)},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(662)]=function(){var e=a1_0x2c401b,t=this[e(745)]();return utf8[e(408)](t,0,t[e(843)])},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(262)]=function(e){var t=a1_0x2c401b;if("number"==typeof e){if(this[t(346)]+e>this[t(253)])throw indexOutOfRange(this,e);this[t(346)]+=e}else do{if(this[t(346)]>=this[t(253)])throw indexOutOfRange(this)}while(128&this[t(822)][this[t(346)]++]);return this},Reader$1[a1_0x2c401b(733)].skipType=function(e){var t=a1_0x2c401b;switch(e){case 0:this[t(262)]();break;case 1:this[t(262)](8);break;case 2:this[t(262)](this[t(350)]());break;case 3:for(;4!=(e=7&this[t(350)]());)this.skipType(e);break;case 5:this[t(262)](4);break;default:throw Error(t(639)+e+t(328)+this[t(346)])}return this},Reader$1[a1_0x2c401b(875)]=function(e){var t=a1_0x2c401b;BufferReader$1=e,Reader$1[t(644)]=create(),BufferReader$1[t(875)]();var n=util$2[t(278)]?"toLong":t(845);util$2[t(468)](Reader$1.prototype,{int64:function(){return readLongVarint[t(840)](this)[n](!1)},uint64:function(){return readLongVarint[t(840)](this)[n](!0)},sint64:function(){var e=t;return readLongVarint.call(this)[e(796)]()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader[a1_0x2c401b(733)]))[a1_0x2c401b(803)]=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){var e=a1_0x2c401b;util$1.Buffer&&(BufferReader[e(733)][e(279)]=util$1[e(779)][e(733)][e(505)])},BufferReader[a1_0x2c401b(733)].string=function(){var e=a1_0x2c401b,t=this[e(350)]();return this.buf[e(842)]?this[e(822)][e(842)](this.pos,this[e(346)]=Math.min(this[e(346)]+t,this[e(253)])):this[e(822)][e(762)](e(570),this.pos,this[e(346)]=Math.min(this[e(346)]+t,this[e(253)]))},BufferReader[a1_0x2c401b(875)]();var rpc={},service=Service,util=requireMinimal(),_0x422d19;function Service(e,t,n){var r=a1_0x2c401b;if("function"!=typeof e)throw TypeError(r(900));util[r(445)][r(840)](this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Service[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](util[a1_0x2c401b(445)][a1_0x2c401b(733)]))[a1_0x2c401b(803)]=Service,Service[a1_0x2c401b(733)][a1_0x2c401b(809)]=function e(t,n,r,i,s){var a=a1_0x2c401b;if(!i)throw TypeError(a(454));var o=this;if(!s)return util[a(591)](e,o,t,n,r,i);if(o.rpcImpl)try{return o[a(910)](t,n[o[a(476)]?a(381):"encode"](i).finish(),(function(e,n){var i=a;if(e)return o.emit(i(273),e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":i(672)](n)}catch(u){return o[i(382)](i(273),u,t),s(u)}return o[i(382)](i(687),n,t),s(null,n)}o[i(552)](!0)}))}catch(u){return o[a(382)]("error",u,t),void setTimeout((function(){s(u)}),0)}else setTimeout((function(){s(Error(a(801)))}),0)},Service[a1_0x2c401b(733)].end=function(e){var t=a1_0x2c401b;return this[t(910)]&&(e||this[t(910)](null,null,null),this[t(910)]=null,this.emit(t(552))[t(513)]()),this},_0x422d19=rpc,_0x422d19[a1_0x2c401b(883)]=service;var roots={},_0x1725e0;function createBaseAvatarPredictionMessage(){return{blendShapes:void 0,rotation:void 0,transform:void 0}}(function(e){var t=a1_0x2c401b,n=e;function r(){var e=t;n[e(850)][e(875)](),n[e(727)][e(875)](n[e(294)]),n.Reader[e(875)](n[e(575)])}n[t(341)]=t(514),n[t(727)]=writer,n[t(294)]=writer_buffer,n[t(432)]=reader,n[t(575)]=reader_buffer,n[t(850)]=requireMinimal(),n[t(441)]=rpc,n[t(571)]=roots,n.configure=r,r()})(indexMinimal),_0x1725e0=minimal$1,_0x1725e0.exports=indexMinimal;const AvatarPredictionMessage={encode(e,t=minimal$1[a1_0x2c401b(515)][a1_0x2c401b(727)][a1_0x2c401b(644)]()){var n=a1_0x2c401b;return void 0!==e[n(305)]&&BlendShapes[n(819)](e[n(305)],t[n(350)](10)[n(356)]())[n(331)](),void 0!==e[n(477)]&&Rotation[n(819)](e[n(477)],t[n(350)](18).fork())[n(331)](),void 0!==e[n(386)]&&Transform[n(819)](e[n(386)],t[n(350)](26).fork()).ldelim(),t},decode(e,t){var n=a1_0x2c401b;const r=e instanceof minimal$1[n(515)][n(432)]?e:new(minimal$1[n(515)][n(432)])(e);let i=void 0===t?r.len:r[n(346)]+t;const s=createBaseAvatarPredictionMessage();for(;r.pos<i;){const e=r[n(350)]();switch(e>>>3){case 1:s[n(305)]=BlendShapes.decode(r,r[n(350)]());break;case 2:s[n(477)]=Rotation.decode(r,r[n(350)]());break;case 3:s.transform=Transform.decode(r,r[n(350)]());break;default:r[n(657)](7&e)}}return s},fromJSON(e){var t=a1_0x2c401b;return{blendShapes:isSet(e[t(305)])?BlendShapes[t(886)](e[t(305)]):void 0,rotation:isSet(e[t(477)])?Rotation.fromJSON(e[t(477)]):void 0,transform:isSet(e[t(386)])?Transform[t(886)](e[t(386)]):void 0}},toJSON(e){var t=a1_0x2c401b;const n={};return void 0!==e.blendShapes&&(n.blendShapes=e[t(305)]?BlendShapes[t(531)](e[t(305)]):void 0),void 0!==e.rotation&&(n.rotation=e.rotation?Rotation[t(531)](e[t(477)]):void 0),void 0!==e[t(386)]&&(n[t(386)]=e[t(386)]?Transform[t(531)](e[t(386)]):void 0),n},fromPartial(e){var t=a1_0x2c401b;const n=createBaseAvatarPredictionMessage();return n[t(305)]=void 0!==e[t(305)]&&null!==e[t(305)]?BlendShapes.fromPartial(e[t(305)]):void 0,n.rotation=void 0!==e.rotation&&null!==e[t(477)]?Rotation[t(798)](e[t(477)]):void 0,n[t(386)]=void 0!==e[t(386)]&&null!==e[t(386)]?Transform.fromPartial(e[t(386)]):void 0,n}};function createBaseBlendShapes(){return{browDown_L:0,browDown_R:0,browInnerUp:0,browOuterUp_L:0,browOuterUp_R:0,cheekSquint_L:0,cheekSquint_R:0,eyeBlink_L:0,eyeBlink_R:0,eyeLookDown_L:0,eyeLookDown_R:0,eyeLookIn_L:0,eyeLookIn_R:0,eyeLookOut_L:0,eyeLookOut_R:0,eyeLookUp_L:0,eyeLookUp_R:0,eyeSquint_L:0,eyeSquint_R:0,eyeWide_L:0,eyeWide_R:0,jawLeft:0,jawOpen:0,jawRight:0,mouthClose:0,mouthDimple_L:0,mouthDimple_R:0,mouthFrown_L:0,mouthFrown_R:0,mouthFunnel:0,mouthLeft:0,mouthLowerDown_L:0,mouthLowerDown_R:0,mouthPress_L:0,mouthPress_R:0,mouthPucker:0,mouthRight:0,mouthRollLower:0,mouthRollUpper:0,mouthShrugLower:0,mouthShrugUpper:0,mouthSmile_L:0,mouthSmile_R:0,mouthStretch_L:0,mouthStretch_R:0,mouthUpperUp_L:0,mouthUpperUp_R:0,noseSneer_L:0,noseSneer_R:0,cheekPuff:0,jawForward:0,tongueOut:0}}const BlendShapes={encode(e,t=minimal$1.exports[a1_0x2c401b(727)].create()){var n=a1_0x2c401b;return 0!==e[n(713)]&&t[n(350)](13).float(e.browDown_L),0!==e[n(254)]&&t[n(350)](21)[n(720)](e.browDown_R),0!==e[n(257)]&&t.uint32(29)[n(720)](e.browInnerUp),0!==e[n(358)]&&t[n(350)](37)[n(720)](e[n(358)]),0!==e[n(482)]&&t[n(350)](45)[n(720)](e[n(482)]),0!==e[n(649)]&&t[n(350)](53)[n(720)](e[n(649)]),0!==e[n(654)]&&t[n(350)](61).float(e[n(654)]),0!==e.eyeBlink_L&&t[n(350)](69)[n(720)](e[n(828)]),0!==e.eyeBlink_R&&t[n(350)](77).float(e[n(601)]),0!==e[n(548)]&&t[n(350)](85)[n(720)](e[n(548)]),0!==e[n(774)]&&t[n(350)](93)[n(720)](e[n(774)]),0!==e.eyeLookIn_L&&t[n(350)](101)[n(720)](e[n(698)]),0!==e[n(545)]&&t[n(350)](109)[n(720)](e[n(545)]),0!==e.eyeLookOut_L&&t.uint32(117)[n(720)](e[n(357)]),0!==e[n(345)]&&t[n(350)](125).float(e.eyeLookOut_R),0!==e[n(242)]&&t[n(350)](133)[n(720)](e.eyeLookUp_L),0!==e.eyeLookUp_R&&t[n(350)](141)[n(720)](e.eyeLookUp_R),0!==e[n(759)]&&t.uint32(149)[n(720)](e.eyeSquint_L),0!==e[n(506)]&&t[n(350)](157)[n(720)](e[n(506)]),0!==e[n(765)]&&t[n(350)](165)[n(720)](e.eyeWide_L),0!==e[n(780)]&&t[n(350)](173).float(e[n(780)]),0!==e[n(826)]&&t[n(350)](181)[n(720)](e[n(826)]),0!==e[n(917)]&&t.uint32(189)[n(720)](e.jawOpen),0!==e.jawRight&&t[n(350)](197).float(e.jawRight),0!==e[n(333)]&&t[n(350)](205).float(e[n(333)]),0!==e[n(336)]&&t[n(350)](213)[n(720)](e[n(336)]),0!==e[n(741)]&&t[n(350)](221)[n(720)](e[n(741)]),0!==e.mouthFrown_L&&t[n(350)](229).float(e[n(291)]),0!==e[n(923)]&&t[n(350)](237).float(e[n(923)]),0!==e[n(660)]&&t[n(350)](245)[n(720)](e[n(660)]),0!==e[n(788)]&&t[n(350)](253)[n(720)](e[n(788)]),0!==e[n(237)]&&t.uint32(261)[n(720)](e.mouthLowerDown_L),0!==e[n(283)]&&t[n(350)](269)[n(720)](e[n(283)]),0!==e.mouthPress_L&&t.uint32(277)[n(720)](e.mouthPress_L),0!==e.mouthPress_R&&t[n(350)](285).float(e.mouthPress_R),0!==e.mouthPucker&&t[n(350)](293)[n(720)](e[n(714)]),0!==e[n(517)]&&t[n(350)](301)[n(720)](e.mouthRight),0!==e[n(767)]&&t[n(350)](309)[n(720)](e.mouthRollLower),0!==e.mouthRollUpper&&t[n(350)](317)[n(720)](e.mouthRollUpper),0!==e[n(461)]&&t[n(350)](325)[n(720)](e[n(461)]),0!==e.mouthShrugUpper&&t[n(350)](333)[n(720)](e[n(744)]),0!==e[n(667)]&&t[n(350)](341)[n(720)](e[n(667)]),0!==e.mouthSmile_R&&t[n(350)](349)[n(720)](e[n(276)]),0!==e[n(302)]&&t[n(350)](357).float(e.mouthStretch_L),0!==e.mouthStretch_R&&t[n(350)](365).float(e[n(831)]),0!==e[n(640)]&&t.uint32(373)[n(720)](e[n(640)]),0!==e[n(362)]&&t[n(350)](381).float(e[n(362)]),0!==e[n(619)]&&t.uint32(389)[n(720)](e.noseSneer_L),0!==e[n(597)]&&t[n(350)](397)[n(720)](e.noseSneer_R),0!==e[n(656)]&&t.uint32(405).float(e[n(656)]),0!==e[n(250)]&&t.uint32(413).float(e[n(250)]),0!==e[n(428)]&&t[n(350)](421)[n(720)](e[n(428)]),t},decode(e,t){var n=a1_0x2c401b;const r=e instanceof minimal$1.exports[n(432)]?e:new(minimal$1[n(515)][n(432)])(e);let i=void 0===t?r[n(253)]:r[n(346)]+t;const s=createBaseBlendShapes();for(;r[n(346)]<i;){const e=r[n(350)]();switch(e>>>3){case 1:s.browDown_L=r[n(720)]();break;case 2:s[n(254)]=r.float();break;case 3:s[n(257)]=r.float();break;case 4:s[n(358)]=r[n(720)]();break;case 5:s[n(482)]=r[n(720)]();break;case 6:s.cheekSquint_L=r[n(720)]();break;case 7:s[n(654)]=r.float();break;case 8:s.eyeBlink_L=r[n(720)]();break;case 9:s[n(601)]=r[n(720)]();break;case 10:s.eyeLookDown_L=r[n(720)]();break;case 11:s[n(774)]=r[n(720)]();break;case 12:s.eyeLookIn_L=r[n(720)]();break;case 13:s[n(545)]=r[n(720)]();break;case 14:s[n(357)]=r[n(720)]();break;case 15:s[n(345)]=r[n(720)]();break;case 16:s[n(242)]=r[n(720)]();break;case 17:s.eyeLookUp_R=r[n(720)]();break;case 18:s[n(759)]=r[n(720)]();break;case 19:s[n(506)]=r.float();break;case 20:s.eyeWide_L=r[n(720)]();break;case 21:s.eyeWide_R=r[n(720)]();break;case 22:s[n(826)]=r[n(720)]();break;case 23:s[n(917)]=r.float();break;case 24:s.jawRight=r[n(720)]();break;case 25:s[n(333)]=r[n(720)]();break;case 26:s.mouthDimple_L=r.float();break;case 27:s[n(741)]=r.float();break;case 28:s[n(291)]=r[n(720)]();break;case 29:s[n(923)]=r[n(720)]();break;case 30:s.mouthFunnel=r[n(720)]();break;case 31:s[n(788)]=r[n(720)]();break;case 32:s.mouthLowerDown_L=r[n(720)]();break;case 33:s[n(283)]=r[n(720)]();break;case 34:s[n(533)]=r[n(720)]();break;case 35:s[n(246)]=r[n(720)]();break;case 36:s[n(714)]=r.float();break;case 37:s[n(517)]=r[n(720)]();break;case 38:s[n(767)]=r.float();break;case 39:s[n(905)]=r[n(720)]();break;case 40:s[n(461)]=r.float();break;case 41:s[n(744)]=r.float();break;case 42:s[n(667)]=r[n(720)]();break;case 43:s.mouthSmile_R=r.float();break;case 44:s.mouthStretch_L=r[n(720)]();break;case 45:s[n(831)]=r[n(720)]();break;case 46:s[n(640)]=r[n(720)]();break;case 47:s[n(362)]=r[n(720)]();break;case 48:s[n(619)]=r[n(720)]();break;case 49:s[n(597)]=r[n(720)]();break;case 50:s[n(656)]=r[n(720)]();break;case 51:s.jawForward=r[n(720)]();break;case 52:s[n(428)]=r[n(720)]();break;default:r[n(657)](7&e)}}return s},fromJSON(e){var t=a1_0x2c401b;return{browDown_L:isSet(e[t(713)])?Number(e[t(713)]):0,browDown_R:isSet(e[t(254)])?Number(e[t(254)]):0,browInnerUp:isSet(e.browInnerUp)?Number(e[t(257)]):0,browOuterUp_L:isSet(e[t(358)])?Number(e[t(358)]):0,browOuterUp_R:isSet(e[t(482)])?Number(e[t(482)]):0,cheekSquint_L:isSet(e[t(649)])?Number(e[t(649)]):0,cheekSquint_R:isSet(e[t(654)])?Number(e[t(654)]):0,eyeBlink_L:isSet(e[t(828)])?Number(e[t(828)]):0,eyeBlink_R:isSet(e.eyeBlink_R)?Number(e[t(601)]):0,eyeLookDown_L:isSet(e[t(548)])?Number(e.eyeLookDown_L):0,eyeLookDown_R:isSet(e[t(774)])?Number(e[t(774)]):0,eyeLookIn_L:isSet(e[t(698)])?Number(e.eyeLookIn_L):0,eyeLookIn_R:isSet(e[t(545)])?Number(e.eyeLookIn_R):0,eyeLookOut_L:isSet(e[t(357)])?Number(e[t(357)]):0,eyeLookOut_R:isSet(e[t(345)])?Number(e[t(345)]):0,eyeLookUp_L:isSet(e.eyeLookUp_L)?Number(e.eyeLookUp_L):0,eyeLookUp_R:isSet(e[t(907)])?Number(e.eyeLookUp_R):0,eyeSquint_L:isSet(e[t(759)])?Number(e[t(759)]):0,eyeSquint_R:isSet(e[t(506)])?Number(e.eyeSquint_R):0,eyeWide_L:isSet(e[t(765)])?Number(e.eyeWide_L):0,eyeWide_R:isSet(e[t(780)])?Number(e[t(780)]):0,jawLeft:isSet(e[t(826)])?Number(e[t(826)]):0,jawOpen:isSet(e[t(917)])?Number(e[t(917)]):0,jawRight:isSet(e[t(330)])?Number(e[t(330)]):0,mouthClose:isSet(e[t(333)])?Number(e[t(333)]):0,mouthDimple_L:isSet(e[t(336)])?Number(e[t(336)]):0,mouthDimple_R:isSet(e[t(741)])?Number(e[t(741)]):0,mouthFrown_L:isSet(e[t(291)])?Number(e[t(291)]):0,mouthFrown_R:isSet(e.mouthFrown_R)?Number(e[t(923)]):0,mouthFunnel:isSet(e[t(660)])?Number(e.mouthFunnel):0,mouthLeft:isSet(e.mouthLeft)?Number(e[t(788)]):0,mouthLowerDown_L:isSet(e[t(237)])?Number(e[t(237)]):0,mouthLowerDown_R:isSet(e[t(283)])?Number(e[t(283)]):0,mouthPress_L:isSet(e[t(533)])?Number(e.mouthPress_L):0,mouthPress_R:isSet(e[t(246)])?Number(e[t(246)]):0,mouthPucker:isSet(e[t(714)])?Number(e.mouthPucker):0,mouthRight:isSet(e[t(517)])?Number(e[t(517)]):0,mouthRollLower:isSet(e[t(767)])?Number(e.mouthRollLower):0,mouthRollUpper:isSet(e[t(905)])?Number(e[t(905)]):0,mouthShrugLower:isSet(e[t(461)])?Number(e[t(461)]):0,mouthShrugUpper:isSet(e.mouthShrugUpper)?Number(e[t(744)]):0,mouthSmile_L:isSet(e.mouthSmile_L)?Number(e[t(667)]):0,mouthSmile_R:isSet(e[t(276)])?Number(e.mouthSmile_R):0,mouthStretch_L:isSet(e[t(302)])?Number(e[t(302)]):0,mouthStretch_R:isSet(e[t(831)])?Number(e[t(831)]):0,mouthUpperUp_L:isSet(e[t(640)])?Number(e[t(640)]):0,mouthUpperUp_R:isSet(e[t(362)])?Number(e[t(362)]):0,noseSneer_L:isSet(e[t(619)])?Number(e[t(619)]):0,noseSneer_R:isSet(e[t(597)])?Number(e.noseSneer_R):0,cheekPuff:isSet(e[t(656)])?Number(e[t(656)]):0,jawForward:isSet(e[t(250)])?Number(e.jawForward):0,tongueOut:isSet(e[t(428)])?Number(e[t(428)]):0}},toJSON(e){var t=a1_0x2c401b;const n={};return void 0!==e.browDown_L&&(n.browDown_L=e[t(713)]),void 0!==e[t(254)]&&(n.browDown_R=e[t(254)]),void 0!==e[t(257)]&&(n[t(257)]=e[t(257)]),void 0!==e[t(358)]&&(n[t(358)]=e[t(358)]),void 0!==e[t(482)]&&(n.browOuterUp_R=e[t(482)]),void 0!==e[t(649)]&&(n.cheekSquint_L=e[t(649)]),void 0!==e[t(654)]&&(n[t(654)]=e.cheekSquint_R),void 0!==e.eyeBlink_L&&(n[t(828)]=e[t(828)]),void 0!==e[t(601)]&&(n[t(601)]=e.eyeBlink_R),void 0!==e[t(548)]&&(n.eyeLookDown_L=e.eyeLookDown_L),void 0!==e[t(774)]&&(n[t(774)]=e[t(774)]),void 0!==e.eyeLookIn_L&&(n[t(698)]=e[t(698)]),void 0!==e[t(545)]&&(n[t(545)]=e[t(545)]),void 0!==e[t(357)]&&(n[t(357)]=e[t(357)]),void 0!==e[t(345)]&&(n[t(345)]=e[t(345)]),void 0!==e.eyeLookUp_L&&(n[t(242)]=e.eyeLookUp_L),void 0!==e[t(907)]&&(n[t(907)]=e[t(907)]),void 0!==e[t(759)]&&(n[t(759)]=e[t(759)]),void 0!==e.eyeSquint_R&&(n[t(506)]=e[t(506)]),void 0!==e[t(765)]&&(n[t(765)]=e.eyeWide_L),void 0!==e.eyeWide_R&&(n[t(780)]=e[t(780)]),void 0!==e[t(826)]&&(n[t(826)]=e[t(826)]),void 0!==e[t(917)]&&(n.jawOpen=e.jawOpen),void 0!==e.jawRight&&(n[t(330)]=e[t(330)]),void 0!==e[t(333)]&&(n.mouthClose=e.mouthClose),void 0!==e[t(336)]&&(n[t(336)]=e[t(336)]),void 0!==e[t(741)]&&(n[t(741)]=e[t(741)]),void 0!==e[t(291)]&&(n[t(291)]=e[t(291)]),void 0!==e.mouthFrown_R&&(n[t(923)]=e[t(923)]),void 0!==e[t(660)]&&(n[t(660)]=e[t(660)]),void 0!==e[t(788)]&&(n[t(788)]=e[t(788)]),void 0!==e[t(237)]&&(n[t(237)]=e[t(237)]),void 0!==e[t(283)]&&(n[t(283)]=e.mouthLowerDown_R),void 0!==e.mouthPress_L&&(n[t(533)]=e[t(533)]),void 0!==e[t(246)]&&(n[t(246)]=e[t(246)]),void 0!==e[t(714)]&&(n[t(714)]=e.mouthPucker),void 0!==e[t(517)]&&(n[t(517)]=e.mouthRight),void 0!==e.mouthRollLower&&(n.mouthRollLower=e.mouthRollLower),void 0!==e[t(905)]&&(n[t(905)]=e[t(905)]),void 0!==e.mouthShrugLower&&(n[t(461)]=e[t(461)]),void 0!==e[t(744)]&&(n[t(744)]=e.mouthShrugUpper),void 0!==e[t(667)]&&(n[t(667)]=e.mouthSmile_L),void 0!==e[t(276)]&&(n[t(276)]=e[t(276)]),void 0!==e.mouthStretch_L&&(n[t(302)]=e[t(302)]),void 0!==e[t(831)]&&(n[t(831)]=e[t(831)]),void 0!==e.mouthUpperUp_L&&(n[t(640)]=e[t(640)]),void 0!==e.mouthUpperUp_R&&(n[t(362)]=e[t(362)]),void 0!==e[t(619)]&&(n[t(619)]=e[t(619)]),void 0!==e[t(597)]&&(n[t(597)]=e[t(597)]),void 0!==e.cheekPuff&&(n[t(656)]=e.cheekPuff),void 0!==e[t(250)]&&(n[t(250)]=e.jawForward),void 0!==e[t(428)]&&(n[t(428)]=e.tongueOut),n},fromPartial(e){var t,n,r,i,s,a,o,u,l,c,h,d,p,f,m,g,y,v,b,_,x,w,S,E,C,k,T,A,M,N,I,D,R,L,O,F,P,z,$,B,U,V,W,H,G,j,q,K,X,Z,Y,J,Q=a1_0x2c401b;const ee=createBaseBlendShapes();return ee[Q(713)]=null!==(t=e[Q(713)])&&void 0!==t?t:0,ee[Q(254)]=null!==(n=e[Q(254)])&&void 0!==n?n:0,ee[Q(257)]=null!==(r=e.browInnerUp)&&void 0!==r?r:0,ee[Q(358)]=null!==(i=e[Q(358)])&&void 0!==i?i:0,ee[Q(482)]=null!==(s=e[Q(482)])&&void 0!==s?s:0,ee[Q(649)]=null!==(a=e[Q(649)])&&void 0!==a?a:0,ee[Q(654)]=null!==(o=e.cheekSquint_R)&&void 0!==o?o:0,ee[Q(828)]=null!==(u=e.eyeBlink_L)&&void 0!==u?u:0,ee[Q(601)]=null!==(l=e[Q(601)])&&void 0!==l?l:0,ee[Q(548)]=null!==(c=e[Q(548)])&&void 0!==c?c:0,ee.eyeLookDown_R=null!==(h=e[Q(774)])&&void 0!==h?h:0,ee.eyeLookIn_L=null!==(d=e[Q(698)])&&void 0!==d?d:0,ee[Q(545)]=null!==(p=e[Q(545)])&&void 0!==p?p:0,ee[Q(357)]=null!==(f=e[Q(357)])&&void 0!==f?f:0,ee[Q(345)]=null!==(m=e[Q(345)])&&void 0!==m?m:0,ee.eyeLookUp_L=null!==(g=e[Q(242)])&&void 0!==g?g:0,ee[Q(907)]=null!==(y=e[Q(907)])&&void 0!==y?y:0,ee[Q(759)]=null!==(v=e[Q(759)])&&void 0!==v?v:0,ee[Q(506)]=null!==(b=e[Q(506)])&&void 0!==b?b:0,ee[Q(765)]=null!==(_=e[Q(765)])&&void 0!==_?_:0,ee[Q(780)]=null!==(x=e.eyeWide_R)&&void 0!==x?x:0,ee[Q(826)]=null!==(w=e[Q(826)])&&void 0!==w?w:0,ee.jawOpen=null!==(S=e.jawOpen)&&void 0!==S?S:0,ee[Q(330)]=null!==(E=e.jawRight)&&void 0!==E?E:0,ee.mouthClose=null!==(C=e[Q(333)])&&void 0!==C?C:0,ee[Q(336)]=null!==(k=e[Q(336)])&&void 0!==k?k:0,ee.mouthDimple_R=null!==(T=e[Q(741)])&&void 0!==T?T:0,ee.mouthFrown_L=null!==(A=e.mouthFrown_L)&&void 0!==A?A:0,ee[Q(923)]=null!==(M=e[Q(923)])&&void 0!==M?M:0,ee[Q(660)]=null!==(N=e[Q(660)])&&void 0!==N?N:0,ee[Q(788)]=null!==(I=e[Q(788)])&&void 0!==I?I:0,ee[Q(237)]=null!==(D=e[Q(237)])&&void 0!==D?D:0,ee.mouthLowerDown_R=null!==(R=e[Q(283)])&&void 0!==R?R:0,ee.mouthPress_L=null!==(L=e[Q(533)])&&void 0!==L?L:0,ee[Q(246)]=null!==(O=e[Q(246)])&&void 0!==O?O:0,ee[Q(714)]=null!==(F=e[Q(714)])&&void 0!==F?F:0,ee.mouthRight=null!==(P=e[Q(517)])&&void 0!==P?P:0,ee.mouthRollLower=null!==(z=e[Q(767)])&&void 0!==z?z:0,ee.mouthRollUpper=null!==($=e[Q(905)])&&void 0!==$?$:0,ee[Q(461)]=null!==(B=e.mouthShrugLower)&&void 0!==B?B:0,ee.mouthShrugUpper=null!==(U=e.mouthShrugUpper)&&void 0!==U?U:0,ee.mouthSmile_L=null!==(V=e.mouthSmile_L)&&void 0!==V?V:0,ee[Q(276)]=null!==(W=e[Q(276)])&&void 0!==W?W:0,ee[Q(302)]=null!==(H=e[Q(302)])&&void 0!==H?H:0,ee[Q(831)]=null!==(G=e[Q(831)])&&void 0!==G?G:0,ee[Q(640)]=null!==(j=e.mouthUpperUp_L)&&void 0!==j?j:0,ee[Q(362)]=null!==(q=e[Q(362)])&&void 0!==q?q:0,ee[Q(619)]=null!==(K=e.noseSneer_L)&&void 0!==K?K:0,ee[Q(597)]=null!==(X=e[Q(597)])&&void 0!==X?X:0,ee[Q(656)]=null!==(Z=e.cheekPuff)&&void 0!==Z?Z:0,ee[Q(250)]=null!==(Y=e[Q(250)])&&void 0!==Y?Y:0,ee[Q(428)]=null!==(J=e[Q(428)])&&void 0!==J?J:0,ee}};function createBaseRotation(){return{pitch:void 0,roll:void 0,yaw:void 0}}const Rotation={encode(e,t=minimal$1[a1_0x2c401b(515)].Writer[a1_0x2c401b(644)]()){var n=a1_0x2c401b;return void 0!==e[n(547)]&&t.uint32(13).float(e[n(547)]),void 0!==e.roll&&t[n(350)](21).float(e[n(921)]),void 0!==e[n(288)]&&t[n(350)](29)[n(720)](e[n(288)]),t},decode(e,t){var n=a1_0x2c401b;const r=e instanceof minimal$1.exports.Reader?e:new(minimal$1[n(515)][n(432)])(e);let i=void 0===t?r[n(253)]:r[n(346)]+t;const s=createBaseRotation();for(;r[n(346)]<i;){const e=r[n(350)]();switch(e>>>3){case 1:s[n(547)]=r[n(720)]();break;case 2:s[n(921)]=r[n(720)]();break;case 3:s.yaw=r.float();break;default:r.skipType(7&e)}}return s},fromJSON(e){var t=a1_0x2c401b;return{pitch:isSet(e.pitch)?Number(e.pitch):void 0,roll:isSet(e[t(921)])?Number(e[t(921)]):void 0,yaw:isSet(e[t(288)])?Number(e[t(288)]):void 0}},toJSON(e){var t=a1_0x2c401b;const n={};return void 0!==e[t(547)]&&(n[t(547)]=e[t(547)]),void 0!==e[t(921)]&&(n.roll=e[t(921)]),void 0!==e[t(288)]&&(n[t(288)]=e[t(288)]),n},fromPartial(e){var t,n,r,i=a1_0x2c401b;const s=createBaseRotation();return s.pitch=null!==(t=e[i(547)])&&void 0!==t?t:void 0,s[i(921)]=null!==(n=e[i(921)])&&void 0!==n?n:void 0,s[i(288)]=null!==(r=e[i(288)])&&void 0!==r?r:void 0,s}};function createBaseTransform(){return{x:void 0,y:void 0,z:void 0}}const Transform={encode(e,t=minimal$1[a1_0x2c401b(515)].Writer.create()){var n=a1_0x2c401b;return void 0!==e.x&&t[n(350)](13)[n(720)](e.x),void 0!==e.y&&t[n(350)](21)[n(720)](e.y),void 0!==e.z&&t[n(350)](29)[n(720)](e.z),t},decode(e,t){var n=a1_0x2c401b;const r=e instanceof minimal$1[n(515)][n(432)]?e:new(minimal$1.exports[n(432)])(e);let i=void 0===t?r.len:r[n(346)]+t;const s=createBaseTransform();for(;r[n(346)]<i;){const e=r[n(350)]();switch(e>>>3){case 1:s.x=r[n(720)]();break;case 2:s.y=r.float();break;case 3:s.z=r[n(720)]();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({x:isSet(e.x)?Number(e.x):void 0,y:isSet(e.y)?Number(e.y):void 0,z:isSet(e.z)?Number(e.z):void 0}),toJSON(e){const t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),t},fromPartial(e){var t,n,r;const i=createBaseTransform();return i.x=null!==(t=e.x)&&void 0!==t?t:void 0,i.y=null!==(n=e.y)&&void 0!==n?n:void 0,i.z=null!==(r=e.z)&&void 0!==r?r:void 0,i}};function isSet(e){return null!=e}minimal$1[a1_0x2c401b(515)][a1_0x2c401b(850)][a1_0x2c401b(278)]!==long&&(minimal$1[a1_0x2c401b(515)][a1_0x2c401b(850)].Long=long,minimal$1[a1_0x2c401b(515)].configure());class AvatarPredictionCoder{[a1_0x2c401b(819)](e){var t=a1_0x2c401b;return AvatarPredictionMessage[t(819)](e)[t(457)]()}[a1_0x2c401b(672)](e){return AvatarPredictionMessage[a1_0x2c401b(672)](e)}}},"B+jg":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},CgaS:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("MLWZ"),s=n("9rSQ"),a=n("UnBK"),o=n("SntB"),u=n("hIuj"),l=u.validators;function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=o(this.defaults,t)).method=t.method?t.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!i){var h=[a,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(c),s=Promise.resolve(t);h.length;)s=s.then(h.shift(),h.shift());return s}for(var d=t;r.length;){var p=r.shift(),f=r.shift();try{d=p(d)}catch(m){f(m);break}}try{s=a(d)}catch(m){return Promise.reject(m)}for(;c.length;)s=s.then(c.shift(),c.shift());return s},c.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=c},D9hF:function(e,t,n){"use strict";function r(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,"a",(function(){return r}))},DfZB:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},EJp0:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},EhIR:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},HSsa:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},HoZ9:function(e,t,n){"use strict";function r(e){const t=e(e=>{Error.call(e),e.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,"a",(function(){return r}))},HzFN:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],r[i]=n^=(e^=e<<13)^e<<9,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},I05N:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},Ivzd:function(e,t,n){"use strict";var r=n("meep"),i=n("HoZ9");const s=Object(i.a)(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});var a=n("D9hF");n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));class o{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:i}=this;if(Array.isArray(i))for(const e of i)e.remove(this);else null==i||i.remove(this);const{initialTeardown:a}=this;if(Object(r.a)(a))try{a()}catch(t){e=t instanceof s?t.errors:[t]}const{_teardowns:o}=this;if(o){this._teardowns=null;for(const t of o)try{c(t)}catch(n){e=null!=e?e:[],n instanceof s?e=[...e,...n.errors]:e.push(n)}}if(e)throw new s(e)}}add(e){var t;if(e&&e!==this)if(this.closed)c(e);else{if(e instanceof o){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Object(a.a)(t,e)}remove(e){const{_teardowns:t}=this;t&&Object(a.a)(t,e),e instanceof o&&e._removeParent(this)}}o.EMPTY=(()=>{const e=new o;return e.closed=!0,e})();const u=o.EMPTY;function l(e){return e instanceof o||e&&"closed"in e&&Object(r.a)(e.remove)&&Object(r.a)(e.add)&&Object(r.a)(e.unsubscribe)}function c(e){Object(r.a)(e)?e():e.unsubscribe()}},JEQr:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("yK9s"),s=n("OH9c"),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?u=n("tQ2B"):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(u=n("tQ2B")),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(o(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=!(t&&t.silentJSONParsing)&&"json"===this.responseType;if(n||t&&t.forcedJSONParsing&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw s(i,this,"E_JSON_PARSE");throw i}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l},JNaD:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},LJTJ:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},LYNF:function(e,t,n){"use strict";var r=n("OH9c");e.exports=function(e,t,n,i,s){var a=new Error(e);return r(a,t,n,i,s)}},Lmem:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},MLWZ:function(e,t,n){"use strict";var r=n("xTJ+");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),s=a.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},OH9c:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},OTTw:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PkQR:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],r[i]=n^=(e^=e<<13)^e<<9,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},QSgb:function(e,t,n){var r;!function(i){"use strict";var s,a,o,u="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",c="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},d=!0,p="[DecimalError] Invalid argument: ",f="[object Decimal]",m=Math.floor,g=Math.pow,y=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,v=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,b=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=l.length-1,w=c.length-1,S={toStringTag:f};function E(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=O(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=O(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function C(e,t,n){if(e!==~~e||e<t||e>n)throw Error(p+e)}function k(e,t,n,r){var i,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=g(10,7-t),o=e[i]%s|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),a=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(e[i+1]/s/100|0)==g(10,t-2)-1||(o==s/2||0==o)&&0==(e[i+1]/s/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),a=(r||n<4)&&9999==o||!r&&n>3&&4999==o):a=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(e[i+1]/s/1e3|0)==g(10,t-3)-1,a}function T(e,t,n){for(var r,i,s=[0],a=0,o=e.length;a<o;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=u.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}S.absoluteValue=S.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),M(e)},S.ceil=function(){return M(new this.constructor(this),this.e+1,2)},S.clampedTo=S.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(p+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},S.comparedTo=S.cmp=function(e){var t,n,r,i,s=this,a=s.d,o=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!a||!o)return u&&l?u!==l?u:a===o?0:!a^u<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?u:o[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(t=0,n=(r=a.length)<(i=o.length)?r:i;t<n;++t)if(a[t]!==o[t])return a[t]>o[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},S.cosine=S.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;(r=t.d.length)<32?i=(1/G(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=H(e,1,t.times(i),new e(1));for(var s=n;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,j(r,n)),r.precision=e,r.rounding=t,M(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},S.cubeRoot=S.cbrt=function(){var e,t,n,r,i,s,a,o,u,l,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(d=!1,(s=c.s*g(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new h(s.toString()):(n=E(c.d),(s=((e=c.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=g(n,1/3),e=m((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),a=(e=h.precision)+3;;)if(l=(u=(o=r).times(o).times(o)).plus(c),r=A(l.plus(c).times(o),l.plus(u),a+2,1),E(o.d).slice(0,a)===(n=E(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(M(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(M(o,e+1,0),o.times(o).times(o).eq(c))){r=o;break}a+=4,i=1}return d=!0,M(r,e,h.rounding,t)},S.decimalPlaces=S.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-m(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},S.dividedBy=S.div=function(e){return A(this,new this.constructor(e))},S.dividedToIntegerBy=S.divToInt=function(e){var t=this.constructor;return M(A(this,new t(e),0,1,1),t.precision,t.rounding)},S.equals=S.eq=function(e){return 0===this.cmp(e)},S.floor=function(){return M(new this.constructor(this),this.e+1,3)},S.greaterThan=S.gt=function(e){return this.cmp(e)>0},S.greaterThanOrEqualTo=S.gte=function(e){var t=this.cmp(e);return 1==t||0===t},S.hyperbolicCosine=S.cosh=function(){var e,t,n,r,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.rounding,a.precision=(n=a.precision)+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?t=(1/G(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=H(a,1,s.times(t),new a(1),!0);for(var u,l=e,c=new a(8);l--;)u=s.times(s),s=o.minus(u.times(c.minus(u.times(c))));return M(s,a.precision=n,a.rounding=r,!0)},S.hyperbolicSine=S.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(n=s.rounding,s.precision=(t=s.precision)+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=H(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),i=H(s,2,i=i.times(1/G(5,e=e>16?16:0|e)),i,!0);for(var a,o=new s(5),u=new s(16),l=new s(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(u.times(a).plus(l))))}return s.precision=t,s.rounding=n,M(i,t,n,!0)},S.hyperbolicTangent=S.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+7,r.rounding=1,A(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},S.inverseCosine=S.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return-1!==r?0===r?t.isNeg()?R(n,i,s):new n(0):new n(NaN):t.isZero()?R(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=R(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))},S.inverseHyperbolicCosine=S.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.rounding,r.precision=(e=r.precision)+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,d=!1,n=n.times(n).minus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},S.inverseHyperbolicSine=S.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,d=!1,n=n.times(n).plus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln())},S.inverseHyperbolicTangent=S.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?M(new s(i),e,t,!0):(s.precision=n=r-i.e,i=A(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},S.inverseSine=S.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=R(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},S.inverseTangent=S.atan=function(){var e,t,n,r,i,s,a,o,u,l=this,c=l.constructor,h=c.precision,p=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&h+4<=w)return(a=R(c,h+4,p).times(.25)).s=l.s,a}else{if(!l.s)return new c(NaN);if(h+4<=w)return(a=R(c,h+4,p).times(.5)).s=l.s,a}for(c.precision=o=h+10,c.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(d=!1,t=Math.ceil(o/7),r=1,u=l.times(l),a=new c(l),i=l;-1!==e;)if(i=i.times(u),s=a.minus(i.div(r+=2)),i=i.times(u),void 0!==(a=s.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),d=!0,M(a,c.precision=h,c.rounding=p,!0)},S.isFinite=function(){return!!this.d},S.isInteger=S.isInt=function(){return!!this.d&&m(this.e/7)>this.d.length-2},S.isNaN=function(){return!this.s},S.isNegative=S.isNeg=function(){return this.s<0},S.isPositive=S.isPos=function(){return this.s>0},S.isZero=function(){return!!this.d&&0===this.d[0]},S.lessThan=S.lt=function(e){return this.cmp(e)<0},S.lessThanOrEqualTo=S.lte=function(e){return this.cmp(e)<1},S.logarithm=S.log=function(e){var t,n,r,i,s,a,o,u,l=this.constructor,c=l.precision,h=l.rounding;if(null==e)e=new l(10),t=!0;else{if(n=(e=new l(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new l(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(d=!1,a=B(this,o=c+5),r=t?D(l,o+10):B(e,o),k((u=A(a,r,o,1)).d,i=c,h))do{if(a=B(this,o+=10),r=t?D(l,o+10):B(e,o),u=A(a,r,o,1),!s){+E(u.d).slice(i+1,i+15)+1==1e14&&(u=M(u,c+1,0));break}}while(k(u.d,i+=10,h));return d=!0,M(u,c,h)},S.minus=S.sub=function(e){var t,n,r,i,s,a,o,u,l,c,h,p,f=this,g=f.constructor;if(e=new g(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new g(e.d||f.s!==e.s?f:NaN):e=new g(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(p=e.d,o=g.precision,u=g.rounding,!(l=f.d)[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!l[0])return new g(3===u?-0:0);e=new g(f)}return d?M(e,o,u):e}if(n=m(e.e/7),c=m(f.e/7),l=l.slice(),s=c-n){for((h=s<0)?(t=l,s=-s,a=p.length):(t=p,n=c,a=l.length),s>(r=Math.max(Math.ceil(o/7),a)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((h=(r=l.length)<(a=p.length))&&(a=r),r=0;r<a;r++)if(l[r]!=p[r]){h=l[r]<p[r];break}s=0}for(h&&(t=l,l=p,p=t,e.s=-e.s),r=p.length-(a=l.length);r>0;--r)l[a++]=0;for(r=p.length;r>s;){if(l[--r]<p[r]){for(i=r;i&&0===l[--i];)l[i]=1e7-1;--l[i],l[r]+=1e7}l[r]-=p[r]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(e.d=l,e.e=I(l,n),d?M(e,o,u):e):new g(3===u?-0:0)},S.modulo=S.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?M(new r(n),r.precision,r.rounding):(d=!1,9==r.modulo?(t=A(n,e.abs(),0,3,1)).s*=e.s:t=A(n,e,0,r.modulo,1),t=t.times(e),d=!0,n.minus(t))},S.naturalExponential=S.exp=function(){return $(this)},S.naturalLogarithm=S.ln=function(){return B(this)},S.negated=S.neg=function(){var e=new this.constructor(this);return e.s=-e.s,M(e)},S.plus=S.add=function(e){var t,n,r,i,s,a,o,u,l,c,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new p(e.d||h.s===e.s?h:NaN)):e=new p(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=e.d,o=p.precision,u=p.rounding,!(l=h.d)[0]||!c[0])return c[0]||(e=new p(h)),d?M(e,o,u):e;if(s=m(h.e/7),r=m(e.e/7),l=l.slice(),i=s-r){for(i<0?(n=l,i=-i,a=c.length):(n=c,r=s,a=l.length),i>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=l.length)-(i=c.length)<0&&(i=a,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/1e7|0,l[i]%=1e7;for(t&&(l.unshift(t),++r),a=l.length;0==l[--a];)l.pop();return e.d=l,e.e=I(l,r),d?M(e,o,u):e},S.precision=S.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(p+e);return n.d?(t=L(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},S.round=function(){var e=this,t=e.constructor;return M(new t(e),e.e+1,t.rounding)},S.sine=S.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:H(e,2,t,t);n=1.4*Math.sqrt(r),t=H(e,2,t=t.times(1/G(5,n=n>16?16:0|n)),t);for(var i,s=new e(5),a=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(o))));return t}(r,j(r,n)),r.precision=e,r.rounding=t,M(o>2?n.neg():n,e,t,!0)):new r(NaN)},S.squareRoot=S.sqrt=function(){var e,t,n,r,i,s,a=this,o=a.d,u=a.e,l=a.s,c=a.constructor;if(1!==l||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?a:1/0);for(d=!1,0==(l=Math.sqrt(+a))||l==1/0?(((t=E(o)).length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=m((u+1)/2)-(u<0||u%2),r=new c(t=l==1/0?"5e"+u:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(r=(s=r).plus(A(a,s,n+2,1)).times(.5),E(s.d).slice(0,n)===(t=E(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(M(r,u+1,1),e=!r.times(r).eq(a));break}if(!i&&(M(s,u+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}return d=!0,M(r,u,c.rounding,e)},S.tangent=S.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+10,r.rounding=1,(n=n.sin()).s=1,n=A(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,M(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},S.times=S.mul=function(e){var t,n,r,i,s,a,o,u,l,c=this,h=c.constructor,p=c.d,f=(e=new h(e)).d;if(e.s*=c.s,!(p&&p[0]&&f&&f[0]))return new h(!e.s||p&&!p[0]&&!f||f&&!f[0]&&!p?NaN:p&&f?0*e.s:e.s/0);for(n=m(c.e/7)+m(e.e/7),(u=p.length)<(l=f.length)&&(s=p,p=f,f=s,a=u,u=l,l=a),s=[],r=a=u+l;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)o=s[i]+f[r]*p[i-r-1]+t,s[i--]=o%1e7|0,t=o/1e7|0;s[i]=(s[i]+t)%1e7|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=I(s,n),d?M(e,h.precision,h.rounding):e},S.toBinary=function(e,t){return q(this,2,e,t)},S.toDecimalPlaces=S.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(C(e,0,1e9),void 0===t?t=r.rounding:C(t,0,8),M(n,e+n.e+1,t))},S.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=N(r,!0):(C(e,0,1e9),void 0===t?t=i.rounding:C(t,0,8),n=N(r=M(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},S.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=N(i):(C(e,0,1e9),void 0===t?t=s.rounding:C(t,0,8),n=N(r=M(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},S.toFraction=function(e){var t,n,r,i,s,a,o,u,l,c,h,f,m=this,y=m.d,v=m.constructor;if(!y)return new v(m);if(l=n=new v(1),r=u=new v(0),s=(t=new v(r)).e=L(y)-m.e-1,t.d[0]=g(10,(a=s%7)<0?7+a:a),null==e)e=s>0?t:l;else{if(!(o=new v(e)).isInt()||o.lt(l))throw Error(p+o);e=o.gt(t)?s>0?t:l:o}for(d=!1,o=new v(E(y)),c=v.precision,v.precision=s=7*y.length*2;h=A(o,t,0,1,1),1!=(i=n.plus(h.times(r))).cmp(e);)n=r,r=i,l=u.plus(h.times(i=l)),u=i,t=o.minus(h.times(i=t)),o=i;return i=A(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=m.s,f=A(l,r,s,1).minus(m).abs().cmp(A(u,n,s,1).minus(m).abs())<1?[l,r]:[u,n],v.precision=c,d=!0,f},S.toHexadecimal=S.toHex=function(e,t){return q(this,16,e,t)},S.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:C(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(d=!1,n=A(n,e,0,t,1).times(e),d=!0,M(n)):(e.s=n.s,n=e),n},S.toNumber=function(){return+this},S.toOctal=function(e,t){return q(this,8,e,t)},S.toPower=S.pow=function(e){var t,n,r,i,s,a,o=this,u=o.constructor,l=+(e=new u(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new u(g(+o,l));if((o=new u(o)).eq(1))return o;if(r=u.precision,s=u.rounding,e.eq(1))return M(o,r,s);if((t=m(e.e/7))>=e.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return i=F(u,o,n,r),e.s<0?new u(1).div(i):M(i,r,s);if((a=o.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(t=0!=(n=g(+o,l))&&isFinite(n)?new u(n+"").e:m(l*(Math.log("0."+E(o.d))/Math.LN10+o.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?a/0:0):(d=!1,u.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=$(e.times(B(o,r+n)),r)).d&&k((i=M(i,r+5,1)).d,r,s)&&+E((i=M($(e.times(B(o,(t=r+10)+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=M(i,r+1,0)),i.s=a,d=!0,u.rounding=s,M(i,r,s))},S.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=N(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(C(e,1,1e9),void 0===t?t=i.rounding:C(t,0,8),n=N(r=M(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},S.toSignificantDigits=S.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(C(e,1,1e9),void 0===t?t=n.rounding:C(t,0,8)),M(new n(this),e,t)},S.toString=function(){var e=this,t=e.constructor,n=N(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},S.truncated=S.trunc=function(){return M(new this.constructor(this),this.e+1,1)},S.valueOf=S.toJSON=function(){var e=this,t=e.constructor,n=N(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var A=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)e[s]=(r=e[s]*t+i)%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,e[n]=(i=e[n]<t[n]?1:0)*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o,u,l){var c,h,d,p,f,g,y,v,b,_,x,w,S,E,C,k,T,A,N,I,D=r.constructor,R=r.s==i.s?1:-1,L=r.d,O=i.d;if(!(L&&L[0]&&O&&O[0]))return new D(r.s&&i.s&&(L?!O||L[0]!=O[0]:O)?L&&0==L[0]||!O?0*R:R/0:NaN);for(l?(f=1,h=r.e-i.e):(l=1e7,h=m(r.e/(f=7))-m(i.e/f)),N=O.length,T=L.length,_=(b=new D(R)).d=[],d=0;O[d]==(L[d]||0);d++);if(O[d]>(L[d]||0)&&h--,null==s?(E=s=D.precision,o=D.rounding):E=u?s+(r.e-i.e)+1:s,E<0)_.push(1),g=!0;else{if(E=E/f+2|0,d=0,1==N){for(p=0,O=O[0],E++;(d<T||p)&&E--;d++)_[d]=(C=p*l+(L[d]||0))/O|0,p=C%O|0;g=p||d<T}else{for((p=l/(O[0]+1)|0)>1&&(O=e(O,p,l),L=e(L,p,l),N=O.length,T=L.length),k=N,w=(x=L.slice(0,N)).length;w<N;)x[w++]=0;(I=O.slice()).unshift(0),A=O[0],O[1]>=l/2&&++A;do{p=0,(c=t(O,x,N,w))<0?(S=x[0],N!=w&&(S=S*l+(x[1]||0)),(p=S/A|0)>1?(p>=l&&(p=l-1),1==(c=t(y=e(O,p,l),x,v=y.length,w=x.length))&&(p--,n(y,N<v?I:O,v,l))):(0==p&&(c=p=1),y=O.slice()),(v=y.length)<w&&y.unshift(0),n(x,y,w,l),-1==c&&(c=t(O,x,N,w=x.length))<1&&(p++,n(x,N<w?I:O,w,l)),w=x.length):0===c&&(p++,x=[0]),_[d++]=p,c&&x[0]?x[w++]=L[k]||0:(x=[L[k]],w=1)}while((k++<T||void 0!==x[0])&&E--);g=void 0!==x[0]}_[0]||_.shift()}if(1==f)b.e=h,a=g;else{for(d=1,p=_[0];p>=10;p/=10)d++;b.e=d+h*f-1,M(b,u?s+b.e+1:s,o,g)}return b}}();function M(e,t,n,r){var i,s,a,o,u,l,c,h,p,f=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(i=1,o=h[0];o>=10;o/=10)i++;if((s=t-i)<0)s+=7,u=(c=h[p=0])/g(10,i-(a=t)-1)%10|0;else if((p=Math.ceil((s+1)/7))>=(o=h.length)){if(!r)break e;for(;o++<=p;)h.push(0);c=u=0,i=1,a=(s%=7)-7+1}else{for(c=o=h[p],i=1;o>=10;o/=10)i++;u=(a=(s%=7)-7+i)<0?0:c/g(10,i-a-1)%10|0}if(r=r||t<0||void 0!==h[p+1]||(a<0?c:c%g(10,i-a-1)),l=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(s>0?a>0?c/g(10,i-a):0:h[p-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,l?(h[0]=g(10,(7-(t-=e.e+1)%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==s?(h.length=p,o=1,p--):(h.length=p+1,o=g(10,7-s),h[p]=a>0?(c/g(10,i-a)%g(10,a)|0)*o:0),l)for(;;){if(0==p){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,1e7==h[0]&&(h[0]=1));break}if(h[p]+=o,1e7!=h[p])break;h[p--]=0,o=1}for(s=h.length;0===h[--s];)h.pop()}return d&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function N(e,t,n){if(!e.isFinite())return U(e);var r,i=e.e,s=E(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+O(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+O(-i-1)+s,n&&(r=n-a)>0&&(s+=O(r))):i>=a?(s+=O(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+O(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=O(r))),s}function I(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function D(e,t,n){if(t>x)throw d=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return M(new e(l),t,1,!0)}function R(e,t,n){if(t>w)throw Error("[DecimalError] Precision limit exceeded");return M(new e(c),t,n,!0)}function L(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function O(e){for(var t="";e--;)t+="0";return t}function F(e,t,n,r){var i,s=new e(1),a=Math.ceil(r/7+4);for(d=!1;;){if(n%2&&K((s=s.times(t)).d,a)&&(i=!0),0===(n=m(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}K((t=t.times(t)).d,a)}return d=!0,s}function P(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;){if(!(r=new e(t[s])).s){i=r;break}i[n](r)&&(i=r)}return i}function $(e,t){var n,r,i,s,a,o,u,l=0,c=0,h=0,p=e.constructor,f=p.rounding,m=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(d=!1,u=m):u=t,o=new p(.03125);e.e>-2;)e=e.times(o),h+=5;for(u+=r=Math.log(g(2,h))/Math.LN10*2+5|0,n=s=a=new p(1),p.precision=u;;){if(s=M(s.times(e),u,1),n=n.times(++c),E((o=a.plus(A(s,n,u,1))).d).slice(0,u)===E(a.d).slice(0,u)){for(i=h;i--;)a=M(a.times(a),u,1);if(null!=t)return p.precision=m,a;if(!(l<3&&k(a.d,u-r,f,l)))return M(a,p.precision=m,f,d=!0);p.precision=u+=10,n=s=o=new p(1),c=0,l++}a=o}}function B(e,t){var n,r,i,s,a,o,u,l,c,h,p,f=1,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==t?(d=!1,c=b):c=t,y.precision=c+=10,r=(n=E(g)).charAt(0),!(Math.abs(s=m.e)<15e14))return l=D(y,c+2,b).times(s+""),m=B(new y(r+"."+n.slice(1)),c-10).plus(l),y.precision=b,null==t?M(m,b,v,d=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=E((m=m.times(e)).d)).charAt(0),f++;for(s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1)),h=m,u=a=m=A(m.minus(1),m.plus(1),c,1),p=M(m.times(m),c,1),i=3;;){if(a=M(a.times(p),c,1),E((l=u.plus(A(a,new y(i),c,1))).d).slice(0,c)===E(u.d).slice(0,c)){if(u=u.times(2),0!==s&&(u=u.plus(D(y,c+2,b).times(s+""))),u=A(u,new y(f),c,1),null!=t)return y.precision=b,u;if(!k(u.d,c-10,v,o))return M(u,y.precision=b,v,d=!0);y.precision=c+=10,l=a=m=A(h.minus(1),h.plus(1),c,1),p=M(m.times(m),c,1),i=o=1}u=l,i+=2}}function U(e){return String(e.s*e.s/0)}function V(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),d&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function W(e,t){var n,r,i,a,o,u,l,c,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),_.test(t))return V(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(v.test(t))n=16,t=t.toLowerCase();else if(y.test(t))n=2;else{if(!b.test(t))throw Error(p+t);n=8}for((a=t.search(/p/i))>0?(l=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),r=e.constructor,(o=a>=0)&&(a=(u=(t=t.replace(".","")).length)-a,i=F(r,new r(n),a,2*a)),a=h=(c=T(t,n,1e7)).length-1;0===c[a];--a)c.pop();return a<0?new r(0*e.s):(e.e=I(c,h),e.d=c,d=!1,o&&(e=A(e,i,4*u)),l&&(e=e.times(Math.abs(l)<54?g(2,l):s.pow(2,l))),d=!0,e)}function H(e,t,n,r,i){var s,a,o,u,l=e.precision,c=Math.ceil(l/7);for(d=!1,u=n.times(n),o=new e(r);;){if(a=A(o.times(u),new e(t++*t++),l,1),o=i?r.plus(a):r.minus(a),r=A(a.times(u),new e(t++*t++),l,1),void 0!==(a=o.plus(r)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return d=!0,a.d.length=c+1,a}function G(e,t){for(var n=e;--t;)n*=e;return n}function j(e,t){var n,r=t.s<0,i=R(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return o=P(n)?r?2:3:r?4:1,t;o=P(n)?r?1:4:r?3:2}return t.minus(i).abs()}function q(e,t,n,r){var i,s,o,l,c,h,d,p,f,m=e.constructor,g=void 0!==n;if(g?(C(n,1,1e9),void 0===r?r=m.rounding:C(r,0,8)):(n=m.precision,r=m.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(d=N(e)).indexOf("."))>=0&&(d=d.replace(".",""),(f=new m(1)).e=d.length-o,f.d=T(N(f),10,i),f.e=f.d.length),s=c=(p=T(d,10,i)).length;0==p[--c];)p.pop();if(p[0]){if(o<0?s--:((e=new m(e)).d=p,e.e=s,p=(e=A(e,f,n,r,0,i)).d,s=e.e,h=a),o=p[n],l=i/2,h=h||void 0!==p[n+1],h=r<4?(void 0!==o||h)&&(0===r||r===(e.s<0?3:2)):o>l||o===l&&(4===r||h||6===r&&1&p[n-1]||r===(e.s<0?8:7)),p.length=n,h)for(;++p[--n]>i-1;)p[n]=0,n||(++s,p.unshift(1));for(c=p.length;!p[c-1];--c);for(o=0,d="";o<c;o++)d+=u.charAt(p[o]);if(g){if(c>1)if(16==t||8==t){for(o=16==t?4:3,--c;c%o;c++)d+="0";for(c=(p=T(d,i,t)).length;!p[c-1];--c);for(o=1,d="1.";o<c;o++)d+=u.charAt(p[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}else d=g?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=U(e);return e.s<0?"-"+d:d}function K(e,t){if(e.length>t)return e.length=t,!0}function X(e){return new this(e).abs()}function Z(e){return new this(e).acos()}function Y(e){return new this(e).acosh()}function J(e,t){return new this(e).plus(t)}function Q(e){return new this(e).asin()}function ee(e){return new this(e).asinh()}function te(e){return new this(e).atan()}function ne(e){return new this(e).atanh()}function re(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?R(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=R(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(A(e,t,s,1)),t=R(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(A(e,t,s,1)):(n=R(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ie(e){return new this(e).cbrt()}function se(e){return M(e=new this(e),e.e+1,2)}function ae(e,t,n){return new this(e).clamp(t,n)}function oe(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=h[n]),void 0!==(r=e[n])){if(!(m(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(p+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=h[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(p+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function ue(e){return new this(e).cos()}function le(e){return new this(e).cosh()}function ce(e,t){return new this(e).div(t)}function he(e){return new this(e).exp()}function de(e){return M(e=new this(e),e.e+1,3)}function pe(){var e,t,n=new this(0);for(d=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return d=!0,new this(1/0);n=t}return d=!0,n.sqrt()}function fe(e){return e instanceof s||e&&e.toStringTag===f||!1}function me(e){return new this(e).ln()}function ge(e,t){return new this(e).log(t)}function ye(e){return new this(e).log(2)}function ve(e){return new this(e).log(10)}function be(){return z(this,arguments,"lt")}function _e(){return z(this,arguments,"gt")}function xe(e,t){return new this(e).mod(t)}function we(e,t){return new this(e).mul(t)}function Se(e,t){return new this(e).pow(t)}function Ee(e){var t,n,r,i,s=0,a=new this(1),o=[];if(void 0===e?e=this.precision:C(e,1,1e9),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(i%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(e%=7,(r=o[--s])&&e&&(i=g(10,7-e),o[s]=(r/i|0)*i);0===o[s];s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=o,a}function Ce(e){return M(e=new this(e),e.e+1,this.rounding)}function ke(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Te(e){return new this(e).sin()}function Ae(e){return new this(e).sinh()}function Me(e){return new this(e).sqrt()}function Ne(e,t){return new this(e).sub(t)}function Ie(){var e=0,t=arguments,n=new this(t[e]);for(d=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return d=!0,M(n,this.precision,this.rounding)}function De(e){return new this(e).tan()}function Re(e){return new this(e).tanh()}function Le(e){return M(e=new this(e),e.e+1,1)}(s=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,fe(e))return i.s=e.s,void(d?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(d?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):V(i,e.toString())}if("string"!==r)throw Error(p+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),_.test(e)?V(i,e):W(i,e)}if(s.prototype=S,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=oe,s.clone=e,s.isDecimal=fe,s.abs=X,s.acos=Z,s.acosh=Y,s.add=J,s.asin=Q,s.asinh=ee,s.atan=te,s.atanh=ne,s.atan2=re,s.cbrt=ie,s.ceil=se,s.clamp=ae,s.cos=ue,s.cosh=le,s.div=ce,s.exp=he,s.floor=de,s.hypot=pe,s.ln=me,s.log=ge,s.log10=ve,s.log2=ye,s.max=be,s.min=_e,s.mod=xe,s.mul=we,s.pow=Se,s.random=Ee,s.round=Ce,s.sign=ke,s.sin=Te,s.sinh=Ae,s.sqrt=Me,s.sub=Ne,s.sum=Ie,s.tan=De,s.tanh=Re,s.trunc=Le,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(h)).prototype.constructor=s,s.default=s.Decimal=s,l=new s(l),c=new s(c),void 0===(r=(function(){return s}).call(t,n,t,e))||(e.exports=r)}()},"Rn+g":function(e,t,n){"use strict";var r=n("LYNF");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},SntB:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||s,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},UnBK:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("xAGQ"),s=n("Lmem"),a=n("JEQr"),o=n("endd");function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},VdZX:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},XM5P:function(e,t){e.exports={version:"0.25.0"}},XwJu:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},YSVl:function(e,t,n){var r=n("EhIR"),i=n("uDiL"),s=n("pJ6O"),a=n("yuCN"),o=n("euyF"),u=n("ie1u"),l=n("pJ3+");l.alea=r,l.xor128=i,l.xorwow=s,l.xorshift7=a,l.xor4096=o,l.tychei=u,e.exports=l},YWYm:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},d0Zt:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n=i[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,a,o=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,s=-32;s<u;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=o[127&s]^=r+(a=a+1640531527|0))?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,o[i]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=o,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},djRN:function(e,t,n){"use strict";var r,i;void 0===(i="function"==typeof(r=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],s={name:"any",test:e},a=[],o=[],u={types:i,conversions:o,ignore:a};function l(e){var t=z(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return s;var n=z(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function c(e){return e===s?999:u.types.indexOf(e)}function h(e){var t=z(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function d(e){return e.map((function(e){var t=e.types.map(v);return(e.restParam?"...":"")+t.join("|")})).join(",")}function p(e){var t=O(e);return!!t&&t.restParam}function f(e){return e.types.some((function(e){return null!=e.conversion}))}function m(t){if(t&&0!==t.types.length){if(1===t.types.length)return l(t.types[0].name).test;if(2===t.types.length){var n=l(t.types[0].name).test,r=l(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return l(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function g(e,t){return t<e.params.length?e.params[t]:p(e.params)?O(e.params):null}function y(e,t,n){var r=g(e,t);return(r?n?r.types.filter(b):r.types:[]).map(v)}function v(e){return e.name}function b(e){return null==e.conversion}function _(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}($(e,(function(e){return y(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function x(e,t,n){var r,i,s,a=e||"unnamed",o=n;for(s=0;s<t.length;s++){var u=o.filter((function(e){var n=m(g(e,s));return(s<e.params.length||p(e.params))&&n(t[s])}));if(0===u.length){if((i=_(o,s)).length>0){var l=h(t[s]);return(r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+l+", index: "+s+")")).data={category:"wrongType",fn:a,index:s,actual:l,expected:i},r}}else o=u}var c=o.map((function(e){return p(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,c))return i=_(o,s),(r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;var d=Math.max.apply(null,c);return t.length>d?((r=new TypeError("Too many arguments in function "+a+" (expected: "+d+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:d},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:t.map(h)},r)}function w(e){for(var t=999,n=0;n<e.types.length;n++)b(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function S(e){for(var t=999,n=0;n<e.types.length;n++)b(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function E(e,t){var n;return 0!=(n=e.restParam-t.restParam)?n:0!=(n=f(e)-f(t))?n:0!=(n=w(e)-w(t))?n:S(e)-S(t)}function C(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(f)-t.params.some(f)))return r;for(n=0;n<i;n++)if(0!=(r=f(e.params[n])-f(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=E(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function k(e){var t,n,r,i,s=[],a=[];switch(e.types.forEach((function(e){e.conversion&&(s.push(l(e.conversion.from).test),a.push(e.conversion.convert))})),a.length){case 0:return function(e){return e};case 1:return t=s[0],r=a[0],function(e){return t(e)?r(e):e};case 2:return t=s[0],n=s[1],r=a[0],i=a[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<a.length;t++)if(s[t](e))return a[t](e);return e}}}function T(e,t){return function e(n,r,i){if(r<n.length){var s,a=n[r],o=t?a.types.filter(b):a.types;if(a.restParam){var u=o.filter(b);s=u.length<o.length?[u,o]:[o]}else s=o.map((function(e){return[e]}));return $(s,(function(t){return e(n,r+1,i.concat([t]))}))}return[i.map((function(e,t){return{types:e,restParam:t===n.length-1&&p(n)}}))]}(e,0,[])}function A(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(I).map((function(e,t,r){var i=function(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(I).filter(D).filter(N),i=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),s=r.map((function(e){var t=l(e);return{name:e,typeIndex:c(t),test:t.test,conversion:null,conversionIndex:-1}})),a=i.map((function(e){var n=l(e.from);return{name:e.from,typeIndex:c(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:s.concat(a),restParam:n}}(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(L)?null:{params:r,fn:t}}(e,r[e],u.conversions)})).filter(R).forEach((function(e){var t=z(i,(function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!P(y(e,r,!0),y(t,r,!0)))return!1;var i=e.params.length,s=t.params.length,a=p(e.params),o=p(t.params);return a?o?i===s:s>=i:o?i>=s:i===s}(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+d(t.params)+'" and "'+d(e.params)+'".');i.push(e)}));var s=$(i,(function(e){return(e?T(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(R);s.sort(C);var a=s[0]&&s[0].params.length<=2&&!p(s[0].params),o=s[1]&&s[1].params.length<=2&&!p(s[1].params),h=s[2]&&s[2].params.length<=2&&!p(s[2].params),g=s[3]&&s[3].params.length<=2&&!p(s[3].params),v=s[4]&&s[4].params.length<=2&&!p(s[4].params),b=s[5]&&s[5].params.length<=2&&!p(s[5].params),_=a&&o&&h&&g&&v&&b,x=s.map((function(e){return function(e){var t,n,r,i;if(p(e)){var s=(t=(i=e,i.slice(0,i.length-1)).map(m)).length,a=m(O(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=s;t<e.length;t++)if(!a(e[t]))return!1;return!0}(e)&&e.length>=s+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=m(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=m(e[0]),r=m(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(m),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}(e.params)})),w=a?m(s[0].params[0]):t,S=o?m(s[1].params[0]):t,E=h?m(s[2].params[0]):t,A=g?m(s[3].params[0]):t,M=v?m(s[4].params[0]):t,B=b?m(s[5].params[0]):t,U=a?m(s[0].params[1]):t,V=o?m(s[1].params[1]):t,W=h?m(s[2].params[1]):t,H=g?m(s[3].params[1]):t,G=v?m(s[4].params[1]):t,j=b?m(s[5].params[1]):t,q=s.map((function(e){return function(e,t){var n=t;if(e.some(f)){var r=p(e),i=e.map(k);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,s=0;s<n;s++)e[s]=i[s](arguments[s]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e)}}var s=n;if(p(e)){var a=e.length-1;s=function(){return n.apply(this,F(arguments,0,a).concat([F(arguments,a)]))}}return s}(e.params,e.fn)})),K=a?q[0]:n,X=o?q[1]:n,Z=h?q[2]:n,Y=g?q[3]:n,J=v?q[4]:n,Q=b?q[5]:n,ee=a?s[0].params.length:-1,te=o?s[1].params.length:-1,ne=h?s[2].params.length:-1,re=g?s[3].params.length:-1,ie=v?s[4].params.length:-1,se=b?s[5].params.length:-1,ae=_?6:0,oe=s.length,ue=function(){for(var t=ae;t<oe;t++)if(x[t](arguments))return q[t].apply(this,arguments);return u.onMismatch(e,arguments,s)},le=function e(t,n){return arguments.length===ee&&w(t)&&U(n)?K.apply(e,arguments):arguments.length===te&&S(t)&&V(n)?X.apply(e,arguments):arguments.length===ne&&E(t)&&W(n)?Z.apply(e,arguments):arguments.length===re&&A(t)&&H(n)?Y.apply(e,arguments):arguments.length===ie&&M(t)&&G(n)?J.apply(e,arguments):arguments.length===se&&B(t)&&j(n)?Q.apply(e,arguments):ue.apply(e,arguments)};try{Object.defineProperty(le,"name",{value:e})}catch(ce){}return le.signatures=function(e){var t={};return e.forEach((function(e){e.params.some(f)||T(e.params,!0).forEach((function(n){t[d(n)]=e.fn}))})),t}(s),le}function M(e,t,n){throw x(e,t,n)}function N(e){return-1===u.ignore.indexOf(e)}function I(e){return e.trim()}function D(e){return!!e}function R(e){return null!==e}function L(e){return 0===e.types.length}function O(e){return e[e.length-1]}function F(e,t,n){return Array.prototype.slice.call(e,t,n)}function P(e,t){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}function z(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function $(e,t){return Array.prototype.concat.apply([],e.map(t))}function B(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}function U(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var s=e[i];if("object"==typeof s.signatures)for(var a in s.signatures)s.signatures.hasOwnProperty(a)&&(r(a,s.signatures[a]),n[a]=s.signatures[a]);else{if("string"!=typeof s.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(s.signature,s),n[s.signature]=s}}return n}return(u=A("typed",{"string, Object":A,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return A(B(t),e)},"...Function":function(e){return A(B(e),U(e))},"string, ...Function":function(e,t){return A(e,U(t))}})).create=r,u.types=i,u.conversions=o,u.ignore=a,u.onMismatch=M,u.throwMismatchError=M,u.createError=x,u.convert=function(e,t){var n=h(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),s=e.signatures[i];if(s)return s;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()})?r.apply(t,[]):r)||(e.exports=i)},"eQl+":function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),s={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function a(e){return"number"==typeof e}function o(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function u(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function l(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function c(e){return e&&!0===e.constructor.prototype.isUnit||!1}function h(e){return"string"==typeof e}var d=Array.isArray;function p(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function f(e){return Array.isArray(e)||p(e)}function m(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function g(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function y(e){return e&&!0===e.constructor.prototype.isRange||!1}function v(e){return e&&!0===e.constructor.prototype.isIndex||!1}function b(e){return"boolean"==typeof e}function _(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function x(e){return e&&!0===e.constructor.prototype.isHelp||!1}function w(e){return"function"==typeof e}function S(e){return e instanceof Date}function E(e){return e instanceof RegExp}function C(e){return!(!e||"object"!=typeof e||e.constructor!==Object||u(e)||l(e))}function k(e){return null===e}function T(e){return void 0===e}function A(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function M(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function N(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function O(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function $(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function V(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function W(e){return e&&!0===e.constructor.prototype.isChain||!1}function H(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":o(e)?"BigNumber":u(e)?"Complex":l(e)?"Fraction":p(e)?"Matrix":c(e)?"Unit":v(e)?"Index":y(e)?"Range":_(e)?"ResultSet":P(e)?e.type:W(e)?"Chain":x(e)?"Help":"Object":"function"===t?"Function":t}function G(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return G(e)}));if(e instanceof Date)return new Date(e.valueOf());if(o(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return function(e,t){var n={};for(var r in e)K(e,r)&&(n[r]=t(e[r]));return n}(e,G)}function j(e,t){for(var n in t)K(t,n)&&(e[n]=t[n]);return e}function q(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!q(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t&&q(e[n],t[n])))return!1;for(n in t)if(!(n in e))return!1;return!0}return e===t}function K(e,t){return e&&Object.hasOwnProperty.call(e,t)}var X=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(s)};i()(X,s,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Z=n("QSgb"),Y=n.n(Z);function J(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var Q=Math.sign||function(e){return e>0?1:e<0?-1:0};function ee(e,t,n){var r={2:"0b",8:"0o",16:"0x"}[t],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!J(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!J(e))throw new Error("Value must be an integer");e<0&&(e+=2**n),i="i".concat(n)}var s="";return e<0&&(e=-e,s="-"),"".concat(s).concat(r).concat(e.toString(t)).concat(i)}function te(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r,i="auto";if(t&&(t.notation&&(i=t.notation),a(t)?n=t:a(t.precision)&&(n=t.precision),t.wordSize&&"number"!=typeof(r=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ne(e),r="number"==typeof t?ie(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,a=s+(t||0);return i.length<a&&(i=i.concat(se(a-i.length))),s<0&&(i=se(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),r.sign+i.join("")}(e,n);case"exponential":return re(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ie(ne(e),t),r=n.exponent,i=n.coefficients,s=r%3==0?r:r<0?r-3-r%3:r-r%3;if(a(t))for(;t>i.length||r-s+1>i.length;)i.push(0);else for(var o=Math.abs(r-s)-(i.length-1),u=0;u<o;u++)i.push(0);for(var l=Math.abs(r-s),c=1;l>0;)c++,l--;var h=i.slice(c).join(""),d=a(t)&&h.length||h.match(/[1-9]/)?"."+h:"",p=i.slice(0,c).join("")+d+"e"+(r>=0?"+":"")+s.toString();return n.sign+p}(e,n);case"bin":return ee(e,2,r);case"oct":return ee(e,8,r);case"hex":return ee(e,16,r);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,s=ne(e),a=t?ie(s,t):s;if(a.exponent<r||a.exponent>=i)return re(e,t);var o=a.coefficients,u=a.exponent;o.length<t&&(o=o.concat(se(t-o.length))),o=o.concat(se(u-o.length+1+(o.length<t?t-o.length:0)));var l=u>0?u:0;return l<(o=se(-u).concat(o)).length-1&&o.splice(l+1,0,"."),a.sign+o.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ne(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=-1!==s?s-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function re(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ne(e),r=t?ie(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(se(t-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function ie(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function se(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}Math,Math,Math,Math,Math;var ae=Number.EPSILON||2220446049250313e-31;function oe(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<ae||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}function ue(e,t,n){var r=new(0,e.constructor)(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!J(n))throw new Error("size must be an integer");if(e.greaterThan(r.pow(n-1).sub(1))||e.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(r.pow(n))),i="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(i);case 8:return"".concat(e.toOctal()).concat(i);case 16:return"".concat(e.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(t," not supported "))}}function le(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function ce(e,t){return"number"==typeof e?te(e,t):o(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r,i="auto";if(void 0!==t&&(t.notation&&(i=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision),t.wordSize&&"number"!=typeof(r=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return le(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);return-1!==s.indexOf("e")&&(s=i.toString()),s+"e"+(n>=0?"+":"")+r.toString()}(e,n);case"bin":return ue(e,2,r);case"oct":return ue(e,8,r);case"hex":return ue(e,16,r);case"auto":var s=t&&void 0!==t.lowerExp?t.lowerExp:-3,a=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var o=e.toSignificantDigits(n),u=o.e;return(u>=s&&u<a?o.toFixed():le(e,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",i=t.length,s=0;s<i;s++)0!==s&&(r+=", "),r+=e(t[s],n);return r+"]"}return ce(t,n)}(e,t):h(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map(n=>'"'+n+'": '+ce(e[n],t)).join(", ")+"}":String(e)}function he(e,t,n){if(!(this instanceof he))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function de(e,t,n){if(!(this instanceof de))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function pe(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function fe(e,t){if(0===t.length){if(Array.isArray(e))throw new he(e.length,0)}else!function e(t,n,r){var i,s=t.length;if(s!==n[r])throw new he(s,n[r]);if(r<n.length-1){var a=r+1;for(i=0;i<s;i++){if(!Array.isArray(t[i]))throw new he(n.length-1,n.length,"<");e(t[i],n,a)}}else for(i=0;i<s;i++)if(Array.isArray(t[i]))throw new he(n.length+1,n.length,">")}(e,t,0)}function me(e,t){if(!a(e)||!J(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new de(e,t)}function ge(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!a(e)||!J(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ce(t)+")")})),function e(t,n,r,i){var s,a,o=n[r],u=Math.min(t.length,o);if(t.length=o,r<n.length-1){var l=r+1;for(s=0;s<u;s++)a=t[s],Array.isArray(a)||(t[s]=a=[a]),e(a,n,l,i);for(s=u;s<o;s++)t[s]=a=[],e(a,n,l,i)}else{for(s=0;s<u;s++)for(;Array.isArray(t[s]);)t[s]=t[s][0];for(s=u;s<o;s++)t[s]=i}}(e,t,0,void 0!==n?n:0),e}function ye(e,t){var n=ve(e),r=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(t%n!=0)throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);r[i]=-t/n}return r}function ve(e){return e.reduce((e,t)=>e*t,1)}function be(e,t){for(var n=t||pe(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=function e(t,n,r){var i,s;if(r<n){var a=r+1;for(i=0,s=t.length;i<s;i++)t[i]=e(t[i],n,a)}else for(;Array.isArray(t);)t=t[0];return t}(e,r,0),n.length=r),e}function _e(e,t,n,r){var i=r||pe(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=function e(t,n,r){var i,s;if(Array.isArray(t)){var a=r+1;for(i=0,s=t.length;i<s;i++)t[i]=e(t[i],n,a)}else for(var o=r;o<n;o++)t=[t];return t}(e,t,0);i.length<t;)i.push(1);return e}function xe(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function we(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],a=Array.isArray(s);if(0===i&&a&&(r=s.length),a&&s.length!==r)return;var o=a?we(s,t):t(s);if(void 0===n)n=o;else if(n!==o)return"mixed"}return n}function Se(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];void 0!==s&&(n[i]=s)}return n}(r,t.map(Ee));return function(e,t,n){if(!t.filter(e=>!function(e){return e&&"?"===e[0]}(e)).every(e=>void 0!==n[e])){var r=t.filter(e=>void 0===n[e]);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map(e=>'"'.concat(e,'"')).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function Ee(e){return e&&"?"===e[0]?e.slice(1):e}Math,Math,Math,Math,Math,Math,(he.prototype=new RangeError).constructor=RangeError,he.prototype.name="DimensionError",he.prototype.isDimensionError=!0,(de.prototype=new RangeError).constructor=RangeError,de.prototype.name="IndexError",de.prototype.isIndexError=!0;var Ce=Se("BigNumber",["?on","config"],e=>{var{on:t,config:n}=e,r=Y.a.clone({precision:n.precision,modulo:Y.a.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r},{isClass:!0}),ke=n("7a9l"),Te=n.n(ke),Ae=Se("Complex",[],()=>(Te.a.prototype.type="Complex",Te.a.prototype.isComplex=!0,Te.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Te.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Te.a.prototype.format=function(e){var t=this.im,n=this.re,r=te(this.re,e),i=te(this.im,e),s=a(e)?e:e?e.precision:null;if(null!==s){var o=Math.pow(10,-s);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},Te.a.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return Te()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(a(n)){if(c(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),a(r))return new Te.a({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Te.a.prototype.valueOf=Te.a.prototype.toString,Te.a.fromJSON=function(e){return new Te.a(e)},Te.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Te.a),{isClass:!0});function Me(e){var t=0,n=1,r=Object.create(null),i=Object.create(null),s=0,a=function(e){var a=i[e];if(a&&(delete r[a],delete i[e],--t,n===a)){if(!t)return s=0,void(n=1);for(;!hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(o){var u=i[o],l=++s;if(r[l]=o,i[o]=l,!u){if(++t<=e)return;return a(o=r[n]),o}if(delete r[u],n===u)for(;!hasOwnProperty.call(r,++n););},delete:a,clear:function(){t=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function Ne(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function r(){"object"!=typeof r.cache&&(r.cache={values:new Map,lru:Me(n||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=t(i);if(r.cache.values.has(a))return r.cache.lru.hit(a),r.cache.values.get(a);var o=e.apply(e,i);return r.cache.values.set(a,o),r.cache.values.delete(r.cache.lru.hit(a)),o}}Ne((function(e){return new e(1).exp()}),{hasher:De}),Ne((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:De});var Ie=Ne((function(e){return e.acos(-1)}),{hasher:De});function De(e){return e[0].precision}function Re(e,t){return Se(e,["config","BigNumber"],e=>{var{config:n,BigNumber:r}=e;return"BigNumber"===n.number?new r(t):t})}Ne((function(e){return Ie(e).times(2)}),{hasher:De}),Math,Math,Math,Re("fineStructure",.0072973525693),Re("weakMixingAngle",.2229),Re("efimovFactor",22.7),Re("sackurTetrode",-1.16487052358);var Le=n("1h5C"),Oe=n.n(Le),Fe=Se("Fraction",[],()=>(Oe.a.prototype.type="Fraction",Oe.a.prototype.isFraction=!0,Oe.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Oe.a.fromJSON=function(e){return new Oe.a(e)},Oe.a),{isClass:!0}),Pe=Se("Matrix",[],()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),ze=Se("DenseMatrix",["Matrix"],e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(p(e))"DenseMatrix"===e.type?(this._data=G(e._data),this._size=G(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&d(e.data)&&d(e.size))this._data=e.data,this._size=e.size,fe(this._data,this._size),this._datatype=t||e.datatype;else if(d(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var i=t[n];d(i)?t[n]=e(i):i&&!0===i.isMatrix&&(t[n]=e(i.valueOf()))}return t}(e),this._size=pe(this._data),fe(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t){if(!v(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new he(r.length,e._size.length);for(var i=t.min(),s=t.max(),a=0,o=e._size.length;a<o;a++)me(i[a],e._size[a]),me(s[a],e._size[a]);return new n(function e(t,n,r,i){var s=i===r-1,a=n.dimension(i);return s?a.map((function(e){return me(e,t.length),t[e]})).valueOf():a.map((function(s){return me(s,t.length),e(t[s],n,r,i+1)})).valueOf()}(e._data,t,r.length,0),e._datatype)}function i(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),a=t.isScalar();if(p(n)?(i=n.size(),n=n.valueOf()):i=pe(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(s.length<e._size.length)throw new he(s.length,e._size.length,"<");if(i.length<s.length){for(var o=0,l=0;1===s[o]&&1===i[o];)o++;for(;1===s[o];)l++,o++;n=_e(n,s.length,l,i)}if(!q(s,i))throw new he(s,i,">");u(e,t.max().map((function(e){return e+1})),r),function e(t,n,r,i,s){var a=s===i-1;n.dimension(s).forEach(a?function(e,n){me(e),t[e]=r[n[0]]}:function(a,o){me(a),e(t[a],n,r[o[0]],i,s+1)})}(e._data,t,n,s.length,0)}return e}function s(e,t,n){if(0===t.length){for(var r=e._data;d(r);)r=r[0];return r}return e._size=t.slice(0),e._data=ge(e._data,e._size,n),e}function u(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var a=0,o=t.length;a<o;a++)t[a]>r[a]&&(r[a]=t[a],i=!0);i&&s(e,r,n)}return(n.prototype=new t).createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return we(this._data,H)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return i(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);for(var t=0;t<e.length;t++)me(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var s=e[r];me(s,n.length),n=n[s]}return n},n.prototype.set=function(e,t,n){if(!d(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new he(e.length,this._size.length,"<");var r,i,s;u(this,e.map((function(e){return e+1})),n);var a=this._data;for(r=0,i=e.length-1;r<i;r++)me(s=e[r],a.length),a=a[s];return me(s=e[e.length-1],a.length),a[s]=t,this},n.prototype.resize=function(e,t,n){if(!f(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);return s(n?this.clone():this,r,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=function(e,t){var n=xe(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new he(0,r,"!=");var i=ve(t=ye(t,r));if(r!==i)throw new he(i,r,"!=");try{return function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var s=t[i];n=[];for(var a=r.length/s,o=0;o<a;o++)n.push(r.slice(o*s,(o+1)*s));r=n}return r}(n,t)}catch(s){if(s instanceof he)throw new he(i,r,"!=");throw s}}(n._data,e);var r=n._size.reduce((e,t)=>e*t);return n._size=ye(e,r),n},n.prototype.clone=function(){return new n({data:G(this._data),size:G(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,r=function n(r,i){return d(r)?r.map((function(e,t){return n(e,i.concat(t))})):e(r,i,t)}(this._data,[]);return new n(r,void 0!==this._datatype?we(r,H):void 0)},n.prototype.forEach=function(e){var t=this;!function n(r,i){d(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},n.prototype[Symbol.iterator]=function*(){yield*function*e(t,n){if(d(t))for(var r=0;r<t.length;r++)yield*e(t[r],n.concat(r));else yield{value:t,index:n}}(this._data,[])},n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var r of t)e.push(new n([r],this._datatype));return e},n.prototype.columns=function(){var e=this,t=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,s=function(r){var s=i.map(e=>[e[r]]);t.push(new n(s,e._datatype))},a=0;a<r[1];a++)s(a);return t},n.prototype.toArray=function(){return G(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return ce(this._data,e)},n.prototype.toString=function(){return ce(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(o(e)&&(e=e.toNumber()),!a(e)||!J(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=Math.min(this._size[0]-r,this._size[1]-t),s=[],u=0;u<i;u++)s[u]=this._data[u+r][u+t];return new n({data:s,size:[i],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!d(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(o(e)&&(e=e.toNumber()),!a(e)||!J(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(o(r)&&(r=r.toNumber()),!a(r)||!J(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var s,u=r>0?r:0,l=r<0?-r:0,c=e[0],h=e[1],f=Math.min(c-l,h-u);if(d(t)){if(t.length!==f)throw new Error("Invalid value array length");s=function(e){return t[e]}}else if(p(t)){var m=t.size();if(1!==m.length||m[0]!==f)throw new Error("Invalid matrix length");s=function(e){return t.get([e])}}else s=function(){return t};i||(i=o(s(0))?s(0).mul(0):0);var g=[];if(e.length>0){g=ge(g,e,i);for(var y=0;y<f;y++)g[y+l][y+u]=s(y)}return new n({data:g,size:[c,h]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(a(e)&&J(e)&&a(t)&&J(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return me(e,this._size[0]),me(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n},{isClass:!0}),$e=n("djRN"),Be=n.n($e);function Ue(e,t){return!(!e||"object"!=typeof e||!K(We,t)&&(t in Object.prototype||t in Function.prototype))}function Ve(e){return"object"==typeof e&&e&&e.constructor===Object}var We={length:!0,name:!0},He={toString:!0,valueOf:!0,toLocaleString:!0};function Ge(e){return!!e&&(e instanceof Map||e instanceof class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return function(e,t){if(Ve(e)&&Ue(e,t))return e[t];if("function"==typeof e[t]&&function(e,t){return!(null==e||"function"!=typeof e[t]||K(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!K(He,t)&&(t in Object.prototype||t in Function.prototype))}(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e)}set(e,t){return function(e,t,n){if(Ve(e)&&Ue(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e,t),this}has(e){return e in this.wrappedObject}}||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}var je=function(){return je=Be.a.create,Be.a},qe=Se("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var{BigNumber:t,Complex:n,DenseMatrix:r,Fraction:i}=e,s=je();return s.types=[{name:"number",test:a},{name:"Complex",test:u},{name:"BigNumber",test:o},{name:"Fraction",test:l},{name:"Unit",test:c},{name:"string",test:h},{name:"Chain",test:W},{name:"Array",test:d},{name:"Matrix",test:p},{name:"DenseMatrix",test:m},{name:"SparseMatrix",test:g},{name:"Range",test:y},{name:"Index",test:v},{name:"boolean",test:b},{name:"ResultSet",test:_},{name:"Help",test:x},{name:"function",test:w},{name:"Date",test:S},{name:"RegExp",test:E},{name:"null",test:k},{name:"undefined",test:T},{name:"AccessorNode",test:A},{name:"ArrayNode",test:M},{name:"AssignmentNode",test:N},{name:"BlockNode",test:I},{name:"ConditionalNode",test:D},{name:"ConstantNode",test:R},{name:"FunctionNode",test:O},{name:"FunctionAssignmentNode",test:L},{name:"IndexNode",test:F},{name:"Node",test:P},{name:"ObjectNode",test:z},{name:"OperatorNode",test:$},{name:"ParenthesisNode",test:B},{name:"RangeNode",test:U},{name:"SymbolNode",test:V},{name:"Map",test:Ge},{name:"Object",test:C}],s.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||Ke(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Xe(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Xe(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Xe(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||Ze(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||Ke(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||Ze(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Xe(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Ke(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||Ze(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],s}));function Ke(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Xe(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Ze(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function Ye(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return Ye(e,t,n)})):t(e)}var Je="number",Qe="number, number";function et(e){return Math.abs(e)}function tt(e,t){return e+t}function nt(e,t){return e*t}function rt(e){return-e}function it(e){return Q(e)}function st(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}et.signature=Je,tt.signature=Qe,nt.signature=Qe,rt.signature=Je,it.signature=Je,st.signature=Qe;var at=Se("abs",["typed"],e=>{var{typed:t}=e;return t("abs",{number:et,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Ye(e,this,!0)},Unit:function(e){return e.abs()}})}),ot=Se("addScalar",["typed"],e=>{var{typed:t}=e;return t("addScalar",{"number, number":tt,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})}),ut=Se("atan",["typed"],e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()},"Array | Matrix":function(e){return Ye(e,this,!0)}})}),lt=Se("bignumber",["typed","BigNumber"],e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var r=t[2],i=n(t[1]),s=new n(2).pow(Number(r));if(i.gt(s.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var a=new n(2).pow(Number(r)-1);return i.gte(a)?i.sub(s):i}return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return Ye(e,this)}})}),ct=Se("complex",["typed","Complex"],e=>{var{typed:t,Complex:n}=e;return t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return Ye(e,this)}})}),ht=Se("conj",["typed"],e=>{var{typed:t}=e;return t("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Ye(e,this)}})});function dt(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var pt=Se("equalScalar",["typed","config"],e=>{var{typed:t,config:n}=e;return t("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return oe(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||dt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return oe(e.re,t.re,n)&&oe(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})});Se("equalScalar",["typed","config"],e=>{var{typed:t,config:n}=e;return t("equalScalar",{"number, number":function(e,t){return oe(e,t,n.epsilon)}})}),Math.pow(2,53),Se("hex",["typed","format"],e=>{var{typed:t,format:n}=e;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"hex",wordSize:t})}})});var ft=Se("im",["typed"],e=>{var{typed:t}=e;return t("im",{number:function(e){return 0},BigNumber:function(e){return e.mul(0)},Fraction:function(e){return e.mul(0)},Complex:function(e){return e.im},"Array | Matrix":function(e){return Ye(e,this)}})});function mt(e){return 0===e}mt.signature="number";var gt=Se("isZero",["typed"],e=>{var{typed:t}=e;return t("isZero",{number:mt,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return this(e.value)},"Array | Matrix":function(e){return Ye(e,this)}})}),yt=Se("multiplyScalar",["typed"],e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":nt,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})}),vt=Se("number",["typed"],e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t,n,r=(n=(t=e).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:t,radix:{"0b":2,"0o":8,"0x":16}[n[1]],integerPart:n[2],fractionalPart:n[3]}:null;if(r)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++)n+=parseInt(e.fractionalPart[r],e.radix)/Math.pow(e.radix,r+1);var i=t+n;if(isNaN(i))throw new SyntaxError('String "'+e.input+'" is no valid number');return i}(r);var i=0,s=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(i=Number(s[2]),e=s[1]);var a=Number(e);if(isNaN(a))throw new SyntaxError('String "'+e+'" is no valid number');if(s){if(a>2**i-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));a>=2**(i-1)&&(a-=2**i)}return a},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Ye(e,this)}});return n.fromJSON=function(e){return parseFloat(e.value)},n});Se("oct",["typed","format"],e=>{var{typed:t,format:n}=e;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"oct",wordSize:t})}})}),n("ikQK"),Date.now();var bt=Se("re",["typed"],e=>{var{typed:t}=e;return t("re",{number:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Complex:function(e){return e.re},"Array | Matrix":function(e){return Ye(e,this)}})}),_t=Se("sign",["typed","BigNumber","Fraction","complex"],e=>{var{typed:t,BigNumber:n,complex:r,Fraction:i}=e;return t("sign",{number:it,Complex:function(e){return 0===e.im?r(it(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},Fraction:function(e){return new i(e.s,1)},"Array | Matrix":function(e){return Ye(e,this,!0)},Unit:function(e){return this(e.value)}})}),xt=Se("sin",["typed"],e=>{var{typed:t}=e;return t("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(e.value)},"Array | Matrix":function(e){return Ye(e,this,!0)}})}),wt=Se("SparseMatrix",["typed","equalScalar","Matrix"],e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(p(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?G(t._values):void 0,e._index=G(t._index),e._ptr=G(t._ptr),e._size=G(t._size),e._datatype=n||t._datatype):s(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&d(e.index)&&d(e.ptr)&&d(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(d(e))s(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function s(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var s=r.length,a=0,o=n,u=0;if(h(i)&&(o=t.find(n,[i,i])||n,u=t.convert(0,i)),s>0){var l=0;do{e._ptr.push(e._index.length);for(var c=0;c<s;c++){var p=r[c];if(d(p)){if(0===l&&a<p.length&&(a=p.length),l<p.length){var f=p[l];o(f,u)||(e._values.push(f),e._index.push(c))}}else 0===l&&a<1&&(a=1),o(p,u)||(e._values.push(p),e._index.push(c))}l++}while(l<a)}e._ptr.push(e._index.length),e._size=[s,a]}function u(e,t){if(!v(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,s,a,o=t.size();if(o.length!==e._size.length)throw new he(o.length,e._size.length);var u=t.min(),l=t.max();for(n=0,r=e._size.length;n<r;n++)me(u[n],e._size[n]),me(l[n],e._size[n]);var c=e._values,h=e._index,d=e._ptr,p=t.dimension(0),f=t.dimension(1),m=[],g=[];p.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var y=c?[]:void 0,b=[],_=[];return f.forEach((function(e){for(_.push(b.length),s=d[e],a=d[e+1];s<a;s++)!0===m[n=h[s]]&&(b.push(g[n]),y&&y.push(c[s]))})),_.push(b.length),new i({values:y,index:b,ptr:_,size:o,datatype:e._datatype})}function l(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),a=t.isScalar();if(p(n)?(i=n.size(),n=n.toArray()):i=pe(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==s.length&&2!==s.length)throw new he(s.length,e._size.length,"<");if(i.length<s.length){for(var o=0,u=0;1===s[o]&&1===i[o];)o++;for(;1===s[o];)u++,o++;n=_e(n,s.length,u,i)}if(!q(s,i))throw new he(s,i,">");if(1===s.length)t.dimension(0).forEach((function(t,i){me(t),e.set([t,0],n[i[0]],r)}));else{var l=t.dimension(0),c=t.dimension(1);l.forEach((function(t,i){me(t),c.forEach((function(s,a){me(s),e.set([t,s],n[i[0]][a[0]],r)}))}))}}return e}function c(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function m(e,t,n,r,i,s,a){i.splice(e,0,r),s.splice(e,0,t);for(var o=n+1;o<a.length;o++)a[o]++}function g(e,r,i,s){var a=s||0,o=n,u=0;h(e._datatype)&&(o=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),a=t.convert(a,e._datatype));var l,c,d,p=!o(a,u),f=e._size[0],m=e._size[1];if(i>m){for(c=m;c<i;c++)if(e._ptr[c]=e._values.length,p)for(l=0;l<f;l++)e._values.push(a),e._index.push(l);e._ptr[i]=e._values.length}else i<m&&(e._ptr.splice(i+1,m-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(m=i,r>f){if(p){var g=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]+g,d=e._ptr[c+1]+g;var y=0;for(l=f;l<r;l++,y++)e._values.splice(d+y,0,a),e._index.splice(d+y,0,l),g++}e._ptr[m]=e._values.length}}else if(r<f){var v=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]-v;var b=e._ptr[c+1]-v;for(d=e._ptr[c];d<b;d++)(l=e._index[d])>r-1&&(e._values.splice(d,1),e._index.splice(d,1),v++)}e._ptr[c]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function y(e,t,n,r,i){var s,a,o=r[0],u=r[1],l=[];for(s=0;s<o;s++)for(l[s]=[],a=0;a<u;a++)l[s][a]=0;for(a=0;a<u;a++)for(var c=n[a+1],h=n[a];h<c;h++)l[s=t[h]][a]=e?i?G(e[h]):e[h]:1;return l}return(i.prototype=new r).createSparseMatrix=function(e,t){return new i(e,t)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return we(this._values,H)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,e);case 2:case 3:return l(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];me(t,this._size[0]),me(n,this._size[1]);var r=c(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var s=e[0],a=e[1],o=this._size[0],u=this._size[1],l=n,p=0;h(this._datatype)&&(l=t.find(n,[this._datatype,this._datatype])||n,p=t.convert(0,this._datatype)),(s>o-1||a>u-1)&&(g(this,Math.max(s+1,o),Math.max(a+1,u),i),o=this._size[0],u=this._size[1]),me(s,o),me(a,u);var f=c(s,this._ptr[a],this._ptr[a+1],this._index);return f<this._ptr[a+1]&&this._index[f]===s?l(r,p)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var s=t+1;s<i.length;s++)i[s]--}(f,a,this._values,this._index,this._ptr):this._values[f]=r:m(f,s,a,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!f(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(e){if(!a(e)||!J(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ce(r)+")")})),g(n?this.clone():this,r[0],r[1],t)},i.prototype.reshape=function(e,t){if(!d(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!a(t)||!J(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ce(e)+")")}));var n=this._size[0]*this._size[1];if(n!==(e=ye(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return r;for(var i=[],s=0;s<r._ptr.length;s++)for(var o=0;o<r._ptr[s+1]-r._ptr[s];o++)i.push(s);for(var u=r._values.slice(),l=r._index.slice(),h=0;h<r._index.length;h++){var p=l[h]*r._size[1]+i[h];i[h]=p%e[1],l[h]=Math.floor(p/e[1])}r._values.length=0,r._index.length=0,r._ptr.length=e[1]+1,r._size=e.slice();for(var f=0;f<r._ptr.length;f++)r._ptr[f]=0;for(var g=0;g<u.length;g++){var y=l[g],v=i[g],b=u[g];m(c(y,r._ptr[v],r._ptr[v+1],r._index),y,v,b,r._values,r._index,r._ptr)}return r},i.prototype.clone=function(){return new i({values:this._values?G(this._values):void 0,index:G(this._index),ptr:G(this._ptr),size:G(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this;return function(e,r,s,a,o,u,l){var c=[],d=[],p=[],f=n,m=0;h(e._datatype)&&(f=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var g=function(e,t,n){e=u(e,t,n),f(e,m)||(c.push(e),d.push(t))},y=0;y<=o;y++){p.push(c.length);var v=e._ptr[y],b=e._ptr[y+1];if(l)for(var _=v;_<b;_++){var x=e._index[_];x>=0&&x<=s&&g(e._values[_],x-0,y-0)}else{for(var w={},S=v;S<b;S++)w[e._index[S]]=e._values[S];for(var E=0;E<=s;E++)g(E in w?w[E]:0,E-0,y-0)}}return p.push(c.length),new i({values:c,index:d,ptr:p,size:[s-0+1,o-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],s)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var s=this._ptr[i],a=this._ptr[i+1];if(t)for(var o=s;o<a;o++)e(this._values[o],[this._index[o],i],this);else{for(var u={},l=s;l<a;l++)u[this._index[l]]=this._values[l];for(var c=0;c<n;c++)e(c in u?u[c]:0,[c,i],this)}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var n=this._ptr[t+1],r=this._ptr[t];r<n;r++){var i=this._index[r];yield{value:this._values[r],index:[i,t]}}},i.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+ce(t,e)+" x "+ce(n,e)+"] density: "+ce(r,e)+"\n",s=0;s<n;s++)for(var a=this._ptr[s+1],o=this._ptr[s];o<a;o++)i+="\n    ("+ce(this._index[o],e)+", "+ce(s,e)+") ==> "+(this._values?ce(this._values[o],e):"X");return i},i.prototype.toString=function(){return ce(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(o(e)&&(e=e.toNumber()),!a(e)||!J(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[1],s=Math.min(this._size[0]-n,r-t),u=[],l=[],c=[];c[0]=0;for(var h=t;h<r&&u.length<s;h++)for(var d=this._ptr[h+1],p=this._ptr[h];p<d;p++){var f=this._index[p];if(f===h-t+n){u.push(this._values[p]),l[u.length-1]=f-n;break}}return c.push(u.length),new i({values:u,index:l,ptr:c,size:[s,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,s,u,l){if(!d(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(o(e)&&(e=e.toNumber()),!a(e)||!J(e)||e<1)throw new Error("Size values must be positive integers");return e})),s){if(o(s)&&(s=s.toNumber()),!a(s)||!J(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var c=n,f=0;h(l)&&(c=t.find(n,[l,l])||n,f=t.convert(0,l));var m,g=s>0?s:0,y=s<0?-s:0,v=e[0],b=e[1],_=Math.min(v-y,b-g);if(d(r)){if(r.length!==_)throw new Error("Invalid value array length");m=function(e){return r[e]}}else if(p(r)){var x=r.size();if(1!==x.length||x[0]!==_)throw new Error("Invalid matrix length");m=function(e){return r.get([e])}}else m=function(){return r};for(var w=[],S=[],E=[],C=0;C<b;C++){E.push(w.length);var k=C-g;if(k>=0&&k<_){var T=m(k);c(T,f)||(S.push(k+y),w.push(T))}}return E.push(w.length),new i({values:w,index:S,ptr:E,size:[v,b]})},i.prototype.swapRows=function(e,t){if(!(a(e)&&J(e)&&a(t)&&J(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return me(e,this._size[0]),me(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var s=r[e+1],a=r[e];a<s;a++)i(n[a],t[a])},i._swapRows=function(e,t,n,r,i,s){for(var a=0;a<n;a++){var o=s[a],u=s[a+1],l=c(e,o,u,i),h=c(t,o,u,i);if(l<u&&h<u&&i[l]===e&&i[h]===t){if(r){var d=r[l];r[l]=r[h],r[h]=d}}else if(l<u&&i[l]===e&&(h>=u||i[h]!==t)){var p=r?r[l]:void 0;i.splice(h,0,t),r&&r.splice(h,0,p),i.splice(h<=l?l+1:l,1),r&&r.splice(h<=l?l+1:l,1)}else if(h<u&&i[h]===t&&(l>=u||i[l]!==e)){var f=r?r[h]:void 0;i.splice(l,0,e),r&&r.splice(l,0,f),i.splice(l<=h?h+1:h,1),r&&r.splice(l<=h?h+1:h,1)}}},i},{isClass:!0});Se("bin",["typed","format"],e=>{var{typed:t,format:n}=e;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"bin",wordSize:t})}})});var St=Se("cos",["typed"],e=>{var{typed:t}=e;return t("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(e.value)},"Array | Matrix":function(e){return Ye(e,this)}})}),Et=Se("sqrt",["config","typed","Complex"],e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},"Array | Matrix":function(e){return Ye(e,this,!0)},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}}),Ct=Se("unaryMinus",["typed"],e=>{var{typed:t}=e;return t("unaryMinus",{number:rt,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return Ye(e,this,!0)}})}),kt=Se("fraction",["typed","Fraction"],e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return Ye(e,this)}})}),Tt=Se("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],e=>{var{typed:t,DenseMatrix:n,SparseMatrix:r}=e;return t("matrix",{"":function(){return i([])},string:function(e){return i([],e)},"string, string":function(e,t){return i([],e,t)},Array:function(e){return i(e)},Matrix:function(e){return i(e,e.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(e,t,i){if("dense"===t||"default"===t||void 0===t)return new n(e,i);if("sparse"===t)return new r(e,i);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}),At=Se("algorithm03",["typed"],e=>{var{typed:t}=e;return function(e,n,r,i){var s=e._data,a=e._size,o=e._datatype,u=n._values,l=n._index,c=n._ptr,h=n._size,d=n._datatype;if(a.length!==h.length)throw new he(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,f=a[0],m=a[1],g=0,y=r;"string"==typeof o&&o===d&&(g=t.convert(0,p=o),y=t.find(r,[p,p]));for(var v=[],b=0;b<f;b++)v[b]=[];for(var _=[],x=[],w=0;w<m;w++){for(var S=w+1,E=c[w+1],C=c[w];C<E;C++){var k=l[C];_[k]=i?y(u[C],s[k][w]):y(s[k][w],u[C]),x[k]=S}for(var T=0;T<f;T++)v[T][w]=x[T]===S?_[T]:i?y(g,s[T][w]):y(s[T][w],g)}return e.createDenseMatrix({data:v,size:[f,m],datatype:p})}}),Mt=Se("algorithm05",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var s=e._values,a=e._index,o=e._ptr,u=e._size,l=e._datatype,c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype;if(u.length!==p.length)throw new he(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var m,g=u[0],y=u[1],v=n,b=0,_=i;"string"==typeof l&&l===f&&(v=t.find(n,[m=l,m]),b=t.convert(0,m),_=t.find(i,[m,m]));var x,w,S,E,C=s&&c?[]:void 0,k=[],T=[],A=C?[]:void 0,M=C?[]:void 0,N=[],I=[];for(w=0;w<y;w++){T[w]=k.length;var D=w+1;for(S=o[w],E=o[w+1];S<E;S++)k.push(x=a[S]),N[x]=D,A&&(A[x]=s[S]);for(S=d[w],E=d[w+1];S<E;S++)N[x=h[S]]!==D&&k.push(x),I[x]=D,M&&(M[x]=c[S]);if(C)for(S=T[w];S<k.length;){var R=N[x=k[S]],L=I[x];if(R===D||L===D){var O=_(R===D?A[x]:b,L===D?M[x]:b);v(O,b)?k.splice(S,1):(C.push(O),S++)}}}return T[y]=k.length,e.createSparseMatrix({values:C,index:k,ptr:T,size:[g,y],datatype:m})}}),Nt=Se("algorithm11",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,u=e._ptr,l=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=l[0],p=l[1],f=n,m=0,g=i;"string"==typeof c&&(f=t.find(n,[h=c,h]),m=t.convert(0,h),r=t.convert(r,h),g=t.find(i,[h,h]));for(var y=[],v=[],b=[],_=0;_<p;_++){b[_]=v.length;for(var x=u[_+1],w=u[_];w<x;w++){var S=o[w],E=s?g(r,a[w]):g(a[w],r);f(E,m)||(v.push(S),y.push(E))}}return b[p]=v.length,e.createSparseMatrix({values:y,index:v,ptr:b,size:[d,p],datatype:h})}}),It=Se("algorithm12",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,u=e._ptr,l=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=l[0],p=l[1],f=i;"string"==typeof c&&(r=t.convert(r,h=c),f=t.find(i,[h,h]));for(var m=[],g=[],y=[],v=0;v<p;v++){for(var b=v+1,_=u[v+1],x=u[v];x<_;x++){var w=o[x];g[w]=a[x],y[w]=b}for(var S=0;S<d;S++)0===v&&(m[S]=[]),m[S][v]=y[S]===b?s?f(r,g[S]):f(g[S],r):s?f(r,0):f(0,r)}return new n({data:m,size:[d,p],datatype:h})}}),Dt=Se("algorithm13",["typed"],e=>{var{typed:t}=e;return function(e,n,r){var i,s=e._data,a=e._size,o=e._datatype,u=n._data,l=n._size,c=n._datatype,h=[];if(a.length!==l.length)throw new he(a.length,l.length);for(var d=0;d<a.length;d++){if(a[d]!==l[d])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+l+")");h[d]=a[d]}var p=r;"string"==typeof o&&o===c&&(p=t.find(r,[i=o,i]));var f=h.length>0?function e(t,n,r,i,s,a){var o=[];if(n===r.length-1)for(var u=0;u<i;u++)o[u]=t(s[u],a[u]);else for(var l=0;l<i;l++)o[l]=e(t,n+1,r,r[n+1],s[l],a[l]);return o}(p,0,h,h[0],s,u):[];return e.createDenseMatrix({data:f,size:h,datatype:i})}}),Rt=Se("algorithm14",["typed"],e=>{var{typed:t}=e;return function(e,n,r,i){var s,a=e._data,o=e._size,u=e._datatype,l=r;"string"==typeof u&&(n=t.convert(n,s=u),l=t.find(r,[s,s]));var c=o.length>0?function e(t,n,r,i,s,a,o){var u=[];if(n===r.length-1)for(var l=0;l<i;l++)u[l]=o?t(a,s[l]):t(s[l],a);else for(var c=0;c<i;c++)u[c]=e(t,n+1,r,r[n+1],s[c],a,o);return u}(l,0,o,o[0],a,n,i):[];return e.createDenseMatrix({data:c,size:G(o),datatype:s})}}),Lt=Se("algorithm01",["typed"],e=>{var{typed:t}=e;return function(e,n,r,i){var s=e._data,a=e._size,o=e._datatype,u=n._values,l=n._index,c=n._ptr,h=n._size,d=n._datatype;if(a.length!==h.length)throw new he(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,f,m=a[0],g=a[1],y="string"==typeof o&&o===d?o:void 0,v=y?t.find(r,[y,y]):r,b=[];for(p=0;p<m;p++)b[p]=[];var _=[],x=[];for(f=0;f<g;f++){for(var w=f+1,S=c[f+1],E=c[f];E<S;E++)_[p=l[E]]=i?v(u[E],s[p][f]):v(s[p][f],u[E]),x[p]=w;for(p=0;p<m;p++)b[p][f]=x[p]===w?_[p]:s[p][f]}return e.createDenseMatrix({data:b,size:[m,g],datatype:y})}});function Ot(){throw new Error('No "bignumber" implementation available')}function Ft(){throw new Error('No "fraction" implementation available')}function Pt(){throw new Error('No "matrix" implementation available')}var zt=Se("numeric",["number","?bignumber","?fraction"],e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:e=>t(e),BigNumber:n?e=>n(e):Ot,Fraction:r?e=>r(e):Ft};return function(e,t){var n=H(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in s))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(s).join(", "));return t===n?e:s[t](e)}}),$t=Se("size",["typed","config","?matrix"],e=>{var{typed:t,config:n,matrix:r}=e;return t("size",{Matrix:function(e){return e.create(e.size())},Array:pe,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([]):Pt()}})}),Bt=Se("algorithm07",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,i,s){var a=e._size,o=e._datatype,u=i._size,l=i._datatype;if(a.length!==u.length)throw new he(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");var c,h,d,p=a[0],f=a[1],m=0,g=s;"string"==typeof o&&o===l&&(m=t.convert(0,c=o),g=t.find(s,[c,c]));var y=[];for(h=0;h<p;h++)y[h]=[];var v=[],b=[],_=[],x=[];for(d=0;d<f;d++){var w=d+1;for(r(e,d,_,v,w),r(i,d,x,b,w),h=0;h<p;h++)y[h][d]=g(_[h]===w?v[h]:m,x[h]===w?b[h]:m)}return new n({data:y,size:[p,f],datatype:c})};function r(e,t,n,r,i){for(var s=e._values,a=e._index,o=e._ptr,u=o[t],l=o[t+1];u<l;u++){var c=a[u];n[c]=i,r[c]=s[u]}}}),Ut=Se("smaller",["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=At({typed:t}),a=Bt({typed:t,DenseMatrix:i}),o=It({typed:t,DenseMatrix:i}),u=Dt({typed:t}),l=Rt({typed:t});return t("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!oe(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!dt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})}),Vt=Se("algorithm10",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,s){var a=e._values,o=e._index,u=e._ptr,l=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=l[0],p=l[1],f=i;"string"==typeof c&&(r=t.convert(r,h=c),f=t.find(i,[h,h]));for(var m=[],g=[],y=[],v=0;v<p;v++){for(var b=v+1,_=u[v+1],x=u[v];x<_;x++){var w=o[x];g[w]=a[x],y[w]=b}for(var S=0;S<d;S++)0===v&&(m[S]=[]),m[S][v]=y[S]===b?s?f(r,g[S]):f(g[S],r):r}return new n({data:m,size:[d,p],datatype:h})}}),Wt=Se("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],e=>{var{typed:t,matrix:n,equalScalar:r,addScalar:i,unaryMinus:s,DenseMatrix:a}=e,o=Lt({typed:t}),u=At({typed:t}),l=Mt({typed:t,equalScalar:r}),c=Vt({typed:t,DenseMatrix:a}),h=Dt({typed:t}),d=Rt({typed:t});return t("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Ht(e,t),l(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return Ht(e,t),u(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Ht(e,t),o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Ht(e,t),h(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return c(e,s(t),i)},"DenseMatrix, any":function(e,t){return d(e,t,this)},"any, SparseMatrix":function(e,t){return c(t,e,this,!0)},"any, DenseMatrix":function(e,t){return d(t,e,this,!0)},"Array, any":function(e,t){return d(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return d(n(t),e,this,!0).valueOf()}})});function Ht(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new he(n.length,r.length)}var Gt=Se("transpose",["typed","matrix"],e=>{var{typed:t,matrix:n}=e;return t("transpose",{Array:function(e){return this(n(e)).valueOf()},Matrix:function(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+ce(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,i=e._data,s=[],a=0;a<n;a++){r=s[a]=[];for(var o=0;o<t;o++)r[o]=G(i[o][a])}return e.createDenseMatrix({data:s,size:[n,t],datatype:e._datatype})}(e,r,i);break;case"sparse":t=function(e,t,n){for(var r,i,s,a=e._values,o=e._index,u=e._ptr,l=a?[]:void 0,c=[],h=[],d=[],p=0;p<t;p++)d[p]=0;for(r=0,i=o.length;r<i;r++)d[o[r]]++;for(var f=0,m=0;m<t;m++)h.push(f),f+=d[m],d[m]=h[m];for(h.push(f),s=0;s<n;s++)for(var g=u[s+1],y=u[s];y<g;y++){var v=d[o[y]]++;c[v]=s,a&&(l[v]=G(a[y]))}return e.createSparseMatrix({values:l,index:c,ptr:h,size:[n,t],datatype:e._datatype})}(e,r,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+ce(this._size)+")")}return t},any:function(e){return G(e)}})}),jt=Se("zeros",["typed","config","matrix","BigNumber"],e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t("zeros",{"":function(){return"Array"===n.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return s(e,t)}return"Array"===n.matrix?s(e):s(e,"default")},Array:s,Matrix:function(e){var t=e.storage();return s(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){o(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new i(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!J(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var s=r(t);return e.length>0?s.resize(e,n):s}var a=[];return e.length>0?ge(a,e,n):a}}),qt=Se("ctranspose",["typed","transpose","conj"],e=>{var{typed:t,transpose:n,conj:r}=e;return t("ctranspose",{any:function(e){return r(n(e))}})}),Kt=Se("diag",["typed","matrix","DenseMatrix","SparseMatrix"],e=>{var{typed:t,matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t("diag",{Array:function(e){return s(e,0,pe(e),null)},"Array, number":function(e,t){return s(e,t,pe(e),null)},"Array, BigNumber":function(e,t){return s(e,t.toNumber(),pe(e),null)},"Array, string":function(e,t){return s(e,0,pe(e),t)},"Array, number, string":function(e,t,n){return s(e,t,pe(e),n)},"Array, BigNumber, string":function(e,t,n){return s(e,t.toNumber(),pe(e),n)},Matrix:function(e){return s(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return s(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return s(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return s(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return s(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return s(e,t.toNumber(),e.size(),n)}});function s(e,t,s,a){if(!J(t))throw new TypeError("Second parameter in function diag must be an integer");var o=t>0?t:0,u=t<0?-t:0;switch(s.length){case 1:return function(e,t,n,s,a,o){var u=[s+a,s+o];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var l="sparse"===n?i.diagonal(u,e,t):r.diagonal(u,e,t);return null!==n?l:l.valueOf()}(e,t,a,s[0],u,o);case 2:return function(e,t,r,i,s,a){if(p(e)){var o=e.diagonal(t);return null!==r?r!==o.storage()?n(o,r):o:o.valueOf()}for(var u=Math.min(i[0]-s,i[1]-a),l=[],c=0;c<u;c++)l[c]=e[c+s][c+a];return null!==r?n(l):l}(e,t,a,s,u,o)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}),Xt=Se("divideScalar",["typed","numeric"],e=>{var{typed:t,numeric:n}=e;return t("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var r=e.clone(),i=n(1,H(t));return r.value=this(null===r.value?r._normalize(i):r.value,t),r},"number | Fraction | BigNumber, Unit":function(e,t){var r=t.clone();r=r.pow(-1);var i=n(1,H(e));return r.value=this(e,null===t.value?t._normalize(i):t.value),r},"Unit, Unit":function(e,t){return e.divide(t)}})}),Zt=Se("equal",["typed","matrix","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i}=e,s=At({typed:t}),a=Bt({typed:t,DenseMatrix:i}),o=It({typed:t,DenseMatrix:i}),u=Dt({typed:t}),l=Rt({typed:t});return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return o(e,t,r,!1)},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"any, SparseMatrix":function(e,t){return o(t,e,r,!0)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()}})}),Yt=(Se("equal",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})}),Se("flatten",["typed","matrix"],e=>{var{typed:t,matrix:n}=e;return t("flatten",{Array:function(e){return xe(G(e))},Matrix:function(e){var t=xe(G(e.toArray()));return n(t)}})})),Jt=Se("algorithm04",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var s=e._values,a=e._index,o=e._ptr,u=e._size,l=e._datatype,c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype;if(u.length!==p.length)throw new he(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var m,g=u[0],y=u[1],v=n,b=0,_=i;"string"==typeof l&&l===f&&(v=t.find(n,[m=l,m]),b=t.convert(0,m),_=t.find(i,[m,m]));var x,w,S,E,C=s&&c?[]:void 0,k=[],T=[],A=s&&c?[]:void 0,M=s&&c?[]:void 0,N=[],I=[];for(w=0;w<y;w++){T[w]=k.length;var D=w+1;for(E=o[w+1],S=o[w];S<E;S++)k.push(x=a[S]),N[x]=D,A&&(A[x]=s[S]);for(E=d[w+1],S=d[w];S<E;S++)if(N[x=h[S]]===D){if(A){var R=_(A[x],c[S]);v(R,b)?N[x]=null:A[x]=R}}else k.push(x),I[x]=D,M&&(M[x]=c[S]);if(A&&M)for(S=T[w];S<k.length;)N[x=k[S]]===D?(C[S]=A[x],S++):I[x]===D?(C[S]=M[x],S++):k.splice(S,1)}return T[y]=k.length,e.createSparseMatrix({values:C,index:k,ptr:T,size:[g,y],datatype:m})}}),Qt=Se("ImmutableDenseMatrix",["smaller","DenseMatrix"],e=>{var{smaller:t,DenseMatrix:n}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(p(e)||d(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&d(e.data)&&d(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return(r.prototype=new n).type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return p(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:G(this._data),size:G(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},r},{isClass:!0}),en=Se("Index",["ImmutableDenseMatrix"],e=>{var{ImmutableDenseMatrix:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,i=arguments.length;t<i;t++){var s=arguments[t];if(y(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||p(s)){var a=r(s.valueOf());this._dimensions.push(a);var o=a.size();1===o.length&&1===o[0]||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(r([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}}}function r(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!J(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return n.prototype.type="Index",n.prototype.isIndex=!0,n.prototype.clone=function(){var e=new n;return e._dimensions=G(this._dimensions),e._isScalar=this._isScalar,e},n.create=function(e){var t=new n;return n.apply(t,e),t},n.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0]}return e},n.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max()}return e},n.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min()}return e},n.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},n.prototype.dimension=function(e){return this._dimensions[e]||null},n.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.valueOf=n.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray())}return e},n.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?JSON.stringify(r):r.toString())}return"["+e.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(e){return n.create(e.dimensions)},n},{isClass:!0}),tn=Se("largerEq",["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=At({typed:t}),a=Bt({typed:t,DenseMatrix:i}),o=It({typed:t,DenseMatrix:i}),u=Dt({typed:t}),l=Rt({typed:t});return t("largerEq",{"boolean, boolean":function(e,t){return e>=t},"number, number":function(e,t){return e>=t||oe(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gte(t)||dt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})});function nn(e){var{DenseMatrix:t}=e;return function(e,n,r){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+ce(i)+")");var s=i[0];if(s!==i[1])throw new RangeError("Matrix must be square (size: "+ce(i)+")");var a=[];if(p(n)){var o=n.size(),u=n._data;if(1===o.length){if(o[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<s;l++)a[l]=[u[l]];return new t({data:a,size:[s,1],datatype:n._datatype})}if(2===o.length){if(o[0]!==s||1!==o[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(m(n)){if(r){a=[];for(var c=0;c<s;c++)a[c]=[u[c][0]];return new t({data:a,size:[s,1],datatype:n._datatype})}return n}if(g(n)){for(var h=0;h<s;h++)a[h]=[0];for(var f=n._values,y=n._index,v=n._ptr,b=v[1],_=v[0];_<b;_++)a[y[_]][0]=f[_];return new t({data:a,size:[s,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(d(n)){var x=pe(n);if(1===x.length){if(x[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var w=0;w<s;w++)a[w]=[n[w]];return new t({data:a,size:[s,1]})}if(2===x.length){if(x[0]!==s||1!==x[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<s;S++)a[S]=[n[S][0]];return new t({data:a,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var rn=Se("matrixFromColumns",["typed","matrix","flatten","size"],e=>{var{typed:t,matrix:n,flatten:r,size:i}=e;return t("matrixFromColumns",{"...Array":function(e){return s(e)},"...Matrix":function(e){return n(s(e.map(e=>e.toArray())))}});function s(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=a(e[0]),n=[],i=0;i<t;i++)n[i]=[];for(var s of e){var o=a(s);if(o!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|o));for(var u=r(s),l=0;l<t;l++)n[l].push(u[l])}return n}function a(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}});function sn(e,t,n,r){if(!(this instanceof sn))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}(sn.prototype=new Error).constructor=Error,sn.prototype.name="ArgumentsError",sn.prototype.isArgumentsError=!0,n("lSNA");var an=Se("smallerEq",["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=At({typed:t}),a=Bt({typed:t,DenseMatrix:i}),o=It({typed:t,DenseMatrix:i}),u=Dt({typed:t}),l=Rt({typed:t});return t("smallerEq",{"boolean, boolean":function(e,t){return e<=t},"number, number":function(e,t){return e<=t||oe(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lte(t)||dt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})}),on=(Se("unequal",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}),Se("usolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtract:s,equalScalar:a,DenseMatrix:o}=e,u=nn({DenseMatrix:o});return t("usolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=u(e,t,!0))._data,l=e._size[0],c=e._values,h=e._index,d=e._ptr,p=[],f=e._size[1]-1;f>=0;f--){var m=n[f][0]||0;if(a(m,0))p[f]=[0];else{for(var g=0,y=[],v=[],b=d[f],_=d[f+1]-1;_>=b;_--){var x=h[_];x===f?g=c[_]:x<f&&(y.push(c[_]),v.push(x))}if(a(g,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var w=r(m,g),S=0,E=v.length;S<E;S++){var C=v[S];n[C]=[s(n[C][0],i(w,y[S]))]}p[f]=[w]}}return new o({data:p,size:[l,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(n(e),t).valueOf()}});function l(e,t){for(var n=(t=u(e,t,!0))._data,l=e._size[0],c=[],h=e._data,d=e._size[1]-1;d>=0;d--){var p=n[d][0]||0,f=void 0;if(a(p,0))f=0;else{var m=h[d][d];if(a(m,0))throw new Error("Linear system cannot be solved since matrix is singular");f=r(p,m);for(var g=d-1;g>=0;g--)n[g]=[s(n[g][0]||0,i(f,h[g][d]))]}c[d]=[f]}return new o({data:c,size:[l,1]})}})),un=Se("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:s}=e,a=Lt({typed:t}),o=Jt({typed:t,equalScalar:i}),u=Vt({typed:t,DenseMatrix:s}),l=Dt({typed:t}),c=Rt({typed:t});return t("add",j({"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,r)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,r,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,r,!0)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"SparseMatrix, any":function(e,t){return u(e,t,r,!1)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"any, SparseMatrix":function(e,t){return u(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++)r=this(r,n[i]);return r}},r.signatures))});n("6XX6");var ln=Se("dot",["typed","addScalar","multiplyScalar","conj","size"],e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,s){var u=a(e,s),l=p(e)?e._data:e,c=p(e)?e._datatype:void 0,h=p(s)?s._data:s,d=p(s)?s._datatype:void 0,f=2===o(e).length,m=2===o(s).length,g=n,y=r;if(c&&d&&c===d&&"string"==typeof c){var v=c;g=t.find(n,[v,v]),y=t.find(r,[v,v])}if(!f&&!m){for(var b=y(i(l[0]),h[0]),_=1;_<u;_++)b=g(b,y(i(l[_]),h[_]));return b}if(!f&&m){for(var x=y(i(l[0]),h[0][0]),w=1;w<u;w++)x=g(x,y(i(l[w]),h[w][0]));return x}if(f&&!m){for(var S=y(i(l[0][0]),h[0]),E=1;E<u;E++)S=g(S,y(i(l[E][0]),h[E]));return S}if(f&&m){for(var C=y(i(l[0][0]),h[0][0]),k=1;k<u;k++)C=g(C,y(i(l[k][0]),h[k][0]));return C}},"SparseMatrix, SparseMatrix":function(e,t){a(e,t);for(var i=e._index,s=e._values,o=t._index,u=t._values,l=0,c=n,h=r,d=0,p=0;d<i.length&&p<o.length;){var f=i[d],m=o[p];f<m?d++:f>m?p++:f===m&&(l=c(l,h(s[d],u[p])),d++,p++)}return l}});function a(e,t){var n,r,i=o(e),s=o(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===s.length)r=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");r=s[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function o(e){return p(e)?e.size():s(e)}}),cn=Se("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=e;return t("identity",{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return l(e,t,n)},Array:function(e){return u(e)},"Array, string":function(e,t){return u(e,t)},Matrix:function(e){return u(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return u(e.valueOf(),t)}});function u(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,n){var r=o(e)||o(t)?i:null;if(o(e)&&(e=e.toNumber()),o(t)&&(t=t.toNumber()),!J(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!J(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var u=r?new i(1):1,l=r?new r(0):0,c=[e,t];if(n){if("sparse"===n)return a.diagonal(c,u,0,l);if("dense"===n)return s.diagonal(c,u,0,l);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var h=ge([],c,l),d=e<t?e:t,p=0;p<d;p++)h[p][p]=u;return h}}),hn=Se("larger",["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i}=e,s=At({typed:t}),a=Bt({typed:t,DenseMatrix:i}),o=It({typed:t,DenseMatrix:i}),u=Dt({typed:t}),l=Rt({typed:t});return t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!oe(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!dt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})}),dn=Se("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:a}=e,o=Nt({typed:t,equalScalar:s}),u=Rt({typed:t});function l(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var c=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var s,a=e._data,o=e._size,u=e._datatype,l=n._data,c=n._datatype,h=o[0],d=o[1],p=r,f=i;u&&c&&u===c&&"string"==typeof u&&(p=t.find(r,[s=u,s]),f=t.find(i,[s,s]));for(var m=[],g=0;g<h;g++){for(var y=a[g],v=f(y[0],l[0]),b=1;b<d;b++)v=p(v,f(y[b],l[b]));m[g]=v}return e.createDenseMatrix({data:m,size:[h],datatype:s})},"SparseMatrix, any":function(e,n){var a=e._values,o=e._index,u=e._ptr,l=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,d=n._datatype,p=e._size[0],f=n._size[0],m=[],g=[],y=[],v=r,b=i,_=s,x=0;l&&d&&l===d&&"string"==typeof l&&(v=t.find(r,[c=l,c]),b=t.find(i,[c,c]),_=t.find(s,[c,c]),x=t.convert(0,c));var w=[],S=[];y[0]=0;for(var E=0;E<f;E++){var C=h[E];if(!_(C,x))for(var k=u[E+1],T=u[E];T<k;T++){var A=o[T];S[A]?w[A]=v(w[A],b(C,a[T])):(S[A]=!0,g.push(A),w[A]=b(C,a[T]))}}for(var M=g.length,N=0;N<M;N++)m[N]=w[g[N]];return y[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:y,size:[p,1],datatype:c})}}),h=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var s,a=e._data,o=e._size,u=e._datatype,l=n._data,c=n._datatype,h=o[0],d=o[1],p=n._size[1],f=r,m=i;u&&c&&u===c&&"string"==typeof u&&(f=t.find(r,[s=u,s]),m=t.find(i,[s,s]));for(var g=[],y=0;y<h;y++){var v=a[y];g[y]=[];for(var b=0;b<p;b++){for(var _=m(v[0],l[0][b]),x=1;x<d;x++)_=f(_,m(v[x],l[x][b]));g[y][b]=_}}return e.createDenseMatrix({data:g,size:[h,p],datatype:s})},"DenseMatrix, SparseMatrix":function(e,n){var a=e._data,o=e._size,u=e._datatype,l=n._values,c=n._index,h=n._ptr,d=n._size,p=n._datatype;if(!l)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=o[0],g=d[1],y=r,v=i,b=s,_=0;u&&p&&u===p&&"string"==typeof u&&(y=t.find(r,[f=u,f]),v=t.find(i,[f,f]),b=t.find(s,[f,f]),_=t.convert(0,f));for(var x=[],w=[],S=[],E=n.createSparseMatrix({values:x,index:w,ptr:S,size:[m,g],datatype:f}),C=0;C<g;C++){S[C]=w.length;var k=h[C],T=h[C+1];if(T>k)for(var A=0,M=0;M<m;M++){for(var N=M+1,I=void 0,D=k;D<T;D++){var R=c[D];A!==N?(I=v(a[M][R],l[D]),A=N):I=y(I,v(a[M][R],l[D]))}A!==N||b(I,_)||(w.push(M),x.push(I))}}return S[g]=w.length,E},"SparseMatrix, DenseMatrix":function(e,n){var a=e._values,o=e._index,u=e._ptr,l=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,d=n._datatype,p=e._size[0],f=n._size[0],m=n._size[1],g=r,y=i,v=s,b=0;l&&d&&l===d&&"string"==typeof l&&(g=t.find(r,[c=l,c]),y=t.find(i,[c,c]),v=t.find(s,[c,c]),b=t.convert(0,c));for(var _=[],x=[],w=[],S=e.createSparseMatrix({values:_,index:x,ptr:w,size:[p,m],datatype:c}),E=[],C=[],k=0;k<m;k++){w[k]=x.length;for(var T=k+1,A=0;A<f;A++){var M=h[A][k];if(!v(M,b))for(var N=u[A+1],I=u[A];I<N;I++){var D=o[I];C[D]!==T?(C[D]=T,x.push(D),E[D]=y(M,a[I])):E[D]=g(E[D],y(M,a[I]))}}for(var R=x.length,L=w[k];L<R;L++)_[L]=E[x[L]]}return w[m]=x.length,S},"SparseMatrix, SparseMatrix":function(e,n){var s,a=e._values,o=e._index,u=e._ptr,l=e._datatype,c=n._values,h=n._index,d=n._ptr,p=n._datatype,f=e._size[0],m=n._size[1],g=a&&c,y=r,v=i;l&&p&&l===p&&"string"==typeof l&&(y=t.find(r,[s=l,s]),v=t.find(i,[s,s]));for(var b,_,x,w,S,E,C=g?[]:void 0,k=[],T=[],A=e.createSparseMatrix({values:C,index:k,ptr:T,size:[f,m],datatype:s}),M=g?[]:void 0,N=[],I=0;I<m;I++){T[I]=k.length;var D=I+1;for(w=d[I+1],x=d[I];x<w;x++)if(E=h[x],g)for(_=u[E+1],b=u[E];b<_;b++)N[S=o[b]]!==D?(N[S]=D,k.push(S),M[S]=v(c[x],a[b])):M[S]=y(M[S],v(c[x],a[b]));else for(_=u[E+1],b=u[E];b<_;b++)N[S=o[b]]!==D&&(N[S]=D,k.push(S));if(g)for(var R=k.length,L=T[I];L<R;L++)C[L]=M[k[L]]}return T[m]=k.length,A}});return t("multiply",j({"Array, Array":function(e,t){l(pe(e),pe(t));var r=this(n(e),n(t));return p(r)?r.valueOf():r},"Matrix, Matrix":function(e,n){var s=e.size(),o=n.size();return l(s,o),1===s.length?1===o.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return a(e,t)}(e,n,s[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var s,a=e._data,o=e._datatype,u=n._data,l=n._datatype,c=e._size[0],h=n._size[1],d=r,p=i;o&&l&&o===l&&"string"==typeof o&&(d=t.find(r,[s=o,s]),p=t.find(i,[s,s]));for(var f=[],m=0;m<h;m++){for(var g=p(a[0],u[0][m]),y=1;y<c;y++)g=d(g,p(a[y],u[y][m]));f[m]=g}return e.createDenseMatrix({data:f,size:[h],datatype:s})}(e,n)}(e,n):1===o.length?c(e,n):h(e,n)},"Matrix, Array":function(e,t){return this(e,n(t))},"Array, Matrix":function(e,t){return this(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return o(e,t,i,!1)},"DenseMatrix, any":function(e,t){return u(e,t,i,!1)},"any, SparseMatrix":function(e,t){return o(t,e,i,!0)},"any, DenseMatrix":function(e,t){return u(t,e,i,!0)},"Array, any":function(e,t){return u(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++)r=this(r,n[i]);return r}},i.signatures))}),pn=Se("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,number:a,fraction:o,Complex:u}=e;return t("pow",{"number, number":l,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){var r=e.pow(t);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return l(e.valueOf(),t.valueOf())},"Array, number":c,"Array, BigNumber":function(e,t){return c(e,t.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(e,t){return h(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function l(e,t){if(n.predictable&&!J(t)&&e<0)try{var r=o(t),i=a(r);if((t===i||Math.abs((t-i)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t)}catch(s){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:J(t)||e>=0||n.predictable?st(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0)}function c(e,t){if(!J(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var n=pe(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var s=r(n[0]).valueOf(),a=e;t>=1;)1==(1&t)&&(s=i(a,s)),t>>=1,a=i(a,a);return s}function h(e,t){return s(c(e.valueOf(),t))}}),fn=Se("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],e=>{var{typed:t,matrix:n,zeros:r,identity:s,isZero:a,equal:o,sign:u,sqrt:l,conj:c,unaryMinus:h,addScalar:d,divideScalar:p,multiplyScalar:f,subtract:m,complex:g}=e;return i()(t("qr",{DenseMatrix:function(e){return v(e)},SparseMatrix:function(e){return function(e){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=v(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:y});function y(e){var t,n,i,g=e._size[0],y=e._size[1],v=s([g],"dense"),b=v._data,_=e.clone(),x=_._data,w=r([g],"");for(i=0;i<Math.min(y,g);++i){var S=x[i][i],E=h(o(S,0)?1:u(S)),C=c(E),k=0;for(t=i;t<g;t++)k=d(k,f(x[t][i],c(x[t][i])));var T=f(E,l(k));if(!a(T)){var A=m(S,T);for(w[i]=1,t=i+1;t<g;t++)w[t]=p(x[t][i],A);var M=h(c(p(A,T))),N=void 0;for(n=i;n<y;n++){for(N=0,t=i;t<g;t++)N=d(N,f(c(w[t]),x[t][n]));for(N=f(N,M),t=i;t<g;t++)x[t][n]=f(m(x[t][n],f(w[t],N)),C)}for(t=0;t<g;t++){for(N=0,n=i;n<g;n++)N=d(N,f(b[t][n],w[n]));for(N=f(N,M),n=i;n<g;++n)b[t][n]=p(m(b[t][n],f(N,c(w[n]))),C)}}}return{Q:v,R:_,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(e){var t=y(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?g(0):0,i=0;i<n.length;++i)for(var s=0;s<i&&s<(n[0]||[]).length;++s)n[i][s]=r;return t}}),mn=Se("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],e=>{var{typed:t,config:n,matrix:r,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:u}=e;return t("range",{string:c,"string, boolean":c,"number, number":function(e,t){return l(h(e,t,1))},"number, number, number":function(e,t,n){return l(h(e,t,n))},"number, number, boolean":function(e,t,n){return l(n?d(e,t,1):h(e,t,1))},"number, number, number, boolean":function(e,t,n,r){return l(r?d(e,t,n):h(e,t,n))},"BigNumber, BigNumber":function(e,t){return l(p(e,t,new(0,e.constructor)(1)))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return l(p(e,t,n))},"BigNumber, BigNumber, boolean":function(e,t,n){var r=e.constructor;return l(n?f(e,t,new r(1)):p(e,t,new r(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return l(r?f(e,t,n):p(e,t,n))}});function l(e){return"Matrix"===n.matrix?r?r(e):Pt():e}function c(e,t){var r=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===i&&Ot(),l((t?f:p)(i(r.start),i(r.end),i(r.step)))):l((t?d:h)(r.start,r.end,r.step))}function h(e,t,n){var r=[],i=e;if(n>0)for(;s(i,t);)r.push(i),i+=n;else if(n<0)for(;o(i,t);)r.push(i),i+=n;return r}function d(e,t,n){var r=[],i=e;if(n>0)for(;a(i,t);)r.push(i),i+=n;else if(n<0)for(;u(i,t);)r.push(i),i+=n;return r}function p(e,t,n){var r=i(0),a=[],u=e;if(n.gt(r))for(;s(u,t);)a.push(u),u=u.plus(n);else if(n.lt(r))for(;o(u,t);)a.push(u),u=u.plus(n);return a}function f(e,t,n){var r=i(0),s=[],o=e;if(n.gt(r))for(;a(o,t);)s.push(o),o=o.plus(n);else if(n.lt(r))for(;u(o,t);)s.push(o),o=o.plus(n);return s}}),gn=Se("usolveAll",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtract:s,equalScalar:a,DenseMatrix:o}=e,u=nn({DenseMatrix:o});return t("usolveAll",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[u(e,t,!0)._data.map(e=>e[0])],l=e._size[0],c=e._values,h=e._index,d=e._ptr,p=e._size[1]-1;p>=0;p--)for(var f=n.length,m=0;m<f;m++){for(var g=n[m],y=[],v=[],b=d[p],_=0,x=d[p+1]-1;x>=b;x--){var w=h[x];w===p?_=c[x]:w<p&&(y.push(c[x]),v.push(w))}if(a(_,0))if(a(g[p],0)){if(0===m){var S=[...g];S[p]=1;for(var E=0,C=v.length;E<C;E++){var k=v[E];S[k]=s(S[k],y[E])}n.push(S)}}else{if(0===m)return[];n.splice(m,1),m-=1,f-=1}else{g[p]=r(g[p],_);for(var T=0,A=v.length;T<A;T++){var M=v[T];g[M]=s(g[M],i(g[p],y[T]))}}}return n.map(e=>new o({data:e.map(e=>[e]),size:[l,1]}))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return l(e,t)},"Array, Array | Matrix":function(e,t){return l(n(e),t).map(e=>e.valueOf())}});function l(e,t){for(var n=[u(e,t,!0)._data.map(e=>e[0])],l=e._data,c=e._size[0],h=e._size[1]-1;h>=0;h--)for(var d=n.length,p=0;p<d;p++){var f=n[p];if(a(l[h][h],0))if(a(f[h],0)){if(0===p){var m=[...f];m[h]=1;for(var g=h-1;g>=0;g--)m[g]=s(m[g],l[g][h]);n.push(m)}}else{if(0===p)return[];n.splice(p,1),p-=1,d-=1}else{f[h]=r(f[h],l[h][h]);for(var y=h-1;y>=0;y--)f[y]=s(f[y],i(f[h],l[y][h]))}}return n.map(e=>new o({data:e.map(e=>[e]),size:[c,1]}))}}),yn=Se("column",["typed","Index","matrix","range"],e=>{var{typed:t,Index:n,matrix:r,range:i}=e;return t("column",{"Matrix, number":s,"Array, number":function(e,t){return s(r(G(e)),t).valueOf()}});function s(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");me(t,e.size()[1]);var r=i(0,e.size()[0]),s=new n(r,t);return e.subset(s)}}),vn=Se("cross",["typed","matrix","subtract","multiply"],e=>{var{typed:t,matrix:n,subtract:r,multiply:i}=e;return t("cross",{"Matrix, Matrix":function(e,t){return n(s(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(s(e.toArray(),t))},"Array, Matrix":function(e,t){return n(s(e,t.toArray()))},"Array, Array":s});function s(e,t){var n=Math.max(pe(e).length,pe(t).length);e=be(e),t=be(t);var s=pe(e),a=pe(t);if(1!==s.length||1!==a.length||3!==s[0]||3!==a[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+s.join(", ")+"], B = ["+a.join(", ")+"])");var o=[r(i(e[1],t[2]),i(e[2],t[1])),r(i(e[2],t[0]),i(e[0],t[2])),r(i(e[0],t[1]),i(e[1],t[0]))];return n>1?[o]:o}}),bn=Se("FibonacciHeap",["smaller","larger"],e=>{var{smaller:t,larger:n}=e,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,s=e.degree,o=e.child;s>0;){var u=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=u,s--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var s,o=Math.floor(Math.log(i)*r)+1,u=new Array(o),l=0,c=e;if(c)for(l++,c=c.right;c!==e;)l++,c=c.right;for(;l>0;){for(var h=c.degree,d=c.right;s=u[h];){if(n(c.key,s.key)){var p=s;s=c,c=p}a(s,c),u[h]=null,h++}u[h]=c,c=d,l--}e=null;for(var f=0;f<o;f++)(s=u[f])&&(e?(s.left.right=s.right,s.right.left=s.left,s.left=e,s.right=e.right,e.right=s,s.right.left=s,t(s.key,e.key)&&(e=s)):e=s);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=-1;var i=n.parent;return i&&t(n.key,i.key)&&(s(e,n,i),function e(t,n){var r=n.parent;r&&(n.mark?(s(t,n,r),e(r)):n.mark=!0)}(e,i)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var a=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i},{isClass:!0}),_n=Se("Spa",["addScalar","equalScalar","FibonacciHeap"],e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:r}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,s=this._values,a=[],o=i.extractMinimum();for(o&&a.push(o);o&&o.key<=t;)o.key>=e&&(n(o.value,0)||r(o.key,o.value,this)),(o=i.extractMinimum())&&a.push(o);for(var u=0;u<a.length;u++){var l=a[u];s[(o=i.insert(l.key,l.value)).key]=o}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i},{isClass:!0}),xn=Se("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],e=>{var{typed:t,matrix:n,abs:r,addScalar:i,divideScalar:s,multiplyScalar:a,subtract:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:p}=e;return t("lup",{DenseMatrix:function(e){return f(e)},SparseMatrix:function(e){return function(e){var t,n,i,o=e._size[0],h=e._size[1],f=Math.min(o,h),m=e._values,g=e._index,y=e._ptr,v=[],b=[],_=[],x=[o,f],w=[],S=[],E=[],C=[f,h],k=[],T=[];for(t=0;t<o;t++)k[t]=t,T[t]=t;var A=function(){var e=new p;n<o&&(_.push(v.length),v.push(1),b.push(n)),E.push(w.length);var h=y[n+1];for(i=y[n];i<h;i++)e.set(k[t=g[i]],m[i]);n>0&&e.forEach(0,n-1,(function(t,n){d._forEachRow(t,v,b,_,(function(r,i){r>t&&e.accumulate(r,c(a(i,n)))}))}));var f,A,M,N,I=n,D=e.get(n),R=r(D);e.forEach(n+1,o-1,(function(e,t){var n=r(t);u(n,R)&&(I=e,R=n,D=t)})),n!==I&&(d._swapRows(n,I,x[1],v,b,_),d._swapRows(n,I,C[1],w,S,E),e.swap(n,I),N=T[A=I],k[M=T[f=n]]=A,k[N]=f,T[f]=N,T[A]=M),e.forEach(0,o-1,(function(e,t){e<=n?(w.push(t),S.push(e)):(t=s(t,D),l(t,0)||(v.push(t),b.push(e)))}))};for(n=0;n<h;n++)A();return E.push(w.length),_.push(v.length),{L:new d({values:v,index:b,ptr:_,size:x}),U:new d({values:w,index:S,ptr:E,size:C}),p:k,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=f(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function f(e){var t,n,c,d=e._size[0],p=e._size[1],f=Math.min(d,p),m=G(e._data),g=[],y=[d,f],v=[],b=[f,p],_=[];for(t=0;t<d;t++)_[t]=t;for(n=0;n<p;n++){if(n>0)for(t=0;t<d;t++){var x=Math.min(t,n),w=0;for(c=0;c<x;c++)w=i(w,a(m[t][c],m[c][n]));m[t][n]=o(m[t][n],w)}var S=n,E=0,C=0;for(t=n;t<d;t++){var k=m[t][n],T=r(k);u(T,E)&&(S=t,E=T,C=k)}if(n!==S&&(_[n]=[_[S],_[S]=_[n]][0],h._swapRows(n,S,m)),n<d)for(t=n+1;t<d;t++)l(m[t][n],0)||(m[t][n]=s(m[t][n],C))}for(n=0;n<p;n++)for(t=0;t<d;t++)0===n&&(t<p&&(v[t]=[]),g[t]=[]),t<n?(t<p&&(v[t][n]=m[t][n]),n<d&&(g[t][n]=0)):t!==n?(t<p&&(v[t][n]=0),n<d&&(g[t][n]=m[t][n])):(t<p&&(v[t][n]=m[t][n]),n<d&&(g[t][n]=1));var A=new h({data:g,size:y}),M=new h({data:v,size:b}),N=[];for(t=0,f=_.length;t<f;t++)N[_[t]]=t;return{L:A,U:M,p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),wn=Se("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],e=>{var{typed:t,matrix:n,subtract:r,multiply:i,unaryMinus:s,lup:a}=e;return t("det",{any:function(e){return G(e)},"Array | Matrix":function(e){var t;switch((t=p(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return G(e);case 1:if(1===t[0])return G(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+ce(t)+")");case 2:var o=t[0];if(o===t[1])return function(e,t,n){if(1===t)return G(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var o=a(e),u=o.U[0][0],l=1;l<t;l++)u=i(u,o.U[l][l]);for(var c=0,h=0,d=[];;){for(;d[h];)h++;if(h>=t)break;for(var p=h,f=0;!d[o.p[p]];)d[o.p[p]]=!0,p=o.p[p],f++;f%2==0&&c++}return c%2==0?u:s(u)}(e.clone().valueOf(),o);throw new RangeError("Matrix must be square (size: "+ce(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ce(t)+")")}}})}),Sn=Se("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:u,abs:l}=e;return t("inv",{"Array | Matrix":function(e){var t=p(e)?e.size():pe(e);switch(t.length){case 1:if(1===t[0])return p(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+ce(t)+")");case 2:var i=t[0],s=t[1];if(i===s)return p(e)?n(c(e.valueOf(),i,s),e.storage()):c(e,i,s);throw new RangeError("Matrix must be square (size: "+ce(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ce(t)+")")}},any:function(e){return r(1,e)}});function c(e,t,n){var c,h,d,p,f;if(1===t){if(0===(p=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,p)]]}if(2===t){var m=o(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(a(e[0][1]),m)],[r(a(e[1][0]),m),r(e[0][0],m)]]}var g=e.concat();for(c=0;c<t;c++)g[c]=g[c].concat();for(var y=u(t).valueOf(),v=0;v<n;v++){var b=l(g[v][v]),_=v;for(c=v+1;c<t;)l(g[c][v])>b&&(b=l(g[c][v]),_=c),c++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(c=_)!==v&&(f=g[v],g[v]=g[c],g[c]=f,f=y[v],y[v]=y[c],y[c]=f);var x=g[v],w=y[v];for(c=0;c<t;c++){var S=g[c],E=y[c];if(c!==v){if(0!==S[v]){for(d=r(a(S[v]),x[v]),h=v;h<n;h++)S[h]=i(S[h],s(d,x[h]));for(h=0;h<n;h++)E[h]=i(E[h],s(d,w[h]))}}else{for(d=x[v],h=v;h<n;h++)S[h]=r(S[h],d);for(h=0;h<n;h++)E[h]=r(E[h],d)}}}return y}}),En=Se("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:s,inv:a}=e,o=Nt({typed:t,equalScalar:i}),u=Rt({typed:t});return t("divide",j({"Array | Matrix, Array | Matrix":function(e,t){return r(e,a(t))},"DenseMatrix, any":function(e,t){return u(e,t,s,!1)},"SparseMatrix, any":function(e,t){return o(e,t,s,!1)},"Array, any":function(e,t){return u(n(e),t,s,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,a(t))}},s.signatures))}),Cn=Se("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],e=>{var{config:t,typed:n,matrix:r,addScalar:i,subtract:s,equal:c,abs:h,atan:d,cos:p,sin:f,multiplyScalar:m,divideScalar:g,inv:y,bignumber:v,multiply:b,add:_,larger:x,column:w,flatten:S,number:E,complex:C,sqrt:k,diag:T,qr:A,usolve:M,usolveAll:N,im:I,re:D,smaller:R,matrixFromColumns:L,dot:O}=e,F=function(e){var{config:t,addScalar:n,subtract:r,abs:i,atan:s,cos:a,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:h,add:d}=e;function p(e,n){for(var r,i=e.length,s=Math.abs(n/i),a=new Array(i),o=0;o<i;o++)a[o]=w(i,0),a[o][o]=1;for(var u=b(e);Math.abs(u[1])>=Math.abs(s);){var l=u[0][0],c=u[0][1];e=v(e,(h=e[l][l],d=e[c][c],p=e[l][c],r=Math.abs(d-h)<=t.epsilon?Math.PI/4:.5*Math.atan(2*p/(d-h))),l,c),a=m(a,r,l,c),u=b(e)}for(var h,d,p,f=w(i,0),g=0;g<i;g++)f[g]=e[g][g];return x(G(f),G(a))}function f(e,n){for(var a,o=e.length,d=i(n/o),p=new Array(o),f=0;f<o;f++)p[f]=w(o,0),p[f][f]=1;for(var m=_(e);i(m[1])>=i(d);){var v=m[0][0],b=m[0][1];e=y(e,(S=e[v][b],void 0,E=r(e[b][b],e[v][v]),a=i(E)<=t.epsilon?c(-1).acos().div(4):u(.5,s(h(2,S,l(E))))),v,b),p=g(p,a,v,b),m=_(e)}for(var S,E,C=w(o,0),k=0;k<o;k++)C[k]=e[k][k];return x(G(C),G(p))}function m(e,t,n,r){for(var i=e.length,s=Math.cos(t),a=Math.sin(t),o=w(i,0),u=w(i,0),l=0;l<i;l++)o[l]=s*e[l][n]-a*e[l][r],u[l]=a*e[l][n]+s*e[l][r];for(var c=0;c<i;c++)e[c][n]=o[c],e[c][r]=u[c];return e}function g(e,t,i,s){for(var l=e.length,h=a(t),d=o(t),p=w(l,c(0)),f=w(l,c(0)),m=0;m<l;m++)p[m]=r(u(h,e[m][i]),u(d,e[m][s])),f[m]=n(u(d,e[m][i]),u(h,e[m][s]));for(var g=0;g<l;g++)e[g][i]=p[g],e[g][s]=f[g];return e}function y(e,t,i,s){for(var l=e.length,p=c(a(t)),f=c(o(t)),m=u(p,p),g=u(f,f),y=w(l,c(0)),v=w(l,c(0)),b=h(c(2),p,f,e[i][s]),_=n(r(u(m,e[i][i]),b),u(g,e[s][s])),x=d(u(g,e[i][i]),b,u(m,e[s][s])),S=0;S<l;S++)y[S]=r(u(p,e[i][S]),u(f,e[s][S])),v[S]=n(u(f,e[i][S]),u(p,e[s][S]));e[i][i]=_,e[s][s]=x,e[i][s]=c(0),e[s][i]=c(0);for(var E=0;E<l;E++)E!==i&&E!==s&&(e[i][E]=y[E],e[E][i]=y[E],e[s][E]=v[E],e[E][s]=v[E]);return e}function v(e,t,n,r){for(var i=e.length,s=Math.cos(t),a=Math.sin(t),o=s*s,u=a*a,l=w(i,0),c=w(i,0),h=o*e[n][n]-2*s*a*e[n][r]+u*e[r][r],d=u*e[n][n]+2*s*a*e[n][r]+o*e[r][r],p=0;p<i;p++)l[p]=s*e[n][p]-a*e[r][p],c[p]=a*e[n][p]+s*e[r][p];e[n][n]=h,e[r][r]=d,e[n][r]=0,e[r][n]=0;for(var f=0;f<i;f++)f!==n&&f!==r&&(e[n][f]=l[f],e[f][n]=l[f],e[r][f]=c[f],e[f][r]=c[f]);return e}function b(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var s=i+1;s<t;s++)Math.abs(n)<Math.abs(e[i][s])&&(n=Math.abs(e[i][s]),r=[i,s]);return[r,n]}function _(e){for(var t=e.length,n=0,r=[0,1],s=0;s<t;s++)for(var a=s+1;a<t;a++)i(n)<i(e[s][a])&&(n=i(e[s][a]),r=[s,a]);return[r,n]}function x(e,t){for(var n=e.length,r=Array(n),s=Array(n),a=0;a<n;a++)s[a]=Array(n);for(var o=0;o<n;o++){for(var u=0,l=e[0],c=0;c<e.length;c++)i(e[c])<i(l)&&(l=e[u=c]);r[o]=e.splice(u,1)[0];for(var h=0;h<n;h++)s[h][o]=t[h][u],t[h].splice(u,1)}return{values:r,vectors:s}}function w(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.epsilon,i=arguments.length>3?arguments[3]:void 0;if("number"===i)return p(e,r);if("BigNumber"===i)return f(e,r);throw TypeError("Unsupported data type: "+i)}}({config:t,addScalar:i,subtract:s,column:w,flatten:S,equal:c,abs:h,atan:d,cos:p,sin:f,multiplyScalar:m,inv:y,bignumber:v,complex:C,multiply:b,add:_}),P=function(e){var{addScalar:t,subtract:n,flatten:r,multiply:i,multiplyScalar:s,divideScalar:a,sqrt:o,abs:u,bignumber:l,diag:c,inv:h,qr:d,usolve:p,usolveAll:f,equal:m,complex:g,larger:y,smaller:v,matrixFromColumns:b,dot:_}=e;function x(e,t,r,i,s,a,o,c){var h="BigNumber"===c,d="Complex"===c,p=h?l(0):d?g(0):0,f=h?l(1):d?g(1):1;if(v(u(r),o))return[[f,p],[p,f]];if(y(u(n(s,a)),o))return[[n(s,i),n(a,i)],[r,r]];var m=n(e,s),b=n(t,s),_=n(r,s),x=n(i,s);return v(u(b),o)?[[m,f],[_,p]]:[[b,p],[x,f]]}function w(e,t){for(var n=0;n<e.length;n++)e[n].push(...Array(t-e[n].length).fill(0));for(var r=e.length;r<t;r++)e.push(Array(t).fill(0)),e[r][r]=1;return e}function S(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return r;return-1}function E(e,t,n,r,i){for(var s,a="BigNumber"===i?l(1e3):1e3,o=0;s=C(t,n,i),s=p(e,s),!y(T(s),a);)if(++o>=5)return null;for(o=0;;){var u=p(e,s);if(v(T(k(s,[u])),r))break;if(++o>=10)return null;s=A(u)}return s}function C(e,t,n){var r="BigNumber"===n,i="Complex"===n,s=Array(e).fill(0).map(e=>2*Math.random()-1);return r&&(s=s.map(e=>l(e))),i&&(s=s.map(e=>g(e))),A(s=k(s,t),n)}function k(e,t){for(var r of t)e=n(e,i(a(_(r,e),_(r,r)),r));return e}function T(e){return u(o(_(e,e)))}function A(e,t){var n="Complex"===t,r="BigNumber"===t?l(1):n?g(1):1;return i(a(r,T(e)),e)}return function(e,p,_,C,k){void 0===k&&(k=!0);var T=function(e,n,r,i,o){var h,d="BigNumber"===i,p="Complex"===i,f=d?l(0):p?g(0):0,b=d?l(1):p?g(1):1,_=d?l(10):2,x=s(_,_);o&&(h=Array(n).fill(b));for(var w=!1;!w;){w=!0;for(var S=0;S<n;S++){for(var E=f,C=f,k=0;k<n;k++)if(S!==k){var T=u(e[S][k]);E=t(E,T),C=t(C,T)}if(!m(E,0)&&!m(C,0)){for(var A=b,M=E,N=a(C,_),I=s(C,_);v(M,N);)M=s(M,x),A=s(A,_);for(;y(M,I);)M=a(M,x),A=a(A,_);if(v(a(t(M,C),A),s(t(E,C),.95))){w=!1;for(var D=a(1,A),R=0;R<n;R++)S!==R&&(e[S][R]=s(e[S][R],A),e[R][S]=s(e[R][S],D));o&&(h[S]=s(h[S],A))}}}}return c(h)}(e,p,0,C,k);!function(e,r,i,o,c,h){var d="BigNumber"===o,p="Complex"===o,f=d?l(0):p?g(0):0;d&&(i=l(i));for(var m=0;m<r-2;m++){for(var y=0,b=f,_=m+1;_<r;_++){var x=e[_][m];v(u(b),u(x))&&(b=x,y=_)}if(!v(u(b),i)){if(y!==m+1){var w=e[y];e[y]=e[m+1],e[m+1]=w;for(var S=0;S<r;S++){var E=e[S][y];e[S][y]=e[S][m+1],e[S][m+1]=E}if(c){var C=h[y];h[y]=h[m+1],h[m+1]=C}}for(var k=m+2;k<r;k++){var T=a(e[k][m],b);if(0!==T){for(var A=0;A<r;A++)e[k][A]=n(e[k][A],s(T,e[m+1][A]));for(var M=0;M<r;M++)e[M][m+1]=t(e[M][m+1],s(T,e[M][k]));if(c)for(var N=0;N<r;N++)h[k][N]=n(h[k][N],s(T,h[m+1][N]))}}}}}(e,p,_,C,k,T);var A,{values:M,C:N}=function(e,r,a,h,p){var f="BigNumber"===h,m="Complex"===h,y=f?l(1):m?g(1):1;f&&(a=l(a));for(var b,_,S,E,C,k,T,A,M=G(e),N=[],I=r,D=[],R=p?c(Array(r).fill(y)):void 0,L=p?c(Array(I).fill(y)):void 0,O=0;O<=100;){O+=1;for(var F=0;F<I;F++)M[F][F]=n(M[F][F],0);var{Q:P,R:z}=d(M);M=i(z,P);for(var $=0;$<I;$++)M[$][$]=t(M[$][$],0);if(p&&(L=i(L,P)),1===I||v(u(M[I-1][I-2]),a)){O=0,N.push(M[I-1][I-1]),p&&(D.unshift([[1]]),w(L,r),R=i(R,L),I>1&&(L=c(Array(I-1).fill(y)))),I-=1,M.pop();for(var B=0;B<I;B++)M[B].pop()}else if(2===I||v(u(M[I-2][I-3]),a)){O=0;var U=(_=M[I-2][I-1],S=M[I-1][I-2],C=t(b=M[I-2][I-2],E=M[I-1][I-1]),k=n(s(b,E),s(_,S)),T=s(C,.5),A=s(o(n(s(C,C),s(4,k))),.5),[t(T,A),n(T,A)]);N.push(...U),p&&(D.unshift(x(M[I-2][I-2],M[I-2][I-1],M[I-1][I-2],M[I-1][I-1],U[0],U[1],a,h)),w(L,r),R=i(R,L),I>2&&(L=c(Array(I-2).fill(y)))),I-=2,M.pop(),M.pop();for(var V=0;V<I;V++)M[V].pop(),M[V].pop()}if(0===I)break}if(N.sort((e,t)=>+n(u(e),u(t))),O>100){var W=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+N.join(", "));throw W.values=N,W.vectors=[],W}return{values:N,C:p?i(R,function(e,t){for(var n=[],r=0;r<t;r++)n[r]=Array(t).fill(0);var i=0;for(var s of e){for(var a=s.length,o=0;o<a;o++)for(var u=0;u<a;u++)n[i+o][i+u]=s[o][u];i+=a}return n}(D,r)):void 0}}(e,p,_,C,k);return N=i(h(T),N),k&&(A=function(e,t,s,a,o,u){var d=h(s),p=i(d,e,s),y="BigNumber"===u,v="Complex"===u,b=y?l(0):v?g(0):0,_=y?l(1):v?g(1):1,x=[],w=[];for(var C of a){var k=S(x,C,m);-1===k?(x.push(C),w.push(1)):w[k]+=1}for(var T=[],A=x.length,M=Array(t).fill(b),N=c(Array(t).fill(_)),I=[],D=0;D<A;D++){var R=x[D],L=n(p,i(R,N)),O=f(L,M);for((O=O.map(e=>i(s,e))).shift();O.length<w[D];){var F=E(L,t,O,o,u);if(null==F){I.push(R);break}O.push(F)}T.push(...O.map(e=>r(e)))}if(0!==I.length){var P=new Error("Failed to find eigenvectors for the following eigenvalues: "+I.join(", "));throw P.values=a,P.vectors=T,P}return T}(e,p,N,M,_,C),A=b(...A)),{values:M,vectors:A}}}({config:t,addScalar:i,subtract:s,multiply:b,multiplyScalar:m,flatten:S,divideScalar:g,sqrt:k,abs:h,bignumber:v,diag:T,qr:A,inv:y,usolve:M,usolveAll:N,equal:c,complex:C,larger:x,smaller:R,matrixFromColumns:L,dot:O});return n("eigs",{Array:function(e){return z(r(e))},"Array, number|BigNumber":function(e,t){return z(r(e),t)},Matrix:function(e){var{values:t,vectors:n}=z(e);return{values:r(t),vectors:r(n)}},"Matrix, number|BigNumber":function(e,t){var{values:n,vectors:i}=z(e,t);return{values:r(n),vectors:r(i)}}});function z(e,n){void 0===n&&(n=t.epsilon);var r=e.size();if(2!==r.length||r[0]!==r[1])throw new RangeError("Matrix must be square (size: "+ce(r)+")");var i=e.toArray(),a=r[0];if(function(e,t,n){for(var r=0;r<t;r++)for(var i=0;i<t;i++)if(x(v(h(I(e[r][i]))),n))return!1;return!0}(i,a,n)&&(function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)e[n][r]=D(e[n][r])}(i,a),function(e,t,n){for(var r=0;r<t;r++)for(var i=r;i<t;i++)if(x(v(h(s(e[r][i],e[i][r]))),n))return!1;return!0}(i,a,n))){var o=$(e,i,a);return F(i,a,n,o)}var u=$(e,i,a);return P(i,a,n,u)}function $(e,t,n){var r=e.datatype();if("number"===r||"BigNumber"===r||"Complex"===r)return r;for(var i=!1,s=!1,c=!1,h=0;h<n;h++)for(var d=0;d<n;d++){var p=t[h][d];if(a(p)||l(p))i=!0;else if(o(p))s=!0;else{if(!u(p))throw TypeError("Unsupported type in Matrix: "+H(p));c=!0}}if(s&&c&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),c){for(var f=0;f<n;f++)for(var m=0;m<n;m++)t[f][m]=C(t[f][m]);return"Complex"}if(s){for(var g=0;g<n;g++)for(var y=0;y<n;y++)t[g][y]=v(t[g][y]);return"BigNumber"}if(i){for(var b=0;b<n;b++)for(var _=0;_<n;_++)t[b][_]=E(t[b][_]);return"number"}throw TypeError("Matrix contains unsupported types only.")}}),kn=Se("norm",["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],e=>{var{typed:t,abs:n,add:r,pow:i,conj:s,sqrt:a,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:h,ctranspose:d,eigs:p}=e;return t("norm",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return f(h(e),2)},Matrix:function(e){return f(e,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(e){return this(e)},"Array, number | BigNumber | string":function(e,t){return f(h(e),t)},"Matrix, number | BigNumber | string":function(e,t){return f(e,t)}});function f(e,t){var h=e.size();if(1===h.length)return function(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var r=n(e);l(r,t)&&(t=r)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var r=n(e);t&&!c(r,t)||(t=r)}),!0),t||0}(e);if("fro"===t)return f(e,2);if("number"==typeof t&&!isNaN(t)){if(!u(t,0)){var s=0;return e.forEach((function(e){s=r(i(n(e),t),s)}),!0),i(s,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}(e,t);if(2===h.length){if(h[0]&&h[1])return function(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var a=s[1],o=r(t[a]||0,n(e));l(o,i)&&(i=o),t[a]=o}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var a=s[0],o=r(t[a]||0,n(e));l(o,i)&&(i=o),t[a]=o}),!0),i}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,n){t=r(t,o(e,s(e)))})),n(a(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=d(e),i=o(r,e),s=p(i).values.toArray();return n(a(s[s.length-1]))}(e);throw new Error("Unsupported parameter value "+t)}(e,t);throw new RangeError("Invalid matrix dimensions")}}});n.d(t,"d",(function(){return Jn})),n.d(t,"f",(function(){return nr})),n.d(t,"c",(function(){return gr})),n.d(t,"a",(function(){return Cr})),n.d(t,"b",(function(){return Tr})),n.d(t,"e",(function(){return Ar}));var Tn=Ce({config:X}),An=Ae({}),Mn=Fe({}),Nn=Pe({}),In=ze({Matrix:Nn}),Dn=qe({BigNumber:Tn,Complex:An,DenseMatrix:In,Fraction:Mn}),Rn=at({typed:Dn}),Ln=ot({typed:Dn}),On=ut({typed:Dn}),Fn=lt({BigNumber:Tn,typed:Dn}),Pn=ct({Complex:An,typed:Dn}),zn=ht({typed:Dn}),$n=pt({config:X,typed:Dn}),Bn=ft({typed:Dn}),Un=gt({typed:Dn}),Vn=yt({typed:Dn}),Wn=vt({typed:Dn}),Hn=bt({typed:Dn}),Gn=_t({BigNumber:Tn,Fraction:Mn,complex:Pn,typed:Dn}),jn=xt({typed:Dn}),qn=wt({Matrix:Nn,equalScalar:$n,typed:Dn}),Kn=St({typed:Dn}),Xn=Et({Complex:An,config:X,typed:Dn}),Zn=Ct({typed:Dn}),Yn=kt({Fraction:Mn,typed:Dn}),Jn=Tt({DenseMatrix:In,Matrix:Nn,SparseMatrix:qn,typed:Dn}),Qn=zt({bignumber:Fn,fraction:Yn,number:Wn}),er=$t({matrix:Jn,config:X,typed:Dn}),tr=Ut({DenseMatrix:In,config:X,matrix:Jn,typed:Dn}),nr=Wt({DenseMatrix:In,addScalar:Ln,equalScalar:$n,matrix:Jn,typed:Dn,unaryMinus:Zn}),rr=Gt({matrix:Jn,typed:Dn}),ir=jt({BigNumber:Tn,config:X,matrix:Jn,typed:Dn}),sr=qt({conj:zn,transpose:rr,typed:Dn}),ar=Kt({DenseMatrix:In,SparseMatrix:qn,matrix:Jn,typed:Dn}),or=Xt({numeric:Qn,typed:Dn}),ur=Zt({DenseMatrix:In,equalScalar:$n,matrix:Jn,typed:Dn}),lr=Yt({matrix:Jn,typed:Dn}),cr=en({ImmutableDenseMatrix:Qt({DenseMatrix:In,smaller:tr})}),hr=tn({DenseMatrix:In,config:X,matrix:Jn,typed:Dn}),dr=rn({flatten:lr,matrix:Jn,size:er,typed:Dn}),pr=an({DenseMatrix:In,config:X,matrix:Jn,typed:Dn}),fr=on({DenseMatrix:In,divideScalar:or,equalScalar:$n,matrix:Jn,multiplyScalar:Vn,subtract:nr,typed:Dn}),mr=un({DenseMatrix:In,SparseMatrix:qn,addScalar:Ln,equalScalar:$n,matrix:Jn,typed:Dn}),gr=ln({addScalar:Ln,conj:zn,multiplyScalar:Vn,size:er,typed:Dn}),yr=cn({BigNumber:Tn,DenseMatrix:In,SparseMatrix:qn,config:X,matrix:Jn,typed:Dn}),vr=hn({DenseMatrix:In,config:X,matrix:Jn,typed:Dn}),br=dn({addScalar:Ln,dot:gr,equalScalar:$n,matrix:Jn,multiplyScalar:Vn,typed:Dn}),_r=pn({Complex:An,config:X,fraction:Yn,identity:yr,matrix:Jn,multiply:br,number:Wn,typed:Dn}),xr=fn({addScalar:Ln,complex:Pn,conj:zn,divideScalar:or,equal:ur,identity:yr,isZero:Un,matrix:Jn,multiplyScalar:Vn,sign:Gn,sqrt:Xn,subtract:nr,typed:Dn,unaryMinus:Zn,zeros:ir}),wr=mn({bignumber:Fn,matrix:Jn,config:X,larger:vr,largerEq:hr,smaller:tr,smallerEq:pr,typed:Dn}),Sr=gn({DenseMatrix:In,divideScalar:or,equalScalar:$n,matrix:Jn,multiplyScalar:Vn,subtract:nr,typed:Dn}),Er=yn({Index:cr,matrix:Jn,range:wr,typed:Dn}),Cr=vn({matrix:Jn,multiply:br,subtract:nr,typed:Dn}),kr=Sn({abs:Rn,addScalar:Ln,det:wn({lup:xn({DenseMatrix:In,Spa:_n({FibonacciHeap:bn({larger:vr,smaller:tr}),addScalar:Ln,equalScalar:$n}),SparseMatrix:qn,abs:Rn,addScalar:Ln,divideScalar:or,equalScalar:$n,larger:vr,matrix:Jn,multiplyScalar:Vn,subtract:nr,typed:Dn,unaryMinus:Zn}),matrix:Jn,multiply:br,subtract:nr,typed:Dn,unaryMinus:Zn}),divideScalar:or,identity:yr,matrix:Jn,multiply:br,typed:Dn,unaryMinus:Zn}),Tr=En({divideScalar:or,equalScalar:$n,inv:kr,matrix:Jn,multiply:br,typed:Dn}),Ar=kn({abs:Rn,add:mr,conj:zn,ctranspose:sr,eigs:Cn({abs:Rn,add:mr,addScalar:Ln,atan:On,bignumber:Fn,column:Er,complex:Pn,config:X,cos:Kn,diag:ar,divideScalar:or,dot:gr,equal:ur,flatten:lr,im:Bn,inv:kr,larger:vr,matrix:Jn,matrixFromColumns:dr,multiply:br,multiplyScalar:Vn,number:Wn,qr:xr,re:Hn,sin:jn,smaller:tr,sqrt:Xn,subtract:nr,typed:Dn,usolve:fr,usolveAll:Sr}),equalScalar:$n,larger:vr,matrix:Jn,multiply:br,pow:_r,smaller:tr,sqrt:Xn,typed:Dn})},eUH1:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],r[i]=n^=(e^=e<<13)^e<<9,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},endd:function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},eqyj:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},euyF:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,s=t.i;return t.w=r=r+1640531527|0,n=i[s+34&127],e=i[s=s+1&127],n^=n<<13,e^=e<<17,n=i[s]=(n^=n>>>15)^(e^=e>>>12),t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,i,s,a,o=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,s=-32;s<u;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=o[127&s]^=r+(a=a+1640531527|0))?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,o[i]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=o,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"f+t/":function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},g7np:function(e,t,n){"use strict";var r=n("2SVd"),i=n("5oMp");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},hIuj:function(e,t,n){"use strict";var r=n("XM5P").version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],a=t[s];if(a){var o=e[s],u=void 0===o||a(o,s,e);if(!0!==u)throw new TypeError("option "+s+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:i}},ie1u:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},ikQK:function(e,t,n){var r=n("3Mn4"),i=n("EJp0"),s=n("I05N"),a=n("HzFN"),o=n("d0Zt"),u=n("5o5E"),l=n("5fPn");l.alea=r,l.xor128=i,l.xorwow=s,l.xorshift7=a,l.xor4096=o,l.tychei=u,e.exports=l},"jfS+":function(e,t,n){"use strict";var r=n("endd");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},meep:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},oIJX:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},pDBr:function(e,t,n){var r=n("YWYm"),i=n("f+t/"),s=n("34t7"),a=n("PkQR"),o=n("5vwH"),u=n("oIJX"),l=n("9/Hw");l.alea=r,l.xor128=i,l.xorwow=s,l.xorshift7=a,l.xor4096=o,l.tychei=u,e.exports=l},"pJ3+":function(e,t,n){var r;!function(i,s){var a,o=(0,eval)("this"),u=s.pow(256,6),l=s.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=f(function e(t,n){var r,i=[],s=typeof t;if(n&&"object"==s)for(r in t)try{i.push(e(t[r],n-1))}catch(a){}return i.length?i:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(i)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(o.crypto||o.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,m(i)]}}():e,3),r),g=new d(r),y=function(){for(var e=g.g(6),t=u,n=0;e<l;)e=256*(e+n),t*=256,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,f(m(g.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&p(r,g),e.state=function(){return p(g,{})}),n?(s.random=e,t):e})(y,h,"global"in t?t.global:this==s,t.state)}function d(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[s=255&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=255&i+1],n=256*n+a[255&(a[i]=a[s=255&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,f(s.random(),i),e.exports){e.exports=h;try{a=n(4)}catch(g){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},pJ6O:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},pVnL:function(e,t){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},qAop:function(e,t,n){"use strict";var r=n("meep"),i=n("Ivzd");const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},a={setTimeout(...e){const{delegate:t}=a;return((null==t?void 0:t.setTimeout)||setTimeout)(...e)},clearTimeout(e){const{delegate:t}=a;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function o(){}const u=l("C",void 0,void 0);function l(e,t,n){return{kind:e,value:t,error:n}}class c extends i.b{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Object(i.c)(e)&&e.add(this)):this.destination=m}static create(e,t,n){return new h(e,t,n)}next(e){this.isStopped?f(function(e){return l("N",e,void 0)}(e),this):this._next(e)}error(e){this.isStopped?f(l("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?f(u,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class h extends c{constructor(e,t,n){let i;if(super(),Object(r.a)(e))i=e;else if(e){let r;({next:i,error:t,complete:n}=e),this&&s.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe()):r=e,i=null==i?void 0:i.bind(r),t=null==t?void 0:t.bind(r),n=null==n?void 0:n.bind(r)}this.destination={next:i?d(i,this):o,error:d(null!=t?t:p,this),complete:n?d(n,this):o}}}function d(e,t){return(...n)=>{try{e(...n)}catch(r){if(s.useDeprecatedSynchronousErrorHandling){if(!t._syncErrorHack_isSubscribing)throw r;t.__syncError=r}else!function(e){a.setTimeout(()=>{const{onUnhandledError:t}=s;if(!t)throw e;t(e)})}(r)}}}function p(e){throw e}function f(e,t){const{onStoppedNotification:n}=s;n&&a.setTimeout(()=>n(e,t))}const m={closed:!0,next:o,error:p,complete:o},g="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(e){return e}class v{constructor(e){e&&(this._subscribe=e)}lift(e){const t=new v;return t.source=this,t.operator=e,t}subscribe(e,t,n){const a=(o=e)&&o instanceof c||function(e){return e&&Object(r.a)(e.next)&&Object(r.a)(e.error)&&Object(r.a)(e.complete)}(o)&&Object(i.c)(o)?e:new h(e,t,n);var o;if(s.useDeprecatedSynchronousErrorHandling)this._deprecatedSyncErrorSubscribe(a);else{const{operator:e,source:t}=this;a.add(e?e.call(a,t):t?this._subscribe(a):this._trySubscribe(a))}return a}_deprecatedSyncErrorSubscribe(e){const t=e;t._syncErrorHack_isSubscribing=!0;const{operator:n}=this;if(n)e.add(n.call(e,this.source));else try{this._subscribe(e)}catch(i){t.__syncError=i}let r=t;for(;r;){if("__syncError"in r)try{throw r.__syncError}finally{e.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1}_trySubscribe(e){try{return this._subscribe(e)}catch(t){e.error(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),null==r||r.unsubscribe()}},n,t)})}_subscribe(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)}[g](){return this}pipe(...e){return e.length?(0===(t=e).length?y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this):this;var t}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}function b(e){var t;return null!==(t=null!=e?e:s.Promise)&&void 0!==t?t:Promise}v.create=e=>new v(e);var _=n("HoZ9");const x=Object(_.a)(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var w=n("D9hF");n.d(t,"a",(function(){return S}));class S extends v{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const t=new E(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new x}next(e){if(this._throwIfClosed(),!this.isStopped){const t=this.observers.slice();for(const n of t)n.next(e)}}error(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:t}=this;for(;t.length;)t.shift().error(e)}}complete(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:t,isStopped:n,observers:r}=this;return t||n?i.a:(r.push(e),new i.b(()=>Object(w.a)(r,e)))}_checkFinalizedStatuses(e){const{hasError:t,thrownError:n,isStopped:r}=this;t?e.error(n):r&&e.complete()}asObservable(){const e=new v;return e.source=this,e}}S.create=(e,t)=>new E(e,t);class E extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:i.a}}},tQ2B:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("Rn+g"),s=n("eqyj"),a=n("MLWZ"),o=n("g7np"),u=n("w0Vi"),l=n("OTTw"),c=n("LYNF"),h=n("JEQr"),d=n("endd");e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+_)}var x=o(e.baseURL,e.url);function w(){if(v){var r="getAllResponseHeaders"in v?u(v.getAllResponseHeaders()):null;i((function(e){t(e),y()}),(function(e){n(e),y()}),{data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v}),v=null}}if(v.open(e.method.toUpperCase(),a(x,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(w)},v.onabort=function(){v&&(n(c("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(c("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,(e.transitional||h.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||l(x))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&r.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(n(!e||e&&e.type?new d("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},uDiL:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},vDqi:function(e,t,n){e.exports=n("zuR4")},w0Vi:function(e,t,n){"use strict";var r=n("xTJ+"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,a={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},wptm:function(e,t,n){var r;!function(i,s){var a,o=this,u=s.pow(256,6),l=s.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=f(function e(t,n){var r,i=[],s=typeof t;if(n&&"object"==s)for(r in t)try{i.push(e(t[r],n-1))}catch(a){}return i.length?i:"string"==s?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(i)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(o.crypto||o.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,m(i)]}}():e,3),r),g=new d(r),y=function(){for(var e=g.g(6),t=u,n=0;e<l;)e=256*(e+n),t*=256,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,f(m(g.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&p(r,g),e.state=function(){return p(g,{})}),n?(s.random=e,t):e})(y,h,"global"in t?t.global:this==s,t.state)}function d(e){var t,n=e.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[s=255&s+e[i%n]+(t=a[i])],a[s]=t;(r.g=function(e){for(var t,n=0,i=r.i,s=r.j,a=r.S;e--;)t=a[i=255&i+1],n=256*n+a[255&(a[i]=a[s=255&s+t])+(a[s]=t)];return r.i=i,r.j=s,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,f(s.random(),i),e.exports){e.exports=h;try{a=n(7)}catch(g){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},"ws/Y":function(e,t){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var i=r;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(t=t(s=i[e=e[e.length-1]]))!=s&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function a(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function o(e){if(!(e instanceof Array)){e=a(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",(function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(r+(n||"")+"_"+i++,n)}})),i("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<i.length;a++){var o=r[i[a]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&n(o.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e}));var u,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var c;e:{var h={};try{h.__proto__={a:!0},c=h.a;break e}catch(dt){}c=!1}u=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=u;function p(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function f(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function g(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function y(e,t,n){return e.g=n,{value:t}}function v(e){this.g=new f,this.h=e}function b(e,t,n,r){try{var i=t.call(e.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.l=!1,i;var s=i.value}catch(a){return e.g.i=null,g(e.g,a),_(e)}return e.g.i=null,r.call(e.g,s),_(e)}function _(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,g(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=_(e)),t},this.throw=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.throw,t,e.g.o):(g(e.g,t),t=_(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.i;return n?b(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e,t){return t=new x(new v(t)),d&&e.prototype&&d(t,e.prototype),t}f.prototype.o=function(e){this.h=e},f.prototype.return=function(e){this.j={return:e},this.g=this.s};var S="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};i("Object.assign",(function(e){return e||S})),i("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var s=r.setTimeout;n.prototype.i=function(e){s(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;s((function(){if(e.B()){var t=r.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){s(n)}}:t}var i,s,a=new t((function(e,t){i=e,s=t}));return this.J(r(e,i),r(n,s)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=a(e),s=r.next();!s.done;s=r.next())i(s.value).J(t,n)}))},t.all=function(e){var n=a(e),r=n.next();return r.done?i([]):new t((function(e,t){function s(t){return function(n){a[t]=n,0==--o&&e(a)}}var a=[],o=0;do{a.push(void 0),o++,i(r.value).J(s(a.length-1),t),r=n.next()}while(!r.done)}))},t})),i("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),i("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),i("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),i("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){return!r&&n<e.length?{value:n++,done:!1}:(r=!0,{done:!0,value:void 0})}};return i[Symbol.iterator]=function(){return i},i}(this)}}));var E=this||self;function C(e,t){e=e.split(".");var n,r=E;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function k(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var T,A,M="undefined"!=typeof TextDecoder,N="undefined"!=typeof TextEncoder;function I(e){if(N)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),i=0;i<e.length;i++){var s=e.charCodeAt(i);if(128>s)r[n++]=s;else{if(2048>s)r[n++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&i<e.length){var a=e.charCodeAt(++i);if(56320<=a&&57343>=a){r[n++]=(s=1024*(s-55296)+a-56320+65536)>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128;continue}i--}if(t)throw Error("Found an unpaired surrogate");s=65533}r[n++]=s>>12|224,r[n++]=s>>6&63|128}r[n++]=63&s|128}}e=r.subarray(0,n)}return e}var D={},R=null;function L(e,t){void 0===t&&(t=0),O(),t=D[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",i=0,s=0;i<e.length-2;i+=3){var a=e[i],o=e[i+1],u=e[i+2],l=t[a>>2];n[s++]=l+(a=t[(3&a)<<4|o>>4])+(o=t[(15&o)<<2|u>>6])+(u=t[63&u])}switch(l=0,u=r,e.length-i){case 2:u=t[(15&(l=e[i+1]))<<2]||r;case 1:n[s]=t[(e=e[i])>>2]+t[(3&e)<<4|l>>4]+u+r}return n.join("")}function O(){if(!R){R={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));D[n]=r;for(var i=0;i<r.length;i++){var s=r[i];void 0===R[s]&&(R[s]=i)}}}}var F,P="function"==typeof Uint8Array.prototype.slice;function z(e,t,n){return t===n?F||(F=new Uint8Array(0)):P?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var $=0;function B(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=t,e&&U(this,e)}function U(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer?new Uint8Array(t):t.constructor===Array?new Uint8Array(t):t.constructor===String?function(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=R[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}O();for(var r=0;;){var i=n(-1),s=n(0),a=n(64),o=n(64);if(64===o&&-1===i)break;t(i<<2|s>>4),64!=a&&(t(s<<4&240|a>>2),64!=o&&t(a<<6&192|o))}}(e,(function(e){r[i++]=e})),r.subarray(0,i)}(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.l=0,e.j=e.h.length,e.g=e.l}function V(e){for(var t=128,n=0,r=0,i=0;4>i&&128<=t;i++)n|=(127&(t=e.h[e.g++]))<<7*i;if(128<=t&&(n|=(127&(t=e.h[e.g++]))<<28,r|=(127&t)>>4),128<=t)for(i=0;5>i&&128<=t;i++)r|=(127&(t=e.h[e.g++]))<<7*i+3;if(128>t)return e=n>>>0,(r=2147483648&(t=r>>>0))&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=4294967296*t+(e>>>0),r?-e:e;e.m=!0}B.prototype.reset=function(){this.g=this.l},B.prototype.i=function(){var e=this.h,t=e[this.g],n=127&t;return 128>t?(this.g+=1,n):(n|=(127&(t=e[this.g+1]))<<7,128>t?(this.g+=2,n):(n|=(127&(t=e[this.g+2]))<<14,128>t?(this.g+=3,n):(n|=(127&(t=e[this.g+3]))<<21,128>t?(this.g+=4,n):(n|=(15&(t=e[this.g+4]))<<28,128>t?(this.g+=5,n>>>0):(this.g+=5,128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&this.g++,n)))))},B.prototype.o=function(){var e=this.h[this.g],t=this.h[this.g+1],n=this.h[this.g+2],r=this.h[this.g+3];return this.g+=4,e=2*((n=(e<<0|t<<8|n<<16|r<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))};var W=[];function H(){this.g=new Uint8Array(64),this.h=0}function G(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function j(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,W.length?(n=W.pop(),t&&(n.v=t.v),e&&U(n,e),e=n):e=new B(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function q(e){var t=e.g;if((t=t.g==t.j)||(t=e.j)||(t=(t=e.g).m||0>t.g||t.g>t.j),t)return!1;e.m=e.g.g;var n=7&(t=e.g.i());return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function K(e,t,n){var r=e.g.j,i=e.g.i(),s=e.g.g+i;if(e.g.j=s,n(t,e),0!=(n=s-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+i+" bytes, instead read "+(i-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=s,e.g.j=r,t}function X(e){return e.g.o()}function Z(e){var t,n=e.g.i(),r=(e=e.g).g;if(e.g+=n,e=e.h,M)(t=T)||(t=T=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(r,r+n));else{n=r+n;for(var i,s,a,o=[],u=null;r<n;)128>(i=e[r++])?o.push(i):224>i?r>=n?o.push(65533):(s=e[r++],194>i||128!=(192&s)?(r--,o.push(65533)):o.push((31&i)<<6|63&s)):240>i?r>=n-1?o.push(65533):128!=(192&(s=e[r++]))||224===i&&160>s||237===i&&160<=s||128!=(192&(t=e[r++]))?(r--,o.push(65533)):o.push((15&i)<<12|(63&s)<<6|63&t):244>=i?r>=n-2?o.push(65533):128!=(192&(s=e[r++]))||0!=s-144+(i<<28)>>30||128!=(192&(t=e[r++]))||128!=(192&(a=e[r++]))?(r--,o.push(65533)):(i=(7&i)<<18|(63&s)<<12|(63&t)<<6|63&a,o.push(55296+((i-=65536)>>10&1023),56320+(1023&i))):o.push(65533),8192<=o.length&&(u=k(u,o),o.length=0);t=k(u,o)}return t}function Y(e,t,n){var r=e.g.i();for(r=e.g.g+r;e.g.g<r;)n.push(t.call(e.g))}function J(e,t){2==e.h?Y(e,B.prototype.o,t):t.push(X(e))}function Q(){this.h=[],this.i=0,this.g=new H}function ee(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function te(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,r=n.length,i=0,s=0;s<r;s++){var a=n[s];0!==a.length&&(t.set(a,i),i+=a.length)}return 0!==(r=(n=e.g).h)&&(t.set(n.g.subarray(0,r),i),n.h=0),e.h=[t],t}function ne(e,t,n){if(null!=n){G(e.g,8*t+5),e=e.g;var r=n;0===(r=(n=0>r?1:0)?-r:r)?$=0<1/r?0:2147483648:isNaN(r)?$=2147483647:34028234663852886e22<r?$=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),$=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,$=(n<<31|t+127<<23|8388607&r)>>>0),e.push((n=$)>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}H.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},H.prototype.length=function(){return this.h},H.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,z(e,0,t)},j.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var re="function"==typeof Uint8Array;function ie(e,t,n){if(null!=e)return"object"==typeof e?re&&e instanceof Uint8Array?n(e):se(e,t,n):t(e)}function se(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),i=0;i<e.length;i++)r[i]=ie(e[i],t,n);return Array.isArray(e)&&e.W&&le(r),r}for(i in r={},e)r[i]=ie(e[i],t,n);return r}function ae(e){return"number"==typeof e?isFinite(e)?e:String(e):e}var oe,ue={W:{value:!0,configurable:!0}};function le(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,ue),e}function ce(e,t,n){var r=oe;if(oe=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=r?0:-1,this.m=this.g=null,this.h=e,e=(r=this.h.length)-1,!r||null===(r=this.h[e])||"object"!=typeof r||Array.isArray(r)||re&&r instanceof Uint8Array?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(r=this.h[e+=this.j])?le(r):this.h[e]=he:(de(this),(r=this.i[e])?le(r):this.i[e]=he)}var he=Object.freeze(le([]));function de(e){var t=e.l+e.j;e.h[t]||(e.i=e.h[t]={})}function pe(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.i?e.i[t]:void 0:e.h[t+e.j]}function fe(e,t){var n=void 0!==n&&n,r=pe(e,t,n);return null==r&&(r=he),r===he&&ve(e,t,r=le([]),n),r}function me(e){var t=fe(e,3);if(e.m||(e.m={}),!e.m[3]){for(var n=0;n<t.length;n++)t[n]=+t[n];e.m[3]=!0}return t}function ge(e,t,n){return null==(e=pe(e,t))?n:e}function ye(e,t,n){return null==(e=null==(e=pe(e,t))?e:+e)?void 0===n?0:n:e}function ve(e,t,n,r){void 0!==r&&r||t>=e.l?(de(e),e.i[t]=n):e.h[t+e.j]=n}function be(e,t,n){if(-1===n)return null;if(e.g||(e.g={}),!e.g[n]){var r=pe(e,n,!1);r&&(e.g[n]=new t(r))}return e.g[n]}function _e(e,t){e.g||(e.g={});var n=e.g[1];if(!n){var r=fe(e,1);n=[];for(var i=0;i<r.length;i++)n[i]=new t(r[i]);e.g[1]=n}return n}function xe(e,t,n){var r=void 0!==r&&r;e.g||(e.g={});var i=n?Se(n,!1):n;e.g[t]=n,ve(e,t,i,r)}function we(e,t,n,r){var i=_e(e,n);t=t||new n,e=fe(e,1),null!=r?(i.splice(r,0,t),e.splice(r,0,Se(t,!1))):(i.push(t),e.push(Se(t,!1)))}function Se(e,t){if(e.g)for(var n in e.g){var r=e.g[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&Se(r[i],t);else r&&Se(r,t)}return e.h}function Ee(e,t){if(e=e.o){ee(t,t.g.end());for(var n=0;n<e.length;n++)ee(t,e[n])}}function Ce(e,t){if(4==t.h)return!1;var n=t.m;return function e(t){switch(t.h){case 0:if(0!=t.h)e(t);else{for(t=t.g;128&t.h[t.g];)t.g++;t.g++}break;case 1:1!=t.h?e(t):(t=t.g).g+=8;break;case 2:if(2!=t.h)e(t);else{var n=t.g.i();(t=t.g).g+=n}break;case 5:5!=t.h?e(t):(t=t.g).g+=4;break;case 3:for(n=t.l;;){if(!q(t)){t.j=!0;break}if(4==t.h){t.l!=n&&(t.j=!0);break}e(t)}break;default:t.j=!0}}(t),t.N||(t=z(t.g.h,n,t.g.g),(n=e.o)?n.push(t):e.o=[t]),!0}function ke(e){ce.call(this,e,-1,Ae)}function Te(e,t){for(;q(t);)switch(t.i){case 8:var n=t.g.i();ve(e,1,n);break;case 16:ve(e,2,n=t.g.i());break;case 29:case 26:J(t,e.getPackedDataList());break;case 32:ve(e,4,n=V(t.g));break;default:if(!Ce(e,t))return e}return e}ce.prototype.toJSON=function(){return se(Se(this,!1),ae,L)},ce.prototype.toString=function(){return Se(this,!1).toString()},p(ke,ce),ke.prototype.getRows=function(){return pe(this,1)},ke.prototype.getCols=function(){return pe(this,2)},ke.prototype.getPackedDataList=function(){return me(this)},ke.prototype.getLayout=function(){return ge(this,4,0)};var Ae=[3];function Me(e,t){var n=void 0;return new(n||(n=Promise))((function(r,i){function s(e){try{o(t.next(e))}catch(n){i(n)}}function a(e){try{o(t.throw(e))}catch(n){i(n)}}function o(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,a)}o((t=t.apply(e,void 0)).next())}))}function Ne(e){ce.call(this,e)}function Ie(e,t){for(;q(t);)switch(t.i){case 8:var n=t.g.i();ve(e,1,n);break;case 21:ve(e,2,n=X(t));break;case 26:ve(e,3,n=Z(t));break;case 34:ve(e,4,n=Z(t));break;default:if(!Ce(e,t))return e}return e}function De(e){ce.call(this,e,-1,Re)}p(Ne,ce),p(De,ce),De.prototype.addClassification=function(e,t){return we(this,e,Ne,t),this};var Re=[1];function Le(e){ce.call(this,e)}function Oe(e,t){for(;q(t);)switch(t.i){case 13:var n=X(t);ve(e,1,n);break;case 21:ve(e,2,n=X(t));break;case 29:ve(e,3,n=X(t));break;case 37:ve(e,4,n=X(t));break;case 45:ve(e,5,n=X(t));break;default:if(!Ce(e,t))return e}return e}function Fe(e){ce.call(this,e,-1,ze)}function Pe(e){e:{var t=new Fe;for(e=new j(e);q(e);)switch(e.i){case 10:we(t,K(e,new Le,Oe),Le,void 0);break;default:if(!Ce(t,e))break e}}return t}p(Le,ce),p(Fe,ce);var ze=[1];function $e(e){ce.call(this,e)}function Be(e){ce.call(this,e,-1,Ve)}function Ue(e,t){for(;q(t);)switch(t.i){case 8:var n=V(t.g);ve(e,1,n);break;case 16:ve(e,2,n=V(t.g));break;case 29:case 26:J(t,e.getVertexBufferList());break;case 32:case 34:n=t;var r=e.getIndexBufferList();2==n.h?Y(n,B.prototype.i,r):r.push(n.g.i());break;default:if(!Ce(e,t))return e}return e}p($e,ce),p(Be,ce),Be.prototype.getVertexType=function(){return ge(this,1,0)},Be.prototype.getPrimitiveType=function(){return ge(this,2,0)},Be.prototype.getVertexBufferList=function(){return me(this)},Be.prototype.getIndexBufferList=function(){return fe(this,4)};var Ve=[3,4];function We(e){ce.call(this,e)}function He(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ge(e){return _e(e,Ne).map((function(e){return{index:ge(e,1,0),Y:ye(e,2),label:null!=pe(e,3)?ge(e,3,""):void 0,displayName:null!=pe(e,4)?ge(e,4,""):void 0}}))}function je(e){return{x:ye(e,1),y:ye(e,2),z:ye(e,3),visibility:null!=pe(e,4)?ye(e,4):void 0}}function qe(e,t){this.h=e,this.g=t,this.l=0}function Ke(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=He(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=He(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),s=n.createProgram();if(n.attachShader(s,r),n.attachShader(s,i),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(s));r=e.m=s,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Xe(e){this.g=e}p(We,ce),We.prototype.getMesh=function(){return be(this,Be,1)},We.prototype.getPoseTransformMatrix=function(){return be(this,ke,2)};var Ze=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ye(e,t){return t+e}function Je(e,t){window[e]=t}function Qe(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||Ye,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=a(Object.keys(e.options))).next();!n.done;n=t.next()){var r=e.options[n=n.value].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function et(e,t){return Me(e,(function e(){var n,r,i=this;return w(e,(function(e){return t in i.F?e.return(i.F[t]):(n=i.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),i.F[t]=r,e.return(r))}))}))}function tt(e,t){for(var n=t.name||"$",r=[].concat(o(t.wants)),i=new e.h.StringList,s=a(t.wants),u=s.next();!u.done;u=s.next())i.push_back(u.value);s=e.h.PacketListener.implement({onResults:function(i){for(var s={},o=0;o<t.wants.length;++o)s[r[o]]=i.get(o);var u=e.listeners[n];u&&(e.C=function(e,t,n){return Me(e,(function e(){var r,i,s,o,u,l,c,h,d,p,f,m,g=this;return w(e,(function(e){switch(e.g){case 1:if(!n)return e.return(t);for(r={},i=0,s=a(Object.keys(n)),o=s.next();!o.done;o=s.next())"string"!=typeof(u=n[o.value])&&"texture"===u.type&&void 0!==t[u.stream]&&++i;1<i&&(g.G=!1),l=a(Object.keys(n)),o=l.next();case 2:if(o.done){e.g=4;break}if("string"==typeof(h=n[c=o.value]))return f=r,m=c,y(e,function(e,t,n){return Me(e,(function e(){var r,i=this;return w(e,(function(e){return"number"==typeof n||n instanceof Uint8Array||n instanceof i.h.Uint8BlobList?e.return(n):n instanceof i.h.Texture2dDataOut?((r=i.s[t])||(r=new qe(i.h,i.D),i.s[t]=r),e.return(Ke(r,n,i.G))):e.return(void 0)}))}))}(g,c,t[h]),14);if(d=t[h.stream],"detection_list"===h.type){if(d){for(var v=d.getRectList(),b=d.getLandmarksList(),_=d.getClassificationsList(),x=[],S=0;S<v.size();++S){var E=v.get(S);e:{var C=new $e;for(E=new j(E);q(E);)switch(E.i){case 13:var k=X(E);ve(C,1,k);break;case 21:ve(C,2,k=X(E));break;case 29:ve(C,3,k=X(E));break;case 37:ve(C,4,k=X(E));break;case 45:ve(C,5,k=X(E));break;case 48:ve(C,6,k=V(E.g));break;default:if(!Ce(C,E))break e}}C={Z:ye(C,1),$:ye(C,2),height:ye(C,3),width:ye(C,4),rotation:ye(C,5,0),X:ge(C,6,0)},E=_e(Pe(b.get(S)),Le).map(je);var T=_.get(S);e:for(k=new De,T=new j(T);q(T);)switch(T.i){case 10:k.addClassification(K(T,new Ne,Ie));break;default:if(!Ce(k,T))break e}C={T:C,O:E,M:Ge(k)},x.push(C)}v=x}else v=[];r[c]=v,e.g=7;break}if("proto_list"===h.type){if(d){for(v=Array(d.size()),b=0;b<d.size();b++)v[b]=d.get(b);d.delete()}else v=[];r[c]=v,e.g=7;break}if(void 0===d){e.g=3;break}if("float_list"===h.type){r[c]=d,e.g=7;break}if("proto"===h.type){r[c]=d,e.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(p=g.s[c])||(p=new qe(g.h,g.D),g.s[c]=p),y(e,Ke(p,d,g.G),13);case 13:r[c]=e.h;case 7:h.transform&&r[c]&&(r[c]=h.transform(r[c])),e.g=3;break;case 14:f[m]=e.h;case 3:o=l.next(),e.g=2;break;case 4:return e.return(r)}}))}))}(e,s,t.outs).then((function(n){n=u(n);for(var i=0;i<t.wants.length;++i){var a=s[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(i,s),i.delete()}function nt(e){var t=(e=function(e){e:{var t=new We;for(e=new j(e);q(e);)switch(e.i){case 10:var n=K(e,new Be,Ue);xe(t,1,n);break;case 18:xe(t,2,n=K(e,new ke,Te));break;default:if(!Ce(t,e))break e}}return t}(e)).getMesh();if(!t)return e;var n=new Float32Array(t.getVertexBufferList());t.getVertexBufferList=function(){return n};var r=new Uint32Array(t.getIndexBufferList());return t.getIndexBufferList=function(){return r},e}(e=Qe.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],i=[],s={},o=a(Object.keys(e)),u=o.next();!u.done;s={K:s.K,L:s.L},u=o.next()){var l=u.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(u=t[l])&&(u.onChange&&(s.K=u.onChange,s.L=e[l],r.push(function(e){return function(){return Me(n,(function t(){var n=this;return w(t,(function(t){if(1==t.g)return y(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}))}}(s))),u.graphOptionXref&&(l={valueNumber:1===u.type?e[l]:0,valueBoolean:0===u.type&&e[l],valueString:2===u.type?e[l]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),l),i.push(u))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.u=(void 0===this.u?[]:this.u).concat(r))}},e.initialize=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){return 1==e.g?y(e,function(e){return Me(e,(function e(){var t,n,r,i,s,a,u,l,c,h,d,p=this;return w(e,(function(e){switch(e.g){case 1:return t=p,p.R?(n=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(p,p.j),y(e,function(){return Me(this,(function e(){return w(e,(function(e){switch(e.g){case 1:return e.m=2,y(e,WebAssembly.instantiate(Ze),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}))}))}(),2)):e.return();case 2:if(r=e.h,"object"==typeof window)return Je("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),Je("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),a=n.filter((function(e){return void 0!==e.data})),u=n.filter((function(e){return void 0===e.data})),l=Promise.all(a.map((function(e){var n=et(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),c=Promise.all(u.map((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){return Me(t,(function e(){var t,n,r=this;return w(e,(function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,y(e,t(n),2);r.h=e.h,e.g=0}))}))})),h=Me(t,(function e(){var t=this;return w(e,(function(e){return t.g.graph&&t.g.graph.url?e=y(e,et(t,t.g.graph.url),0):(e.g=0,e=void 0),e}))})),y(e,Promise.all([c,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return i=n.filter((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,o(i)),y(e,createMediapipeSolutionsWasm(Module),6);case 6:p.h=e.h,p.l=new OffscreenCanvas(1,1),p.h.canvas=p.l,s=p.h.GL.createContext(p.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),p.h.GL.makeContextCurrent(s),e.g=4;break;case 7:if(p.l=document.createElement("canvas"),!(d=p.l.getContext("webgl2",{}))&&!(d=p.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();p.D=d,p.h.canvas=p.l,p.h.createContext(p.l,!0,!0,{});case 4:p.i=new p.h.SolutionWasm,p.R=!1,e.g=0}}))}))}(t),2):3!=e.g?y(e,Me(t,(function e(){var t,n,r,i,s,o,u=this;return w(e,(function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,y(e,et(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&u.i.loadGraph(e.h),t=a(Object.keys(u.B)),n=t.next();!n.done;n=t.next())u.i.overrideFile(r=n.value,u.B[r]);if(u.B={},u.g.listeners)for(i=a(u.g.listeners),s=i.next();!s.done;s=i.next())tt(u,s.value);o=u.j,u.j={},u.setOptions(o),e.g=0}))})),3):y(e,function(e){return Me(e,(function e(){var t,n,r,i,s,o=this;return w(e,(function(e){switch(e.g){case 1:if(!o.o)return e.return();if(!o.u){e.g=2;break}t=a(o.u),n=t.next();case 3:if(n.done){e.g=5;break}return y(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:o.u=void 0;case 2:if(o.A){for(r=new o.h.GraphOptionChangeRequestList,i=a(o.A),s=i.next();!s.done;s=i.next())r.push_back(s.value);o.i.changeOptions(r),r.delete(),o.A=void 0}o.o=!1,e.g=0}}))}))}(t),0)}))}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Me(this,(function n(){var r,i,s,o,u,l,c,h,d,p=this;return w(n,(function(n){switch(n.g){case 1:return p.g.inputs?(r=1e3*(null==t?performance.now():t),y(n,p.C,2)):n.return();case 2:return y(n,p.initialize(),3);case 3:for(i=new p.h.PacketDataList,s=a(Object.keys(e)),o=s.next();!o.done;o=s.next())if(l=p.g.inputs[u=o.value]){e:{var f=p,m=e[u];switch(l.type){case"video":var g=f.m[l.stream];if(g||(g=new qe(f.h,f.D),f.m[l.stream]=g),0===(f=g).l&&(f.l=f.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var v=m.videoWidth;g=m.videoHeight}else"undefined"!=typeof HTMLImageElement&&m instanceof HTMLImageElement?(v=m.naturalWidth,g=m.naturalHeight):(v=m.width,g=m.height);g={glName:f.l,width:v,height:g},(v=f.g).canvas.width=g.width,v.canvas.height=g.height,v.activeTexture(v.TEXTURE0),f.h.bindTexture2d(f.l),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,m),f.h.bindTexture2d(0),f=g;break e;case"detections":for((g=f.m[l.stream])||(g=new Xe(f.h),f.m[l.stream]=g),(f=g).data||(f.data=new f.g.DetectionListData),f.data.reset(m.length),g=0;g<m.length;++g){var b=f.data,_=b.setBoundingBox,x=g,w=(v=m[g]).T,S=new $e;ve(S,1,w.Z),ve(S,2,w.$),ve(S,3,w.height),ve(S,4,w.width),ve(S,5,w.rotation),ve(S,6,w.X);var E=w=new Q;ne(E,1,pe(S,1)),ne(E,2,pe(S,2)),ne(E,3,pe(S,3)),ne(E,4,pe(S,4)),ne(E,5,pe(S,5));var C=pe(S,6);if(null!=C&&null!=C){G(E.g,48);var k=E.g,T=C;C=0>T;var A=(T=Math.abs(T))>>>0;for(T=Math.floor((T-A)/4294967296),T>>>=0,C&&(T=~T>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++T&&(T=0))),C=$=A,A=T;0<A||127<C;)k.push(127&C|128),C=(C>>>7|A<<25)>>>0,A>>>=7;k.push(C)}if(Ee(S,E),w=te(w),_.call(b,x,w),v.O)for(b=0;b<v.O.length;++b)E=!!(S=v.O[b]).visibility,x=(_=f.data).addNormalizedLandmark,w=g,S=Object.assign(Object.assign({},S),{visibility:E?S.visibility:0}),ve(E=new Le,1,S.x),ve(E,2,S.y),ve(E,3,S.z),S.visibility&&ve(E,4,S.visibility),ne(k=S=new Q,1,pe(E,1)),ne(k,2,pe(E,2)),ne(k,3,pe(E,3)),ne(k,4,pe(E,4)),ne(k,5,pe(E,5)),Ee(E,k),S=te(S),x.call(_,w,S);if(v.M)for(b=0;b<v.M.length;++b){if(x=(_=f.data).addClassification,w=g,S=v.M[b],ve(E=new Ne,2,S.Y),S.index&&ve(E,1,S.index),S.label&&ve(E,3,S.label),S.displayName&&ve(E,4,S.displayName),k=S=new Q,null!=(A=pe(E,1))&&null!=A)if(G(k.g,8),C=k.g,0<=A)G(C,A);else{for(T=0;9>T;T++)C.push(127&A|128),A>>=7;C.push(1)}ne(k,2,pe(E,2)),null!=(C=pe(E,3))&&(C=I(C),G(k.g,26),G(k.g,C.length),ee(k,k.g.end()),ee(k,C)),null!=(C=pe(E,4))&&(C=I(C),G(k.g,34),G(k.g,C.length),ee(k,k.g.end()),ee(k,C)),Ee(E,k),S=te(S),x.call(_,w,S)}}f=f.data;break e;default:f={}}}switch(c=f,h=l.stream,l.type){case"video":i.pushTexture2d(Object.assign(Object.assign({},c),{stream:h,timestamp:r}));break;case"detections":(d=c).stream=h,d.timestamp=r,i.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return p.i.send(i),y(n,p.C,4);case 4:i.delete(),n.g=0}}))}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},C("Solution",Qe),C("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var rt={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(e){return e.map(nt)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(e){return e.map((function(e){return _e(Pe(e),Le).map(je)}))}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},it=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],st=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],at=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],ot=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ut=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],lt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],ct=[].concat(o(it),o(st),o(at),o(ot),o(ut),o(lt));function ht(e){e=e||{},e=Object.assign(Object.assign({},rt),e),this.g=new Qe(e)}(e=ht.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){return y(e,t.g.initialize(),0)}))}))},e.reset=function(){this.g.reset()},e.send=function(e){return Me(this,(function t(){var n=this;return w(t,(function(t){return y(t,n.g.send(e),0)}))}))},e.setOptions=function(e){this.g.setOptions(e)},C("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),C("FaceMesh",ht),C("FACEMESH_LIPS",it),C("FACEMESH_LEFT_EYE",st),C("FACEMESH_LEFT_EYEBROW",at),C("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),C("FACEMESH_RIGHT_EYE",ot),C("FACEMESH_RIGHT_EYEBROW",ut),C("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),C("FACEMESH_FACE_OVAL",lt),C("FACEMESH_CONTOURS",ct),C("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),C("matrixDataToMatrix",(function(e){for(var t=e.getCols(),n=e.getRows(),r=e.getPackedDataList(),i=[],s=0;s<n;s++)i.push(Array(t));for(s=0;s<n;s++)for(var a=0;a<t;a++){var o=1===e.getLayout()?s*t+a:a*n+s;i[s][a]=r[o]}return i})),C("VERSION","0.4.1633559619")}).call(this)},xAGQ:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("JEQr");e.exports=function(e,t,n){var s=this||i;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},"xTJ+":function(e,t,n){"use strict";var r=n("HSsa"),i=Object.prototype.toString;function s(e){return Array.isArray(e)}function a(e){return void 0===e}function o(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:o,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&o(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return u(e)&&c(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function n(n,r){t[r]=l(t[r])&&l(n)?e(t[r],n):l(n)?e({},n):s(n)?n.slice():n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},yK9s:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},yuCN:function(e,t,n){(function(e){var r;!function(e,i,s){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],r[i]=n^=(e^=e<<13)^e<<9,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout(()=>{throw e},0)}const o={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete(){}},u=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function l(e){return null!==e&&"object"==typeof e}const c=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(i))try{i.call(this)}catch(a){t=a instanceof c?d(a.errors):[a]}if(u(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(l(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof c?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new c(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof c?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o;break;case 1:if(!e){this.destination=o;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new f(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,i){let s;super(),this._parentSubscriber=e;let a=this;r(t)?s=t:t&&(s=t.next,n=t.error,i=t.complete,t!==o&&(a=Object.create(t),r(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}function v(...e){return b(e)}function b(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||n?new f(e,t,n):new f(o)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=x(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:b(e)(this)}toPromise(e){return new(e=x(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function x(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const w=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class S extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class E extends f{constructor(e){super(e),this.destination=e}}let C=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new E(this)}lift(e){const t=new k(this,this);return t.operator=e,t}next(e){if(this.closed)throw new w;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new w;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new w;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new w;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new S(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new k(e,t),e})();class k extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function T(e){return e&&"function"==typeof e.schedule}class A extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const M=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=N(),D=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function R(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[g])return r=e,e=>{const t=r[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(D(e))return M(e);if(R(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a),e);if(e&&"function"==typeof e[I])return t=e,e=>{const n=t[I]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var t,n,r};function O(e,t,n,r,i=new A(e,n,r)){if(!i.closed)return t instanceof _?t.subscribe(i):L(t)(i)}class F extends f{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function P(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new z(e,t))}}class z{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new $(e,this.project,this.thisArg))}}class $ extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function B(e,t){return new _(n=>{const r=new h;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function U(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[g]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(R(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(D(e))return B(e,t);if(function(e){return e&&"function"==typeof e[I]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[I](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof _?e:new _(L(e))}function V(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(V((n,r)=>U(e(n,r)).pipe(P((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new W(e,n)))}class W{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new H(e,this.project,this.concurrent))}}class H extends F{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new A(this,t,n),i=this.destination;i.add(r);const s=O(this,e,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function G(e=Number.POSITIVE_INFINITY){return V(y,e)}function j(e,t){return t?B(e,t):new _(M(e))}function q(){return function(e){return e.lift(new K(e))}}class K{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new X(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class X extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Z extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new J(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return q()(this)}}const Y=(()=>{const e=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class J extends E{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Q(){return new C}function ee(e){return{toString:e}.toString()}function te(e,t,n){return ee(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const ne=te("Inject",e=>({token:e})),re=te("Optional"),ie=te("Self"),se=te("SkipSelf");var ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function oe(e){for(let t in e)if(e[t]===oe)return t;throw Error("Could not find renamed property on target object.")}function ue(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function le(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ce(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function he(e){return de(e,e[fe])||de(e,e[ye])}function de(e,t){return t&&t.token===e?t:null}function pe(e){return e&&(e.hasOwnProperty(me)||e.hasOwnProperty(ve))?e[me]:null}const fe=oe({"\u0275prov":oe}),me=oe({"\u0275inj":oe}),ge=oe({"\u0275provFallback":oe}),ye=oe({ngInjectableDef:oe}),ve=oe({ngInjectorDef:oe});function be(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(be).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function _e(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const xe=oe({__forward_ref__:oe});function we(e){return e.__forward_ref__=we,e.toString=function(){return be(this())},e}function Se(e){return Ee(e)?e():e}function Ee(e){return"function"==typeof e&&e.hasOwnProperty(xe)&&e.__forward_ref__===we}const Ce="undefined"!=typeof globalThis&&globalThis,ke="undefined"!=typeof window&&window,Te="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ae="undefined"!=typeof global&&global,Me=Ce||Ae||ke||Te,Ne=oe({"\u0275cmp":oe}),Ie=oe({"\u0275dir":oe}),De=oe({"\u0275pipe":oe}),Re=oe({"\u0275mod":oe}),Le=oe({"\u0275loc":oe}),Oe=oe({"\u0275fac":oe}),Fe=oe({__NG_ELEMENT_ID__:oe});class Pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ze=new Pe("INJECTOR",-1),$e={},Be=/\n/gm,Ue=oe({provide:String,useValue:oe});let Ve,We=void 0;function He(e){const t=We;return We=e,t}function Ge(e){const t=Ve;return Ve=e,t}function je(e,t=ae.Default){if(void 0===We)throw new Error("inject() must be called from an injection context");return null===We?Ke(e,void 0,t):We.get(e,t&ae.Optional?null:void 0,t)}function qe(e,t=ae.Default){return(Ve||je)(Se(e),t)}function Ke(e,t,n){const r=he(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${be(e)}]`)}function Xe(e){const t=[];for(let n=0;n<e.length;n++){const r=Se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=ae.Default;for(let t=0;t<r.length;t++){const i=r[t];i instanceof re||"Optional"===i.ngMetadataName||i===re?n|=ae.Optional:i instanceof se||"SkipSelf"===i.ngMetadataName||i===se?n|=ae.SkipSelf:i instanceof ie||"Self"===i.ngMetadataName||i===ie?n|=ae.Self:e=i instanceof ne||i===ne?i.token:i}t.push(qe(e,n))}else t.push(qe(r))}return t}class Ze{get(e,t=$e){if(t===$e){const t=new Error(`NullInjectorError: No provider for ${be(e)}!`);throw t.name="NullInjectorError",t}return t}}class Ye{}class Je{}function Qe(e,t){e.forEach(e=>Array.isArray(e)?Qe(e,t):t(e))}function et(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function tt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nt(e,t,n){let r=it(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function rt(e,t){const n=it(e,t);if(n>=0)return e[1|n]}function it(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const st=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),at=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ot={},ut=[];let lt=0;function ct(e){return ee(()=>{const t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===st.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ut,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||at.Emulated,id:"c",styles:e.styles||ut,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,a=e.features,o=e.pipes;return i.id+=lt++,i.inputs=mt(e.inputs,r),i.outputs=mt(e.outputs),a&&a.forEach(e=>e(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(ht):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(dt):null,i})}function ht(e){return vt(e)||function(e){return e[Ie]||null}(e)}function dt(e){return function(e){return e[De]||null}(e)}const pt={};function ft(e){const t={type:e.type,bootstrap:e.bootstrap||ut,declarations:e.declarations||ut,imports:e.imports||ut,exports:e.exports||ut,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ee(()=>{pt[e.id]=e.type}),t}function mt(e,t){if(null==e)return ot;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const gt=ct;function yt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function vt(e){return e[Ne]||null}function bt(e,t){return e.hasOwnProperty(Oe)?e[Oe]:null}function _t(e,t){const n=e[Re]||null;if(!n&&!0===t)throw new Error(`Type ${be(e)} does not have '\u0275mod' property.`);return n}function xt(e){return Array.isArray(e)&&"object"==typeof e[1]}function wt(e){return Array.isArray(e)&&!0===e[1]}function St(e){return 0!=(8&e.flags)}function Et(e){return 2==(2&e.flags)}function Ct(e){return 1==(1&e.flags)}function kt(e){return null!==e.template}function Tt(e){return 0!=(512&e[2])}let At=void 0;function Mt(e){return!!e.listen}const Nt={createRenderer:(e,t)=>void 0!==At?At:"undefined"!=typeof document?document:void 0};function It(e){for(;Array.isArray(e);)e=e[0];return e}function Dt(e,t){return It(t[e.index])}function Rt(e,t){return e.data[t+19]}function Lt(e,t){const n=t[e];return xt(n)?n:n[0]}function Ot(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ft(e){return 4==(4&e[2])}function Pt(e){return 128==(128&e[2])}function zt(e,t){return null===e||null==t?null:e[t]}function $t(e){e[18]=0}const Bt={lFrame:nn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ut(){return Bt.bindingsEnabled}function Vt(){return Bt.lFrame.lView}function Wt(){return Bt.lFrame.tView}function Ht(){return Bt.lFrame.previousOrParentTNode}function Gt(e,t){Bt.lFrame.previousOrParentTNode=e,Bt.lFrame.isParent=t}function jt(){return Bt.lFrame.isParent}function qt(){return Bt.checkNoChangesMode}function Kt(e){Bt.checkNoChangesMode=e}function Xt(){return Bt.lFrame.bindingIndex++}function Zt(e,t){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function Yt(){return Bt.lFrame.currentQueryIndex}function Jt(e){Bt.lFrame.currentQueryIndex=e}function Qt(e,t){const n=tn();Bt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function en(e,t){const n=tn(),r=e[1];Bt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function tn(){const e=Bt.lFrame,t=null===e?null:e.child;return null===t?nn(e):t}function nn(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function rn(){const e=Bt.lFrame;return Bt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const sn=rn;function an(){const e=rn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function on(){return Bt.lFrame.selectedIndex}function un(e){Bt.lFrame.selectedIndex=e}function ln(){const e=Bt.lFrame;return Rt(e.tView,e.selectedIndex)}function cn(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}}function hn(e,t,n){fn(e,t,3,n)}function dn(e,t,n,r){(3&e[2])===n&&fn(e,t,n,r)}function pn(e,t){let n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function fn(e,t,n,r){const i=null!=r?r:-1;let s=0;for(let a=void 0!==r?65535&e[18]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(s=t[a],null!=r&&s>=r)break}else t[a]<0&&(e[18]+=65536),(s<i||-1==i)&&(mn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function mn(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];i?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,s.call(a)):s.call(a)}class gn{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function yn(e,t,n){const r=Mt(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const a=n[i++],o=n[i++],u=n[i++];r?e.setAttribute(t,o,u,a):t.setAttributeNS(a,o,u)}else{const a=s,o=n[++i];bn(a)?r&&e.setProperty(t,a,o):r?e.setAttribute(t,a,o):t.setAttribute(a,o),i++}}return i}function vn(e){return 3===e||4===e||6===e}function bn(e){return 64===e.charCodeAt(0)}function _n(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||xn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function xn(e,t,n,r,i){let s=0,a=e.length;if(-1===t)a=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){a=-1;break}if(n>t){a=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function wn(e){return-1!==e}function Sn(e){return 32767&e}function En(e){return e>>16}function Cn(e,t){let n=En(e),r=t;for(;n>0;)r=r[15],n--;return r}function kn(e){return"string"==typeof e?e:null==e?"":""+e}function Tn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():kn(e)}const An=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Me))();function Mn(e){return e instanceof Function?e():e}let Nn=!0;function In(e){const t=Nn;return Nn=e,t}let Dn=0;function Rn(e,t){const n=On(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ln(r.data,e),Ln(t,null),Ln(r.blueprint,null));const i=Fn(e,t),s=e.injectorIndex;if(wn(i)){const e=Sn(i),n=Cn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Ln(e,t){e.push(0,0,0,0,0,0,0,0,t)}function On(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Fn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=t[6],r=1;for(;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Pn(e,t,n){!function(e,t,n){let r="string"!=typeof n?n[Fe]:n.charCodeAt(0)||0;null==r&&(r=n[Fe]=Dn++);const i=255&r,s=1<<i,a=64&i,o=32&i,u=t.data;128&i?a?o?u[e+7]|=s:u[e+6]|=s:o?u[e+5]|=s:u[e+4]|=s:a?o?u[e+3]|=s:u[e+2]|=s:o?u[e+1]|=s:u[e]|=s}(e,t,n)}function zn(e,t,n,r=ae.Default,i){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[Fe];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){Qt(t,e);try{const e=i();if(null!=e||r&ae.Optional)return e;throw new Error(`No provider for ${Tn(n)}!`)}finally{sn()}}else if("number"==typeof i){if(-1===i)return new Gn(e,t);let s=null,a=On(e,t),o=-1,u=r&ae.Host?t[16][6]:null;for((-1===a||r&ae.SkipSelf)&&(o=-1===a?Fn(e,t):t[a+8],Hn(r,!1)?(s=t[1],a=Sn(o),t=Cn(o,t)):a=-1);-1!==a;){o=t[a+8];const e=t[1];if(Wn(i,a,e.data)){const e=Bn(a,t,n,s,r,u);if(e!==$n)return e}Hn(r,t[1].data[a+8]===u)&&Wn(i,a,t)?(s=e,a=Sn(o),t=Cn(o,t)):a=-1}}}if(r&ae.Optional&&void 0===i&&(i=null),0==(r&(ae.Self|ae.Host))){const e=t[9],s=Ge(void 0);try{return e?e.get(n,i,r&ae.Optional):Ke(n,i,r&ae.Optional)}finally{Ge(s)}}if(r&ae.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Tn(n)}]`)}const $n={};function Bn(e,t,n,r,i,s){const a=t[1],o=a.data[e+8],u=Un(o,a,n,null==r?Et(o)&&Nn:r!=a&&3===o.type,i&ae.Host&&s===o);return null!==u?Vn(t,a,u,o):$n}function Un(e,t,n,r,i){const s=e.providerIndexes,a=t.data,o=65535&s,u=e.directiveStart,l=s>>16,c=i?o+l:e.directiveEnd;for(let h=r?o:o+l;h<c;h++){const e=a[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=a[u];if(e&&kt(e)&&e.type===n)return u}return null}function Vn(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof gn){const a=i;if(a.resolving)throw new Error(`Circular dep for ${Tn(s[n])}`);const o=In(a.canSeeViewProviders);let u;a.resolving=!0,a.injectImpl&&(u=Ge(a.injectImpl)),Qt(e,r);try{i=e[n]=a.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{onChanges:r,onInit:i,doCheck:s}=t;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{a.injectImpl&&Ge(u),In(o),a.resolving=!1,sn()}}return i}function Wn(e,t,n){const r=64&e,i=32&e;let s;return s=128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t],!!(s&1<<e)}function Hn(e,t){return!(e&ae.Self||e&ae.Host&&t)}class Gn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return zn(this._tNode,this._lView,e,void 0,t)}}function jn(e){return ee(()=>{const t=Object.getPrototypeOf(e.prototype).constructor,n=t[Oe]||function e(t){const n=t;if(Ee(t))return()=>{const t=e(Se(n));return t?t():null};let r=bt(n);if(null===r){const e=pe(n);r=e&&e.factory}return r||null}(t);return null!==n?n:e=>new e})}function qn(e){return e.ngDebugContext}function Kn(e){return e.ngOriginalError}function Xn(e,...t){e.error(...t)}class Zn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Xn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?qn(e)?qn(e):this._findContext(Kn(e)):null}_findOriginalError(e){let t=Kn(e);for(;t&&Kn(t);)t=Kn(t);return t}}class Yn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}function Jn(e){return e instanceof Yn?e.changingThisBreaksApplicationSecurity:e}let Qn=!0,er=!1;function tr(){return er=!0,Qn}const nr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,rr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ir=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function sr(e){const t=function(){const e=Vt();return e&&e[12]}();return t?t.sanitize(ir.URL,e)||"":function(e,t){const n=function(e){return e instanceof Yn&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===t}(e,"URL")?Jn(e):(n=kn(e),(n=String(n)).match(nr)||n.match(rr)?n:(tr()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function ar(e,t){e.__ngContext__=t}function or(e){throw new Error(`Multiple components match node with tagname ${e.tagName}`)}function ur(){throw new Error("Cannot mix multi providers and regular providers")}function lr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}function cr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==lr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function hr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function dr(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(vn(e[t]))return t;return e.length}(i);let a=!1;for(let o=0;o<t.length;o++){const u=t[o];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!hr(e,u,n)||""===u&&1===t.length){if(pr(r))return!1;a=!0}}else{const l=8&r?u:t[++o];if(8&r&&null!==e.attrs){if(!cr(e.attrs,l,n)){if(pr(r))return!1;a=!0}continue}const c=fr(8&r?"class":u,i,0==e.type&&"ng-template"!==e.tagName,n);if(-1===c){if(pr(r))return!1;a=!0;continue}if(""!==l){let e;e=c>s?"":i[c+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==lr(t,l,0)||2&r&&l!==e){if(pr(r))return!1;a=!0}}}}else{if(!a&&!pr(r)&&!pr(u))return!1;if(a&&pr(u))continue;a=!1,r=u|1&r}}return pr(r)||a}function pr(e){return 0==(1&e)}function fr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function mr(e,t,n=!1){for(let r=0;r<t.length;r++)if(dr(e,t[r],n))return!0;return!1}function gr(e,t){return e?":not("+t.trim()+")":t}function yr(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const t=e[++n];i+="["+a+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||pr(a)||(t+=gr(s,i),i=""),r=a,s=s||!pr(r);n++}return""!==i&&(t+=gr(s,i)),t}const vr={};function br(e){const t=e[3];return wt(t)?t[3]:t}function _r(e){xr(Wt(),Vt(),on()+e,qt())}function xr(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&hn(t,r,n)}else{const r=e.preOrderHooks;null!==r&&dn(t,r,0,n)}un(n)}function wr(e,t){return e<<17|t<<2}function Sr(e){return e>>17&32767}function Er(e){return 2|e}function Cr(e){return(131068&e)>>2}function kr(e,t){return-131069&e|t<<2}function Tr(e){return 1|e}function Ar(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];Jt(i),n.contentQueries(2,t[s],s)}}}function Mr(e,t,n){return Mt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Nr(e,t,n,r,i,s,a,o,u,l){const c=t.blueprint.slice();return c[0]=i,c[2]=140|r,$t(c),c[3]=c[15]=e,c[8]=n,c[10]=a||e&&e[10],c[11]=o||e&&e[11],c[12]=u||e&&e[12]||null,c[9]=l||e&&e[9]||null,c[6]=s,c[16]=2==t.type?e[16]:c,c}function Ir(e,t,n,r,i,s){const a=n+19,o=e.data[a]||function(e,t,n,r,i,s){const a=Ht(),o=jt(),u=o?a:a&&a.parent,l=e.data[n]=zr(0,u&&u!==t?u:null,r,n,i,s);return null===e.firstChild&&(e.firstChild=l),a&&(!o||null!=a.child||null===l.parent&&2!==a.type?o||(a.next=l):a.child=l),l}(e,t,a,r,i,s);return Gt(o,!0),o}function Dr(e,t,n){en(t,t[6]);try{const r=e.viewQuery;null!==r&&si(1,r,n);const i=e.template;null!==i&&Or(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ar(e,t),e.staticViewQueries&&si(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)ei(e,t[n])}(t,s)}finally{t[2]&=-5,an()}}function Rr(e,t,n,r){const i=t[2];if(256==(256&i))return;en(t,t[6]);const s=qt();try{$t(t),Bt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Or(e,t,n,2,r);const a=3==(3&i);if(!s)if(a){const n=e.preOrderCheckHooks;null!==n&&hn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&dn(t,n,0,null),pn(t,0)}if(function(e){let t=e[13];for(;null!==t;){let n;if(wt(t)&&(n=t[2])>>1==-1){for(let e=9;e<t.length;e++){const n=t[e],r=n[1];Pt(n)&&Rr(r,n,r.template,n[8])}0!=(1&n)&&Jr(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&Ar(e,t),!s)if(a){const n=e.contentCheckHooks;null!==n&&hn(t,n)}else{const n=e.contentHooks;null!==n&&dn(t,n,1),pn(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let r=e.expandoStartIndex,i=-1,s=-1;for(let e=0;e<n.length;e++){const a=n[e];"number"==typeof a?a<=0?(s=0-a,un(s),r+=9+n[++e],i=r):r+=a:(null!==a&&(Zt(r,i),a(2,t[i])),i++)}}}finally{un(-1)}}(e,t);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)Qr(e,t[n])}(t,o);const u=e.viewQuery;if(null!==u&&si(2,u,r),!s)if(a){const n=e.viewCheckHooks;null!==n&&hn(t,n)}else{const n=e.viewHooks;null!==n&&dn(t,n,2),pn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73)}finally{an()}}function Lr(e,t,n,r){const i=t[10],s=!qt(),a=Ft(t);try{s&&!a&&i.begin&&i.begin(),a&&Dr(e,t,r),Rr(e,t,n,r)}finally{s&&!a&&i.end&&i.end()}}function Or(e,t,n,r,i){const s=on();try{un(-1),2&r&&t.length>19&&xr(e,t,0,qt()),n(r,i)}finally{un(s)}}function Fr(e){return e.tView||(e.tView=Pr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function Pr(e,t,n,r,i,s,a,o,u,l){const c=19+r,h=c+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:vr);return n}(c,h);return d[1]={type:e,id:t,blueprint:d,template:n,queries:null,viewQuery:o,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:l}}function zr(e,t,n,r,i,s){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $r(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Br(e,t,n,r,i,s,a,o){const u=Dt(t,n);let l,c=t.inputs;var h;!o&&null!=c&&(l=c[r])?(ci(e,n,l,r,i),Et(t)&&function(e,t){const n=Lt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=a?a(i,t.tagName||"",r):i,Mt(s)?s.setProperty(u,r,i):bn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ur(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Vr(e,t,n){for(let r=0;r<n;r++)t.push(vr),e.blueprint.push(vr),e.data.push(null)}function Wr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Hr(e,t,n){const r=19-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function Gr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function jr(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;kt(t)&&(n[""]=e)}}function qr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Kr(e,t,n){e.data.push(n);const r=n.factory||(n.factory=bt(n.type)),i=new gn(r,kt(n),null);e.blueprint.push(i),t.push(i)}function Xr(e,t,n){const r=Dt(t,e),i=Fr(n),s=e[10],a=ti(e,Nr(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n)));e[t.index]=a}function Zr(e,t,n,r,i,s){const a=s[t];if(null!==a){const e=r.setInput;for(let t=0;t<a.length;){const i=a[t++],s=a[t++],o=a[t++];null!==e?r.setInput(n,o,i,s):n[s]=o}}}function Yr(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Jr(e,t){const n=e[5];for(let r=0;r<n.length;r++){const e=n[r],i=e[3][3][16];if(i!==t&&0==(16&i[2])){const t=e[1];Rr(t,e,t.template,e[8])}}}function Qr(e,t){const n=Lt(t,e);if(Pt(n)&&80&n[2]){const e=n[1];Rr(e,n,e.template,n[8])}}function ei(e,t){const n=Lt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Dr(r,n,n[8])}function ti(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ni(e){for(;e;){e[2]|=64;const t=br(e);if(Tt(e)&&!t)return e;e=t}return null}function ri(e,t,n){const r=t[10];r.begin&&r.begin();try{Rr(e,t,e.template,n)}catch(i){throw li(t,i),i}finally{r.end&&r.end()}}function ii(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Ot(n),i=r[1];Lr(i,r,i.template,n)}}(e[8])}function si(e,t,n){Jt(0),t(e,n)}const ai=(()=>Promise.resolve(null))();function oi(e){return e[7]||(e[7]=[])}function ui(e){return e.cleanup||(e.cleanup=[])}function li(e,t){const n=e[9],r=n?n.get(Zn,null):null;r&&r.handleError(t)}function ci(e,t,n,r,i){for(let s=0;s<n.length;){const a=n[s++],o=n[s++],u=t[a],l=e.data[a];null!==l.setInput?l.setInput(u,i,r,o):u[o]=i}}function hi(e,t){const n=t[3];return-1===e.index?wt(n)?n:null:n}function di(e,t){const n=hi(e,t);return n?Si(t[11],n[7]):null}function pi(e,t,n,r,i){if(null!=r){let s,a=!1;wt(r)?s=r:xt(r)&&(a=!0,r=r[0]);const o=It(r);0===e&&null!==n?null==i?xi(t,n,o):_i(t,n,o,i||null):1===e&&null!==n?_i(t,n,o,i||null):2===e?function(e,t,n){const r=Si(e,t);r&&function(e,t,n,r){Mt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,o,a):3===e&&t.destroyNode(o),null!=s&&function(e,t,n,r,i){const s=n[7];s!==It(n)&&pi(t,e,r,s,i);for(let a=9;a<n.length;a++){const i=n[a];Ti(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function fi(e,t,n,r){const i=di(e.node,t);i&&Ti(e,t,t[11],n?1:2,i,r)}function mi(e,t){const n=e[5],r=n.indexOf(t);n.splice(r,1)}function gi(e,t){if(e.length<=9)return;const n=9+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&mi(i,r),t>0&&(e[n-1][4]=r[4]);const s=tt(e,9+t);fi(r[1],r,!1,null);const a=s[5];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function yi(e,t){if(!(256&t[2])){const n=t[11];Mt(n)&&n.destroyNode&&Ti(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return bi(e[1],e);for(;t;){let n=null;if(xt(t))n=t[13];else{const e=t[9];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)xt(t)&&bi(t[1],t),t=vi(t,e);null===t&&(t=e),xt(t)&&bi(t[1],t),n=t&&t[4]}t=n}}(t)}}function vi(e,t){let n;return xt(e)&&(n=e[6])&&2===n.type?hi(n,e):e[3]===t?null:e[3]}function bi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];e instanceof gn||n[r+1].call(e)}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(t):It(t[i]),a=e[n[r+2]],o=n[r+3];"boolean"==typeof o?s.removeEventListener(n[r],a,o):o>=0?e[o]():e[-o].unsubscribe(),r+=2}else n[r].call(e[n[r+1]]);t[7]=null}}(e,t);const n=t[6];n&&3===n.type&&Mt(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&wt(t[3])){r!==t[3]&&mi(r,t);const n=t[5];null!==n&&n.detachView(e)}}}function _i(e,t,n,r){Mt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function xi(e,t,n){Mt(e)?e.appendChild(t,n):t.appendChild(n)}function wi(e,t,n,r){null!==r?_i(e,t,n,r):xi(e,t,n)}function Si(e,t){return Mt(e)?e.parentNode(t):t.parentNode}function Ei(e,t,n,r){const i=function(e,t,n){let r=t.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){const e=n[6];return 2===e.type?di(e,n):n[0]}if(t&&5===t.type&&4&t.flags)return Dt(t,n).parentNode;if(2&r.flags){const t=e.data,n=t[t[r.index].directiveStart].encapsulation;if(n!==at.ShadowDom&&n!==at.Native)return null}return Dt(r,n)}(e,r,t);if(null!=i){const e=t[11],s=function(e,t){if(2===e.type){const n=hi(e,t);return null===n?null:Ci(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?Dt(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)wi(e,i,n[t],s);else wi(e,i,n,s)}}function Ci(e,t){const n=9+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return function e(t,n){if(null!==n){const r=n.type;if(3===r)return Dt(n,t);if(0===r)return Ci(-1,t[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return e(t,r);{const e=t[n.index];return wt(e)?Ci(-1,e):It(e)}}{const r=t[16],i=r[6],s=br(r),a=i.projection[n.projection];return null!=a?e(s,a):e(t,n.next)}}return null}(e,r)}return t[7]}function ki(e,t,n,r,i,s,a){for(;null!=n;){const o=r[n.index],u=n.type;a&&0===t&&(o&&ar(It(o),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(ki(e,t,n.child,r,i,s,!1),pi(t,e,i,o,s)):1===u?Ai(e,t,r,n,i,s):pi(t,e,i,o,s)),n=a?n.projectionNext:n.next}}function Ti(e,t,n,r,i,s){ki(n,r,e.node.child,t,i,s,!1)}function Ai(e,t,n,r,i,s){const a=n[16],o=a[6].projection[r.projection];if(Array.isArray(o))for(let u=0;u<o.length;u++)pi(t,e,i,o[u],s);else ki(e,t,o,a[3],i,s,!0)}function Mi(e,t,n){Mt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Ni(e,t,n){Mt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class Ii{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,n,r,i,s=!1){for(;null!==r;){const a=n[r.index];if(null!==a&&i.push(It(a)),wt(a))for(let t=9;t<a.length;t++){const n=a[t],r=n[1].firstChild;null!==r&&e(n[1],n,r,i)}const o=r.type;if(4===o||5===o)e(t,n,r.child,i);else if(1===o){const t=n[16],s=t[6],a=br(t);let o=s.projection[r.projection];null!==o&&null!==a&&e(a[1],a,o,i,!0)}r=s?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}yi(this._lView[1],this._lView)}onDestroy(e){var t,n,r;t=this._lView[1],r=e,oi(n=this._lView).push(r),t.firstCreatePass&&ui(t).push(n[7].length-1,null)}markForCheck(){ni(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ri(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Kt(!0);try{ri(e,t,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Ti(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Di extends Ii{constructor(e){super(e),this._view=e}detectChanges(){ii(this._view)}checkNoChanges(){!function(e){Kt(!0);try{ii(e)}finally{Kt(!1)}}(this._view)}get context(){return null}}let Ri,Li,Oi;function Fi(e,t,n){return Ri||(Ri=class extends e{}),new Ri(Dt(t,n))}function Pi(e,t,n,r){return Li||(Li=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Nr(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(t)),Dr(t,n,e);const i=new Ii(n);return i._tViewNode=n[6],i}}),0===n.type?new Li(r,n,Fi(t,n,r)):null}function zi(e,t,n,r){let i;Oi||(Oi=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return Fi(t,this._hostTNode,this._hostView)}get injector(){return new Gn(this._hostTNode,this._hostView)}get parentInjector(){const e=Fn(this._hostTNode,this._hostView),t=Cn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){const e=n.parent.injectorIndex;let t=n.parent;for(;null!=t.parent&&e==t.parent.injectorIndex;)t=t.parent;return t}let r=En(e),i=t,s=t[6];for(;r>1;)i=i[15],s=i[6],r--;return s}(e,this._hostView,this._hostTNode);return wn(e)&&null!=n?new Gn(n,t):new Gn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-9}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Ye,null);e&&(i=e)}const a=e.create(s,r,void 0,i);return this.insert(a.hostView,t),a}insert(e,t){const n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),wt(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Oi(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t);return function(e,t,n,r){const i=9+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-9?(t[4]=n[i],et(n,9+r,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function(e,t){const n=e[5],r=t[3][3][16];16!=(16&r[2])&&t[16]!==r&&(e[2]|=1),null===n?e[5]=[t]:n.push(t)}(a,t);const o=t[5];null!==o&&o.insertView(e),t[2]|=128}(r,n,this._lContainer,i),fi(r,n,!0,Ci(i,this._lContainer)),e.attachToViewContainerRef(this),et(this._lContainer[8],i,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1);(function(e,t){const n=gi(e,t);n&&yi(n[1],n)})(this._lContainer,t),tt(this._lContainer[8],t)}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=gi(this._lContainer,t);return n&&null!=tt(this._lContainer[8],t)?new Ii(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=r[n.index];if(wt(s))i=s,function(e,t){e[2]=-2}(i);else{let e;if(4===n.type)e=It(s);else if(e=r[11].createComment(""),Tt(r)){const t=r[11],i=Dt(n,r);_i(t,Si(t,i),e,function(e,t){return Mt(e)?e.nextSibling(t):t.nextSibling}(t,i))}else Ei(r[1],r,e,n);r[n.index]=i=new Array(s,!0,-2,r,null,null,n,e,null),ti(r,i)}return new Oi(i,n,r)}function $i(e=!1){return function(e,t,n){if(!n&&Et(e)){const n=Lt(e.index,t);return new Ii(n,n)}return 3===e.type||0===e.type||4===e.type||5===e.type?new Ii(t[16],t):null}(Ht(),Vt(),e)}let Bi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ui(),e})();const Ui=$i,Vi=new Pe("Set Injector scope."),Wi={},Hi={},Gi=[];let ji=void 0;function qi(){return void 0===ji&&(ji=new Ze),ji}function Ki(e,t=null,n=null,r){return new Xi(e,n,t||qi(),r)}class Xi{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Qe(t,n=>this.processProvider(n,e,t)),Qe([e],e=>this.processInjectorType(e,[],i)),this.records.set(ze,Ji(void 0,this));const s=this.records.get(Vi);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:be(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=$e,n=ae.Default){this.assertNotDestroyed();const r=He(this);try{if(!(n&ae.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Pe)&&he(e);t=n&&this.injectableDefInScope(n)?Ji(Zi(e),Wi):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ae.Self?qi():this.parent).get(e,t=n&ae.Optional&&t===$e?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(be(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=be(t);if(Array.isArray(t))i=t.map(be).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):be(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Be,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{He(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(be(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=Se(e)))return!1;let r=pe(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,a=-1!==n.indexOf(s);if(void 0!==i&&(r=pe(i)),null==r)return!1;if(null!=r.imports&&!a){let e;n.push(s);try{Qe(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Qe(r,e=>this.processProvider(e,n,r||Gi))}}this.injectorDefTypes.add(s),this.records.set(s,Ji(r.factory,Wi));const o=r.providers;if(null!=o&&!a){const t=e;Qe(o,e=>this.processProvider(e,t,o))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=es(e=Se(e))?e:Se(e&&e.provide);const i=function(e,t,n){return Qi(e)?Ji(void 0,e.useValue):Ji(Yi(e,t,n),Wi)}(e,t,n);if(es(e)||!0!==e.multi){const e=this.records.get(r);e&&void 0!==e.multi&&ur()}else{let t=this.records.get(r);t?void 0===t.multi&&ur():(t=Ji(void 0,Wi,!0),t.factory=()=>Xe(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Hi?function(e){throw new Error(`Cannot instantiate cyclic dependency! ${e}`)}(be(e)):t.value===Wi&&(t.value=Hi,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function Zi(e){const t=he(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;const r=pe(e);if(null!==r)return r.factory;if(e instanceof Pe)throw new Error(`Token ${be(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${be(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[fe]||e[ye]||e[ge]&&e[ge]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Yi(e,t,n){let r=void 0;if(es(e)){const t=Se(e);return bt(t)||Zi(t)}if(Qi(e))r=()=>Se(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Xe(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>qe(Se(e.useExisting));else{const i=Se(e&&(e.useClass||e.provide));if(i||function(e,t,n){let r="";throw e&&t&&(r=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${be(e)}'`+r)}(t,n,e),!function(e){return!!e.deps}(e))return bt(i)||Zi(i);r=()=>new i(...Xe(e.deps))}var i;return r}function Ji(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Qi(e){return null!==e&&"object"==typeof e&&Ue in e}function es(e){return"function"==typeof e}const ts=function(e,t,n){return function(e,t=null,n=null,r){const i=Ki(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ns=(()=>{class e{static create(e,t){return Array.isArray(e)?ts(e,t,""):ts(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=$e,e.NULL=new Ze,e.\u0275prov=le({token:e,providedIn:"any",factory:()=>qe(ze)}),e.__NG_ELEMENT_ID__=-1,e})();const rs=new Pe("AnalyzeForEntryComponents");let is=new Map;const ss=new Set;function as(e){return"string"==typeof e?e:e.text()}function os(e,t){let n=e.styles,r=e.classes,i=0;for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?i=e:1==i?r=_e(r,e):2==i&&(n=_e(n,e+": "+t[++s]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}let us=null;function ls(){if(!us){const e=Me.Symbol;if(e&&e.iterator)us=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(us=n)}}}return us}function cs(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}class hs{constructor(e){this.wrapped=e}static wrap(e){return new hs(e)}static unwrap(e){return hs.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof hs}}function ds(e){return!!ps(e)&&(Array.isArray(e)||!(e instanceof Map)&&ls()in e)}function ps(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function fs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ms(e,t,n,r){const i=Vt();return fs(i,Xt(),t)&&(Wt(),function(e,t,n,r,i,s){const a=Dt(e,t),o=t[11];if(null==r)Mt(o)?o.removeAttribute(a,n,s):a.removeAttribute(n);else{const t=null==i?kn(r):i(r,e.tagName||"",n);Mt(o)?o.setAttribute(a,n,t,s):s?a.setAttributeNS(s,n,t):a.setAttribute(n,t)}}(ln(),i,e,t,n,r)),ms}function gs(e,t=ae.Default){const n=Vt();return null==n?qe(e,t):zn(Ht(),n,Se(e),t)}function ys(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(vn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Ht(),e)}function vs(){throw new Error("invalid")}function bs(e,t,n){const r=Vt();return fs(r,Xt(),t)&&Br(Wt(),ln(),r,e,t,r[11],n,!1),bs}function _s(e,t,n,r,i){const s=i?"class":"style";ci(e,n,t.inputs[s],s,r)}function xs(e,t,n,r){const i=Vt(),s=Wt(),a=19+e,o=i[11],u=i[a]=Mr(t,o,Bt.lFrame.currentNamespace),l=s.firstCreatePass?function(e,t,n,r,i,s,a){const o=t.consts,u=zt(o,s),l=Ir(t,n[6],e,3,i,u);return function(e,t,n,r){let i=!1;if(Ut()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const a=r[s];mr(n,a.selectors,!1)&&(i||(i=[]),Pn(Rn(n,t),e,a.type),kt(a)?(2&n.flags&&or(n),Gr(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),a=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,qr(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}Hr(e,n,s.length);let o=!1,u=!1;for(let i=0;i<s.length;i++){const l=s[i];n.mergedAttrs=_n(n.mergedAttrs,l.hostAttrs),Kr(e,t,l),jr(e.data.length-1,l,a),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128),!o&&(l.onChanges||l.onInit||l.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),o=!0),u||!l.onChanges&&!l.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),u=!0),Ur(e,l),r+=l.hostVars}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let a=null,o=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],t=e.inputs;s.push(null!==i?Yr(t,i):null),a=$r(t,u,a),o=$r(e.outputs,u,o)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=o}(e,n),Vr(e,t,r)}a&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new Error(`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,a)}n.mergedAttrs=_n(n.mergedAttrs,n.attrs)}(t,n,l,zt(o,a)),null!==l.mergedAttrs&&os(l,l.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,l),l}(e,s,i,0,t,n,r):s.data[a];Gt(l,!0);const c=l.mergedAttrs;null!==c&&yn(o,u,c);const h=l.classes;null!==h&&Ni(o,u,h);const d=l.styles;null!==d&&Mi(o,u,d),Ei(s,i,u,l),0===Bt.lFrame.elementDepthCount&&ar(u,i),Bt.lFrame.elementDepthCount++,Ct(l)&&(function(e,t,n){Ut()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Rn(n,t),ar(r,t);const a=n.initialInputs;for(let o=i;o<s;o++){const r=e.data[o],s=kt(r);s&&Xr(t,n,r);const u=Vn(t,e,o,n);ar(u,t),null!==a&&Zr(0,o-i,u,r,0,a),s&&(Lt(n.index,t)[8]=u)}}(e,t,n,Dt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=e.expandoInstructions,a=e.firstCreatePass,o=n.index-19;try{un(o);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Wr(r,i):a&&s.push(null)}}finally{un(-1)}}(e,t,n))}(s,i,l),function(e,t,n){if(St(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(s,l,i)),null!==r&&function(e,t,n=Dt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],o=-1===a?n(t,e):e[a];e[i++]=o}}}(i,l)}function ws(){let e=Ht();jt()?Bt.lFrame.isParent=!1:(e=e.parent,Gt(e,!1));const t=e;Bt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(cn(n,e),St(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&_s(n,t,Vt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&_s(n,t,Vt(),t.styles,!1)}function Ss(e,t,n,r){xs(e,t,n,r),ws()}function Es(e){return!!e&&"function"==typeof e.then}function Cs(e){return!!e&&"function"==typeof e.subscribe}function ks(e,t,n=!1,r){const i=Vt(),s=Wt(),a=Ht();return function(e,t,n,r,i,s,a=!1,o){const u=Ct(r),l=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),c=oi(t);let h=!0;if(3===r.type){const d=Dt(r,t),p=o?o(d):ot,f=p.target||d,m=c.length,g=o?e=>o(It(e[r.index])).target:r.index;if(Mt(n)){let a=null;if(!o&&u&&(a=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==a)(a.__ngLastListenerFn__||a).__ngNextListenerFn__=s,a.__ngLastListenerFn__=s,h=!1;else{s=As(r,t,s,!1);const e=n.listen(p.name||f,i,s);c.push(s,e),l&&l.push(i,g,m,m+1)}}else s=As(r,t,s,!0),f.addEventListener(i,s,a),c.push(s),l&&l.push(i,g,m,a)}const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),a=c.length;c.push(s,e),l&&l.push(i,r.index,a,-(a+1))}}}(s,i,i[11],a,e,t,n,r),ks}function Ts(e,t,n){try{return!1!==t(n)}catch(r){return li(e,r),!1}}function As(e,t,n,r){return function i(s){if(s===Function)return n;const a=2&e.flags?Lt(e.index,t):t;0==(32&t[2])&&ni(a);let o=Ts(t,n,s),u=i.__ngNextListenerFn__;for(;u;)o=Ts(t,u,s)&&o,u=u.__ngNextListenerFn__;return r&&!1===o&&(s.preventDefault(),s.returnValue=!1),o}}const Ms=[];function Ns(e,t,n,r,i){const s=e[n+1],a=null===t;let o=r?Sr(s):Cr(s),u=!1;for(;0!==o&&(!1===u||a);){const n=e[o+1];Is(e[o],t)&&(u=!0,e[o+1]=r?Tr(n):Er(n)),o=r?Sr(n):Cr(n)}u&&(e[n+1]=r?Er(s):Tr(s))}function Is(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&it(e,t)>=0}function Ds(e,t){return function(e,t,n,r){const i=Vt(),s=Wt(),a=function(e){const t=Bt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();if(s.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const r=i[on()+19],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(r)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Bt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===i)0===t.classBindings&&(n=Ls(n=Rs(null,e,t,n,!0),t.attrs,!0),s=null);else{const r=t.directiveStylingLast;if(-1===r||e[r]!==i)if(n=Rs(i,e,t,n,!0),null===s){let n=function(e,t,n){const r=t.classBindings;if(0!==Cr(r))return e[Sr(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=Rs(null,e,t,n[1],!0),n=Ls(n,t.attrs,!0),function(e,t,n,r){e[Sr(t.classBindings)]=r}(e,t,0,n))}else s=function(e,t,n){let r=void 0;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Ls(r,e[s].hostAttrs,!0);return Ls(r,t.attrs,!0)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(i,r,t),function(e,t,n,r,i,s){let a=t.classBindings,o=Sr(a),u=Cr(a);e[r]=n;let l,c=!1;if(Array.isArray(n)){const e=n;l=e[1],(null===l||it(e,l)>0)&&(c=!0)}else l=n;if(i)if(0!==u){const t=Sr(e[o+1]);e[r+1]=wr(t,o),0!==t&&(e[t+1]=kr(e[t+1],r)),e[o+1]=131071&e[o+1]|r<<17}else e[r+1]=wr(o,0),0!==o&&(e[o+1]=kr(e[o+1],r)),o=r;else e[r+1]=wr(u,0),0===o?o=r:e[u+1]=kr(e[u+1],r),u=r;c&&(e[r+1]=Er(e[r+1])),Ns(e,l,r,!0),Ns(e,l,r,!1),function(e,t,n,r,i){const s=e.residualClasses;null!=s&&"string"==typeof t&&it(s,t)>=0&&(n[r+1]=Tr(n[r+1]))}(t,l,e,r),a=wr(o,u),t.classBindings=a}(i,r,t,n,s)}}(s,e,a),t!==vr&&fs(i,a,t)){let r;null==n&&(r=function(){const e=Bt.lFrame;return null===e?null:e.currentSanitizer}())&&(n=r),function(e,t,n,r,i,s,a,o){if(3!==t.type)return;const u=e.data,l=u[o+1];Fs(1==(1&l)?Os(u,t,n,i,Cr(l),!0):void 0)||(Fs(s)||function(e){return 2==(2&e)}(l)&&(s=Os(u,null,n,i,o,!0)),function(e,t,n,r,i){const s=Mt(e);i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r)}(r,0,function(e,t){return It(t[e+19])}(on(),n),i,s))}(s,s.data[on()+19],i,i[11],e,i[a+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=be(Jn(e)))),e}(t,n),0,a)}}(e,t,null),Ds}function Rs(e,t,n,r,i){let s=null;const a=n.directiveEnd;let o=n.directiveStylingLast;for(-1===o?o=n.directiveStart:o++;o<a&&(s=t[o],r=Ls(r,s.hostAttrs,i),s!==e);)o++;return null!==e&&(n.directiveStylingLast=o),r}function Ls(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),nt(e,a,!!n||t[++s]))}return void 0===e?null:e}function Os(e,t,n,r,i,s){const a=null===t;let o=void 0;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,l=null===u;let c=n[i+1];c===vr&&(c=l?Ms:void 0);let h=l?rt(c,r):u===r?c:void 0;if(s&&!Fs(h)&&(h=rt(t,r)),Fs(h)&&(o=h,a))return o;const d=e[i+1];i=a?Sr(d):Cr(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(o=rt(e,r))}return o}function Fs(e){return void 0!==e}function Ps(e,t=""){const n=Vt(),r=Wt(),i=e+19,s=r.firstCreatePass?Ir(r,n[6],e,3,null,null):r.data[i],a=n[i]=function(e,t){return Mt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Ei(r,n,a,s),Gt(s,!1)}function zs(e,t,n){const r=Vt();return fs(r,Xt(),t)&&Br(Wt(),ln(),r,e,t,r[11],n,!0),zs}function $s(e,t){const n=Ot(e)[1],r=n.data.length-1;cn(n,{directiveStart:r,directiveEnd:r+1})}function Bs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i=void 0;if(kt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=Us(e.inputs),t.declaredInputs=Us(e.declaredInputs),t.outputs=Us(e.outputs);const n=i.hostBindings;n&&Hs(e,n);const s=i.viewQuery,a=i.contentQueries;if(s&&Vs(e,s),a&&Ws(e,a),ue(e.inputs,i.inputs),ue(e.declaredInputs,i.declaredInputs),ue(e.outputs,i.outputs),kt(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}t.afterContentChecked=t.afterContentChecked||i.afterContentChecked,t.afterContentInit=e.afterContentInit||i.afterContentInit,t.afterViewChecked=e.afterViewChecked||i.afterViewChecked,t.afterViewInit=e.afterViewInit||i.afterViewInit,t.doCheck=e.doCheck||i.doCheck,t.onDestroy=e.onDestroy||i.onDestroy,t.onInit=e.onInit||i.onInit}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Bs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=_n(i.hostAttrs,n=_n(n,i.hostAttrs))}}(r)}function Us(e){return e===ot?{}:e===ut?[]:e}function Vs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ws(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Hs(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}class Gs{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function js(e){e.type.prototype.ngOnChanges&&(e.setInput=qs,e.onChanges=function(){const e=Ks(this),t=e&&e.current;if(t){const n=e.previous;if(n===ot)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}})}function qs(e,t,n,r){const i=Ks(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ot,current:null}),s=i.current||(i.current={}),a=i.previous,o=this.declaredInputs[n],u=a[o];s[o]=new Gs(u&&u.currentValue,t,a===ot),e[r]=t}function Ks(e){return e.__ngSimpleChanges__||null}function Xs(e,t,n,r,i){if(e=Se(e),Array.isArray(e))for(let s=0;s<e.length;s++)Xs(e[s],t,n,r,i);else{const s=Wt(),a=Vt();let o=es(e)?e:Se(e.provide),u=Yi(e);const l=Ht(),c=65535&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>16;if(es(e)||!e.multi){const r=new gn(u,i,gs),p=Js(o,t,i?c:c+d,h);-1===p?(Pn(Rn(l,a),s,o),Zs(s,e,t.length),t.push(o),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(r),a.push(r)):(n[p]=r,a[p]=r)}else{const p=Js(o,t,c+d,h),f=Js(o,t,c,c+d),m=p>=0&&n[p],g=f>=0&&n[f];if(i&&!g||!i&&!m){Pn(Rn(l,a),s,o);const c=function(e,t,n,r,i){const s=new gn(e,n,gs);return s.multi=[],s.index=t,s.componentProviders=0,Ys(s,i,r&&!n),s}(i?ea:Qs,n.length,i,r,u);!i&&g&&(n[f].providerFactory=c),Zs(s,e,t.length),t.push(o),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(c),a.push(c)}else Zs(s,e,p>-1?p:f),Ys(n[i?f:p],u,!i&&r);!i&&r&&g&&n[f].componentProviders++}}}function Zs(e,t,n){if(es(t)||t.useClass){const r=(t.useClass||t).prototype.ngOnDestroy;r&&(e.destroyHooks||(e.destroyHooks=[])).push(n,r)}}function Ys(e,t,n){e.multi.push(t),n&&e.componentProviders++}function Js(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Qs(e,t,n,r){return ta(this.multi,[])}function ea(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Vn(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),ta(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],ta(i,s);return s}function ta(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function na(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Wt();if(r.firstCreatePass){const i=kt(e);Xs(n,r.data,r.blueprint,i,!0),Xs(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}js.ngInherit=!0;class ra{}class ia{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${be(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let sa=(()=>{class e{}return e.NULL=new ia,e})(),aa=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>oa(e),e})();const oa=function(e){return Fi(e,Ht(),Vt())};class ua{}const la=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let ca=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ha(),e})();const ha=function(){const e=Vt(),t=Lt(Ht().index,e);return function(e){const t=e[11];if(Mt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(xt(t)?t:e)};let da=(()=>{class e{}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>null}),e})();class pa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fa=new pa("9.0.7");class ma{constructor(){}supports(e){return ds(e)}create(e){return new ya(e)}}const ga=(e,t)=>t;class ya{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ga}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<xa(n,r,i)?t:n,a=xa(s,r,i),o=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=a-r,t=o-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}a!==o&&e(s,a,o)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ds(e))throw new Error(`Error trying to diff '${be(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&cs(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),cs(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ls()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&cs(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),cs(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(cs(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(cs(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new va(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new _a),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _a),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class va{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ba{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&cs(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class _a{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ba,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xa(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class wa{constructor(){}supports(e){return e instanceof Map||ps(e)}create(){return new Sa}}class Sa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ps(e)))throw new Error(`Error trying to diff '${be(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ea(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){cs(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ea{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ca=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new re]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new e([new ma])}),e})(),ka=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new re]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new e([new wa])}),e})();const Ta=[new wa],Aa=new Ca([new ma]),Ma=new ka(Ta);let Na=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ia(e,aa),e})();const Ia=function(e,t){return Pi(e,t,Ht(),Vt())};let Da=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ra(e,aa),e})();const Ra=function(e,t){return zi(e,t,Ht(),Vt())},La={};class Oa extends sa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new za(t,this.ngModule)}}function Fa(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Pa=new Pe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>An});class za extends ra{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(yr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Fa(this.componentDef.inputs)}get outputs(){return Fa(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,La,i);return s!==La||r===La?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(ua,Nt),a=i.get(da,null),o=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(e,t,n){if(Mt(e))return e.selectRootElement(t,n===at.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(o,n,this.componentDef.encapsulation):Mr(u,s.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),c=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),d={components:[],scheduler:An,clean:ai,playerHandler:null,flags:0},p=Pr(0,-1,null,1,0,null,null,null,null,null),f=Nr(null,p,d,c,null,null,s,o,a,i);let m,g;en(f,null);try{const e=function(e,t,n,r,i,s){const a=n[1];n[19]=e;const o=Ir(a,null,0,3,null,null),u=o.mergedAttrs=t.hostAttrs;null!==u&&(os(o,u),null!==e&&(yn(i,e,u),null!==o.classes&&Ni(i,e,o.classes),null!==o.styles&&Mi(i,e,o.styles)));const l=r.createRenderer(e,t),c=Nr(n,Fr(t),null,t.onPush?64:16,n[19],o,r,l,void 0);return a.firstCreatePass&&(Pn(Rn(o,n),a,t.type),Gr(a,o),qr(o,n.length,1)),ti(n,c),n[19]=c}(l,this.componentDef,f,s,o);if(l)if(n)yn(o,l,["ng-version",fa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!pr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&yn(o,l,e),t&&t.length>0&&Ni(o,l,t.join(" "))}g=Rt(f[1],0),t&&(g.projection=t.map(e=>Array.from(e))),m=function(e,t,n,r,i){const s=n[1],a=function(e,t,n){const r=Ht();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hr(e,r,1),Kr(e,t,n));const i=Vn(t,e,t.length-1,r);ar(i,t);const s=Dt(r,t);return s&&ar(s,t),i}(s,n,t);r.components.push(a),e[8]=a,i&&i.forEach(e=>e(a,t)),t.contentQueries&&t.contentQueries(1,a,n.length-1);const o=Ht();if(s.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){un(o.index-19);const e=n[1];Ur(e,t),Vr(e,n,t.hostVars),Wr(t,a)}return a}(e,this.componentDef,f,d,[$s]),Dr(p,f,null)}finally{an()}const y=new $a(this.componentType,m,Fi(aa,g,f),f,g);return n&&!h||(y.hostView._tViewNode.child=g),y}}class $a extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new Di(r),this.hostView._tViewNode=function(e,t,n,r){let i=e.node;return null==i&&(e.node=i=zr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=e}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const Ba=void 0;var Ua=["en",[["a","p"],["AM","PM"],Ba],[["AM","PM"],Ba,Ba],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ba,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ba,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ba,"{1} 'at' {0}",Ba],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Va={};function Wa(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Ha(t);if(n)return n;const r=t.split("-")[0];if(n=Ha(r),n)return n;if("en"===r)return Ua;throw new Error(`Missing locale data for the locale "${e}".`)}function Ha(e){return e in Va||(Va[e]=Me.ng&&Me.ng.common&&Me.ng.common.locales&&Me.ng.common.locales[e]),Va[e]}const Ga=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let ja="en-US";function qa(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ja=e.toLowerCase().replace(/_/g,"-"))}const Ka=new Map;class Xa extends Ye{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Oa(this);const n=_t(e),r=e[Le]||null;r&&qa(r),this._bootstrapComponents=Mn(n.bootstrap),this._r3Injector=Ki(e,t,[{provide:Ye,useValue:this},{provide:sa,useValue:this.componentFactoryResolver}],be(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ns.THROW_IF_NOT_FOUND,n=ae.Default){return e===ns||e===Ye||e===ze?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Za extends Je{constructor(e){super(),this.moduleType=e,null!==_t(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${be(t)} vs ${be(t.name)}`)})(e,Ka.get(e),t),Ka.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new Xa(this.moduleType,e)}}class Ya extends C{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,s=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,i,s);return e instanceof h&&e.add(a),a}}function Ja(){return this._results[ls()]()}class Qa{constructor(){this.dirty=!0,this._results=[],this.changes=new Ya,this.length=0;const e=ls(),t=Qa.prototype;t[e]||(t[e]=Ja)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class eo{constructor(e){this.queryList=e,this.matches=null}clone(){return new eo(this.queryList)}setDirty(){this.queryList.setDirty()}}class to{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new to(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==fo(e,t).matches&&this.queries[t].setDirty()}}class no{constructor(e,t,n,r=null){this.predicate=e,this.descendants=t,this.isStatic=n,this.read=r}}class ro{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new ro(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class io{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new io(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(e,t,so(t,n[r]))}else{const n=this.metadata.predicate;n===Na?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Un(t,e,n,!1,!1))}}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===aa||r===Da||r===Na&&0===t.type)this.addMatch(t.index,-2);else{const n=Un(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function so(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function ao(e,t,n,r){return-1===n?function(e,t){return 3===e.type||4===e.type?Fi(aa,e,t):0===e.type?Pi(Na,aa,e,t):null}(t,e):-2===n?function(e,t,n){return n===aa?Fi(aa,t,e):n===Na?Pi(Na,aa,t,e):n===Da?zi(Da,aa,t,e):void 0}(e,t,r):Vn(e,e[1],n,t)}function oo(e,t,n,r){const i=t[5].queries[r];if(null===i.matches){const r=e.data,s=n.matches,a=[];for(let e=0;e<s.length;e+=2){const i=s[e];a.push(i<0?null:ao(t,r[i],s[e+1],n.metadata.read))}i.matches=a}return i.matches}function uo(e){const t=Vt(),n=Wt(),r=Yt();Jt(r+1);const i=fo(n,r);if(e.dirty&&Ft(t)===i.metadata.isStatic){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?function e(t,n,r,i){const s=t.queries.getByIndex(r),a=s.matches;if(null!==a){const o=oo(t,n,s,r);for(let t=0;t<a.length;t+=2){const r=a[t];if(r>0)i.push(o[t/2]);else{const s=a[t+1],o=n[-r];for(let t=9;t<o.length;t++){const n=o[t];n[17]===n[3]&&e(n[1],n,s,i)}if(null!==o[5]){const t=o[5];for(let n=0;n<t.length;n++){const r=t[n];e(r[1],r,s,i)}}}}}return i}(n,t,r,[]):oo(n,t,i,r);e.reset(s),e.notifyOnChanges()}return!0}return!1}function lo(e,t,n,r){!function(e,t,n,r,i,s,a,o){e.firstCreatePass&&(po(e,new no(n,r,!1,i),a.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,o)),ho(e,t)}(Wt(),Vt(),t,n,r,0,Ht(),e)}function co(){return e=Vt(),t=Yt(),e[5].queries[t].queryList;var e,t}function ho(e,t){const n=new Qa;!function(e,t,n,r){const i=oi(t);i.push(n),e.firstCreatePass&&ui(e).push(r,i.length-1)}(e,t,n,n.destroy),null===t[5]&&(t[5]=new to),t[5].queries.push(new eo(n))}function po(e,t,n){null===e.queries&&(e.queries=new ro),e.queries.track(new io(t,n))}function fo(e,t){return e.queries.getByIndex(t)}const mo=new Pe("Application Initializer");let go=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Es(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(qe(mo,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const yo=new Pe("AppId"),vo={provide:yo,useFactory:function(){return`${bo()}${bo()}${bo()}`},deps:[]};function bo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _o=new Pe("Platform Initializer"),xo=new Pe("Platform ID"),wo=new Pe("appBootstrapListener");let So=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const Eo=new Pe("LocaleId"),Co=new Pe("DefaultCurrencyCode");class ko{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const To=function(e){return new Za(e)},Ao=To,Mo=function(e){return Promise.resolve(To(e))},No=function(e){const t=To(e),n=Mn(_t(e).declarations).reduce((e,t)=>{const n=vt(t);return n&&e.push(new za(n)),e},[]);return new ko(t,n)},Io=No,Do=function(e){return Promise.resolve(No(e))};let Ro=(()=>{class e{constructor(){this.compileModuleSync=Ao,this.compileModuleAsync=Mo,this.compileModuleAndAllComponentsSync=Io,this.compileModuleAndAllComponentsAsync=Do}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const Lo=new Pe("compilerOptions"),Oo=(()=>Promise.resolve(0))();function Fo(e){"undefined"==typeof Zone?Oo.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Po{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ya(!1),this.onMicrotaskEmpty=new Ya(!1),this.onStable=new Ya(!1),this.onError=new Ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Me.requestAnimationFrame,t=Me.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Me,()=>{e.lastRequestAnimationFrameId=-1,Uo(e),Bo(e)}),Uo(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,r,i,s,a,o)=>{try{return Vo(e),n.invokeTask(i,s,a,o)}finally{t&&"eventTask"===s.type&&t(),Wo(e)}},onInvoke:(t,n,r,i,s,a,o)=>{try{return Vo(e),t.invoke(r,i,s,a,o)}finally{Wo(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Uo(e),Bo(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Po.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Po.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,$o,zo,zo);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function zo(){}const $o={};function Bo(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Uo(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Vo(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Wo(e){e._nesting--,Bo(e)}class Ho{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ya,this.onMicrotaskEmpty=new Ya,this.onStable=new Ya,this.onError=new Ya}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Go=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Po.assertNotInAngularZone(),Fo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fo(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(qe(Po))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),jo=(()=>{class e{constructor(){this._applications=new Map,Xo.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Xo.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class qo{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Ko,Xo=new qo,Zo=function(e,t,n){const r=new Za(n);if(0===is.size)return Promise.resolve(r);const i=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(e.get(Lo,[]).concat(t).map(e=>e.providers));if(0===i.length)return Promise.resolve(r);const s=function(){const e=Me.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),a=ns.create({providers:i}).get(s.ResourceLoader);return function(e){const t=[],n=new Map;function r(e){let t=n.get(e);if(!t){const r=(e=>Promise.resolve(a.get(e)))(e);n.set(e,t=r.then(as))}return t}return is.forEach((e,n)=>{const i=[];e.templateUrl&&i.push(r(e.templateUrl).then(t=>{e.template=t}));const s=e.styleUrls,a=e.styles||(e.styles=[]),o=e.styles.length;s&&s.forEach((t,n)=>{a.push(""),i.push(r(t).then(r=>{a[o+n]=r,s.splice(s.indexOf(t),1),0==s.length&&(e.styleUrls=void 0)}))});const u=Promise.all(i).then(()=>function(e){ss.delete(e)}(n));t.push(u)}),is=new Map,Promise.all(t).then(()=>{})}().then(()=>r)};const Yo=new Pe("AllowMultipleToken");class Jo{constructor(e,t){this.name=e,this.token=t}}function Qo(e,t,n=[]){const r=`Platform: ${t}`,i=new Pe(r);return(t=[])=>{let s=eu();if(!s||s.injector.get(Yo,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Vi,useValue:"platform"});!function(e){if(Ko&&!Ko.destroyed&&!Ko.injector.get(Yo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ko=e.get(tu);const t=e.get(_o,null);t&&t.forEach(e=>e())}(ns.create({providers:e,name:r}))}return function(e){const t=eu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function eu(){return Ko&&!Ko.destroyed?Ko:null}let tu=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ho:("zone.js"===e?void 0:e)||new Po({enableLongStackTrace:tr(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),r=[{provide:Po,useValue:n}];return n.run(()=>{const t=ns.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Zn,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>iu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const r=n();return Es(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(go);return e.runInitializers(),e.donePromise.then(()=>(qa(i.injector.get(Eo,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=nu({},t);return Zo(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(ru);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${be(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(qe(ns))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function nu(e,t){return Array.isArray(t)?t.reduce(nu,e):Object.assign(Object.assign({},e),t)}let ru=(()=>{class e{constructor(e,t,n,r,i,s){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=tr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),o=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Po.assertNotInAngularZone(),Fo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Po.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return T(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:G(t)(j(e,n))}(a,o.pipe(e=>{return q()((t=Q,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,Y);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ra?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ye),i=n.create(ns.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(Go,null);return s&&i.injector.get(jo).registerApplication(i.location.nativeElement,s),this._loadComponent(i),tr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;iu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(wo,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),iu(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(qe(Po),qe(So),qe(ns),qe(Zn),qe(sa),qe(go))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function iu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class su{}class au{}const ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let uu=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||ou}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>lu(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>lu(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(qe(Ro),qe(au,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function lu(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const cu=Qo(null,"core",[{provide:xo,useValue:"unknown"},{provide:tu,deps:[ns]},{provide:jo,deps:[]},{provide:So,deps:[]}]),hu=[{provide:ru,useClass:ru,deps:[Po,So,ns,Zn,sa,go]},{provide:Pa,deps:[Po],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:go,useClass:go,deps:[[new re,mo]]},{provide:Ro,useClass:Ro,deps:[]},vo,{provide:Ca,useFactory:function(){return Aa},deps:[]},{provide:ka,useFactory:function(){return Ma},deps:[]},{provide:Eo,useFactory:function(e){return qa(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ne(Eo),new re,new se]]},{provide:Co,useValue:"USD"}];let du=(()=>{class e{constructor(e){}}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)(qe(ru))},providers:hu}),e})(),pu=null;function fu(){return pu}const mu=new Pe("DocumentToken");let gu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({factory:yu,token:e,providedIn:"platform"}),e})();function yu(){return qe(bu)}const vu=new Pe("Location Initialized");let bu=(()=>{class e extends gu{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=fu().getLocation(),this._history=fu().getHistory()}getBaseHrefFromDOM(){return fu().getBaseHref(this._doc)}onPopState(e){fu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){fu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){_u()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){_u()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(qe(mu))},e.\u0275prov=le({factory:xu,token:e,providedIn:"platform"}),e})();function _u(){return!!window.history.pushState}function xu(){return new bu(qe(mu))}function wu(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Su(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Eu(e){return e&&"?"!==e[0]?"?"+e:e}let Cu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({factory:ku,token:e,providedIn:"root"}),e})();function ku(e){const t=qe(mu).location;return new Au(qe(gu),t&&t.origin||"")}const Tu=new Pe("appBaseHref");let Au=(()=>{class e extends Cu{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return wu(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Eu(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Eu(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Eu(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(qe(gu),qe(Tu,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Mu=(()=>{class e extends Cu{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=wu(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Eu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Eu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(qe(gu),qe(Tu,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Nu=(()=>{class e{constructor(e,t){this._subject=new Ya,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Su(Du(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Eu(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Du(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Eu(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Eu(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(qe(Cu),qe(gu))},e.normalizeQueryParams=Eu,e.joinWithSlash=wu,e.stripTrailingSlash=Su,e.\u0275prov=le({factory:Iu,token:e,providedIn:"root"}),e})();function Iu(){return new Nu(qe(Cu),qe(gu))}function Du(e){return e.replace(/\/index.html$/,"")}const Ru={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Lu=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),Ou=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Fu=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),Pu=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),zu=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),$u=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function Bu(e,t){return ju(Wa(e)[Ga.DateFormat],t)}function Uu(e,t){return ju(Wa(e)[Ga.TimeFormat],t)}function Vu(e,t){return ju(Wa(e)[Ga.DateTimeFormat],t)}function Wu(e,t){const n=Wa(e),r=n[Ga.NumberSymbols][t];if(void 0===r){if(t===$u.CurrencyDecimal)return n[Ga.NumberSymbols][$u.Decimal];if(t===$u.CurrencyGroup)return n[Ga.NumberSymbols][$u.Group]}return r}function Hu(e,t){return Wa(e)[Ga.NumberFormats][t]}function Gu(e){if(!e[Ga.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Ga.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ju(e,t){for(let n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function qu(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const Ku=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xu={},Zu=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Yu=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),Ju=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),Qu=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function el(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function tl(e,t,n="-",r,i){let s="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,s=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.substr(a.length-t)),s+a}function nl(e,t,n=0,r=!1,i=!1){return function(s,a){let o=function(e,t){switch(e){case Ju.FullYear:return t.getFullYear();case Ju.Month:return t.getMonth();case Ju.Date:return t.getDate();case Ju.Hours:return t.getHours();case Ju.Minutes:return t.getMinutes();case Ju.Seconds:return t.getSeconds();case Ju.FractionalSeconds:return t.getMilliseconds();case Ju.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((n>0||o>-n)&&(o+=n),e===Ju.Hours)0===o&&-12===n&&(o=12);else if(e===Ju.FractionalSeconds)return u=t,tl(o,3).substr(0,u);var u;const l=Wu(a,$u.MinusSign);return tl(o,t,l,r,i)}}function rl(e,t,n=Fu.Format,r=!1){return function(i,s){return function(e,t,n,r,i,s){switch(n){case Qu.Months:return function(e,t,n){const r=Wa(e),i=ju([r[Ga.MonthsFormat],r[Ga.MonthsStandalone]],t);return ju(i,n)}(t,i,r)[e.getMonth()];case Qu.Days:return function(e,t,n){const r=Wa(e),i=ju([r[Ga.DaysFormat],r[Ga.DaysStandalone]],t);return ju(i,n)}(t,i,r)[e.getDay()];case Qu.DayPeriods:const a=e.getHours(),o=e.getMinutes();if(s){const e=function(e){const t=Wa(e);return Gu(t),(t[Ga.ExtraData][2]||[]).map(e=>"string"==typeof e?qu(e):[qu(e[0]),qu(e[1])])}(t),n=function(e,t,n){const r=Wa(e);Gu(r);const i=ju([r[Ga.ExtraData][0],r[Ga.ExtraData][1]],t)||[];return ju(i,n)||[]}(t,i,r);let s;if(e.forEach((e,t)=>{if(Array.isArray(e)){const{hours:r,minutes:i}=e[0],{hours:u,minutes:l}=e[1];a>=r&&o>=i&&(a<u||a===u&&o<l)&&(s=n[t])}else{const{hours:r,minutes:i}=e;r===a&&i===o&&(s=n[t])}}),s)return s}return function(e,t,n){const r=Wa(e),i=ju([r[Ga.DayPeriodsFormat],r[Ga.DayPeriodsStandalone]],t);return ju(i,n)}(t,i,r)[a<12?0:1];case Qu.Eras:return function(e,t){return ju(Wa(e)[Ga.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,e,t,n,r)}}function il(e){return function(t,n,r){const i=-1*r,s=Wu(n,$u.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Yu.Short:return(i>=0?"+":"")+tl(a,2,s)+tl(Math.abs(i%60),2,s);case Yu.ShortGMT:return"GMT"+(i>=0?"+":"")+tl(a,1,s);case Yu.Long:return"GMT"+(i>=0?"+":"")+tl(a,2,s)+":"+tl(Math.abs(i%60),2,s);case Yu.Extended:return 0===r?"Z":(i>=0?"+":"")+tl(a,2,s)+":"+tl(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}function sl(e,t=!1){return function(n,r){let i;if(t){const e=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,t=n.getDate();i=1+Math.floor((t+e)/7)}else{const e=function(e){const t=new Date(e,0,1).getDay();return new Date(e,0,1+(t<=4?4:11)-t)}(n.getFullYear()),t=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-e.getTime();i=1+Math.round(t/6048e5)}var s;return tl(i,e,Wu(r,$u.MinusSign))}}const al={};function ol(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function ul(e){return e instanceof Date&&!isNaN(e.valueOf())}const ll=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function cl(e,t,n,r,i,s,a=!1){let o="",u=!1;if(isFinite(e)){let l=function(e){let t,n,r,i,s,a=Math.abs(e)+"",o=0;for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(r=a.search(/e/i))>0?(n<0&&(n=r),n+=+a.slice(r+1),a=a.substring(0,r)):n<0&&(n=a.length),r=0;"0"===a.charAt(r);r++);if(r===(s=a.length))t=[0],n=1;else{for(s--;"0"===a.charAt(s);)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(a.charAt(r))}return n>22&&(t=t.splice(0,21),o=n-1,n=1),{digits:t,exponent:o,integerLen:n}}(e);a&&(l=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(l));let c=t.minInt,h=t.minFrac,d=t.maxFrac;if(s){const e=s.match(ll);if(null===e)throw new Error(`${s} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(c=dl(t)),null!=n&&(h=dl(n)),null!=r?d=dl(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const s=Math.min(Math.max(t,i),n);let a=s+e.integerLen,o=r[a];if(a>0){r.splice(Math.max(e.integerLen,a));for(let e=a;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,a=s+1),r[0]=0;for(let e=1;e<a;e++)r[e]=0}if(o>=5)if(a-1<0){for(let t=0;t>a;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[a-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const l=t+e.integerLen,c=r.reduceRight((function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,u&&(0===r[n]&&n>=l?r.pop():u=!1),t>=10?1:0}),0);c&&(r.unshift(c),e.integerLen++)}(l,h,d);let p=l.digits,f=l.integerLen;const m=l.exponent;let g=[];for(u=p.every(e=>!e);f<c;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?g=p.splice(f,p.length):(g=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),o=y.join(Wu(n,r)),g.length&&(o+=Wu(n,i)+g.join("")),m&&(o+=Wu(n,$u.Exponential)+"+"+m)}else o=Wu(n,$u.Infinity);return o=e<0&&!u?t.negPre+o+t.negSuf:t.posPre+o+t.posSuf,o}function hl(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],s=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],o=a[0],u=a[1]||"";n.posPre=o.substr(0,o.indexOf("#"));for(let c=0;c<u.length;c++){const e=u.charAt(c);"0"===e?n.minFrac=n.maxFrac=c+1:"#"===e?n.maxFrac=c+1:n.posSuf+=e}const l=o.split(",");if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const e=i.length-n.posPre.length-n.posSuf.length,t=s.indexOf("#");n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function dl(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class pl{}function fl(e,t,n,r){let i=`=${e}`;if(t.indexOf(i)>-1)return i;if(i=n.getPluralCategory(e,r),t.indexOf(i)>-1)return i;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${e}"`)}let ml=(()=>{class e extends pl{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return Wa(e)[Ga.PluralCase]}(t||this.locale)(e)){case Ou.Zero:return"zero";case Ou.One:return"one";case Ou.Two:return"two";case Ou.Few:return"few";case Ou.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(qe(Eo))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),gl=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ds(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${be(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(gs(Ca),gs(ka),gs(aa),gs(ca))},e.\u0275dir=gt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})(),yl=(()=>{class e{constructor(e){this._viewContainerRef=e,this._componentRef=null,this._moduleRef=null}ngOnChanges(e){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){const t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(e.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){const e=t.get(Ye);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(e.injector)}else this._moduleRef=null;const n=(this._moduleRef?this._moduleRef.componentFactoryResolver:t.get(sa)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(n,this._viewContainerRef.length,t,this.ngComponentOutletContent)}}ngOnDestroy(){this._moduleRef&&this._moduleRef.destroy()}}return e.\u0275fac=function(t){return new(t||e)(gs(Da))},e.\u0275dir=gt({type:e,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},features:[js]}),e})();class vl{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bl=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){tr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new vl(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new _l(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new _l(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(gs(Da),gs(Na),gs(Ca))},e.\u0275dir=gt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class _l{constructor(e,t){this.record=e,this.view=t}}let xl=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Sl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Sl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(gs(Da),gs(Na))},e.\u0275dir=gt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class wl{constructor(){this.$implicit=null,this.ngIf=null}}function Sl(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${be(t)}'.`)}class El{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Cl=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),kl=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new El(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(gs(Da),gs(Na),gs(Cl,1))},e.\u0275dir=gt({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),Tl=(()=>{class e{constructor(e,t,n){n._addDefault(new El(e,t))}}return e.\u0275fac=function(t){return new(t||e)(gs(Da),gs(Na),gs(Cl,1))},e.\u0275dir=gt({type:e,selectors:[["","ngSwitchDefault",""]]}),e})(),Al=(()=>{class e{constructor(e){this._localization=e,this._caseViews={}}set ngPlural(e){this._switchValue=e,this._updateView()}addCase(e,t){this._caseViews[e]=t}_updateView(){this._clearViews();const e=Object.keys(this._caseViews),t=fl(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])}_clearViews(){this._activeView&&this._activeView.destroy()}_activateView(e){e&&(this._activeView=e,this._activeView.create())}}return e.\u0275fac=function(t){return new(t||e)(gs(pl))},e.\u0275dir=gt({type:e,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"}}),e})(),Ml=(()=>{class e{constructor(e,t,n,r){this.value=e;const i=!isNaN(Number(e));r.addCase(i?`=${e}`:e,new El(n,t))}}return e.\u0275fac=function(t){return new(t||e)(ys("ngPluralCase"),gs(Na),gs(Da),gs(Al,1))},e.\u0275dir=gt({type:e,selectors:[["","ngPluralCase",""]]}),e})(),Nl=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(gs(aa),gs(ka),gs(ca))},e.\u0275dir=gt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),Il=(()=>{class e{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(e){const t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}_hasContextShapeChanged(e){const t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){for(let e of n)if(-1===t.indexOf(e))return!0;return!1}return!0}_updateExistingContext(e){for(let t of Object.keys(e))this._viewRef.context[t]=this.ngTemplateOutletContext[t]}}return e.\u0275fac=function(t){return new(t||e)(gs(Da))},e.\u0275dir=gt({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[js]}),e})();function Dl(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${be(e)}'`)}class Rl{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ll{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const Ol=new Ll,Fl=new Rl;let Pl=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):cs(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,hs.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Es(t))return Ol;if(Cs(t))return Fl;throw Dl(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(function(e=ae.Default){const t=$i(!0);if(null!=t||e&ae.Optional)return t;throw new Error("No provider for ChangeDetectorRef!")}())},e.\u0275pipe=yt({name:"async",type:e,pure:!1}),e})(),zl=(()=>{class e{transform(t){if(!t)return t;if("string"!=typeof t)throw Dl(e,t);return t.toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"lowercase",type:e,pure:!0}),e})();const $l=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let Bl=(()=>{class e{transform(t){if(!t)return t;if("string"!=typeof t)throw Dl(e,t);return t.replace($l,e=>e[0].toUpperCase()+e.substr(1).toLowerCase())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"titlecase",type:e,pure:!0}),e})(),Ul=(()=>{class e{transform(t){if(!t)return t;if("string"!=typeof t)throw Dl(e,t);return t.toUpperCase()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"uppercase",type:e,pure:!0}),e})(),Vl=(()=>{class e{constructor(e){this.locale=e}transform(t,n="mediumDate",r,i){if(null==t||""===t||t!=t)return null;try{return function(e,t,n,r){let i=function(e){if(ul(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){const[t,n,r]=e.split("-").map(e=>+e);return new Date(t,n-1,r)}let n;if(n=e.match(Ku))return function(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const a=Number(e[4]||0)-n,o=Number(e[5]||0)-r,u=Number(e[6]||0),l=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,a,o,u,l),t}(n)}const t=new Date(e);if(!ul(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=function e(t,n){const r=function(e){return Wa(e)[Ga.LocaleId]}(t);if(Xu[r]=Xu[r]||{},Xu[r][n])return Xu[r][n];let i="";switch(n){case"shortDate":i=Bu(t,zu.Short);break;case"mediumDate":i=Bu(t,zu.Medium);break;case"longDate":i=Bu(t,zu.Long);break;case"fullDate":i=Bu(t,zu.Full);break;case"shortTime":i=Uu(t,zu.Short);break;case"mediumTime":i=Uu(t,zu.Medium);break;case"longTime":i=Uu(t,zu.Long);break;case"fullTime":i=Uu(t,zu.Full);break;case"short":const n=e(t,"shortTime"),r=e(t,"shortDate");i=el(Vu(t,zu.Short),[n,r]);break;case"medium":const s=e(t,"mediumTime"),a=e(t,"mediumDate");i=el(Vu(t,zu.Medium),[s,a]);break;case"long":const o=e(t,"longTime"),u=e(t,"longDate");i=el(Vu(t,zu.Long),[o,u]);break;case"full":const l=e(t,"fullTime"),c=e(t,"fullDate");i=el(Vu(t,zu.Full),[l,c])}return i&&(Xu[r][n]=i),i}(n,t)||t;let s,a=[];for(;t;){if(s=Zu.exec(t),!s){a.push(t);break}{a=a.concat(s.slice(1));const e=a.pop();if(!e)break;t=e}}let o=i.getTimezoneOffset();r&&(o=ol(r,o),i=function(e,t,n){const r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(ol(t,r)-r))}(i,r));let u="";return a.forEach(e=>{const t=function(e){if(al[e])return al[e];let t;switch(e){case"G":case"GG":case"GGG":t=rl(Qu.Eras,Pu.Abbreviated);break;case"GGGG":t=rl(Qu.Eras,Pu.Wide);break;case"GGGGG":t=rl(Qu.Eras,Pu.Narrow);break;case"y":t=nl(Ju.FullYear,1,0,!1,!0);break;case"yy":t=nl(Ju.FullYear,2,0,!0,!0);break;case"yyy":t=nl(Ju.FullYear,3,0,!1,!0);break;case"yyyy":t=nl(Ju.FullYear,4,0,!1,!0);break;case"M":case"L":t=nl(Ju.Month,1,1);break;case"MM":case"LL":t=nl(Ju.Month,2,1);break;case"MMM":t=rl(Qu.Months,Pu.Abbreviated);break;case"MMMM":t=rl(Qu.Months,Pu.Wide);break;case"MMMMM":t=rl(Qu.Months,Pu.Narrow);break;case"LLL":t=rl(Qu.Months,Pu.Abbreviated,Fu.Standalone);break;case"LLLL":t=rl(Qu.Months,Pu.Wide,Fu.Standalone);break;case"LLLLL":t=rl(Qu.Months,Pu.Narrow,Fu.Standalone);break;case"w":t=sl(1);break;case"ww":t=sl(2);break;case"W":t=sl(1,!0);break;case"d":t=nl(Ju.Date,1);break;case"dd":t=nl(Ju.Date,2);break;case"E":case"EE":case"EEE":t=rl(Qu.Days,Pu.Abbreviated);break;case"EEEE":t=rl(Qu.Days,Pu.Wide);break;case"EEEEE":t=rl(Qu.Days,Pu.Narrow);break;case"EEEEEE":t=rl(Qu.Days,Pu.Short);break;case"a":case"aa":case"aaa":t=rl(Qu.DayPeriods,Pu.Abbreviated);break;case"aaaa":t=rl(Qu.DayPeriods,Pu.Wide);break;case"aaaaa":t=rl(Qu.DayPeriods,Pu.Narrow);break;case"b":case"bb":case"bbb":t=rl(Qu.DayPeriods,Pu.Abbreviated,Fu.Standalone,!0);break;case"bbbb":t=rl(Qu.DayPeriods,Pu.Wide,Fu.Standalone,!0);break;case"bbbbb":t=rl(Qu.DayPeriods,Pu.Narrow,Fu.Standalone,!0);break;case"B":case"BB":case"BBB":t=rl(Qu.DayPeriods,Pu.Abbreviated,Fu.Format,!0);break;case"BBBB":t=rl(Qu.DayPeriods,Pu.Wide,Fu.Format,!0);break;case"BBBBB":t=rl(Qu.DayPeriods,Pu.Narrow,Fu.Format,!0);break;case"h":t=nl(Ju.Hours,1,-12);break;case"hh":t=nl(Ju.Hours,2,-12);break;case"H":t=nl(Ju.Hours,1);break;case"HH":t=nl(Ju.Hours,2);break;case"m":t=nl(Ju.Minutes,1);break;case"mm":t=nl(Ju.Minutes,2);break;case"s":t=nl(Ju.Seconds,1);break;case"ss":t=nl(Ju.Seconds,2);break;case"S":t=nl(Ju.FractionalSeconds,1);break;case"SS":t=nl(Ju.FractionalSeconds,2);break;case"SSS":t=nl(Ju.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=il(Yu.Short);break;case"ZZZZZ":t=il(Yu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=il(Yu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=il(Yu.Long);break;default:return null}return al[e]=t,t}(e);u+=t?t(i,n,o):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}(t,n,i||this.locale,r)}catch(s){throw Dl(e,s.message)}}}return e.\u0275fac=function(t){return new(t||e)(gs(Eo))},e.\u0275pipe=yt({name:"date",type:e,pure:!0}),e})();const Wl=/#/g;let Hl=(()=>{class e{constructor(e){this._localization=e}transform(t,n,r){if(null==t)return"";if("object"!=typeof n||null===n)throw Dl(e,n);return n[fl(t,Object.keys(n),this._localization,r)].replace(Wl,t.toString())}}return e.\u0275fac=function(t){return new(t||e)(gs(pl))},e.\u0275pipe=yt({name:"i18nPlural",type:e,pure:!0}),e})(),Gl=(()=>{class e{transform(t,n){if(null==t)return"";if("object"!=typeof n||"string"!=typeof t)throw Dl(e,n);return n.hasOwnProperty(t)?n[t]:n.hasOwnProperty("other")?n.other:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"i18nSelect",type:e,pure:!0}),e})(),jl=(()=>{class e{transform(e){return JSON.stringify(e,null,2)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"json",type:e,pure:!1}),e})(),ql=(()=>{class e{constructor(e){this.differs=e,this.keyValues=[]}transform(e,t=Kl){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const n=this.differ.diff(e);return n&&(this.keyValues=[],n.forEachItem(e=>{this.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(t)),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(gs(ka))},e.\u0275pipe=yt({name:"keyvalue",type:e,pure:!1}),e})();function Kl(e,t){const n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),s=String(r);return i==s?0:i<s?-1:1}let Xl=(()=>{class e{constructor(e){this._locale=e}transform(t,n,r){if(Jl(t))return null;r=r||this._locale;try{return function(e,t,n){return cl(e,hl(Hu(t,Lu.Decimal),Wu(t,$u.MinusSign)),t,$u.Group,$u.Decimal,n)}(Ql(t),r,n)}catch(i){throw Dl(e,i.message)}}}return e.\u0275fac=function(t){return new(t||e)(gs(Eo))},e.\u0275pipe=yt({name:"number",type:e,pure:!0}),e})(),Zl=(()=>{class e{constructor(e){this._locale=e}transform(t,n,r){if(Jl(t))return null;r=r||this._locale;try{return function(e,t,n){return cl(e,hl(Hu(t,Lu.Percent),Wu(t,$u.MinusSign)),t,$u.Group,$u.Decimal,n,!0).replace(new RegExp("%","g"),Wu(t,$u.PercentSign))}(Ql(t),r,n)}catch(i){throw Dl(e,i.message)}}}return e.\u0275fac=function(t){return new(t||e)(gs(Eo))},e.\u0275pipe=yt({name:"percent",type:e,pure:!0}),e})(),Yl=(()=>{class e{constructor(e,t="USD"){this._locale=e,this._defaultCurrencyCode=t}transform(t,n,r="symbol",i,s){if(Jl(t))return null;s=s||this._locale,"boolean"==typeof r&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),r=r?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?function(e,t,n="en"){const r=function(e){return Wa(e)[Ga.Currencies]}(n)[e]||Ru[e]||[],i=r[1];return"narrow"===t&&"string"==typeof i?i:r[0]||e}(a,"symbol"===r?"wide":"narrow",s):r);try{return function(e,t,n,r,i){const s=hl(Hu(t,Lu.Currency),Wu(t,$u.MinusSign));return s.minFrac=function(e){let t;const n=Ru[e];return n&&(t=n[2]),"number"==typeof t?t:2}(r),s.maxFrac=s.minFrac,cl(e,s,t,$u.CurrencyGroup,$u.CurrencyDecimal,i).replace("\xa4",n).replace("\xa4","").trim()}(Ql(t),s,a,n,i)}catch(o){throw Dl(e,o.message)}}}return e.\u0275fac=function(t){return new(t||e)(gs(Eo),gs(Co))},e.\u0275pipe=yt({name:"currency",type:e,pure:!0}),e})();function Jl(e){return null==e||""===e||e!=e}function Ql(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}let ec=(()=>{class e{transform(t,n,r){if(null==t)return t;if(!this.supports(t))throw Dl(e,t);return t.slice(n,r)}supports(e){return"string"==typeof e||Array.isArray(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=yt({name:"slice",type:e,pure:!1}),e})(),tc=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)},providers:[{provide:pl,useClass:ml}]}),e})(),nc=(()=>{class e{}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new rc(qe(mu),window,qe(Zn))}),e})();class rc{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}class ic extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new ic,pu||(pu=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=ac||(ac=document.querySelector("base"),ac)?ac.getAttribute("href"):null;return null==t?null:(n=t,sc||(sc=document.createElement("a")),sc.setAttribute("href",n),"/"===sc.pathname.charAt(0)?sc.pathname:"/"+sc.pathname);var n}resetBaseElement(){ac=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let sc,ac=null;const oc=new Pe("TRANSITION_ID"),uc=[{provide:mo,useFactory:function(e,t,n){return()=>{n.get(go).donePromise.then(()=>{const n=fu();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[oc,mu,ns],multi:!0}];class lc{static init(){var e;e=new lc,Xo=e}addToWindow(e){Me.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Me.getAllAngularTestabilities=()=>e.getAllTestabilities(),Me.getAllAngularRootElements=()=>e.getAllRootElements(),Me.frameworkStabilizers||(Me.frameworkStabilizers=[]),Me.frameworkStabilizers.push(e=>{const t=Me.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?fu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const cc=new Pe("EventManagerPlugins");let hc=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(qe(cc),qe(Po))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class dc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=fu().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let pc=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),fc=(()=>{class e extends pc{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>fu().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(qe(mu))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const mc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gc=/%COMP%/g;function yc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?yc(e,i,n):(i=i.replace(gc,e),n.push(i))}return n}function vc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let bc=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new _c(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case at.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new xc(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case at.Native:case at.ShadowDom:return new wc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=yc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(qe(hc),qe(fc),qe(yo))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class _c{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(mc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=mc[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=mc[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&la.DashCase?e.style.setProperty(t,n,r&la.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&la.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vc(n)):this.eventManager.addEventListener(e,t,vc(n))}}class xc extends _c{constructor(e,t,n,r){super(e),this.component=n;const i=yc(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(gc,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(gc,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class wc extends _c{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===at.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=yc(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sc=(()=>{class e extends dc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(qe(mu))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const Ec=["alt","control","meta","shift"],Cc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Tc={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ac=(()=>{class e extends dc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),s=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fu().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(Ec.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const a={};return a.domEventName=r,a.fullKey=s,a}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&kc.hasOwnProperty(t)&&(t=kc[t]))}return Cc[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ec.forEach(r=>{r!=n&&(0,Tc[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(qe(mu))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const Mc=Qo(cu,"browser",[{provide:xo,useValue:"browser"},{provide:_o,useValue:function(){ic.makeCurrent(),lc.init()},multi:!0},{provide:mu,useFactory:function(){return function(e){At=e}(document),document},deps:[]}]),Nc=[[],{provide:Vi,useValue:"root"},{provide:Zn,useFactory:function(){return new Zn},deps:[]},{provide:cc,useClass:Sc,multi:!0,deps:[mu,Po,xo]},{provide:cc,useClass:Ac,multi:!0,deps:[mu]},[],{provide:bc,useClass:bc,deps:[hc,fc,yo]},{provide:ua,useExisting:bc},{provide:pc,useExisting:fc},{provide:fc,useClass:fc,deps:[mu]},{provide:Go,useClass:Go,deps:[Po]},{provide:hc,useClass:hc,deps:[cc,Po]},[]];let Ic=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:yo,useValue:t.appId},{provide:oc,useExisting:yo},uc]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)(qe(e,12))},providers:Nc,imports:[tc,du]}),e})();function Dc(e,t){return new _(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,a=0;for(let o=0;o<r;o++){const u=U(e[o]);let l=!1;n.add(u.subscribe({next:e=>{l||(l=!0,a++),i[o]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&l||(a===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}"undefined"!=typeof window&&window;const Rc=new Pe("NgValueAccessor"),Lc={provide:Rc,useExisting:we(()=>Oc),multi:!0};let Oc=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&ks("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[na([Lc])]}),e})();const Fc={provide:Rc,useExisting:we(()=>zc),multi:!0},Pc=new Pe("CompositionEventMode");let zc=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=fu()?fu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa),gs(Pc,8))},e.\u0275dir=gt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&ks("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[na([Fc])]}),e})(),$c=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e}),e})(),Bc=(()=>{class e extends $c{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Uc(t||e)},e.\u0275dir=gt({type:e,features:[Bs]}),e})();const Uc=jn(Bc);function Vc(){throw new Error("unimplemented")}class Wc extends $c{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Vc()}get asyncValidator(){return Vc()}}class Hc{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Gc=(()=>{class e extends Hc{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(gs(Wc,2))},e.\u0275dir=gt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Ds("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Bs]}),e})(),jc=(()=>{class e extends Hc{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,2))},e.\u0275dir=gt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Ds("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Bs]}),e})();function qc(e){return null==e||0===e.length}const Kc=new Pe("NgValidators"),Xc=new Pe("NgAsyncValidators"),Zc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Yc{static min(e){return t=>{if(qc(t.value)||qc(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(qc(t.value)||qc(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return qc(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return qc(e.value)?null:Zc.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(qc(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Yc.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(qc(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Jc);return 0==t.length?null:function(e){return eh(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Jc);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(u(t))return Dc(t,null);if(l(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Dc(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Dc(e=1===e.length&&u(e[0])?e[0]:e,null).pipe(P(e=>t(...e)))}return Dc(e,null)}(function(e,t){return t.map(t=>t(e))}(e,t).map(Qc)).pipe(P(eh))}}}function Jc(e){return null!=e}function Qc(e){const t=Es(e)?U(e):e;if(!Cs(t))throw new Error("Expected validator to return Promise or Observable.");return t}function eh(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function th(e){return e.validate?t=>e.validate(t):e}function nh(e){return e.validate?t=>e.validate(t):e}const rh={provide:Rc,useExisting:we(()=>ih),multi:!0};let ih=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&ks("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[na([rh])]}),e})();const sh={provide:Rc,useExisting:we(()=>oh),multi:!0};let ah=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),oh=(()=>{class e{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Wc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa),gs(ah),gs(ns))},e.\u0275dir=gt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&ks("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[na([sh])]}),e})();const uh={provide:Rc,useExisting:we(()=>lh),multi:!0};let lh=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&ks("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[na([uh])]}),e})();const ch='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',hh='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',dh='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class ph{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${ch}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${hh}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${dh}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${ch}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${hh}`)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const fh={provide:Rc,useExisting:we(()=>gh),multi:!0};function mh(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let gh=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=cs}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=mh(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&ks("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[na([fh])]}),e})(),yh=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(mh(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(gs(aa),gs(ca),gs(gh,9))},e.\u0275dir=gt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const vh={provide:Rc,useExisting:we(()=>_h),multi:!0};function bh(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let _h=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=cs}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&ks("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[na([vh])]}),e})(),xh=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(bh(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(bh(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(gs(aa),gs(ca),gs(_h,9))},e.\u0275dir=gt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function wh(e,t){return[...t.path,e]}function Sh(e,t){e||Th(t,"Cannot find control with"),t.valueAccessor||Th(t,"No value accessor for form control with"),e.validator=Yc.compose([e.validator,t.validator]),e.asyncValidator=Yc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Eh(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Eh(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Eh(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Ch(e,t){null==e&&Th(t,"Cannot find control with"),e.validator=Yc.compose([e.validator,t.validator]),e.asyncValidator=Yc.composeAsync([e.asyncValidator,t.asyncValidator])}function kh(e){return Th(e,"There is no FormControl instance attached to form control element with")}function Th(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Ah(e){return null!=e?Yc.compose(e.map(th)):null}function Mh(e){return null!=e?Yc.composeAsync(e.map(nh)):null}function Nh(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!cs(t,n.currentValue)}const Ih=[Oc,lh,ih,gh,_h,oh];function Dh(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Rh(e,t){if(!t)return null;Array.isArray(t)||Th(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return t.forEach(t=>{var s;t.constructor===zc?n=t:(s=t,Ih.some(e=>s.constructor===e)?(r&&Th(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Th(e,"More than one custom value accessor matches form control with"),i=t))}),i||r||n||(Th(e,"No valid value accessor for form control with"),null)}function Lh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Oh(e,t,n,r){tr()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(ph.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}function Fh(e){const t=zh(e)?e.validators:e;return Array.isArray(t)?Ah(t):t||null}function Ph(e,t){const n=zh(t)?t.asyncValidators:e;return Array.isArray(n)?Mh(n):n||null}function zh(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class $h{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Fh(e)}setAsyncValidators(e){this.asyncValidator=Ph(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const t=Qc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof Uh?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Vh&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ya,this.statusChanges=new Ya}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Bh extends $h{constructor(e=null,t,n){super(Fh(t),Ph(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Uh extends $h{constructor(e,t,n){super(Fh(t),Ph(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Bh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Vh extends $h{constructor(e,t,n){super(Fh(t),Ph(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Bh?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Wh={provide:Bc,useExisting:we(()=>Gh)},Hh=(()=>Promise.resolve(null))();let Gh=(()=>{class e extends Bc{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ya,this.form=new Uh({},Ah(e),Mh(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Hh.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Sh(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Hh.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Lh(this._directives,e)})}addFormGroup(e){Hh.then(()=>{const t=this._findContainer(e.path),n=new Uh({});Ch(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Hh.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Hh.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Dh(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(gs(Kc,10),gs(Xc,10))},e.\u0275dir=gt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&ks("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[na([Wh]),Bs]}),e})(),jh=(()=>{class e extends Bc{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return wh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ah(this._validators)}get asyncValidator(){return Mh(this._asyncValidators)}_checkParentType(){}}return e.\u0275fac=function(t){return qh(t||e)},e.\u0275dir=gt({type:e,features:[Bs]}),e})();const qh=jn(jh);class Kh{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${ch}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${hh}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${dh}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${hh}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${dh}`)}}const Xh={provide:Bc,useExisting:we(()=>Zh)};let Zh=(()=>{class e extends jh{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof e||this._parent instanceof Gh||Kh.modelGroupParentException()}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,5),gs(Kc,10),gs(Xc,10))},e.\u0275dir=gt({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[na([Xh]),Bs]}),e})();const Yh={provide:Wc,useExisting:we(()=>Qh)},Jh=(()=>Promise.resolve(null))();let Qh=(()=>{class e extends Wc{constructor(e,t,n,r){super(),this.control=new Bh,this._registered=!1,this.update=new Ya,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=Rh(this,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Nh(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?wh(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ah(this._rawValidators)}get asyncValidator(){return Mh(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Zh)&&this._parent instanceof jh?Kh.formGroupNameException():this._parent instanceof Zh||this._parent instanceof Gh||Kh.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Kh.missingNameException()}_updateValue(e){Jh.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;Jh.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,9),gs(Kc,10),gs(Xc,10),gs(Rc,10))},e.\u0275dir=gt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[na([Yh]),Bs,js]}),e})(),ed=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const td=new Pe("NgModelWithFormControlWarning"),nd={provide:Wc,useExisting:we(()=>rd)};let rd=(()=>{class e extends Wc{constructor(e,t,n,r){super(),this._ngModelWarningConfig=r,this.update=new Ya,this._ngModelWarningSent=!1,this._rawValidators=e||[],this._rawAsyncValidators=t||[],this.valueAccessor=Rh(this,n)}set isDisabled(e){ph.disabledAttrWarning()}ngOnChanges(t){this._isControlChanged(t)&&(Sh(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Nh(t,this.viewModel)&&(Oh("formControl",e,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return Ah(this._rawValidators)}get asyncValidator(){return Mh(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return e.\u0275fac=function(t){return new(t||e)(gs(Kc,10),gs(Xc,10),gs(Rc,10),gs(td,8))},e.\u0275dir=gt({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[na([nd]),Bs,js]}),e._ngModelWarningSentOnce=!1,e})();const id={provide:Bc,useExisting:we(()=>sd)};let sd=(()=>{class e extends Bc{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Ya}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Sh(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Lh(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);Ch(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);Ch(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Dh(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>kh(t)),t.valueAccessor.registerOnTouched(()=>kh(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&Sh(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=Ah(this._validators);this.form.validator=Yc.compose([this.form.validator,e]);const t=Mh(this._asyncValidators);this.form.asyncValidator=Yc.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||ph.missingFormException()}}return e.\u0275fac=function(t){return new(t||e)(gs(Kc,10),gs(Xc,10))},e.\u0275dir=gt({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&ks("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[na([id]),Bs,js]}),e})();const ad={provide:Bc,useExisting:we(()=>od)};let od=(()=>{class e extends jh{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){cd(this._parent)&&ph.groupParentException()}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,13),gs(Kc,10),gs(Xc,10))},e.\u0275dir=gt({type:e,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[na([ad]),Bs]}),e})();const ud={provide:Bc,useExisting:we(()=>ld)};let ld=(()=>{class e extends Bc{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return wh(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return Ah(this._validators)}get asyncValidator(){return Mh(this._asyncValidators)}_checkParentType(){cd(this._parent)&&ph.arrayParentException()}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,13),gs(Kc,10),gs(Xc,10))},e.\u0275dir=gt({type:e,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[na([ud]),Bs]}),e})();function cd(e){return!(e instanceof od||e instanceof sd||e instanceof ld)}const hd={provide:Wc,useExisting:we(()=>dd)};let dd=(()=>{class e extends Wc{constructor(e,t,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Ya,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=Rh(this,r)}set isDisabled(e){ph.disabledAttrWarning()}ngOnChanges(t){this._added||this._setUpControl(),Nh(t,this.viewModel)&&(Oh("formControlName",e,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return wh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ah(this._rawValidators)}get asyncValidator(){return Mh(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof od)&&this._parent instanceof jh?ph.ngModelGroupException():this._parent instanceof od||this._parent instanceof sd||this._parent instanceof ld||ph.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(gs(Bc,13),gs(Kc,10),gs(Xc,10),gs(Rc,10),gs(td,8))},e.\u0275dir=gt({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[na([hd]),Bs,js]}),e._ngModelWarningSentOnce=!1,e})();const pd={provide:Kc,useExisting:we(()=>md),multi:!0},fd={provide:Kc,useExisting:we(()=>gd),multi:!0};let md=(()=>{class e{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!==`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?Yc.required(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&ms("required",t.required?"":null)},inputs:{required:"required"},features:[na([pd])]}),e})(),gd=(()=>{class e extends md{validate(e){return this.required?Yc.requiredTrue(e):null}}return e.\u0275fac=function(t){return yd(t||e)},e.\u0275dir=gt({type:e,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ms("required",t.required?"":null)},features:[na([fd]),Bs]}),e})();const yd=jn(gd),vd={provide:Kc,useExisting:we(()=>bd),multi:!0};let bd=(()=>{class e{set email(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()}validate(e){return this._enabled?Yc.email(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[na([vd])]}),e})();const _d={provide:Kc,useExisting:we(()=>xd),multi:!0};let xd=(()=>{class e{ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null==this.minlength?null:this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Yc.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ms("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[na([_d]),js]}),e})();const wd={provide:Kc,useExisting:we(()=>Sd),multi:!0};let Sd=(()=>{class e{ngOnChanges(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null!=this.maxlength?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Yc.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ms("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[na([wd]),js]}),e})();const Ed={provide:Kc,useExisting:we(()=>Cd),multi:!0};let Cd=(()=>{class e{ngOnChanges(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Yc.pattern(this.pattern)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=gt({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ms("pattern",t.pattern?t.pattern:null)},inputs:{pattern:"pattern"},features:[na([Ed]),js]}),e})(),kd=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)}}),e})(),Td=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r=null,i=null,s=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,s=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null)),new Uh(n,{asyncValidators:i,updateOn:s,validators:r})}control(e,t,n){return new Bh(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new Vh(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Bh||e instanceof Uh||e instanceof Vh?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Ad=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)},providers:[ah],imports:[kd]}),e})(),Md=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:td,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)},providers:[Td,ah],imports:[kd]}),e})();function Nd(...e){let t=e[e.length-1];return T(t)?(e.pop(),B(e,t)):j(e)}class Id extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(e){super.next(this._value=e)}}const Dd=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),Rd={};class Ld{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Od(e,this.resultSelector))}}class Od extends F{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Rd),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(O(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const s=this.values,a=this.toRespond?s[n]===Rd?--this.toRespond:this.toRespond:0;s[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Fd=new _(e=>e.complete());function Pd(e){return e?function(e){return new _(t=>e.schedule(()=>t.complete()))}(e):Fd}function zd(e){return new _(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?U(n):Pd()).subscribe(t)})}function $d(){return G(1)}function Bd(e,t){return function(n){return n.lift(new Ud(e,t))}}class Ud{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Vd(e,this.predicate,this.thisArg))}}class Vd extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const Wd=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Hd(e){return function(t){return 0===e?Pd():t.lift(new Gd(e))}}class Gd{constructor(e){if(this.total=e,this.total<0)throw new Wd}call(e,t){return t.subscribe(new jd(e,this.total))}}class jd extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function qd(e=Zd){return t=>t.lift(new Kd(e))}class Kd{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Xd(e,this.errorFactory))}}class Xd extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Zd(){return new Dd}function Yd(e=null){return t=>t.lift(new Jd(e))}class Jd{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Qd(e,this.defaultValue))}}class Qd extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ep(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Bd((t,n)=>e(t,n,r)):y,Hd(1),n?Yd(t):qd(()=>new Dd))}function tp(e){return function(t){const n=new np(e),r=t.lift(n);return n.caught=r}}class np{constructor(e){this.selector=e}call(e,t){return t.subscribe(new rp(e,this.selector,this.caught))}}class rp extends F{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new A(this,void 0,void 0);this.add(r);const i=O(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function ip(e){return t=>0===e?Pd():t.lift(new sp(e))}class sp{constructor(e){if(this.total=e,this.total<0)throw new Wd}call(e,t){return t.subscribe(new ap(e,this.total))}}class ap extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function op(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Bd((t,n)=>e(t,n,r)):y,ip(1),n?Yd(t):qd(()=>new Dd))}class up{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new lp(e,this.predicate,this.thisArg,this.source))}}class lp extends f{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function cp(e,t){return"function"==typeof t?n=>n.pipe(cp((n,r)=>U(e(n,r)).pipe(P((e,i)=>t(n,e,r,i))))):t=>t.lift(new hp(e))}class hp{constructor(e){this.project=e}call(e,t){return t.subscribe(new dp(e,this.project))}}class dp extends F{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new A(this,t,n),s=this.destination;s.add(i),this.innerSubscription=O(this,e,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}function pp(...e){return $d()(Nd(...e))}function fp(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new mp(e,t,n))}}class mp{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new gp(e,this.accumulator,this.seed,this.hasSeed))}}class gp extends f{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function yp(e,t){return V(e,t,1)}function vp(){}function bp(e,t,n){return function(r){return r.lift(new _p(e,t,n))}}class _p{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new xp(e,this.nextOrObserver,this.error,this.complete))}}class xp extends f{constructor(e,t,n,i){super(e),this._tapNext=vp,this._tapError=vp,this._tapComplete=vp,this._tapError=n||vp,this._tapComplete=i||vp,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||vp,this._tapError=t.error||vp,this._tapComplete=t.complete||vp)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class wp{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Sp(e,this.callback))}}class Sp extends f{constructor(e,t){super(e),this.add(new h(t))}}class Ep{constructor(e,t){this.id=e,this.url=t}}class Cp extends Ep{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kp extends Ep{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tp extends Ep{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ap extends Ep{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mp extends Ep{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Np extends Ep{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ip extends Ep{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dp extends Ep{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rp extends Ep{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lp{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Op{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fp{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pp{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zp{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $p{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bp{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Up=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Ss(0,"router-outlet")},directives:function(){return[qm]},encapsulation:2}),e})();class Vp{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wp(e){return new Vp(e)}function Hp(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Gp(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class jp{constructor(e,t){this.routes=e,this.module=t}}function qp(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Kp(r,Xp(t,r))}}function Kp(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&qp(e.children,t)}function Xp(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Zp(e){const t=e.children&&e.children.map(Zp),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Up),n}function Yp(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Jp(e[i],t[i]))return!1;return!0}function Jp(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every(e=>t.indexOf(e)>-1):e===t}function Qp(e){return Array.prototype.concat.apply([],e)}function ef(e){return e.length>0?e[e.length-1]:null}function tf(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function nf(e){return Cs(e)?e:Es(e)?U(Promise.resolve(e)):Nd(e)}function rf(e,t,n){return n?function(e,t){return Yp(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!uf(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Jp(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!uf(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!uf(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!uf(n.segments,e)&&!!n.children.primary&&t(n.children.primary,r,s)}}(t,n,n.segments)}(e.root,t.root)}class sf{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wp(this.queryParams)),this._queryParamMap}toString(){return df.serialize(this)}}class af{constructor(e,t){this.segments=e,this.children=t,this.parent=null,tf(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pf(this)}}class of{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wp(this.parameters)),this._parameterMap}toString(){return bf(this)}}function uf(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function lf(e,t){let n=[];return tf(e.children,(e,r)=>{"primary"===r&&(n=n.concat(t(e,r)))}),tf(e.children,(e,r)=>{"primary"!==r&&(n=n.concat(t(e,r)))}),n}class cf{}class hf{parse(e){const t=new Ef(e);return new sf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return pf(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",r=[];return tf(t.children,(t,n)=>{"primary"!==n&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=lf(t,(n,r)=>"primary"===r?[e(t.children.primary,!1)]:[`${r}:${e(n,!1)}`]);return`${pf(t)}/(${n.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${mf(t)}=${mf(e)}`).join("&"):`${mf(t)}=${mf(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const df=new hf;function pf(e){return e.segments.map(e=>bf(e)).join("/")}function ff(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mf(e){return ff(e).replace(/%3B/gi,";")}function gf(e){return ff(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yf(e){return decodeURIComponent(e)}function vf(e){return yf(e.replace(/\+/g,"%20"))}function bf(e){return`${gf(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${gf(e)}=${gf(t[e])}`).join("")}`;var t}const _f=/^[^\/()?;=#]+/;function xf(e){const t=e.match(_f);return t?t[0]:""}const wf=/^[^=?&#]+/,Sf=/^[^?&#]+/;class Ef{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new af([],{}):new af([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new af(e,t)),n}parseSegment(){const e=xf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new of(yf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=xf(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=xf(this.remaining);e&&(n=e,this.capture(n))}e[yf(t)]=yf(n)}parseQueryParam(e){const t=function(e){const t=e.match(wf);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Sf);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=vf(t),i=vf(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=xf(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new af([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Cf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kf(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=kf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Tf(e,this._root).map(e=>e.value)}}function kf(e,t){if(e===t.value)return t;for(const n of t.children){const t=kf(e,n);if(t)return t}return null}function Tf(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Tf(e,n);if(r.length)return r.unshift(t),r}return[]}class Af{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mf(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Nf extends Cf{constructor(e,t){super(e),this.snapshot=t,Ff(this,e)}toString(){return this.snapshot.toString()}}function If(e,t){const n=function(e,t){const n=new Lf([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Of("",new Af(n,[]))}(e,t),r=new Id([new of("",{})]),i=new Id({}),s=new Id({}),a=new Id({}),o=new Id(""),u=new Df(r,i,a,o,s,"primary",t,n.root);return u.snapshot=n.root,new Nf(new Af(u,[]),n)}class Df{constructor(e,t,n,r,i,s,a,o){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=a,this._futureSnapshot=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(P(e=>Wp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(P(e=>Wp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rf(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Lf{constructor(e,t,n,r,i,s,a,o,u,l,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=a,this.routeConfig=o,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Of extends Cf{constructor(e,t){super(t),this.url=e,Ff(this,t)}toString(){return Pf(this._root)}}function Ff(e,t){t.value._routerState=e,t.children.forEach(t=>Ff(e,t))}function Pf(e){const t=e.children.length>0?` { ${e.children.map(Pf).join(", ")} } `:"";return`${e.value}${t}`}function zf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Yp(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Yp(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Yp(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Yp(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function $f(e,t){var n,r;return Yp(e.params,t.params)&&uf(n=e.url,r=t.url)&&n.every((e,t)=>Yp(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||$f(e.parent,t.parent))}function Bf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Uf(e,t,n,r,i){let s={};return r&&tf(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new sf(n.root===e?t:function e(t,n,r){const i={};return tf(t.children,(t,s)=>{i[s]=t===n?r:e(t,n,r)}),new af(t.segments,i)}(n.root,e,t),s,i)}class Vf{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Bf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==ef(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wf{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Hf(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:`${e}`}function Gf(e,t,n){if(e||(e=new af([],{})),0===e.segments.length&&e.hasChildren())return jf(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],a=Hf(n[r]),o=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&o&&"object"==typeof o&&void 0===o.outlets){if(!Zf(a,o,t))return s;r+=2}else{if(!Zf(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new af(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new af(e.segments.slice(r.pathIndex),e.children),jf(t,0,i)}return r.match&&0===i.length?new af(e.segments,{}):r.match&&!e.hasChildren()?qf(e,t,n):r.match?jf(e,0,i):qf(e,t,n)}function jf(e,t,n){if(0===n.length)return new af(e.segments,{});{const r=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return tf(r,(n,r)=>{null!==n&&(i[r]=Gf(e.children[r],t,n))}),tf(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new af(e.segments,i)}}function qf(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const e=Kf(n[i].outlets);return new af(r,e)}if(0===i&&Bf(n[0])){r.push(new of(e.segments[t].path,n[0])),i++;continue}const s=Hf(n[i]),a=i<n.length-1?n[i+1]:null;s&&a&&Bf(a)?(r.push(new of(s,Xf(a))),i+=2):(r.push(new of(s,{})),i++)}return new af(r,{})}function Kf(e){const t={};return tf(e,(e,n)=>{null!==e&&(t[n]=qf(new af([],{}),0,e))}),t}function Xf(e){const t={};return tf(e,(e,n)=>t[n]=`${e}`),t}function Zf(e,t,n){return e==n.path&&Yp(t,n.parameters)}class Yf{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),zf(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Mf(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),tf(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Mf(e),i=e.value.component?n.children:t;tf(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Mf(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new $p(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Pp(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(zf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Jf(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Jf(e){zf(e.value),e.children.forEach(Jf)}function Qf(e){return"function"==typeof e}function em(e){return e instanceof sf}class tm{constructor(e){this.segmentGroup=e||null}}class nm{constructor(e){this.urlTree=e}}function rm(e){return new _(t=>t.error(new tm(e)))}function im(e){return new _(t=>t.error(new nm(e)))}function sm(e){return new _(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class am{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Ye)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(P(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(tp(e=>{if(e instanceof nm)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof tm)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(P(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(tp(e=>{if(e instanceof tm)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new af([],{primary:e}):e;return new sf(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(P(e=>new af([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Nd({});const n=[],r=[],i={};return tf(e,(e,s)=>{const a=t(s,e).pipe(P(e=>i[s]=e));"primary"===s?n.push(a):r.push(a)}),Nd.apply(null,n.concat(r)).pipe($d(),ep(),P(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,s){return Nd(...n).pipe(P(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,i,s).pipe(tp(e=>{if(e instanceof tm)return Nd(null);throw e}))),$d(),op(e=>!!e),tp((e,n)=>{if(e instanceof Dd||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Nd(new af([],{}));throw new tm(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,s,a){return cm(r)!==s?rm(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):rm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?im(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new af(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:a,consumedSegments:o,lastChild:u,positionalParamSegments:l}=om(t,r,i);if(!a)return rm(t);const c=this.applyRedirectCommands(o,r.redirectTo,l);return r.redirectTo.startsWith("/")?im(c):this.lineralizeSegments(r,c).pipe(V(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(P(e=>(n._loadedConfig=e,new af(r,{})))):Nd(new af(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=om(t,n,r);if(!i)return rm(t);const o=r.slice(a);return this.getChildConfig(e,n,r).pipe(V(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:a}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>lm(e,t,n)&&"primary"!==cm(n))}(e,n,r)?{segmentGroup:um(new af(t,function(e,t){const n={};n.primary=t;for(const r of e)""===r.path&&"primary"!==cm(r)&&(n[cm(r)]=new af([],{}));return n}(r,new af(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>lm(e,t,n))}(e,n,r)?{segmentGroup:um(new af(e.segments,function(e,t,n,r){const i={};for(const s of n)lm(e,t,s)&&!r[cm(s)]&&(i[cm(s)]=new af([],{}));return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,o,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(P(e=>new af(s,e))):0===r.length&&0===a.length?Nd(new af(s,{})):this.expandSegment(n,i,r,a,"primary",!0).pipe(P(e=>new af(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Nd(new jp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Nd(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?U(r).pipe(P(r=>{const i=e.get(r);let s;if(function(e){return e&&Qf(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!Qf(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return nf(s)})).pipe($d(),(i=e=>!0===e,e=>e.lift(new up(i,void 0,e)))):Nd(!0);var i}(e.injector,t,n).pipe(V(n=>n?this.configLoader.load(e.injector,t).pipe(P(e=>(t._loadedConfig=e,e))):function(e){return new _(t=>t.error(Hp(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Nd(new jp([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Nd(n);if(r.numberOfChildren>1||!r.children.primary)return sm(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new sf(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return tf(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return tf(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new af(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function om(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||Gp)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function um(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new af(e.segments.concat(t.segments),t.children)}return e}function lm(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function cm(e){return e.outlet||"primary"}class hm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dm{constructor(e,t){this.component=e,this.route=t}}function pm(e,t,n){const r=e._root;return function e(t,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const a=Mf(n);return t.children.forEach(t=>{!function(t,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!uf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!uf(e.url,t.url)||!Yp(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$f(e,t)||!Yp(e.queryParams,t.queryParams);case"paramsChange":default:return!$f(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new hm(i)):(a.data=o.data,a._resolvedData=o._resolvedData),e(t,n,a.component?u?u.children:null:r,i,s),l&&s.canDeactivateChecks.push(new dm(u&&u.outlet&&u.outlet.component||null,o))}else o&&mm(n,u,s),s.canActivateChecks.push(new hm(i)),e(t,null,a.component?u?u.children:null:r,i,s)}(t,a[t.value.outlet],r,i.concat([t.value]),s),delete a[t.value.outlet]}),tf(a,(e,t)=>mm(e,r.getContext(t),s)),s}(r,t?t._root:null,n,[r.value])}function fm(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function mm(e,t,n){const r=Mf(e),i=e.value;tf(r,(e,r)=>{mm(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new dm(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const gm=Symbol("INITIAL_VALUE");function ym(){return cp(e=>function(...e){let t=null,n=null;return T(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),j(e,n).lift(new Ld(t))}(...e.map(e=>e.pipe(ip(1),function(...e){const t=e[e.length-1];return T(t)?(e.pop(),n=>pp(e,n,t)):t=>pp(e,t)}(gm)))).pipe(fp((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==gm)return e;if(r===gm&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||em(r))return r}return e},e)},gm),Bd(e=>e!==gm),P(e=>em(e)?e:!0===e),ip(1)))}function vm(e,t){return null!==e&&t&&t(new zp(e)),Nd(!0)}function bm(e,t){return null!==e&&t&&t(new Fp(e)),Nd(!0)}function _m(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Nd(r.map(r=>zd(()=>{const i=fm(r,t,n);let s;if(function(e){return e&&Qf(e.canActivate)}(i))s=nf(i.canActivate(t,e));else{if(!Qf(i))throw new Error("Invalid CanActivate guard");s=nf(i(t,e))}return s.pipe(op())}))).pipe(ym()):Nd(!0)}function xm(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>zd(()=>Nd(t.guards.map(i=>{const s=fm(i,t.node,n);let a;if(function(e){return e&&Qf(e.canActivateChild)}(s))a=nf(s.canActivateChild(r,e));else{if(!Qf(s))throw new Error("Invalid CanActivateChild guard");a=nf(s(r,e))}return a.pipe(op())})).pipe(ym())));return Nd(i).pipe(ym())}class wm{}class Sm{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=km(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Lf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Af(n,t),i=new Of(this.url,r);return this.inheritParamsAndData(i._root),Nd(i)}catch(e){return new _(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=Rf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=lf(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const s of e)try{return this.processSegmentAgainstRoute(s,t,n,r)}catch(i){if(!(i instanceof wm))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new wm}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new wm;if((e.outlet||"primary")!==r)throw new wm;let i,s=[],a=[];if("**"===e.path){const s=n.length>0?ef(n).parameters:{};i=new Lf(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mm(e),r,e.component,e,Em(t),Cm(t)+n.length,Nm(e))}else{const o=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new wm;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||Gp)(n,e,t);if(!r)throw new wm;const i={};tf(r.posParams,(e,t)=>{i[t]=e.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(t,e,n);s=o.consumedSegments,a=n.slice(o.lastChild),i=new Lf(s,o.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mm(e),r,e.component,e,Em(t),Cm(t)+s.length,Nm(e))}const o=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:l}=km(t,s,a,o,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const e=this.processChildren(o,u);return[new Af(i,e)]}if(0===o.length&&0===l.length)return[new Af(i,[])];const c=this.processSegment(o,u,l,"primary");return[new Af(i,c)]}}function Em(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Cm(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function km(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>Tm(e,t,n)&&"primary"!==Am(n))}(e,n,r)){const i=new af(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==Am(s)){const n=new af([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Am(s)]=n}return i}(e,t,r,new af(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Tm(e,t,n))}(e,n,r)){const s=new af(e.segments,function(e,t,n,r,i,s){const a={};for(const o of r)if(Tm(e,n,o)&&!i[Am(o)]){const n=new af([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,a[Am(o)]=n}return Object.assign(Object.assign({},i),a)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new af(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Tm(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Am(e){return e.outlet||"primary"}function Mm(e){return e.data||{}}function Nm(e){return e.resolve||{}}function Im(e,t,n,r){const i=fm(e,t,r);return nf(i.resolve?i.resolve(t,n):i(t,n))}function Dm(e){return function(t){return t.pipe(cp(t=>{const n=e(t);return n?U(n).pipe(P(()=>t)):U([t])}))}}class Rm{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const Lm=new Pe("ROUTES");class Om{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(P(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new jp(Qp(r.injector.get(Lm)).map(Zp),r)}))}loadModuleFactory(e){return"string"==typeof e?U(this.loader.load(e)):nf(e()).pipe(V(e=>e instanceof Je?Nd(e):U(this.compiler.compileModuleAsync(e))))}}class Fm{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Pm(e){throw e}function zm(e,t,n){return t.parse("/")}function $m(e,t){return Nd(null)}let Bm=(()=>{class e{constructor(e,t,n,r,i,s,a,o){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=o,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=Pm,this.malformedUriErrorHandler=zm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$m,afterPreactivation:$m},this.urlHandlingStrategy=new Fm,this.routeReuseStrategy=new Rm,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Ye),this.console=i.get(So);const u=i.get(Po);this.isNgZoneEnabled=u instanceof Po,this.resetConfig(o),this.currentUrlTree=new sf(new af([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Om(s,a,e=>this.triggerEvent(new Lp(e)),e=>this.triggerEvent(new Op(e))),this.routerState=If(this.currentUrlTree,this.rootComponentType),this.transitions=new Id({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Bd(e=>0!==e.id),P(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),cp(e=>{let n=!1,r=!1;return Nd(e).pipe(bp(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cp(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Nd(e).pipe(cp(e=>{const n=this.transitions.getValue();return t.next(new Cp(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Fd:[e]}),cp(e=>Promise.resolve(e)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,a=this.config,function(e){return e.pipe(cp(e=>function(e,t,n,r,i){return new am(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,a).pipe(P(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),bp(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(s){return s.pipe(V(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){return new Sm(e,t,n,r,i,s).recognize()}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(P(e=>Object.assign(Object.assign({},s),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),bp(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),bp(e=>{const n=new Mp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=e,o=new Cp(n,this.serializeUrl(r),i,s);t.next(o);const u=If(r,this.rootComponentType).snapshot;return Nd(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Fd}),Dm(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:a}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!a})}),bp(e=>{const t=new Np(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),P(e=>Object.assign(Object.assign({},e),{guards:pm(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?Nd(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return U(e).pipe(V(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Nd(s.map(s=>{const a=fm(s,t,i);let o;if(function(e){return e&&Qf(e.canDeactivate)}(a))o=nf(a.canDeactivate(e,t,n,r));else{if(!Qf(a))throw new Error("Invalid CanDeactivate guard");o=nf(a(e,t,n,r))}return o.pipe(op())})).pipe(ym()):Nd(!0)}(e.component,e.route,n,t,r)),op(e=>!0!==e,!0))}(a,r,i,e).pipe(V(n=>n&&"boolean"==typeof n?function(e,t,n,r){return U(t).pipe(yp(t=>U([bm(t.route.parent,r),vm(t.route,r),xm(e,t.path,n),_m(e,t.route,n)]).pipe($d(),op(e=>!0!==e,!0))),op(e=>!0!==e,!0))}(r,s,e,t):Nd(n)),P(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),bp(e=>{if(em(e.guardsResult)){const t=Hp(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),bp(e=>{const t=new Ip(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Bd(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Tp(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Dm(e=>{if(e.guards.canActivateChecks.length)return Nd(e).pipe(bp(e=>{const t=new Dp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(t=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(e){return e.pipe(V(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;return i.length?U(i).pipe(yp(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Nd({});if(1===i.length){const s=i[0];return Im(e[s],t,n,r).pipe(P(e=>({[s]:e})))}const s={};return U(i).pipe(V(i=>Im(e[i],t,n,r).pipe(P(e=>(s[i]=e,e))))).pipe(ep(),P(()=>s))}(e._resolve,e,t,r).pipe(P(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Rf(e,n).resolve),null)))}(e.route,r,t,n)),function(e,t){return arguments.length>=2?function(n){return v(fp(e,t),Hd(1),Yd(t))(n)}:function(t){return v(fp((t,n,r)=>e(t,n,r+1)),Hd(1))(t)}}((e,t)=>e),P(t=>e)):Nd(e)}))}),bp(e=>{const t=new Rp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}));var t,n}),Dm(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:a}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!a})}),P(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new Af(i,s)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Df(new Id((i=n.value).url),new Id(i.params),new Id(i.queryParams),new Id(i.fragment),new Id(i.data),i.outlet,i.component,i),s=n.children.map(n=>e(t,n));return new Af(r,s)}}var i}(e,t._root,n?n._root:void 0);return new Nf(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),bp(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,a=this.routeReuseStrategy,o=e=>this.triggerEvent(e),P(e=>(new Yf(a,e.targetRouterState,e.currentRouterState,o).activate(s),e))),bp({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Tp(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new wp(i))),tp(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=em(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Tp(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Ap(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return Fd}));var i,s,a,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){qp(e),this.config=e.map(Zp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:o}=t;tr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=o?this.currentUrlTree.fragment:i;let c=null;if(a)switch(a){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=s?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return Uf(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Vf(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return tf(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Vf(n,t,r)}(n);if(s.toRoot())return Uf(t.root,new af([],{}),t,r,i);const a=function(e,t,n){if(e.isAbsolute)return new Wf(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Wf(n.snapshot._urlSegment,!0,0);const r=Bf(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Wf(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),o=a.processChildren?jf(a.segmentGroup,a.index,s.commands):Gf(a.segmentGroup,a.index,s.commands);return Uf(a.segmentGroup,o,t,r,i)}(u,this.currentUrlTree,e,c,l)}navigateByUrl(e,t={skipLocationChange:!1}){tr()&&this.isNgZoneEnabled&&!Po.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=em(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(em(e))return rf(this.currentUrlTree,e,t);const n=this.parseUrl(e);return rf(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new kp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){const s=this.getTransition();if(s&&"imperative"!==t&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==t&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==t&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let a,o,u;i?(a=i.resolve,o=i.reject,u=i.promise):u=new Promise((e,t)=>{a=e,o=t});const l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:a,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(e){vs()},e.\u0275dir=gt({type:e}),e})(),Um=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){tr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:Wm(this.skipLocationChange),replaceUrl:Wm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Wm(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Wm(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(gs(Bm),gs(Df),ys("tabindex"),gs(ca),gs(aa))},e.\u0275dir=gt({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&ks("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),e})(),Vm=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof kp&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){tr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:Wm(this.skipLocationChange),replaceUrl:Wm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Wm(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Wm(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(gs(Bm),gs(Df),gs(Cu))},e.\u0275dir=gt({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&ks("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(zs("href",t.href,sr),ms("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[js]}),e})();function Wm(e){return""===e||!!e}let Hm=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.element=t,this.renderer=n,this.link=r,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof kp&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(gs(Bm),gs(aa),gs(ca),gs(Um,8),gs(Vm,8))},e.\u0275dir=gt({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;1&e&&(lo(n,Um,!0),lo(n,Vm,!0)),2&e&&(uo(r=co())&&(t.links=r),uo(r=co())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[js]}),e})();class Gm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jm,this.attachRef=null}}class jm{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Gm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let qm=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ya,this.deactivateEvents=new Ya,this.name=r||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Km(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(gs(jm),gs(Da),gs(sa),ys("name"),gs(Bi))},e.\u0275dir=gt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Km{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Df?this.route:e===jm?this.childContexts:this.parent.get(e,t)}}class Xm{}class Zm{preload(e,t){return Nd(null)}}let Ym=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Om(t,n,t=>e.triggerEvent(new Lp(t)),t=>e.triggerEvent(new Op(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bd(e=>e instanceof kp),yp(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ye);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return U(n).pipe(G(),P(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(V(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(qe(Bm),qe(su),qe(Ro),qe(ns),qe(Xm))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Jm=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Cp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof kp&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Bp&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Bp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(e){vs()},e.\u0275dir=gt({type:e}),e})();const Qm=new Pe("ROUTER_CONFIGURATION"),eg=new Pe("ROUTER_FORROOT_GUARD"),tg=[Nu,{provide:cf,useClass:hf},{provide:Bm,useFactory:function(e,t,n,r,i,s,a,o={},u,l){const c=new Bm(null,e,t,n,r,i,s,Qp(a));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),o.errorHandler&&(c.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(c.malformedUriErrorHandler=o.malformedUriErrorHandler),o.enableTracing){const e=fu();c.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return o.onSameUrlNavigation&&(c.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.urlUpdateStrategy&&(c.urlUpdateStrategy=o.urlUpdateStrategy),o.relativeLinkResolution&&(c.relativeLinkResolution=o.relativeLinkResolution),c},deps:[cf,jm,Nu,ns,su,Ro,Lm,Qm,[class{},new re],[class{},new re]]},jm,{provide:Df,useFactory:function(e){return e.routerState.root},deps:[Bm]},{provide:su,useClass:uu},Ym,Zm,class{preload(e,t){return t().pipe(tp(()=>Nd(null)))}},{provide:Qm,useValue:{enableTracing:!1}}];function ng(){return new Jo("Router",Bm)}let rg=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[tg,og(t),{provide:eg,useFactory:ag,deps:[[Bm,new re,new se]]},{provide:Qm,useValue:n||{}},{provide:Cu,useFactory:sg,deps:[gu,[new ne(Tu),new re],Qm]},{provide:Jm,useFactory:ig,deps:[Bm,nc,Qm]},{provide:Xm,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Zm},{provide:Jo,multi:!0,useFactory:ng},[ug,{provide:mo,multi:!0,useFactory:lg,deps:[ug]},{provide:hg,useFactory:cg,deps:[ug]},{provide:wo,multi:!0,useExisting:hg}]]}}static forChild(t){return{ngModule:e,providers:[og(t)]}}}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)(qe(eg,8),qe(Bm,8))}}),e})();function ig(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Jm(e,t,n)}function sg(e,t,n={}){return n.useHash?new Mu(e,t):new Au(e,t)}function ag(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function og(e){return[{provide:rs,multi:!0,useValue:e},{provide:Lm,multi:!0,useValue:e}]}let ug=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(vu,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Bm),r=this.injector.get(Qm);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Nd(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Qm),n=this.injector.get(Ym),r=this.injector.get(Jm),i=this.injector.get(Bm),s=this.injector.get(ru);e===s.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(qe(ns))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function lg(e){return e.appInitializer.bind(e)}function cg(e){return e.bootstrapListener.bind(e)}const hg=new Pe("Router Initializer"),dg=[];let pg=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)},imports:[[rg.forRoot(dg)],rg]}),e})();class fg{constructor({url:e,tracker:t,enableRotate:n=!1,enableZoom:r=!1,loading:i=!0}){this.update({url:e,tracker:t,enableRotate:n,enableZoom:r,loading:i})}update({url:e,tracker:t,enableRotate:n,enableZoom:r,loading:i}){this.url=e,this.tracker=t,this.enableRotate=n,this.enableZoom=r,this.loading=i}}let mg=(()=>{class e{constructor(){this.men=new fg({url:"https://github.com/gitchaell/ngx-profile-avatar/blob/main/.github/images/men.avatar.glb?raw=true",tracker:"cursor"}),this.women=new fg({url:"https://github.com/gitchaell/ngx-profile-avatar/blob/main/.github/images/women.avatar.glb?raw=true",tracker:"cursor"})}ngOnInit(){}onUpdateMen(e){this.men.update(e)}onUpdateWomen(e){this.women.update(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["app-root"]],decls:4,vars:4,consts:[[1,"men-avatar",3,"data"],[1,"men-form",3,"data","submit"],[1,"women-avatar",3,"data"],[1,"women-form",3,"data","submit"]],template:function(e,t){1&e&&(Ss(0,"app-avatar-visor",0),xs(1,"app-avatar-form",1),ks("submit",(function(e){return t.onUpdateMen(e)})),ws(),Ss(2,"app-avatar-visor",2),xs(3,"app-avatar-form",3),ks("submit",(function(e){return t.onUpdateWomen(e)})),ws()),2&e&&(bs("data",t.men),_r(1),bs("data",t.men),_r(1),bs("data",t.women),_r(1),bs("data",t.women))},styles:['[_nghost-%COMP%] {\n      display: grid;\n      grid-template-columns: 50vw 50vw;\n      grid-template-rows: 1fr auto;\n      grid-template-areas:\n      "men-avatar women-avatar"\n      "men-form women-form";\n      width: 100%;\n      height: 100vh;\n    }\n\n    .men-avatar[_ngcontent-%COMP%] { grid-area: men-avatar; }\n    .women-avatar[_ngcontent-%COMP%] { grid-area: women-avatar; }\n    .women-form[_ngcontent-%COMP%] { grid-area: women-form; }\n    .men-form[_ngcontent-%COMP%] { grid-area: men-form; }\n\n    @media only screen and (max-width: 600px) {\n      [_nghost-%COMP%] {\n        grid-template-columns: 100vw;\n        grid-template-rows: 65vh auto 65vh auto;\n        grid-template-areas:\n          "men-avatar"\n          "men-form"\n          "women-avatar"\n          "women-form";\n        height: auto;\n      }\n    }']}),e})(),gg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"animate-spin","spinner"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","var(--blue-600)"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","var(--gray-600)"]],template:function(e,t){1&e&&(Bt.lFrame.currentNamespace="http://www.w3.org/2000/svg",xs(0,"svg",0),Ss(1,"path",1),Ss(2,"path",2),ws())},styles:[".animate-spin[_ngcontent-%COMP%] {\n      animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n      100% {\n        transform: rotate(1turn);\n      }\n    }\n\n    svg.spinner[_ngcontent-%COMP%] {\n      width: 32px;\n    }"],changeDetection:0}),e})();class yg{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const vg=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bg=1234567;const _g=Math.PI/180,xg=180/Math.PI;function wg(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(vg[255&e]+vg[e>>8&255]+vg[e>>16&255]+vg[e>>24&255]+"-"+vg[255&t]+vg[t>>8&255]+"-"+vg[t>>16&15|64]+vg[t>>24&255]+"-"+vg[63&n|128]+vg[n>>8&255]+"-"+vg[n>>16&255]+vg[n>>24&255]+vg[255&r]+vg[r>>8&255]+vg[r>>16&255]+vg[r>>24&255]).toLowerCase()}function Sg(e,t,n){return Math.max(t,Math.min(n,e))}function Eg(e,t){return(e%t+t)%t}function Cg(e,t,n){return(1-n)*e+n*t}function kg(e){return 0==(e&e-1)&&0!==e}function Tg(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Ag(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Mg=Object.freeze({__proto__:null,DEG2RAD:_g,RAD2DEG:xg,generateUUID:wg,clamp:Sg,euclideanModulo:Eg,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Cg,damp:function(e,t,n,r){return Cg(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Eg(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(bg=e);let t=bg+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*_g},radToDeg:function(e){return e*xg},isPowerOfTwo:kg,ceilPowerOfTwo:Tg,floorPowerOfTwo:Ag,setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),u=a(n/2),l=s((t+r)/2),c=a((t+r)/2),h=s((t-r)/2),d=a((t-r)/2),p=s((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(o*c,u*h,u*d,o*l);break;case"YZY":e.set(u*d,o*c,u*h,o*l);break;case"ZXZ":e.set(u*h,u*d,o*c,o*l);break;case"XZX":e.set(o*c,u*f,u*p,o*l);break;case"YXY":e.set(u*p,o*c,u*f,o*l);break;case"ZYZ":e.set(u*f,u*p,o*c,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}});class Ng{constructor(e=0,t=0){Ng.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ig{constructor(){Ig.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,a,o,u){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=o,l[6]=n,l[7]=s,l[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=s*f+a*y+o*_,i[3]=s*m+a*v+o*x,i[6]=s*g+a*b+o*w,i[1]=u*f+l*y+c*_,i[4]=u*m+l*v+c*x,i[7]=u*g+l*b+c*w,i[2]=h*f+d*y+p*_,i[5]=h*m+d*v+p*x,i[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],u=e[7],l=e[8];return t*s*l-t*a*u-n*i*l+n*a*o+r*i*u-r*s*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],u=e[7],l=e[8],c=l*s-a*u,h=a*o-l*i,d=u*i-s*o,p=t*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=c*f,e[1]=(r*u-l*n)*f,e[2]=(a*n-r*s)*f,e[3]=h*f,e[4]=(l*t-r*o)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*o-u*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const o=Math.cos(i),u=Math.sin(i);return this.set(n*o,n*u,-n*(o*s+u*a)+s+e,-r*u,r*o,-r*(-u*s+o*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],a=r[6],o=r[1],u=r[4],l=r[7];return r[0]=t*i+n*o,r[3]=t*s+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*o,r[4]=-n*s+t*u,r[7]=-n*a+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Dg(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}function Rg(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Lg(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Og(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Fg={srgb:{"srgb-linear":Lg},"srgb-linear":{srgb:Og}},Pg={legacyMode:!0,get workingColorSpace(){return"srgb-linear"},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Fg[t]&&void 0!==Fg[t][n]){const r=Fg[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},zg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$g={r:0,g:0,b:0},Bg={h:0,s:0,l:0},Ug={h:0,s:0,l:0};function Vg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Wg(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class Hg{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Pg.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r="srgb-linear"){return this.r=e,this.g=t,this.b=n,Pg.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r="srgb-linear"){if(e=Eg(e,1),t=Sg(t,0,1),n=Sg(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Vg(i,r,e+1/3),this.g=Vg(i,r,e),this.b=Vg(i,r,e-1/3)}return Pg.toWorkingColorSpace(this,r),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[2];switch(r[1]){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Pg.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Pg.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const r=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,s=parseInt(e[3],10)/100;return n(e[4]),this.setHSL(r,i,s,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Pg.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Pg.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t="srgb"){const n=zg[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lg(e.r),this.g=Lg(e.g),this.b=Lg(e.b),this}copyLinearToSRGB(e){return this.r=Og(e.r),this.g=Og(e.g),this.b=Og(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return Pg.fromWorkingColorSpace(Wg(this,$g),e),Sg(255*$g.r,0,255)<<16^Sg(255*$g.g,0,255)<<8^Sg(255*$g.b,0,255)<<0}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t="srgb-linear"){Pg.fromWorkingColorSpace(Wg(this,$g),t);const n=$g.r,r=$g.g,i=$g.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let o,u;const l=(a+s)/2;if(a===s)o=0,u=0;else{const e=s-a;switch(u=l<=.5?e/(s+a):e/(2-s-a),s){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=u,e.l=l,e}getRGB(e,t="srgb-linear"){return Pg.fromWorkingColorSpace(Wg(this,$g),t),e.r=$g.r,e.g=$g.g,e.b=$g.b,e}getStyle(e="srgb"){return Pg.fromWorkingColorSpace(Wg(this,$g),e),"srgb"!==e?`color(${e} ${$g.r} ${$g.g} ${$g.b})`:`rgb(${255*$g.r|0},${255*$g.g|0},${255*$g.b|0})`}offsetHSL(e,t,n){return this.getHSL(Bg),Bg.h+=e,Bg.s+=t,Bg.l+=n,this.setHSL(Bg.h,Bg.s,Bg.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bg),e.getHSL(Ug);const n=Cg(Bg.h,Ug.h,t),r=Cg(Bg.s,Ug.s,t),i=Cg(Bg.l,Ug.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Gg;Hg.NAMES=zg;class jg{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Gg&&(Gg=Rg("canvas")),Gg.width=e.width,Gg.height=e.height;const n=Gg.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Gg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Rg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Lg(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t[e]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Lg(t[e]/255)):Lg(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class qg{constructor(e=null){this.isSource=!0,this.uuid=wg(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)e.push(Kg(r[t].isDataTexture?r[t].image:r[t]))}else e=Kg(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Kg(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?jg.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Xg=0;class Zg extends yg{constructor(e=Zg.DEFAULT_IMAGE,t=Zg.DEFAULT_MAPPING,n=1001,r=1001,i=1006,s=1008,a=1023,o=1009,u=1,l=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Xg++}),this.uuid=wg(),this.name="",this.source=new qg(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Ng(0,0),this.repeat=new Ng(1,1),this.center=new Ng(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ig,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Zg.DEFAULT_IMAGE=null,Zg.DEFAULT_MAPPING=300;class Yg{constructor(e=0,t=0,n=0,r=1){Yg.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=e.elements,a=s[0],o=s[4],u=s[8],l=s[1],c=s[5],h=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(o+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,s=(c+1)/2,m=(f+1)/2,g=(o+l)/4,y=(u+d)/4,v=(h+p)/4;return e>s&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=g/n,i=y/n):s>m?s<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=g/r,i=v/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=y/i,r=v/i),this.set(n,r,i,t),this}let m=Math.sqrt((p-h)*(p-h)+(u-d)*(u-d)+(l-o)*(l-o));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(u-d)/m,this.z=(l-o)/m,this.w=Math.acos((a+c+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Jg extends yg{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yg(0,0,e,t),this.scissorTest=!1,this.viewport=new Yg(0,0,e,t),this.texture=new Zg({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Qg extends Zg{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ey extends Zg{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ty{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,s,a){let o=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===a)return e[t+0]=o,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(c!==f||o!==h||u!==d||l!==p){let e=1-a;const t=o*h+u*d+l*p+c*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,a=Math.sin(a*s)/i}const i=a*n;if(o=o*e+h*i,u=u*e+d*i,l=l*e+p*i,c=c*e+f*i,e===1-a){const e=1/Math.sqrt(o*o+u*u+l*l+c*c);o*=e,u*=e,l*=e,c*=e}}e[t]=o,e[t+1]=u,e[t+2]=l,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],o=n[r+1],u=n[r+2],l=n[r+3],c=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=a*p+l*c+o*d-u*h,e[t+1]=o*p+l*h+u*c-a*d,e[t+2]=u*p+l*d+a*h-o*c,e[t+3]=l*p-a*c-o*h-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,o=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=o(n/2),d=o(r/2),p=o(i/2);switch(s){case"XYZ":this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p;break;case"YXZ":this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p;break;case"ZXY":this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p;break;case"ZYX":this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p;break;case"YZX":this._x=h*l*c+u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c-h*d*p;break;case"XZY":this._x=h*l*c-u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],o=t[9],u=t[2],l=t[6],c=t[10],h=n+a+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-o)*e,this._y=(i-u)*e,this._z=(s-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(l-o)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+u)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-u)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(o+l)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(s-r)/e,this._x=(i+u)/e,this._y=(o+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sg(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,u=t._z,l=t._w;return this._x=n*l+s*a+r*u-i*o,this._y=r*l+s*o+i*a-n*u,this._z=i*l+s*u+n*o-r*a,this._w=s*l-n*a-r*o-i*u,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(o),l=Math.atan2(u,a),c=Math.sin((1-t)*l)/u,h=Math.sin(t*l)/u;return this._w=s*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ny{constructor(e=0,t=0,n=0){ny.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(iy.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(iy.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,u=o*t+s*r-a*n,l=o*n+a*t-i*r,c=o*r+i*n-s*t,h=-i*t-s*n-a*r;return this.x=u*o+h*-i+l*-a-c*-s,this.y=l*o+h*-s+c*-i-u*-a,this.z=c*o+h*-a+u*-s-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ry.copy(this).projectOnVector(e),this.sub(ry)}reflect(e){return this.sub(ry.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Sg(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ry=new ny,iy=new ty;class sy{constructor(e=new ny(1/0,1/0,1/0),t=new ny(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,u=e.length;o<u;o+=3){const u=e[o],l=e[o+1],c=e[o+2];u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,u=e.count;o<u;o++){const u=e.getX(o),l=e.getY(o),c=e.getZ(o);u<t&&(t=u),l<n&&(n=l),c<r&&(r=c),u>i&&(i=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=oy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)oy.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(oy)}else null===n.boundingBox&&n.computeBoundingBox(),uy.copy(n.boundingBox),uy.applyMatrix4(e.matrixWorld),this.union(uy);const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,oy),oy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(my),gy.subVectors(this.max,my),ly.subVectors(e.a,my),cy.subVectors(e.b,my),hy.subVectors(e.c,my),dy.subVectors(cy,ly),py.subVectors(hy,cy),fy.subVectors(ly,hy);let t=[0,-dy.z,dy.y,0,-py.z,py.y,0,-fy.z,fy.y,dy.z,0,-dy.x,py.z,0,-py.x,fy.z,0,-fy.x,-dy.y,dy.x,0,-py.y,py.x,0,-fy.y,fy.x,0];return!!by(t,ly,cy,hy,gy)&&(t=[1,0,0,0,1,0,0,0,1],!!by(t,ly,cy,hy,gy)&&(yy.crossVectors(dy,py),t=[yy.x,yy.y,yy.z],by(t,ly,cy,hy,gy)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return oy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(oy).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ay[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ay[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ay[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ay[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ay[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ay[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ay[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ay[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ay),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ay=[new ny,new ny,new ny,new ny,new ny,new ny,new ny,new ny],oy=new ny,uy=new sy,ly=new ny,cy=new ny,hy=new ny,dy=new ny,py=new ny,fy=new ny,my=new ny,gy=new ny,yy=new ny,vy=new ny;function by(e,t,n,r,i){for(let s=0,a=e.length-3;s<=a;s+=3){vy.fromArray(e,s);const a=i.x*Math.abs(vy.x)+i.y*Math.abs(vy.y)+i.z*Math.abs(vy.z),o=t.dot(vy),u=n.dot(vy),l=r.dot(vy);if(Math.max(-Math.max(o,u,l),Math.min(o,u,l))>a)return!1}return!0}const _y=new sy,xy=new ny,wy=new ny,Sy=new ny;class Ey{constructor(e=new ny,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):_y.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Sy.subVectors(e,this.center);const t=Sy.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Sy.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?wy.set(0,0,1).multiplyScalar(e.radius):wy.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(xy.copy(e.center).add(wy)),this.expandByPoint(xy.copy(e.center).sub(wy)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Cy=new ny,ky=new ny,Ty=new ny,Ay=new ny,My=new ny,Ny=new ny,Iy=new ny;class Dy{constructor(e=new ny,t=new ny(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cy)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Cy.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Cy.copy(this.direction).multiplyScalar(t).add(this.origin),Cy.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ky.copy(e).add(t).multiplyScalar(.5),Ty.copy(t).sub(e).normalize(),Ay.copy(this.origin).sub(ky);const i=.5*e.distanceTo(t),s=-this.direction.dot(Ty),a=Ay.dot(this.direction),o=-Ay.dot(Ty),u=Ay.lengthSq(),l=Math.abs(1-s*s);let c,h,d,p;if(l>0)if(c=s*o-a,h=s*a-o,p=i*l,c>=0)if(h>=-p)if(h<=p){const e=1/l;c*=e,h*=e,d=c*(c+s*h+2*a)+h*(s*c+h+2*o)+u}else h=i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+u;else h=-i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+u;else h<=-p?(c=Math.max(0,-(-s*i+a)),h=c>0?-i:Math.min(Math.max(-i,-o),i),d=-c*c+h*(h+2*o)+u):h<=p?(c=0,h=Math.min(Math.max(-i,-o),i),d=h*(h+2*o)+u):(c=Math.max(0,-(s*i+a)),h=c>0?i:Math.min(Math.max(-i,-o),i),d=-c*c+h*(h+2*o)+u);else h=s>0?-i:i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+u;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Ty).multiplyScalar(h).add(ky),d}intersectSphere(e,t){Cy.subVectors(e.center,this.origin);const n=Cy.dot(this.direction),r=Cy.dot(Cy)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,o=n+s;return a<0&&o<0?null:this.at(a<0?o:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,o;const u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,s=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,s=(e.min.y-h.y)*l),n>s||i>r?null:((i>n||n!=n)&&(n=i),(s<r||r!=r)&&(r=s),c>=0?(a=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Cy)}intersectTriangle(e,t,n,r,i){My.subVectors(t,e),Ny.subVectors(n,e),Iy.crossVectors(My,Ny);let s,a=this.direction.dot(Iy);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Ay.subVectors(this.origin,e);const o=s*this.direction.dot(Ny.crossVectors(Ay,Ny));if(o<0)return null;const u=s*this.direction.dot(My.cross(Ay));if(u<0)return null;if(o+u>a)return null;const l=-s*Ay.dot(Iy);return l<0?null:this.at(l/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ry{constructor(){Ry.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,a,o,u,l,c,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=a,g[13]=o,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ry).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Ly.setFromMatrixColumn(e,0).length(),i=1/Ly.setFromMatrixColumn(e,1).length(),s=1/Ly.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=s*l,n=s*c,r=a*l,i=a*c;t[0]=o*l,t[4]=-o*c,t[8]=u,t[1]=n+r*u,t[5]=e-i*u,t[9]=-a*o,t[2]=i-e*u,t[6]=r+n*u,t[10]=s*o}else if("YXZ"===e.order){const e=o*l,n=o*c,r=u*l,i=u*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=s*u,t[1]=s*c,t[5]=s*l,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*l,n=o*c,r=u*l,i=u*c;t[0]=e-i*a,t[4]=-s*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=s*l,t[9]=i-e*a,t[2]=-s*u,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*l,n=s*c,r=a*l,i=a*c;t[0]=o*l,t[4]=r*u-n,t[8]=e*u+i,t[1]=o*c,t[5]=i*u+e,t[9]=n*u-r,t[2]=-u,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*u,r=a*o,i=a*u;t[0]=o*l,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=s*l,t[9]=-a*l,t[2]=-u*l,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=s*o,n=s*u,r=a*o,i=a*u;t[0]=o*l,t[4]=-c,t[8]=u*l,t[1]=e*c+i,t[5]=s*l,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*l,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fy,e,Py)}lookAt(e,t,n){const r=this.elements;return By.subVectors(e,t),0===By.lengthSq()&&(By.z=1),By.normalize(),zy.crossVectors(n,By),0===zy.lengthSq()&&(1===Math.abs(n.z)?By.x+=1e-4:By.z+=1e-4,By.normalize(),zy.crossVectors(n,By)),zy.normalize(),$y.crossVectors(By,zy),r[0]=zy.x,r[4]=$y.x,r[8]=By.x,r[1]=zy.y,r[5]=$y.y,r[9]=By.y,r[2]=zy.z,r[6]=$y.z,r[10]=By.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],E=r[12],C=r[1],k=r[5],T=r[9],A=r[13],M=r[2],N=r[6],I=r[10],D=r[14],R=r[3],L=r[7],O=r[11],F=r[15];return i[0]=s*x+a*C+o*M+u*R,i[4]=s*w+a*k+o*N+u*L,i[8]=s*S+a*T+o*I+u*O,i[12]=s*E+a*A+o*D+u*F,i[1]=l*x+c*C+h*M+d*R,i[5]=l*w+c*k+h*N+d*L,i[9]=l*S+c*T+h*I+d*O,i[13]=l*E+c*A+h*D+d*F,i[2]=p*x+f*C+m*M+g*R,i[6]=p*w+f*k+m*N+g*L,i[10]=p*S+f*T+m*I+g*O,i[14]=p*E+f*A+m*D+g*F,i[3]=y*x+v*C+b*M+_*R,i[7]=y*w+v*k+b*N+_*L,i[11]=y*S+v*T+b*I+_*O,i[15]=y*E+v*A+b*D+_*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*o*c-r*u*c-i*a*h+n*u*h+r*a*d-n*o*d)+e[7]*(+t*o*d-t*u*h+i*s*h-r*s*d+r*u*l-i*o*l)+e[11]*(+t*u*c-t*a*d-i*s*c+n*s*d+i*a*l-n*u*l)+e[15]*(-r*a*l-t*o*c+t*a*h+r*s*c-n*s*h+n*o*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],y=c*m*u-f*h*u+f*o*d-a*m*d-c*o*g+a*h*g,v=p*h*u-l*m*u-p*o*d+s*m*d+l*o*g-s*h*g,b=l*f*u-p*c*u+p*a*d-s*f*d-l*a*g+s*c*g,_=p*c*o-l*f*o-p*a*h+s*f*h+l*a*m-s*c*m,x=t*y+n*v+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=y*w,e[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*w,e[2]=(a*m*i-f*o*i+f*r*u-n*m*u-a*r*g+n*o*g)*w,e[3]=(c*o*i-a*h*i-c*r*u+n*h*u+a*r*d-n*o*d)*w,e[4]=v*w,e[5]=(l*m*i-p*h*i+p*r*d-t*m*d-l*r*g+t*h*g)*w,e[6]=(p*o*i-s*m*i-p*r*u+t*m*u+s*r*g-t*o*g)*w,e[7]=(s*h*i-l*o*i+l*r*u-t*h*u-s*r*d+t*o*d)*w,e[8]=b*w,e[9]=(p*c*i-l*f*i-p*n*d+t*f*d+l*n*g-t*c*g)*w,e[10]=(s*f*i-p*a*i+p*n*u-t*f*u-s*n*g+t*a*g)*w,e[11]=(l*a*i-s*c*i-l*n*u+t*c*u+s*n*d-t*a*d)*w,e[12]=_*w,e[13]=(l*f*r-p*c*r+p*n*h-t*f*h-l*n*m+t*c*m)*w,e[14]=(p*a*r-s*f*r-p*n*o+t*f*o+s*n*m-t*a*m)*w,e[15]=(s*c*r-l*a*r+l*n*o-t*c*o-s*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,u=i*s,l=i*a;return this.set(u*s+n,u*a-r*o,u*o+r*a,0,u*a+r*o,l*a+n,l*o-r*s,0,u*o-r*a,l*o+r*s,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,u=i+i,l=s+s,c=a+a,h=i*u,d=i*l,p=i*c,f=s*l,m=s*c,g=a*c,y=o*u,v=o*l,b=o*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(f+g))*_,r[1]=(d+b)*_,r[2]=(p-v)*_,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+y)*x,r[7]=0,r[8]=(p+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Ly.set(r[0],r[1],r[2]).length();const s=Ly.set(r[4],r[5],r[6]).length(),a=Ly.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Oy.copy(this);const o=1/i,u=1/s,l=1/a;return Oy.elements[0]*=o,Oy.elements[1]*=o,Oy.elements[2]*=o,Oy.elements[4]*=u,Oy.elements[5]*=u,Oy.elements[6]*=u,Oy.elements[8]*=l,Oy.elements[9]*=l,Oy.elements[10]*=l,t.setFromRotationMatrix(Oy),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,o=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),c=-(s+i)/(s-i),h=-2*s*i/(s-i);return a[0]=2*i/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=o,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s){const a=this.elements,o=1/(t-e),u=1/(n-r),l=1/(s-i),c=(t+e)*o,h=(n+r)*u,d=(s+i)*l;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ly=new ny,Oy=new Ry,Fy=new ny(0,0,0),Py=new ny(1,1,1),zy=new ny,$y=new ny,By=new ny,Uy=new Ry,Vy=new ty;class Wy{constructor(e=0,t=0,n=0,r=Wy.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],o=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Sg(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Sg(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Sg(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-Sg(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Sg(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Sg(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Uy.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Uy,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Vy.setFromEuler(this),this.setFromQuaternion(Vy,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Wy.DefaultOrder="XYZ",Wy.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Hy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Gy=0;const jy=new ny,qy=new ty,Ky=new Ry,Xy=new ny,Zy=new ny,Yy=new ny,Jy=new ty,Qy=new ny(1,0,0),ev=new ny(0,1,0),tv=new ny(0,0,1),nv={type:"added"},rv={type:"removed"};class iv extends yg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gy++}),this.uuid=wg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=iv.DefaultUp.clone();const e=new ny,t=new Wy,n=new ty,r=new ny(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ry},normalMatrix:{value:new Ig}}),this.matrix=new Ry,this.matrixWorld=new Ry,this.matrixAutoUpdate=iv.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Hy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qy.setFromAxisAngle(e,t),this.quaternion.multiply(qy),this}rotateOnWorldAxis(e,t){return qy.setFromAxisAngle(e,t),this.quaternion.premultiply(qy),this}rotateX(e){return this.rotateOnAxis(Qy,e)}rotateY(e){return this.rotateOnAxis(ev,e)}rotateZ(e){return this.rotateOnAxis(tv,e)}translateOnAxis(e,t){return jy.copy(e).applyQuaternion(this.quaternion),this.position.add(jy.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Qy,e)}translateY(e){return this.translateOnAxis(ev,e)}translateZ(e){return this.translateOnAxis(tv,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ky.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Xy.copy(e):Xy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Zy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ky.lookAt(Zy,Xy,this.up):Ky.lookAt(Xy,Zy,this.up),this.quaternion.setFromRotationMatrix(Ky),r&&(Ky.extractRotation(r.matrixWorld),qy.setFromRotationMatrix(Ky),this.quaternion.premultiply(qy.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(nv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rv)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(rv)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ky.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ky.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ky),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zy,e,Yy),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zy,Jy,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++)i(e.shapes,n[t]);else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++)r.animations.push(i(e.animations,this.animations[t]))}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),a=s(e.images),o=s(e.shapes),u=s(e.skeletons),l=s(e.animations),c=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),u.length>0&&(n.skeletons=u),l.length>0&&(n.animations=l),c.length>0&&(n.nodes=c)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}iv.DefaultUp=new ny(0,1,0),iv.DefaultMatrixAutoUpdate=!0;const sv=new ny,av=new ny,ov=new ny,uv=new ny,lv=new ny,cv=new ny,hv=new ny,dv=new ny,pv=new ny,fv=new ny;class mv{constructor(e=new ny,t=new ny,n=new ny){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),sv.subVectors(e,t),r.cross(sv);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){sv.subVectors(r,t),av.subVectors(n,t),ov.subVectors(e,t);const s=sv.dot(sv),a=sv.dot(av),o=sv.dot(ov),u=av.dot(av),l=av.dot(ov),c=s*u-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,d=(u*o-a*l)*h,p=(s*l-a*o)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,uv),uv.x>=0&&uv.y>=0&&uv.x+uv.y<=1}static getUV(e,t,n,r,i,s,a,o){return this.getBarycoord(e,t,n,r,uv),o.set(0,0),o.addScaledVector(i,uv.x),o.addScaledVector(s,uv.y),o.addScaledVector(a,uv.z),o}static isFrontFacing(e,t,n,r){return sv.subVectors(n,t),av.subVectors(e,t),sv.cross(av).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sv.subVectors(this.c,this.b),av.subVectors(this.a,this.b),.5*sv.cross(av).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return mv.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return mv.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return mv.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return mv.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return mv.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;lv.subVectors(r,n),cv.subVectors(i,n),dv.subVectors(e,n);const o=lv.dot(dv),u=cv.dot(dv);if(o<=0&&u<=0)return t.copy(n);pv.subVectors(e,r);const l=lv.dot(pv),c=cv.dot(pv);if(l>=0&&c<=l)return t.copy(r);const h=o*c-l*u;if(h<=0&&o>=0&&l<=0)return s=o/(o-l),t.copy(n).addScaledVector(lv,s);fv.subVectors(e,i);const d=lv.dot(fv),p=cv.dot(fv);if(p>=0&&d<=p)return t.copy(i);const f=d*u-o*p;if(f<=0&&u>=0&&p<=0)return a=u/(u-p),t.copy(n).addScaledVector(cv,a);const m=l*p-d*c;if(m<=0&&c-l>=0&&d-p>=0)return hv.subVectors(i,r),a=(c-l)/(c-l+(d-p)),t.copy(r).addScaledVector(hv,a);const g=1/(m+f+h);return s=f*g,a=h*g,t.copy(n).addScaledVector(lv,s).addScaledVector(cv,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let gv=0;class yv extends yg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gv++}),this.uuid=wg(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class vv extends yv{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Hg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bv=new ny,_v=new Ng;class xv{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Hg),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Ng),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ny),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Yg),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_v.fromBufferAttribute(this,t),_v.applyMatrix3(e),this.setXY(t,_v.x,_v.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)bv.fromBufferAttribute(this,t),bv.applyMatrix3(e),this.setXYZ(t,bv.x,bv.y,bv.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)bv.fromBufferAttribute(this,t),bv.applyMatrix4(e),this.setXYZ(t,bv.x,bv.y,bv.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)bv.fromBufferAttribute(this,t),bv.applyNormalMatrix(e),this.setXYZ(t,bv.x,bv.y,bv.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)bv.fromBufferAttribute(this,t),bv.transformDirection(e),this.setXYZ(t,bv.x,bv.y,bv.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class wv extends xv{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Sv extends xv{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ev extends xv{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Cv=0;const kv=new Ry,Tv=new iv,Av=new ny,Mv=new sy,Nv=new sy,Iv=new ny;class Dv extends yg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Cv++}),this.uuid=wg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Dg(e)?Sv:wv)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Ig).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return kv.makeRotationFromQuaternion(e),this.applyMatrix4(kv),this}rotateX(e){return kv.makeRotationX(e),this.applyMatrix4(kv),this}rotateY(e){return kv.makeRotationY(e),this.applyMatrix4(kv),this}rotateZ(e){return kv.makeRotationZ(e),this.applyMatrix4(kv),this}translate(e,t,n){return kv.makeTranslation(e,t,n),this.applyMatrix4(kv),this}scale(e,t,n){return kv.makeScale(e,t,n),this.applyMatrix4(kv),this}lookAt(e){return Tv.lookAt(e),Tv.updateMatrix(),this.applyMatrix4(Tv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Av).negate(),this.translate(Av.x,Av.y,Av.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ev(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new sy);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ny(-1/0,-1/0,-1/0),new ny(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++)Mv.setFromBufferAttribute(t[e]),this.morphTargetsRelative?(Iv.addVectors(this.boundingBox.min,Mv.min),this.boundingBox.expandByPoint(Iv),Iv.addVectors(this.boundingBox.max,Mv.max),this.boundingBox.expandByPoint(Iv)):(this.boundingBox.expandByPoint(Mv.min),this.boundingBox.expandByPoint(Mv.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ey);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ny,1/0);if(e){const n=this.boundingSphere.center;if(Mv.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++)Nv.setFromBufferAttribute(t[e]),this.morphTargetsRelative?(Iv.addVectors(Mv.min,Nv.min),Mv.expandByPoint(Iv),Iv.addVectors(Mv.max,Nv.max),Mv.expandByPoint(Iv)):(Mv.expandByPoint(Nv.min),Mv.expandByPoint(Nv.max));Mv.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Iv.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Iv));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],a=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Iv.fromBufferAttribute(s,t),a&&(Av.fromBufferAttribute(e,t),Iv.add(Av)),r=Math.max(r,n.distanceToSquared(Iv))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new xv(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,u=[],l=[];for(let C=0;C<a;C++)u[C]=new ny,l[C]=new ny;const c=new ny,h=new ny,d=new ny,p=new Ng,f=new Ng,m=new Ng,g=new ny,y=new ny;function v(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(c),d.sub(c),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),y.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let C=0,k=b.length;C<k;++C){const e=b[C],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)v(n[r+0],n[r+1],n[r+2])}const _=new ny,x=new ny,w=new ny,S=new ny;function E(e){w.fromArray(i,3*e),S.copy(w);const t=u[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(l[e])<0?-1:1;o[4*e]=_.x,o[4*e+1]=_.y,o[4*e+2]=_.z,o[4*e+3]=n}for(let C=0,k=b.length;C<k;++C){const e=b[C],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new xv(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ny,i=new ny,s=new ny,a=new ny,o=new ny,u=new ny,l=new ny,c=new ny;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),l.subVectors(s,i),c.subVectors(r,i),l.cross(c),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),u.fromBufferAttribute(n,f),a.add(l),o.add(l),u.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,u.x,u.y,u.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),l.subVectors(s,i),c.subVectors(r,i),l.cross(c),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,s=e.attributes[r],a=s.array,o=s.itemSize*t,u=Math.min(a.length,i.length-o);for(let e=0,t=o;e<u;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Iv.fromBufferAttribute(e,t),Iv.normalize(),e.setXYZ(t,Iv.x,Iv.y,Iv.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let a=0,o=0;for(let u=0,l=t.length;u<l;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(let e=0;e<r;e++)s[o++]=n[a++]}return new xv(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Dv,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],s=i[a];for(let t=0,i=s.length;t<i;t++){const i=e(s[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n)e.data.attributes[o]=n[o].toJSON(e.data);const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++)n.push(t[r].toJSON(e.data));n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r)this.setAttribute(u,r[u].clone(t));const i=e.morphAttributes;for(const u in i){const e=[],n=i[u];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[u]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,l=s.length;u<l;u++){const e=s[u];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Rv=new Ry,Lv=new Dy,Ov=new Ey,Fv=new ny,Pv=new ny,zv=new ny,$v=new ny,Bv=new ny,Uv=new ny,Vv=new ny,Wv=new ny,Hv=new ny,Gv=new Ng,jv=new Ng,qv=new Ng,Kv=new ny,Xv=new ny;class Zv extends iv{constructor(e=new Dv,t=new vv){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ov.copy(n.boundingSphere),Ov.applyMatrix4(i),!1===e.ray.intersectsSphere(Ov))return;if(Rv.copy(i).invert(),Lv.copy(e.ray).applyMatrix4(Rv),null!==n.boundingBox&&!1===Lv.intersectsBox(n.boundingBox))return;let s;const a=n.index,o=n.attributes.position,u=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex];for(let r=Math.max(n.start,p.start),d=Math.min(a.count,Math.min(n.start+n.count,p.start+p.count));r<d;r+=3){const d=a.getX(r),p=a.getX(r+1),f=a.getX(r+2);s=Yv(this,i,e,Lv,o,u,l,c,h,d,p,f),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else for(let f=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);f<m;f+=3){const n=a.getX(f),i=a.getX(f+1),d=a.getX(f+2);s=Yv(this,r,e,Lv,o,u,l,c,h,n,i,d),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}else if(void 0!==o)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex];for(let r=Math.max(n.start,p.start),a=Math.min(o.count,Math.min(n.start+n.count,p.start+p.count));r<a;r+=3)s=Yv(this,i,e,Lv,o,u,l,c,h,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,t.push(s))}else for(let f=Math.max(0,p.start),m=Math.min(o.count,p.start+p.count);f<m;f+=3)s=Yv(this,r,e,Lv,o,u,l,c,h,f,f+1,f+2),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}}function Yv(e,t,n,r,i,s,a,o,u,l,c,h){Fv.fromBufferAttribute(i,l),Pv.fromBufferAttribute(i,c),zv.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(s&&d){Vv.set(0,0,0),Wv.set(0,0,0),Hv.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&($v.fromBufferAttribute(n,l),Bv.fromBufferAttribute(n,c),Uv.fromBufferAttribute(n,h),a?(Vv.addScaledVector($v,t),Wv.addScaledVector(Bv,t),Hv.addScaledVector(Uv,t)):(Vv.addScaledVector($v.sub(Fv),t),Wv.addScaledVector(Bv.sub(Pv),t),Hv.addScaledVector(Uv.sub(zv),t)))}Fv.add(Vv),Pv.add(Wv),zv.add(Hv)}e.isSkinnedMesh&&(e.boneTransform(l,Fv),e.boneTransform(c,Pv),e.boneTransform(h,zv));const p=function(e,t,n,r,i,s,a,o){let u;if(u=1===t.side?r.intersectTriangle(a,s,i,!0,o):r.intersectTriangle(i,s,a,2!==t.side,o),null===u)return null;Xv.copy(o),Xv.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(Xv);return l<n.near||l>n.far?null:{distance:l,point:Xv.clone(),object:e}}(e,t,n,r,Fv,Pv,zv,Kv);if(p){o&&(Gv.fromBufferAttribute(o,l),jv.fromBufferAttribute(o,c),qv.fromBufferAttribute(o,h),p.uv=mv.getUV(Kv,Fv,Pv,zv,Gv,jv,qv,new Ng)),u&&(Gv.fromBufferAttribute(u,l),jv.fromBufferAttribute(u,c),qv.fromBufferAttribute(u,h),p.uv2=mv.getUV(Kv,Fv,Pv,zv,Gv,jv,qv,new Ng));const e={a:l,b:c,c:h,normal:new ny,materialIndex:0};mv.getNormal(Fv,Pv,zv,e.normal),p.face=e}return p}class Jv extends Dv{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const o=[],u=[],l=[],c=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,y){const v=s/m,b=p/g,_=s/2,x=p/2,w=f/2,S=m+1,E=g+1;let C=0,k=0;const T=new ny;for(let a=0;a<E;a++){const s=a*b-x;for(let o=0;o<S;o++)T[e]=(o*v-_)*r,T[t]=s*i,T[n]=w,u.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,l.push(T.x,T.y,T.z),c.push(o/m),c.push(1-a/g),C+=1}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+S*(a+1),n=h+(e+1)+S*(a+1),r=h+(e+1)+S*a;o.push(h+e+S*a,t,r),o.push(t,n,r),k+=6}a.addGroup(d,k,y),d+=k,h+=C}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new Ev(u,3)),this.setAttribute("normal",new Ev(l,3)),this.setAttribute("uv",new Ev(c,2))}static fromJSON(e){return new Jv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qv(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return t}function eb(e){const t={};for(let n=0;n<e.length;n++){const r=Qv(e[n]);for(const e in r)t[e]=r[e]}return t}const tb={clone:Qv,merge:eb};class nb extends yv{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qv(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;t.uniforms[r]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class rb extends iv{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ry,this.projectionMatrix=new Ry,this.projectionMatrixInverse=new Ry}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ib extends rb{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*xg*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*_g*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*xg*Math.atan(Math.tan(.5*_g*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*_g*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/a,r*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class sb extends iv{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new ib(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ny(1,0,0)),this.add(r);const i=new ib(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ny(-1,0,0)),this.add(i);const s=new ib(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new ny(0,1,0)),this.add(s);const a=new ib(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ny(0,-1,0)),this.add(a);const o=new ib(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new ny(0,0,1)),this.add(o);const u=new ib(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new ny(0,0,-1)),this.add(u)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,a,o,u]=this.children,l=e.getRenderTarget(),c=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(l),e.toneMapping=c,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class ab extends Zg{constructor(e,t,n,r,i,s,a,o,u,l){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,s,a,o,u,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ob extends Jg{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new ab([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n=new Jv(5,5,5),r=new nb({name:"CubemapFromEquirect",uniforms:Qv({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});r.uniforms.tEquirect.value=t;const i=new Zv(n,r),s=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new sb(1,10,this).update(e,i),t.minFilter=s,i.geometry.dispose(),i.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}const ub=new ny,lb=new ny,cb=new Ig;class hb{constructor(e=new ny(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ub.subVectors(n,t).cross(lb.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(ub),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||cb.getNormalMatrix(e),r=this.coplanarPoint(ub).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const db=new Ey,pb=new ny;class fb{constructor(e=new hb,t=new hb,n=new hb,r=new hb,i=new hb,s=new hb){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-r,c-o,f-h,v-m).normalize(),t[1].setComponents(a+r,c+o,f+h,v+m).normalize(),t[2].setComponents(a+i,c+u,f+d,v+g).normalize(),t[3].setComponents(a-i,c-u,f-d,v-g).normalize(),t[4].setComponents(a-s,c-l,f-p,v-y).normalize(),t[5].setComponents(a+s,c+l,f+p,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),db.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(db)}intersectsSprite(e){return db.center.set(0,0,0),db.radius=.7071067811865476,db.applyMatrix4(e.matrixWorld),this.intersectsSphere(db)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(pb.x=r.normal.x>0?e.max.x:e.min.x,pb.y=r.normal.y>0?e.max.y:e.min.y,pb.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function mb(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function gb(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(r,a),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)o=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(i instanceof Int16Array)o=5122;else if(i instanceof Uint32Array)o=5125;else if(i instanceof Int32Array)o=5124;else if(i instanceof Int8Array)o=5120;else if(i instanceof Uint8Array)o=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=5121}return{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(function(t,r,i){const s=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}(s.buffer,t,i),s.version=t.version)}}}class yb extends Dv{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),o=Math.floor(r),u=a+1,l=o+1,c=e/a,h=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<l;g++){const e=g*h-s;for(let t=0;t<u;t++)p.push(t*c-i,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/o)}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+u*(g+1),n=e+1+u*(g+1),r=e+1+u*g;d.push(e+u*g,t,r),d.push(t,n,r)}this.setIndex(d),this.setAttribute("position",new Ev(p,3)),this.setAttribute("normal",new Ev(f,3)),this.setAttribute("uv",new Ev(m,2))}static fromJSON(e){return new yb(e.width,e.height,e.widthSegments,e.heightSegments)}}const vb={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},bb={common:{diffuse:{value:new Hg(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ig},uv2Transform:{value:new Ig},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ng(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Hg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Hg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ig}},sprite:{diffuse:{value:new Hg(16777215)},opacity:{value:1},center:{value:new Ng(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ig}}},_b={basic:{uniforms:eb([bb.common,bb.specularmap,bb.envmap,bb.aomap,bb.lightmap,bb.fog]),vertexShader:vb.meshbasic_vert,fragmentShader:vb.meshbasic_frag},lambert:{uniforms:eb([bb.common,bb.specularmap,bb.envmap,bb.aomap,bb.lightmap,bb.emissivemap,bb.fog,bb.lights,{emissive:{value:new Hg(0)}}]),vertexShader:vb.meshlambert_vert,fragmentShader:vb.meshlambert_frag},phong:{uniforms:eb([bb.common,bb.specularmap,bb.envmap,bb.aomap,bb.lightmap,bb.emissivemap,bb.bumpmap,bb.normalmap,bb.displacementmap,bb.fog,bb.lights,{emissive:{value:new Hg(0)},specular:{value:new Hg(1118481)},shininess:{value:30}}]),vertexShader:vb.meshphong_vert,fragmentShader:vb.meshphong_frag},standard:{uniforms:eb([bb.common,bb.envmap,bb.aomap,bb.lightmap,bb.emissivemap,bb.bumpmap,bb.normalmap,bb.displacementmap,bb.roughnessmap,bb.metalnessmap,bb.fog,bb.lights,{emissive:{value:new Hg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vb.meshphysical_vert,fragmentShader:vb.meshphysical_frag},toon:{uniforms:eb([bb.common,bb.aomap,bb.lightmap,bb.emissivemap,bb.bumpmap,bb.normalmap,bb.displacementmap,bb.gradientmap,bb.fog,bb.lights,{emissive:{value:new Hg(0)}}]),vertexShader:vb.meshtoon_vert,fragmentShader:vb.meshtoon_frag},matcap:{uniforms:eb([bb.common,bb.bumpmap,bb.normalmap,bb.displacementmap,bb.fog,{matcap:{value:null}}]),vertexShader:vb.meshmatcap_vert,fragmentShader:vb.meshmatcap_frag},points:{uniforms:eb([bb.points,bb.fog]),vertexShader:vb.points_vert,fragmentShader:vb.points_frag},dashed:{uniforms:eb([bb.common,bb.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vb.linedashed_vert,fragmentShader:vb.linedashed_frag},depth:{uniforms:eb([bb.common,bb.displacementmap]),vertexShader:vb.depth_vert,fragmentShader:vb.depth_frag},normal:{uniforms:eb([bb.common,bb.bumpmap,bb.normalmap,bb.displacementmap,{opacity:{value:1}}]),vertexShader:vb.meshnormal_vert,fragmentShader:vb.meshnormal_frag},sprite:{uniforms:eb([bb.sprite,bb.fog]),vertexShader:vb.sprite_vert,fragmentShader:vb.sprite_frag},background:{uniforms:{uvTransform:{value:new Ig},t2D:{value:null}},vertexShader:vb.background_vert,fragmentShader:vb.background_frag},cube:{uniforms:eb([bb.envmap,{opacity:{value:1}}]),vertexShader:vb.cube_vert,fragmentShader:vb.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vb.equirect_vert,fragmentShader:vb.equirect_frag},distanceRGBA:{uniforms:eb([bb.common,bb.displacementmap,{referencePosition:{value:new ny},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vb.distanceRGBA_vert,fragmentShader:vb.distanceRGBA_frag},shadow:{uniforms:eb([bb.lights,bb.fog,{color:{value:new Hg(0)},opacity:{value:1}}]),vertexShader:vb.shadow_vert,fragmentShader:vb.shadow_frag}};function xb(e,t,n,r,i,s){const a=new Hg(0);let o,u,l=!0===i?0:1,c=null,h=0,d=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,s)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),l=t,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,p(a,l)},render:function(n,i){let s=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?p(a,l):f&&f.isColor&&(p(f,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===u&&(u=new Zv(new Jv(1,1,1),new nb({name:"BackgroundCubeMaterial",uniforms:Qv(_b.cube.uniforms),vertexShader:_b.cube.vertexShader,fragmentShader:_b.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=f,u.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&h===f.version&&d===e.toneMapping||(u.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),u.layers.enableAll(),n.unshift(u,u.geometry,u.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Zv(new yb(2,2),new nb({name:"BackgroundMaterial",uniforms:Qv(_b.background.uniforms),vertexShader:_b.background.vertexShader,fragmentShader:_b.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&h===f.version&&d===e.toneMapping||(o.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function wb(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,o={},u=p(null);let l=u,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let s=0;s<i;s++)t[s]=0,n[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const s=l.enabledAttributes,a=l.attributeDivisors;l.newAttributes[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i)}function y(){const t=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,s,a,o){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,a,o):e.vertexAttribIPointer(t,n,i,a,o)}function b(){_(),c=!0,l!==u&&(l=u,h(l.object))}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,d,b,_){let x=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let u=o[t.id];void 0===u&&(u={},o[t.id]=u);let l=u[n.id];void 0===l&&(l={},u[n.id]=l);let c=l[a];return void 0===c&&(c=p(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),l[a]=c),c}(b,d,u);l!==t&&(l=t,h(l.object)),x=function(e,t,n,r){const i=l.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const u in o)if(o[u].location>=0){const t=i[u];let n=s[u];if(void 0===n&&("instanceMatrix"===u&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}return l.attributesNum!==a||l.index!==r}(i,b,d,_),x&&function(e,t,n,r){const i={},s=t.attributes;let a=0;const o=n.getAttributes();for(const u in o)if(o[u].location>=0){let t=s[u];void 0===t&&("instanceMatrix"===u&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[u]=n,a++}l.attributes=i,l.attributesNum=a,l.index=r}(i,b,d,_)}else{const e=!0===u.wireframe;l.geometry===b.id&&l.program===d.id&&l.wireframe===e||(l.geometry=b.id,l.program=d.id,l.wireframe=e,x=!0)}null!==_&&n.update(_,34963),(x||c)&&(c=!1,function(i,s,a,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const u=o.attributes,l=a.getAttributes(),c=s.defaultAttributeValues;for(const t in l){const r=l[t];if(r.location>=0){let s=u[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,u=n.get(s);if(void 0===u)continue;const l=u.buffer,c=u.type,h=u.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,u=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,l);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,c,t,u*h,(d+a/r.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,l);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,c,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}y()}(i,u,d,b),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:y}}function Sb(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,a,o){if(0===o)return;let u,l;if(i)u=e,l="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](s,r,a,o),n.update(a,s,o)}}function Eb(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const u=s||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),v=h>0,b=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:s?e.getParameter(36183):0}}function Cb(e){const t=this;let n=null,r=0,i=!1,s=!1;const a=new hb,o=new Ig,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){const s=null!==e?e.length:0;let l=null;if(0!==s){if(l=u.value,!0!==i||null===l){const t=r+4*s,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let n=0,u=r;n!==s;++n,u+=4)a.copy(e[n]).applyMatrix4(i,o),a.normal.toArray(l,u),l[u+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const a=0!==e.length||t||0!==r||i;return i=t,n=c(e,s,0),r=e.length,a},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,l()},this.setState=function(t,a,o){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||s&&!p)s?c(null):l();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;u.value=i,i=c(h,a,t,o);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function kb(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping;if(303===s||304===s){if(t.has(i))return n(t.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const a=new ob(s.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}_b.physical={uniforms:eb([_b.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ng(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Hg(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ng},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Hg(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Hg(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vb.meshphysical_vert,fragmentShader:vb.meshphysical_frag};class Tb extends rb{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ab=[.125,.215,.35,.446,.526,.582],Mb=new Tb,Nb=new Hg;let Ib=null;const Db=(1+Math.sqrt(5))/2,Rb=1/Db,Lb=[new ny(1,1,1),new ny(-1,1,1),new ny(1,1,-1),new ny(-1,1,-1),new ny(0,Db,Rb),new ny(0,Db,-Rb),new ny(Rb,0,Db),new ny(-Rb,0,Db),new ny(Db,Rb,0),new ny(-Db,Rb,0)];class Ob{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Ib=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=$b(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=zb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ib),e.scissorTest=!1,Pb(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Ib=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},r=Fb(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Fb(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+Ab.length;for(let a=0;a<s;a++){const s=Math.pow(2,i);n.push(s);let o=1/s;a>e-4?o=Ab[a-e+4-1]:0===a&&(o=0),r.push(o);const u=1/(s-2),l=-u,c=1+u,h=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,p=6,f=3,m=2,g=1,y=new Float32Array(f*p*d),v=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1;y.set([t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0],f*p*e),v.set(h,m*p*e),b.set([e,e,e,e,e,e],g*p*e)}const _=new Dv;_.setAttribute("position",new xv(y,f)),_.setAttribute("uv",new xv(v,m)),_.setAttribute("faceIndex",new xv(b,g)),t.push(_),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new ny(0,1,0);return new nb({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new Zv(this._lodPlanes[0],e);this._renderer.compile(t,Mb)}_sceneToCubeUV(e,t,n,r){const i=new ib(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,u=o.autoClear,l=o.toneMapping;o.getClearColor(Nb),o.toneMapping=0,o.autoClear=!1;const c=new vv({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Zv(new Jv,c);let d=!1;const p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,d=!0):(c.color.copy(Nb),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,s[f],0),i.lookAt(a[f],0,0)):1===t?(i.up.set(0,0,s[f]),i.lookAt(0,a[f],0)):(i.up.set(0,s[f],0),i.lookAt(0,0,a[f]));const n=this._cubeSize;Pb(r,t*n,f>2?n:0,n,n),o.setRenderTarget(r),d&&o.render(h,i),o.render(e,i)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=l,o.autoClear=u,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=$b()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zb());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new Zv(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Pb(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,Mb)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,t,Lb[(r-1)%Lb.length])}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const o=this._renderer,u=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new Zv(this._lodPlanes[r],u),c=u.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let b=0;b<20;++b){const e=b/p,t=Math.exp(-e*e/2);m.push(t),0===b?g+=t:b<f&&(g+=2*t)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a);const{_lodMax:y}=this;c.dTheta.value=d,c.mipInt.value=y-n;const v=this._sizeLods[r];Pb(t,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(t),o.render(l,Mb)}}function Fb(e,t,n){const r=new Jg(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Pb(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function zb(){return new nb({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function $b(){return new nb({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Bb(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,a=303===s||304===s,o=301===s||302===s;if(a||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Ob(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(s)){null===n&&(n=new Ob(e));const s=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ub(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Vb(e,t,n,r){const i={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete i[o.id];const u=s.get(o);u&&(t.remove(u),s.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{a=i.version;for(let e=0,t=i.array.length/3-1;e<t;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const o=new(Dg(n)?Sv:wv)(n,1);o.version=a;const u=s.get(e);u&&t.remove(u),s.set(e,o)}return{get:function(e,t){return!0===i[t.id]?t:(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++,t)},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Wb(e,t,n,r){const i=r.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,a,t*o),n.update(r,s,1)},this.renderInstances=function(r,u,l){if(0===l)return;let c,h;if(i)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](s,u,a,r*o,l),n.update(u,s,l)}}function Hb(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Gb(e,t){return e[0]-t[0]}function jb(e,t){return Math.abs(t[1])-Math.abs(e[1])}function qb(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Kb(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new Yg,o=[];for(let u=0;u<8;u++)o[u]=[u,0];return{update:function(u,l,c,h){const d=u.morphTargetInfluences;if(!0===t.isWebGL2){const r=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,i=void 0!==r?r.length:0;let o=s.get(l);if(void 0===o||o.count!==i){void 0!==o&&o.texture.dispose();const e=void 0!==l.morphAttributes.position,n=void 0!==l.morphAttributes.normal,r=void 0!==l.morphAttributes.color,u=l.morphAttributes.position||[],c=l.morphAttributes.normal||[],h=l.morphAttributes.color||[];let d=0;!0===e&&(d=1),!0===n&&(d=2),!0===r&&(d=3);let f=l.attributes.position.count*d,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);const g=new Float32Array(f*m*4*i),y=new Qg(g,f,m,i);y.type=1015,y.needsUpdate=!0;const v=4*d;for(let t=0;t<i;t++){const i=u[t],s=c[t],o=h[t],l=f*m*4*t;for(let t=0;t<i.count;t++){const u=t*v;!0===e&&(a.fromBufferAttribute(i,t),!0===i.normalized&&qb(a,i),g[l+u+0]=a.x,g[l+u+1]=a.y,g[l+u+2]=a.z,g[l+u+3]=0),!0===n&&(a.fromBufferAttribute(s,t),!0===s.normalized&&qb(a,s),g[l+u+4]=a.x,g[l+u+5]=a.y,g[l+u+6]=a.z,g[l+u+7]=0),!0===r&&(a.fromBufferAttribute(o,t),!0===o.normalized&&qb(a,o),g[l+u+8]=a.x,g[l+u+9]=a.y,g[l+u+10]=a.z,g[l+u+11]=4===o.itemSize?a.w:1)}}function p(){y.dispose(),s.delete(l),l.removeEventListener("dispose",p)}o={count:i,texture:y,size:new Ng(f,m)},s.set(l,o),l.addEventListener("dispose",p)}let u=0;for(let e=0;e<d.length;e++)u+=d[e];const c=l.morphTargetsRelative?1:1-u;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{const t=void 0===d?0:d.length;let n=r[l.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[l.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(jb);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(Gb);const s=l.morphAttributes.position,a=l.morphAttributes.normal;let u=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(s&&l.getAttribute("morphTarget"+e)!==s[n]&&l.setAttribute("morphTarget"+e,s[n]),a&&l.getAttribute("morphNormal"+e)!==a[n]&&l.setAttribute("morphNormal"+e,a[n]),i[e]=r,u+=r):(s&&!0===l.hasAttribute("morphTarget"+e)&&l.deleteAttribute("morphTarget"+e),a&&!0===l.hasAttribute("morphNormal"+e)&&l.deleteAttribute("morphNormal"+e),i[e]=0)}const c=l.morphTargetsRelative?1:1-u;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Xb(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,o=t.get(e,e.geometry);return i.get(o)!==a&&(t.update(o),i.set(o,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),o},dispose:function(){i=new WeakMap}}}const Zb=new Zg,Yb=new Qg,Jb=new ey,Qb=new ab,e_=[],t_=[],n_=new Float32Array(16),r_=new Float32Array(9),i_=new Float32Array(4);function s_(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=e_[i];if(void 0===s&&(s=new Float32Array(i),e_[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function a_(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function o_(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function u_(e,t){let n=t_[t];void 0===n&&(n=new Int32Array(t),t_[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function l_(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function c_(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(a_(n,t))return;e.uniform2fv(this.addr,t),o_(n,t)}}function h_(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(a_(n,t))return;e.uniform3fv(this.addr,t),o_(n,t)}}function d_(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(a_(n,t))return;e.uniform4fv(this.addr,t),o_(n,t)}}function p_(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(a_(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),o_(n,t)}else{if(a_(n,r))return;i_.set(r),e.uniformMatrix2fv(this.addr,!1,i_),o_(n,r)}}function f_(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(a_(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),o_(n,t)}else{if(a_(n,r))return;r_.set(r),e.uniformMatrix3fv(this.addr,!1,r_),o_(n,r)}}function m_(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(a_(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),o_(n,t)}else{if(a_(n,r))return;n_.set(r),e.uniformMatrix4fv(this.addr,!1,n_),o_(n,r)}}function g_(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function y_(e,t){const n=this.cache;a_(n,t)||(e.uniform2iv(this.addr,t),o_(n,t))}function v_(e,t){const n=this.cache;a_(n,t)||(e.uniform3iv(this.addr,t),o_(n,t))}function b_(e,t){const n=this.cache;a_(n,t)||(e.uniform4iv(this.addr,t),o_(n,t))}function __(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function x_(e,t){const n=this.cache;a_(n,t)||(e.uniform2uiv(this.addr,t),o_(n,t))}function w_(e,t){const n=this.cache;a_(n,t)||(e.uniform3uiv(this.addr,t),o_(n,t))}function S_(e,t){const n=this.cache;a_(n,t)||(e.uniform4uiv(this.addr,t),o_(n,t))}function E_(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Zb,i)}function C_(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Jb,i)}function k_(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Qb,i)}function T_(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Yb,i)}function A_(e,t){e.uniform1fv(this.addr,t)}function M_(e,t){const n=s_(t,this.size,2);e.uniform2fv(this.addr,n)}function N_(e,t){const n=s_(t,this.size,3);e.uniform3fv(this.addr,n)}function I_(e,t){const n=s_(t,this.size,4);e.uniform4fv(this.addr,n)}function D_(e,t){const n=s_(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function R_(e,t){const n=s_(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function L_(e,t){const n=s_(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function O_(e,t){e.uniform1iv(this.addr,t)}function F_(e,t){e.uniform2iv(this.addr,t)}function P_(e,t){e.uniform3iv(this.addr,t)}function z_(e,t){e.uniform4iv(this.addr,t)}function $_(e,t){e.uniform1uiv(this.addr,t)}function B_(e,t){e.uniform2uiv(this.addr,t)}function U_(e,t){e.uniform3uiv(this.addr,t)}function V_(e,t){e.uniform4uiv(this.addr,t)}function W_(e,t,n){const r=t.length,i=u_(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2D(t[s]||Zb,i[s])}function H_(e,t,n){const r=t.length,i=u_(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture3D(t[s]||Jb,i[s])}function G_(e,t,n){const r=t.length,i=u_(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTextureCube(t[s]||Qb,i[s])}function j_(e,t,n){const r=t.length,i=u_(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Yb,i[s])}class q_{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return l_;case 35664:return c_;case 35665:return h_;case 35666:return d_;case 35674:return p_;case 35675:return f_;case 35676:return m_;case 5124:case 35670:return g_;case 35667:case 35671:return y_;case 35668:case 35672:return v_;case 35669:case 35673:return b_;case 5125:return __;case 36294:return x_;case 36295:return w_;case 36296:return S_;case 35678:case 36198:case 36298:case 36306:case 35682:return E_;case 35679:case 36299:case 36307:return C_;case 35680:case 36300:case 36308:case 36293:return k_;case 36289:case 36303:case 36311:case 36292:return T_}}(t.type)}}class K_{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return A_;case 35664:return M_;case 35665:return N_;case 35666:return I_;case 35674:return D_;case 35675:return R_;case 35676:return L_;case 5124:case 35670:return O_;case 35667:case 35671:return F_;case 35668:case 35672:return P_;case 35669:case 35673:return z_;case 5125:return $_;case 36294:return B_;case 36295:return U_;case 36296:return V_;case 35678:case 36198:case 36298:case 36306:case 35682:return W_;case 35679:case 36299:case 36307:return H_;case 35680:case 36300:case 36308:case 36293:return G_;case 36289:case 36303:case 36311:case 36292:return j_}}(t.type)}}class X_{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const Z_=/(\w+)(\])?(\[|\.)?/g;function Y_(e,t){e.seq.push(t),e.map[t.id]=t}function J_(e,t,n){const r=e.name,i=r.length;for(Z_.lastIndex=0;;){const s=Z_.exec(r),a=Z_.lastIndex;let o=s[1];const u=s[3];if("]"===s[2]&&(o|=0),void 0===u||"["===u&&a+2===i){Y_(n,void 0===u?new q_(o,e,t):new K_(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new X_(o),Y_(n,e)),n=e}}}class Q_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);J_(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ex(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let tx=0;function nx(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=i;a<s;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function rx(e,t){const n=function(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ix(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function sx(e){return""!==e}function ax(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ox(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ux=/^[ \t]*#include +<([\w\d./]+)>/gm;function lx(e){return e.replace(ux,cx)}function cx(e,t){const n=vb[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return lx(n)}const hx=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,dx=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function px(e){return e.replace(dx,mx).replace(hx,fx)}function fx(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),mx(0,t,n,r)}function mx(e,t,n,r){let i="";for(let s=parseInt(t);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function gx(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function yx(e,t,n,r){const i=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const u=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sx).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(sx).join("\n"),g.length>0&&(g+="\n"),y=[p,f].filter(sx).join("\n"),y.length>0&&(y+="\n")):(g=[gx(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sx).join("\n"),y=[p,gx(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?vb.tonemapping_pars_fragment:"",0!==n.toneMapping?ix("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",vb.encodings_pars_fragment,rx("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(sx).join("\n")),a=lx(a),a=ax(a,n),a=ox(a,n),o=lx(o),o=ax(o,n),o=ox(o,n),a=px(a),o=px(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=v+y+o,_=ex(i,35633,v+g+a),x=ex(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(x).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=nx(i,_,"vertex"),n=nx(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:y}})}let w,S;return i.deleteShader(_),i.deleteShader(x),this.getUniforms=function(){return void 0===w&&(w=new Q_(i,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=tx++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=x,this}let vx=0;class bx{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.fragmentShader,n=this._getShaderStage(e.vertexShader),r=this._getShaderStage(t),i=this._getShaderCacheForMaterial(e);return!1===i.has(n)&&(i.add(n),n.usedTimes++),!1===i.has(r)&&(i.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new _x(e);t.set(e,n)}return t.get(e)}}class _x{constructor(e){this.id=vx++,this.code=e,this.usedTimes=0}}function xx(e,t,n,r,i,s,a){const o=new Hy,u=new bx,l=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,l,m,g){const y=m.fog,v=g.geometry,b=(s.isMeshStandardMaterial?n:t).get(s.envMap||(s.isMeshStandardMaterial?m.environment:null)),_=b&&306===b.mapping?b.image.height:null,x=f[s.type];null!==s.precision&&(p=i.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const w=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,S=void 0!==w?w.length:0;let E,C,k,T,A=0;if(void 0!==v.morphAttributes.position&&(A=1),void 0!==v.morphAttributes.normal&&(A=2),void 0!==v.morphAttributes.color&&(A=3),x){const e=_b[x];E=e.vertexShader,C=e.fragmentShader}else E=s.vertexShader,C=s.fragmentShader,u.update(s),k=u.getVertexShaderID(s),T=u.getFragmentShaderID(s);const M=e.getRenderTarget(),N=s.clearcoat>0,I=s.iridescence>0;return{isWebGL2:c,shaderID:x,shaderName:s.type,vertexShader:E,fragmentShader:C,defines:s.defines,customVertexShaderID:k,customFragmentShaderID:T,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===M?e.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:3e3,map:!!s.map,matcap:!!s.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:_,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:1===s.normalMapType,tangentSpaceNormalMap:0===s.normalMapType,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&3001===s.map.encoding,clearcoat:N,clearcoatMap:N&&!!s.clearcoatMap,clearcoatRoughnessMap:N&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!s.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!s.iridescenceMap,iridescenceThicknessMap:I&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&1===s.blending,alphaMap:!!s.alphaMap,alphaTest:s.alphaTest>0,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!v.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!v.attributes.color&&4===v.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!y,useFog:!0===s.fog,fogExp2:y&&y.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==v.morphAttributes.position,morphNormals:void 0!==v.morphAttributes.normal,morphColors:void 0!==v.morphAttributes.color,morphTargetsCount:S,morphTextureStride:A,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.map&&o.enable(4),t.matcap&&o.enable(5),t.envMap&&o.enable(6),t.lightMap&&o.enable(7),t.aoMap&&o.enable(8),t.emissiveMap&&o.enable(9),t.bumpMap&&o.enable(10),t.normalMap&&o.enable(11),t.objectSpaceNormalMap&&o.enable(12),t.tangentSpaceNormalMap&&o.enable(13),t.clearcoat&&o.enable(14),t.clearcoatMap&&o.enable(15),t.clearcoatRoughnessMap&&o.enable(16),t.clearcoatNormalMap&&o.enable(17),t.iridescence&&o.enable(18),t.iridescenceMap&&o.enable(19),t.iridescenceThicknessMap&&o.enable(20),t.displacementMap&&o.enable(21),t.specularMap&&o.enable(22),t.roughnessMap&&o.enable(23),t.metalnessMap&&o.enable(24),t.gradientMap&&o.enable(25),t.alphaMap&&o.enable(26),t.alphaTest&&o.enable(27),t.vertexColors&&o.enable(28),t.vertexAlphas&&o.enable(29),t.vertexUvs&&o.enable(30),t.vertexTangents&&o.enable(31),t.uvsVertexOnly&&o.enable(32),t.fog&&o.enable(33),e.push(o.mask),o.disableAll(),t.useFog&&o.enable(0),t.flatShading&&o.enable(1),t.logarithmicDepthBuffer&&o.enable(2),t.skinning&&o.enable(3),t.morphTargets&&o.enable(4),t.morphNormals&&o.enable(5),t.morphColors&&o.enable(6),t.premultipliedAlpha&&o.enable(7),t.shadowMapEnabled&&o.enable(8),t.physicallyCorrectLights&&o.enable(9),t.doubleSided&&o.enable(10),t.flipSided&&o.enable(11),t.useDepthPacking&&o.enable(12),t.dithering&&o.enable(13),t.specularIntensityMap&&o.enable(14),t.specularColorMap&&o.enable(15),t.transmission&&o.enable(16),t.transmissionMap&&o.enable(17),t.thicknessMap&&o.enable(18),t.sheen&&o.enable(19),t.sheenColorMap&&o.enable(20),t.sheenRoughnessMap&&o.enable(21),t.decodeVideoTexture&&o.enable(22),t.opaque&&o.enable(23),e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;return n=t?tb.clone(_b[t].uniforms):e.uniforms,n},acquireProgram:function(t,n){let r;for(let e=0,i=l.length;e<i;e++){const t=l[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new yx(e,n,t,s),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function wx(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Sx(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ex(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Cx(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,a,o){let u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=s,u.renderOrder=n.renderOrder,u.z=a,u.group=o),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,o,u,l){const c=s(e,t,a,o,u,l);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(e,t,a,o,u,l){const c=s(e,t,a,o,u,l);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Sx),r.length>1&&r.sort(t||Ex),i.length>1&&i.sort(t||Ex)}}}function kx(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new Cx,e.set(t,[r])):n>=e.get(t).length?(r=new Cx,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function Tx(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ny,color:new Hg};break;case"SpotLight":n={position:new ny,direction:new ny,color:new Hg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ny,color:new Hg,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ny,skyColor:new Hg,groundColor:new Hg};break;case"RectAreaLight":n={color:new Hg,position:new ny,halfWidth:new ny,halfHeight:new ny}}return e[t.id]=n,n}}}let Ax=0;function Mx(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Nx(e,t){const n=new Tx,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ng};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ng,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new ny);const s=new ny,a=new Ry,o=new Ry;return{setup:function(s,a){let o=0,u=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,g=0,y=0;s.sort(Mx);const v=!0!==a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,b=t.intensity,_=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*b*v,u+=a.g*b*v,l+=a.b*b*v;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*v),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(b*v),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=x,i.spotShadowMatrix[d]=t.shadow.matrix,y++}i.spot[d]=e,d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*v),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=x,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*v),e.groundColor.copy(t.groundColor).multiplyScalar(b*v),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2?(i.rectAreaLTC1=bb.LTC_FLOAT_1,i.rectAreaLTC2=bb.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=bb.LTC_FLOAT_1,i.rectAreaLTC2=bb.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=bb.LTC_HALF_1,i.rectAreaLTC2=bb.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=u,i.ambient[2]=l;const b=i.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===y||(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,b.directionalLength=c,b.pointLength=h,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=y,i.version=Ax++)},setupView:function(e,t){let n=0,r=0,u=0,l=0,c=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),u++}else if(t.isRectAreaLight){const e=i.rectArea[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(t.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),l++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),c++}}},state:i}}function Ix(e,t){const n=new Nx(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Dx(e,t){let n=new WeakMap;return{get:function(r,i=0){let s;return!1===n.has(r)?(s=new Ix(e,t),n.set(r,[s])):i>=n.get(r).length?(s=new Ix(e,t),n.get(r).push(s)):s=n.get(r)[i],s},dispose:function(){n=new WeakMap}}}class Rx extends yv{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lx extends yv{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ny,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Ox(e,t,n){let r=new fb;const i=new Ng,s=new Ng,a=new Yg,o=new Rx({depthPacking:3201}),u=new Lx,l={},c=n.maxTextureSize,h={0:1,1:0,2:2},d=new nb({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ng},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Dv;f.setAttribute("position",new xv(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Zv(f,d),g=this;function y(n,r){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Jg(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,p,m,null)}function v(t,n,r,i,s,a){let c=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===r.isPointLight?u:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=c.uuid,t=n.uuid;let r=l[e];void 0===r&&(r={},l[e]=r);let i=r[t];void 0===i&&(i=c.clone(),r[t]=i),c=i}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=s),c}function b(n,i,s,a,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let u=0,l=t.length;u<l;u++){const l=t[u],c=i[l.materialIndex];if(c&&c.visible){const t=v(n,c,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,l)}}}else if(i.visible){const t=v(n,i,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,null)}}const u=n.children;for(let e=0,t=u.length;e<t;e++)b(u[e],i,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const u=t[p],l=u.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const h=l.getFrameExtents();i.multiply(h),s.copy(l.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/h.x),i.x=s.x*h.x,l.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/h.y),i.y=s.y*h.y,l.mapSize.y=s.y)),null===l.map&&(l.map=new Jg(i.x,i.y,3!==this.type?{minFilter:1003,magFilter:1003}:{}),l.map.texture.name=u.name+".shadowMap",l.camera.updateProjectionMatrix()),e.setRenderTarget(l.map),e.clear();const f=l.getViewportCount();for(let e=0;e<f;e++){const t=l.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),l.updateMatrices(u,e),r=l.getFrustum(),b(n,o,l.camera,u,this.type)}!0!==l.isPointLightShadow&&3===this.type&&y(l,o),l.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(u,l,h)}}function Fx(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new Yg;let r=null;const i=new Yg(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,a,o){!0===o&&(t*=a,r*=a,s*=a),n.set(t,r,s,a),!1===i.equals(n)&&(e.clearColor(t,r,s,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?z(2929):$(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,s=null,a=null,o=null,u=null,l=null;return{setTest:function(e){t||(e?z(2960):$(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&s===a||(e.stencilFunc(t,n,a),r=t,i=n,s=a)},setOp:function(t,n,r){a===t&&o===n&&u===r||(e.stencilOp(t,n,r),a=t,o=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,a=null,o=null,u=null,l=null}}};let o={},u={},l=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,y=null,v=null,b=null,_=!1,x=null,w=null,S=null,E=null,C=null;const k=e.getParameter(35661);let T=!1,A=0;const M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(M)[1]),T=A>=1):-1!==M.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),T=A>=2);let N=null,I={};const D=e.getParameter(3088),R=e.getParameter(2978),L=(new Yg).fromArray(D),O=(new Yg).fromArray(R);function F(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return s}const P={};function z(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function $(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}P[3553]=F(3553,3553,1),P[34067]=F(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),z(2929),s.setFunc(3),W(!1),H(1),z(2884),V(0);const B={100:32774,101:32778,102:32779};if(r)B[103]=32775,B[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(B[103]=e.MIN_EXT,B[104]=e.MAX_EXT)}const U={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(t,n,r,i,s,a,o,u){if(0!==t){if(!1===d&&(z(3042),d=!0),5===t)s=s||n,a=a||r,o=o||i,n===f&&s===y||(e.blendEquationSeparate(B[n],B[s]),f=n,y=s),r===m&&i===g&&a===v&&o===b||(e.blendFuncSeparate(U[r],U[i],U[a],U[o]),m=r,g=i,v=a,b=o),p=t,_=null;else if(t!==p||u!==_){if(100===f&&100===y||(e.blendEquation(32774),f=100,y=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,v=null,b=null,p=t,_=u}}else!0===d&&($(3042),d=!1)}function W(t){x!==t&&(e.frontFace(t?2304:2305),x=t)}function H(t){0!==t?(z(2884),t!==w&&e.cullFace(1===t?1029:2===t?1028:1032)):$(2884),w=t}function G(t,n,r){t?(z(32823),E===n&&C===r||(e.polygonOffset(n,r),E=n,C=r)):$(32823)}function j(t){void 0===t&&(t=33984+k-1),N!==t&&(e.activeTexture(t),N=t)}return{buffers:{color:i,depth:s,stencil:a},enable:z,disable:$,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(r,i){let s=c,a=!1;if(r)if(s=l.get(i),void 0===s&&(s=[],l.set(i,s)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?$(2884):z(2884);let n=1===e.side;t&&(n=!n),W(n),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),G(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?z(32926):$(32926)},setFlipSided:W,setCullFace:H,setLineWidth:function(t){t!==S&&(T&&e.lineWidth(t),S=t)},setPolygonOffset:G,setScissorTest:function(e){e?z(3089):$(3089)},activeTexture:j,bindTexture:function(t,n){null===N&&j();let r=I[N];void 0===r&&(r={type:void 0,texture:void 0},I[N]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||P[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=I[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},N=null,I={},u={},l=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,y=null,v=null,b=null,_=!1,x=null,w=null,S=null,E=null,C=null,L.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),a.reset()}}}function Px(e,t,n,r,i,s,a){const o=i.isWebGL2,u=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function v(e,t){return y?new OffscreenCanvas(e,t):Rg("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Ag:Math.floor,s=r(i*e.width),a=r(i*e.height);void 0===m&&(m=v(s,a));const o=n?v(s,a):m;return o.width=s,o.height=a,o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return kg(e.width)&&kg(e.height)}function x(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function w(t){e.generateMipmap(t)}function S(n,r,i,s,a=!1){if(!1===o)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let u=r;return 6403===r&&(5126===i&&(u=33326),5131===i&&(u=33325),5121===i&&(u=33321)),33319===r&&(5126===i&&(u=33328),5131===i&&(u=33327),5121===i&&(u=33323)),6408===r&&(5126===i&&(u=34836),5131===i&&(u=34842),5121===i&&(u=3001===s&&!1===a?35907:32856),32819===i&&(u=32854),32820===i&&(u=32855)),33325!==u&&33326!==u&&33327!==u&&33328!==u&&34842!==u&&34836!==u||t.get("EXT_color_buffer_float"),u}function E(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){return 1003===e||1004===e||1005===e?9728:9729}function k(e){const t=e.target;t.removeEventListener("dispose",k),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=t.texture,i=r.get(t),s=r.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,u=n.length;o<u;o++){const t=r.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture),delete g.get(t.source)[n.__cacheKey],a.memory.textures--}let M=0;function N(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void O(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}const I={1e3:10497,1001:33071,1002:33648},D={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function R(n,s,a){if(a?(e.texParameteri(n,10242,I[s.wrapS]),e.texParameteri(n,10243,I[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,I[s.wrapR]),e.texParameteri(n,10240,D[s.magFilter]),e.texParameteri(n,10241,D[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===s.wrapS&&1001===s.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,C(s.magFilter)),e.texParameteri(n,10241,C(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(1015===s.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&1016===s.type&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function L(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k));const i=n.source;let s=g.get(i);void 0===s&&(s={},g.set(i,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),s[o].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return r}function O(t,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const u=L(t,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),l.version!==l.__currentVersion||!0===u){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!o&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===_(r.image);let i=b(r.image,t,!1,c);i=U(r,i);const h=_(i)||o,d=s.convert(r.format,r.encoding);let p,f=s.convert(r.type),m=S(r.internalFormat,d,f,r.encoding,r.isVideoTexture);R(a,r,h);const g=r.mipmaps,y=o&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===u,C=E(r,i,h);if(r.isDepthTexture)m=6402,o?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1014,f=s.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,f=s.convert(r.type))),v&&(y?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,null));else if(r.isDataTexture)if(g.length>0&&h){y&&v&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],y?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else y?(v&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,f,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,i.data);else if(r.isCompressedTexture){y&&v&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],1023!==r.format?null!==d?y?n.compressedTexSubImage2D(3553,e,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):y?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data)}else if(r.isDataArrayTexture)y?(v&&n.texStorage3D(35866,C,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isData3DTexture)y?(v&&n.texStorage3D(32879,C,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isFramebufferTexture){if(v)if(y)n.texStorage2D(3553,C,m,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,m,e,t,0,d,f,null),e>>=1,t>>=1}}else if(g.length>0&&h){y&&v&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],y?n.texSubImage2D(3553,e,0,0,d,f,p):n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1}else y?(v&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,f,i)):n.texImage2D(3553,0,m,d,f,i);x(r,h)&&w(a),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function F(t,i,a,o,u){const l=s.convert(a.format,a.encoding),c=s.convert(a.type),h=S(a.internalFormat,l,c,a.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),B(i)?d.framebufferTexture2DMultisampleEXT(36160,o,u,r.get(a).__webglTexture,0,$(i)):e.framebufferTexture2D(36160,o,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function P(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||B(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=36012:1014===t.type&&(i=33190));const r=$(n);B(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=$(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],o=s.convert(a.format,a.encoding),u=s.convert(a.type),l=S(a.internalFormat,o,u,a.encoding),c=$(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,c,l,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,c,l,n.width,n.height):e.renderbufferStorage(36161,l,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function z(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=$(i);if(1026===i.depthTexture.format)B(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):e.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");B(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):e.framebufferTexture2D(36160,33306,3553,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),P(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),P(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function $(e){return Math.min(h,e.samples)}function B(e){const n=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){const r=e.encoding,i=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||1035===e.format?n:(3e3!==r&&(3001===r?!1===o?!0===t.has("EXT_sRGB")&&1023===i?(e.format=1035,e.minFilter=1006,e.generateMipmaps=!1):n=jg.sRGBToLinear(n):1023===i&&1009===s||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n)}this.allocateTextureUnit=function(){const e=M;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=N,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const a=L(t,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),u.version!==u.__currentVersion||!0===a){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=t||i?i?r.image[e].image:r.image[e]:b(r.image[e],!1,!0,l),c[e]=U(r,c[e]);const h=c[0],d=_(h)||o,p=s.convert(r.format,r.encoding),f=s.convert(r.type),m=S(r.internalFormat,p,f,r.encoding),g=o&&!0!==r.isVideoTexture,y=void 0===u.__currentVersion||!0===a;let v,C=E(r,h,d);if(R(34067,r,d),t){g&&y&&n.texStorage2D(34067,C,m,h.width,h.height);for(let e=0;e<6;e++){v=c[e].mipmaps;for(let t=0;t<v.length;t++){const i=v[t];1023!==r.format?null!==p?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,p,f,i.data)}}}else{v=r.mipmaps,g&&y&&(v.length>0&&C++,n.texStorage2D(34067,C,m,c[0].width,c[0].height));for(let e=0;e<6;e++)if(i){g?n.texSubImage2D(34069+e,0,0,0,c[e].width,c[e].height,p,f,c[e].data):n.texImage2D(34069+e,0,m,c[e].width,c[e].height,0,p,f,c[e].data);for(let t=0;t<v.length;t++){const r=v[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,p,f,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,p,f,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,p,f,c[e]):n.texImage2D(34069+e,0,m,p,f,c[e]);for(let t=0;t<v.length;t++){const r=v[t];g?n.texSubImage2D(34069+e,t+1,0,0,p,f,r.image[e]):n.texImage2D(34069+e,t+1,m,p,f,r.image[e])}}}x(r,d)&&w(34067),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&F(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){const u=t.texture,l=r.get(t),c=r.get(u);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=u.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=_(t)||o;if(h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===B(t)){const r=d?u:[u];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];l.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[n]);const a=s.convert(i.format,i.encoding),o=s.convert(i.type),u=S(i.internalFormat,a,o,i.encoding),c=$(t);e.renderbufferStorageMultisample(36161,c,u,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,l.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),P(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),R(34067,u,p);for(let e=0;e<6;e++)F(l.__webglFramebuffer[e],t,u,36064,34069+e);x(u,p)&&w(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=r.get(s);n.bindTexture(3553,a.__webglTexture),R(3553,s,p),F(l.__webglFramebuffer,t,s,36064+i,3553),x(s,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,c.__webglTexture),R(e,u,p),F(l.__webglFramebuffer,t,u,36064,e),x(u,p)&&w(e),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){const t=_(e)||o,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=i.length;s<a;s++){const a=i[s];if(x(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===B(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=16384;const u=[],l=t.stencilBuffer?33306:36096,c=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){u.push(36064+n),t.depthBuffer&&u.push(l);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),p&&e.invalidateFramebuffer(36008,u)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,c.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=F,this.useMultisampledRTT=B}function zx(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let s;if(1009===n)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(1014===n)return 5125;if(1015===n)return 5126;if(1016===n)return r?5131:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(1023===n)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(1026===n)return 6402;if(1027===n)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===n)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(33776===n||33777===n||33778===n||33779===n)if(3001===i){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(33776===n)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(33776===n)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===n)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(37492===n)return 3001===i?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return 3001===i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(36492===n)return 3001===i?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===n?r?34042:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class $x extends ib{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Bx extends iv{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ux={type:"move"};class Vx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ny,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ny),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ny,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ny),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,o=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n);if(void 0===u.joints[s.jointName]){const e=new Bx;e.matrixAutoUpdate=!1,e.visible=!1,u.joints[s.jointName]=e,u.add(e)}const r=u.joints[s.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=u.joints["index-finger-tip"].position.distanceTo(u.joints["thumb-tip"].position),i=.02,a=.005;u.inputState.pinching&&r>i+a?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&r<=i-a&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ux)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),null!==u&&(u.visible=null!==s),this}}class Wx extends Zg{constructor(e,t,n,r,i,s,a,o,u,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1014),void 0===n&&1027===l&&(n=1020),super(null,r,i,s,a,o,l,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}}class Hx extends yg{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",o=null,u=null,l=null,c=null,h=null,d=null;const p=t.getContextAttributes();let f=null,m=null;const g=[],y=[],v=new ib;v.layers.enable(1),v.viewport=new Yg;const b=new ib;b.layers.enable(2),b.viewport=new Yg;const _=[v,b],x=new $x;x.layers.enable(1),x.layers.enable(2);let w=null,S=null;function E(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function C(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",k);for(let e=0;e<g.length;e++){const t=y[e];null!==t&&(y[e]=null,g[e].disconnect(t))}w=null,S=null,e.setRenderTarget(f),h=null,c=null,l=null,r=null,m=null,I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new Vx,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new Vx,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new Vx,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||s},this.setReferenceSpace=function(e){o=e},this.getBaseLayer=function(){return null!==c?c:h},this.getBinding=function(){return l},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(f=e.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",C),r.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i}),r.updateRenderState({baseLayer:h}),m=new Jg(h.framebufferWidth,h.framebufferHeight,{format:1023,type:1009,encoding:e.outputEncoding});else{let n=null,s=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?1027:1026,s=p.stencil?1020:1014);const o={colorFormat:32856,depthFormat:a,scaleFactor:i};l=new XRWebGLBinding(r,t),c=l.createProjectionLayer(o),r.updateRenderState({layers:[c]}),m=new Jg(c.textureWidth,c.textureHeight,{format:1023,type:1009,depthTexture:new Wx(c.textureWidth,c.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,s=await r.requestReferenceSpace(a),I.setContext(r),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const T=new ny,A=new ny;function M(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;x.near=b.near=v.near=e.near,x.far=b.far=v.far=e.far,w===x.near&&S===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,S=x.far);const t=e.parent,n=x.cameras;M(x,t);for(let r=0;r<n.length;r++)M(n[r],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.position.copy(x.position),e.quaternion.copy(x.quaternion),e.scale.copy(x.scale),e.matrix.copy(x.matrix),e.matrixWorld.copy(x.matrixWorld);const i=e.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){T.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=T.distanceTo(A),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,y=o+f;e.projectionMatrix.makePerspective(d-m,p+(r-m),u*o/y*g,l*o/y*g,g,y)}(x,v,b):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==c&&(c.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let N=null;const I=new mb;I.setAnimationLoop((function(t,n){if(u=n.getViewerPose(o||s),d=n,null!==u){const t=u.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==h)s=h.getViewport(i);else{const t=l.getViewSubImage(c,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,c.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=_[r];void 0===a&&(a=new ib,a.layers.enable(r),a.viewport=new Yg,_[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===r&&x.matrix.copy(a.matrix),!0===n&&x.cameras.push(a)}}for(let e=0;e<g.length;e++){const t=y[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,o||s)}N&&N(t,n),d=null})),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}function Gx(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let s,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.roughnessMap?s=r.roughnessMap:r.metalnessMap?s=r.metalnessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap?s=r.emissiveMap:r.clearcoatMap?s=r.clearcoatMap:r.clearcoatNormalMap?s=r.clearcoatNormalMap:r.clearcoatRoughnessMap?s=r.clearcoatRoughnessMap:r.iridescenceMap?s=r.iridescenceMap:r.iridescenceThicknessMap?s=r.iridescenceThicknessMap:r.specularIntensityMap?s=r.specularIntensityMap:r.specularColorMap?s=r.specularColorMap:r.transmissionMap?s=r.transmissionMap:r.thicknessMap?s=r.thicknessMap:r.sheenColorMap?s=r.sheenColorMap:r.sheenRoughnessMap&&(s=r.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,s,a){r.isMeshBasicMaterial?n(e,r):r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,s):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function jx(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Rg("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,o=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let c;c=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,y=0,v=0,b=null,_=-1,x=null;const w=new Yg,S=new Yg;let E=null,C=t.width,k=t.height,T=1,A=null,M=null;const N=new Yg(0,0,C,k),I=new Yg(0,0,C,k);let D=!1;const R=new fb;let L=!1,O=!1,F=null;const P=new Ry,z=new Ng,$=new ny,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?T:1}let V,W,H,G,j,q,K,X,Z,Y,J,Q,ee,te,ne,re,ie,se,ae,oe,ue,le,ce,he=n;function de(e,n){for(let r=0;r<e.length;r++){const i=t.getContext(e[r],n);if(null!==i)return i}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:u,failIfMajorPerformanceCaveat:l};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r142"),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",ye,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=de(t,e),null===he)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}function pe(){V=new Ub(he),W=new Eb(he,V,e),V.init(W),le=new zx(he,V,W),H=new Fx(he,V,W),G=new Hb,j=new wx,q=new Px(he,V,H,j,W,le,G),K=new kb(m),X=new Bb(m),Z=new gb(he,W),ce=new wb(he,V,Z,W),Y=new Vb(he,Z,G,ce),J=new Xb(he,Y,Z,G),ae=new Kb(he,W,q),re=new Cb(j),Q=new xx(m,K,X,V,W,ce,re),ee=new Gx(m,j),te=new kx,ne=new Dx(V,W),se=new xb(m,K,H,J,c,a),ie=new Ox(m,J,W),oe=new Sb(he,V,G,W),ue=new Wb(he,V,G,W),G.programs=Q.programs,m.capabilities=W,m.extensions=V,m.properties=j,m.renderLists=te,m.shadowMap=ie,m.state=H,m.info=G}pe();const fe=new Hx(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=G.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;pe(),G.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ye(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){(function(e){const t=j.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))})(e),j.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(C,k,!1))},this.getSize=function(e){return e.set(C,k)},this.setSize=function(e,n,r){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,k=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(C*T,k*T).floor()},this.setDrawingBufferSize=function(e,n,r){C=e,k=n,T=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),H.viewport(w.copy(N).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),H.scissor(S.copy(I).multiplyScalar(T).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){H.setScissorTest(D=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){M=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",ye,!1),te.dispose(),ne.dispose(),j.dispose(),K.dispose(),X.dispose(),J.dispose(),ce.dispose(),Q.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",_e),fe.removeEventListener("sessionend",xe),F&&(F.dispose(),F=null),we.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=B);const a=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=B),q.resetTextureUnits();const s=t.fog,a=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:3e3,o=(r.isMeshStandardMaterial?X:K).get(r.envMap||(r.isMeshStandardMaterial?t.environment:null)),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,l=!!r.normalMap&&!!n.attributes.tangent,c=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=r.toneMapped?m.toneMapping:0,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,v=j.get(r),w=d.state.lights;!0!==L||!0!==O&&e===x||re.setState(r,e,e===x&&r.id===_);let S=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==w.state.version?S=!0:v.outputEncoding!==a?S=!0:i.isInstancedMesh&&!1===v.instancing?S=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?S=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==o?S=!0:!0===r.fog&&v.fog!==s?S=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===re.numPlanes&&v.numIntersection===re.numIntersection?v.vertexAlphas!==u?S=!0:v.vertexTangents!==l?S=!0:v.morphTargets!==c?S=!0:v.morphNormals!==h?S=!0:v.morphColors!==p?S=!0:v.toneMapping!==f?S=!0:!0===W.isWebGL2&&v.morphTargetsCount!==y&&(S=!0):S=!0:S=!0:S=!0:(S=!0,v.__version=r.version);let E=v.currentProgram;!0===S&&(E=ke(r,t,i));let C=!1,A=!1,M=!1;const N=E.getUniforms(),I=v.uniforms;if(H.useProgram(E.program)&&(C=!0,A=!0,M=!0),r.id!==_&&(_=r.id,A=!0),C||x!==e){if(N.setValue(he,"projectionMatrix",e.projectionMatrix),W.logarithmicDepthBuffer&&N.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,A=!0,M=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=N.map.cameraPosition;void 0!==t&&t.setValue(he,$.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&N.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&N.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){N.setOptional(he,i,"bindMatrix"),N.setOptional(he,i,"bindMatrixInverse");const e=i.skeleton;e&&(W.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),N.setValue(he,"boneTexture",e.boneTexture,q),N.setValue(he,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const D=n.morphAttributes;var R,P;return(void 0!==D.position||void 0!==D.normal||void 0!==D.color&&!0===W.isWebGL2)&&ae.update(i,n,r,E),(A||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,N.setValue(he,"receiveShadow",i.receiveShadow)),A&&(N.setValue(he,"toneMappingExposure",m.toneMappingExposure),v.needsLights&&((R=I).ambientLightColor.needsUpdate=P=M,R.lightProbe.needsUpdate=P,R.directionalLights.needsUpdate=P,R.directionalLightShadows.needsUpdate=P,R.pointLights.needsUpdate=P,R.pointLightShadows.needsUpdate=P,R.spotLights.needsUpdate=P,R.spotLightShadows.needsUpdate=P,R.rectAreaLights.needsUpdate=P,R.hemisphereLights.needsUpdate=P),s&&!0===r.fog&&ee.refreshFogUniforms(I,s),ee.refreshMaterialUniforms(I,r,T,k,F),Q_.upload(he,v.uniformsList,I,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Q_.upload(he,v.uniformsList,I,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&N.setValue(he,"center",i.center),N.setValue(he,"modelViewMatrix",i.modelViewMatrix),N.setValue(he,"normalMatrix",i.normalMatrix),N.setValue(he,"modelMatrix",i.matrixWorld),E}(e,t,n,r,i);H.setMaterial(r,a);let u=n.index;const l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;let c,h=1;!0===r.wireframe&&(u=Y.getWireframeAttribute(n),h=2),ce.setup(i,r,o,n,u);let p=oe;null!==u&&(c=Z.get(u),p=ue,p.setIndex(c));const f=null!==u?u.count:l.count,g=n.drawRange.start*h,y=n.drawRange.count*h,v=null!==s?s.start*h:0,w=null!==s?s.count*h:1/0,S=Math.max(g,v),E=Math.min(f,g+y,v+w)-1,C=Math.max(0,E-S+1);if(0!==C){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*U()),p.setMode(1)):p.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*U()),p.setMode(i.isLineSegments?1:i.isLineLoop?2:3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(S,C,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(S,C,e)}else p.render(S,C)}},this.compile=function(e,t){d=ne.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)ke(n[r],e,t);else ke(n,e,t)})),f.pop(),d=null};let be=null;function _e(){we.stop()}function xe(){we.start()}const we=new mb;function Se(e,t,n,r){const i=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),a.length>0&&function(e,t,n){const r=W.isWebGL2;null===F&&(F=new Jg(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:r&&!0===s?4:0})),m.getDrawingBufferSize(z),r?F.setSize(z.x,z.y):F.setSize(Ag(z.x),Ag(z.y));const i=m.getRenderTarget();m.setRenderTarget(F),m.clear();const a=m.toneMapping;m.toneMapping=0,Ee(e,t,n),m.toneMapping=a,q.updateMultisampleRenderTarget(F),q.updateRenderTargetMipmap(F),m.setRenderTarget(i)}(i,t,n),r&&H.viewport(w.copy(r)),i.length>0&&Ee(i,t,n),a.length>0&&Ee(a,t,n),o.length>0&&Ee(o,t,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Ee(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=s.object,o=s.geometry,u=null===r?s.material:r,l=s.group;a.layers.test(n.layers)&&Ce(a,t,n,o,u,l)}}function Ce(e,t,n,r,i,s){e.onBeforeRender(m,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,s),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,s),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,s),i.side=2):m.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(m,t,n,r,i,s)}function ke(e,t,n){!0!==t.isScene&&(t=B);const r=j.get(e),i=d.state.lights,s=i.state.version,a=Q.getParameters(e,i.state,d.state.shadowsArray,t,n),o=Q.getProgramCacheKey(a);let u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?X:K).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",ve),u=new Map,r.programs=u);let l=u.get(o);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===s)return Te(e,a),l}else a.uniforms=Q.getUniforms(e),e.onBuild(n,a,m),e.onBeforeCompile(a,m),l=Q.acquireProgram(a,o),u.set(o,l),r.uniforms=a.uniforms;const c=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(c.clippingPlanes=re.uniform),Te(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(c.ambientLightColor.value=i.state.ambient,c.lightProbe.value=i.state.probe,c.directionalLights.value=i.state.directional,c.directionalLightShadows.value=i.state.directionalShadow,c.spotLights.value=i.state.spot,c.spotLightShadows.value=i.state.spotShadow,c.rectAreaLights.value=i.state.rectArea,c.ltc_1.value=i.state.rectAreaLTC1,c.ltc_2.value=i.state.rectAreaLTC2,c.pointLights.value=i.state.point,c.pointLightShadows.value=i.state.pointShadow,c.hemisphereLights.value=i.state.hemi,c.directionalShadowMap.value=i.state.directionalShadowMap,c.directionalShadowMatrix.value=i.state.directionalShadowMatrix,c.spotShadowMap.value=i.state.spotShadowMap,c.spotShadowMatrix.value=i.state.spotShadowMatrix,c.pointShadowMap.value=i.state.pointShadowMap,c.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=l.getUniforms(),p=Q_.seqWithValue(h.seq,c);return r.currentProgram=l,r.uniformsList=p,l}function Te(e,t){const n=j.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}we.setAnimationLoop((function(e){be&&be(e)})),"undefined"!=typeof self&&we.setContext(self),this.setAnimationLoop=function(e){be=e,fe.setAnimationLoop(e),null===e?we.stop():we.start()},fe.addEventListener("sessionstart",_e),fe.addEventListener("sessionend",xe),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==g){if(!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),d=ne.get(e,f.length),d.init(),f.push(d),P.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(P),O=this.localClippingEnabled,L=re.init(this.clippingPlanes,O,t),h=te.get(e,p.length),h.init(),p.push(h),function e(t,n,r,i){if(!1===t.visible)return;if(t.layers.test(n.layers))if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||R.intersectsSprite(t)){i&&$.setFromMatrixPosition(t.matrixWorld).applyMatrix4(P);const e=J.update(t),n=t.material;n.visible&&h.push(t,e,n,r,$.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==G.render.frame&&(t.skeleton.update(),t.skeleton.frame=G.render.frame),!t.frustumCulled||R.intersectsObject(t))){i&&$.setFromMatrixPosition(t.matrixWorld).applyMatrix4(P);const e=J.update(t),n=t.material;if(Array.isArray(n)){const i=e.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=n[a.materialIndex];o&&o.visible&&h.push(t,e,o,r,$.z,a)}}else n.visible&&h.push(t,e,n,r,$.z,null)}const s=t.children;for(let a=0,o=s.length;a<o;a++)e(s[a],n,r,i)}(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,M),!0===L&&re.beginShadows(),ie.render(d.state.shadowsArray,e,t),!0===L&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Se(h,e,r,r.viewport)}}else Se(h,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),ce.resetDefaultState(),_=-1,x=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){j.get(e.texture).__webglTexture=t,j.get(e.depthTexture).__webglTexture=n;const r=j.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=j.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){b=e,y=t,v=n;let r=!0;if(e){const t=j.get(e);void 0!==t.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?q.setupRenderTarget(e):t.__hasExternalTextures&&q.rebindTextures(e,j.get(e.texture).__webglTexture,j.get(e.depthTexture).__webglTexture)}let i=null,s=!1,a=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=j.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],s=!0):i=W.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?j.get(e).__webglMultisampledFramebuffer:r,w.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else w.copy(N).multiplyScalar(T).floor(),S.copy(I).multiplyScalar(T).floor(),E=D;if(H.bindFramebuffer(36160,i)&&W.drawBuffers&&r&&H.drawBuffers(e,i),H.viewport(w),H.scissor(S),H.setScissorTest(E),s){const r=j.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=j.get(e.texture);he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,t||0)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=j.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){H.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,u=a.type;if(1023!==o&&le.convert(o)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=1016===u&&(V.has("EXT_color_buffer_half_float")||W.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(1009===u||le.convert(u)===he.getParameter(35738)||1015===u&&(W.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,le.convert(o),le.convert(u),s)}finally{const e=null!==b?j.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);q.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,s),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,a=le.convert(n.format),o=le.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,s,a,o,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,a,o,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,u=le.convert(r.format),l=le.convert(r.type);let c;if(r.isData3DTexture)q.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),c=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),p=he.getParameter(3316),f=he.getParameter(3315),g=he.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,y.width),he.pixelStorei(32878,y.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(c,i,t.x,t.y,t.z,s,a,o,u,l,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(c,i,t.x,t.y,t.z,s,a,o,u,y.data)):he.texSubImage3D(c,i,t.x,t.y,t.z,s,a,o,u,l,y),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,p),he.pixelStorei(3315,f),he.pixelStorei(32877,g),0===i&&r.generateMipmaps&&he.generateMipmap(c),H.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){y=0,v=0,b=null,H.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends jx{}).prototype.isWebGL1Renderer=!0;class qx extends iv{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class Kx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wg()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wg()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wg()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xx=new ny;class Zx{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Xx.fromBufferAttribute(this,t),Xx.applyMatrix4(e),this.setXYZ(t,Xx.x,Xx.y,Xx.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xx.fromBufferAttribute(this,t),Xx.applyNormalMatrix(e),this.setXYZ(t,Xx.x,Xx.y,Xx.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xx.fromBufferAttribute(this,t),Xx.transformDirection(e),this.setXYZ(t,Xx.x,Xx.y,Xx.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new xv(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zx(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Yx=new ny,Jx=new Yg,Qx=new Yg,ew=new ny,tw=new Ry;class nw extends Zv{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ry,this.bindMatrixInverse=new Ry}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yg,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Jx.fromBufferAttribute(r.attributes.skinIndex,e),Qx.fromBufferAttribute(r.attributes.skinWeight,e),Yx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Qx.getComponent(i);if(0!==e){const r=Jx.getComponent(i);tw.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ew.copy(Yx).applyMatrix4(tw),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class rw extends iv{constructor(){super(),this.isBone=!0,this.type="Bone"}}class iw extends Zg{constructor(e=null,t=1,n=1,r,i,s,a,o,u=1003,l=1003,c,h){super(null,s,a,o,u,l,r,i,c,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sw=new Ry,aw=new Ry;class ow{constructor(e=[],t=[]){this.uuid=wg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ry)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ry;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++)sw.multiplyMatrices(e[i]?e[i].matrixWorld:aw,t[i]),sw.toArray(n,16*i);null!==r&&(r.needsUpdate=!0)}clone(){return new ow(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Tg(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new iw(t,e,e,1023,1015);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new rw),this.bones.push(i),this.boneInverses.push((new Ry).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class uw extends yv{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Hg(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lw=new ny,cw=new ny,hw=new Ry,dw=new Dy,pw=new Ey;class fw extends iv{constructor(e=new Dv,t=new uw){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)lw.fromBufferAttribute(t,e-1),cw.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=lw.distanceTo(cw);e.setAttribute("lineDistance",new Ev(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pw.copy(n.boundingSphere),pw.applyMatrix4(r),pw.radius+=i,!1===e.ray.intersectsSphere(pw))return;hw.copy(r).invert(),dw.copy(e.ray).applyMatrix4(hw);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,u=new ny,l=new ny,c=new ny,h=new ny,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p)for(let m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count)-1;m<g;m+=d){const n=p.getX(m),r=p.getX(m+1);if(u.fromBufferAttribute(f,n),l.fromBufferAttribute(f,r),dw.distanceSqToSegment(u,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(h);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(let m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count)-1;m<g;m+=d){if(u.fromBufferAttribute(f,m),l.fromBufferAttribute(f,m+1),dw.distanceSqToSegment(u,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const mw=new ny,gw=new ny;class yw extends fw{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)mw.fromBufferAttribute(t,e),gw.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+mw.distanceTo(gw);e.setAttribute("lineDistance",new Ev(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vw extends fw{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bw extends yv{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Hg(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _w=new Ry,xw=new Dy,ww=new Ey,Sw=new ny;class Ew extends iv{constructor(e=new Dv,t=new bw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ww.copy(n.boundingSphere),ww.applyMatrix4(r),ww.radius+=i,!1===e.ray.intersectsSphere(ww))return;_w.copy(r).invert(),xw.copy(e.ray).applyMatrix4(_w);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,u=n.index,l=n.attributes.position;if(null!==u)for(let c=Math.max(0,s.start),h=Math.min(u.count,s.start+s.count);c<h;c++){const n=u.getX(c);Sw.fromBufferAttribute(l,n),Cw(Sw,n,o,r,e,t,this)}else for(let c=Math.max(0,s.start),h=Math.min(l.count,s.start+s.count);c<h;c++)Sw.fromBufferAttribute(l,c),Cw(Sw,c,o,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Cw(e,t,n,r,i,s,a){const o=xw.distanceSqToPoint(e);if(o<n){const n=new ny;xw.closestPointToPoint(e,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class kw extends yv{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Hg(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Hg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ng(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tw extends kw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ng(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Sg(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Hg(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Hg(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Hg(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}const Aw={arraySlice:function(e,t,n){return Aw.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,a=0;a!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let a=s[r];if(void 0!==a)if(Array.isArray(a))do{a=s[r],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[i++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[r],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{a=s[r],void 0!==a&&(t.push(s.time),n.push(a)),s=e[i++]}while(void 0!==s)},subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const a=[];for(let u=0;u<s.tracks.length;++u){const e=s.tracks[u],t=e.getValueSize(),o=[],l=[];for(let s=0;s<e.times.length;++s){const a=e.times[s]*i;if(!(a<n||a>=r)){o.push(e.times[s]);for(let n=0;n<t;++n)l.push(e.values[s*t+n])}}0!==o.length&&(e.times=Aw.convertArray(o,e.times.constructor),e.values=Aw.convertArray(l,e.values.constructor),a.push(e))}s.tracks=a;let o=1/0;for(let u=0;u<s.tracks.length;++u)o>s.tracks[u].times[0]&&(o=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let o=0;const u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);let l=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);const h=t.times.length-1;let d;if(s<=t.times[0])d=Aw.arraySlice(t.values,o,u-o);else if(s>=t.times[h]){const e=h*u+o;d=Aw.arraySlice(t.values,e,e+u-o)}else{const e=t.createInterpolant(),n=o,r=u-o;e.evaluate(s),d=Aw.arraySlice(e.resultBuffer,n,r)}"quaternion"===r&&(new ty).fromArray(d).normalize().conjugate().toArray(d);const p=i.times.length;for(let e=0;e<p;++e){const t=e*c+l;if("quaternion"===r)ty.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=c-2*l;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=2501,e}};class Mw{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nw extends Mw{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],o=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*n-t;break;case 2402:s=1,o=n+r[1]-r[0];break;default:s=e-1,o=t}const u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(o-n),this._offsetPrev=i*l,this._offsetNext=s*l}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,u=o-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let _=0;_!==a;++_)i[_]=g*s[l+_]+y*s[u+_]+v*s[o+_]+b*s[c+_];return i}}class Iw extends Mw{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,u=o-a,l=(n-t)/(r-t),c=1-l;for(let h=0;h!==a;++h)i[h]=s[u+h]*c+s[o+h]*l;return i}}class Dw extends Mw{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Rw{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Aw.convertArray(t,this.TimeBufferType),this.values=Aw.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Aw.convertArray(e.times,Array),values:Aw.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Iw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Nw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=Aw.arraySlice(n,i,s),this.values=Aw.arraySlice(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==i;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,s),e=!1;break}s=t}if(void 0!==r&&Aw.isTypedArray(r))for(let a=0,o=r.length;a!==o;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=Aw.arraySlice(this.times),t=Aw.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1;let s=1;for(let a=1;a<i;++a){let i=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[s+a]){i=!0;break}}}if(i){if(a!==s){e[s]=e[a];const r=a*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,a=0;a!==n;++a)t[r+a]=t[e+a];++s}return s!==e.length?(this.times=Aw.arraySlice(e,0,s),this.values=Aw.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=Aw.arraySlice(this.times,0),t=Aw.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Rw.prototype.TimeBufferType=Float32Array,Rw.prototype.ValueBufferType=Float32Array,Rw.prototype.DefaultInterpolation=2301;class Lw extends Rw{}Lw.prototype.ValueTypeName="bool",Lw.prototype.ValueBufferType=Array,Lw.prototype.DefaultInterpolation=2300,Lw.prototype.InterpolantFactoryMethodLinear=void 0,Lw.prototype.InterpolantFactoryMethodSmooth=void 0;class Ow extends Rw{}Ow.prototype.ValueTypeName="color";class Fw extends Rw{}Fw.prototype.ValueTypeName="number";class Pw extends Mw{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let u=e*a;for(let l=u+a;u!==l;u+=4)ty.slerpFlat(i,0,s,u-a,s,u,o);return i}}class zw extends Rw{InterpolantFactoryMethodLinear(e){return new Pw(this.times,this.values,this.getValueSize(),e)}}zw.prototype.ValueTypeName="quaternion",zw.prototype.DefaultInterpolation=2301,zw.prototype.InterpolantFactoryMethodSmooth=void 0;class $w extends Rw{}$w.prototype.ValueTypeName="string",$w.prototype.ValueBufferType=Array,$w.prototype.DefaultInterpolation=2300,$w.prototype.InterpolantFactoryMethodLinear=void 0,$w.prototype.InterpolantFactoryMethodSmooth=void 0;class Bw extends Rw{}Bw.prototype.ValueTypeName="vector";class Uw{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=wg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(Vw(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(Rw.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let a=0;a<i;a++){let e=[],o=[];e.push((a+i-1)%i,a,(a+1)%i),o.push(0,1,0);const u=Aw.getKeyframeOrder(e);e=Aw.sortedArray(e,1,u),o=Aw.sortedArray(o,1,u),r||0!==e[0]||(e.push(i),o.push(o[0])),s.push(new Fw(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],a=[];Aw.flattenJSON(n,s,a,r),0!==s.length&&i.push(new e(t,s,a))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const u=e.hierarchy||[];for(let l=0;l<u.length;l++){const e=u[l].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],s=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),s.push(r.morphTarget===i?1:0)}r.push(new Fw(".morphTargetInfluence["+i+"]",t,s))}o=t.length*s}else{const i=".bones["+t[l].name+"]";n(Bw,i+".position",e,"pos",r),n(zw,i+".quaternion",e,"rot",r),n(Bw,i+".scale",e,"scl",r)}}return 0===r.length?null:new this(i,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Vw(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fw;case"vector":case"vector2":case"vector3":case"vector4":return Bw;case"color":return Ow;case"quaternion":return zw;case"bool":case"boolean":return Lw;case"string":return $w}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Aw.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Ww={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Hw=new class{constructor(e,t,n){const r=this;let i=!1,s=0,a=0,o=void 0;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,s,a),i=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,a),s===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){const t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=u.length;t<n;t+=2){const n=u[t],r=u[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}};class Gw{constructor(e){this.manager=void 0!==e?e:Hw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const jw={};class qw extends Gw{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Ww.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==jw[e])return void jw[e].push({onLoad:t,onProgress:n,onError:r});jw[e]=[],jw[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=jw[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),s=i?parseInt(i):0,a=0!==s;let o=0;const u=new ReadableStream({start(e){!function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}})}()}});return new Response(u)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,a));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{Ww.add(e,t);const n=jw[e];delete jw[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=jw[e];if(void 0===n)throw this.manager.itemError(e),t;delete jw[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Kw extends Gw{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ww.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a=Rg("img");function o(){l(),Ww.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",o,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Xw extends Gw{constructor(e){super(e)}load(e,t,n,r){const i=new Zg,s=new Kw(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Zw extends iv{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Hg(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Yw=new Ry,Jw=new ny,Qw=new ny;class eS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ng(512,512),this.map=null,this.mapPass=null,this.matrix=new Ry,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fb,this._frameExtents=new Ng(1,1),this._viewportCount=1,this._viewports=[new Yg(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Jw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jw),Qw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Qw),t.updateMatrixWorld(),Yw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yw),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class tS extends eS{constructor(){super(new ib(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*xg*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class nS extends Zw{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(iv.DefaultUp),this.updateMatrix(),this.target=new iv,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.shadow=new tS}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const rS=new Ry,iS=new ny,sS=new ny;class aS extends eS{constructor(){super(new ib(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ng(4,2),this._viewportCount=6,this._viewports=[new Yg(2,1,1,1),new Yg(0,1,1,1),new Yg(3,1,1,1),new Yg(1,1,1,1),new Yg(3,0,1,1),new Yg(1,0,1,1)],this._cubeDirections=[new ny(1,0,0),new ny(-1,0,0),new ny(0,0,1),new ny(0,0,-1),new ny(0,1,0),new ny(0,-1,0)],this._cubeUps=[new ny(0,1,0),new ny(0,1,0),new ny(0,1,0),new ny(0,1,0),new ny(0,0,1),new ny(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),iS.setFromMatrixPosition(e.matrixWorld),n.position.copy(iS),sS.copy(n.position),sS.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(sS),n.updateMatrixWorld(),r.makeTranslation(-iS.x,-iS.y,-iS.z),rS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rS)}}class oS extends Zw{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new aS}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class uS extends eS{constructor(){super(new Tb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lS extends Zw{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(iv.DefaultUp),this.updateMatrix(),this.target=new iv,this.shadow=new uS}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cS extends Zw{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class hS{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}}class dS extends Gw{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ww.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Ww.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}class pS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fS(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fS();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fS(){return("undefined"==typeof performance?Date:performance).now()}class mS{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else s+=t,this._mixBufferRegion(n,i,0,t/s,r);this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-i,t),s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,u=t+t;o!==u;++o)if(n[o]!==n[o+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.buffer,t=this.valueSize,n=t*this._origIndex;this.binding.getValue(e,n);for(let r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let s=0;s!==i;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){ty.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;ty.multiplyQuaternionsFlat(e,s,e,t,e,n),ty.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*s+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const gS=new RegExp("[\\[\\]\\.:\\/]","g"),yS="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",vS=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",yS)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),bS=["material","materials","bones"];class _S{constructor(e,t,n){this.path=t,this.parsedPath=n||_S.parseTrackName(t),this.node=_S.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new _S.Composite(e,t,n):new _S(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gS,"")}static parseTrackName(e){const t=vS.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==bS.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=_S.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_S.Composite=class{constructor(e,t,n){const r=n||_S.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},_S.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},_S.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},_S.prototype.GetterByBindingType=[_S.prototype._getValue_direct,_S.prototype._getValue_array,_S.prototype._getValue_arrayElement,_S.prototype._getValue_toArray],_S.prototype.SetterByBindingTypeAndVersioning=[[_S.prototype._setValue_direct,_S.prototype._setValue_direct_setNeedsUpdate,_S.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_S.prototype._setValue_array,_S.prototype._setValue_array_setNeedsUpdate,_S.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_S.prototype._setValue_arrayElement,_S.prototype._setValue_arrayElement_setNeedsUpdate,_S.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_S.prototype._setValue_fromArray,_S.prototype._setValue_fromArray_setNeedsUpdate,_S.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xS{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,a=new Array(s),o={endingStart:2400,endingEnd:2400};for(let u=0;u!==s;++u){const e=i[u].createInterpolant(null);a[u]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=n/r;e.warp(1,r/n,t),this.warp(i,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,u=a.sampleValues;return o[0]=i,o[1]=i+n,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=2202===n;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=i,o[0]=t,a[1]=i+e,o[1]=n,this}}const wS=new Float32Array(1);class SS extends yg{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,u=this._bindingsByRootAndName;let l=u[o];void 0===l&&(l={},u[o]=l);for(let c=0;c!==i;++c){const e=r[c],i=e.name;let u=l[i];if(void 0!==u)++u.referenceCount,s[c]=u;else{if(u=s[c],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,i));continue}u=new mS(_S.create(n,i,t&&t._propertyBindings[c].binding.parsedPath),e.ValueTypeName,e.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,i),s[c]=u}a[c].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,a=s[i],o=a.knownActions,u=o[o.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,o[l]=u,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,a=s[r],o=t[t.length-1],u=e._cacheIndex;o._cacheIndex=u,t[u]=o,t.pop(),delete a[i],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Iw(new Float32Array(2),new Float32Array(2),1,wS),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?Uw.findByName(r,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let u=null;if(void 0===n&&(n=null!==s?s.blendMode:2500),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;u=o.knownActions[0],null===s&&(s=u._clip)}if(null===s)return null;const l=new xS(this,s,t,n);return this._bindAction(l,u),this._addInactiveAction(l,a,i),l}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Uw.findByName(n,e):e,s=this._actionsByClip[i?i.uuid:e];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){const t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,i,s);const a=this._bindings,o=this._nActiveBindings;for(let u=0;u!==o;++u)a[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class ES{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Sg(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");var CS=n("9wtq");const kS={type:"change"},TS={type:"start"},AS={type:"end"};class MS extends yg{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ny,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",W),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(kS),n.update(),i=r.NONE},this.update=function(){const t=new ny,h=(new ty).setFromUnitVectors(e.up,new ny(0,1,0)),d=h.clone().invert(),p=new ny,f=new ty,m=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(h),a.setFromVector3(t),n.autoRotate&&i===r.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=o.theta*n.dampingFactor,a.phi+=o.phi*n.dampingFactor):(a.theta+=o.theta,a.phi+=o.phi);let g=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),y<-Math.PI?y+=m:y>Math.PI&&(y-=m),a.theta=g<=y?Math.max(g,Math.min(y,a.theta)):a.theta>(g+y)/2?Math.max(g,a.theta):Math.min(y,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=u,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(l,n.dampingFactor):n.target.add(l),t.setFromSpherical(a),t.applyQuaternion(d),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(o.theta*=1-n.dampingFactor,o.phi*=1-n.dampingFactor,l.multiplyScalar(1-n.dampingFactor)):(o.set(0,0,0),l.set(0,0,0)),u=1,!!(c||p.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s)&&(n.dispatchEvent(kS),p.copy(n.object.position),f.copy(n.object.quaternion),c=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H),n.domElement.removeEventListener("pointerdown",z),n.domElement.removeEventListener("pointercancel",U),n.domElement.removeEventListener("wheel",V),n.domElement.removeEventListener("pointermove",$),n.domElement.removeEventListener("pointerup",B),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",W)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,a=new ES,o=new ES;let u=1;const l=new ny;let c=!1;const h=new Ng,d=new Ng,p=new Ng,f=new Ng,m=new Ng,g=new Ng,y=new Ng,v=new Ng,b=new Ng,_=[],x={};function w(){return Math.pow(.95,n.zoomSpeed)}function S(e){o.theta-=e}function E(e){o.phi-=e}const C=function(){const e=new ny;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),l.add(e)}}(),k=function(){const e=new ny;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),l.add(e)}}(),T=function(){const e=new ny;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){e.copy(n.object.position).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*s/i.clientHeight,n.object.matrix),k(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),k(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function A(e){n.object.isPerspectiveCamera?u/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function M(e){n.object.isPerspectiveCamera?u*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e){h.set(e.clientX,e.clientY)}function I(e){f.set(e.clientX,e.clientY)}function D(){1===_.length?h.set(_[0].pageX,_[0].pageY):h.set(.5*(_[0].pageX+_[1].pageX),.5*(_[0].pageY+_[1].pageY))}function R(){1===_.length?f.set(_[0].pageX,_[0].pageY):f.set(.5*(_[0].pageX+_[1].pageX),.5*(_[0].pageY+_[1].pageY))}function L(){const e=_[0].pageX-_[1].pageX,t=_[0].pageY-_[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function O(e){if(1==_.length)d.set(e.pageX,e.pageY);else{const t=q(e);d.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),E(2*Math.PI*p.y/t.clientHeight),h.copy(d)}function F(e){if(1===_.length)m.set(e.pageX,e.pageY);else{const t=q(e);m.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}g.subVectors(m,f).multiplyScalar(n.panSpeed),T(g.x,g.y),f.copy(m)}function P(e){const t=q(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);v.set(0,s),b.set(0,Math.pow(v.y/y.y,n.zoomSpeed)),A(b.y),y.copy(v)}function z(e){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",$),n.domElement.addEventListener("pointerup",B)),function(e){_.push(e)}(e),"touch"===e.pointerType?function(e){switch(j(e),_.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;D(),i=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;R(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&L(),n.enablePan&&R(),i=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&L(),n.enableRotate&&D(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(TS)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===n.enableZoom)return;!function(e){y.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;I(e),i=r.PAN}else{if(!1===n.enableRotate)return;N(e),i=r.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;N(e),i=r.ROTATE}else{if(!1===n.enablePan)return;I(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(TS)}(e))}function $(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(j(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;O(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;F(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&P(e),n.enablePan&&F(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&P(e),n.enableRotate&&O(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){if(!1!==n.enabled)switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),E(2*Math.PI*p.y/t.clientHeight),h.copy(d),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY),b.subVectors(v,y),b.y>0?A(w()):b.y<0&&M(w()),y.copy(v),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(n.panSpeed),T(g.x,g.y),f.copy(m),n.update()}(e)}}(e))}function B(e){G(e),0===_.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",$),n.domElement.removeEventListener("pointerup",B)),n.dispatchEvent(AS),i=r.NONE}function U(e){G(e)}function V(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(TS),function(e){e.deltaY<0?M(w()):e.deltaY>0&&A(w()),n.update()}(e),n.dispatchEvent(AS))}function W(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:T(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:T(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function H(e){!1!==n.enabled&&e.preventDefault()}function G(e){delete x[e.pointerId];for(let t=0;t<_.length;t++)if(_[t].pointerId==e.pointerId)return void _.splice(t,1)}function j(e){let t=x[e.pointerId];void 0===t&&(t=new Ng,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){return x[(e.pointerId===_[0].pointerId?_[1]:_[0]).pointerId]}n.domElement.addEventListener("contextmenu",H),n.domElement.addEventListener("pointerdown",z),n.domElement.addEventListener("pointercancel",U),n.domElement.addEventListener("wheel",V,{passive:!1}),this.update()}}class NS extends Gw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new FS(e)})),this.register((function(e){return new WS(e)})),this.register((function(e){return new HS(e)})),this.register((function(e){return new zS(e)})),this.register((function(e){return new $S(e)})),this.register((function(e){return new BS(e)})),this.register((function(e){return new US(e)})),this.register((function(e){return new OS(e)})),this.register((function(e){return new VS(e)})),this.register((function(e){return new PS(e)})),this.register((function(e){return new RS(e)})),this.register((function(e){return new GS(e)}))}load(e,t,n,r){const i=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:hS.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},o=new qw(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{i.parse(n,s,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(r){a(r)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},a={};if("string"==typeof e)i=e;else if(hS.decodeText(new Uint8Array(e,0,4))===jS){try{s[DS.KHR_BINARY_GLTF]=new qS(e)}catch(l){return void(r&&r(l))}i=s[DS.KHR_BINARY_GLTF].content}else i=hS.decodeText(new Uint8Array(e));const o=JSON.parse(i);if(void 0===o.asset||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new mE(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](u);a[e.name]=e,s[e.name]=!0}if(o.extensionsUsed)for(let c=0;c<o.extensionsUsed.length;++c){const e=o.extensionsUsed[c],t=o.extensionsRequired||[];switch(e){case DS.KHR_MATERIALS_UNLIT:s[e]=new LS;break;case DS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[e]=new YS;break;case DS.KHR_DRACO_MESH_COMPRESSION:s[e]=new KS(o,this.dracoLoader);break;case DS.KHR_TEXTURE_TRANSFORM:s[e]=new XS;break;case DS.KHR_MESH_QUANTIZATION:s[e]=new JS;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function IS(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const DS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class RS{constructor(e){this.parser=e,this.name=DS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,s=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const o=new Hg(16777215);void 0!==s.color&&o.fromArray(s.color);const u=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new lS(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new oS(o),a.distance=u;break;case"spot":a=new nS(o),a.distance=u,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class LS{constructor(){this.name=DS.KHR_MATERIALS_UNLIT}getMaterialType(){return vv}extendParams(e,t,n){const r=[];e.color=new Hg(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,3001))}return Promise.all(r)}}class OS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class FS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ng(e,e)}return Promise.all(i)}}class PS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class zS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Hg(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,3001)),void 0!==s.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class $S{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class BS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new Hg(a[0],a[1],a[2]),Promise.all(i)}}class US{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class VS{constructor(e){this.parser=e,this.name=DS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Tw:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new Hg(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,3001)),Promise.all(i)}}class WS{constructor(e){this.parser=e,this.name=DS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class HS{constructor(e){this.parser=e,this.name=DS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class GS{constructor(e){this.name=DS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,a=e.byteStride,o=new ArrayBuffer(s*a),u=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(o),s,a,u,e.mode,e.filter),o}))}return null}}const jS="glTF";class qS{constructor(e){this.name=DS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:hS.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,1313821514===n){const n=new Uint8Array(e,12+i,t);this.content=hS.decodeText(n)}else if(5130562===n){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class KS{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=DS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},u={};for(const l in s){const e=aE[l]||l.toLowerCase();a[e]=s[l]}for(const l in e.attributes){const t=aE[l]||l.toLowerCase();if(void 0!==s[l]){const r=n.accessors[e.attributes[l]];u[t]=nE[r.componentType],o[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)}),a,u)}))}))}}class XS{constructor(){this.name=DS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale?e:(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e)}}class ZS extends kw{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Hg).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class YS{constructor(){this.name=DS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return ZS}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new Hg(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture,3001)),e.emissive=new Hg(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Hg(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t,3001))}return Promise.all(i)}createMaterial(e){const t=new ZS(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class JS{constructor(){this.name=DS.KHR_MESH_QUANTIZATION}}class QS extends Mw{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,u=3*a,l=r-t,c=(n-t)/l,h=c*c,d=h*c,p=e*u,f=p-u,m=-2*d+3*h,g=d-h,y=1-m,v=g-h+c;for(let b=0;b!==a;b++)i[b]=y*s[f+b+a]+v*(s[f+b+o]*l)+m*s[p+b+a]+g*(s[p+b]*l);return i}}const eE=new ty;class tE extends QS{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return eE.fromArray(i).normalize().toArray(i),i}}const nE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},rE={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},iE={33071:1001,33648:1002,10497:1e3},sE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},aE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},oE={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uE={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300};function lE(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function cE(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function hE(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dE(e){const t=e.extensions&&e.extensions[DS.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+pE(t.attributes):e.indices+":"+pE(e.attributes)+":"+e.mode,n}function pE(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function fE(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class mE{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new IS,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader="undefined"==typeof createImageBitmap||n||r&&i<98?new Xw(this.options.manager):new dS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qw(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};lE(i,s,r),cE(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,s]of e.children.entries())i(s,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[DS.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(hS.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteOffset||0;return e.slice(n,n+(t.byteLength||0))}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return i.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],s=sE[r.type],a=nE[r.componentType],o=a.BYTES_PER_ELEMENT,u=r.byteOffset||0,l=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,c=!0===r.normalized;let h,d;if(l&&l!==o*s){const e=Math.floor(u/l),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let p=t.cache.get(n);p||(h=new a(i,e*l,r.count*l/o),p=new Kx(h,l/o),t.cache.add(n,p)),d=new Zx(p,s,u%l/o,c)}else h=null===i?new a(r.count*s):new a(i,u,r.count*s),d=new xv(h,s,c);if(void 0!==r.sparse){const t=r.sparse.values.byteOffset||0,n=new(0,nE[r.sparse.indices.componentType])(e[1],r.sparse.indices.byteOffset||0,r.sparse.count*sE.SCALAR),o=new a(e[2],t,r.sparse.count*s);null!==i&&(d=new xv(d.array.slice(),d.itemSize,d.normalized));for(let e=0,r=n.length;e<r;e++){const t=n[e];if(d.setX(t,o[e*s]),s>=2&&d.setY(t,o[e*s+1]),s>=3&&d.setZ(t,o[e*s+2]),s>=4&&d.setW(t,o[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(e){const t=this.json,n=t.textures[e].source,r=t.images[n];let i=this.textureLoader;if(r.uri){const e=this.options.manager.getHandler(r.uri);null!==e&&(i=e)}return this.loadTextureImage(e,n,i)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],a=i.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const u=this.loadImageSource(t,n).then((function(t){t.flipY=!1,s.name&&(t.name=s.name);const n=(i.samplers||{})[s.sampler]||{};return t.magFilter=rE[n.magFilter]||1006,t.minFilter=rE[n.minFilter]||1008,t.wrapS=iE[n.wrapS]||1e3,t.wrapT=iE[n.wrapT]||1e3,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=u,u}loadImageSource(e,t){const n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const i=n.images[e],s=self.URL||self.webkitURL;let a=i.uri||"",o=!1;if(void 0!==i.bufferView)a=this.getDependency("bufferView",i.bufferView).then((function(e){o=!0;const t=new Blob([e],{type:i.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(a).then((function(e){return new Promise((function(n,i){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new Zg(e);t.needsUpdate=!0,n(t)}),t.load(hS.resolveURL(e,r.path),s,void 0,i)}))})).then((function(e){var t;return!0===o&&s.revokeObjectURL(a),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(s){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[DS.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[DS.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(s);s=i.extensions[DS.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),i.associations.set(s,t)}}return void 0!==r&&(s.encoding=r),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new bw,yv.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new uw,yv.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||s){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),s&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return kw}loadMaterial(e){const t=this,n=this.extensions,r=this.json.materials[e];let i;const s={},a=r.extensions||{},o=[];if(a[DS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=n[DS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=e.getMaterialType(),o.push(e.extendParams(s,r,t))}else if(a[DS.KHR_MATERIALS_UNLIT]){const e=n[DS.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),o.push(e.extendParams(s,r,t))}else{const n=r.pbrMetallicRoughness||{};if(s.color=new Hg(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(s,"map",n.baseColorTexture,3001)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),i=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),o.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===r.doubleSided&&(s.side=2);const u=r.alphaMode||"OPAQUE";if("BLEND"===u?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,"MASK"===u&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&i!==vv&&(o.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new Ng(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&i!==vv&&(o.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&i!==vv&&(s.emissive=(new Hg).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&i!==vv&&o.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,3001)),Promise.all(o).then((function(){let a;return a=i===ZS?n[DS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new i(s),r.name&&(a.name=r.name),cE(a,r),t.associations.set(a,{materials:e}),r.extensions&&lE(n,a,r),a}))}createUniqueName(e){const t=_S.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[DS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return yE(n,e,t)}))}const s=[];for(let a=0,o=e.length;a<o;a++){const n=e[a],o=dE(n),u=r[o];if(u)s.push(u.promise);else{let e;e=n.extensions&&n.extensions[DS.KHR_DRACO_MESH_COMPRESSION]?i(n):yE(new Dv,n,t),r[o]={primitive:n,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.extensions,r=this.json.meshes[e],i=r.primitives,s=[];for(let o=0,u=i.length;o<u;o++){const e=void 0===i[o].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new kw({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),a.DefaultMaterial):this.getDependency("material",i[o].material);s.push(e)}var a;return s.push(t.loadGeometries(i)),Promise.all(s).then((function(s){const a=s.slice(0,s.length-1),o=s[s.length-1],u=[];for(let c=0,h=o.length;c<h;c++){const s=o[c],l=i[c];let h;const d=a[c];if(4===l.mode||5===l.mode||6===l.mode||void 0===l.mode)h=!0===r.isSkinnedMesh?new nw(s,d):new Zv(s,d),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),5===l.mode?h.geometry=vE(h.geometry,1):6===l.mode&&(h.geometry=vE(h.geometry,2));else if(1===l.mode)h=new yw(s,d);else if(3===l.mode)h=new fw(s,d);else if(2===l.mode)h=new vw(s,d);else{if(0!==l.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);h=new Ew(s,d)}Object.keys(h.geometry.morphAttributes).length>0&&hE(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),cE(h,r),l.extensions&&lE(n,h,l),t.assignFinalMaterial(h),u.push(h)}for(let n=0,r=u.length;n<r;n++)t.associations.set(u[n],{meshes:e,primitives:n});if(1===u.length)return u[0];const l=new Bx;t.associations.set(l,{meshes:e});for(let e=0,t=u.length;e<t;e++)l.add(u[e]);return l}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new ib(Mg.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Tb(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),cE(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],s=[],a=[];for(let o=0,u=t.channels.length;o<u;o++){const e=t.channels[o],u=t.samplers[e.sampler],l=e.target,c=void 0!==t.parameters?t.parameters[u.input]:u.input,h=void 0!==t.parameters?t.parameters[u.output]:u.output;n.push(this.getDependency("node",void 0!==l.node?l.node:l.id)),r.push(this.getDependency("accessor",c)),i.push(this.getDependency("accessor",h)),s.push(u),a.push(l)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(s),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],l=s[e],c=a[e],h=o[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,oE[h.path]){case oE.weights:d=Fw;break;case oE.rotation:d=zw;break;case oE.position:case oE.scale:default:d=Bw}const p=t.name?t.name:t.uuid,f=void 0!==c.interpolation?uE[c.interpolation]:2301,m=[];oE[h.path]===oE.weights?t.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);let g=l.array;if(l.normalized){const e=fE(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,r=m.length;e<r;e++){const t=new d(m[e]+"."+oE[h.path],n.array,g,f);"CUBICSPLINE"===c.interpolation&&(t.createInterpolant=function(e){return new(this instanceof zw?tE:QS)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(t)}}return new Uw(t.name?t.name:"animation_"+e,void 0,u)}))}createNodeMesh(e){const t=this,n=this.json.nodes[e];return void 0===n.mesh?null:t.getDependency("mesh",n.mesh).then((function(e){const r=t._getNodeRef(t.meshCache,n.mesh,e);return void 0!==n.weights&&r.traverse((function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),r}))}loadNode(e){const t=this.extensions,n=this,r=this.json.nodes[e],i=r.name?n.createUniqueName(r.name):"";return function(){const t=[],i=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return i&&t.push(i),void 0!==r.camera&&t.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(s){let a;if(a=!0===r.isBone?new rw:s.length>1?new Bx:1===s.length?s[0]:new iv,a!==s[0])for(let e=0,t=s.length;e<t;e++)a.add(s[e]);if(r.name&&(a.userData.name=r.name,a.name=i),cE(a,r),r.extensions&&lE(t,a,r),void 0!==r.matrix){const e=new Ry;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return n.associations.has(a)||n.associations.set(a,{}),n.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,s=new Bx;r.name&&(s.name=i.createUniqueName(r.name)),cE(s,r),r.extensions&&lE(n,s,r);const a=r.nodes||[],o=[];for(let u=0,l=a.length;u<l;u++)o.push(gE(a[u],s,t,i));return Promise.all(o).then((function(){return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof yv||n instanceof Zg)&&t.set(n,r);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(s),s}))}}function gE(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let s=0,a=n.length;s<a;s++){const e=n[s];if(e){r.push(e);const n=new Ry;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*s),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}e.bind(new ow(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const s=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++)s.push(gE(t[i],e,n,r))}return Promise.all(s)}))}function yE(e,t,n){const r=t.attributes,i=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=aE[a]||a.toLowerCase();t in e.attributes||i.push(s(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return cE(e,t),function(e,t,n){const r=t.attributes,i=new sy;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new ny(t[0],t[1],t[2]),new ny(s[0],s[1],s[2])),e.normalized){const t=fE(nE[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new ny,t=new ny;for(let r=0,i=s.length;r<i;r++){const i=s[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,a=r.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),r.normalized){const e=fE(nE[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new Ey;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,s=!1;for(let l=0,c=t.length;l<c;l++){const e=t[l];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const a=[],o=[],u=[];for(let l=0,c=t.length;l<c;l++){const c=t[l];if(r){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;o.push(t)}if(s){const t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;u.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(u)]).then((function(t){const n=t[1],a=t[2];return r&&(e.morphAttributes.position=t[0]),i&&(e.morphAttributes.normal=n),s&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function vE(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(2===t)for(let a=1;a<=r;a++)i.push(n.getX(0)),i.push(n.getX(a)),i.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2==0?(i.push(n.getX(a)),i.push(n.getX(a+1)),i.push(n.getX(a+2))):(i.push(n.getX(a+2)),i.push(n.getX(a+1)),i.push(n.getX(a)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(i),s}const bE=({value:e,low1:t,low2:n,high1:r,high2:i})=>n+(i-n)*(e-t)/(r-t);class _E extends yg{constructor(e){super(),this.canvas=e,this.onMouseMove=e=>{e.preventDefault();const{clientX:t,clientY:n}=e;this.lastCursorPosition=new Ng(t,n),this.cursorPosition=this.getCursorPosition(),this.cursorRotation=this.getCursorRotation()},this.onScroll=()=>{this.cursorPosition=this.getCursorPosition(),this.cursorRotation=this.getCursorRotation()},this.lastCursorPosition=this.getCenterPositionPx(),this.cursorPosition=this.getCursorPosition()}start(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("scroll",this.onScroll)}stop(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("scroll",this.onScroll)}getCursorPosition(){const{x:e,y:t}=this.lastCursorPosition,{scrollX:n,scrollY:r,innerWidth:i,innerHeight:s}=window,a=new Ng((e+n)/i*2-1,-(t+r)/s*2+1);return this.dispatchEvent({type:"cursorPosition",data:a}),a}getCursorRotation(){if(!this.cursorPosition||!this.canvas)return;const e=this.getCenterPosition(),t=new Ng;t.subVectors(this.cursorPosition,e);const{x:n,y:r}=t.clampScalar(-.65,.65),i=new ny(-r,n,0);return this.dispatchEvent({type:"cursorRotation",data:i}),t}getCenterPosition(){const e=this.getCenterPositionPx(),t=bE({value:e.x,low1:0,low2:-1,high1:window.innerWidth,high2:1}),n=-bE({value:e.y,low1:0,low2:-1,high1:window.innerHeight,high2:1});return new Ng(t,n)}getCenterPositionPx(){const{width:e,height:t}=this.canvas,{left:n,top:r}=this.canvas.getBoundingClientRect(),{pageXOffset:i,pageYOffset:s}=window;return new Ng(n+i+e/2,r+s+t/2)}}class xE extends yg{constructor(e){super(),this.loading=e}start(){const e=new ProgressEvent("progress");navigator.mediaDevices.getUserMedia({audio:!1,video:{width:{ideal:640},height:{ideal:360},facingMode:"user"}}).then(t=>{this.loading.emit(Object.assign({loaded:0,total:100},e)),this.predictor=new CS.a({apiToken:"110546ae-627f-48d4-9cf8-fd8850e0ac7f",shouldMirrorOutput:!0}),this.loading.emit(Object.assign({loaded:50,total:100},e)),window.localStream=t,this.predictor.start({stream:t}).then(()=>{this.loading.emit(Object.assign({loaded:100,total:100},e)),this.subscription=this.predictor.dataStream.subscribe(e=>{super.dispatchEvent({type:"faceDetection",data:e})})}).catch(console.error)}).catch(console.error)}stop(){var e,t,n,r;null===(e=this.predictor)||void 0===e||e.stop(),null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(r=null===(n=window.localStream)||void 0===n?void 0:n.getVideoTracks()[0])||void 0===r||r.stop()}}const wE=({value:e,inMin:t,inMax:n,outMin:r,outMax:i})=>((e=(({value:e,min:t,max:n})=>Math.min(Math.max(e,t),n))({value:e,min:t,max:n}))-t)*(i-r)/(n-t)+r,SE=({start:e,end:t,time:n=.05})=>e*(1-n)+t*n;class EE extends iv{constructor(e,t){super(),this.scene=e,this.camera=t,this.eyeLeftRotation=new ny(-1.5489931179359278,5.002408635515016e-7,3.141592528749793),this.eyeRightRotation=new ny(-1.548993618155872,2.618223344326663e-7,3.1415925287497273),this.rad=Math.PI/180,this.eyeRotationOffsetX=90*this.rad,this.targetPos=new Ng(0,0),this.currentPos=new Ng(0,0),this.setCurrentPos=()=>{const{x:e,y:t}=this.cursorPosition;Math.abs(this.camera.rotation.z)<.2?(this.targetPos.x=wE({value:t,inMin:-1,inMax:1,outMin:5*this.rad,outMax:-5*this.rad}),this.targetPos.y=wE({value:e,inMin:-1,inMax:1,outMin:-10*this.rad,outMax:10*this.rad})):this.targetPos.set(0,0),this.currentPos.x=SE({start:this.currentPos.x,end:this.targetPos.x}),this.currentPos.y=SE({start:this.currentPos.y,end:this.targetPos.y})},this.setHeadRotation=()=>{const{x:e,y:t}=this.cursorRotation;this.head.rotation.set(e,t,0)},this.setNeckRotation=()=>{this.neck.rotation.x=this.currentPos.x+.1,this.neck.rotation.y=this.currentPos.y},this.setEyeRotation=()=>{this.eye.right.rotation.x=this.currentPos.x-this.eyeRotationOffsetX,this.eye.left.rotation.x=this.currentPos.x-this.eyeRotationOffsetX,this.eye.right.rotation.z=3*this.currentPos.y+Math.PI,this.eye.left.rotation.z=3*this.currentPos.y+Math.PI},this.resetEyeRotation=()=>{this.eye.left.rotation.setFromVector3(this.eyeLeftRotation),this.eye.right.rotation.setFromVector3(this.eyeRightRotation)},this.proxy=new Proxy(this.scene,{get:(e,t)=>t in e?e[t]:e.getObjectByName(t)}),this.root=this.proxy.Wolf3D_Avatar||this.proxy.Wolf3D_Head,this.head=this.proxy.Head,this.neck=this.proxy.Neck,this.hand={},this.hand.right=this.proxy.RightHand,this.hand.right.visible=!1,this.hand.right.scale.set(0,0,0),this.hand.left=this.proxy.LeftHand,this.hand.left.visible=!1,this.hand.left.scale.set(0,0,0),this.eye={},this.eye.right=this.proxy.RightEye,this.eye.left=this.proxy.LeftEye,this.position.set(0,0,0),this.mixer=new SS(this.proxy),this.mixer.timeScale=.5,this.add(this.proxy)}setCursorRotation(e){this.cursorRotation=e}setCursorPosition(e){this.cursorPosition=e}setFaceExpressions(e){this.faceExpressions=e}setFaceRotation(e){this.faceRotation=e}setFaceTransform(e){this.faceTransform=e}update(e,t){"cursor"===t&&this.trackCursor(),"face"===t&&this.trackFace(),this.mixer.update(e)}trackCursor(){this.cursorPosition&&this.cursorRotation&&(this.setCurrentPos(),this.setHeadRotation(),this.setNeckRotation(),this.setEyeRotation())}trackFace(){if(!this.faceExpressions||!this.faceRotation||!this.faceTransform)return;this.resetEyeRotation(),Object.entries(this.faceExpressions).forEach(([e,t])=>{const n=CS.b.toARKitConvention(e);this.root.morphTargetInfluences[this.root.morphTargetDictionary[n]]=t});const{pitch:e,yaw:t,roll:n}=this.faceRotation;this.head.rotation.set(-e,t,n);const{x:r,y:i}=this.faceTransform;this.position.set(r,.5*i,0)}}class CE{constructor(e,t,n,r){return this.world=e,this.camera=t,this.renderer=n,this.onCursorPosition=({data:e})=>this.avatar.setCursorRotation(e),this.onCursorRotation=({data:e})=>this.avatar.setCursorPosition(e),this.onFaceDetection=({data:e})=>{this.avatar.setFaceExpressions(e.blendShapes),this.avatar.setFaceRotation(e.rotation),this.avatar.setFaceTransform(e.transform)},this.avatar=new EE(this.world.scene,this.camera),this.cursorTracker=new _E(this.renderer.domElement),this.cursorTracker.stop(),this.cursorTracker.removeEventListener("cursorRotation",this.onCursorPosition),this.cursorTracker.removeEventListener("cursorPosition",this.onCursorRotation),this.faceTracker=new xE(r),this.faceTracker.stop(),this.faceTracker.removeEventListener("faceDetection",this.onFaceDetection),this}withCursorTracking(){return this.cursorTracker.start(),this.cursorTracker.addEventListener("cursorRotation",this.onCursorPosition),this.cursorTracker.addEventListener("cursorPosition",this.onCursorRotation),this}withFaceTracking(){return this.faceTracker.start(),this.faceTracker.addEventListener("faceDetection",this.onFaceDetection),this}build(){return this.avatar}}class kE{constructor(e,t,n){return this.renderer=e,this.world=t,this.camera=n,this}buildAvatar(e,t){const n=new CE(this.world,this.camera,this.renderer,t);return"cursor"===e&&n.withCursorTracking(),"face"===e&&n.withFaceTracking(),n.build()}}class TE{constructor({aspect:e}){return this.camera=new ib(50,e,.1,1e3),this.camera.position.set(0,.6,.7),this.camera.updateProjectionMatrix(),this}build(){return this.camera}}class AE{constructor(e){return this.canvas=e,this}buildCamera(){return new TE(this.canvas).build()}}class ME{constructor(e,t){this.canvas=e,this.wrapper=t}parse(e){return window.parseFloat(e.replace("px",""))}get width(){const{width:e}=window.getComputedStyle(this.wrapper);return this.parse(e)}get height(){const{height:e}=window.getComputedStyle(this.wrapper);return this.parse(e)}get aspect(){return this.width/this.height}}class NE{constructor(e,t,{enableRotate:n,enableZoom:r}){return this.controls=new MS(e,t.domElement),this.controls.enablePan=!0,this.controls.enableRotate=n,this.controls.enableZoom=r,this.controls.target.set(0,.6,0),this.controls.update(),this}build(){return this.controls}}class IE{constructor(e,t){return this.camera=e,this.renderer=t,this}buildControl(e){return new NE(this.camera,this.renderer,e).build()}}class DE{constructor({canvas:e,width:t,height:n}){return this.renderer=new jx({canvas:e,alpha:!0,antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=3001,this.renderer.setClearColor(16777215,0),this.renderer.setSize(t,n,!0),this}build(){return this.renderer}}class RE{constructor(e){return this.canvas=e,this}buildRenderer(){return new DE(this.canvas).build()}}class LE{constructor(){return this.loader=new NS,this}clean(){this.world=null}resolve(e,t){return n=this,void 0,i=function*(){return new Promise(this.world?e=>e(this.world):(n,r)=>{this.loader.load(e,e=>{this.world=e,n(e)},e=>t.emit(e),e=>r(e))})},new((r=void 0)||(r=Promise))((function(e,t){function s(e){try{o(i.next(e))}catch(n){t(n)}}function a(e){try{o(i.throw(e))}catch(n){t(n)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}o((i=i.apply(n,[])).next())}));var n,r,i}}class OE{constructor(){return this.scene=new qx,this}withAmbientLight(){return this.ambientLight=new cS(2236962),this.ambientLight.intensity=5,this.scene.add(this.ambientLight),this}withBackLight(){return this.backLight=new lS(16777215),this.backLight.position.set(-4.187,.839,-5.601),this.backLight.intensity=4,this.scene.add(this.backLight),this}withFillLight(){return this.fillLight=new lS(16777215),this.fillLight.position.set(2.78,.942,2.727),this.fillLight.intensity=2,this.scene.add(this.fillLight),this}withKeyLight(){return this.keyLight=new nS(16777215),this.keyLight.position.set(-2.268,2.076,5),this.keyLight.intensity=12,this.scene.add(this.keyLight),this}withAvatar(e){return this.scene.add(e),this.backLight&&(this.backLight.target=e.head),this.keyLight&&(this.keyLight.target=e.head),this.fillLight&&(this.fillLight.target=e.head),this}build(){return this.scene}}class FE{constructor(e){return this.avatar=e,this}buildScene(){return(new OE).withAmbientLight().withBackLight().withFillLight().withKeyLight().withAvatar(this.avatar).build()}}const PE=["canvas"];let zE=(()=>{class e{constructor(){this._enableRotate=!0,this._enableZoom=!0,this.loading=new Ya,this.GLTFResolver=new LE}set tracker(e){this._tracker=e,this.main()}get tracker(){return this._tracker}set url(e){this._url=e,this.GLTFResolver.clean(),this.main()}get url(){return this._url}set enableRotate(e){this._enableRotate=e,this.main()}get enableRotate(){return this._enableRotate}set enableZoom(e){this._enableZoom=e,this.main()}get enableZoom(){return this._enableZoom}get canvas(){var e;return null===(e=this.canvasRef)||void 0===e?void 0:e.nativeElement}get wrapper(){var e;return null===(e=this.canvas)||void 0===e?void 0:e.parentElement}main(){this.canvas&&this.wrapper&&(this.wrapper.style.opacity="0"),this.GLTFResolver.resolve(this.url,this.loading).then(e=>{const t=new ME(this.canvas,this.wrapper),n=new RE(t).buildRenderer(),r=new AE(t).buildCamera(),i=new kE(n,e,r).buildAvatar(this.tracker,this.loading),s=new FE(i).buildScene(),a=new IE(r,n).buildControl({enableRotate:this.enableRotate,enableZoom:this.enableZoom}),o=new pS;this.wrapper.appendChild(n.domElement),this.canvas&&this.wrapper&&(this.wrapper.style.opacity="1");const u=this;!function e(){window.requestAnimationFrame(e),n.clear(),n.render(s,r),s.traverse(e=>{var t,n,r;return null===(r=null===(t=e)||void 0===t?void 0:(n=t).update)||void 0===r?void 0:r.call(n,o.getDelta(),u.tracker)})}(),window.addEventListener("resize",()=>{r.aspect=t.aspect,r.updateProjectionMatrix(),a.update(),n.setSize(t.width,t.height,!0)})}).catch(console.error)}ngOnInit(){}ngAfterViewInit(){this.main()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["ngx-profile-avatar"]],viewQuery:function(e,t){var n,r,i,s;1&e&&(r=PE,i=!0,function(e,t,n,r,i,s){e.firstCreatePass&&po(e,new no(n,r,!1,i),-1),ho(e,t)}(Wt(),Vt(),r,i,s)),2&e&&uo(n=co())&&(t.canvasRef=n.first)},inputs:{tracker:"tracker",url:"url",enableRotate:"enableRotate",enableZoom:"enableZoom"},outputs:{loading:"loading"},decls:2,vars:0,consts:[["canvas",""]],template:function(e,t){1&e&&Ss(0,"canvas",null,0)},styles:["[_nghost-%COMP%] {\n        opacity: 0;\n        transition: opacity 1s;\n    }"],changeDetection:0}),e})(),$E=(()=>{class e{}return e.\u0275mod=ft({type:e}),e.\u0275inj=ce({factory:function(t){return new(t||e)},imports:[[tc]]}),e})(),BE=(()=>{class e{ngOnInit(){}ngOnChanges(){}onLoading({loaded:e,total:t}){Math.round(e/t*100)>=100&&(this.data.loading=!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["app-avatar-visor"]],inputs:{data:"data"},features:[js],decls:4,vars:6,consts:[[1,"avatar-container"],[1,"avatar",3,"url","tracker","enableRotate","enableZoom","loading"],[1,"spinner-container"]],template:function(e,t){1&e&&(xs(0,"div",0),xs(1,"ngx-profile-avatar",1),ks("loading",(function(e){return t.onLoading(e)})),ws(),xs(2,"div",2),Ss(3,"app-spinner"),ws(),ws()),2&e&&(_r(1),bs("url",t.data.url)("tracker",t.data.tracker)("enableRotate",t.data.enableRotate)("enableZoom",t.data.enableZoom),_r(1),Ds("hide",!t.data.loading))},directives:[zE,gg],styles:["div.avatar-container[_ngcontent-%COMP%] {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      border-right: 1px solid var(--gray-600);\n    }\n\n    .avatar[_ngcontent-%COMP%] {\n      display: flex;\n      flex-grow: 1;\n      width: 100%;\n      height: 100%;\n    }\n\n    div.spinner-container[_ngcontent-%COMP%] {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      visibility: visible;\n      visibility: visible;\n      transition: visibility 1s ease;\n    }\n\n    div.hide[_ngcontent-%COMP%] {\n      visibility: hidden;\n    }"]}),e})(),UE=(()=>{class e{constructor(){this.change=new Ya}ngOnInit(){this.formGroup=new Uh({url:new Bh(this.data.url,[Yc.required]),tracker:new Bh(this.data.tracker,[Yc.required]),enableRotate:new Bh(this.data.enableRotate,[Yc.required]),enableZoom:new Bh(this.data.enableZoom,[Yc.required])})}onSubmit(){this.formGroup.valid||alert("Error. Please, complete form"),this.formGroup.get("enableRotate").setValue("true"===this.formGroup.get("enableRotate").value),this.formGroup.get("enableZoom").setValue("true"===this.formGroup.get("enableZoom").value),this.change.emit(Object.assign(Object.assign({},this.formGroup.value),{loading:this.formGroup.get("url").value!==this.data.url}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ct({type:e,selectors:[["app-avatar-form"]],inputs:{data:"data"},outputs:{change:"change"},decls:34,vars:1,consts:[[3,"formGroup","ngSubmit"],[1,"form-item"],["for","url",1,"form-label"],["type","url","id","url","formControlName","url","placeholder","Enter your 3d avatar URL generated from ReadyPlayerMe","required","true",1,"form-control"],["for","tracker",1,"form-label"],["id","tracker","formControlName","tracker","required","true",1,"form-control"],["value","cursor"],["value","face"],["for","rotation",1,"form-label"],["id","rotation","formControlName","enableRotate","required","true",1,"form-control"],["value","true"],["value","false"],["for","zoom",1,"form-label"],["id","zoom","formControlName","enableZoom","required","true",1,"form-control"],["type","submit",1,"button"]],template:function(e,t){1&e&&(xs(0,"form",0),ks("ngSubmit",(function(){return t.onSubmit()})),xs(1,"div"),xs(2,"div",1),xs(3,"label",2),Ps(4," URL "),ws(),Ss(5,"input",3),ws(),ws(),xs(6,"div"),xs(7,"div",1),xs(8,"label",4),Ps(9,"Tracker"),ws(),xs(10,"select",5),xs(11,"option",6),Ps(12,"Cursor"),ws(),xs(13,"option",7),Ps(14,"Face"),ws(),ws(),ws(),xs(15,"div",1),xs(16,"label",8),Ps(17,"Rotation"),ws(),xs(18,"select",9),xs(19,"option",10),Ps(20,"Enable"),ws(),xs(21,"option",11),Ps(22,"Disable"),ws(),ws(),ws(),xs(23,"div",1),xs(24,"label",12),Ps(25,"Zoom"),ws(),xs(26,"select",13),xs(27,"option",10),Ps(28,"Enable"),ws(),xs(29,"option",11),Ps(30,"Disable"),ws(),ws(),ws(),ws(),xs(31,"div"),xs(32,"button",14),Ps(33,"Apply"),ws(),ws(),ws()),2&e&&bs("formGroup",t.formGroup)},directives:[ed,jc,sd,zc,Gc,dd,md,gh,yh,xh],styles:["[_nghost-%COMP%] {\n      padding: 1rem 2rem;\n      border-right: 1px solid var(--gray-600);\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(1) {\n        display: flex;\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(2) {\n      display: flex;\n      gap: 1rem;\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(3) {\n      display: flex;\n      justify-content: end;\n    }\n\n    @media only screen and (max-width: 600px) {\n\n      form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(2) {\n        display: flex;\n        flex-direction: column;\n      }\n    }"]}),e})(),VE=(()=>{class e{}return e.\u0275mod=ft({type:e,bootstrap:[mg]}),e.\u0275inj=ce({factory:function(t){return new(t||e)},providers:[],imports:[[Ic,tc,pg,Ad,Md,$E]]}),e})();(function(e,t,n){const r=e.\u0275cmp;r.directiveDefs=()=>t.map(ht),r.pipeDefs=()=>n.map(dt)})(mg,[gl,yl,bl,xl,Il,Nl,Cl,kl,Tl,Al,Ml,qm,Um,Vm,Hm,Up,ed,yh,xh,zc,ih,lh,Oc,gh,_h,oh,Gc,jc,md,xd,Sd,Cd,gd,bd,Qh,Zh,Gh,rd,sd,dd,od,ld,zE,mg,gg,BE,UE],[Pl,Ul,zl,jl,ec,Xl,Zl,Bl,Yl,Vl,Hl,Gl,ql]),function(){if(er)throw new Error("Cannot enable prod mode after platform setup.");Qn=!1}(),Mc().bootstrapModule(VE).catch(e=>console.error(e))},zhpf:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shuffle",(function(){return j})),n.d(r,"shuffleCombo",(function(){return q})),n.d(r,"clamp",(function(){return K})),n.d(r,"nearestLargerEven",(function(){return X})),n.d(r,"sum",(function(){return Z})),n.d(r,"randUniform",(function(){return Y})),n.d(r,"distSquared",(function(){return J})),n.d(r,"assert",(function(){return Q})),n.d(r,"assertShapesMatch",(function(){return ee})),n.d(r,"assertNonNull",(function(){return te})),n.d(r,"flatten",(function(){return ne})),n.d(r,"sizeFromShape",(function(){return re})),n.d(r,"isScalarShape",(function(){return ie})),n.d(r,"arraysEqual",(function(){return se})),n.d(r,"isInt",(function(){return ae})),n.d(r,"tanh",(function(){return oe})),n.d(r,"sizeToSquarishShape",(function(){return ue})),n.d(r,"createShuffledIndices",(function(){return le})),n.d(r,"rightPad",(function(){return ce})),n.d(r,"repeatedTry",(function(){return he})),n.d(r,"inferFromImplicitShape",(function(){return de})),n.d(r,"parseAxisParam",(function(){return pe})),n.d(r,"squeezeShape",(function(){return fe})),n.d(r,"getTypedArrayFromDType",(function(){return me})),n.d(r,"getArrayFromDType",(function(){return ge})),n.d(r,"checkConversionForErrors",(function(){return ye})),n.d(r,"isValidDtype",(function(){return ve})),n.d(r,"hasEncodingLoss",(function(){return be})),n.d(r,"isTypedArray",(function(){return _e})),n.d(r,"bytesPerElement",(function(){return xe})),n.d(r,"bytesFromStringArray",(function(){return we})),n.d(r,"isString",(function(){return Se})),n.d(r,"isBoolean",(function(){return Ee})),n.d(r,"isNumber",(function(){return Ce})),n.d(r,"inferDtype",(function(){return ke})),n.d(r,"isFunction",(function(){return Te})),n.d(r,"nearestDivisor",(function(){return Ae})),n.d(r,"computeStrides",(function(){return Me})),n.d(r,"toNestedArray",(function(){return Ne})),n.d(r,"makeOnesTypedArray",(function(){return Ie})),n.d(r,"makeZerosTypedArray",(function(){return De})),n.d(r,"makeZerosNestedTypedArray",(function(){return Re})),n.d(r,"assertNonNegativeIntegerDimensions",(function(){return Le})),n.d(r,"locToIndex",(function(){return Oe})),n.d(r,"indexToLoc",(function(){return Fe})),n.d(r,"isPromise",(function(){return Pe})),n.d(r,"createScalarValue",(function(){return ct})),n.d(r,"toTypedArray",(function(){return ht})),n.d(r,"now",(function(){return dt})),n.d(r,"fetch",(function(){return pt})),n.d(r,"encodeString",(function(){return ft})),n.d(r,"decodeString",(function(){return mt}));var i={};n.r(i),n.d(i,"makeTypesMatch",(function(){return Pt})),n.d(i,"assertTypesMatch",(function(){return zt})),n.d(i,"isTensorInList",(function(){return $t})),n.d(i,"getTensorsInContainer",(function(){return Bt}));var s={};n.r(s),n.d(s,"isMobile",(function(){return qt})),n.d(s,"isBrowser",(function(){return Kt}));var a={};n.r(a),n.d(a,"copyModel",(function(){return Un})),n.d(a,"listModels",(function(){return $n})),n.d(a,"moveModel",(function(){return Vn})),n.d(a,"removeModel",(function(){return Bn})),n.d(a,"browserFiles",(function(){return Jn})),n.d(a,"browserHTTPRequest",(function(){return or})),n.d(a,"concatenateArrayBuffers",(function(){return hn})),n.d(a,"decodeWeights",(function(){return on})),n.d(a,"encodeWeights",(function(){return an})),n.d(a,"fromMemory",(function(){return cr})),n.d(a,"getLoadHandlers",(function(){return bn})),n.d(a,"getModelArtifactsInfoForJSON",(function(){return pn})),n.d(a,"getSaveHandlers",(function(){return vn})),n.d(a,"http",(function(){return ar})),n.d(a,"isHTTPScheme",(function(){return ir})),n.d(a,"loadWeights",(function(){return tr})),n.d(a,"registerLoadRouter",(function(){return yn})),n.d(a,"registerSaveRouter",(function(){return gn})),n.d(a,"weightsLoaderFactory",(function(){return nr})),n.d(a,"withSaveHandler",(function(){return hr}));var o={};n.r(o),n.d(o,"confusionMatrix",(function(){return mr}));var u={};n.r(u),n.d(u,"toPixels",(function(){return vr})),n.d(u,"fromPixels",(function(){return br}));var l={};n.r(l),n.d(l,"prepareAndValidate",(function(){return _r}));var c={};n.r(c),n.d(c,"validateUpdateShape",(function(){return xr})),n.d(c,"validateInput",(function(){return wr})),n.d(c,"calculateShapes",(function(){return Sr}));var h={};n.r(h),n.d(h,"assertParamsValid",(function(){return Er})),n.d(h,"maskToAxes",(function(){return Cr})),n.d(h,"computeOutShape",(function(){return kr})),n.d(h,"stridesWithElidedDims",(function(){return Tr})),n.d(h,"getNormalizedAxes",(function(){return Nr})),n.d(h,"startIndicesWithElidedDims",(function(){return Ir})),n.d(h,"stopIndicesWithElidedDims",(function(){return Dr})),n.d(h,"stridesForAxis",(function(){return Rr})),n.d(h,"startForAxis",(function(){return Lr})),n.d(h,"stopForAxis",(function(){return Or})),n.d(h,"isSliceContinous",(function(){return Fr})),n.d(h,"computeFlatOffset",(function(){return Pr})),n.d(h,"parseSliceParams",(function(){return zr})),n.d(h,"sliceInfo",(function(){return $r}));var d={};n.r(d),n.d(d,"Serializable",(function(){return Br})),n.d(d,"SerializationMap",(function(){return Ur})),n.d(d,"registerClass",(function(){return Vr}));var p={};n.r(p),n.d(p,"TEST_EPSILON_FLOAT16",(function(){return Wr})),n.d(p,"expectArraysClose",(function(){return Hr})),n.d(p,"testEpsilon",(function(){return Gr})),n.d(p,"expectPromiseToFail",(function(){return qr})),n.d(p,"expectArraysEqual",(function(){return Kr})),n.d(p,"expectNumbersClose",(function(){return Xr})),n.d(p,"expectValuesInRange",(function(){return Yr})),n.d(p,"expectArrayBuffersEqual",(function(){return Jr})),n.d(p,"encodeStrings",(function(){return Qr}));var f={};n.r(f),n.d(f,"conv2d",(function(){return zu})),n.d(f,"depthwiseConv2d",(function(){return Uu})),n.d(f,"matMul",(function(){return Vu}));var m={};n.r(m),n.d(m,"segOpComputeOptimalWindowSize",(function(){return lc})),n.d(m,"computeOutShape",(function(){return cc})),n.d(m,"collectGatherOpShapeInfo",(function(){return hc}));var g={};n.r(g),n.d(g,"slice_util",(function(){return h})),n.d(g,"upcastType",(function(){return Ot})),n.d(g,"segment_util",(function(){return m})),n.d(g,"fromUint8ToStringArray",(function(){return dc})),n.d(g,"fromStringArrayToUint8",(function(){return pc})),n.d(g,"axesAreInnerMostDims",(function(){return Pa})),n.d(g,"combineLocations",(function(){return za})),n.d(g,"computeOutAndReduceShapes",(function(){return $a})),n.d(g,"expandShapeToKeepDim",(function(){return Ba})),n.d(g,"assertAxesAreInnerMostDims",(function(){return Ua})),n.d(g,"getAxesPermutation",(function(){return Va})),n.d(g,"getUndoAxesPermutation",(function(){return Wa})),n.d(g,"getInnerMostAxes",(function(){return Ha})),n.d(g,"getBroadcastDims",(function(){return Hi})),n.d(g,"getReductionAxes",(function(){return Gi})),n.d(g,"assertAndGetBroadcastShape",(function(){return ji})),n.d(g,"assertParamsConsistent",(function(){return Ll})),n.d(g,"computeOutShape",(function(){return Ol})),n.d(g,"computeDilation2DInfo",(function(){return cs})),n.d(g,"computePool2DInfo",(function(){return hs})),n.d(g,"computePool3DInfo",(function(){return ds})),n.d(g,"computeConv2DInfo",(function(){return ps})),n.d(g,"computeConv3DInfo",(function(){return fs})),n.d(g,"computeDefaultPad",(function(){return ms})),n.d(g,"tupleValuesAreOne",(function(){return _s})),n.d(g,"eitherStridesOrDilationsAreOne",(function(){return xs})),n.d(g,"convertConv2DDataFormat",(function(){return ws})),n.d(g,"getFusedDyActivation",(function(){return Lu})),n.d(g,"getFusedBiasGradient",(function(){return Ou})),n.d(g,"applyActivation",(function(){return Fu})),n.d(g,"shouldFuse",(function(){return Pu})),n.d(g,"PARALLELIZE_THRESHOLD",(function(){return Fl})),n.d(g,"computeOptimalWindowSize",(function(){return Pl})),n.d(g,"getImageCenter",(function(){return zl})),n.d(g,"getReshaped",(function(){return $l})),n.d(g,"getPermuted",(function(){return Bl})),n.d(g,"getReshapedPermuted",(function(){return Ul})),n.d(g,"getSliceBeginCoords",(function(){return Vl})),n.d(g,"getSliceSize",(function(){return Wl})),n.d(g,"prepareAndValidate",(function(){return _r})),n.d(g,"validateUpdateShape",(function(){return xr})),n.d(g,"validateInput",(function(){return wr})),n.d(g,"calculateShapes",(function(){return Sr})),n.d(g,"SELU_SCALEALPHA",(function(){return Hl})),n.d(g,"SELU_SCALE",(function(){return Gl})),n.d(g,"ERF_P",(function(){return jl})),n.d(g,"ERF_A1",(function(){return ql})),n.d(g,"ERF_A2",(function(){return Kl})),n.d(g,"ERF_A3",(function(){return Xl})),n.d(g,"ERF_A4",(function(){return Zl})),n.d(g,"ERF_A5",(function(){return Yl})),n.d(g,"warn",(function(){return Jl})),n.d(g,"log",(function(){return Ql})),n.d(g,"mergeRealAndImagArrays",(function(){return ec})),n.d(g,"splitRealAndImagArrays",(function(){return tc})),n.d(g,"complexWithEvenIndex",(function(){return nc})),n.d(g,"complexWithOddIndex",(function(){return rc})),n.d(g,"getComplexWithIndex",(function(){return ic})),n.d(g,"assignToTypedArray",(function(){return sc})),n.d(g,"exponents",(function(){return ac})),n.d(g,"exponent",(function(){return oc})),n.d(g,"prepareSplitSize",(function(){return uc}));var y={};n.r(y),n.d(y,"nonMaxSuppressionV3Impl",(function(){return el})),n.d(y,"nonMaxSuppressionV4Impl",(function(){return tl})),n.d(y,"nonMaxSuppressionV5Impl",(function(){return nl})),n.d(y,"whereImpl",(function(){return xu}));var v={};n.r(v),n.d(v,"maxNorm",(function(){return rd})),n.d(v,"unitNorm",(function(){return id})),n.d(v,"nonNeg",(function(){return sd})),n.d(v,"minMaxNorm",(function(){return ad}));var b={};n.r(b),n.d(b,"zeros",(function(){return hp})),n.d(b,"ones",(function(){return dp})),n.d(b,"constant",(function(){return pp})),n.d(b,"randomUniform",(function(){return fp})),n.d(b,"randomNormal",(function(){return mp})),n.d(b,"truncatedNormal",(function(){return gp})),n.d(b,"identity",(function(){return yp})),n.d(b,"varianceScaling",(function(){return vp})),n.d(b,"glorotUniform",(function(){return bp})),n.d(b,"glorotNormal",(function(){return _p})),n.d(b,"heNormal",(function(){return xp})),n.d(b,"heUniform",(function(){return wp})),n.d(b,"leCunNormal",(function(){return Sp})),n.d(b,"leCunUniform",(function(){return Ep})),n.d(b,"orthogonal",(function(){return Cp}));var _={};n.r(_),n.d(_,"inputLayer",(function(){return hy})),n.d(_,"elu",(function(){return dy})),n.d(_,"reLU",(function(){return py})),n.d(_,"leakyReLU",(function(){return fy})),n.d(_,"prelu",(function(){return my})),n.d(_,"softmax",(function(){return gy})),n.d(_,"thresholdedReLU",(function(){return yy})),n.d(_,"conv1d",(function(){return vy})),n.d(_,"conv2d",(function(){return by})),n.d(_,"conv2dTranspose",(function(){return _y})),n.d(_,"conv3d",(function(){return xy})),n.d(_,"separableConv2d",(function(){return wy})),n.d(_,"cropping2D",(function(){return Sy})),n.d(_,"upSampling2d",(function(){return Ey})),n.d(_,"depthwiseConv2d",(function(){return Cy})),n.d(_,"activation",(function(){return ky})),n.d(_,"dense",(function(){return Ty})),n.d(_,"dropout",(function(){return Ay})),n.d(_,"spatialDropout1d",(function(){return My})),n.d(_,"flatten",(function(){return Ny})),n.d(_,"repeatVector",(function(){return Iy})),n.d(_,"reshape",(function(){return Dy})),n.d(_,"permute",(function(){return Ry})),n.d(_,"embedding",(function(){return Ly})),n.d(_,"add",(function(){return Oy})),n.d(_,"average",(function(){return Fy})),n.d(_,"concatenate",(function(){return Py})),n.d(_,"maximum",(function(){return zy})),n.d(_,"minimum",(function(){return $y})),n.d(_,"multiply",(function(){return By})),n.d(_,"dot",(function(){return Uy})),n.d(_,"batchNormalization",(function(){return Vy})),n.d(_,"layerNormalization",(function(){return Wy})),n.d(_,"zeroPadding2d",(function(){return Hy})),n.d(_,"averagePooling1d",(function(){return Gy})),n.d(_,"avgPool1d",(function(){return jy})),n.d(_,"avgPooling1d",(function(){return qy})),n.d(_,"averagePooling2d",(function(){return Ky})),n.d(_,"avgPool2d",(function(){return Xy})),n.d(_,"avgPooling2d",(function(){return Zy})),n.d(_,"averagePooling3d",(function(){return Yy})),n.d(_,"avgPool3d",(function(){return Jy})),n.d(_,"avgPooling3d",(function(){return Qy})),n.d(_,"globalAveragePooling1d",(function(){return ev})),n.d(_,"globalAveragePooling2d",(function(){return tv})),n.d(_,"globalMaxPooling1d",(function(){return nv})),n.d(_,"globalMaxPooling2d",(function(){return rv})),n.d(_,"maxPooling1d",(function(){return iv})),n.d(_,"maxPooling2d",(function(){return sv})),n.d(_,"maxPooling3d",(function(){return av})),n.d(_,"gru",(function(){return ov})),n.d(_,"gruCell",(function(){return uv})),n.d(_,"lstm",(function(){return lv})),n.d(_,"lstmCell",(function(){return cv})),n.d(_,"simpleRNN",(function(){return hv})),n.d(_,"simpleRNNCell",(function(){return dv})),n.d(_,"convLstm2d",(function(){return pv})),n.d(_,"convLstm2dCell",(function(){return fv})),n.d(_,"rnn",(function(){return mv})),n.d(_,"stackedRNNCells",(function(){return gv})),n.d(_,"bidirectional",(function(){return yv})),n.d(_,"timeDistributed",(function(){return vv})),n.d(_,"globalMaxPool1d",(function(){return bv})),n.d(_,"globalMaxPool2d",(function(){return _v})),n.d(_,"maxPool1d",(function(){return xv})),n.d(_,"maxPool2d",(function(){return wv})),n.d(_,"Layer",(function(){return Wp})),n.d(_,"RNN",(function(){return ag})),n.d(_,"RNNCell",(function(){return og})),n.d(_,"input",(function(){return lm})),n.d(_,"gaussianNoise",(function(){return Sv})),n.d(_,"gaussianDropout",(function(){return Ev})),n.d(_,"alphaDropout",(function(){return Cv})),n.d(_,"masking",(function(){return kv}));var x={};n.r(x),n.d(x,"binaryAccuracy",(function(){return Tv})),n.d(x,"binaryCrossentropy",(function(){return Av})),n.d(x,"sparseCategoricalAccuracy",(function(){return Mv})),n.d(x,"categoricalAccuracy",(function(){return Nv})),n.d(x,"categoricalCrossentropy",(function(){return Iv})),n.d(x,"precision",(function(){return Dv})),n.d(x,"recall",(function(){return Rv})),n.d(x,"cosineProximity",(function(){return Lv})),n.d(x,"meanAbsoluteError",(function(){return Ov})),n.d(x,"meanAbsolutePercentageError",(function(){return Fv})),n.d(x,"MAPE",(function(){return Pv})),n.d(x,"mape",(function(){return zv})),n.d(x,"meanSquaredError",(function(){return $v})),n.d(x,"MSE",(function(){return Bv})),n.d(x,"mse",(function(){return Uv}));var w={};n.r(w),n.d(w,"modelFromJSON",(function(){return im}));var S={};n.r(S),n.d(S,"l1l2",(function(){return Vv})),n.d(S,"l1",(function(){return Wv})),n.d(S,"l2",(function(){return Hv}));var E={};n.r(E),n.d(E,"json",(function(){return lb}));var C={};n.r(C),n.d(C,"json",(function(){return cb}));var k={};n.r(k),n.d(k,"json",(function(){return hb}));var T={};n.r(T),n.d(T,"json",(function(){return db}));var A={};n.r(A),n.d(A,"json",(function(){return pb}));var M={};n.r(M),n.d(M,"json",(function(){return fb}));var N={};n.r(N),n.d(N,"json",(function(){return mb}));var I={};n.r(I),n.d(I,"json",(function(){return gb}));var D={};n.r(D),n.d(D,"json",(function(){return yb}));var R={};n.r(R),n.d(R,"json",(function(){return vb}));var L={};n.r(L),n.d(L,"json",(function(){return bb}));var O={};n.r(O),n.d(O,"json",(function(){return _b}));var F={};n.r(F),n.d(F,"json",(function(){return xb}));var P={};n.r(P),n.d(P,"json",(function(){return wb}));var z={};n.r(z),n.d(z,"json",(function(){return Sb}));var $={};n.r($),n.d($,"json",(function(){return Eb}));var B={};n.r(B),n.d(B,"json",(function(){return Cb}));var U={};n.r(U),n.d(U,"array",(function(){return B_})),n.d(U,"Dataset",(function(){return z_})),n.d(U,"zip",(function(){return U_})),n.d(U,"CSVDataset",(function(){return X_})),n.d(U,"TextLineDataset",(function(){return W_})),n.d(U,"csv",(function(){return lx})),n.d(U,"func",(function(){return cx})),n.d(U,"generator",(function(){return hx})),n.d(U,"microphone",(function(){return px})),n.d(U,"webcam",(function(){return dx})),n.d(U,"FileDataSource",(function(){return ox})),n.d(U,"URLDataSource",(function(){return ux})),n.d(U,"version_data",(function(){return fx}));var V={};n.r(V),n.d(V,"simpleAbsImpl",(function(){return Qx})),n.d(V,"addImpl",(function(){return Hx})),n.d(V,"bincountImpl",(function(){return Aw})),n.d(V,"bincountReduceImpl",(function(){return Mw})),n.d(V,"ceilImpl",(function(){return Dw})),n.d(V,"concatImpl",(function(){return Fw})),n.d(V,"expImpl",(function(){return _S})),n.d(V,"expm1Impl",(function(){return CS})),n.d(V,"floorImpl",(function(){return WS})),n.d(V,"gatherV2Impl",(function(){return XS})),n.d(V,"greaterImpl",(function(){return YS})),n.d(V,"lessImpl",(function(){return iE})),n.d(V,"linSpaceImpl",(function(){return oE})),n.d(V,"logImpl",(function(){return lE})),n.d(V,"maxImpl",(function(){return vE})),n.d(V,"maximumImpl",(function(){return xE})),n.d(V,"minimumImpl",(function(){return DE})),n.d(V,"multiplyImpl",(function(){return TS})),n.d(V,"negImpl",(function(){return VE})),n.d(V,"notEqualImpl",(function(){return ZE})),n.d(V,"prodImpl",(function(){return uC})),n.d(V,"rangeImpl",(function(){return cC})),n.d(V,"rsqrtImpl",(function(){return _C})),n.d(V,"sliceImpl",(function(){return Ew})),n.d(V,"squaredDifferenceImpl",(function(){return BC})),n.d(V,"stridedSliceImpl",(function(){return WC})),n.d(V,"subImpl",(function(){return RS})),n.d(V,"tileImpl",(function(){return KC})),n.d(V,"topKImpl",(function(){return XC})),n.d(V,"transposeImpl",(function(){return iw})),n.d(V,"uniqueImpl",(function(){return ZC}));class W{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class H{refCount(e){return G("refCount")}incRef(e){return G("incRef")}timerAvailable(){return!0}time(e){return G("time")}read(e){return G("read")}readSync(e){return G("readSync")}numDataIds(){return G("numDataIds")}disposeData(e,t){return G("disposeData")}write(e,t,n){return G("write")}move(e,t,n,r,i){return G("move")}memory(){return G("memory")}floatPrecision(){return G("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return G("dispose")}}function G(e){throw new Error(`'${e}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}function j(e){let t=e.length,n=0,r=0;for(;t>0;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function q(e,t){if(e.length!==t.length)throw Error("Array sizes must match to be shuffled together "+`First array length was ${e.length}`+`Second array length was ${t.length}`);let n,r,i=e.length,s=0;for(;i>0;)s=Math.random()*i|0,i--,n=e[i],r=t[i],e[i]=e[s],t[i]=t[s],e[s]=n,t[s]=r}function K(e,t,n){return Math.max(e,Math.min(t,n))}function X(e){return e%2==0?e:e+1}function Z(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Y(e,t){const n=Math.random();return t*n+(1-n)*e}function J(e,t){let n=0;for(let r=0;r<e.length;r++){const i=Number(e[r])-Number(t[r]);n+=i*i}return n}function Q(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ee(e,t,n=""){Q(se(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function te(e){Q(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function ne(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||_e(e)&&!n)for(let r=0;r<e.length;++r)ne(e[r],t,n);else t.push(e);return t}function re(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function ie(e){return 0===e.length}function se(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ae(e){return e%1==0}function oe(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function ue(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function le(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return j(t),t}function ce(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function he(e,t=(e=>0),n){return new Promise((r,i)=>{let s=0;const a=()=>{if(e())return void r();s++;const o=t(s);null!=n&&s>=n?i():setTimeout(a,o)};a()})}function de(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when `+"there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function pe(e,t){const n=t.length;return Q((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but `+`got axis ${e}`),Q(e.every(e=>ae(e)),()=>"All values in axis param must be integers but "+`got axis ${e}`),e.map(e=>e<0?n+e:e)}function fe(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||i?null:pe(t,e).sort();let a=0;for(let o=0;o<e.length;++o){if(null!=s){if(s[a]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==s[a]||s[a]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),s[a]<=o&&a++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function me(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function ge(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function ye(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function ve(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function be(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function _e(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function xe(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function we(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function Se(e){return"string"==typeof e||e instanceof String}function Ee(e){return"boolean"==typeof e}function Ce(e){return"number"==typeof e}function ke(e){return Array.isArray(e)?ke(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Ce(e)?"float32":Se(e)?"string":Ee(e)?"bool":"float32"}function Te(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ae(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function Me(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Ne(e,t){if(0===e.length)return t[0];const n=e.reduce((e,t)=>e*t);if(0===n)return[];if(n!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}.`);return function e(t,n,r){const i=new Array;if(1===n.length){const e=n[0];for(let n=0;n<e;n++)i[n]=r[t+n]}else{const s=n[0],a=n.slice(1),o=a.reduce((e,t)=>e*t);for(let n=0;n<s;n++)i[n]=e(t+n*o,a,r)}return i}(0,e,t)}function Ie(e,t){const n=De(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function De(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function Re(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Ne(e,new Float32Array(n));if("int32"===t)return Ne(e,new Int32Array(n));if("bool"===t)return Ne(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function Le(e){e.forEach(t=>{Q(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${e}].`)})}function Oe(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function Fe(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function Pe(e){return e&&e.then&&"function"==typeof e.then}class ze{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Pe(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=function(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("="))),t}(this.global.location.search);"tfjsflags"in e&&e.tfjsflags.split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)})}}function $e(){return Ue}let Be,Ue=null;function Ve(){if(null==Be){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Be=e}return Be}function We(e,t){const n=function(){const e=Ve();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const He="Cos",Ge="Erf",je="Exp",qe="Log",Ke="Mod",Xe="Pow",Ze="Sin",Ye="Sub",Je="Tan",Qe=We("kernelRegistry",()=>new Map),et=We("gradRegistry",()=>new Map);function tt(e,t){const n=lt(e,t);return Qe.get(n)}function nt(e){return et.get(e)}function rt(e){const t=Qe.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===e&&n.push(a)}return n}function it(e){const{kernelName:t,backendName:n}=e,r=lt(t,n);Qe.has(r)&&console.warn(`The kernel '${t}' for backend `+`'${n}' is already registered`),Qe.set(r,e)}function st(e){const{kernelName:t}=e;et.has(t)&&$e().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),et.set(t,e)}function at(e,t){const n=lt(e,t);if(!Qe.has(n))throw new Error(`The kernel '${e}' for backend `+`'${t}' is not registered`);Qe.delete(n)}function ot(e){if(!et.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);et.delete(e)}function ut(e,t){rt(e).forEach(e=>{it(Object.assign({},e,{backendName:t}))})}function lt(e,t){return`${t}_${e}`}function ct(e,t){return"string"===t?ft(e):ht([e],t)}function ht(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ne(e)),$e().getBool("DEBUG")&&ye(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function dt(){return $e().platform.now()}function pt(e,t){return $e().platform.fetch(e,t)}function ft(e,t="utf-8"){return t=t||"utf-8",$e().platform.encode(e,t)}function mt(e,t="utf-8"){return t=t||"utf-8",$e().platform.decode(e,t)}class gt{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new vt)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let s;const a=dt();if(this.backendTimer.timerAvailable()?s=this.backendTimer.time(i):(i(),r.map(e=>e.dataSync()),s=Promise.resolve({kernelMs:dt()-a})),$e().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){const t=r[o];t.data().then(n=>{yt(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then(e=>e.kernelMs),extraInfo:s.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:s}=e;n.forEach(e=>{Promise.all([e.data(),r,s]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])})})}}function yt(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class vt{logKernelProfile(e,t,n,r,i,s){const a="number"==typeof r?ce(`${r}ms`,9):r.error,o=ce(e,25),u=t.rank,l=t.size,c=ce(t.shape.toString(),14);let h="";for(const d in i){const e=i[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${a}\t%c${u}D ${c}\t%c${l}\t%c${h}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function bt(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + `+`${parseFloat(e[1].toFixed(7))}j`:Se(e)?`'${e}'`:"bool"===n?_t(e):parseFloat(e.toFixed(7)).toString(),ce(r,t)}function _t(e){return 0===e?"false":"true"}function xt(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class wt{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=re(e),null!=n){const e=n.length;Q(e===this.size,()=>`Length of values '${e}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||ge(t,this.size),this.strides=Me(e)}set(e,...t){0===t.length&&(t=[0]),Q(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must `+`match the rank (${this.rank})`);const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t])throw new Error(`Requested out of range element at ${e}. `+`  Buffer shape=${this.shape}`);t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return St().makeTensor(this.values,this.shape,this.dtype)}}let St=null,Et=null,Ct=null;class kt{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=re(e),this.strides=Me(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Et.buffer(this.shape,this.dtype,e)}bufferSync(){return Et.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ne(this.shape,e)}arraySync(){return Ne(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const e=St().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>mt(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=St().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>mt(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await St().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(St().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Et.print(this,e)}clone(){return this.throwIfDisposed(),Et.clone(this)}toString(e=!1){return function(e,t,n,r){const i=Me(t),s=function(e,t,n,r){const i=re(t),s=r[r.length-1],a=new Array(s).fill(0),o=t.length,u="complex64"===n?xt(e):e;if(o>1)for(let l=0;l<i/s;l++){const e=l*s;for(let t=0;t<s;t++)a[t]=Math.max(a[t],bt(u[e+t],0,n).length)}return a}(e,t,n,i),a=t.length,o=function e(t,n,r,i,s,a=!0){const o="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[bt(xt(t)[0],0,r)]:"bool"===r?[_t(t[0])]:[t[0].toString()];if(1===l){if(u>20){let e=Array.from(t.slice(0,3*o)),n=Array.from(t.slice((u-3)*o,u*o));return"complex64"===r&&(e=xt(e),n=xt(n)),["["+e.map((e,t)=>bt(e,s[t],r)).join(", ")+", ..., "+n.map((e,t)=>bt(e,s[u-3+t],r)).join(", ")+"]"]}return["["+("complex64"===r?xt(t):Array.from(t)).map((e,t)=>bt(e,s[t],r)).join(", ")+"]"]}const c=n.slice(1),h=i.slice(1),d=i[0]*o,p=[];if(u>20){for(let n=0;n<3;n++){const i=n*d;p.push(...e(t.slice(i,i+d),c,r,h,s,!1))}p.push("...");for(let n=u-3;n<u;n++){const i=n*d;p.push(...e(t.slice(i,i+d),c,r,h,s,n===u-1))}}else for(let g=0;g<u;g++){const n=g*d;p.push(...e(t.slice(n,n+d),c,r,h,s,g===u-1))}const f=2===l?",":"";p[0]="["+p[0]+f;for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+f;let m=",\n";for(let g=2;g<l;g++)m+="\n";return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":m),p}(e,t,n,i,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(o.map(e=>"    "+e).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Et.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),St().makeVariable(this,e,t,n)}}function Tt(){return We("Tensor",()=>kt)}Object.defineProperty(kt,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Tt();class At extends kt{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and `+`previous value (${this.dtype}) must match`);if(!se(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and `+`previous value (${this.shape}) must match`);St().disposeTensor(this),this.dataId=e.dataId,St().incRef(this,null)}dispose(){St().disposeVariable(this),this.isDisposedInternal=!0}}var Mt,Nt,It,Dt,Rt;Object.defineProperty(At,Symbol.hasInstance,{value:e=>e instanceof kt&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Mt||(Mt={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Nt||(Nt={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(It||(It={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Dt||(Dt={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Rt||(Rt={}));const Lt={float32:Dt,int32:Nt,bool:It,complex64:Rt};function Ot(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Lt[e][t]}function Ft(e){return Ot(e,"int32")}function Pt(e,t){if(e.dtype===t.dtype)return[e,t];const n=Ot(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function zt(e,t){Q(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and`+` second(${t.dtype}) input must match`)}function $t(e,t){return t.some(t=>t.id===e.id)}function Bt(e){const t=[];return function e(t,n,r){if(null==t)return;if(t instanceof kt)return void n.push(t);if(i=t,!Array.isArray(i)&&"object"!=typeof i)return;var i;const s=t;for(const a in s){const t=s[a];r.has(t)||(r.add(t),e(t,n,r))}}(e,t,new Set),t}function Ut(e){return null!=e.kernelName}class Vt{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Wt{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Vt}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new gt(this.backendInstance),!0}setupRegisteredKernels(){rt(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){rt(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof H||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0))).catch(n=>!(t<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return Wt.nextTensorId++}nextVariableId(){return Wt.nextVariableId++}clone(e){const t=Gt.runKernel("Identity",{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>Gt.runKernel("Cast",{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,n){if(null==tt(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach(e=>{i+="complex64"===e.dtype?3:1});const s=r-t-i-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;let a,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const u=Ut(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Ut(e)){const{kernelName:t,inputs:i,attrs:s}=e,u=tt(t,this.backendName);Q(null!=u,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),a=()=>{const e=this.backend.numDataIds();o=u.kernelFunc({inputs:i,attrs:s,backend:this.backend});const a=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const l=a.map(e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)});if(r){const e=this.getTensorsForGradient(t,i,l);n=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};a=()=>{const e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,i));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,n),n}}const{inputs:l,attrs:c}=e,h=Ut(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(u,l,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=a()}),r&&this.addTapeNode(u,l,t,h,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(e=>null!=l[e]?l[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){const r=nt(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let s;r.saveAllInputs?(Q(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(e=>t[e])):s=e.map(e=>t[e]);const a=n.filter((e,t)=>i[t]);return s.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let i=e;"string"===(n=n||"float32")&&Se(e[0])&&(i=e.map(e=>ft(e)));const s=r.write(i,t,n),a=new kt(t,n,s,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(s),t=we(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){const i=new kt(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(i,r),i}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new At(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*xe(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof At||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*xe(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,s){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},o=nt(e);null!=o&&(r=o.gradFunc),null!=r&&(a.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=De(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],i,s))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Bt(e),n=new Set(t.map(e=>e.id));for(let i=0;i<this.state.activeScope.track.length;i++){const e=this.state.activeScope.track[i];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n,r=!1){if(Q(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Q(i instanceof kt,()=>"The result y returned by f() must be a tensor.");const s=function(e,t,n){const r={},i={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){const n=e[u],s=n.inputs;for(const e in s){const a=s[e];let o=!1;for(let e=0;e<t.length;e++)if(r[a.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,i[n.id]=!0;break}if(o)break}}const s={};s[n.id]=!0;const a={};for(let u=e.length-1;u>=0;u--){const t=e[u],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(s[t.outputs[e].id]){for(const e in n)s[n[e].id]=!0,a[t.id]=!0;break}}const o=[];for(let u=0;u<e.length;u++){const t=e[u];if(i[t.id]&&a[t.id]){const e={};for(const i in t.inputs){const n=t.inputs[i];r[n.id]&&(e[i]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,i);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[i.id]=null==n?function(e){const t=Ie(re(e),"float32");return Gt.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const s=t[i],a=[];if(s.outputs.forEach(t=>{const n=e[t.id];a.push(null!=n?n:null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const o=s.gradient(a);for(const t in s.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. `+`Available gradients found: ${Object.keys(o)}.`);const i=n(()=>o[t]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${t} must have 'float32' dtype, but has '${i.dtype}'`);const a=s.inputs[t];if(!se(i.shape,a.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${t}' has shape '${i.shape}', which does not match `+`the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{const t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}(e,s,e=>this.tidy(e),jt);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(e){return Q(Te(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let n;Q(t.every(e=>e instanceof kt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return t.forEach((e,t)=>{r[t]=e}),this.runKernelFunc({forwardFunc:(r,i)=>(n=e(...t,i),Q(n.value instanceof kt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Q(Te(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{const i=n.gradFunc(e,r),s=Array.isArray(i)?i:[i];Q(s.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Q(s.every(e=>e instanceof kt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const a={};return s.forEach((e,t)=>{a[t]=()=>e}),a},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=dt(),n=await this.backend.time(e);return n.wallMs=dt()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Vt;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Ht(){const e=Ve();if(null==e._tfengine){const t=new ze(e);e._tfengine=new Wt(t)}return Ue=e._tfengine.ENV,St=()=>e._tfengine,e._tfengine}Wt.nextTensorId=0,Wt.nextVariableId=0;const Gt=Ht();function jt(e,t){return Gt.runKernel("Add",{a:e,b:t})}function qt(){if("undefined"!=typeof navigator&&null!=navigator){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Kt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const Xt=$e();function Zt(e,t){let n=e;if(_e(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||_e(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&$e().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],!Array.isArray(t)&&!_e(t))return void Q(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${n[0]} elements`);Q(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, `+`but is an array of ${t.length} elements`),Q(t.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} `+`elements, but has ${t.length} elements`);const i=n.slice(1);for(let s=0;s<t.length;++s)e(t[s],i,r.concat(s))}(e,r,[]),r}function Yt(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must `+`be ${e} tensor, but got ${t} tensor`)}}function Jt(e,t,n,r="numeric"){if(e instanceof kt)return Yt(r,e.dtype,t,n),e;let i=ke(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Yt(r,i,t,n),null==e||!_e(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error(`Argument '${t}' passed to '${n}' must be a `+`Tensor or TensorLike, but got '${null==e?"null":e.constructor.name}'`);const s=Zt(e,i);_e(e)||Array.isArray(e)||(e=[e]);const a="string"!==i?ht(e,i):ne(e,[],!0);return Gt.makeTensor(a,s,i)}function Qt(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a `+"`Tensor[]` or `TensorLike[]`");return e.map((e,i)=>Jt(e,`${t}[${i}]`,n,r))}function en(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const i=(...e)=>{Gt.startScope(n);try{const t=r(...e);return Pe(t)&&console.error("Cannot return a Promise inside of tidy."),Gt.endScope(t),t}catch(t){throw Gt.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Xt.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Xt.registerFlag("IS_BROWSER",()=>Kt()),Xt.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),Xt.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),Xt.registerFlag("PROD",()=>!1),Xt.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Xt.getBool("DEBUG")),Xt.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),Xt.registerFlag("IS_TEST",()=>!1),Xt.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);const tn=en({complex_:function(e,t){const n=Jt(e,"real","complex"),r=Jt(t,"imag","complex");return ee(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, `+"must match in call to tf.complex()."),Gt.runKernel("Complex",{real:n,imag:r})}});function nn(e,t,n,r){if(null==r&&(r=ke(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!_e(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Le(t);const e=re(t),r=re(n);Q(e===r,()=>`Based on the provided shape, [${t}], the tensor should have `+`${e} values but has ${r}`);for(let i=0;i<n.length;++i){const e=n[i],r=i!==n.length-1||e!==re(t.slice(i));Q(n[i]===t[i]||!r,()=>"Error creating a new Tensor. Inferred shape "+`(${n}) does not match the provided `+`shape (${t}). `)}}return _e(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ht(e,r):ne(e,[],!0),Gt.makeTensor(e,t,r)}function rn(e,t,n){return nn(e,t,Zt(e,n),n)}const sn={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function an(e,t){const n=[],r=[],i=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<i.length;++s){const a=i[s],o=Array.isArray(e)?e[s].tensor:e[a];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${o.dtype}`);const u={name:a,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise(async e=>{const t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n);let i=0;for(let s=0;s<t.length;s++){const e=t[s],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,i),i+=4,r.set(e,i),i+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(u.group=t),n.push(u)}return{data:un(await Promise.all(r)),specs:n}}function on(e,t){const n={};let r,i=0;for(const s of t){const t=s.name,a=s.dtype,o=s.shape,u=re(o);let l;if("quantization"in s){const n=s.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n&&"scale"in n))throw new Error(`Weight ${s.name} with quantization ${n.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==n.dtype)throw new Error(`Weight ${s.name} has unknown `+`quantization dtype ${n.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==a)throw new Error(`Weight ${s.name} is quantized with ${n.dtype} `+`which only supports weights of type float32 not ${a}.`)}const o=sn[n.dtype],c=e.slice(i,i+u*o),h="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===a)if("uint8"===n.dtype||"uint16"===n.dtype){l=new Float32Array(h.length);for(let e=0;e<h.length;e++)l[e]=h[e]*n.scale+n.min}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} `+"for weight type float32.");void 0===r&&(r=fn()),l=r(h)}else{if("int32"!==a)throw new Error(`Unsupported dtype in weight '${t}': ${a}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} `+"for weight type int32.");l=new Int32Array(h.length);for(let e=0;e<h.length;e++)l[e]=Math.round(h[e]*n.scale+n.min)}i+=u*o}else if("string"===a){const t=re(s.shape);l=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(i,i+4))[0];i+=4;const n=new Uint8Array(e.slice(i,i+t));l.push(n),i+=t}}else{const r=sn[a],s=e.slice(i,i+u*r);if("float32"===a)l=new Float32Array(s);else if("int32"===a)l=new Int32Array(s);else if("bool"===a)l=new Uint8Array(s);else{if("complex64"!==a)throw new Error(`Unsupported dtype in weight '${t}': ${a}`);{l=new Float32Array(s);const e=new Float32Array(l.length/2),r=new Float32Array(l.length/2);for(let t=0;t<e.length;t++)e[t]=l[2*t],r[t]=l[2*t+1];const i=rn(e,o,"float32"),a=rn(r,o,"float32");n[t]=tn(i,a),i.dispose(),a.dispose()}}i+=u*r}"complex64"!==a&&(n[t]=rn(l,o,a))}return n}function un(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let i=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}const ln="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function cn(e){return ln?Buffer.byteLength(e):new Blob([e]).size}function hn(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function dn(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function pn(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:cn(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:cn(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function fn(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let a=0;a<r.length;a++){const i=r[a];s[a]=e[n[i>>10]+(1023&i)]+t[i>>10]}return new Float32Array(i)}}class mn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==mn.instance&&(mn.instance=new mn),mn.instance}static registerSaveRouter(e){mn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){mn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return mn.getHandlers(e,"save")}static getLoadHandlers(e,t){return mn.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?mn.getInstance().loadRouters:mn.getInstance().saveRouters).forEach(t=>{const i=t(e,n);null!==i&&r.push(i)}),r}}const gn=e=>mn.registerSaveRouter(e),yn=e=>mn.registerLoadRouter(e),vn=e=>mn.getSaveHandlers(e),bn=(e,t)=>mn.getLoadHandlers(e,t);function _n(){if(!$e().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function xn(e){const t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}class wn{constructor(e){if(this.indexedDB=_n(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=()=>xn(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction("models_store","readonly"),r=t.objectStore("models_store").get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{const r=pn(t),s=i.transaction("model_info_store","readwrite");let a=s.objectStore("model_info_store");const o=a.put({modelPath:this.modelPath,modelArtifactsInfo:r});let u;o.onsuccess=()=>{u=i.transaction("models_store","readwrite");const o=u.objectStore("models_store").put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});o.onsuccess=()=>e({modelArtifactsInfo:r}),o.onerror=e=>{a=s.objectStore("model_info_store");const t=a.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(o.error)),t.onerror=e=>(i.close(),n(o.error))}},o.onerror=e=>(i.close(),n(o.error)),s.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)})}}wn.URL_SCHEME="indexeddb://";const Sn=e=>{return $e().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wn.URL_SCHEME)?(t=e.slice(wn.URL_SCHEME.length),new wn(t)):null;var t};mn.registerSaveRouter(Sn),mn.registerLoadRouter(Sn);class En{constructor(){this.indexedDB=_n()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open("tensorflowjs",1);n.onupgradeneeded=()=>xn(n),n.onsuccess=()=>{const r=n.result,i=r.transaction("model_info_store","readonly"),s=i.objectStore("model_info_store").getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(wn.URL_SCHEME)?t.slice(wn.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=()=>xn(r),r.onsuccess=()=>{const i=r.result,s=i.transaction("model_info_store","readwrite"),a=s.objectStore("model_info_store"),o=a.get(e);let u;o.onsuccess=()=>{if(null==o.result)return i.close(),n(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const r=a.delete(e),s=()=>{u=i.transaction("models_store","readwrite");const r=u.objectStore("models_store").delete(e);r.onsuccess=()=>t(o.result.modelArtifactsInfo),r.onerror=e=>n(o.error)};r.onsuccess=s,r.onerror=e=>(s(),i.close(),n(o.error))}},o.onerror=e=>(i.close(),n(o.error)),s.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)})}}const Cn="tensorflowjs_models",kn="info",Tn="model_topology",An="weight_specs",Mn="weight_data",Nn="model_metadata";function In(e){return{info:[Cn,e,kn].join("/"),topology:[Cn,e,Tn].join("/"),weightSpecs:[Cn,e,An].join("/"),weightData:[Cn,e,Mn].join("/"),modelMetadata:[Cn,e,Nn].join("/")}}function Dn(e){const t=e.split("/");if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join("/")}class Rn{constructor(e){if(!$e().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=In(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=pn(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(ln)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:i}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${i.modelTopologyBytes}, `+`weightSpecsBytes=${i.weightSpecsBytes}, `+`weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=function(e){if(ln){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(s),t}}Rn.URL_SCHEME="localstorage://";const Ln=e=>{return $e().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Rn.URL_SCHEME)?(t=e.slice(Rn.URL_SCHEME.length),new Rn(t)):null;var t};mn.registerSaveRouter(Ln),mn.registerLoadRouter(Ln);class On{constructor(){Q($e().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Q("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Cn+"/",n="/"+kn;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);i.startsWith(t)&&i.endsWith(n)&&(e[Dn(i)]=JSON.parse(this.LS.getItem(i)))}return e}async removeModel(e){var t;const n=In(e=(t=e).startsWith(Rn.URL_SCHEME)?t.slice(Rn.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}class Fn{constructor(){this.managers={}}static getInstance(){return null==Fn.instance&&(Fn.instance=new Fn),Fn.instance}static registerManager(e,t){Q(null!=e,()=>"scheme must not be undefined or null."),e.endsWith("://")&&(e=e.slice(0,e.indexOf("://"))),Q(e.length>0,()=>"scheme must not be an empty string.");const n=Fn.getInstance();Q(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function Pn(e){if(-1===e.indexOf("://"))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${Fn.getSchemes().join(",")}`);return{scheme:e.split("://")[0],path:e.split("://")[1]}}async function zn(e,t,n=!1){Q(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=mn.getLoadHandlers(e);Q(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),Q(r.length<2,()=>`Copying failed because more than one (${r.length}) `+`load handlers for source URL ${e}.`);const i=r[0],s=mn.getSaveHandlers(t);Q(s.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${t}.`),Q(s.length<2,()=>`Copying failed because more than one (${r.length}) `+`save handlers for destination URL ${t}.`);const a=s[0],o=Pn(e).scheme,u=Pn(e).path,l=o===Pn(e).scheme,c=await i.load();n&&l&&await Fn.getManager(o).removeModel(u);const h=await a.save(c);return n&&!l&&await Fn.getManager(o).removeModel(u),h.modelArtifactsInfo}async function $n(){const e=Fn.getSchemes(),t={};for(const n of e){const e=await Fn.getManager(n).listModels();for(const r in e)t[n+"://"+r]=e[r]}return t}async function Bn(e){const t=Pn(e);return Fn.getManager(t.scheme).removeModel(t.path)}async function Un(e,t){return zn(e,t,!1)}async function Vn(e,t){return zn(e,t,!0)}class Wn{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if($e().get("IS_BROWSER")){$e().setPlatform("browser",new Wn);try{Fn.registerManager(Rn.URL_SCHEME,new On)}catch(sR){}try{Fn.registerManager(wn.URL_SCHEME,new En)}catch(sR){}}let Hn;function Gn(e,t="float32",n){return t=t||"float32",Le(e),new wt(e,t,n)}$e().get("IS_NODE")&&$e().setPlatform("node",new class{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=$e().global.fetch?$e().global.fetch(e,t):(null==Hn&&(Hn=n(1)),Hn(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});const jn=en({cast_:function(e,t){const n=Jt(e,"x","cast");if(!ve(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Gt.runKernel("Cast",{x:n},{dtype:t})}}),qn=en({clone_:function(e){const t=Jt(e,"x","clone","string_or_numeric");return Gt.runKernel("Identity",{x:t})}});function Kn(e,t=!1){console.log(e.toString(t))}function Xn(e){return new Promise(e=>setTimeout(e)).then(e)}Ht(),Et={buffer:Gn,cast:jn,clone:qn,print:Kn};class Zn{constructor(e){if(!$e().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Zn.URL_SCHEME)&&(e=e.slice(Zn.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer);const r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(i.download=this.modelTopologyFileName,i.href=r,await Xn(()=>i.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await Xn(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:pn(e)}}}}Zn.URL_SCHEME="downloads://";class Yn{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.files=e}async load(){const e=this.files[0],t=this.files.slice(1);return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(null==a)return void r(new Error(`modelTopology field is missing from file ${e.name}`));0===t.length&&n({modelTopology:a});const o=s.weightsManifest;if(null==o)return void r(new Error(`weightManifest field is missing from file ${e.name}`));let u;try{u=this.checkManifestAndWeightFiles(o,t)}catch(sR){return void r(sR)}const l=[],c=[],h=[];o.forEach(e=>{e.paths.forEach(e=>{c.push(e),h.push(null)}),l.push(...e.weights)}),o.forEach(e=>{e.paths.forEach(e=>{const t=new FileReader;t.onload=t=>{const r=t.target.result,i=c.indexOf(e);if(h[i]=r,-1===h.indexOf(null)){const e={modelTopology:a,weightSpecs:l,weightData:hn(h),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(u[e])})})},i.onerror=t=>r("Failed to read model topology and weights manifest JSON "+`from file '${e.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only."),i.readAsText(e)})}checkManifestAndWeightFiles(e,t){const n=[],r=t.map(e=>dn(e.name)),i={};for(const s of e)s.paths.forEach(e=>{const s=dn(e);if(-1!==n.indexOf(s))throw new Error("Duplicate file basename found in weights manifest: "+`'${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);i[e]=t[r.indexOf(s)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${n.length}) and the number of weight files provided `+`(${t.length}).`);return i}}function Jn(e){return new Yn(e)}function Qn(e,t,n,r){!function(e){Q(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){Q(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${e}`),Q(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${t}`),Q(t>=e,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${e} and endFraction `+`${t}`)}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map(s=>(s.then(s=>{const a=n+ ++i/e.length*(r-n);return t(a),s}),s)))}async function er(e,t){null==t&&(t={});const n=null==t.fetchFunc?$e().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),i=(null==t.onProgress?await Promise.all(r):await Qn(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(i):await Qn(i,t.onProgress,.5,1)}async function tr(e,t="",n,r){return nr(e=>er(e,{requestInit:r}))(e,t,n)}function nr(e){return async(t,n="",r)=>{const i=t.map(()=>!1),s={},a=null!=r?r.map(()=>!1):[],o=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{const u=sn["quantization"in e?e.quantization.dtype:e.dtype]*re(e.shape),l=()=>{i[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach((t,n)=>{t===e.name&&(l(),a[n]=!0)}):l(),o.push(e.name),n+=u})}),!a.every(e=>e)){const e=r.filter((e,t)=>!a[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${o.join(", ")}.`)}const u=i.reduce((e,t,n)=>(t&&e.push(n),e),[]),l=[];u.forEach(e=>{t[e].paths.forEach(e=>{const t=n+(n.endsWith("/")?"":"/")+e;l.push(t)})});const c=await e(l),h={};let d=0;return u.forEach(e=>{const n=t[e].paths.length;let r=0;for(let t=0;t<n;t++)r+=c[d+t].byteLength;const i=new ArrayBuffer(r),a=new Uint8Array(i);let o=0;for(let t=0;t<n;t++){const e=new Uint8Array(c[d+t]);a.set(e,o),o+=e.byteLength}s[e].forEach(e=>{const t=on(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]}),d+=n}),h}}mn.registerSaveRouter(e=>$e().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Zn.URL_SCHEME)?function(e="model"){return new Zn(e)}(e.slice(Zn.URL_SCHEME.length)):null);class rr{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Q("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=$e().platform.fetch,Q(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Q(2===e.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:e.weightSpecs}]};null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:pn(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${r.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+`${e.status}. Please verify this URL points to `+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(p){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest,i=t.generatedBy,s=t.convertedBy,a=t.format,o=t.signature,u=t.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let l,c;if(null!=r){const e=await this.loadWeights(r);[l,c]=e}const h={modelTopology:n,weightSpecs:l,weightData:c,generatedBy:i,convertedBy:s,format:a};null!=o&&(h.signature=o),null!=u&&(h.userDefinedMetadata=u);const d=t.modelInitializer;return d&&(h.modelInitializer=d),h}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),i=this.weightPathPrefix||n,s=[];for(const u of e)s.push(...u.weights);const a=[],o=[];for(const u of e)for(const e of u.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):a.push(i+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(o)),[s,hn(await er(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function ir(e){return null!=e.match(rr.URL_SCHEME_REGEX)}rr.URL_SCHEME_REGEX=/^https?:\/\//;const sr=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>ir(e)):ir(e),n)return ar(e,t)}return null};function ar(e,t){return new rr(e,t)}function or(e,t){return ar(e,t)}mn.registerSaveRouter(sr),mn.registerLoadRouter(sr);class ur{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class lr{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function cr(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ur(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ur({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ur({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function hr(e){return new lr(e)}const dr=en({matMul_:function(e,t,n=!1,r=!1){let i=Jt(e,"a","matMul"),s=Jt(t,"b","matMul");return[i,s]=Pt(i,s),Gt.runKernel("BatchMatMul",{a:i,b:s},{transposeA:n,transposeB:r})}}),pr=en({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const i=Jt(e,"indices","oneHot","int32");return Gt.runKernel("OneHot",{indices:i},{depth:t,onValue:n,offValue:r})}}),fr=en({transpose_:function(e,t){const n=Jt(e,"x","transpose");return null==t&&(t=n.shape.map((e,t)=>t).reverse()),Q(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of perm ${t}.`),t.forEach(e=>{Q(e>=0&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1}`+` but got ${t}`)}),n.rank<=1?n.clone():Gt.runKernel("Transpose",{x:n},{perm:t})}}),mr=en({confusionMatrix_:function(e,t,n){const r=Jt(e,"labels","confusionMatrix"),i=Jt(t,"predictions","confusionMatrix");Q(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, "+`but got ${n}`),Q(1===r.rank,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),Q(1===i.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${i.rank}`),Q(r.shape[0]===i.shape[0],()=>"Mismatch in the number of examples: "+`${r.shape[0]} vs. ${i.shape[0]}. `+"Labels and predictions should have the same number of elements."),Q(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+`${n}`);const s=pr(jn(r,"int32"),n),a=pr(jn(i,"int32"),n),o=fr(s),u=dr(o,a);return jn(u,"int32")}});function gr(e,t,n){if(te(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Zt(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return nn(e,t,r,n)}let yr;async function vr(e,t){let n=Jt(e,"img","toPixels");if(!(e instanceof kt)){const e=n;n=jn(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${s}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const a=await n.data(),o="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*r*4);for(let l=0;l<r*i;++l){const e=[0,0,0,255];for(let r=0;r<s;r++){const t=a[l*s+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===s?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}const t=4*l;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=i,t.height=r;const e=t.getContext("2d"),n=new ImageData(u,i,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const br=en({fromPixels_:function(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)a=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${e.constructor.name}`);o=!0}if(i){const t=2;if(i&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=tt("FromPixels",Gt.backendName))return Gt.runKernel("FromPixels",{pixels:e},{numChannels:t});const[u,l]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];let c,h;if(a?c=e.getContext("2d").getImageData(0,0,u,l).data:r||n?c=e.data:(s||i||o)&&(null==yr&&(yr=document.createElement("canvas").getContext("2d")),yr.canvas.width=u,yr.canvas.height=l,yr.drawImage(e,0,0,u,l),c=yr.getImageData(0,0,u,l).data),4===t)h=new Int32Array(c);else{const e=u*l;h=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)h[n*t+e]=c[4*n+e]}return gr(h,[l,u,t],"int32")}});function _r(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${n}.`);if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${t.shape[r-1]} vs. ${n}`);if(0===re(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${e.shape}.`);const i=t.shape,s=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const o=e.shape,u=i.slice();u.pop();let l=1;for(let h=s;h<n;++h)l*=o[h],u.push(o[h]);const c=[...Me(e.shape).map(e=>e/l),1].slice(0,s);return[u,a,l,c]}function xr(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${n.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(s+` update.rank != ${i+e.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${e[a+i]})`)}function wr(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}xr(n,t,e)}function Sr(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,s=n.length;let a=1;for(let u=i;u<s;++u)a*=n[u];const o=i<1?1:i;return{sliceRank:i,numUpdates:re(t.shape)/o,sliceSize:a,strides:[...Me(n.slice(0,i)),1],outputSize:re(n)}}function Er(e,t,n){const r=e.shape.length;Q(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must `+`match the rank of the array (${r}).`),Q(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must `+`match the rank of the array (${r}).`);for(let i=0;i<r;++i)Q(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] `+`(${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function Cr(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function kr(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function Tr(e,t,n,r){const i=[...e];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)0===s?i[t]=1:(i.splice(t,0,1),i.pop());return i}function Ar(e,t,n){return n<=e?n:n-(t-1)}function Mr(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Nr(e,t,n,r,i,s,a,o,u){const l=e.length;let c=new Array(l),h=new Array(l),d=new Array(l);if(t.length&&n>0){const u=t[0],l=n+1;c=Ir(a,u,l,r,e),h=Dr(o,u,l,i,e),d=Tr(s,u,l,e)}else for(let p=0;p<l;p++)c[p]=Lr(a,r,s,e,p,u),h[p]=Or(o,i,s,e,p,u),d[p]=Rr(s,p,u);return{begin:c,end:h,strides:d}}function Ir(e,t,n,r,i){const s=[...i],a=Mr(n,t);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const i=Ar(t,n,o);let a=r[i];e&1<<i&&(a=0),s[o]=a}return s}function Dr(e,t,n,r,i){const s=[...i],a=Mr(n,t);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const i=Ar(t,n,o);let a=r[i];e&1<<i&&(a=Number.MAX_SAFE_INTEGER),s[o]=a}for(let o=0;o<s.length;o++){const e=i[o];s[o]<0&&(s[o]+=e),s[o]=K(0,s[o],i[o])}return s}function Rr(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Lr(e,t,n,r,i,s){let a=t[i];(e&1<<i||s&1<<i||null==a)&&(a=(n[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const o=r[i];return a<0&&(a+=o),a=K(0,a,o-1),a}function Or(e,t,n,r,i,s){let a=t[i];const o=n[i]||1;(e&1<<i||s&1<<i||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=r[i];return a<0&&(a+=u),a=o>0?K(0,a,u):K(-1,a,u-1),a}function Fr(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Pr(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function zr(e,t,n){let r;const i=e.shape.length;let s;return r="number"==typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach(e=>{Q(-1!==e,()=>"slice() does not support negative begin indexing.")}),s=null==n?new Array(i).fill(-1):"number"==typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,s=s.map((t,n)=>t>=0?t:(Q(-1===t,()=>"Negative size values should be exactly -1 but got "+`${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,s]}function $r(e,t,n,r,i,s,a,o,u){let l=t.slice(),c=n.slice(),h=r;null==r&&(h=new Array(l.length));const d=Cr(a);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==a&&0!==o)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==a&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const p=e.length-l.length,f=Cr(o),m=e.slice();f.forEach(e=>{l[e]=0,c[e]=1,m.splice(e,0,1)});const{begin:g,end:y,strides:v}=Nr(m,d,p,l,c,h,i,s,a);l=g,c=y,h=v;const b=Cr(u);b.forEach(e=>{c[e]=l[e]+1,h[e]=1});const _=kr(l,c,h),x=_.filter((e,t)=>-1===b.indexOf(t));return{nonStrided:h.every(e=>1===e),$begin:l,$end:c,$strides:h,size:_,newShape:m,outShape:x}}class Br{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Ur{constructor(){this.classNameMap={}}static getMap(){return null==Ur.instance&&(Ur.instance=new Ur),Ur.instance}static register(e){Ur.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Vr(e){Q(null!=e.className,()=>"Class being registered does not have the static className property defined."),Q("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),Q(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Ur.register(e)}const Wr=.1;function Hr(e,t,n){return null==n&&(n=Gr()),jr(e,t,(e,t)=>Zr(e,t,n))}function Gr(){return 32===Gt.backend.floatPrecision()?.001:Wr}function jr(e,t,n){let r=!0;if((_e(e)||_e(t))&&(r=!1),_e(e)&&_e(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. `+`Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=Zt(e),r=Zt(t);if(!se(n,r))throw new Error("Arrays have different shapes. "+`Actual: [${n}]. Expected: [${r}]`)}const i=_e(e)?e:ne(e),s=_e(t)?t:ne(t);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs `+`expected: ${s.length}.\n`+`Actual:   ${i}.\n`+`Expected: ${s}.`);for(let a=0;a<s.length;++a){const e=i[a],t=s[a];if(!n(e,t))throw new Error(`Arrays differ: actual[${a}] = ${e}, expected[${a}] = ${t}.\n`+`Actual:   ${i}.\n`+`Expected: ${s}.`)}}function qr(e,t){e().then(()=>t.fail(),()=>t())}function Kr(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Se(e)||Se(e[0])||Se(t)||Se(t[0])?jr(e,n,(e,t)=>e==t):jr(e,t,(e,t)=>Zr(e,t,0))}function Xr(e,t,n){if(null==n&&(n=Gr()),!Zr(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function Zr(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Yr(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Jr(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function Qr(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?Qr(n):e[t]=ft(n)}return e}function ei(){$e().set("PROD",!0)}function ti(){$e().set("DEBUG",!0)}function ni(){$e().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function ri(e){$e().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ii(){Gt.disposeVariables()}function si(){return Gt}function ai(){return Gt.memory()}function oi(e){return Gt.profile(e)}function ui(e,t){return Gt.tidy(e,t)}function li(e){Bt(e).forEach(e=>e.dispose())}function ci(e){return Gt.keep(e)}function hi(e){return Gt.time(e)}function di(e){return Gt.setBackend(e)}function pi(){return Gt.ready()}function fi(){return Gt.backendName}function mi(e){Gt.removeBackend(e)}function gi(e){return Gt.findBackend(e)}function yi(e){return Gt.findBackendFactory(e)}function vi(e,t,n=1){return Gt.registerBackend(e,t,n)}function bi(){return Gt.backend}function _i(e,t){$e().setPlatform(e,t)}Ct=ri;const xi=en({add_:function(e,t){let n=Jt(e,"a","add"),r=Jt(t,"b","add");return[n,r]=Pt(n,r),Gt.runKernel("Add",{a:n,b:r})}}),wi=en({floorDiv_:function(e,t){let n=Jt(e,"a","floorDiv"),r=Jt(t,"b","floorDiv");return[n,r]=Pt(n,r),Gt.runKernel("FloorDiv",{a:n,b:r})}}),Si=en({div_:function(e,t){let n=Jt(e,"a","div"),r=Jt(t,"b","div");return[n,r]=Pt(n,r),"int32"===n.dtype&&"int32"===r.dtype?wi(n,r):Gt.runKernel("RealDiv",{a:n,b:r},{})}}),Ei=en({mul_:function(e,t){let n=Jt(e,"a","mul"),r=Jt(t,"b","mul");return[n,r]=Pt(n,r),Gt.runKernel("Multiply",{a:n,b:r})}}),Ci=en({sqrt_:function(e){const t=Jt(e,"x","sqrt");return Gt.runKernel("Sqrt",{x:t})}}),ki=en({square_:function(e){const t=Jt(e,"x","square");return Gt.runKernel("Square",{x:t},{})}}),Ti=en({zerosLike_:function(e){const t=Jt(e,"x","zerosLike");return Gt.runKernel("ZerosLike",{x:t})}});function Ai(e){return Q(Te(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const r=Jt(t,"x","tf.grad","string_or_numeric"),i=null!=n?Jt(n,"dy","tf.grad"):null;return Gt.tidy(()=>{const{value:t,grads:n}=Gt.gradients(()=>e(r),[r],i);return null!=i&&ee(t.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Li(n),n[0]})}}function Mi(e){return Q(Te(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{Q(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Qt(t,"args","tf.grads","string_or_numeric"),i=null!=n?Jt(n,"dy","tf.grads"):null;return Gt.tidy(()=>{const{value:t,grads:n}=Gt.gradients(()=>e(...r),r,i);return null!=i&&ee(t.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Li(n),n})}}function Ni(e){return Q(Te(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{Q(t instanceof kt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),Q(null==n||n instanceof kt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=Gt.gradients(()=>e(t),[t],n);return Li(r),{grad:r[0],value:i}}}function Ii(e){return Q(Te(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{Q(Array.isArray(t)&&t.every(e=>e instanceof kt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),Q(null==n||n instanceof kt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=Gt.gradients(()=>e(...t),t,n);return null!=n&&ee(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Li(r.grads),r}}function Di(e,t){Q(Te(e),()=>"The f passed in variableGrads(f) must be a function"),Q(null==t||Array.isArray(t)&&t.every(e=>e instanceof At),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in Gt.registeredVariables)t.push(Gt.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,i=t.length;Q((t=t.filter(e=>e.trainable)).length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${i} variables is `+"trainable.");const{value:s,grads:a}=Gt.gradients(e,t,null,!0);Q(a.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Q(0===s.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${s.rank} tensor`);const o={};return t.forEach((e,t)=>{null!=a[t]&&(o[e.name]=a[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:s,grads:o}}function Ri(e){return Gt.customGrad(e)}function Li(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function Oi(e,t){if((_e(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&_e(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return nn(e,[],[],t)}class Fi extends Br{minimize(e,t=!1,n){const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:i[e.name]}));this.applyGradients(e)}else this.applyGradients(i);return li(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Di(e,t)}dispose(){null!=this.iterations_&&li(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Oi(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Fi,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class Pi extends Fi{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Gt.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Gt.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:ui(()=>Ti(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:ui(()=>Ti(r).variable(!1))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const s=this.accumulatedGrads[n].variable,a=this.accumulatedUpdates[n].variable;ui(()=>{const e=xi(Ei(s,this.rho),Ei(ki(i),1-this.rho)),t=Ei(Si(Ci(xi(a,this.epsilon)),Ci(xi(s,this.epsilon))),i),n=xi(Ei(a,this.rho),Ei(ki(t),1-this.rho));s.assign(e),a.assign(n);const o=xi(Ei(t,-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(li(this.accumulatedGrads.map(e=>e.variable)),li(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function zi(e,t,n){return Gt.runKernel("Fill",{},{shape:e,value:t,dtype:n})}Pi.className="Adadelta",Vr(Pi);class $i extends Fi{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Gt.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:ui(()=>zi(r.shape,this.initialAccumulatorValue).variable(e))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const s=this.accumulatedGrads[n].variable;ui(()=>{const e=xi(s,ki(i));s.assign(e);const t=xi(Ei(Si(i,Ci(xi(e,Gt.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&li(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}$i.className="Adagrad",Vr($i);const Bi=en({pow_:function(e,t){let n=Jt(e,"base","pow"),r=Jt(t,"exp","pow");return[n,r]=Pt(n,r),Gt.runKernel(Xe,{a:n,b:r})}}),Ui=en({sub_:function(e,t){let n=Jt(e,"a","sub"),r=Jt(t,"b","sub");return[n,r]=Pt(n,r),Gt.runKernel(Ye,{a:n,b:r})}});class Vi extends Fi{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ui(()=>{this.accBeta1=Oi(t).variable(),this.accBeta2=Oi(n).variable()}),null==r&&(this.epsilon=Gt.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);ui(()=>{const n=Ui(1,this.accBeta1),r=Ui(1,this.accBeta2);t.forEach((t,i)=>{const s=Gt.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:ui(()=>Ti(s).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:ui(()=>Ti(s).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;const o=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,l=xi(Ei(o,this.beta1),Ei(a,1-this.beta1)),c=xi(Ei(u,this.beta2),Ei(ki(a),1-this.beta2)),h=Si(l,n),d=Si(c,r);o.assign(l),u.assign(c);const p=xi(Ei(Si(h,xi(Ci(d),this.epsilon)),-this.learningRate),s);s.assign(p)}),this.accBeta1.assign(Ei(this.accBeta1,this.beta1)),this.accBeta2.assign(Ei(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&li(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&li(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),ui(()=>{this.accBeta1.assign(Bi(this.beta1,this.iterations_+1)),this.accBeta2.assign(Bi(this.beta2,this.iterations_+1))});const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}Vi.className="Adam",Vr(Vi);const Wi=en({abs_:function(e){const t=Jt(e,"x","abs");return Gt.runKernel("complex64"===t.dtype?"ComplexAbs":"Abs",{x:t})}});function Hi(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=e[s]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(s)}return r}function Gi(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],s=t.length-r-1,a=t[s];(null==i||1===i&&a>1)&&n.unshift(s)}return n}function ji(e,t){const n=[],r=Math.max(e.length,t.length);for(let i=0;i<r;i++){let r=e[e.length-i-1];null==r&&(r=1);let s=t[t.length-i-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error("Operands could not be broadcast together with shapes "+`${e} and ${t}.`);n.unshift(r)}}return n}const qi=en({maximum_:function(e,t){let n=Jt(e,"a","maximum"),r=Jt(t,"b","maximum");return[n,r]=Pt(n,r),"bool"===n.dtype&&(n=jn(n,"int32"),r=jn(r,"int32")),ji(n.shape,r.shape),Gt.runKernel("Maximum",{a:n,b:r})}});class Ki extends Fi{constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ui(()=>{this.iteration=Oi(0).variable(),this.accBeta1=Oi(t).variable()}),null==r&&(this.epsilon=Gt.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);ui(()=>{const n=Ui(1,this.accBeta1),r=Si(-this.learningRate,xi(Ei(this.iteration,this.decay),1));t.forEach((t,i)=>{const s=Gt.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:Ti(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:Ti(s).variable(!1)});const a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;const o=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,l=xi(Ei(o,this.beta1),Ei(a,1-this.beta1)),c=Ei(u,this.beta2),h=Wi(a),d=qi(c,h);o.assign(l),u.assign(d);const p=xi(Ei(Si(r,n),Si(l,xi(d,this.epsilon))),s);s.assign(p)}),this.iteration.assign(xi(this.iteration,1)),this.accBeta1.assign(Ei(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&li(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&li(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}Ki.className="Adamax",Vr(Ki);class Xi extends Fi{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=Gt.registeredVariables[t];ui(()=>{const e=xi(Ei(this.c,r),i);i.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ci(Oi(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}Xi.className="SGD",Vr(Xi);class Zi extends Xi{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Oi(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Gt.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:ui(()=>Ti(r).variable(e))}}const i=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&ui(()=>{let e;const t=xi(Ei(this.m,i),s);e=xi(Ei(this.c,this.useNesterov?xi(s,Ei(t,this.m)):t),r),i.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&li(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}Zi.className="Momentum",Vr(Zi);class Yi extends Fi{constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=Gt.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Gt.registeredVariables[t];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:ui(()=>Ti(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:ui(()=>Ti(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:ui(()=>Ti(r).variable(!1))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const s=this.accumulatedMeanSquares[n].variable,a=this.accumulatedMoments[n].variable;ui(()=>{const e=xi(Ei(s,this.decay),Ei(ki(i),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=xi(Ei(t,this.decay),Ei(i,1-this.decay)),u=Si(Ei(i,this.learningRate),Ci(Ui(e,xi(ki(o),this.epsilon)))),l=xi(Ei(a,this.momentum),u);s.assign(e),t.assign(o),a.assign(l);const c=Ui(r,l);r.assign(c)}else{const e=xi(Ei(s,this.decay),Ei(ki(i),1-this.decay)),t=xi(Ei(a,this.momentum),Si(Ei(i,this.learningRate),Ci(xi(e,this.epsilon))));s.assign(e),a.assign(t);const n=Ui(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&li(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&li(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&li(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}Yi.className="RMSProp",Vr(Yi);const Ji=en({acos_:function(e){const t=Jt(e,"x","acos");return Gt.runKernel("Acos",{x:t})}}),Qi=en({acosh_:function(e){const t=Jt(e,"x","acosh");return Gt.runKernel("Acosh",{x:t})}}),es=en({addN_:function(e){Q(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),Q(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${e.length}`);const t=e.map((e,t)=>Jt(e,`tensors${t}`,"addN")),n=t[0];return t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!se(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),Gt.runKernel("AddN",t)}}),ts=en({all_:function(e,t=null,n=!1){const r=Jt(e,"x","all","bool");return Gt.runKernel("All",{x:r},{axis:t,keepDims:n})}}),ns=en({any_:function(e,t=null,n=!1){const r=Jt(e,"x","any","bool");return Gt.runKernel("Any",{x:r},{axis:t,keepDims:n})}}),rs=en({argMax_:function(e,t=0){const n=Jt(e,"x","argMax");return Gt.runKernel("ArgMax",{x:n},{axis:t})}}),is=en({argMin_:function(e,t=0){const n=Jt(e,"x","argMin");return Gt.runKernel("ArgMin",{x:n},{axis:t})}}),ss=en({asin_:function(e){const t=Jt(e,"x","asin");return Gt.runKernel("Asin",{x:t})}}),as=en({asinh_:function(e){const t=Jt(e,"x","asinh");return Gt.runKernel("Asinh",{x:t})}}),os=en({atan_:function(e){const t=Jt(e,"x","atan");return Gt.runKernel("Atan",{x:t})}}),us=en({atan2_:function(e,t){let n=Jt(e,"a","atan2"),r=Jt(t,"b","atan2");return[n,r]=Pt(n,r),Gt.runKernel("Atan2",{a:n,b:r})}}),ls=en({atanh_:function(e){const t=Jt(e,"x","atanh");return Gt.runKernel("Atanh",{x:t})}});function cs(e,t,n,r,i="NHWC",s){return ps(e,[...t,e[3]],n,s,r,null,null,ws(i))}function hs(e,t,n,r,i,s,a="channelsLast"){const[o,u]=gs(t);let l;if("channelsLast"===a)l=[o,u,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);l=[o,u,e[1],e[1]]}return ps(e,l,n,r,i,s,!1,a)}function ds(e,t,n,r,i,s,a="NDHWC"){const[o,u,l]=ys(t);let c,h;if("NDHWC"===a)h="channelsLast",c=[o,u,l,e[4],e[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);h="channelsFirst",c=[o,u,l,e[1],e[1]]}return fs(e,c,n,r,i,!1,h,s)}function ps(e,t,n,r,i,s,a=!1,o="channelsLast"){let[u,l,c,h]=[-1,-1,-1,-1];if("channelsLast"===o)[u,l,c,h]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[u,h,l,c]=e}const[d,p,,f]=t,[m,g]=gs(n),[y,v]=gs(r),b=vs(d,y),_=vs(p,v),{padInfo:x,outHeight:w,outWidth:S}=function(e,t,n,r,i,s,a,o,u){let l,c,h;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=ms(e,t,n));const s=e[1];return[bs((e[0]-t+2*r)/n+1,i),bs((s-t+2*r)/n+1,i)]}([t,n],s,r,e,o);c=i[0],h=i[1]}else if("same"===e){c=Math.ceil(t/r),h=Math.ceil(n/i);const e=Math.max(0,(c-1)*r+s-t),o=Math.max(0,(h-1)*i+a-n),u=Math.floor(e/2),d=e-u,p=Math.floor(o/2);l={top:u,bottom:d,left:p,right:o-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-s+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===u?e[1][0]:e[2][0],p="channelsLast"===u?e[1][1]:e[2][1],f="channelsLast"===u?e[2][0]:e[3][0],m="channelsLast"===u?e[2][1]:e[3][1];l={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},c=bs((t-s+d+p)/r+1,o),h=bs((n-a+f+m)/i+1,o)}}return{padInfo:l,outHeight:c,outWidth:h}}(i,l,c,m,g,b,_,s,o),E=a?f*h:f;let C;return"channelsFirst"===o?C=[u,E,w,S]:"channelsLast"===o&&(C=[u,w,S,E]),{batchSize:u,dataFormat:o,inHeight:l,inWidth:c,inChannels:h,outHeight:w,outWidth:S,outChannels:E,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:_,dilationHeight:y,dilationWidth:v,inShape:e,outShape:C,filterShape:t}}function fs(e,t,n,r,i,s=!1,a="channelsLast",o){let[u,l,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[u,l,c,h,d]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[u,d,l,c,h]=e}const[p,f,m,,g]=t,[y,v,b]=ys(n),[_,x,w]=ys(r),S=vs(p,_),E=vs(f,x),C=vs(m,w),{padInfo:k,outDepth:T,outHeight:A,outWidth:M}=function(e,t,n,r,i,s,a,o,u,l,c){let h,d,p,f;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const s=function(e,t,n,r,i,s){null==i&&(i=ms(e,t,r));const a=e[1],o=e[2];return[bs((e[0]-t+2*i)/r+1,s),bs((a-t+2*i)/r+1,s),bs((o-t+2*i)/r+1,s),1]}([t,n,r,1],o,0,i,e,c);d=s[0],p=s[1],f=s[2]}else if("same"===e){d=Math.ceil(t/i),p=Math.ceil(n/s),f=Math.ceil(r/a);const e=(d-1)*i+o-t,c=(p-1)*s+u-n,m=(f-1)*a+l-r,g=Math.floor(e/2),y=e-g,v=Math.floor(c/2),b=c-v,_=Math.floor(m/2);h={top:v,bottom:b,left:_,right:m-_,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-o+1)/i),p=Math.ceil((n-u+1)/s),f=Math.ceil((r-l+1)/a)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,l,c,h,y,v,b,S,E,C,o),N=s?g*d:g;let I;return"channelsFirst"===a?I=[u,N,T,A,M]:"channelsLast"===a&&(I=[u,T,A,M,N]),{batchSize:u,dataFormat:a,inDepth:l,inHeight:c,inWidth:h,inChannels:d,outDepth:T,outHeight:A,outWidth:M,outChannels:N,padInfo:k,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationDepth:_,dilationHeight:x,dilationWidth:w,inShape:e,outShape:I,filterShape:t}}function ms(e,t,n,r=1){const i=vs(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function gs(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function ys(e){return"number"==typeof e?[e,e,e]:e}function vs(e,t){return t<=1?e:e+(e-1)*(t-1)}function bs(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function _s(e){const[t,n,r]=gs(e);return 1===t&&1===n&&1===r}function xs(e,t){return _s(e)||_s(t)}function ws(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}const Ss=en({reshape_:function(e,t){const n=Jt(e,"x","reshape","string_or_numeric");return Gt.runKernel("Reshape",{x:n},{shape:t})}}),Es=en({avgPool_:function(e,t,n,r,i){const s=Jt(e,"x","avgPool","float32");Q(xs(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`);let a=s,o=!1;3===s.rank&&(o=!0,a=Ss(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Q(4===a.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),null!=i&&Q(ae(r),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);let u=Gt.runKernel("AvgPool",{x:a},{filterSize:t,strides:n,pad:r,dimRoundingMode:i});return u=jn(u,s.dtype),o?Ss(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Cs=en({avgPool3d_:function(e,t,n,r,i,s="NDHWC"){const a=Jt(e,"x","avgPool3d","float32");let o=a,u=!1;4===a.rank&&(u=!0,o=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Q(5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Q("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${s}`),null!=i&&Q(ae(r),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);let l=Gt.runKernel("AvgPool3D",{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return l=jn(l,o.dtype),u?Ss(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}}),ks=en({concat_:function(e,t=0){Q(e.length>=1,()=>"Pass at least one tensor to concat");const n=Qt(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length?qn(n[0]):Gt.runKernel("Concat",n,{axis:t})}}),Ts=en({sigmoid_:function(e){const t=Jt(e,"x","sigmoid");return Gt.runKernel("Sigmoid",{x:t})}}),As=en({slice_:function(e,t,n){const r=Jt(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return Gt.runKernel("Slice",{x:r},{begin:t,size:n})}}),Ms=en({tanh_:function(e){const t=Jt(e,"x","tanh");return Gt.runKernel("Tanh",{x:t})}}),Ns=en({basicLSTMCell_:function(e,t,n,r,i,s){const a=Jt(e,"forgetBias","basicLSTMCell"),o=Jt(t,"lstmKernel","basicLSTMCell"),u=Jt(n,"lstmBias","basicLSTMCell"),l=Jt(r,"data","basicLSTMCell"),c=Jt(i,"c","basicLSTMCell"),h=Jt(s,"h","basicLSTMCell"),d=ks([l,h],1),p=dr(d,o),f=xi(p,u),m=f.shape[1]/4,g=[f.shape[0],m],y=As(f,[0,0],g),v=As(f,[0,m],g),b=As(f,[0,2*m],g),_=As(f,[0,3*m],g),x=xi(Ei(Ts(y),Ms(v)),Ei(c,Ts(xi(a,b))));return[x,Ei(Ms(x),Ts(_))]}}),Is=en({batchToSpaceND_:function(e,t,n){const r=Jt(e,"x","batchToSpaceND"),i=t.reduce((e,t)=>e*t);return Q(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),Q(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),Q(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${t.join(" * ")} === ${i}`),Gt.runKernel("BatchToSpaceND",{x:r},{blockShape:t,crops:n})}}),Ds=en({batchNorm_:function(e,t,n,r,i,s){null==s&&(s=.001);const a=Jt(e,"x","batchNorm"),o=Jt(t,"mean","batchNorm"),u=Jt(n,"variance","batchNorm");let l,c;null!=i&&(l=Jt(i,"scale","batchNorm")),null!=r&&(c=Jt(r,"offset","batchNorm")),Q(o.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Q(null==c||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Q(null==l||o.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=function(e){let t;return t=0===e.rank||1===e.rank?Ss(e,[1,1,1,e.size]):2===e.rank?Ss(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Ss(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(a),d=Gt.runKernel("FusedBatchNorm",{x:h,scale:l,offset:c,mean:o,variance:u},{varianceEpsilon:s});return Ss(d,a.shape)}}),Rs=en({batchNorm2d_:function(e,t,n,r,i,s){const a=Jt(e,"x","batchNorm"),o=Jt(t,"mean","batchNorm"),u=Jt(n,"variance","batchNorm");let l,c;return null!=i&&(l=Jt(i,"scale","batchNorm")),null!=r&&(c=Jt(r,"offset","batchNorm")),Q(2===a.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${a.rank}.`),Q(2===o.rank||1===o.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${o.rank}.`),Q(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${u.rank}.`),null!=l&&Q(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=c&&Q(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${c.rank}.`),Ds(a,o,u,c,l,s)}}),Ls=en({batchNorm3d_:function(e,t,n,r,i,s){const a=Jt(e,"x","batchNorm"),o=Jt(t,"mean","batchNorm"),u=Jt(n,"variance","batchNorm");let l,c;return null!=i&&(l=Jt(i,"scale","batchNorm")),null!=r&&(c=Jt(r,"offset","batchNorm")),Q(3===a.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${a.rank}.`),Q(3===o.rank||1===o.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${o.rank}.`),Q(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${u.rank}.`),null!=l&&Q(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=c&&Q(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${c.rank}.`),Ds(a,o,u,c,l,s)}}),Os=en({batchNorm4d_:function(e,t,n,r,i,s){const a=Jt(e,"x","batchNorm"),o=Jt(t,"mean","batchNorm"),u=Jt(n,"variance","batchNorm");let l,c;return null!=i&&(l=Jt(i,"scale","batchNorm")),null!=r&&(c=Jt(r,"offset","batchNorm")),Q(4===a.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${a.rank}.`),Q(4===o.rank||1===o.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${o.rank}.`),Q(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${u.rank}.`),null!=l&&Q(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=c&&Q(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${c.rank}.`),Ds(a,o,u,c,l,s)}}),Fs=en({bincount_:function(e,t,n){const r=Jt(e,"x","bincount"),i=Jt(t,"weights","bincount");return Q("int32"===r.dtype,()=>"Error in bincount: input "+`dtype must be int32, but got ${r.dtype}`),Q(n>=0,()=>`size must be non-negative, but got ${n}.`),Q(i.size===r.size||0===i.size,()=>"Error in bincount: weights must have the same size as input or"+`0-length, but got input shape: ${r.shape}, weights shape: `+`${i.shape}.`),Gt.runKernel("Bincount",{x:r,weights:i},{size:n})}}),Ps=en({broadcastTo_:function(e,t){let n=Jt(e,"broadcastTo","x");const r=n.shape;if(t.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Ss(n,e)}const i=n.shape,s=Array.from(t);for(let a=t.length-1;a>=0;a--)if(i[a]===t[a])s[a]=1;else if(1!==n.shape[a])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);return 0===s.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length?qn(n):Gt.runKernel("Tile",{x:n},{reps:s})}}),zs=en({ceil_:function(e){const t=Jt(e,"x","ceil");return Gt.runKernel("Ceil",{x:t})}}),$s=en({clipByValue_:function(e,t,n){const r=Jt(e,"x","clipByValue");return Q(t<=n,()=>`Error in clip: min (${t}) must be `+`less than or equal to max (${n}).`),Gt.runKernel("ClipByValue",{x:r},{clipValueMin:t,clipValueMax:n})}}),Bs=en({concat1d_:function(e){return ks(e,0)}}),Us=en({concat2d_:function(e,t){return ks(e,t)}}),Vs=en({concat3d_:function(e,t){return ks(e,t)}}),Ws=en({concat4d_:function(e,t){return ks(e,t)}}),Hs=en({conv2d_:function(e,t,n,r,i="NHWC",s=[1,1],a){const o=Jt(e,"x","conv2d"),u=Jt(t,"filter","conv2d");let l=o,c=!1;3===o.rank&&(c=!0,l=Ss(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Q(4===l.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),Q(4===u.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${u.rank}.`),null!=a&&Q(ae(r),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`);const h="NHWC"===i?l.shape[3]:l.shape[1];Q(h===u.shape[2],()=>`Error in conv2d: depth of input (${h}) must match `+`input depth for filter ${u.shape[2]}.`),Q(xs(n,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`);const d=Gt.runKernel("Conv2D",{x:l,filter:u},{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a});return c?Ss(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Gs=en({conv1d_:function(e,t,n,r,i="NWC",s=1,a){const o=Jt(e,"x","conv1d"),u=Jt(t,"filter","conv1d");let l=o,c=!1;2===o.rank&&(c=!0,l=Ss(o,[1,o.shape[0],o.shape[1]])),Q(3===l.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),Q(3===u.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${u.rank}.`),null!=a&&Q(ae(r),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),Q(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match `+`input depth for filter ${u.shape[1]}.`),Q(xs(n,s),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${n} and dilation '${s}'`),Q("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=Ss(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=Ss(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=Hs(d,h,[1,n],r,"NHWC",[1,s],a);return Ss(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),js=en({conv2DBackpropInput_:function(e,t,n,r,i,s="NHWC",a){Q(e.length===t.rank,()=>"Length of inShape "+`(${e.length}) and rank of dy (${t.rank}) must match`);let o=e,u=t,l=!1;3===t.rank&&(l=!0,u=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),Q(4===o.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${o.length}.`),Q(4===u.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${u.rank}`),Q(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${n.rank}`);const c="NHWC"===s?o[3]:o[1],h="NHWC"===s?u.shape[3]:u.shape[1];Q(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must `+`match input depth for filter ${n.shape[2]}.`),Q(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must `+`match output depth for filter ${n.shape[3]}.`),null!=a&&Q(ae(i),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${i}.`);const d=Gt.runKernel("Conv2DBackpropInput",{dy:u,filter:n},{strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o});return l?Ss(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),qs=en({conv2dTranspose_:function(e,t,n,r,i,s){const a=Jt(e,"x","conv2dTranspose"),o=Jt(t,"filter","conv2dTranspose");return js(n,a,o,r,i,"NHWC",s)}}),Ks=en({conv3d_:function(e,t,n,r,i="NDHWC",s=[1,1,1]){const a=Jt(e,"x","conv3d"),o=Jt(t,"filter","conv3d");let u=a,l=!1;4===a.rank&&(l=!0,u=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Q(5===u.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),Q(5===o.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${o.rank}.`),Q(u.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match `+`input depth for filter ${o.shape[3]}.`),Q(xs(n,s),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),Q("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const c=Gt.runKernel("Conv3D",{x:u,filter:o},{strides:n,pad:r,dataFormat:i,dilations:s});return l?Ss(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Xs=en({conv3DBackpropInput_:function(e,t,n,r,i){Q(e.length===t.rank,()=>"Length of inShape "+`(${e.length}) and rank of dy (${t.rank}) must match`);let s=e,a=t,o=!1;4===t.rank&&(o=!0,a=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const u=s[4],l=a.shape[4];Q(5===s.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${s.length}.`),Q(5===a.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${a.rank}`),Q(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${n.rank}`),Q(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must `+`match input depth for filter ${n.shape[3]}.`),Q(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must `+`match output depth for filter ${n.shape[4]}.`);const c=Gt.runKernel("Conv3DBackpropInputV2",{dy:a,filter:n},{pad:i,strides:r,inputShape:s});return o?Ss(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Zs=en({conv3dTranspose_:function(e,t,n,r,i){const s=Jt(e,"x","conv3dTranspose"),a=Jt(t,"filter","conv3dTranspose");return Xs(n,s,a,r,i)}}),Ys=en({cos_:function(e){const t=Jt(e,"x","cos");return Gt.runKernel(He,{x:t})}}),Js=en({cosh_:function(e){const t=Jt(e,"x","cosh");return Gt.runKernel("Cosh",{x:t})}}),Qs=en({cumsum_:function(e,t=0,n=!1,r=!1){const i=Jt(e,"x","cumsum");return Gt.runKernel("Cumsum",{x:i},{axis:t,exclusive:n,reverse:r})}}),ea=en({denseBincount_:function(e,t,n,r=!1){const i=Jt(e,"x","denseBincount"),s=Jt(t,"weights","denseBincount");return Q("int32"===i.dtype,()=>"Error in denseBincount: input "+`dtype must be int32, but got ${i.dtype}`),Q(i.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+`rank ${i.rank}.`),Q(n>=0,()=>`size must be non-negative, but got ${n}.`),Q(s.size===i.size||0===s.size,()=>"Error in denseBincount: weights must have the same shape as x or "+`0-length, but got x shape: ${i.shape}, weights shape: `+`${s.shape}.`),Gt.runKernel("DenseBincount",{x:i,weights:s},{size:n,binaryOutput:r})}}),ta=en({depthToSpace_:function(e,t,n="NHWC"){const r=Jt(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return Q(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t}  for depthToSpace with input shape\n    ${r.shape}`),Q(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`),Q(a%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`),Gt.runKernel("DepthToSpace",{x:r},{blockSize:t,dataFormat:n})}}),na=en({depthwiseConv2d_:function(e,t,n,r,i="NHWC",s=[1,1],a){const o=Jt(e,"x","depthwiseConv2d"),u=Jt(t,"filter","depthwiseConv2d");let l=o,c=!1;3===o.rank&&(c=!0,l=Ss(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Q(4===l.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${l.rank}.`),Q(4===u.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${u.rank}.`),Q(l.shape[3]===u.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${l.shape[3]}) must match the inChannels dimension in `+`filter ${u.shape[2]}.`),null!=a&&Q(ae(r),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`);const h=Gt.runKernel("DepthwiseConv2dNative",{x:l,filter:u},{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a});return c?Ss(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),ra=en({diag_:function(e){const t=Jt(e,"x","diag");return Gt.runKernel("Diag",{x:t})}}),ia=en({dilation2d_:function(e,t,n,r,i=[1,1],s="NHWC"){const a=Jt(e,"x","dilation2d"),o=Jt(t,"filter","dilation2d");Q(3===a.rank||4===a.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${a.rank}.`),Q(3===o.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${o.rank}.`),Q("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${s}`);let u=a,l=!1;3===a.rank&&(u=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=!0);const c=Gt.runKernel("Dilation2D",{x:u,filter:o},{strides:n,pad:r,dilations:i});return l?Ss(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),sa=en({equal_:function(e,t){let n=Jt(e,"a","equal"),r=Jt(t,"b","equal");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("Equal",{a:n,b:r})}}),aa=en({where_:function(e,t,n){const r=Jt(t,"a","where"),i=Jt(n,"b","where"),s=Jt(e,"condition","where","bool"),a=ji(r.shape,i.shape),o=Ps(r,a),u=Ps(i,a);return 1===s.rank&&Q(s.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==s.rank&&ee(s.shape,u.shape,"Error in where: "),Gt.runKernel("Select",{condition:s,t:o,e:u})}}),oa=en({divNoNan_:function(e,t){let n=Jt(e,"a","div"),r=Jt(t,"b","div");[n,r]=Pt(n,r);const i=Si(n,r),s=Ti(i),a=sa(r,s);return aa(a,s,i)}}),ua=en({dot_:function(e,t){const n=Jt(e,"t1","dot"),r=Jt(t,"t2","dot");Q(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${n.rank} and ${r.rank}.`);const i=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(Q(i===s,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${s}.`),1===n.rank&&1===r.rank){const e=Ss(n,[1,-1]),t=Ss(r,[-1,1]),i=dr(e,t);return Ss(i,[])}if(1===n.rank&&2===r.rank){const e=Ss(n,[1,-1]),t=Ss(r,[r.shape[0],r.shape[1]]),i=dr(e,t);return Ss(i,[i.size])}if(2===n.rank&&1===r.rank){const e=Ss(r,[-1,1]),t=dr(n,e);return Ss(t,[t.size])}{const e=Ss(r,[r.shape[0],r.shape[1]]);return dr(n,e)}}}),la=en({elu_:function(e){const t=Jt(e,"x","elu");return Gt.runKernel("Elu",{x:t})}}),ca=en({erf_:function(e){let t=Jt(e,"x","erf");return Q("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=jn(t,"float32")),Gt.runKernel(Ge,{x:t})}}),ha=en({exp_:function(e){const t=Jt(e,"x","exp");return Gt.runKernel(je,{x:t})}}),da=en({expandDims_:function(e,t=0){const n=Jt(e,"x","expandDims","string_or_numeric");return Q(t<=n.rank,()=>"Axis must be <= rank of the tensor"),Gt.runKernel("ExpandDims",{input:n},{dim:t})}}),pa=en({expm1_:function(e){const t=Jt(e,"x","expm1");return Gt.runKernel("Expm1",{x:t})}}),fa=en({tile_:function(e,t){const n=Jt(e,"x","tile","string_or_numeric");return Q(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of reps ${t}.`),Gt.runKernel("Tile",{x:n},{reps:t})}}),ma=en({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const i=Gn([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)i.set(1,o,o);const a=Ss(i.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return fa(da(a,0),[n[0],1,1]);if(2===n.length)return fa(da(da(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return fa(da(da(da(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${n.length}D.`)}}),ga=en({floor_:function(e){const t=Jt(e,"x","floor");return Gt.runKernel("Floor",{x:t})}}),ya=en({gather_:function(e,t,n=0,r=0){const i=Jt(e,"x","gather"),s=Jt(t,"indices","gather","int32");return Gt.runKernel("GatherV2",{x:i,indices:s},{axis:n,batchDims:r})}}),va=en({greater_:function(e,t){let n=Jt(e,"a","greater"),r=Jt(t,"b","greater");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("Greater",{a:n,b:r})}}),ba=en({greaterEqual_:function(e,t){let n=Jt(e,"a","greaterEqual"),r=Jt(t,"b","greaterEqual");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("GreaterEqual",{a:n,b:r})}}),_a=en({imag_:function(e){const t=Jt(e,"input","imag");return Gt.runKernel("Imag",{input:t})}}),xa=en({isFinite_:function(e){const t=Jt(e,"x","isFinite");return Gt.runKernel("IsFinite",{x:t})}}),wa=en({isInf_:function(e){const t=Jt(e,"x","isInf");return Gt.runKernel("IsInf",{x:t})}}),Sa=en({isNaN_:function(e){const t=Jt(e,"x","isNaN");return Gt.runKernel("IsNan",{x:t})}}),Ea=en({leakyRelu_:function(e,t=.2){const n=Jt(e,"x","leakyRelu");return Gt.runKernel("LeakyRelu",{x:n},{alpha:t})}}),Ca=en({less_:function(e,t){let n=Jt(e,"a","less"),r=Jt(t,"b","less");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("Less",{a:n,b:r})}}),ka=en({lessEqual_:function(e,t){let n=Jt(e,"a","lessEqual"),r=Jt(t,"b","lessEqual");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("LessEqual",{a:n,b:r})}});function Ta(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Gt.runKernel("LinSpace",{},{start:e,stop:t,num:n})}const Aa=en({localResponseNormalization_:function(e,t=5,n=1,r=1,i=.5){const s=Jt(e,"x","localResponseNormalization");Q(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),Q(ae(t),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${t}.`);let a=s,o=!1;3===s.rank&&(o=!0,a=Ss(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u=Gt.runKernel("LRN",{x:a},{depthRadius:t,bias:n,alpha:r,beta:i});return o?Ss(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Ma=en({log_:function(e){const t=Jt(e,"x","log");return Gt.runKernel(qe,{x:t})}}),Na=en({log1p_:function(e){const t=Jt(e,"x","log1p");return Gt.runKernel("Log1p",{x:t})}}),Ia=en({neg_:function(e){const t=Jt(e,"x","neg");return Gt.runKernel("Neg",{x:t})}}),Da=en({softplus_:function(e){const t=Jt(e,"x","softplus");return Gt.runKernel("Softplus",{x:t})}}),Ra=en({logSigmoid_:function(e){const t=Jt(e,"x","logSigmoid");return Ri(e=>({value:Ia(Da(Ia(e))),gradFunc:t=>Ei(t,Ts(Ia(e)))}))(t)}}),La=en({max_:function(e,t=null,n=!1){const r=Jt(e,"x","max");return Gt.runKernel("Max",{x:r},{reductionIndices:t,keepDims:n})}}),Oa=en({sum_:function(e,t=null,n=!1){let r=Jt(e,"x","sum");return"bool"===r.dtype&&(r=jn(r,"int32")),Gt.runKernel("Sum",{x:r},{axis:t,keepDims:n})}}),Fa=en({logSoftmax_:function(e,t=-1){const n=Jt(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${n.rank} and axis was ${t}`);return Ri((e,n)=>{const r=La(e,t,!0),i=Ui(e,r),s=Ui(jn(i,"float32"),Ma(Oa(ha(i),t,!0)));return n([s]),{value:s,gradFunc:(e,n)=>{const[r]=n,i=ha(r);return Ui(e,Ei(Oa(e,t,!0),i))}}})(n)}});function Pa(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function za(e,t,n){const r=e.length+t.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?i.push(e[s++]):i.push(t[a++]);return i}function $a(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map(t=>e[t])]}function Ba(e,t){return za(e,t.map(e=>1),t)}function Ua(e,t,n){Q(Pa(t,n),()=>`${e} supports only inner-most axes for now. `+`Got axes ${t} and rank-${n} input.`)}function Va(e,t){if(Pa(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function Wa(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Ha(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const Ga=en({logSumExp_:function(e,t=null,n=!1){const r=Jt(e,"x","logSumExp"),i=pe(t,r.shape),s=La(r,i,!0),a=Ui(r,s),o=ha(a),u=Oa(o,i),l=Ma(u),c=xi(Ss(s,l.shape),l);if(n){const e=Ba(c.shape,i);return Ss(c,e)}return c}}),ja=en({logicalAnd_:function(e,t){const n=Jt(e,"a","logicalAnd","bool"),r=Jt(t,"b","logicalAnd","bool");return ji(n.shape,r.shape),Gt.runKernel("LogicalAnd",{a:n,b:r})}}),qa=en({logicalNot_:function(e){const t=Jt(e,"x","logicalNot","bool");return Gt.runKernel("LogicalNot",{x:t})}}),Ka=en({logicalOr_:function(e,t){const n=Jt(e,"a","logicalOr","bool"),r=Jt(t,"b","logicalOr","bool");return ji(n.shape,r.shape),Gt.runKernel("LogicalOr",{a:n,b:r})}}),Xa=en({logicalXor_:function(e,t){const n=Jt(e,"a","logicalXor","bool"),r=Jt(t,"b","logicalXor","bool");return ji(n.shape,r.shape),ja(Ka(e,t),qa(ja(e,t)))}}),Za=en({maxPool_:function(e,t,n,r,i){const s=Jt(e,"x","maxPool");let a=s,o=!1;3===s.rank&&(o=!0,a=Ss(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Q(4===a.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),Q(xs(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`),null!=i&&Q(ae(r),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);const u=Gt.runKernel("MaxPool",{x:a},{filterSize:t,strides:n,pad:r,dimRoundingMode:i});return o?Ss(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Ya=en({maxPool3d_:function(e,t=[1,1,1],n,r,i,s="NDHWC"){const a=Jt(e,"x","maxPool3d");let o=a,u=!1;4===a.rank&&(u=!0,o=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Q(5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Q("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${s}`),null!=i&&Q(ae(r),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);const l=Gt.runKernel("MaxPool3D",{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s});return u?Ss(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}}),Ja=en({maxPoolWithArgmax_:function(e,t,n,r,i=!1){const s=Jt(e,"x","maxPoolWithArgmax"),a=Gt.runKernel("MaxPoolWithArgmax",{x:s},{filterSize:t,strides:n,pad:r,includeBatchInIndex:i});return{result:a[0],indexes:a[1]}}}),Qa=en({mean_:function(e,t=null,n=!1){const r=Jt(e,"x","mean");return Gt.runKernel("Mean",{x:r},{axis:t,keepDims:n})}}),eo=en({min_:function(e,t=null,n=!1){const r=Jt(e,"x","min");return Gt.runKernel("Min",{x:r},{axis:t,keepDims:n})}}),to=en({minimum_:function(e,t){let n=Jt(e,"a","minimum"),r=Jt(t,"b","minimum");return[n,r]=Pt(n,r),"bool"===n.dtype&&(n=jn(n,"int32"),r=jn(r,"int32")),ji(n.shape,r.shape),Gt.runKernel("Minimum",{a:n,b:r})}}),no=en({mirrorPad_:function(e,t,n){Q("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${n}.`);const r=Jt(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Q(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. `+`Got ${t.length}.`);const i="reflect"===n?1:0;for(let s=0;s<r.rank;s++)Q(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),Q(t[s][0]>=0&&t[s][0]<=r.shape[s]-i&&t[s][1]>=0&&t[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal `+`to ${r.shape[s]-i} or less than 0 for input of `+`shape ${r.shape}`);return Gt.runKernel("MirrorPad",{x:r},{paddings:t,mode:n})}}),ro=en({mod_:function(e,t){let n=Jt(e,"a","mod"),r=Jt(t,"b","mod");return[n,r]=Pt(n,r),Gt.runKernel(Ke,{a:n,b:r})}}),io=en({moments_:function(e,t=null,n=!1){const r=pe(t,(e=Jt(e,"x","moments")).shape),i=Qa(e,r,n);let s=i.shape;n||(s=Ba(i.shape,r));const a=ki(Ui(jn(e,"float32"),Ss(i,s)));return{mean:i,variance:Qa(a,r,n)}}}),so=en({multiRNNCell_:function(e,t,n,r){const i=Jt(t,"data","multiRNNCell"),s=Qt(n,"c","multiRNNCell"),a=Qt(r,"h","multiRNNCell");let o=i;const u=[];for(let h=0;h<e.length;h++){const t=e[h](o,s[h],a[h]);u.push(t[0]),u.push(t[1]),o=t[1]}const l=[],c=[];for(let h=0;h<u.length;h+=2)l.push(u[h]),c.push(u[h+1]);return[l,c]}}),ao=en({multinomial_:function(e,t,n,r=!1){const i=Jt(e,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const o=1===a?Ss(i,[1,-1]):i,u=Gt.runKernel("Multinomial",{logits:o},{numSamples:t,seed:n,normalized:r});return 1===a?Ss(u,[u.size]):u}}),oo=en({notEqual_:function(e,t){let n=Jt(e,"a","notEqual"),r=Jt(t,"b","notEqual");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("NotEqual",{a:n,b:r})}});function uo(e,t="float32"){if("complex64"===t){const t=uo(e,"float32"),n=uo(e,"float32");return tn(t,n)}const n=De(re(e),t);return Gt.makeTensor(n,e,t)}function lo(e,t="float32"){if("complex64"===t){const t=lo(e,"float32"),n=uo(e,"float32");return tn(t,n)}const n=Ie(re(e),t);return Gt.makeTensor(n,e,t)}const co=en({onesLike_:function(e){const t=Jt(e,"x","onesLike");return Gt.runKernel("OnesLike",{x:t})}}),ho=en({outerProduct_:function(e,t){const n=Jt(e,"v1","outerProduct"),r=Jt(t,"v2","outerProduct");Q(1===n.rank&&1===r.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${n.rank} and ${r.rank}.`);const i=Ss(n,[-1,1]),s=Ss(r,[1,-1]);return dr(i,s)}}),po=en({pad_:function(e,t,n=0){const r=Jt(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Gt.runKernel("PadV2",{x:r},{paddings:t,constantValue:n})}}),fo=en({pad1d_:function(e,t,n=0){return Q(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),po(e,[t],n)}}),mo=en({pad2d_:function(e,t,n=0){return Q(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),po(e,t,n)}}),go=en({pad3d_:function(e,t,n=0){return Q(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),po(e,t,n)}}),yo=en({pad4d_:function(e,t,n=0){return Q(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),po(e,t,n)}}),vo=en({spaceToBatchND_:function(e,t,n){const r=Jt(e,"x","spaceToBatchND");return Q(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),Q(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),Q(r.shape.reduce((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),Gt.runKernel("SpaceToBatchND",{x:r},{blockShape:t,paddings:n})}}),bo=en({pool_:function(e,t,n,r,i,s){null==i&&(i=[1,1]),null==s&&(s=1),0===r&&(r="valid");const a=Jt(e,"x","maxPool");let o=a,u=!1;3===a.rank&&(u=!0,o=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Q(xs(s,i),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${i}'`);const l=hs(o.shape,t,s,i,r),c=[l.dilationHeight,l.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),i=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],i[t]])}([l.filterHeight,l.filterWidth],c):[[0,0],[0,0]];const d=1===c[0]&&1===c[1],[p,f]=function(e,t,n){const r=n.map(e=>e[0]),i=n.map(e=>e[1]),s=e.concat(r,i),a=t.map((e,t)=>(e-s[t]%e)%e),o=i.map((e,t)=>e+a[t]);return[t.map((e,t)=>[r[t],o[t]]),t.map((e,t)=>[0,a[t]])]}([l.inHeight,l.inWidth],c,h),m=d?r:"valid",g=d?o:vo(o,c,p),y=("avg"===n?()=>Es(g,t,s,m):()=>Za(g,t,s,m))(),v=d?y:Is(y,c,f);return u?Ss(v,[v.shape[1],v.shape[2],v.shape[3]]):v}}),_o=en({prelu_:function(e,t){const n=Jt(e,"x","prelu"),r=Jt(t,"alpha","prelu");return Gt.runKernel("Prelu",{x:n,alpha:r})}}),xo=en({prod_:function(e,t=null,n=!1){let r=Jt(e,"x","prod");return"bool"===r.dtype&&(r=jn(r,"int32")),Gt.runKernel("Prod",{x:r},{axis:t,keepDims:n})}}),wo=en({rand_:function(e,t,n){const r=re(e);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);i=new Uint8Array(r)}for(let s=0;s<r;s++)i[s]=t();return Gt.makeTensor(i,e,n)}});var So=n("pDBr");class Eo{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=i||Math.random();this.random=So.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,s;do{r=2*this.random()-1,i=2*this.random()-1,s=r*r+i*i}while(s>=1||0===s);const a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Co{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const i=r||Math.random();this.randu=So.alea(i.toString()),this.randn=new Eo(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,i,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<t||Math.log(i)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class ko{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=So.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const To=en({randomGamma_:function(e,t,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new Co(t,n,r,i),a=Gn(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}}),Ao=en({randomNormal_:function(e,t=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new Eo(t,n,r,!1,i),a=Gn(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}}),Mo=en({randomUniform_:function(e,t=0,n=1,r="float32",i){const s=Gn(e,r),a=new ko(t,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}});function No(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return Gt.runKernel("Range",{},{start:e,stop:t,step:n,dtype:r})}const Io=en({real_:function(e){const t=Jt(e,"input","real");return Gt.runKernel("Real",{input:t})}}),Do=en({reciprocal_:function(e){const t=Jt(e,"x","reciprocal");return Gt.runKernel("Reciprocal",{x:t})}}),Ro=en({relu_:function(e){const t=Jt(e,"x","relu");return Gt.runKernel("Relu",{x:t})}}),Lo=en({relu6_:function(e){const t=Jt(e,"x","relu6");return Gt.runKernel("Relu6",{x:t})}}),Oo=en({reverse_:function(e,t){const n=Jt(e,"x","reverse");return Gt.runKernel("Reverse",{x:n},{dims:t})}}),Fo=en({reverse1d_:function(e){const t=Jt(e,"x","reverse");return Q(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Oo(t,0)}}),Po=en({reverse2d_:function(e,t){const n=Jt(e,"x","reverse");return Q(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Oo(n,t)}}),zo=en({reverse3d_:function(e,t){const n=Jt(e,"x","reverse");return Q(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Oo(n,t)}}),$o=en({reverse4d_:function(e,t){const n=Jt(e,"x","reverse");return Q(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Oo(n,t)}}),Bo=en({round_:function(e){const t=Jt(e,"x","round");return Gt.runKernel("Round",{x:t})}}),Uo=en({rsqrt_:function(e){const t=Jt(e,"x","rsqrt");return Gt.runKernel("Rsqrt",{x:t})}}),Vo=en({selu_:function(e){const t=Jt(e,"x","selu");return Gt.runKernel("Selu",{x:t})}}),Wo=en({separableConv2d_:function(e,t,n,r,i,s=[1,1],a="NHWC"){const o=Jt(e,"x","separableConv2d"),u=Jt(t,"depthwiseFilter","separableConv2d"),l=Jt(n,"pointwiseFilter","separableConv2d");let c=o,h=!1;if(3===o.rank&&(h=!0,c=Ss(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Q(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),Q(4===u.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${u.rank}.`),Q(4===l.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${u.rank}.`),Q(1===l.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${l.shape[0]}.`),Q(1===l.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${l.shape[1]}.`);const d=u.shape[2],p=u.shape[3];Q(l.shape[2]===d*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${d*p}, `+`but got ${l.shape[2]}.`);const f=na(c,u,r,i,a,s),m=Hs(f,l,1,"valid",a);return h?Ss(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),Ho=async function(e,t){const n=Jt(e,"x","setdiff1d"),r=Jt(t,"y","setdiff1d");Q(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Q(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),Q(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),a=new Set(s);let o=0;for(let c=0;c<i.length;c++)a.has(i[c])||o++;const u=new wt([o],n.dtype),l=new wt([o],"int32");for(let c=0,h=0;c<i.length;c++)a.has(i[c])||(u.values[h]=i[c],l.values[h]=c,h++);return[u.toTensor(),l.toTensor()]},Go=en({sign_:function(e){const t=Jt(e,"x","sign");return Gt.runKernel("Sign",{x:t})}}),jo=en({sin_:function(e){const t=Jt(e,"x","sin");return Gt.runKernel(Ze,{x:t})}}),qo=en({sinh_:function(e){const t=Jt(e,"x","sinh");return Gt.runKernel("Sinh",{x:t})}}),Ko=en({slice1d_:function(e,t,n){const r=Jt(e,"x","slice1d");return Q(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),As(r,[t],[n])}}),Xo=en({slice2d_:function(e,t,n){const r=Jt(e,"x","slice2d");return Q(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),As(r,t,n)}}),Zo=en({slice3d_:function(e,t,n){const r=Jt(e,"x","slice3d");return Q(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),As(r,t,n)}}),Yo=en({slice4d_:function(e,t,n){const r=Jt(e,"x","slice4d");return Q(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),As(r,t,n)}}),Jo=en({softmax_:function(e,t=-1){const n=Jt(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${n.rank} and dim was ${t}`);return Gt.runKernel("Softmax",{logits:n},{dim:t})}}),Qo=en({fft_:function(e){return Q("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${e.dtype}.`),Gt.runKernel("FFT",{input:e})}}),eu=en({ifft_:function(e){return Q("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${e.dtype}.`),Gt.runKernel("IFFT",{input:e})}}),tu=en({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=Ss(e,[n,t]);r=eu(i)}else{const i=[n,2*(t-1)],s=Ss(Io(e),[n,t]),a=Ss(_a(e),[n,t]),o=Oo(As(s,[0,1],[n,t-2]),1),u=Ei(Oo(As(a,[0,1],[n,t-2]),1),Oi(-1)),l=ks([s,o],1),c=ks([a,u],1),h=Ss(tn(l,c),[i[0],i[1]]);r=eu(h)}if(r=Io(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=Ss(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}}),nu=en({split_:function(e,t,n=0){const r=Jt(e,"x","split");return Gt.runKernel("SplitV",{x:r},{numOrSizeSplits:t,axis:n})}}),ru=en({rfft_:function(e,t){Q("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(null!=t&&t<n){const r=e.shape.map(e=>0),s=e.shape.map(e=>e);s[e.shape.length-1]=t,i=As(e,r,s),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,i=ks([e,uo(r)],e.shape.length-1),n=t}else i=e;const s=Ti(i),a=Ss(tn(i,s),[r,n]),o=Qo(a),u=Math.floor(n/2)+1,l=Io(o),c=_a(o),h=nu(l,[u,n-u],l.shape.length-1),d=nu(c,[u,n-u],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=u,Ss(tn(h[0],d[0]),p)}}),iu=en({squaredDifference_:function(e,t){let n=Jt(e,"a","squaredDifference"),r=Jt(t,"b","squaredDifference");return[n,r]=Pt(n,r),ji(n.shape,r.shape),Gt.runKernel("SquaredDifference",{a:n,b:r},{})}}),su=en({squeeze_:function(e,t){const n=Jt(e,"x","squeeze");return Ss(n,fe(n.shape,t).newShape)}}),au=en({stack_:function(e,t=0){const n=Qt(e,"tensors","stack","string_or_numeric");return Q(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Q(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),Gt.runKernel("Pack",n,{axis:t})}}),ou=en({step_:function(e,t=0){const n=Jt(e,"x","step");return Gt.runKernel("Step",{x:n},{alpha:t})}}),uu=en({stridedSlice_:function(e,t,n,r,i=0,s=0,a=0,o=0,u=0){const l=Jt(e,"x","stridedSlice");return Gt.runKernel("StridedSlice",{x:l},{begin:t,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:u})}}),lu=en({tan_:function(e){const t=Jt(e,"x","tan");return Gt.runKernel(Je,{x:t})}});function cu(e,t){te(e);const n=Zt(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return nn(e,null,n,t)}function hu(e,t,n){if(te(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Zt(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return nn(e,t,r,n)}function du(e,t,n){if(te(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Zt(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return nn(e,t,r,n)}function pu(e,t,n){if(te(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Zt(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return nn(e,t,r,n)}function fu(e,t,n){if(te(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Zt(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return nn(e,t=t||r,r,n)}const mu=en({topk_:function(e,t=1,n=!0){const r=Jt(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) `+`but got ${t}`);const s={x:r},a={k:t,sorted:n},[o,u]=Gt.runKernel("TopK",s,a);return{values:o,indices:u}}}),gu=en({truncatedNormal_:function(e,t=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new Eo(t,n,r,!0,i),a=Gn(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}}),yu=en({unique_:function(e,t=0){const n=Jt(e,"x","unique","string_or_numeric");Q(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:t},[s,a]=Gt.runKernel("Unique",r,i);return{values:s,indices:a}}}),vu=en({unsortedSegmentSum_:function(e,t,n){const r=Jt(e,"x","unsortedSegmentSum"),i=Jt(t,"segmentIds","unsortedSegmentSum","int32");return Q(ae(n),()=>"numSegments must be of dtype int"),Gt.runKernel("UnsortedSegmentSum",{x:r,segmentIds:i},{numSegments:n})}}),bu=en({unstack_:function(e,t=0){const n=Jt(e,"x","unstack","string_or_numeric");return Q(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),Gt.runKernel("Unpack",{value:n},{axis:t})}});function _u(e,t=!0,n,r){return Gt.makeVariable(e,t,n,r)}function xu(e,t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);const r=Gn(e,"int32"),i=Gn([n.length,e.length],"int32");for(let s=0;s<n.length;s++){const t=r.indexToLoc(n[s]);i.values.set(t,s*e.length)}return i.toTensor()}const wu=async function(e){const t=Jt(e,"condition","whereAsync","bool"),n=await t.data(),r=xu(t.shape,n);return e!==t&&t.dispose(),r},Su=async function(e,t,n){const r=Jt(e,"tensor","boolMask"),i=Jt(t,"mask","boolMask","bool"),s=null==n?0:n,a=i.rank,o=r.shape;Q(a>0,()=>"mask cannot be scalar"),ee(o.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let m=s;m<s+a;m++)u*=o[m];const l=o.slice(0,s).concat([u],o.slice(s+a)),c=Ss(r,l),h=Ss(i,[-1]),d=await wu(h),p=su(d,[1]),f=ya(c,p,s);return e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),c.dispose(),h.dispose(),d.dispose(),f},Eu=en({norm_:function(e,t="euclidean",n=null,r=!1){const i=function e(t,n,r=null){if(0===t.rank)return Wi(t);if(1!==t.rank&&null===r)return e(Ss(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return Oa(Wi(t),r);if(n===1/0)return La(Wi(t),r);if(n===-1/0)return eo(Wi(t),r);if("euclidean"===n||2===n)return Ci(Oa(Bi(Wi(t),Oi(2,"int32")),r));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return La(Oa(Wi(t),r[0]),r[1]-1);if(n===1/0)return La(Oa(Wi(t),r[1]),r[0]);if(n===-1/0)return eo(Oa(Wi(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return Ci(Oa(ki(t),r));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}(e=Jt(e,"x","norm"),t,n);let s=i.shape;if(r){const t=pe(n,e.shape);s=Ba(i.shape,t)}return Ss(i,s)}}),Cu=en({movingAverage_:function(e,t,n,r,i=!0){const s=Jt(e,"v","movingAverage"),a=Jt(t,"x","movingAverage"),o=Jt(n,"decay","movingAverage");zt(s,a),Q(se(s.shape,a.shape),()=>"Shape mismatch in v and x");const u=Oi(1),l=Ui(u,o);let c=Ei(Ui(a,s),l);if(i){Q(null!=r,()=>"When using zeroDebias: true, step is required.");const e=Jt(r,"step","movingAverage");c=Si(c,Ui(u,Bi(o,e)))}return xi(s,c)}}),ku=en({scatterND_:function(e,t,n){const r=Jt(e,"indices","scatterND","int32"),i=Jt(t,"updates","scatterND");return wr(i,r,n),Gt.runKernel("ScatterNd",{indices:r,updates:i},{shape:n})}}),Tu=en({sparseToDense_:function(e,t,n,r=0){const i=Jt(e,"sparseIndices","sparseToDense","int32"),s=Jt(t,"sparseValues","sparseToDense"),a=Jt(r,"defaultValue","sparseToDense",s.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);const i=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error("outputShape has incorrect number of elements:,"+` ${n.length}, should be: ${s}.`);if(0!==t.rank&&(1!==t.rank||t.size!==i))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,a),Gt.runKernel("SparseToDense",{sparseIndices:i,sparseValues:s,defaultValue:a},{outputShape:n})}}),Au=en({gatherND_:function(e,t){const n=Jt(t,"indices","gatherND","int32"),r=Jt(e,"x","gatherND");return Gt.runKernel("GatherNd",{params:r,indices:n})}}),Mu=en({dropout_:function(e,t,n,r){const i=Jt(e,"x","dropout");if(Q("float32"===i.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${i.dtype} tensor instead.`),Q(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof kt?i.clone():i;const s=function(e,t){if(null==t)return e.shape.slice();if(se(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(i,n),a=1-t,o=Si(ga(xi(Mo(s,0,1,"float32",r),a)),a);return Ei(i,o)}});function Nu(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Iu(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let s=0;s<e;++s){const a=2*Math.PI*s/(e+r-1);i[s]=t-n*Math.cos(a)}return cu(i,"float32")}const Du=async function(e,t,n=1){const r=Jt(e,"predictions","inTopK"),i=Jt(t,"targets","inTopK");Q(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${r.rank}`),Q(r.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${r.rank} and targets rank ${i.rank}`),ee(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];Q(n>0&&n<=s,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${s}), but got ${n}`);const a=await r.data(),o=await i.data(),[u,l]=[a.length/s,s],c=me("bool",u);for(let h=0;h<u;h++){const e=h*l,t=a.subarray(e,e+l),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),c[h]=0;for(let i=0;i<n;i++)if(r[i].index===o[h]){c[h]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),rn(c,i.shape,"bool")},Ru=en({conv2DBackpropFilter_:function(e,t,n,r,i,s="NHWC",a){let o=e;3===e.rank&&(o=Ss(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Q(4===o.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${o.shape}.`),Q(4===u.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${u.shape}.`),Q(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${n}.`);const l="NHWC"===s?o.shape[3]:o.shape[1],c="NHWC"===s?u.shape[3]:u.shape[1];return Q(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must `+`match input depth in filter (${n[2]}.`),Q(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must `+`match output depth for filter (${n[3]}).`),null!=a&&Q(ae(i),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${i}.`),Gt.runKernel("Conv2DBackpropFilter",{x:o,dy:u},{strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n})}});function Lu(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Ei(e,ou(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Ou(e,t){let n=t;const r=Gi(e.shape,t.shape);return r.length>0&&(n=Oa(n,r)),Ss(n,e.shape)}function Fu(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Ro(e);if("elu"===t)return la(e);if("relu6"===t)return Lo(e);if("prelu"===t)return _o(e,n);if("leakyrelu"===t)return Ea(e,r);throw new Error(`Unknown fused activation ${t}.`)}const Pu=(e,t)=>!(e>0)||"linear"===t,zu=en({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(!1===Pu(Gt.state.gradientDepth,u=u||"linear")){let h=Hs(e,t,n,r,i,s,a);return null!=o&&(h=xi(h,o)),Fu(h,u,l,c)}const h=Jt(e,"x","conv2d"),d=Jt(t,"filter","conv2d");let p=h,f=!1;3===h.rank&&(f=!0,p=Ss(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Q(4===p.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${p.rank}.`),Q(4===d.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${d.rank}.`),null!=a&&Q(ae(r),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${r}.`),Q(p.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${p.shape[3]}) must match `+`input depth for filter ${d.shape[2]}.`),Q(xs(n,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),Q("NHWC"===i,()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const m=ps(p.shape,d.shape,n,s,r,a);let g,y;null!=o&&(g=Jt(o,"bias","fused conv2d"),[g]=Pt(g,h),ji(m.outShape,g.shape)),null!=l&&(y=Jt(l,"prelu weights","fused conv2d"));const v=(e,t)=>{const[i,a,o,l]=t,c=Lu(e,o,u);Q(_s(s),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`);const h=[js(a.shape,c,i,n,r),Ru(a,c,i.shape,n,r)];if(null!=l){const e=Ou(l,c);h.push(e)}return h},b={x:p,filter:d,bias:g,preluActivationWeights:y},_={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:c};return null==o?Ri((e,t,n)=>{let r=Gt.runKernel("FusedConv2D",b,_);return n([t,e,r]),f&&(r=Ss(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}})(p,d):Ri((e,t,n,r)=>{let i=Gt.runKernel("FusedConv2D",b,_);return r([t,e,i,n]),f&&(i=Ss(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:v}})(p,d,g)}}),$u=en({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,i,s=[1,1],a){let o=e;3===e.rank&&(o=Ss(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;return 3===u.rank&&(u=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Gt.runKernel("DepthwiseConv2dNativeBackpropFilter",{x:o,dy:u},{strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n})}}),Bu=en({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,i,s=[1,1],a){let o=t,u=!1;3===t.rank&&(u=!0,o=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l=Gt.runKernel("DepthwiseConv2dNativeBackpropInput",{dy:o,filter:n},{strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:e});return u?Ss(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Uu=en({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(!1===Pu(Gt.state.gradientDepth,u)){let h=na(e,t,n,r,i,s,a);return null!=o&&(h=xi(h,o)),Fu(h,u,l,c)}const h=Jt(e,"x","depthwiseConv2d"),d=Jt(t,"filter","depthwiseConv2d");let p=h,f=!1;3===h.rank&&(f=!0,p=Ss(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Q(4===p.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${p.rank}.`),Q(4===d.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${d.rank}.`),Q(p.shape[3]===d.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${p.shape[3]}) must match the inChannels dimension in `+`filter ${d.shape[2]}.`),null==s&&(s=[1,1]),Q(xs(n,s),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${n} and dilations '${s}'`),null!=a&&Q(ae(r),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${a} but got pad ${r}.`);const m=ps(p.shape,d.shape,n,s,r,a,!0);let g,y;null!=o&&(g=Jt(o,"bias","fused conv2d"),[g]=Pt(g,h),ji(m.outShape,g.shape)),null!=l&&(y=Jt(l,"prelu weights","fused depthwiseConv2d"));const v=(e,t)=>{Q(_s(s),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${s}'`);const[i,o,l,c]=t,h=Lu(e,l,u),d=Bu(o.shape,h,i,n,r,s,a),p=$u(o,h,i.shape,n,r,s,a);return null!=c?[d,p,Ou(g,h)]:[d,p]},b={x:p,filter:d,bias:g,preluActivationWeights:y},_={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:c};return null==o?Ri((e,t,n)=>{let r=Gt.runKernel("FusedDepthwiseConv2D",b,_);return n([t,e,r]),f&&(r=Ss(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}})(p,d):Ri((e,t,n,r)=>{let i=Gt.runKernel("FusedDepthwiseConv2D",b,_);return r([t,e,i,n]),f&&(i=Ss(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:v}})(p,d,g)}}),Vu=en({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o}){if(!1===Pu(Gt.state.gradientDepth,s)){let u=dr(e,t,n,r);return null!=i&&(u=xi(u,i)),Fu(u,s,a,o)}let u=Jt(e,"a","fused matMul"),l=Jt(t,"b","fused matMul");[u,l]=Pt(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],h=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?l.shape[l.rank-2]:l.shape[l.rank-1],f=u.shape.slice(0,-2),m=l.shape.slice(0,-2),g=re(f),y=re(m);Q(u.rank>=2&&l.rank>=2&&u.rank===l.rank,()=>"Error in fused matMul: inputs must have the same rank of at "+`least 2, got ranks ${u.rank} and ${l.rank}.`),Q(se(f,m),()=>`Error in fused matMul: outer dimensions (${f}) and (`+`${m}) of Tensors with shapes ${u.shape} and `+`${l.shape} must match.`),Q(c===h,()=>`Error in fused matMul: inner shapes (${c}) and (`+`${h}) of Tensors with shapes ${u.shape} and `+`${l.shape} and transposeA=${n}`+` and transposeB=${r} must match.`);const v=u.shape.slice(0,-2).concat([d,p]),b=Ss(u,n?[g,c,d]:[g,d,c]),_=Ss(l,r?[y,p,h]:[y,h,p]);let x,w;null!=i&&(x=Jt(i,"bias","fused matMul"),[x]=Pt(x,u),ji(v,x.shape)),null!=a&&(w=Jt(a,"prelu weights","fused matMul"));const S=(e,t)=>{const[a,o,u,l]=t,c=Lu(Ss(e,u.shape),u,s);let h,d;return n||r?!n&&r?(h=dr(c,o,!1,!1),d=dr(c,a,!0,!1)):n&&!r?(h=dr(o,c,!1,!0),d=dr(a,c,!1,!1)):(h=dr(o,c,!0,!0),d=dr(c,a,!0,!0)):(h=dr(c,o,!1,!0),d=dr(a,c,!0,!1)),null!=i?[h,d,Ou(l,c)]:[h,d]},E={a:b,b:_,bias:x,preluActivationWeights:w},C={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return null==i?Ri((e,t,n)=>{const r=Gt.runKernel("_FusedMatMul",E,C);return n([e,t,r]),{value:Ss(r,v),gradFunc:S}})(b,_):Ri((e,t,n,r)=>{const i=Gt.runKernel("_FusedMatMul",E,C);return r([e,t,i,n]),{value:Ss(i,v),gradFunc:S}})(b,_,x)}}),Wu=en({hammingWindow_:function(e){return Iu(e,.54,.46)}}),Hu=en({hannWindow_:function(e){return Iu(e,.5,.5)}}),Gu=en({frame_:function(e,t,n,r=!1,i=0){let s=0;const a=[];for(;s+t<=e.size;)a.push(As(e,s,t)),s+=n;if(r)for(;s<e.size;){const r=s+t-e.size,o=ks([As(e,s,t-r),zi([r],i)]);a.push(o),s+=n}return 0===a.length?hu([],[0,t]):Ss(ks(a),[a.length,t])}}),ju=en({stft_:function(e,t,n,r,i=Hu){null==r&&(r=Nu(t));const s=Gu(e,t,n),a=Ei(s,i(t)),o=[];for(let u=0;u<s.shape[0];u++)o.push(ru(As(a,[u,0],[1,t]),r));return ks(o)}}),qu=en({cropAndResize_:function(e,t,n,r,i="bilinear",s=0){const a=Jt(e,"image","cropAndResize"),o=Jt(t,"boxes","cropAndResize","float32"),u=Jt(n,"boxInd","cropAndResize","int32"),l=o.shape[0];return Q(4===a.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${a.rank}.`),Q(2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${l},4] `+`but had shape ${o.shape}.`),Q(1===u.rank&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] `+`but had shape ${o.shape}.`),Q(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${r.length}.`),Q(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Q("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),Gt.runKernel("CropAndResize",{image:a,boxes:o,boxInd:u},{method:i,extrapolationValue:s,cropSize:r})}}),Ku=en({flipLeftRight_:function(e){const t=Jt(e,"image","flipLeftRight","float32");return Q(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${t.rank}.`),Gt.runKernel("FlipLeftRight",{image:t},{})}}),Xu=en({rotateWithOffset_:function(e,t,n=0,r=.5){const i=Jt(e,"image","rotateWithOffset","float32");return Q(4===i.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${i.rank}.`),Gt.runKernel("RotateWithOffset",{image:i},{radians:t,fillValue:n,center:r})}});function Zu(e,t,n,r,i,s){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==s&&(s=0);const a=e.shape[0];return n=Math.min(n,a),Q(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Q(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),Q(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),Q(1===t.rank,()=>"scores must be a 1D tensor"),Q(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, `+`but was ${t.shape[0]}`),Q(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}const Yu=en({nonMaxSuppression_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Jt(e,"boxes","nonMaxSuppression"),a=Jt(t,"scores","nonMaxSuppression"),o=Zu(s,a,n,r,i);return Gt.runKernel("NonMaxSuppressionV3",{boxes:s,scores:a},{maxOutputSize:n=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:i=o.scoreThreshold})}});function Ju(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(t,e[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}(e,t,n||Qu)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function Qu(e,t){return e>t?1:e<t?-1:0}function el(e,t,n,r,i){return rl(e,t,n,r,i,0)}function tl(e,t,n,r,i,s){return rl(e,t,n,r,i,0,!1,s,!0)}function nl(e,t,n,r,i,s){return rl(e,t,n,r,i,s,!0)}function rl(e,t,n,r,i,s,a=!1,o=!1,u=!1){const l=[];for(let g=0;g<t.length;g++)t[g]>i&&l.push({score:t[g],boxIndex:g,suppressBeginIndex:0});l.sort(al);const c=s>0?-.5/s:0,h=[],d=[];for(;h.length<n&&l.length>0;){const t=l.pop(),{score:n,boxIndex:s,suppressBeginIndex:a}=t;if(n<i)break;let o=!1;for(let u=h.length-1;u>=a;--u){const n=il(e,s,h[u]);if(n>=r){o=!0;break}if(t.score=t.score*sl(r,c,n),t.score<=i)break}t.suppressBeginIndex=h.length,o||(t.score===n?(h.push(s),d.push(t.score)):t.score>i&&Ju(l,t,al))}const p=h.length,f=n-p;o&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return a&&(m.selectedScores=d),u&&(m.validOutputs=p),m}function il(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(o-s)*(u-a),f=(h-l)*(d-c);if(p<=0||f<=0)return 0;const m=Math.max(s,l),g=Math.max(a,c),y=Math.min(o,h),v=Math.min(u,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function sl(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function al(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const ol=en({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=Jt(e,"boxes","nonMaxSuppression"),o=Jt(t,"scores","nonMaxSuppression"),u=Zu(a,o,n,r,i,s),l=Gt.runKernel("NonMaxSuppressionV5",{boxes:a,scores:o},{maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:s=u.softNmsSigma});return{selectedIndices:l[0],selectedScores:l[1]}}}),ul=en({nonMaxSuppressionPadded_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=Jt(e,"boxes","nonMaxSuppression"),o=Jt(t,"scores","nonMaxSuppression"),u=Zu(a,o,n,r,i,null),l=Gt.runKernel("NonMaxSuppressionV4",{boxes:a,scores:o},{maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:l[0],validOutputs:l[1]}}}),ll=en({resizeBilinear_:function(e,t,n=!1,r=!1){const i=Jt(e,"images","resizeBilinear");Q(3===i.rank||4===i.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${i.rank}.`),Q(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${t}.`),Q(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;3===i.rank&&(a=!0,s=Ss(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,o=Gt.runKernel("ResizeBilinear",{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return a?Ss(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),cl=en({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const i=Jt(e,"images","resizeNearestNeighbor");Q(3===i.rank||4===i.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${i.rank}.`),Q(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${t}.`),Q("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),Q(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;3===i.rank&&(a=!0,s=Ss(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,o=Gt.runKernel("ResizeNearestNeighbor",{images:s},{alignCorners:n,halfPixelCenters:r,size:t});return a?Ss(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),hl=en({bandPart_:function(e,t,n){Q(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),Q(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=Jt(e,"a","bandPart");Q(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t})`+` must not be greater than the number of rows (${s}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n})`+` must not be greater than the number of columns (${a}).`);t<0&&(t=s),n<0&&(n=a);const o=Ss(No(0,s,1,"int32"),[-1,1]),u=No(0,a,1,"int32"),l=Ui(o,u),c=ja(ka(l,Oi(+t,"int32")),ba(l,Oi(-n,"int32"))),h=uo([s,a],r.dtype);return Ss(au(bu(Ss(r,[-1,s,a])).map(e=>aa(c,e,h))),i)}}),dl=en({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Q(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)Q(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${e[t].shape[0]} vs. ${n})`)}else t=!0,e=nu(e,e.shape[0],0).map(e=>su(e,[0]));Q(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds `+`number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let i=0;i<e.length;++i)n.push(Gt.tidy(()=>{let e=r[i];if(i>0)for(let t=0;t<i;++t){const r=Ei(Oa(Ei(n[t],e)),n[t]);e=Ui(e,r)}return Si(e,Eu(e,"euclidean"))}));return t?au(n,0):n}});function pl(e,t=!1){return Gt.tidy(()=>{Q(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let i=ma(n),s=qn(e);const a=hu([[1]],[1,1]);let o=qn(a);const u=n>=r?r:n;for(let e=0;e<u;++e){const t=s,u=o,l=i;[o,s,i]=Gt.tidy(()=>{const t=As(s,[e,e],[n-e,1]),u=Eu(t),l=As(s,[e,e],[1,1]),c=aa(va(l,0),hu([[-1]]),hu([[1]])),h=Ui(l,Ei(c,u)),d=Si(t,h);o=1===d.shape[0]?qn(a):ks([a,As(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=Ia(Si(dr(c,h),u)),f=As(s,[e,0],[n-e,r]),m=Ei(p,o),g=fr(o);if(0===e)s=Ui(f,dr(m,dr(g,f)));else{const t=Ui(f,dr(m,dr(g,f)));s=ks([As(s,[0,0],[e,r]),t],0)}const y=fr(m),v=As(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=Ui(v,dr(dr(v,o),y));else{const t=Ui(v,dr(dr(v,o),y));i=ks([As(i,[0,0],[n,e]),t],1)}return[o,s,i]}),li([t,u,l])}return!t&&n>r&&(i=As(i,[0,0],[n,r]),s=As(s,[0,0],[r,r])),[i,s]})}const fl=en({qr_:function(e,t=!1){if(Q(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return pl(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=bu(Ss(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],s=[];return r.forEach(e=>{const[n,r]=pl(e,t);i.push(n),s.push(r)}),[Ss(au(i,0),e.shape),Ss(au(s,0),e.shape)]}}});var ml;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(ml||(ml={}));const gl=en({computeWeightedLoss_:function(e,t,n=ml.SUM_BY_NONZERO_WEIGHTS){const r=Jt(e,"losses","computeWeightedLoss");let i=null;null!=t&&(i=Jt(t,"weights","computeWeightedLoss"));const s=null==i?r:Ei(r,i);if(n===ml.NONE)return s;if(n===ml.SUM)return Oa(s);if(n===ml.MEAN){if(null==i)return Qa(s);{const e=r.size/i.size,t=Si(Oa(s),Oa(i));return e>1?Si(t,Oi(e)):t}}if(n===ml.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Si(Oa(s),Oi(r.size));{const e=Ei(i,lo(r.shape)),t=jn(Oa(oo(e,Oi(0))),"float32");return Si(Oa(s),t)}}throw Error(`Unknown reduction: ${n}`)}}),yl=en({absoluteDifference_:function(e,t,n,r=ml.SUM_BY_NONZERO_WEIGHTS){const i=Jt(e,"labels","absoluteDifference"),s=Jt(t,"predictions","absoluteDifference");let a=null;null!=n&&(a=Jt(n,"weights","absoluteDifference")),ee(i.shape,s.shape,"Error in absoluteDifference: ");const o=Wi(Ui(i,s));return gl(o,a,r)}}),vl=en({cosineDistance_:function(e,t,n,r,i=ml.SUM_BY_NONZERO_WEIGHTS){const s=Jt(e,"labels","cosineDistance"),a=Jt(t,"predictions","cosineDistance");let o=null;null!=r&&(o=Jt(r,"weights","cosineDistance")),ee(s.shape,a.shape,"Error in cosineDistance: ");const u=Oi(1),l=Ui(u,Oa(Ei(s,a),n,!0));return gl(l,o,i)}}),bl=en({hingeLoss_:function(e,t,n,r=ml.SUM_BY_NONZERO_WEIGHTS){let i=Jt(e,"labels","hingeLoss");const s=Jt(t,"predictions","hingeLoss");let a=null;null!=n&&(a=Jt(n,"weights","hingeLoss")),ee(i.shape,s.shape,"Error in hingeLoss: ");const o=Oi(1);i=Ui(Ei(Oi(2),i),o);const u=Ro(Ui(o,Ei(i,s)));return gl(u,a,r)}}),_l=en({huberLoss_:function(e,t,n,r=1,i=ml.SUM_BY_NONZERO_WEIGHTS){const s=Jt(e,"labels","huberLoss"),a=Jt(t,"predictions","huberLoss");let o=null;null!=n&&(o=Jt(n,"weights","huberLoss")),ee(s.shape,a.shape,"Error in huberLoss: ");const u=Oi(r),l=Wi(Ui(a,s)),c=to(l,u),h=Ui(l,c),d=xi(Ei(Oi(.5),ki(c)),Ei(u,h));return gl(d,o,i)}}),xl=en({logLoss_:function(e,t,n,r=1e-7,i=ml.SUM_BY_NONZERO_WEIGHTS){const s=Jt(e,"labels","logLoss"),a=Jt(t,"predictions","logLoss");let o=null;null!=n&&(o=Jt(n,"weights","logLoss")),ee(s.shape,a.shape,"Error in logLoss: ");const u=Oi(1),l=Oi(r),c=Ia(Ei(s,Ma(xi(a,l)))),h=Ei(Ui(u,s),Ma(xi(Ui(u,a),l))),d=Ui(c,h);return gl(d,o,i)}}),wl=en({meanSquaredError_:function(e,t,n,r=ml.SUM_BY_NONZERO_WEIGHTS){const i=Jt(e,"labels","meanSquaredError"),s=Jt(t,"predictions","meanSquaredError");let a=null;null!=n&&(a=Jt(n,"weights","meanSquaredError")),ee(i.shape,s.shape,"Error in meanSquaredError: ");const o=iu(i,s);return gl(o,a,r)}}),Sl=en({sigmoidCrossEntropy_:function(e,t,n,r=0,i=ml.SUM_BY_NONZERO_WEIGHTS){let s=Jt(e,"multiClassLabels","sigmoidCrossEntropy");const a=Jt(t,"logits","sigmoidCrossEntropy");let o=null;if(null!=n&&(o=Jt(n,"weights","sigmoidCrossEntropy")),ee(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Oi(r),t=Oi(1),n=Oi(.5);s=xi(Ei(s,Ui(t,e)),Ei(n,e))}const u=function(e,t){const n=Jt(e,"labels","sigmoidCrossEntropyWithLogits"),r=Jt(t,"logits","sigmoidCrossEntropyWithLogits");ee(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Ro(r),s=Ei(r,n),a=Na(ha(Ia(Wi(r))));return xi(Ui(i,s),a)}(s,a);return gl(u,o,i)}}),El=en({softmaxCrossEntropy_:function(e,t,n,r=0,i=ml.SUM_BY_NONZERO_WEIGHTS){let s=Jt(e,"onehotLabels","softmaxCrossEntropy");const a=Jt(t,"logits","softmaxCrossEntropy");let o=null;if(null!=n&&(o=Jt(n,"weights","softmaxCrossEntropy")),ee(s.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Oi(r),t=Oi(1),n=Oi(s.shape[1]);s=xi(Ei(s,Ui(t,e)),Si(e,n))}const u=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${t.rank} `+`and dim was ${n}`);return Ri((e,t,r)=>{const i=Ga(t,[n],!0),s=Ui(jn(t,"float32"),i);r([e,s]);const a=Ia(Ei(s,e));return{value:Oa(a,[n]),gradFunc:(e,t)=>{const[r,i]=t,s=Ba(e.shape,[n]);return[Ei(Ss(e,s),Ui(jn(r,"float32"),ha(i))),Ei(Ss(e,s),Ui(ha(i),jn(r,"float32")))]}}})(e,t)}(s,a);return gl(u,o,i)}}),Cl={fft:Qo,ifft:eu,rfft:ru,irfft:tu},kl={hammingWindow:Wu,hannWindow:Hu,frame:Gu,stft:ju},Tl={flipLeftRight:Ku,resizeNearestNeighbor:cl,resizeBilinear:ll,rotateWithOffset:Xu,cropAndResize:qu,nonMaxSuppression:Yu,nonMaxSuppressionAsync:async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Jt(e,"boxes","nonMaxSuppressionAsync"),a=Jt(t,"scores","nonMaxSuppressionAsync"),o=Zu(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const u=await Promise.all([s.data(),a.data()]),l=u[0],c=u[1],{selectedIndices:h}=el(l,c,n,r,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),cu(h,"int32")},nonMaxSuppressionWithScore:ol,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=Jt(e,"boxes","nonMaxSuppressionAsync"),o=Jt(t,"scores","nonMaxSuppressionAsync"),u=Zu(a,o,n,r,i,s);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;const l=await Promise.all([a.data(),o.data()]),c=l[0],h=l[1],{selectedIndices:d,selectedScores:p}=nl(c,h,n,r,i,s);return a!==e&&a.dispose(),o!==t&&o.dispose(),{selectedIndices:cu(d,"int32"),selectedScores:cu(p)}},nonMaxSuppressionPadded:ul,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=Jt(e,"boxes","nonMaxSuppressionAsync"),o=Jt(t,"scores","nonMaxSuppressionAsync"),u=Zu(a,o,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,h=u.scoreThreshold,[d,p]=await Promise.all([a.data(),o.data()]),{selectedIndices:f,validOutputs:m}=tl(d,p,l,c,h,s);return a!==e&&a.dispose(),o!==t&&o.dispose(),{selectedIndices:cu(f,"int32"),validOutputs:Oi(m,"int32")}}},Al={bandPart:hl,gramSchmidt:dl,qr:fl},Ml={absoluteDifference:yl,computeWeightedLoss:gl,cosineDistance:vl,hingeLoss:bl,huberLoss:_l,logLoss:xl,meanSquaredError:wl,sigmoidCrossEntropy:Sl,softmaxCrossEntropy:El};class Nl{static sgd(e){return new Xi(e)}static momentum(e,t,n=!1){return new Zi(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new Yi(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new Vi(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new Pi(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new Ki(e,t,n,r,i)}static adagrad(e,t=.1){return new $i(e,t)}}const Il={sgd:Nl.sgd,momentum:Nl.momentum,adadelta:Nl.adadelta,adagrad:Nl.adagrad,rmsprop:Nl.rmsprop,adamax:Nl.adamax,adam:Nl.adam},Dl="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function Rl(){return new Promise(e=>Dl(()=>e()))}function Ll(e,t){const n=e[0].length;e.forEach((e,t)=>{Q(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same `+`as the rank of the rest (${n})`)}),Q(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((e,i)=>{for(let s=0;s<n;s++)Q(s===t||e[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) `+`does not match the shape of the rest (${r}) `+`along the non-concatenated axis ${i}.`)})}function Ol(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}const Fl=30;function Pl(e){return e<=Fl?e:Ae(e,Math.floor(Math.sqrt(e)))}function zl(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function $l(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function Bl(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function Ul(e,t,n,r=!0){const i=[];i.push(r?e[0]/n:e[0]*n);for(let s=1;s<e.length;++s)i.push(s<=t.length?r?t[s-1]*e[s]:e[s]/t[s-1]:e[s]);return i}function Vl(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Wl(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}const Hl=1.7580993408473768,Gl=1.0507009873554805,jl=.3275911,ql=.254829592,Kl=-.284496736,Xl=1.421413741,Zl=-1.453152027,Yl=1.061405429;function Jl(...e){$e().getBool("IS_TEST")||console.warn(...e)}function Ql(...e){$e().getBool("IS_TEST")||console.log(...e)}function ec(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function tc(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function nc(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function rc(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function ic(e,t){return{real:e[2*t],imag:e[2*t+1]}}function sc(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ac(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const s=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function oc(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function uc(e,t,n=0){let r=[];if("number"==typeof t)Q(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{Q(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");const i=t.indexOf(-1);if(-1!==i){const r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}Q(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function lc(e,t){let n,r=!1;for(e<=Fl?(n=e,r=!0):n=Ae(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ae(e,n+1);return n}function cc(e,t,n){const r=[],i=e.length;for(let s=0;s<i;s++)r.push(s!==t?e[s]:n);return r}function hc(e,t,n,r){const i=t.shape.length,s=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const a=e.shape[n],o=[];let u=1,l=1,c=1;for(let h=0;h<r;++h)o.push(e.shape[h]),u*=e.shape[h];for(let h=r;h<n;h++)o.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<i;h++)o.push(t.shape[h]);for(let h=n+1;h<s;h++)o.push(e.shape[h]),c*=e.shape[h];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:a,outputShape:o}}function dc(e){try{return e.map(e=>mt(e))}catch(sR){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${sR}`)}}function pc(e){return e.map(e=>ft(e))}const fc={kernelName:"Abs",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,ou(jn(n,"float32"),-1))}}},mc={kernelName:"Acos",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=ki(jn(n,"float32")),r=Ci(Ui(Oi(1),t));return Ia(Si(e,r))}}}},gc={kernelName:"Acosh",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Ci(Ui(ki(jn(n,"float32")),1));return Si(e,t)}}}},yc={kernelName:"Add",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{let t=e;const r=Gi(n.shape,i);return r.length>0&&(t=Oa(t,r)),Ss(t,n.shape)},b:()=>{let t=e;const n=Gi(r.shape,i);return n.length>0&&(t=Oa(t,n)),Ss(t,r.shape)}}}},vc={kernelName:"ArgMax",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ti(n)}}},bc={kernelName:"ArgMin",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ti(n)}}},_c={kernelName:"Asin",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,Ci(Ui(Oi(1),ki(jn(n,"float32")))))}}},xc={kernelName:"Asinh",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Ci(xi(Oi(1),ki(jn(n,"float32"))));return Si(e,t)}}}},wc={kernelName:"Atan2",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{const t=xi(ki(n),ki(r));let s=Ei(e,Si(r,t));const a=Gi(n.shape,i);return a.length>0&&(s=Oa(s,a)),Ss(s,n.shape)},b:()=>{const t=xi(ki(n),ki(r));let s=Ia(Ei(e,Si(n,t)));const a=Gi(r.shape,i);return a.length>0&&(s=Oa(s,a)),Ss(s,r.shape)}}}},Sc={kernelName:"Atan",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,xi(ki(jn(n,"float32")),1))}}},Ec={kernelName:"Atanh",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,Ui(Oi(1),ki(jn(n,"float32"))))}}},Cc=en({avgPool3dGrad_:function(e,t,n,r,i,s){const a=Jt(e,"dy","avgPool3dGrad"),o=Jt(t,"input","avgPool3dGrad");let u=a,l=o,c=!1;4===o.rank&&(c=!0,u=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),l=Ss(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Q(5===u.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+`${u.rank}.`),Q(5===l.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+`${l.rank}.`),null!=s&&Q(ae(i),()=>"Error in avgPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${s} but got pad ${i}.`);const h=Gt.runKernel("AvgPool3DGrad",{dy:u,input:l},{filterSize:n,strides:r,pad:i,dimRoundingMode:s});return c?Ss(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),kc={kernelName:"AvgPool3D",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=n;return{x:()=>Cc(e,r,i,s,a,o)}}},Tc=en({avgPoolGrad_:function(e,t,n,r,i){const s=Jt(e,"dy","avgPoolGrad"),a=Jt(t,"input","avgPoolGrad");Q(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,u=s,l=!1;3===a.rank&&(l=!0,o=Ss(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=Ss(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Q(4===u.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+`${u.rank}.`),Q(4===o.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+`${o.rank}.`);const c=Gt.runKernel("AvgPoolGrad",{dy:u,input:o},{filterSize:n,strides:r,pad:i});return l?Ss(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),Ac={kernelName:"AvgPool",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:a}=n;return{x:()=>Tc(e,r,i,s,a)}}},Mc={kernelName:"BatchMatMul",inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:s,transposeB:a}=n;return s||a?!s&&a?{a:()=>dr(e,i,!1,!1),b:()=>dr(e,r,!0,!1)}:s&&!a?{a:()=>dr(i,e,!1,!0),b:()=>dr(r,e,!1,!1)}:{a:()=>dr(i,e,!0,!0),b:()=>dr(e,r,!0,!0)}:{a:()=>dr(e,i,!1,!0),b:()=>dr(r,e,!0,!1)}}},Nc={kernelName:"BatchToSpaceND",gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>vo(e,r,i)}}},Ic={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n.inputShape,i=n.shape,s=Array.from(i);for(let o=r.length-1;o>=0;o--)if(r[o]===i[o])s[o]=1;else if(1!==r[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${i}].`);const a=[];for(let o=0;o<s.length;o++)s[o]>1&&a.push(o);return{x:()=>Oa(e,a,!0)}}},Dc={kernelName:"Ceil",gradFunc:e=>({x:()=>Ti(e)})},Rc={kernelName:"ClipByValue",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>aa(ja(ba(r,i),ka(r,s)),e,Ti(e))}}},Lc={kernelName:"ComplexAbs",inputsToSave:["x"],gradFunc:fc.gradFunc},Oc={kernelName:"Concat",saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:i}=n,s=pe(i,t[0].shape)[0],a=r.map(e=>e[s]);return nu(e,a,s).map(e=>()=>e)}},Fc={kernelName:"Conv2D",inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:s,strides:a,pad:o,dataFormat:u}=n;return Q(_s(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>js(r.shape,e,i,a,o,u),filter:()=>Ru(r,e,i.shape,a,o,u)}}},Pc={kernelName:"Conv2DBackpropInput",inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:s,pad:a,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>Hs(e,i,s,a,o,1,u),filter:()=>Ru(e,r,i.shape,s,a,o,u)}}},zc=en({conv3DBackpropFilter_:function(e,t,n,r,i){let s=e;4===e.rank&&(s=Ss(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;return 4===a.rank&&(a=Ss(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Q(5===s.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${s.shape}.`),Q(5===a.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${a.shape}.`),Q(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${n}.`),Q(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must `+`match input depth in filter (${n[3]}.`),Q(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must `+`match output depth for filter (${n[4]}).`),Gt.runKernel("Conv3DBackpropFilterV2",{x:s,dy:a},{strides:r,pad:i,filterShape:n})}}),$c={kernelName:"Conv3D",inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s}=n;Q(_s(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${r}'`);const[a,o]=t;return{x:()=>Xs(a.shape,e,o,i,s),filter:()=>zc(a,e,o.shape,i,s)}}},Bc={kernelName:He,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(Ia(jo(jn(n,"float32"))),e)}}},Uc={kernelName:"Cosh",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(qo(jn(n,"float32")),e)}}},Vc={kernelName:"Cumsum",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{const t=Va([i],r.rank);let n=Qs(e,i,s,!a);return null!=t&&(n=fr(n,t)),n}}}},Wc={kernelName:"DepthwiseConv2dNative",inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=n,o=null==r?[1,1]:r;Q(_s(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${o}'`);const[u,l]=t;return Q(4===u.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${u.rank}.`),Q(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${l.rank}.`),Q(u.shape[3]===l.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${u.shape[3]}) must match the inChannels dimension `+`in filter ${l.shape[2]}.`),Q(xs(i,o),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${i} and dilations `+`'${o}'.`),null!=a&&Q(ae(s),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${s}.`),{x:()=>Bu(u.shape,e,l,i,s,r,a),filter:()=>$u(u,e,l.shape,i,s,r,a)}}},Hc={kernelName:"Dilation2D",inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,s={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>Gt.runKernel("Dilation2DBackpropInput",s,n),filter:()=>Gt.runKernel("Dilation2DBackpropFilter",a,n)}}},Gc={kernelName:"Elu",outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>Gt.runKernel("EluGrad",r)}}},jc={kernelName:Ge,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Ei(ha(Ia(ki(n))),2/Math.sqrt(Math.PI));return{x:()=>Ei(e,r)}}},qc={kernelName:je,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,n)}}},Kc={kernelName:"ExpandDims",inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Ss(e,n.shape)}}},Xc={kernelName:"Expm1",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,ha(n))}}},Zc={kernelName:"Floor",gradFunc:e=>({x:()=>Ti(e)})},Yc={kernelName:"FloorDiv",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{const t=Si(e,jn(r,"float32")),s=Gi(n.shape,i);return s.length>0?Ss(Oa(t,s),n.shape):t},b:()=>{let t=Ei(e,jn(n,"float32"));const s=Gi(r.shape,i);s.length>0&&(t=Ss(Oa(t,s),r.shape));const a=ki(r);return Ia(Si(t,jn(a,"float32")))}}}},Jc={kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,s,a,o]=t,u=null==o?Oi(1):o,l=Gi(s.shape,i.shape),c=[];if(1===s.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}const h=Ui(i,s),d=Ei(e,u),p=Uo(xi(a,Oi(r))),f=Ei(Ei(Ei(p,p),p),Oi(-.5));return{x:()=>Ss(Ei(Ei(e,1===s.rank?fa(Ss(p,[1,1,1,s.shape[0]]),c):p),u),i.shape),mean:()=>{let e=Ei(Ei(p,Oi(-1)),d);return 1===s.rank&&(e=Oa(e,l)),Ss(e,s.shape)},variance:()=>{let e=Ei(Ei(f,h),d);return 1===s.rank&&(e=Oa(e,l)),Ss(e,s.shape)},scale:()=>{const t=Ei(h,p);let n=Ei(e,t);return 1===s.rank&&(n=Oa(n,l)),Ss(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=Oa(t,l)),Ss(t,s.shape)}}}},Qc={kernelName:"GatherV2",inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:s}=n,a=pe(s,r.shape)[0];return{x:()=>{const t=r.shape,n=i.size,o=t.slice(0,a),u=o.length,l=t.slice(s,t.length).slice(1),c=l.length,h=eh(0,u),d=eh(u+1,u+1+c),p=th([o,[n],l]),f=Ss(e,p),m=Ss(i,[n]),g=th([[u],h,d]),y=fr(f,g);let v=vu(y,m,r.shape[a]);const b=Wa(g);return v=fr(v,b),v},indices:()=>i}}};function eh(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function th(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const nh={kernelName:"GreaterEqual",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Ti(n),b:()=>Ti(r)}}},rh={kernelName:"Identity",gradFunc:e=>({x:()=>jn(e,"float32")})},ih={kernelName:"IsFinite",gradFunc:e=>({x:()=>Ti(e)})},sh={kernelName:"IsInf",gradFunc:e=>({x:()=>Ti(e)})},ah={kernelName:"IsNan",gradFunc:e=>({x:()=>Ti(e)})},oh={kernelName:"LeakyRelu",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,s=va(r,0);return{x:()=>aa(s,e,Ei(e,i))}}},uh={kernelName:"Log1p",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,xi(n,1))}}},lh={kernelName:qe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,jn(n,"float32"))}}},ch={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=ha(r);return Ui(e,Ei(Oa(e,i,!0),t))}}}},hh=en({localResponseNormalizationBackprop_:function(e,t,n,r=5,i=1,s=1,a=.5){return Gt.runKernel("LRNGrad",{x:e,y:t,dy:n},{depthRadius:r,bias:i,alpha:s,beta:a})}}),dh={kernelName:"LRN",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:s,bias:a,alpha:o,beta:u}=n;return{x:()=>hh(r,i,e,s,a,o,u)}}};function ph(e,t,n,r){return t.rank<n.rank&&(t=Ss(t,Ba(t.shape,r))),e.rank<n.rank&&(e=Ss(e,Ba(e.shape,r))),{x:()=>Ei(e,jn(sa(n,t),e.dtype))}}const fh={kernelName:"Max",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,s=t[0],a=ph(e,t[1],s,pe(i,s.shape));return{x:()=>a.x()}}},mh={kernelName:"Maximum",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Ei(e,jn(ba(n,r),"float32")),b:()=>Ei(e,jn(Ca(n,r),"float32"))}}},gh=en({maxPool3dGrad_:function(e,t,n,r,i,s,a){const o=Jt(e,"dy","maxPool3dGrad"),u=Jt(t,"input","maxPool3dGrad"),l=Jt(n,"output","maxPool3dGrad");let c=o,h=u,d=l,p=!1;4===u.rank&&(p=!0,c=Ss(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=Ss(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=Ss(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),Q(5===c.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+`${c.rank}.`),Q(5===h.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+`${h.rank}.`),Q(5===d.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+`${d.rank}.`),null!=a&&Q(ae(s),()=>"Error in maxPool3dGrad: pad must be an integer when "+`using, dimRoundingMode ${a} but got pad ${s}.`);const f=Gt.runKernel("MaxPool3DGrad",{dy:c,input:h,output:d},{filterSize:r,strides:i,pad:s,dimRoundingMode:a});return p?Ss(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),yh={kernelName:"MaxPool3D",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:u}=n;return{x:()=>gh(e,r,i,s,a,o,u)}}},vh=en({maxPoolGrad_:function(e,t,n,r,i,s,a){const o=Jt(e,"dy","maxPoolGrad"),u=Jt(t,"input","maxPoolGrad"),l=Jt(n,"output","maxPoolGrad");return Q(u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy `+`(${o.rank})`),Q(4===o.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+`${o.rank}.`),Q(4===u.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+`${u.rank}.`),null!=a&&Q(ae(s),()=>"Error in maxPoolGrad: pad must be an integer when using, "+`dimRoundingMode ${a} but got pad ${s}.`),Gt.runKernel("MaxPoolGrad",{dy:o,input:u,output:l},{filterSize:r,strides:i,pad:s,dimRoundingMode:a})}}),bh={kernelName:"PadV2",inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(e=>e[0]);return{x:()=>As(e,s,r.shape)}}},_h={kernelName:"SpaceToBatchND",gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Is(e,r,i)}}},xh={kernelName:"SplitV",gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>ks(e,r)}}},wh=[fc,mc,gc,yc,{kernelName:"AddN",saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},vc,bc,_c,xc,wc,Sc,Ec,kc,Ac,Mc,Nc,Ic,{kernelName:"Cast",gradFunc:e=>({x:()=>e.clone()})},Dc,Rc,Lc,Oc,Pc,Fc,$c,Bc,Uc,Vc,Wc,Hc,{kernelName:"RealDiv",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{const t=Si(e,jn(r,"float32")),s=Gi(n.shape,i);return s.length>0?Ss(Oa(t,s),n.shape):t},b:()=>{let t=Ei(e,jn(n,"float32"));const s=Gi(r.shape,i);s.length>0&&(t=Ss(Oa(t,s),r.shape));const a=ki(r);return Ia(Si(t,jn(a,"float32")))}}}},Gc,jc,qc,Kc,Xc,Yc,Zc,Jc,Qc,nh,rh,ih,sh,ah,oh,uh,lh,ch,dh,fh,fh,mh,yh,{kernelName:"MaxPool",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:a,pad:o}=n;return{x:()=>vh(e,r,i,s,a,o)}}},{kernelName:"Mean",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,s=pe(i,r.shape),a=re($a(r.shape,s)[1]);return{x:()=>{const t=r.shape.slice();s.forEach(e=>{t[e]=1});const n=Ss(e,t);return Si(Ei(n,lo(r.shape,"float32")),a)}}}},{kernelName:"Min",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[s,a]=t,o=ph(e,a,s,pe(i,s.shape));return{x:()=>o.x()}}},{kernelName:"Minimum",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Ei(e,jn(ka(n,r),"float32")),b:()=>Ei(e,jn(va(n,r),"float32"))}}},{kernelName:"MirrorPad",inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(e=>e[0]);return{x:()=>As(e,s,r.shape)}}},{kernelName:Ke,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{const t=Gi(n.shape,i);return t.length>0?Ss(Oa(e,t),n.shape):e},b:()=>{const t=Ei(e,Ia(ga(Si(n,r)))),s=Gi(r.shape,i);return s.length>0?Ss(Oa(t,s),r.shape):t}}}},{kernelName:"Multiply",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{const t=Ei(e,jn(r,"float32")),s=Gi(n.shape,i);return s.length>0?Ss(Oa(t,s),n.shape):t},b:()=>{const t=Ei(e,jn(n,"float32")),s=Gi(r.shape,i);return s.length>0?Ss(Oa(t,s),r.shape):t}}}},{kernelName:"Neg",gradFunc:e=>({x:()=>Ia(e)})},{kernelName:"OneHot",inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>uo(n.shape,"float32")}}},{kernelName:"OnesLike",gradFunc:e=>({x:()=>Ti(e)})},{kernelName:"Pack",saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return bu(e,r).map(e=>()=>e)}},bh,bh,{kernelName:Xe,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,s=n,a=r,o=ji(s.shape,a.shape);return{a:()=>{const t=jn(a,"float32");let n=Ei(e,Ei(t,Bi(s,Ui(t,Oi(1)))));const r=Gi(s.shape,o);return r.length>0&&(n=Oa(n,r)),Ss(n,s.shape)},b:()=>{const t=va(s,0),n=aa(t,Ma(s),Ti(s));let r=Ei(e,Ei(i,n));const u=Gi(a.shape,o);return u.length>0&&(r=Oa(r,u)),Ss(r,a.shape)}}}},{kernelName:"Prelu",inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=va(n,0);return{x:()=>aa(i,e,Ei(e,r)),alpha:()=>{let t=aa(i,Ti(e),Ei(e,n));const s=Gi(r.shape,e.shape);return s.length>0&&(t=Oa(t,s)),Ss(t,r.shape)}}}},{kernelName:"Reciprocal",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,Ia(ki(n)))}}},{kernelName:"Relu6",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Ei(ka(n,6),ou(n));return{x:()=>Ei(e,jn(r,"float32"))}}},{kernelName:"Relu",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,jn(ou(n),"float32"))}}},{kernelName:"Reshape",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ss(e,n.shape)}}},{kernelName:"ResizeBilinear",inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>Gt.runKernel("ResizeBilinearGrad",i,n)}}},{kernelName:"ResizeNearestNeighbor",inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>Gt.runKernel("ResizeNearestNeighborGrad",i,n)}}},{kernelName:"Reverse",gradFunc:(e,t,n)=>{const{dims:r}=n,i=pe(r,e.shape);return{x:()=>Oo(e,i)}}},{kernelName:"Round",gradFunc:e=>({x:()=>Ti(e)})},{kernelName:"Rsqrt",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ia(Si(e,Ei(Bi(n,1.5),2)))}}},{kernelName:"Select",inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>jn(Ti(n),"float32"),t:()=>Ei(e,jn(n,e.dtype)),e:()=>Ei(e,jn(qa(n),e.dtype))}}},{kernelName:"Selu",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=va(n,Oi(0)),r=Oi(Hl),i=Oi(Gl),s=Ei(e,i),a=Ei(Ei(e,r),ha(jn(n,"float32")));return aa(t,s,a)}}}},{kernelName:"Sigmoid",outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,Ei(n,Ui(Oi(1),n)))}}},{kernelName:"Sign",gradFunc:e=>({x:()=>Ti(e)})},{kernelName:Ze,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(Ys(jn(n,"float32")),e)}}},{kernelName:"Sinh",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(Js(jn(n,"float32")),e)}}},{kernelName:"Slice",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:s}=n,a=r.shape,[o,u]=zr(r,i,s),l=[];for(let c=0;c<e.rank;c++)l.push([o[c],a[c]-o[c]-u[c]]);return{x:()=>po(e,l)}}},{kernelName:"Softmax",outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,s=Ei(e,r);return{logits:()=>Ui(s,Ei(Oa(s,[i],!0),r))}}},{kernelName:"Softplus",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,Ts(n))}}},_h,_h,xh,xh,{kernelName:"Sqrt",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,Ei(Ci(jn(n,"float32")),2))}}},{kernelName:"SquaredDifference",inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Oi(2);return{a:()=>Ei(e,Ei(i,Ui(n,r))),b:()=>Ei(e,Ei(i,Ui(r,n)))}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(e,Ei(jn(n,"float32"),2))}}},{kernelName:"Step",gradFunc:e=>({x:()=>Ti(e)})},{kernelName:Ye,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=ji(n.shape,r.shape);return{a:()=>{let t=e;const r=Gi(n.shape,i);return r.length>0&&(t=Oa(t,r)),Ss(t,n.shape)},b:()=>{let t=e;const n=Gi(r.shape,i);return n.length>0&&(t=Oa(t,n)),Ss(Ia(t),r.shape)}}}},{kernelName:"Sum",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:s}=n;pe(s,r.shape).forEach(e=>{i[e]=1});const a=Ss(e,i),o=Ei(a,lo(r.shape,"float32"));return{x:()=>o}}},{kernelName:Je,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Si(e,ki(Ys(n)))}}},{kernelName:"Tanh",outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ei(Ui(Oi(1),ki(n)),e)}}},{kernelName:"Tile",inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let t=Ti(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=xi(t,As(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)t=xi(t,As(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let a=0;a<i[2];++a)t=xi(t,As(e,[n*r.shape[0],s*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let a=0;a<i[2];++a)for(let o=0;o<i[3];++o)t=xi(t,As(e,[n*r.shape[0],s*r.shape[1],a*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,s=Wa(i);return{x:()=>fr(e,s)}}},{kernelName:"Unpack",gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>au(e,i)}}},{kernelName:"UnsortedSegmentSum",inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=qi(t,Ti(t)),r=ya(e,n);let i=ba(t,Oi(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=da(i,o+1);i=ja(i,lo(r.shape,"bool"));const a=Ti(r);return aa(i,r,a)}(e,n)}}},{kernelName:"ZerosLike",gradFunc:e=>({x:()=>Ti(e)})}];for(const aR of wh)st(aR);let Sh;function Eh(){return null==Sh&&(Sh=bi().epsilon()),Sh}Tt().prototype.abs=function(){return this.throwIfDisposed(),Wi(this)},Tt().prototype.acos=function(){return this.throwIfDisposed(),Ji(this)},Tt().prototype.acosh=function(){return this.throwIfDisposed(),Qi(this)},Tt().prototype.add=function(e){return this.throwIfDisposed(),xi(this,e)},Tt().prototype.all=function(e,t){return this.throwIfDisposed(),ts(this,e,t)},Tt().prototype.any=function(e,t){return this.throwIfDisposed(),ns(this,e,t)},Tt().prototype.argMax=function(e){return this.throwIfDisposed(),rs(this,e)},Tt().prototype.argMin=function(e){return this.throwIfDisposed(),is(this,e)},Tt().prototype.asScalar=function(){return this.throwIfDisposed(),Q(1===this.size,()=>"The array must have only 1 element."),Ss(this,[])},Tt().prototype.asType=function(e){return this.throwIfDisposed(),jn(this,e)},Tt().prototype.as1D=function(){return this.throwIfDisposed(),Ss(this,[this.size])},Tt().prototype.as2D=function(e,t){return this.throwIfDisposed(),Ss(this,[e,t])},Tt().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Ss(this,[e,t,n])},Tt().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Ss(this,[e,t,n,r])},Tt().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),Ss(this,[e,t,n,r,i])},Tt().prototype.asin=function(){return this.throwIfDisposed(),ss(this)},Tt().prototype.asinh=function(){return this.throwIfDisposed(),as(this)},Tt().prototype.atan=function(){return this.throwIfDisposed(),os(this)},Tt().prototype.atan2=function(e){return this.throwIfDisposed(),us(this,e)},Tt().prototype.atanh=function(){return this.throwIfDisposed(),ls(this)},Tt().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Es(this,e,t,n,r)},Tt().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Is(this,e,t)},Tt().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),Ds(this,e,t,n,r,i)},Tt().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Ps(this,e)},Tt().prototype.cast=function(e){return this.throwIfDisposed(),jn(this,e)},Tt().prototype.ceil=function(){return this.throwIfDisposed(),zs(this)},Tt().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),$s(this,e,t)},Tt().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof kt&&(e=[e]),ks([this,...e],t)},Tt().prototype.conv1d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Gs(this,e,t,n,r,i,s)},Tt().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),qs(this,e,t,n,r,i)},Tt().prototype.conv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Hs(this,e,t,n,r,i,s)},Tt().prototype.cos=function(){return this.throwIfDisposed(),Ys(this)},Tt().prototype.cosh=function(){return this.throwIfDisposed(),Js(this)},Tt().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Qs(this,e,t,n)},Tt().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ta(this,e,t)},Tt().prototype.depthwiseConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),na(this,e,t,n,r,i,s)},Tt().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),ia(this,e,t,n,r,i)},Tt().prototype.divNoNan=function(e){return this.throwIfDisposed(),oa(this,e)},Tt().prototype.div=function(e){return this.throwIfDisposed(),Si(this,e)},Tt().prototype.dot=function(e){return this.throwIfDisposed(),ua(this,e)},Tt().prototype.elu=function(){return this.throwIfDisposed(),la(this)},Tt().prototype.equal=function(e){return this.throwIfDisposed(),sa(this,e)},Tt().prototype.erf=function(){return this.throwIfDisposed(),ca(this)},Tt().prototype.exp=function(){return this.throwIfDisposed(),ha(this)},Tt().prototype.expandDims=function(e){return this.throwIfDisposed(),da(this,e)},Tt().prototype.expm1=function(){return this.throwIfDisposed(),pa(this)},Tt().prototype.fft=function(){return this.throwIfDisposed(),Qo(this)},Tt().prototype.flatten=function(){return this.throwIfDisposed(),Ss(this,[this.size])},Tt().prototype.floor=function(){return this.throwIfDisposed(),ga(this)},Tt().prototype.floorDiv=function(e){return this.throwIfDisposed(),wi(this,e)},Tt().prototype.gather=function(e,t){return this.throwIfDisposed(),ya(this,e,t)},Tt().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ba(this,e)},Tt().prototype.greater=function(e){return this.throwIfDisposed(),va(this,e)},Tt().prototype.ifft=function(){return this.throwIfDisposed(),eu(this)},Tt().prototype.irfft=function(){return this.throwIfDisposed(),tu(this)},Tt().prototype.isFinite=function(){return this.throwIfDisposed(),xa(this)},Tt().prototype.isInf=function(){return this.throwIfDisposed(),wa(this)},Tt().prototype.isNaN=function(){return this.throwIfDisposed(),Sa(this)},Tt().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Ea(this,e)},Tt().prototype.lessEqual=function(e){return this.throwIfDisposed(),ka(this,e)},Tt().prototype.less=function(e){return this.throwIfDisposed(),Ca(this,e)},Tt().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Aa(this,e,t,n,r)},Tt().prototype.logSigmoid=function(){return this.throwIfDisposed(),Ra(this)},Tt().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Fa(this,e)},Tt().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Ga(this,e,t)},Tt().prototype.log=function(){return this.throwIfDisposed(),Ma(this)},Tt().prototype.log1p=function(){return this.throwIfDisposed(),Na(this)},Tt().prototype.logicalAnd=function(e){return this.throwIfDisposed(),ja(this,e)},Tt().prototype.logicalNot=function(){return this.throwIfDisposed(),qa(this)},Tt().prototype.logicalOr=function(e){return this.throwIfDisposed(),Ka(this,e)},Tt().prototype.logicalXor=function(e){return this.throwIfDisposed(),Xa(this,e)},Tt().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),dr(this,e,t,n)},Tt().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Za(this,e,t,n,r)},Tt().prototype.max=function(e,t){return this.throwIfDisposed(),La(this,e,t)},Tt().prototype.maximum=function(e){return this.throwIfDisposed(),qi(this,e)},Tt().prototype.mean=function(e,t){return this.throwIfDisposed(),Qa(this,e,t)},Tt().prototype.min=function(e,t){return this.throwIfDisposed(),eo(this,e,t)},Tt().prototype.minimum=function(e){return this.throwIfDisposed(),to(this,e)},Tt().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),no(this,e,t)},Tt().prototype.mod=function(e){return this.throwIfDisposed(),ro(this,e)},Tt().prototype.mul=function(e){return this.throwIfDisposed(),Ei(this,e)},Tt().prototype.neg=function(){return this.throwIfDisposed(),Ia(this)},Tt().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Eu(this,e,t,n)},Tt().prototype.notEqual=function(e){return this.throwIfDisposed(),oo(this,e)},Tt().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),pr(this,e,t,n)},Tt().prototype.onesLike=function(){return this.throwIfDisposed(),co(this)},Tt().prototype.pad=function(e,t){return this.throwIfDisposed(),po(this,e,t)},Tt().prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),bo(this,e,t,n,r,i)},Tt().prototype.pow=function(e){return this.throwIfDisposed(),Bi(this,e)},Tt().prototype.prelu=function(e){return this.throwIfDisposed(),_o(this,e)},Tt().prototype.prod=function(e,t){return this.throwIfDisposed(),xo(this,e,t)},Tt().prototype.reciprocal=function(){return this.throwIfDisposed(),Do(this)},Tt().prototype.relu=function(){return this.throwIfDisposed(),Ro(this)},Tt().prototype.relu6=function(){return this.throwIfDisposed(),Lo(this)},Tt().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Ss(this,e.shape)},Tt().prototype.reshape=function(e){return this.throwIfDisposed(),Ss(this,e)},Tt().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),ll(this,e,t,n)},Tt().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),cl(this,e,t,n)},Tt().prototype.reverse=function(e){return this.throwIfDisposed(),Oo(this,e)},Tt().prototype.rfft=function(){return this.throwIfDisposed(),ru(this)},Tt().prototype.round=function(){return this.throwIfDisposed(),Bo(this)},Tt().prototype.rsqrt=function(){return this.throwIfDisposed(),Uo(this)},Tt().prototype.selu=function(){return this.throwIfDisposed(),Vo(this)},Tt().prototype.separableConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Wo(this,e,t,n,r,i,s)},Tt().prototype.sigmoid=function(){return this.throwIfDisposed(),Ts(this)},Tt().prototype.sign=function(){return this.throwIfDisposed(),Go(this)},Tt().prototype.sin=function(){return this.throwIfDisposed(),jo(this)},Tt().prototype.sinh=function(){return this.throwIfDisposed(),qo(this)},Tt().prototype.slice=function(e,t){return this.throwIfDisposed(),As(this,e,t)},Tt().prototype.softmax=function(e){return this.throwIfDisposed(),Jo(this,e)},Tt().prototype.softplus=function(){return this.throwIfDisposed(),Da(this)},Tt().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),vo(this,e,t)},Tt().prototype.split=function(e,t){return this.throwIfDisposed(),nu(this,e,t)},Tt().prototype.sqrt=function(){return this.throwIfDisposed(),Ci(this)},Tt().prototype.square=function(){return this.throwIfDisposed(),ki(this)},Tt().prototype.squaredDifference=function(e){return this.throwIfDisposed(),iu(this,e)},Tt().prototype.squeeze=function(e){return this.throwIfDisposed(),su(this,e)},Tt().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof kt?[this,e]:[this,...e];return au(n,t)},Tt().prototype.step=function(e){return this.throwIfDisposed(),ou(this,e)},Tt().prototype.stridedSlice=function(e,t,n,r,i,s,a,o){return this.throwIfDisposed(),uu(this,e,t,n,r,i,s,a,o)},Tt().prototype.sub=function(e){return this.throwIfDisposed(),Ui(this,e)},Tt().prototype.sum=function(e,t){return this.throwIfDisposed(),Oa(this,e,t)},Tt().prototype.tan=function(){return this.throwIfDisposed(),lu(this)},Tt().prototype.tanh=function(){return this.throwIfDisposed(),Ms(this)},Tt().prototype.tile=function(e){return this.throwIfDisposed(),fa(this,e)},Tt().prototype.toBool=function(){return this.throwIfDisposed(),jn(this,"bool")},Tt().prototype.toFloat=function(){return this.throwIfDisposed(),jn(this,"float32")},Tt().prototype.toInt=function(){return this.throwIfDisposed(),jn(this,"int32")},Tt().prototype.topk=function(e,t){return this.throwIfDisposed(),mu(this,e,t)},Tt().prototype.transpose=function(e){return this.throwIfDisposed(),fr(this,e)},Tt().prototype.unique=function(e){return this.throwIfDisposed(),yu(this,e)},Tt().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),vu(this,e,t)},Tt().prototype.unstack=function(e){return this.throwIfDisposed(),bu(this,e)},Tt().prototype.where=function(e,t){return this.throwIfDisposed(),aa(e,this,t)},Tt().prototype.zerosLike=function(){return this.throwIfDisposed(),Ti(this)};class Ch extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ch.prototype)}}class kh extends Error{constructor(e){super(e),Object.setPrototypeOf(this,kh.prototype)}}class Th extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Th.prototype)}}class Ah extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ah.prototype)}}class Mh extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Mh.prototype)}}function Nh(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function Ih(e,t){if(!e)throw new Mh(t)}function Dh(e,t){let n=0;for(const r of e)r===t&&n++;return n}function Rh(e){return 1===e.length?e[0]:e}function Lh(e){return Array.isArray(e)?e:[e]}function Oh(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Fh(e){return e.length<=1?e:-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}Error;let Ph={};function zh(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function $h(e,t={},n={},r="object",i=!1){if("string"==typeof e){const i=e;let s;if(i in n)s=n[i];else if(i in Ph)s=Ph[i];else if(s=t[i],null==s)throw new Th(`Unknown ${r}: ${e}. `+"This may be due to one of the following reasons:\n"+`1. The ${r} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${r} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");return s}{const s=e;if(null==s.className||null==s.config)throw new Th(`${r}: Improper config format: `+`${JSON.stringify(s)}.\n`+"'className' and 'config' must set.");const a=s.className;let o,u;if(a in n?[o,u]=n[a]:a in Ph?[o,u]=Ph.className:a in t&&([o,u]=t[a]),null==o)throw new Th(`Unknown ${r}: ${a}. `+"This may be due to one of the following reasons:\n"+`1. The ${r} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${r} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){const e={};for(const n of Object.keys(Ph))e[n]=Ph[n];for(const i of Object.keys(n))e[i]=n[i];s.config.customObjects=e;const t=Object.assign({},Ph);for(const i of Object.keys(n))Ph[i]=n[i];!function e(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(t=>e(t));else{const n=Object.keys(t);for(const r of n){const n=t[r];null!=n&&"object"==typeof n&&(Array.isArray(n)||"ndarray"!==n.type||"number"!=typeof n.value?e(n):t[r]=n.value)}}}(s.config);const r=u(o,s.config,n,i);return Ph=Object.assign({},t),r}{const e=Object.assign({},Ph);for(const r of Object.keys(n))Ph[r]=n[r];const t=new o(s.config);return Ph=Object.assign({},e),t}}}function Bh(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Uh(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function Vh(e){if(null==e)throw new Th(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Wh(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Th(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function Hh(e,t,n=0,r=1/0){return Ih(n>=0),Ih(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function Gh(e,t){Array.isArray(e)?(r.assert(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((e,n)=>Gh(e,`element ${n+1} of ${t}`))):r.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got `+`${function e(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>e(t)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}(e)}.`)}function jh(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function qh(e,t){return ui(()=>Ci(Oa(Ei(e,e),t,!0)))}class Kh extends d.Serializable{getConfig(){return{}}}class Xh extends Kh{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return ui(()=>{const t=qh(e,this.axis),n=$s(t,0,this.maxValue);return Ei(e,Si(n,xi(Eh(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Xh.className="MaxNorm",d.registerClass(Xh);class Zh extends Kh{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return ui(()=>Si(e,xi(Eh(),qh(e,this.axis))))}getConfig(){return{axis:this.axis}}}Zh.className="UnitNorm",d.registerClass(Zh);class Yh extends Kh{apply(e){return Ro(e)}}Yh.className="NonNeg",d.registerClass(Yh);class Jh extends Kh{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return ui(()=>{const t=qh(e,this.axis),n=xi(Ei(this.rate,$s(t,this.minValue,this.maxValue)),Ei(1-this.rate,t));return Ei(e,Si(n,xi(Eh(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Jh.className="MinMaxNorm",d.registerClass(Jh);const Qh={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ed(e){return zh(e)}function td(e,t={}){return $h(e,d.SerializationMap.getMap().classNameMap,t,"constraint")}function nd(e){return null==e?null:"string"==typeof e?td({className:e in Qh?Qh[e]:e,config:{}}):e instanceof Kh?e:td(e)}function rd(e){return new Xh(e)}function id(e){return new Zh(e)}function sd(){return new Yh}function ad(e){return new Jh(e)}const od=["channelsFirst","channelsLast"],ud=["nearest","bilinear"],ld=["valid","same","causal"],cd=["max","avg"],hd=["sum","mul","concat","ave"],dd=new Map;function pd(e){Wh(od,"DataFormat",e)}function fd(e){Wh(ld,"PaddingMode",e)}function md(e){Wh(cd,"PoolMode",e)}const gd=[];function yd(e,t){gd.push(e);try{const e=t();return gd.pop(),e}catch(n){throw gd.pop(),n}}function vd(e){if(!xd(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===gd.length?"":gd.join("/")+"/")+e}function bd(e){if(!xd(e))throw new Error("Not a valid tensor name: '"+e+"'");dd.has(e)||dd.set(e,0);const t=dd.get(e);if(dd.set(e,dd.get(e)+1),t>0){const n=`${e}_${t}`;return dd.set(n,1),n}return e}const _d=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function xd(e){return!!e.match(_d)}function wd(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Sd(e){return cu(e=Array.isArray(e)?new Float32Array(e):e)}function Ed(e){return eo(Sd(e)).dataSync()[0]}function Cd(e){return La(Sd(e)).dataSync()[0]}function kd(e,t){if(t<e)throw new Th(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Td(e,t){return e.asType(t)}function Ad(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function Md(e,t,n){return ui(()=>{switch(e.rank){case 1:return Ko(e,t,n);case 2:return Xo(e,[t,0],[n,e.shape[1]]);case 3:return Zo(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Yo(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return As(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return As(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Th("sliceAlongFirstAxis() received an unsupported tensor rank: "+`${e.rank}`)}})}function Nd(e,t,n){return ui(()=>{switch(e.rank){case 1:return Ko(e,t,n);case 2:return Xo(e,[0,t],[e.shape[0],n]);case 3:return Zo(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Yo(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Th("sliceAlongLastAxis() received an unsupported tensor rank: "+`${e.rank}`)}})}function Id(e,t,n,r){return ui(()=>{switch(e.rank){case 1:return Ko(e,t,n);case 2:switch(r){case 1:return Md(e,t,n);case 2:return Nd(e,t,n);default:throw new Th("The axis is not within the rank of the tensor "+`${r}`)}case 3:switch(r){case 1:return Md(e,t,n);case 2:return Zo(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Nd(e,t,n);default:throw new Th("The axis is not within the rank of the tensor "+`${r}`)}case 4:switch(r){case 1:return Md(e,t,n);case 2:return Yo(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Yo(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Nd(e,t,n);default:throw new Th("The axis is not within the rank of the tensor "+`${r}`)}default:throw new Th("sliceAlongLastAxis() received an unsupported tensor rank: "+`${e.rank}`)}})}function Dd(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),ks(e,t)}function Rd(e,t){switch(e.rank){case 1:return Bs([e,t]);case 2:return Us([e,t],0);case 3:return Vs([e,t],0);case 4:return Ws([e,t],0);default:throw new Th("concatAlongFirstAxis() received an unsupported "+`tensor rank: ${e.rank}`)}}function Ld(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Th(`The length of input n (${t.length}) does not match `+`the number of dimensions in input x (${e.rank})`);return fa(e,t)}function Od(e,t=0,n=1,r,i){return Ao(e,t,n,r,i)}function Fd(e,t,n,r){if(e.rank<2||t.rank<2)throw new Ah("dot requires both inputs to be rank >= 2"+` but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Ah("If rank y >= 3, then the second last dim"+` of y must equal the last dim of x but got x shape = ${e.shape} and `+` y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return f.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?$d(e.rank,r,"channelsLast"):null,activation:n});{const i=e.shape.slice(),s=i.pop();e=e.reshape([-1,s]);const a=t.shape.slice(),o=a.pop(),u=a.pop(),l=[...a,o],c=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=t.transpose(c).reshape([u,-1]);const h=[...i,...l];return f.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?$d(e.rank,r,"channelsLast"):null,activation:n}).reshape(h)}}function Pd(e,t,n){return ui(()=>(t=Array.isArray(t)?cu(t,"int32"):t.toInt(),ya(e,t,n)))}function zd(e){return Ei(e,e)}function $d(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Th(`Unexpected bias dimensions: ${t.rank}`+`; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return t;throw new Th(`Unsupported input rank by biasAdd: ${t.rank}`)}function Bd(e,t,n){return ui(()=>(null==n&&(n="channelsLast"),pd(n),e.add($d(e.rank,t,n))))}function Ud(e,t,n,r){return ui(()=>Mu(e,t,n,r))}function Vd(e,t,n=!1){return n?e():t()}const Wd=["fanIn","fanOut","fanAvg"],Hd=["normal","uniform","truncatedNormal"];class Gd extends d.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class jd extends Gd{apply(e,t){return uo(e,t)}}jd.className="Zeros",d.registerClass(jd);class qd extends Gd{apply(e,t){return lo(e,t)}}qd.className="Ones",d.registerClass(qd);class Kd extends Gd{constructor(e){if(super(),"object"!=typeof e)throw new Th(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new Th(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return ui(()=>Ei(Oi(this.value),lo(e,t)))}getConfig(){return{value:this.value}}}Kd.className="Constant",d.registerClass(Kd);class Xd extends Gd{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Mo(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Xd.className="RandomUniform",d.registerClass(Xd);class Zd extends Gd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ah(`randomNormal does not support dType ${t}.`);return Od(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Zd.className="RandomNormal",d.registerClass(Zd);class Yd extends Gd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ah(`truncatedNormal does not support dType ${t}.`);return gu(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Yd.className="TruncatedNormal",d.registerClass(Yd);class Jd extends Gd{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return ui(()=>{if(2!==e.length||e[0]!==e[1])throw new Th("Identity matrix initializer can only be used for 2D square matrices.");return Ei(this.gain,ma(e[0]))})}getConfig(){return{gain:this.gain}}}Jd.className="Identity",d.registerClass(Jd);class Qd extends Gd{constructor(e){if(super(),e.scale<0)throw new Th(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,Wh(Wd,"FanMode",this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){Wh(Hd,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,r;if(pd(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=wd(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=wd(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=wd(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],i=n[1];let s=this.scale;if(s/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,i):Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ah(`${this.getClassName()} does not support dType ${t}.`);return gu(e,0,n,t,this.seed)}{const n=Math.sqrt(3*s);return Mo(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Qd.className="VarianceScaling",d.registerClass(Qd);class ep extends Qd{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}ep.className="GlorotUniform",d.registerClass(ep);class tp extends Qd{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}tp.className="GlorotNormal",d.registerClass(tp);class np extends Qd{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}np.className="HeNormal",d.registerClass(np);class rp extends Qd{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}rp.className="HeUniform",d.registerClass(rp);class ip extends Qd{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}ip.className="LeCunNormal",d.registerClass(ip);class sp extends Qd{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qd.className}}sp.className="LeCunNormal",d.registerClass(sp);class ap extends Gd{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new Ah("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return ui(()=>{if(e.length<2)throw new Ah("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+`than 2000 (${e[0]*e[1]}) elements: `+"Slowness may result.");const t=Od(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32");let n=Al.gramSchmidt(t);return e[0]>e[1]&&(n=n.transpose()),Ei(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}}ap.className="Orthogonal",d.registerClass(ap);const op={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function up(e,t={}){return $h(e,d.SerializationMap.getMap().classNameMap,t,"initializer")}function lp(e){return zh(e)}function cp(e){if("string"==typeof e){const t=e in op?op[e]:e;if("GlorotNormal"===t)return new tp;if("GlorotUniform"===t)return new ep;if("HeNormal"===t)return new np;if("HeUniform"===t)return new rp;if("LeCunNormal"===t)return new ip;if("LeCunUniform"===t)return new sp;{const e={};return e.className=t,e.config={},up(e)}}return e instanceof Gd?e:up(e)}function hp(){return new jd}function dp(){return new qd}function pp(e){return new Kd(e)}function fp(e){return new Xd(e)}function mp(e){return new Zd(e)}function gp(e){return new Yd(e)}function yp(e){return new Jd(e)}function vp(e){return new Qd(e)}function bp(e){return new ep(e)}function _p(e){return new tp(e)}function xp(e){return new np(e)}function wp(e){return new rp(e)}function Sp(e){return new ip(e)}function Ep(e){return new sp(e)}function Cp(e){return new ap(e)}let kp=0;function Tp(){return kp++}const Ap={};function Mp(e=""){return e in Ap||(Ap[e]=0),Ap[e]+=1,e+Ap[e].toString()}function Np(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ip(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Dp(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Th(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Rp(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new Th(`Expected exactly 1 Shape; got ${e.length}`)}return e}function Lp(e){let t=0;for(const n of e)t+=0===n.shape.length?1:n.shape.reduce((e,t)=>e*t);return t}class Op{constructor(e,t="float32",n="Variable",r=!0,i=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Tp(),this.originalName=vd(n=null==n?"Variable":n),this.name=bd(this.originalName),this.trainable_=r,this.constraint=i,this.val=_u(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Fp(e){return e.map(e=>e.read())}function Pp(e){e.forEach(e=>{e[0].write(e[1])})}class zp{constructor(e){this.dtype=e.dtype,this.shape=e.shape,this.ndim=null!=e.shape?e.shape.length:e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class $p{constructor(e,t,n,r,i,s,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=Tp(),null!=s&&(this.originalName=vd(s),this.name=bd(this.originalName)),this.rank=t.length}}let Bp=0;class Up{constructor(e,t){this.callArgs=t,this.id=Bp++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)e.push(null!=t?t.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Vp=0;class Wp extends d.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Vp++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=Oh(e)+"_"+Mp(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=e.weights?e.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new kh("The layer has never been called "+`and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Th(`Asked to get ${t} at node ${e}, `+`but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Rh(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Rh(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ch(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Ch(`Layer ${this.name}`+" is not connected, no input to return.");return Rh(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Ch(`Layer ${this.name}`+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Ch(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Rh(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Lh(e),null==this.inputSpec||0===this.inputSpec.length)return;const t=Lh(this.inputSpec);if(e.length!==t.length)throw new Th(`Layer ${this.name} expects ${t.length} inputs, `+`but it received ${e.length} input tensors. `+`Input received: ${e}`);for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(null==i)continue;const s=r.rank;if(null!=i.ndim&&s!==i.ndim)throw new Th(`Input ${n} is incompatible with layer ${this.name}: `+`expected ndim=${i.ndim}, found ndim=${s}`);if(null!=i.maxNDim&&s>i.maxNDim)throw new Th(`Input ${n} is incompatible with layer ${this.name}`+`: expected max_ndim=${i.maxNDim}, found ndim=${s}`);if(null!=i.minNDim&&s<i.minNDim)throw new Th(`Input ${n} is incompatible with layer ${this.name}`+`: expected min_ndim=${i.minNDim}, found ndim=${s}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new Th(`Input ${n} is incompatible with layer ${this.name} `+`: expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const e=r.shape;for(const t in i.axes){const r=Number(t),s=i.axes[t],a=r>=0?e[r]:e[e.length+r];if(null!=s&&-1===[s,null].indexOf(a))throw new Th(`Input ${n} is incompatible with layer `+`${this.name}: expected axis ${r} of input shape to `+`have value ${s} but got shape ${e}.`)}}if(null!=i.shape)for(let e=0;e<i.shape.length;++e){const t=i.shape[e],s=r.shape[e];if(null!=t&&null!=s&&t!==s)throw new Th(`Input ${n} is incompatible with layer `+`${this.name}: expected shape=${i.shape}, `+`found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=Lh(e);let r=!0;for(const s of n)if(!(s instanceof $p)){r=!1;break}let i=!0;for(const s of n)if(s instanceof $p){i=!1;break}if(r===i)throw new Th("Arguments to apply() must be all SymbolicTensors or all Tensors");return yd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of Lh(e))t.push(n.shape);this.build(Rh(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);const i=Lh(r),s=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=Rh(s),null!=this.activityRegularizer)throw new Ah("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=Lh(e);const t=[];for(const n of e)t.push(n.shape);return Rh(t)}(e),r=this.computeOutputShape(n);let i;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new $p(s,n,this,Lh(e),t,this.name,r)):new $p(s,r,this,Lh(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new Ah("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+`${JSON.stringify(e)}) does not match that of the `+`batchInputShape (${JSON.stringify(this.batchInputShape)}) `+`of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+`(${JSON.stringify(e)}) does not `+`match the expectation of layer ${this.name}: `+`${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Ch(`The layer ${this.name} has never been called and thus has no `+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Ch(`The layer ${this.name} has multiple inbound nodes with different `+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new kh(`You tried to call countParams() on ${this.name}, `+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Lp(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Fp(e?this.trainableWeights:this.weights)}setWeights(e){ui(()=>{const t=this.weights;if(t.length!==e.length)throw new Th(`You called setWeights(weights) on layer "${this.name}" `+`with a weight list of length ${e.length}, `+`but the layer was expecting ${t.length} weights. `+`Provided weights: ${e}...`);if(0===t.length)return;const n=[],i=Fp(t);for(let s=0;s<i.length;++s){const a=i[s],o=t[s],u=e[s];if(!r.arraysEqual(a.shape,u.shape))throw new Th(`Layer weight shape ${a.shape} `+`not compatible with provided weight shape ${u.shape}`);n.push([o,u])}Pp(n)})}addWeight(e,t,n,r,i,s,a){if(-1!==this._addedWeightNames.indexOf(e))throw new Th(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=cp("zeros"));const o=r.apply(t,n),u=new Op(o,n,e,s,a);return o.dispose(),null!=i&&this.addLoss(()=>i.apply(u.read())),null==s&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=Lh(e),null!=this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.")})}return null}return t}addInboundNode(e,t,n,r,i,s,a=null){const o=Lh(e);t=Lh(t),n=Lh(n),r=Lh(r),i=Ip(i),s=Ip(s);const u=[],l=[],c=[];for(const h of o)u.push(h.sourceLayer),l.push(h.nodeIndex),c.push(h.tensorIndex);new Up({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:s},a);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been `+"built yet.");if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used `+"yet.");this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}class Hp extends Wp{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:Mp("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Th("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Th("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Th("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new $p(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Up({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Th("Cannot pass any input to an "+`InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function Gp(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Th("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new Hp({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}async function jp(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const s=e[i];if("number"!=typeof s){const e=s;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];li(r)}}function qp(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}var Kp;Hp.className="InputLayer",d.registerClass(Hp),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Kp||(Kp={}));class Xp{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Zp{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class Yp extends Xp{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"==typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const i=ui(()=>xi(this.totals[r],Ei(e,n)));this.totals[r]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?t[n]=this.totals[n]/this.seen:ui(()=>{const e=Ei(Si(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),ci(t[n])}))}}class Jp extends Xp{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const i in this.history){const r=this.history[i];for(let s=0;s<r.length;++s)"number"!=typeof r[s]&&(e.push(r[s].data()),t.push(i),n.push(s))}const r=await Promise.all(e);for(let i=0;i<r.length;++i)this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=r[i][0]}}class Qp extends Xp{constructor(e,t){if(super(),this.currentEpoch=0,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");r.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t){let n,i=r.now();return(...s)=>{const a=r.now();return a-i<t?n:(i=a,n=e(...s),n)}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await jp(n),r.push(this.yield(e,t,n))),r.push(Rl()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await jp(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await jp(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(Rl()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await jp(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await jp(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(Rl()):r.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await jp(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await jp(e),await this.trainEnd(e))}}function ef(e,t){return null==e&&(e={}),e instanceof Xp?[e]:Array.isArray(e)&&e[0]instanceof Xp?e:Lh(e).map(e=>new Qp(e,t))}class tf{constructor(){}static registerCallbackConstructor(e,t){r.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+`but got ${e}`),tf.checkForDuplicate(t),null==tf.constructors[e]&&(tf.constructors[e]=[]),tf.constructors[e].push(t)}static checkForDuplicate(e){for(const t in tf.constructors)tf.constructors[+t].forEach(t=>{if(t===e)throw new Th("Duplicate callback constructor.")})}static clear(){tf.constructors={}}static createCallbacks(e){const t=[];for(const n in tf.constructors){const r=+n;e>=r&&t.push(...tf.constructors[r])}return t.map(e=>new e)}}function nf(e,t,n,r,i,s,a,o,u){const l=new Jp,c=[new Yp,...tf.createCallbacks(t)];null!=e&&c.push(...e),c.push(l);const h=new Zp(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:t,doValidation:o,metrics:u}),{callbackList:h,history:l}}function rf(e,t={},n=!1){return $h(e,d.SerializationMap.getMap().classNameMap,t,"layer",n)}function sf(e,t){return ui(()=>{"float32"!==e.dtype&&(e=e.asType("float32"));const n=Oa(zd(e),t,!0),r=zi(n.shape,Eh()),i=Ci(qi(n,r));return Si(e,i)})}function af(e,t){return ui(()=>Qa(zd(Ui(t,e)),-1))}function of(e,t){return ui(()=>Qa(Wi(Ui(t,e)),-1))}function uf(e,t){return ui(()=>{const n=Ui(e,t),r=$s(Wi(e),Eh(),Number.MAX_VALUE),i=Wi(Si(n,r));return Ei(100,Qa(i,-1))})}function lf(e,t,n=!1){return ui(()=>{if(n)t=Jo(t);else{const e=Oa(t,t.shape.length-1,!0);t=Si(t,e)}return t=$s(t,Eh(),1-Eh()),Ia(Oa(Ei(e.toFloat(),Ma(t)),t.shape.length-1))})}function cf(e,t,n=!1){return ui(()=>{const r=ga(function(e){const t=[wd(e.shape)];return e.reshape(t)}(e)).toInt(),i=(t=$s(t,Eh(),1-Eh())).shape;return lf(pr(r,i[i.length-1]).reshape(i),t,n)})}function hf(e,t){return ui(()=>{let n;return n=$s(t,Eh(),1-Eh()),n=Ma(Si(n,Ui(1,n))),Qa(function(e,t){if(!r.arraysEqual(e.shape,t.shape))throw new Th("logits and labels must have the same shape, but got shapes "+`${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return ui(()=>{const n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())})}(e,n),-1)})}function df(e,t){return ui(()=>{const n=sf(e,-1),r=sf(t,-1),i=Ei(n,r);return Ia(Oa(i,-1))})}tf.constructors={};const pf={meanSquaredError:af,meanAbsoluteError:of,meanAbsolutePercentageError:uf,meanSquaredLogarithmicError:function(e,t){return ui(()=>{const n=$s(t,Eh(),Number.MAX_VALUE),r=Ma(xi(1,n)),i=$s(e,Eh(),Number.MAX_VALUE),s=Ma(xi(1,i));return Qa(zd(Ui(r,s)),-1)})},squaredHinge:function(e,t){return ui(()=>{const n=qi(0,Ui(1,Ei(e,t)));return Qa(zd(n),-1)})},hinge:function(e,t){return ui(()=>{const n=qi(0,Ui(1,Ei(e,t)));return Qa(n,-1)})},categoricalHinge:function(e,t){return ui(()=>{const n=Oa(Ei(e,t),-1),r=La(Ei(Ui(1,e),t),-1);return qi(0,xi(1,Ui(r,n)))})},logcosh:function(e,t){return ui(()=>{const n=Math.log(2),r=Ui(t,e),i=Ui(xi(r,Da(Ei(-2,r))),n);return Qa(i,-1)})},categoricalCrossentropy:lf,sparseCategoricalCrossentropy:cf,binaryCrossentropy:hf,kullbackLeiblerDivergence:function(e,t){return ui(()=>{const n=$s(e,Eh(),1),r=$s(t,Eh(),1);return Oa(Ei(e,Ma(Si(n,r))),-1)})},poisson:function(e,t){return ui(()=>{const n=Ma(xi(Eh(),t));return Qa(Ui(t,Ei(e,n)),-1)})},cosineProximity:df};function ff(e){if("string"==typeof e){if(e in pf)return pf[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. `+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Th(t)}return e}function mf(e,t){return ui(()=>{const n=Ei(.5,co(t)),r=Td(va(t,n),e.dtype);return Qa(sa(e,r),-1)})}function gf(e,t){return ui(()=>Td(sa(rs(e,-1),rs(t,-1)),"float32"))}function yf(e,t){return ui(()=>ja(e.equal(1),t.equal(1)).sum().cast("float32"))}function vf(e,t){return ui(()=>{const n=yf(e,t),r=function(e,t){return ui(()=>ja(e.equal(0),t.equal(1)).sum().cast("float32"))}(e,t),i=n.add(r);return aa(va(i,0),n.div(i),0).cast("float32")})}function bf(e,t){return hf(e,t)}function _f(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),sa(e,t).asType("float32")}const xf=lf,wf=cf,Sf={binaryAccuracy:mf,categoricalAccuracy:gf,precision:vf,categoricalCrossentropy:xf,sparseCategoricalCrossentropy:wf,mse:af,MSE:af,mae:of,MAE:of,mape:uf,MAPE:uf,cosine:df};function Ef(e){if("string"==typeof e&&e in Sf)return Sf[e];if("string"!=typeof e&&null!=e)return e;throw new Th(`Unknown metric ${e}`)}function Cf(e){if(Ih(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(const n of Object.keys(pf))if(pf[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Sf))if(Sf[n]===e){t=n;break}return void 0!==t?t:e.name}}function kf(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);for(const r of n){if("string"!=typeof r)return!1;if(!e(t[r]))return!1}return!0}if(Array.isArray(t)){for(const n of t)if(!e(n))return!1;return!0}return!1}{const e=typeof t;return"string"===e||"number"===e||"boolean"===e}}(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in `+`size (length=${n.length} when serialized). It is not `+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.")}}function Tf(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function Af(e,t,n){let r;try{r=JSON.stringify(e.outputShape)}catch(sR){r="multiple"}Tf([`${e.name} (${e.getClassName()})`,r,e.countParams().toString()],t,n)}function Mf(e,t,n,r){let i;try{i=JSON.stringify(e.outputShape)}catch(sR){i="multiple"}const s=[];for(const l of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(let e=0;e<l.inboundLayers.length;++e)s.push(`${l.inboundLayers[e].name}[${l.nodeIndices[e]}][${l.tensorIndices[e]}]`);const a=e.name,o=e.getClassName(),u=0===s.length?"":s[0];Tf([`${a} (${o})`,i,e.countParams().toString(),u],t,r);for(let l=1;l<s.length;++l)Tf(["","","",s[l]],t,r)}function Nf(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function If(e,t){if(null===e)return null;if("string"==typeof e)return Fh(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];Nf(t,i,r)?n.push(r):n.push(If(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{const e=Fh(n);t[e]=If(r,e)}}return t}}class Df{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Df)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Th(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return jn(t,e.dtype)}catch(sR){throw new Th(`The dtype of the feed (${t.dtype}) can not be cast to the dtype `+`of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof $p){if(null==this.id2Value[e.id])throw new Th(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new Th(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof $p){if(null==this.id2Value[e.id])throw new Th(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new Th(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&li(this.id2Mask)}}const Rf={},Lf={};function Of(e,t,n,i){const s=null!=n&&n.training,a=Array.isArray(e),o=a?e:[e],u=o.map(e=>e.name),l=[],c=t.names();for(const r of u)-1!==c.indexOf(r)?l.push(t.getValue(r)):l.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const h=u.join(",")+"|"+t.names().join(",");let d,p;if(null==Rf[h]){const e=function(e,t){r.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],i={};if(1===e.length){const r=Pf(e[0],t);n=r.sorted,i=r.recipientMap}else{const r=new Set;for(const s of e){const{sorted:e,recipientMap:a}=Pf(s,t);for(const t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(const t in a)null==i[t]&&(i[t]=new Set),a[t].forEach(e=>i[t].add(e))}}return{sorted:n,recipientCounts:Ff(i)}}(o,t);d=e.sorted,p=e.recipientCounts,Rf[h]=d,Lf[h]=p}d=Rf[h],p={},s||Object.assign(p,Lf[h]);const f=new Df(t);for(let r=0;r<d.length;++r){if(null!=i){const e=ai().numTensors;e>i.maxNumTensors&&(i.maxNumTensors=e),e<i.minNumTensors&&(i.minNumTensors=e)}const e=d[r],a=e.sourceLayer;if(a instanceof Hp)continue;const o=[],c=[],h=[];let m=!1;for(const n of e.inputs){const e=f.getValue(n),r=f.getMask(n);o.push(e),c.push(r),null!=r&&(m=!0),s||(p[n.name]--,0!==p[n.name]||t.hasKey(n)||-1!==u.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||h.push(e))}m&&((n=n||{}).mask=c[0]);const g=Lh(a.apply(o,n));let y=null;a.supportsMasking&&(y=a.computeMask(o,c));const v=zf(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){f.hasKey(b[t])||f.add(b[t],g[t],Array.isArray(y)?y[0]:y);const e=u.indexOf(b[t].name);-1!==e&&(l[e]=g[t])}s||li(h)}return f.disposeMasks(),a?l:l[0]}function Ff(e){const t={};for(const n in e)t[n]=e[n].size;return t}function Pf(e,t){const n=new Set,r=[],i={};for(const o of t.names())n.add(o);const s=[],a=[];for(s.push(e);s.length>0;){const e=s[s.length-1];if(n.has(e.name)){s.pop();continue}const t=a[a.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(s.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||s.push(t)}}return{sorted:r,recipientMap:i}}function zf(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}class $f extends Wp{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=Mp(e)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],this.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],Uh(this.inputs).length!==this.inputs.length)throw new Th("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+`${this.inputs.map(e=>e.name)}`);Uh(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+`${this.outputs.map(e=>e.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.nodeIndex,t=y.tensorIndex;this.outputLayers.push(y.sourceLayer),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(t)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;Ih(0===t,"input layer has >1 nodes"),Ih(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof Hp))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+`Received inputs: ${e.inputs}. `+`Input ${y} (0-based) originates `+`from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},i={},s={},a=[],o=(e,t,n,r,i,u)=>{null!=r&&null!=i&&null!=u||(r=e.sourceLayer,i=e.nodeIndex,u=e.tensorIndex);const l=r.inboundNodes[i];if(-1!==n.indexOf(l))throw new kh(`The tensor ${e.name} at layer "${r.name}" `+"is part of a cycle.");if(-1!==t.indexOf(l))return;this.containerNodes.add($f.nodeKey(r,i)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(l)&&n.push(l);const c=l.inboundLayers.length;for(let s=0;s<c;s++)o(l.inputTensors[s],t,n,l.inboundLayers[s],l.nodeIndices[s],l.tensorIndices[s]);for(t.push(l);n.indexOf(l)>=0;)n.splice(n.indexOf(l),1);a.push(l)},u=[],l=[];for(const y of this.outputs)o(y,u,l);const c=a.slice().reverse();for(const y of c){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];e=Math.max(e,null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id]),r[y.outboundLayer.id]=e,i[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const i=y.inboundLayers[r].inboundNodes[y.nodeIndices[r]];t[i.id]=Math.max(e+1,null==t[i.id]?0:t[i.id]),n[i.id]=i}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(i[y])}let p=Object.keys(d).map(e=>parseInt(e,10)).sort(Bh);this.layers=[];for(const y of p){const e=d[y];e.sort((e,t)=>{const n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof $f&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map(e=>parseInt(e,10)).sort(Bh);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new kh(`Graph disconnected: cannot obtain value for tensor ${n}`+` at layer "${t.name}". `+"The following previous layers were accessed without "+`issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map(e=>e.name);for(const y of g){const e=g.filter(e=>e===y).length;if(1!==e)throw new kh(`The name "${y}" is used ${e} times `+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Up({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Th("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;for(const s of this.layers)for(const e of s.weights){if(null!=n[e.originalName])throw new Th(`Duplicate weight name: ${e.originalName}`);n[e.originalName]=e,r++}const i=[];for(const s in e){let r=s;if(null==n[s]){const e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])i.push([n[r],e[s]]);else if(t)throw new Th(`Provided weight data has no target variable: ${s}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new Th(`${e.length} of ${r} weights are not set: `+`${e}`)}Pp(i)}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers 3.1.0",t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=function e(t,n){if(null==t)return null;if("string"==typeof t)return Oh(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const r=[],i=t.length;for(let s=0;s<i;++s){const i=t[s];Nf(n,s,i)?r.push(i):r.push(e(i,n))}return r}{const n={};for(const r of Object.keys(t)){const i=t[r];n[Oh(r)]="name"!==r&&"className"!==r||"string"!=typeof i?e(i,r):i}return n}}(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return ui(()=>{e=Lh(e);const n=new Df;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return Of(this.outputs,n,t)})}computeMask(e,t){return ui(()=>{let n;return e=Lh(e),n=null==t?Nh(null,e.length):Lh(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=Ip(e);if(t.length!==this.inputLayers.length)throw new Th(`Invalid inputShape argument ${e}: `+`model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let a=0;a<t.length;a++)n[this.inputLayers[a].name+"_0_0"]=t[a];const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(Bh);if(r.length>1)for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let a=0;a<t.inboundLayers.length;a++)r.push(n[`${t.inboundLayers[a].name}_${t.nodeIndices[a]}_${t.tensorIndices[a]}`]);const i=Ip(e.computeOutputShape(Rh(r))),s=e.inboundNodes.indexOf(t);for(let t=0;t<i.length;t++)n[`${e.name}_${s}_${t}`]=i[t]}}const i=[],s=[];for(let a=0;a<this.outputLayers.length;a++)s.push(`${this.outputLayers[a].name}_${this.outputLayersNodeIndices[a]}_${this.outputLayersTensorIndices[a]}`);for(let a=0;a<s.length;a++){const e=s[a];Ih(e in n),i.push(n[e])}return Rh(i)}runInternalGraph(e,t){null==t&&(t=Nh(null,e.length));const n={};for(let o=0;o<this.inputs.length;++o)n[this.inputs[o].id]=[e[o],t[o]];const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(Bh);for(const o of r){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,i=t.outputTensors,s=new Array;for(const t of r)t.id in n&&s.push(n[t.id]);if(s.length===r.length){let r,a,o,u,l={};if(null!=t.callArgs&&(l=t.callArgs),1===s.length){const[t,n]=s[0];null==l.mask&&(l.mask=n),o=Lh(e.call(t,l)),u=Lh(e.computeMask(t,n)),r=[t],a=[n]}else r=s.map(e=>e[0]),a=s.map(e=>e[1]),null==l.mask&&(l.mask=a),o=Lh(e.call(r,l)),u=Lh(e.computeMask(r,a));if(e.activityRegularizer)throw new Ah("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e)n[i[e].id]=[o[e],u[e]]}}}const i=[],s=[],a=[];for(const o of this.outputs){Ih(o.id in n,`Could not compute output ${o.name} : ${o.id}`);const[e,t]=n[o.id];a.push(e.shape),i.push(e),s.push(t)}return[i,s,a]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof $f?1:0;for(let e=0;e<r.inboundNodes.length;e++){const i=$f.nodeKey(r,e);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new Th(`Was asked to retrieve layer at index ${t}, but model only `+`has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new Th("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===e)return n;throw new Th(`No such layer: ${e}`)}calculateLosses(){return ui(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=$f.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const e=s.getClassName(),r=s.getConfig(),i=[];for(let n=0;n<s.inboundNodes.length;n++){const e=s.inboundNodes[n],r=$f.nodeKey(s,n);let a={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),a=e.callArgs}catch(sR){console.warn(`Layer ${s.name} was passed `+"non-serializable keyword arguments: "+`${e.callArgs}. They will not be included `+"in the serialized model (and thus will be missing at deserialization time)."),a={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],s=e.tensorIndices[r];let o=t[$f.nodeKey(i,e.nodeIndices[r])];null==o&&(o=0),n.push([i.name,o,s,a])}i.push(n)}}}const a={};a.name=s.name,a.className=e,a.config=r,a.inboundNodes=i,n.push(a)}e.layers=n;const r=[];for(let s=0;s<this.inputLayers.length;s++){const e=this.inputLayers[s],n=$f.nodeKey(e,this.inputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let i=t[n];null==i&&(i=0),r.push([e.name,i,this.inputLayersTensorIndices[s]])}e.inputLayers=r;const i=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],n=$f.nodeKey(e,this.outputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let r=t[n];null==r&&(r=0),i.push([e.name,r,this.outputLayersTensorIndices[s]])}return e.outputLayers=i,e}static fromConfig(e,t,n={},r=!1){const i={},s={};function a(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function o(e,t){const n=[];let r;for(const s of t){const o=s[0],u=s[1],l=s[2];if(r=null==s[3]?{}:s[3],!(o in i))return void a(e,t);const c=i[o];if(c.inboundNodes.length<=u)return void a(e,t);n.push(c.inboundNodes[u].outputTensors[l])}n.length>0&&e.apply(Rh(n),r)}function u(e){const n=e.name,s=rf(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(r),i[n]=s,e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new Th(`Corrupted configuration, expected array for nodeData: ${e}`);a(s,e)})}const l=t.name,c=t.layers;for(const m of c)u(m);for(;!Vh(s);)for(const e of c){const t=i[e.name];if(t.name in s){const e=s[t.name];delete s[t.name];for(const n of e)o(t,n)}}const h=[],d=[],p=t.inputLayers;for(const m of p){const e=m[0],t=m[1],n=m[2];Ih(e in i),h.push(i[e].inboundNodes[t].outputTensors[n])}const f=t.outputLayers;for(const m of f){const e=m[0],t=m[1],n=m[2];Ih(e in i),d.push(i[e].inboundNodes[t].outputTensors[n])}return new e({inputs:h,outputs:d,name:l})}get stateful(){if(this._stateful)throw new Th("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ui(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function Bf(e,t){return function(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided classWeight is an array of ${e.length} `+`element(s), but the model has ${r} outputs. `+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{n.push(t in e?e[t]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, `+"so classWeight must be either an array with "+`${r} elements or an object with ${t} keys. `+`Provided classWeight not understood: ${JSON.stringify(e)}`)}(e,t)}async function Uf(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=ui(()=>{if(1===e.shape.length)return e.clone();if(2===e.shape.length){if(e.shape[1]>1)return e.argMax(1);if(1===e.shape[1])return e.reshape([e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) `+"during handling of class weights. The size is expected to be >= 1.")}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during `+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await t.data());li(t);const i=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+`The class ${e} exists in the data but not in `+"classWeight");i.push(n[e])}),cu(i,"float32")}return null}function Vf(e,t){return Ei(e,t)}function Wf(e,t){let n,i;n=t.xs,i=t.ys,r.assert(null!=n&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+`${t}`);const s=Hf("input",e.inputNames,n),a=Hf("output",e.outputNames,i),o=s[0].shape[0];r.assert(s.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset `+`provides ${s.length} inputs.  (Expected input keys: `+`${JSON.stringify(e.inputNames)})`),r.assert(a.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset `+`provides ${a.length} outputs.  (Expected output keys: `+`${JSON.stringify(e.outputNames)})`);for(let u=0;u<s.length;u++)r.assert(s[u].shape[0]===o,()=>"Batch size mismatch: input "+`${e.inputNames[u]} has ${s[u].shape[0]}; `+`expected  ${o} based on input ${e.inputNames[0]}.`);for(let u=0;u<a.length;u++)r.assert(a[u].shape[0]===o,()=>"Batch size mismatch: output "+`${e.outputNames[u]} has ${a[u].shape[0]}; `+`expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:s,ys:a}}function Hf(e,t,n){if(n instanceof kt)return[n];if(Array.isArray(n))return r.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const r=[];for(const i of t){if(null==n[i])throw new Th("The feature data generated by the dataset lacks the required "+`${e} key '${i}'.`);r.push(n[i])}return r}}function Gf(e){return"function"==typeof e.iterator}function jf(e){r.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function qf(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>Md(e,t,n-t)):Md(e,t,n-t)}function Kf(e,t){return ui(()=>null==e?null:Array.isArray(e)?e.map(e=>Kf(e,t)):Pd(e,"int32"===t.dtype?t:t.toInt()))}function Xf(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function Zf(e){const t=[];e instanceof kt&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Ad(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Yf(e,t){if(null==e)return;const n=[];if(t instanceof kt)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const i in t)n.push(t[i].id);const r=[];if(e instanceof kt)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const i in e){const t=e[i];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function Jf(e){return Array.isArray(e)}function Qf(e){return!function(e){return e instanceof kt}(e)&&!Jf(e)}function em(e,t,n,r=!0,i=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(Jf(e)&&e.length>0)t=!0;else if(Qf(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Th(`Error when checking model ${i} expected no data, `+`but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let s;if(Qf(e)){e=e,s=[];for(const n of t){if(null==e[n])throw new Th(`No data provided for "${n}". Need data for each key in: `+`${t}`);s.push(e[n])}}else if(Jf(e)){if((e=e).length!==t.length)throw new Th(`Error when checking model ${i}: the Array of `+"Tensors that you are passing to your model is not the size the "+`model expected. Expected to see ${t.length} Tensor(s), but `+`instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new Th(`The model ${i} expects ${t.length} Tensor(s), `+`but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=Zf(s),null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=s[a];if(e.shape.length!==n[a].length)throw new Th(`Error when checking ${i}: expected ${t[a]} `+`to have ${n[a].length} dimension(s). but got array with `+`shape ${e.shape}`);for(let s=0;s<n[a].length;++s){if(0===s&&!r)continue;const o=e.shape[s],u=n[a][s];if(null!=u&&u>=0&&o!==u)throw new Th(`Error when checking ${i}: expected ${t[a]} `+`to have shape [${n[a]}], but got array with shape `+`[${e.shape}].`)}}return s}function tm(e,t,n,r=!0,i=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new Th(`Error when checking model ${i}: the Array of `+"Tensors that you are passing to your model is not the size the "+`the model expected. Expected to see ${t.length} Tensor(s),`+` but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new Th(`The model expects ${t.length} ${i} Tensors, `+"but only received one Tensor. Found: array with shape "+`${JSON.stringify(e.shape)}.`);s=[e]}if(null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=s[a];if(e.shape.length!==n[a].length)throw new Th(`Error when checking ${i}: expected ${t[a]} `+`to have ${n[a].length} dimension(s), but got array with `+`shape ${JSON.stringify(e.shape)}`);for(let s=0;s<n[a].length;++s){if(0===s&&!r)continue;const o=e.shape[s],u=n[a][s];if(null!=u&&u!==o)throw new Th(`Error when checking ${i}: expected `+`${t[a]} to have shape ${JSON.stringify(n[a])} but `+`got array with shape ${JSON.stringify(e.shape)}.`)}}}class nm extends $f{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new Th("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n,r=console.log){const i=function(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let e=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Output shape","Param #"];let a;if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!i){s.push("Receives inputs"),a=[];for(const t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),Tf(s,n,r),r("=".repeat(t));const o=e.layers;for(let c=0;c<o.length;++c)i?Af(o[c],n,r):Mf(o[c],n,a,r),r((c===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const u=function(e){let t;return t=Lp(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights),t}(e),l=Lp(e.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(t))}(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>Il.adagrad(.01),Adadelta:()=>Il.adadelta(1,.95,Eh()),Adam:()=>Il.adam(.001,.9,.999,Eh()),Adamax:()=>Il.adamax(.002,.9,.999,Eh(),0),RMSProp:()=>Il.rmsprop(.001,.9,0,Eh()),SGD:()=>Il.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Th(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Fi))throw new Th("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Th("When passing an Array as loss, it should have one entry per "+`model output. The model has ${this.outputs.length} output(s), `+`but you passed loss=${e.loss}.`);t=e.loss.map(e=>ff(e))}else{const n=ff(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Th(`Unknown entry in loss dictionary: "${t}". `+`Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume `+"this was done on purpose, and we will not be expecting data "+`to be passed to ${n} during training`),t.push(ff(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const e=this.internalOutputShapes[s];this.feedOutputNames.push(this.outputNames[s]),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[s])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],yd("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+`function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};yd("metric",()=>{for(let e=0;e<this.outputs.length;++e)-1===n.indexOf(e)&&(t=>{let n,r,s;for(const a of t){if("string"==typeof a&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(a)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===hf?-1!==["accuracy","acc"].indexOf(a)?r=mf:-1!==["crossentropy","ce"].indexOf(a)&&(r=bf):this.lossFunctions[e]===cf?-1!==["accuracy","acc"].indexOf(a)?r=_f:-1!==["crossentropy","ce"].indexOf(a)&&(r=wf):-1!==["accuracy","acc"].indexOf(a)?r=gf:-1!==["crossentropy","ce"].indexOf(a)&&(r=xf),-1!==["accuracy","acc"].indexOf(a)?i="acc":-1!==["crossentropy","ce"].indexOf(a)&&(i="ce"),s=r,n=""+i}else{const e=Ef(a);s=e,n=""+Cf(a)}let t;yd(n,()=>{t=s}),i(e,n,t)}})(r[e])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;jf(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const s=i[0].concat(i[1]);return this.makeTestFunction(),Rh(this.testLoop(this.testFunction,s,r,n.verbose,n.steps))}finally{Yf(i[0],e),Yf(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const i=null!=(n=n||{}).batches,s=e.testFunction;let a=[];if(n.verbose>0)throw new Ah("Verbose mode is not implemented yet.");r.assert(!i||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+`received ${JSON.stringify(n.batches)}`);const o="function"==typeof t.next?t:await t.iterator();let u=0,l=0;for(;!i||l<n.batches;){const t=await o.next();if(a=ui(()=>{if(t.value){const{xs:n,ys:r}=Wf(e,t.value),i=n.concat(r),o=ui(()=>s(i));if(li(i),0===l)for(let e=0;e<o.length;++e)a.push(Oi(0));const c=i[0].shape[0];for(let e=0;e<o.length;++e){const t=o[e],n=a[e];a[e]=ui(()=>xi(a[e],Ei(c,t))),l>0&&li(n)}li(o),u+=c,++l}return a}),t.done){i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+`batches (in this case, ${n.batches} batches). `+"You may need to use the repeat() function when building your dataset.");break}}for(let r=0;r<a.length;++r){const e=a[r];a[r]=Si(a[r],u),li(e)}return Rh(a)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let i;if(null!=n){if(i=null,null!=t)throw new Th(`If ${r} is set, batchSize must be null or undefined.`+`Got batchSize = ${t}`)}else{if(null==e)throw new Th("Either the input data should have a defined shape, or "+`${r} shoud be specified.`);i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Th("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),i=new Df;if(e instanceof kt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Th(`The number of inputs provided (${e.length}) `+"does not match the number of inputs of this model "+`(${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)i.add(this.inputs[t],e[t])}else for(const a of this.inputs){const t=e[a.name];if(null==t)throw new Th(`No value is provided for the model's input ${a.name}`);i.add(a,t)}const s=Of(r,i);return n?s:s[0]}retrieveSymbolicTensors(e){const t=Nh(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],s=i.map(e=>e.name);for(let r=0;r<e.length;++r){const a=s.indexOf(e[r]);if(-1!==a&&(t[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new Th("Cannot find SymbolicTensors for output name(s): "+`${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return ui(()=>{const r=this.checkNumSamples(e);if(n)throw new Ah("Verbose predictLoop() is not implemented yet.");const i=Xf(r,t),s=this.outputs.map(e=>[]);for(let t=0;t<i.length;++t)ui(()=>{const n=qf(e,i[t][0],i[t][1]),r=[];if(Array.isArray(n))for(let e=0;e<n.length;++e)r.push({key:this.inputs[e],value:n[e]});else r.push({key:this.inputs[0],value:n});const s=new Df(r);return Of(this.outputs,s)}).forEach((e,t)=>s[t].push(e));return Rh(s.map(e=>ks(e,0)))})}predict(e,t={}){const n=Zf(e);tm(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return jf(r),this.predictLoop(n,r)}finally{Yf(n,e)}}predictOnBatch(e){tm(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,i){if(null==this.optimizer_)throw new kh("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];s.push(this.feedLossFns[r]===cf?e.slice(0,e.length-1).concat([1]):e)}if(function(e,t,n){const i=Uh(e.map(e=>e.shape[0]));i.sort();const s=Uh(t.map(e=>e.shape[0]));if(s.sort(),i.length>1)throw new Th("All input Tensors (x) should have the same number of samples. Got array shapes: "+`${JSON.stringify(e.map(e=>e.shape))}`);if(s.length>1)throw new Th("All target Tensors (y) should have the same number of samples. Got array shapes: "+`${JSON.stringify(t.map(e=>e.shape))}`);if(i.length>0&&s.length>0&&!r.arraysEqual(i,s))throw new Th("Input Tensors should have the same number of samples as target "+`Tensors. Found ${i[0]} input sample(s) and ${s[0]} target `+"sample(s).")}(e=em(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=em(t,this.feedOutputNames,s,!1,"target")),function(e,t,n){const r=[af,hf,lf];for(let i=0;i<e.length;++i){const s=e[i],a=t[i],o=n[i];if(null!=a){if(a===lf&&1===s.shape[s.shape.length-1])throw new Th(`You are passing a target array of shape ${s.shape} while using `+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(a)){const e=s.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new Th(`A target Tensor with shape ${s.shape} was passed for an `+`output of shape ${o}, while using a loss function that `+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&e[0].shape[0]%i!=0)throw new Th("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+`${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,i=!0,s){const[a,o]=this.standardizeUserDataXY(e,t,i,s);if(null!=n)throw new Error("sample weight is not supported yet.");let u=null;if(null!=r){const e=Bf(r,this.outputNames);u=[];for(let t=0;t<e.length;++t)u.push(await Uf(o[t],null,e[t]))}return[a,o,u]}testLoop(e,t,n,r=0,i){return ui(()=>{const s=this.checkNumSamples(t,n,i,"steps"),a=[];if(r>0)throw new Ah("Verbose mode is not implemented yet.");if(null!=i)throw new Ah("steps mode in testLoop() is not implemented yet");{const r=Xf(s,n),i=cu(kd(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],o=r[n][1],u=Md(i,s,o-s),l=Kf(t,u),c=e(l);if(0===n)for(let e=0;e<c.length;++e)a.push(Oi(0));for(let e=0;e<c.length;++e)a[e]=xi(a[e],Ei(o-s,c[e]))}for(let e=0;e<a.length;++e)a[e]=Si(a[e],s)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;Dh(e,r)>1&&(i+=`_${Dh(e.slice(0,n),r)}`),t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],a=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const a=new Df(e),o=Of(this.outputs,a,{training:!0});let u;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],o[n]);null!=i[n]&&(e=Vf(e,i[n]));const s=Qa(e);t.push(s),u=0===n?e:xi(u,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][1];e=Qa((0,this.metricsTensors[n][0])(r[t],o[t]))}ci(e),s.push(e)}return u=Qa(u),this.calculateLosses().forEach(e=>{u=xi(u,e)}),u},!0,a)].concat(s)}}makeTestFunction(){this.testFunction=e=>ui(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:r[e]});const a=new Df(s),o=Of(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){const r=Qa((0,this.lossFunctions[e])(i[e],o[e]));n=0===e?r:xi(n,r),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][1],r=Qa((0,this.metricsTensors[e][0])(i[n],o[n]));t.push(r)}return t})}async fit(e,t,n={}){return async function(e,t,n,i={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let s,a,o,u,l,c,h;e.isTraining=!0;try{const d=null==i.batchSize?32:i.batchSize;jf(d);const p=!1,f=await e.standardizeUserData(t,n,i.sampleWeight,i.classWeight,p,d);s=f[0],a=f[1],h=f[2];let m,g=!1;if(null!=i.validationData&&i.validationData.length>0){if(g=!0,2!==i.validationData.length)throw 3===i.validationData.length?new Ah("validationData including sample weights is not supported yet."):new Th("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+`${i.validationData} is invalid.`);o=i.validationData[0],u=i.validationData[1];const t=!0,n=await e.standardizeUserData(o,u,null,null,t,d);l=n[0],c=n[1],m=l.concat(c)}else if(null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1){g=!0;const e=Math.floor(s[0].shape[0]*(1-i.validationSplit)),t=s[0].shape[0];l=qf(s,e,t),s=qf(s,0,e),c=qf(a,e,t),a=qf(a,0,e),m=l.concat(c)}else null!=i.validationSteps&&(g=!0);const y=s.concat(a).concat(h);e.checkTrainableWeightsConsistency();const v=e.makeTrainFunction(),b=e.getDedupedMetricsNames();let _,x;g?(e.makeTestFunction(),_=e.testFunction,x=b.slice().concat(b.map(e=>"val_"+e))):(_=null,m=[],x=b.slice());const w=ef(i.callbacks,i.yieldEvery);return await async function(e,t,n,i,s,a,o,u,l,c,h,d,p,f,m){null==s&&(s=32),null==a&&(a=1),null==h&&(h=!0),null==p&&(p=0);let g=!1;null!=l&&null!=c&&(g=!0);const y=e.checkNumSamples(n,s,null,"steps_per_epoch");let v;null!=y&&(v=kd(0,y)),null==o&&(o=1);const{callbackList:b,history:_}=nf(u,o,a,p,y,null,s,g,d);b.setModel(e),e.history=_,await b.onTrainBegin(),e.stopTraining_=!1;for(let x=p;x<a;++x){await b.onEpochBegin(x);const a={};{if("batch"===h)throw new Ah("batch shuffling is not implemneted yet");h&&r.shuffle(v);const o=cu(v),u=Xf(y,s);for(let r=0;r<u.length;++r){const h={};if(await b.onBatchBegin(r,h),ui(()=>{const d=u[r][0],p=u[r][1],f=Md(o,d,p-d);h.batch=r,h.size=p-d;const m=Kf(n,f),y=t(m);for(let e=0;e<i.length;++e){const t=y[e];h[i[e]]=t,ci(t)}if(r===u.length-1&&g){const t=e.testLoop(l,c,s);for(let e=0;e<i.length;++e){const n=i[e],r=t[e];ci(r),a["val_"+n]=r}}}),await b.onBatchEnd(r,h),qp(h),e.stopTraining_)break}o.dispose()}if(await b.onEpochEnd(x,a),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}(e,v,y,b,d,i.epochs,i.verbose,w,_,m,i.shuffle,x,i.initialEpoch)}finally{e.isTraining=!1,Yf(s,t),Yf(a,n),Yf(l,o),Yf(c,u),null!=h&&li(h)}}(this,e,t,n)}async fitDataset(e,t){return async function(e,t,n){const i=null!=n.batchesPerEpoch;if(r.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+`integer, but got ${n.epochs}`),r.assert(!i||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+`positive integer if specified, but got ${n.batchesPerEpoch}`),r.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const s=null!=n.validationData;let a,o;if(s)if(Gf(n.validationData))r.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+`but got ${n.validationBatches}`);else{const e=function(e){if(3===e.length)throw new Ah("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,o=e.ys}const u=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=s?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const h=ef(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:f}=nf(h,d,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,s,c);p.setModel(e),e.history=f,await p.onTrainBegin(),e.stopTraining_=!1;let m=null==n.initialEpoch?0:n.initialEpoch,g=await t.iterator();for(;m<n.epochs;){const r={};await p.onEpochBegin(m);let c=0,h=0;for(i||(g=await t.iterator());!i||c<n.batchesPerEpoch;){const t=await g.next();if(i&&t.done){console.warn("You provided `batchesPerEpoch` as "+`${n.batchesPerEpoch}, `+"but your dataset iterator ran out of data after "+`${c} batches; `+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+`${n.batchesPerEpoch*n.epochs} batches). `+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=Wf(e,t.value),s={};s.batch=h,s.size=r[0].shape[0],await p.onBatchBegin(h,s);const a=[];if(null!=n.classWeight){const t=Bf(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await Uf(i[e],null,t[e]))}const o=r.concat(i).concat(a),d=u(o);li(o);for(let e=0;e<l.length;++e){const t=d[e];s[l[e]]=t,ci(t)}await p.onBatchEnd(h,s),qp(s),h++,c++}if(i?c>=n.batchesPerEpoch:t.done){if(s){let t;t=Gf(n.validationData)?Lh(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):Lh(e.evaluate(a,o,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)r[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(m,r),m++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],s=this.makeTrainFunction()(r.concat(i)),a=[];for(const o of s){const e=await o.data();a.push(e[0])}return li(s),Rh(a)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let s=0;s<r.length;++s)n&&!r[s].trainable||t.push({name:r[s].originalName,tensor:i[s]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=ai().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-ai().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=Oh(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>Oh(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Oh(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Oh(Cf(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Oh(Cf(e)));{const e={};for(const t in this.metrics)e[t]=Oh(Cf(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=rf(If(e.optimizer_config));let n,r;if("string"==typeof e.loss)n=Fh(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>Fh(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=Fh(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>Fh(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=Fh(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"==typeof e){const t=a.getSaveHandlers(e);if(0===t.length)throw new Th(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Th(`Found more than one (${t.length}) save handlers for `+`URL '${e}'`);e=t[0]}if(null==e.save)throw new Th("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await a.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v3.1.0",convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:i}=await a.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...i),n.data=a.concatenateArrayBuffers([n.data,t])}return null!=this.userDefinedMetadata&&(kf(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){kf(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}nm.className="Model",d.registerClass(nm);class rm extends nm{}async function im(e,t){"modelTopology"in e||(e={modelTopology:e});let n=(e=e).modelTopology;null!=n.model_config&&(n=n.model_config);const r=rf(If(n),t);if(null!=e.weightsManifest){const t=await a.loadWeights(e.weightsManifest,e.pathPrefix,r.weights.map(e=>e.originalName)),n={};for(const e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),li(t)}return r}rm.className="Functional",d.registerClass(rm);class sm extends nm{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:Mp("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new Th("Negative dimension size caused by adding layer "+`${e.name} with input shape [`+`${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof sm||e instanceof nm;let n;if(t){if(n=e,1!==n.outputs.length)throw new Th("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Th("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Th("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=Gp({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new Th("A layer added to a Sequential model must not already be "+`connected somewhere else. LayersModel received layer ${e.name} `+`which has ${e.inboundNodes.length} pre-existing inbound `+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Th("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];{const t=n.inboundNodes[r];if(0===t.inboundLayers.length)return t.inputTensors;{const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=e(t.inputTensors[r],t.inboundLayers[r],t.nodeIndices[r]);for(const e of i)-1===n.indexOf(e)&&n.push(e)}return n}}}(this.outputs[0])}this.inboundNodes=[],new Up({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Nh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(Rp(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new nm({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new kh("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new kh("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new kh("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new kh("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},i=!1){let s,a={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Th("Legacy serialization format not supported yet.");s=t}else r.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=t.layers,delete t.layers,a=t;const o=new e(a);if(!(o instanceof sm))throw new Ah(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const r of s){const e=rf(r,void 0,i);i&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new Th("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Th("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}function am(e){return new nm(e)}function om(e){return new sm(e)}function um(e,t){return null==t&&(t={}),async function(e,t){if(null==t&&(t={}),"string"==typeof e){const n=a.getLoadHandlers(e,t);if(0===n.length)n.push(a.browserHTTPRequest(e,t));else if(n.length>1)throw new Th(`Found more than one (${n.length}) load handlers for `+`URL '${e}'`);e=n[0]}return async function(e,t,n){if(null==n&&(n={}),null==e.load)throw new Th("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await e.load();let i=r.modelTopology;null!=i.model_config&&(i=i.model_config);const s=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&s,u=rf(If(i),void 0,o),l=r.trainingConfig;if(null!=l&&u.loadTrainingConfig(l),null!=r.userDefinedMetadata&&u.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new Th("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=a.decodeWeights(e,t),r={},i=[];return t.forEach(e=>{"optimizer"===e.group?i.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs);u.loadWeights(e,s),null!=u.optimizer&&t.length>0&&await u.optimizer.setWeights(t),li(e),li(t.map(e=>e.tensor))}return u}(e,0,t)}(e,t)}function lm(e){return Gp(e)}function cm(e,t){tf.registerCallbackConstructor(e,t)}sm.className="Sequential",d.registerClass(sm);class hm extends d.Serializable{getConfig(){return{}}}class dm extends hm{apply(e,t=1){return function(e,t=1){if(1!==t)throw new Ah(`Support for alpha values other than 1 (${t}) is not implemented `+"yet.");return la(e)}(e,t)}}dm.className="elu",d.registerClass(dm);class pm extends hm{apply(e){return Vo(e)}}pm.className="selu",d.registerClass(pm);class fm extends hm{apply(e){return Ro(e)}}fm.className="relu",d.registerClass(fm);class mm extends hm{apply(e){return ui(()=>to(6,Ro(e)))}}mm.className="relu6",d.registerClass(mm);class gm extends hm{apply(e){return e}}gm.className="linear",d.registerClass(gm);class ym extends hm{apply(e){return Ts(e)}}ym.className="sigmoid",d.registerClass(ym);class vm extends hm{apply(e){return function(e){return ui(()=>{const t=xi(.5,Ei(.2,e));return $s(t,0,1)})}(e)}}vm.className="hardSigmoid",d.registerClass(vm);class bm extends hm{apply(e){return Da(e)}}bm.className="softplus",d.registerClass(bm);class _m extends hm{apply(e){return function(e){return ui(()=>Si(e,Wi(e).add(1)))}(e)}}_m.className="softsign",d.registerClass(_m);class xm extends hm{apply(e){return Ms(e)}}xm.className="tanh",d.registerClass(xm);class wm extends hm{apply(e,t=-1){return Jo(e,t)}}wm.className="softmax",d.registerClass(wm);class Sm extends hm{apply(e,t=-1){return Fa(e,t)}}Sm.className="logSoftmax",d.registerClass(Sm);class Em extends hm{apply(e,t=1){return ui(()=>Ts(e.mul(t)).mul(e))}}function Cm(e){return e.getClassName()}function km(e,t={}){return $h(e,d.SerializationMap.getMap().classNameMap,t,"activation")}function Tm(e){if(null==e)return km({className:"linear",config:{}});if("string"==typeof e){const t={};return t.className=e,t.config={},km(t)}return e instanceof hm?e:km(e)}function Am(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+`object, but received: ${e}`)}Em.className="swish",d.registerClass(Em);class Mm extends d.Serializable{}class Nm extends Mm{constructor(e){super(),Am(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return ui(()=>{let t=uo([1]);return this.hasL1&&(t=xi(t,Oa(Ei(this.l1,Wi(e))))),this.hasL2&&(t=xi(t,Oa(Ei(this.l2,zd(e))))),t.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Nm.className="L1L2",d.registerClass(Nm);const Im={l1l2:"L1L2"};function Dm(e){return zh(e)}function Rm(e,t={}){return $h(e,d.SerializationMap.getMap().classNameMap,t,"regularizer")}function Lm(e){return null==e?null:"string"==typeof e?Rm({className:e in Im?Im[e]:e,config:{}}):e instanceof Mm?e:Rm(e)}class Om extends Wp{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Dp(e);let n=Ro(e);return null!=this.maxValue&&(n=$s(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}Om.className="ReLU",d.registerClass(Om);class Fm extends Wp{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Dp(e);return Ea(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}Fm.className="LeakyReLU",d.registerClass(Fm);class Pm extends Wp{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=cp(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Lm(e.alphaRegularizer),this.alphaConstraint=nd(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new Th("Expected sharedAxes to be a number or an array of numbers, "+`but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=Rp(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new zp({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Dp(e),_o(e,this.alpha.read())}getConfig(){const e={alphaInitializer:lp(this.alphaInitializer),alphaRegularizer:Dm(this.alphaRegularizer),alphaConstraint:ed(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}Pm.className="PReLU",d.registerClass(Pm);class zm extends Wp{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new Ah(`Non-default alpha value (${e.alpha}) is not supported by the `+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Dp(e);return la(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}zm.className="ELU",d.registerClass(zm);class $m extends Wp{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=Dp(e);return n.mul(Td(n.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}$m.className="ThresholdedReLU",d.registerClass($m);class Bm extends Wp{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new wm).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const n=Dp(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Um(e,t,n){if("number"==typeof e)return Nh(e,t);if(e.length!==t)throw new Th(`The ${n} argument must be an integer or tuple of ${t} integers.`+` Received: ${e.length} elements.`);for(let i=0;i<t;++i){const s=e[i];if((r=s)!==parseInt(r.toString(),10))throw new Th(`The ${n} argument must be an integer or tuple of ${t}`+` integers. Received: ${JSON.stringify(e)} including a`+` non-integer number ${s}`)}return e;var r}function Vm(e,t,n,r,i=1){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((s+r-1)/r)}function Wm(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Cd([n-t,0]);else{if("same"!==r)throw new Th(`Unsupport padding mode: ${r}.`);e*=t}return e}function Hm(e,t){return ui(()=>(pd(t),"channelsFirst"===t?fr(e,[0,2,3,1]):e))}function Gm(e,t){return ui(()=>(pd(t),"channelsFirst"===t?fr(e,[0,2,3,4,1]):e))}function jm(e,t,n,r=[1,1],i="valid",s,a,o=null){return ui(()=>{if(null==s&&(s="channelsLast"),pd(s),3!==e.rank&&4!==e.rank)throw new Th("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+`but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new Th("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+`but received ${e.rank}.`);let u=Hm(e,s);if("causal"===i)throw new Ah("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=f.conv2d({x:u,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===s&&(u=fr(u,[0,3,1,2])),u})}Bm.className="Softmax",d.registerClass(Bm);class qm extends Wp{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",qm.verifyArgs(t),this.rank=e,Gh(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Ah(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is `+"not implemented yet.");if(this.kernelSize=Um(t.kernelSize,e,"kernelSize"),this.strides=Um(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,fd(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,pd(this.dataFormat),this.activation=Tm(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=cp(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=nd(t.biasConstraint),this.biasRegularizer=Lm(t.biasRegularizer),this.activityRegularizer=Lm(t.activityRegularizer),this.dilationRate=Um(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Th("dilationRate must be a number or an array of a single number for 1D convolution, but received "+`${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Th("dilationRate must be a number or array of two numbers for 2D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Th("dilationRate must be a number or array of three numbers for 3D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(Ih("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Hh(e.kernelSize,"number",1,3))throw new Th("BaseConv expects config.kernelSize to be number or number[] with "+`length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Cm(this.activation),useBias:this.useBias,biasInitializer:lp(this.biasInitializer),biasRegularizer:Dm(this.biasRegularizer),activityRegularizer:Dm(this.activityRegularizer),biasConstraint:ed(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Km extends qm{constructor(e,t){super(e,t),this.kernel=null,Km.verifyArgs(t),this.filters=t.filters,Gh(this.filters,"filters"),this.kernelInitializer=cp(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=nd(t.kernelConstraint),this.kernelRegularizer=Lm(t.kernelRegularizer)}build(e){e=Rp(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Th("The channel dimension of the input should be defined. "+`Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return ui(()=>{let t;e=Dp(e);const n=null==this.bias?null:this.bias.read(),r=jh(this.activation.getClassName());if(null!=r&&2===this.rank)t=jm(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n,r=1,i="valid",s,a=1){return ui(()=>{if(null==s&&(s="channelsLast"),pd(s),3!==e.shape.length)throw new Th("The input of a conv1dWithBias operation should be 3, but is "+`${e.shape.length} instead.`);if(3!==t.shape.length)throw new Th("The kernel for a conv1dWithBias operation should be 3, but is "+`${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new Th("The bias for a conv1dWithBias operation should be 1, but is "+`${t.shape.length} instead`);if("channelsFirst"===s&&(e=fr(e,[0,2,1])),"causal"===i)throw new Ah("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Gs(e,t,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(o=Bd(o,n)),o})}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=jm(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Ah("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,r=[1,1,1],i="valid",s,a){return ui(()=>{if(null==s&&(s="channelsLast"),pd(s),4!==e.rank&&5!==e.rank)throw new Th("conv3dWithBias expects input to be of rank 4 or 5, but received "+`${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new Th("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+`${e.rank}.`);let o=Gm(e,s);if("causal"===i)throw new Ah("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Ks(o,t,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(o=Bd(o,n)),"channelsFirst"===s&&(o=fr(o,[0,4,1,2,3])),o})}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=Rp(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){const e=Vm(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:lp(this.kernelInitializer),kernelRegularizer:Dm(this.kernelRegularizer),kernelConstraint:ed(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new Th("Convolution layer expected config.filters to be a 'number' > 0 "+`but got ${JSON.stringify(e.filters)}`)}}class Xm extends Km{constructor(e){super(2,e),Xm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Hh(e.kernelSize,"number",1,2))throw new Th("Conv2D expects config.kernelSize to be number or number[] with "+`length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Xm.className="Conv2D",d.registerClass(Xm);class Zm extends Km{constructor(e){super(3,e),Zm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Th("Conv3D expects config.kernelSize to be number or"+` [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Zm.className="Conv3D",d.registerClass(Zm);class Ym extends Xm{constructor(e){if(super(e),this.inputSpec=[new zp({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Th("Conv2DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=Rp(e)).length)throw new Th("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Th("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new zp({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return ui(()=>{let t=Dp(e);if(4!==t.shape.length)throw new Th("Conv2DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${t.shape.length}`);const n=t.shape;let r,i;"channelsFirst"===this.dataFormat?(r=2,i=3):(r=1,i=2);const s=n[i],a=this.kernelSize[1],o=this.strides[1],u=[n[0],Wm(n[r],this.strides[0],this.kernelSize[0],this.padding),Wm(s,o,a,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=fr(t,[0,2,3,1]));let l=qs(t,this.kernel.read(),u,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(l=fr(l,[0,3,1,2])),null!=this.bias&&(l=Bd(l,this.bias.read(),this.dataFormat)),null!=this.activation&&(l=this.activation.apply(l)),l})}computeOutputShape(e){const t=(e=Rp(e)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const s=this.kernelSize[0],a=this.kernelSize[1],o=this.strides[0],u=this.strides[1];return t[n]=this.filters,t[r]=Wm(t[r],o,s,this.padding),t[i]=Wm(t[i],u,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Ym.className="Conv2DTranspose",d.registerClass(Ym);class Jm extends Km{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Th("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Th("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Th(`SeparableConv${this.rank}D supports only padding modes: `+`'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=cp(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Lm(t.depthwiseRegularizer),this.depthwiseConstraint=nd(t.depthwiseConstraint),this.pointwiseInitializer=cp(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Lm(t.pointwiseRegularizer),this.pointwiseConstraint=nd(t.pointwiseConstraint)}build(e){if((e=Rp(e)).length<this.rank+2)throw new Th(`Inputs to SeparableConv${this.rank}D should have rank `+`${this.rank+2}, but received input shape: `+`${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Th("The channel dimension of the inputs should be defined, "+`but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new zp({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return ui(()=>{let t;if(e=Dp(e),1===this.rank)throw new Ah("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=fr(e,[0,2,3,1])),t=Wo(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=Bd(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=fr(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=lp(this.depthwiseInitializer),e.pointwiseInitializer=lp(this.pointwiseInitializer),e.depthwiseRegularizer=Dm(this.depthwiseRegularizer),e.pointwiseRegularizer=Dm(this.pointwiseRegularizer),e.depthwiseConstraint=ed(this.depthwiseConstraint),e.pointwiseConstraint=ed(this.pointwiseConstraint),e}}Jm.className="SeparableConv";class Qm extends Jm{constructor(e){super(2,e)}}Qm.className="SeparableConv2D",d.registerClass(Qm);class eg extends Km{constructor(e){super(1,e),eg.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Hh(e.kernelSize,"number",1,1))throw new Th("Conv1D expects config.kernelSize to be number or number[] with "+`length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}eg.className="Conv1D",d.registerClass(eg);class tg extends Wp{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return ui(()=>{if(e=Dp(e),"channelsLast"===this.dataFormat){const t=Id(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Id(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=Id(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Id(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}tg.className="Cropping2D",d.registerClass(tg);class ng extends Wp{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,pd(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,Wh(ud,"InterpolationFormat",this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,t){return ui(()=>{let t=Dp(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=fr(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r]);return fr(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?t.resizeNearestNeighbor([e,r]):t.resizeBilinear([e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}ng.className="UpSampling2D",d.registerClass(ng);class rg extends qm{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=cp(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=nd(e.depthwiseConstraint),this.depthwiseRegularizer=Lm(e.depthwiseRegularizer)}build(e){if((e=Rp(e)).length<4)throw new Th("Inputs to DepthwiseConv2D should have rank 4. "+`Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Th("The channel dimension of the inputs to DepthwiseConv2D should "+`be defined, but is not (${e[t]}).`);const n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return ui(()=>{let t=function(e,t,n=[1,1],r="valid",i,s){return ui(()=>{null==i&&(i="channelsLast"),pd(i);let a=Hm(e,i);if(4!==e.rank)throw new Th("Input for depthwiseConv2d is required to be 4-D, but is instead "+`${e.rank}-D`);if(4!==t.rank)throw new Th("depthwiseKernel is required to be 4-D, but is instead "+`${t.rank}-D`);return a=na(a,t,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===i&&(a=fr(a,[0,3,1,2])),a})}(e=Dp(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=Bd(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=Rp(e);const t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=Vm("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),i=Vm(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,i]:[e[0],r,i,n]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=lp(this.depthwiseInitializer),e.depthwiseRegularizer=Dm(this.depthwiseRegularizer),e.depthwiseConstraint=ed(this.depthwiseRegularizer),e}}function ig(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Th("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function sg(e,t,n,r=!1,i,s,a=!1,o=!1){return ui(()=>{const u=t.shape.length;if(u<3)throw new Th(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(kd(2,u));if(t=fr(t,l),null!=s)throw new Ah("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=i.asType("bool").asType("float32")).rank===u-1&&(i=da(i,-1)),i=fr(i,l)),r&&(t=Oo(t,0),null!=i&&(i=Oo(i,0)));const c=[];let h,d=n;const p=t.shape[0],f=bu(t);let m,g;null!=i&&(m=bu(i));for(let t=0;t<p;++t){const n=f[t],r=ui(()=>e(n,d));if(null==i)h=r[0],d=r[1];else{const e=ui(()=>{const e=m[t],n=co(e).sub(e);return{output:r[0].mul(e).add(d[0].mul(n)),newStates:d.map((t,i)=>r[1][i].mul(e).add(t.mul(n)))}});h=e.output,d=e.newStates}o&&c.push(h)}return o&&(g=au(c,1)),[h,g,d]})}rg.className="DepthwiseConv2D",d.registerClass(rg);class ag extends Wp{constructor(e){let t;if(super(e),null==e.cell)throw new Th("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new fg({cells:e.cell}):e.cell,null==t.stateSize)throw new Th("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new zp({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?kd(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null):this.states_}setStates(e){this.states_=e}computeOutputShape(e){Np(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return ui(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new Ah("Constants support is not implemented in RNN yet.");Np(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new zp({shape:[t,null,...n]});const i=[e[0]].concat(e.slice(2));let s;if(this.cell.build(i),s=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map(e=>e.shape[e.shape.length-1]),s))throw new Th("An initialState was passed that is not compatible with "+`cell.stateSize. Received stateSpec=${this.stateSpec}; `+`However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(e=>new zp({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){ui(()=>{if(!this.stateful)throw new Ch("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new Th("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>uo([n,e])):[uo([n,this.cell.stateSize])];else if(null==e)li(this.states_),null!=this.keptStates&&(li(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>uo([n,e])):this.states_[0]=uo([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Th(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):li(this.states_);for(let t=0;t<this.states_.length;++t){const i=e[t],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,s];if(!r.arraysEqual(i.shape,a))throw new Th(`State ${t} is incompatible with layer ${this.name}: `+`expected shape=${a}, received shape=${i.shape}`);this.states_[t]=i}}this.states_=this.states_.map(e=>ci(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=ig(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let s=[],a=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new zp({shape:e.shape}));a=a.concat(this.stateSpec)}if(null!=r&&(t.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof $p){const n=[e].concat(s),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=i,o}return super.apply(e,t)}call(e,t){return ui(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let i=null==t?null:t.initialState;e=Dp(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new Th(`RNN Layer has ${s} state(s) but was passed `+`${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},o=sg((e,t)=>{const n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]},e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),u=o[0],l=o[1],c=o[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?l:u;return this.returnState?[h].concat(c):h})}getInitialState(e){return ui(()=>{let t=uo(e.shape);return t=Oa(t,[1,2]),t=Ad(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?Ld(t,[1,e]):t):this.cell.stateSize>1?[Ld(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===ag.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){const r=rf(t.cell,n);return new e(Object.assign(t,{cell:r}))}}ag.className="RNN",d.registerClass(ag);class og extends Wp{}class ug extends og{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Gh(this.units,"units"),this.activation=Tm(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=cp(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cp(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cp(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Lm(e.kernelRegularizer),this.recurrentRegularizer=Lm(e.recurrentRegularizer),this.biasRegularizer=Lm(e.biasRegularizer),this.kernelConstraint=nd(e.kernelConstraint),this.recurrentConstraint=nd(e.recurrentConstraint),this.biasConstraint=nd(e.biasConstraint),this.dropout=Ed([1,Cd([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ed([1,Cd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Rp(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return ui(()=>{if(2!==(e=e).length)throw new Th(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mg({ones:()=>co(e),rate:this.dropout,training:r})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mg({ones:()=>co(n),rate:this.recurrentDropout,training:r}));const s=this.dropoutMask,a=this.recurrentDropoutMask;i=Fd(null!=s?Ei(e,s):e,this.kernel.read()),null!=this.bias&&(i=Bd(i,this.bias.read())),null!=a&&(n=Ei(n,a));let o=xi(i,Fd(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Cm(this.activation),useBias:this.useBias,kernelInitializer:lp(this.kernelInitializer),recurrentInitializer:lp(this.recurrentInitializer),biasInitializer:lp(this.biasInitializer),kernelRegularizer:Dm(this.kernelRegularizer),recurrentRegularizer:Dm(this.recurrentRegularizer),biasRegularizer:Dm(this.biasRegularizer),activityRegularizer:Dm(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}ug.className="SimpleRNNCell",d.registerClass(ug);class lg extends ag{constructor(e){e.cell=new ug(e),super(e)}call(e,t){return ui(()=>(null!=this.cell.dropoutMask&&(li(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(li(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return new e(t)}}lg.className="SimpleRNN",d.registerClass(lg);class cg extends og{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Th("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Gh(this.units,"units"),this.activation=Tm(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Tm(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=cp(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cp(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cp(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Lm(e.kernelRegularizer),this.recurrentRegularizer=Lm(e.recurrentRegularizer),this.biasRegularizer=Lm(e.biasRegularizer),this.kernelConstraint=nd(e.kernelConstraint),this.recurrentConstraint=nd(e.recurrentConstraint),this.biasConstraint=nd(e.biasConstraint),this.dropout=Ed([1,Cd([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ed([1,Cd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Rp(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,t){return ui(()=>{if(2!==(e=e).length)throw new Th("GRUCell expects 2 input Tensors (inputs, h, c), got "+`${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mg({ones:()=>co(e),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mg({ones:()=>co(r),rate:this.recurrentDropout,training:n,count:3}));const i=this.recurrentDropoutMask;let s,a,o;0<this.dropout&&this.dropout<1&&(e=Ei(e,this.dropoutMask[0]));let u=Fd(e,this.kernel.read());this.useBias&&(u=Bd(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ei(r,i[0]));const l=this.recurrentKernel.read(),[c,h]=nu(l,[2*this.units,this.units],l.rank-1),d=Fd(r,c),[p,f,m]=nu(u,3,u.rank-1),[g,y]=nu(d,2,d.rank-1);s=this.recurrentActivation.apply(xi(p,g)),a=this.recurrentActivation.apply(xi(f,y));const v=Fd(Ei(a,r),h);o=this.activation.apply(xi(m,v));const b=xi(Ei(s,r),Ei(xi(1,Ia(s)),o));return[b,b]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Cm(this.activation),recurrentActivation:Cm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:lp(this.kernelInitializer),recurrentInitializer:lp(this.recurrentInitializer),biasInitializer:lp(this.biasInitializer),kernelRegularizer:Dm(this.kernelRegularizer),recurrentRegularizer:Dm(this.recurrentRegularizer),biasRegularizer:Dm(this.biasRegularizer),activityRegularizer:Dm(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}cg.className="GRUCell",d.registerClass(cg);class hg extends ag{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new cg(e),super(e)}call(e,t){return ui(()=>(null!=this.cell.dropoutMask&&(li(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(li(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}hg.className="GRU",d.registerClass(hg);class dg extends og{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Gh(this.units,"units"),this.activation=Tm(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Tm(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=cp(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cp(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cp(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Lm(e.kernelRegularizer),this.recurrentRegularizer=Lm(e.recurrentRegularizer),this.biasRegularizer=Lm(e.biasRegularizer),this.kernelConstraint=nd(e.kernelConstraint),this.recurrentConstraint=nd(e.recurrentConstraint),this.biasConstraint=nd(e.biasConstraint),this.dropout=Ed([1,Cd([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ed([1,Cd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;let n;if(e=Rp(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,r=this.units;n=new((t=class extends Gd{apply(t,n){const i=e.apply([r]),s=(new qd).apply([r]),a=e.apply([2*r]);return Rd(Rd(i,s),a)}}).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return ui(()=>{const n=null!=t.training&&t.training;if(3!==(e=e).length)throw new Th("LSTMCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mg({ones:()=>co(e),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mg({ones:()=>co(r),rate:this.recurrentDropout,training:n,count:4}));const s=this.recurrentDropoutMask;let a,o,u,l;0<this.dropout&&this.dropout<1&&(e=Ei(e,this.dropoutMask[0]));let c=Fd(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ei(r,s[0])),c=xi(c,Fd(r,this.recurrentKernel.read())),this.useBias&&(c=Bd(c,this.bias.read()));const[h,d,p,f]=nu(c,4,c.rank-1);a=this.recurrentActivation.apply(h),o=this.recurrentActivation.apply(d),u=xi(Ei(o,i),Ei(a,this.activation.apply(p))),l=this.recurrentActivation.apply(f);const m=Ei(l,this.activation.apply(u));return[m,m,u]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Cm(this.activation),recurrentActivation:Cm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:lp(this.kernelInitializer),recurrentInitializer:lp(this.recurrentInitializer),biasInitializer:lp(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Dm(this.kernelRegularizer),recurrentRegularizer:Dm(this.recurrentRegularizer),biasRegularizer:Dm(this.biasRegularizer),activityRegularizer:Dm(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}dg.className="LSTMCell",d.registerClass(dg);class pg extends ag{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new dg(e),super(e)}call(e,t){return ui(()=>(null!=this.cell.dropoutMask&&(li(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(li(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}pg.className="LSTM",d.registerClass(pg);class fg extends og{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return ui(()=>{let n=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let s;for(let a=0;a<this.cells.length;++a){const o=this.cells[a];n=r[a],s=0===a?[e[0]].concat(n):[s[0]].concat(n),s=o.call(s,t),i.push(s.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[s[0]].concat(n)})}build(e){let t;Np(e)&&(e=e[0]),e=e,this.cells.forEach((n,r)=>{yd(`RNNCell_${r}`,()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}));return Object.assign({},e,{cells:t})}static fromConfig(e,t,n={}){const r=[];for(const i of t.cells)r.push(rf(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return Fp(e)}setWeights(e){const t=[];for(const n of this.cells){const r=e.splice(n.weights.length);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}Pp(t)}}function mg(e){const{ones:t,rate:n,training:r=!1,count:i=1}=e,s=()=>Ud(t(),n),a=()=>Vd(s,t,r);return!i||i<=1?ci(a().clone()):Array(i).fill(void 0).map(a).map(e=>ci(e.clone()))}fg.className="StackedRNNCells",d.registerClass(fg);class gg extends ag{constructor(e){if(e.unroll)throw new Ah("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ah("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new zp({ndim:5})]}call(e,t){return ui(()=>{if(null!=this.cell.dropoutMask&&(li(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(li(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Th("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return ui(()=>{const{stateSize:t}=this.cell,n=this.computeSingleOutputShape(e.shape),r=uo([n[0],...n.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]})}resetStates(e,t=!1){ui(()=>{if(!this.stateful)throw new Ch("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,i=this.computeSingleOutputShape(n),s=[i[0],...i.slice(2)];if(null==n[0])throw new Th("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>uo(s)):[uo(s)];else if(null==e)li(this.states_),null!=this.keptStates&&(li(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>uo(s)):this.states_[0]=uo(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Th(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);t?this.keptStates.push(this.states_.slice()):li(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],i=s;if(!r.arraysEqual(n.shape,i))throw new Th(`State ${t} is incompatible with layer ${this.name}: `+`expected shape=${i}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>ci(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:s,dilationRate:a}=this.cell,o="channelsFirst"===t,u=e[o?4:3],l=Vm(e[o?3:2],r[0],i,s[0],a[0]),c=Vm(u,r[1],i,s[1],a[1]);return[...e.slice(0,2),...o?[n,l,c]:[l,c,n]]}}gg.className="ConvRNN2D";class yg extends dg{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:s,dilationRate:a}=e;super(Object.assign({},e,{units:t})),this.filters=t,Gh(this.filters,"filters"),this.kernelSize=Um(n,2,"kernelSize"),this.kernelSize.forEach(e=>Gh(e,"kernelSize")),this.strides=Um(r||1,2,"strides"),this.strides.forEach(e=>Gh(e,"strides")),this.padding=i||"valid",fd(this.padding),this.dataFormat=s||"channelsLast",pd(this.dataFormat),this.dilationRate=Um(a||1,2,"dilationRate"),this.dilationRate.forEach(e=>Gh(e,"dilationRate"))}build(e){var t;e=Rp(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Th("The channel dimension of the input should be defined. "+`Found ${e[n]}`);const r=this.kernelSize.concat([e[n],4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends Gd{apply(e,t){return Dd([n.apply([r]),lo([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return ui(()=>{if(3!==e.length)throw new Th("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);const n=t.training||!1,r=e[0],i=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mg({ones:()=>co(r),rate:this.dropout,training:n,count:4}));const a=this.dropoutMask,o=(e,t,n)=>t&&t[n]?Ei(t[n],e):e;let u=o(r,a,0),l=o(r,a,1),c=o(r,a,2),h=o(r,a,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mg({ones:()=>co(i),rate:this.recurrentDropout,training:n,count:4}));const d=this.recurrentDropoutMask;let p=o(i,d,0),f=o(i,d,1),m=o(i,d,2),g=o(i,d,3);const[y,v,b,_]=nu(this.kernel.read(),4,3),[x,w,S,E]=this.useBias?nu(this.bias.read(),4):[null,null,null,null];u=this.inputConv(u,y,x,this.padding),l=this.inputConv(l,v,w,this.padding),c=this.inputConv(c,b,S,this.padding),h=this.inputConv(h,_,E,this.padding);const[C,k,T,A]=nu(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,C),f=this.recurrentConv(f,k),m=this.recurrentConv(m,T),g=this.recurrentConv(g,A);const M=this.recurrentActivation.apply(xi(u,p)),N=this.recurrentActivation.apply(xi(l,f)),I=xi(Ei(N,s),Ei(M,this.activation.apply(xi(c,m)))),D=Ei(this.recurrentActivation.apply(xi(h,g)),this.activation.apply(I));return[D,D,I]})}getConfig(){const e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(super.getConfig(),["units"]);return Object.assign({},e,{filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides})}inputConv(e,t,n,r){const i=Hs(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Bd(i,n,this.dataFormat):i}recurrentConv(e,t){return Hs(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}yg.className="ConvLSTM2DCell",d.registerClass(yg);class vg extends gg{constructor(e){const t=new yg(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}}vg.className="ConvLSTM2D",d.registerClass(vg);class bg extends Wp{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return Vd(()=>Ud(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}bg.className="Dropout",d.registerClass(bg);class _g extends bg{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}_g.className="SpatialDropout1D",d.registerClass(_g);class xg extends Wp{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Gh(this.units,"units"),this.activation=Tm(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=cp(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=cp(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=nd(e.kernelConstraint),this.biasConstraint=nd(e.biasConstraint),this.kernelRegularizer=Lm(e.kernelRegularizer),this.biasRegularizer=Lm(e.biasRegularizer),this.activityRegularizer=Lm(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=Rp(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=Rp(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e),r=jh(this.activation.getClassName());let i;return null!=r?i=Fd(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Fd(n,this.kernel.read()),null!=this.bias&&(i=Bd(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Cm(this.activation),useBias:this.useBias,kernelInitializer:lp(this.kernelInitializer),biasInitializer:lp(this.biasInitializer),kernelRegularizer:Dm(this.kernelRegularizer),biasRegularizer:Dm(this.biasRegularizer),activityRegularizer:Dm(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),biasConstraint:ed(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}xg.className="Dense",d.registerClass(xg);class wg extends Wp{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Rp(e);for(const t of e.slice(1))if(null==t)throw new Th('The shape of the input to "Flatten" is not fully defined '+`(got ${e.slice(1)}). Make sure to pass a complete `+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],wd(e,1)]}call(e,t){return ui(()=>{this.invokeCallHook(e,t);let n=Dp(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=n.transpose(e)}return function(e){if(e.rank<=1)throw new Th(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],wd(e.shape,1)];return e.reshape(t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}wg.className="Flatten",d.registerClass(wg);class Sg extends Wp{constructor(e){super(e),this.supportsMasking=!0,this.activation=Tm(e.activation)}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e);return this.activation.apply(n)})}getConfig(){const e={activation:Cm(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Sg.className="Activation",d.registerClass(Sg);class Eg extends Wp{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return ui(()=>{return e=Dp(e),t=e,n=this.n,ui(()=>{if(2!==t.shape.length)throw new Th("repeat() expects a rank-2 tensor, but received a "+`rank-${t.shape.length} tensor.`);return Ld(Ad(t,1),[1,n,1])});var t,n})}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Eg.className="RepeatVector",d.registerClass(Eg);class Cg extends Wp{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,s=null;for(let o=0;o<r.length;++o){const e=r[o];if(this.isUnknown(e)){if(null!==s)throw new Th("Can only specifiy one unknown dimension.");s=o}else i*=e}const a=wd(e);if(null!==s){if(0===i||a%i!=0)throw new Th(n);r[s]=a/i}else if(a!==i)throw new Th(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Cg.className="Reshape",d.registerClass(Cg);class kg extends Wp{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+`${e.dims} instead.`);const t=kd(1,e.dims.length+1);if(!r.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new zp({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=Rp(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return fr(Dp(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}kg.className="Permute",d.registerClass(kg);class Tg extends Wp{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=Dp(e);return ns(oo(n,this.maskValue),-1)}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e),r=ns(oo(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}}Tg.className="Masking",d.registerClass(Tg);class Ag extends Wp{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=null==e.inputLength?[t,null]:[t].concat(Lh(e.inputLength))}this.inputDim=e.inputDim,Gh(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Gh(this.outputDim,"outputDim"),this.embeddingsInitializer=cp(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Lm(e.embeddingsRegularizer),this.activityRegularizer=Lm(e.activityRegularizer),this.embeddingsConstraint=nd(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return ui(()=>this.maskZero?(e=Dp(e),oo(e,Ti(e))):null)}computeOutputShape(e){if(e=Rp(e),null==this.inputLength)return[...e,this.outputDim];const t=Lh(this.inputLength);if(t.length!==e.length-1)throw new Th(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const i=t[r],s=e[r+1];if(null!=i&&null!=s&&i!==s)throw new Th(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);null==i&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return ui(()=>{this.invokeCallHook(e,t);let n=Dp(e);return"int32"!==n.dtype&&(n=Td(n,"int32")),Pd(this.embeddings.read(),n.as1D()).reshape(Rp(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:lp(this.embeddingsInitializer),embeddingsRegularizer:Dm(this.embeddingsRegularizer),activityRegularizer:Dm(this.activityRegularizer),embeddingsConstraint:ed(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}Ag.className="Embedding",d.registerClass(Ag);class Mg extends Wp{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ah}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],s=t[r];if(null==i||null==s||i<0||s<0)n.push(null);else if(1===i)n.push(s);else if(1===s)n.push(i);else{if(i!==s)throw new Th("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Rp(e)]),(e=e).length<2)throw new Th("A merge layer should be called on an Array of at least 2 inputs."+` Got ${e.length} input(s).`);let t=[];for(const i of e)null!=i&&null!==i[0]&&t.push(i[0]);if(t=Uh(t),t.length>1)throw new Th("Can not merge tensors with different batch sizes. "+`Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){const t=null==e[i]?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);this.reshapeRequired=-1!==e.indexOf(null)||1!==Uh(r).length}call(e,t){return ui(()=>{if(e=e,this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=Cd(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Ad(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const s of e){const e=s.rank;if(null==e){const e=s.shape,r=e[0],i=e.slice(1).concat([r]);let a=s.reshape([r].concat(wd(e.slice(1))));a=fr(a,[1,0]),a=a.reshape(i),t.push(a),n=!0}else if(e>1){const r=kd(1,e).concat([0]);t.push(fr(s,r)),n=!0}else t.push(s)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=fr(r.reshape([-1,t]),[1,0]).reshape(n)}else if(i>1){const e=[i-1].concat(kd(0,i-1));r=fr(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=Uh(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return ui(()=>{if(null==t)return null;if(!Array.isArray(t))throw new Th("`mask` should be an Array");if(!Array.isArray(e))throw new Th("`inputs` should be an Array");if(t.length!==e.length)throw new Th("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+`(${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:da(e,0)))[0];for(let e=1;e<t.length-1;++e)n=ja(n,t[e]);return n})}}class Ng extends Mg{constructor(e){super(e)}mergeFunction(e){return ui(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=xi(t,e[n]);return t})}}Ng.className="Add",d.registerClass(Ng);class Ig extends Mg{constructor(e){super(e)}mergeFunction(e){return ui(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ei(t,e[n]);return t})}}Ig.className="Multiply",d.registerClass(Ig);class Dg extends Mg{constructor(e){super(e)}mergeFunction(e){return ui(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=xi(t,e[n]);return Ei(1/e.length,t)})}}Dg.className="Average",d.registerClass(Dg);class Rg extends Mg{constructor(e){super(e)}mergeFunction(e){return ui(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=qi(t,e[n]);return t})}}Rg.className="Maximum",d.registerClass(Rg);class Lg extends Mg{constructor(e){super(e)}mergeFunction(e){return ui(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=to(t,e[n]);return t})}}Lg.className="Minimum",d.registerClass(Lg);class Og extends Mg{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Th("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let i=0;i<e.length;++i){const t=e[i].slice();t.splice(this.axis,1);let s=!1;for(const e of n)if(r.arraysEqual(e,t)){s=!0;break}s||n.push(t)}if(n.length>1)throw new Th("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ui(()=>Dd(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Th("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of t.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Th("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Th("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Th(`Mismatch in the length of mask (${t.length}) `+`and the legnth of inputs (${e.length})`);return ui(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let s=0;s<e.length;++s)r.push(null==t[s]?co(e[s]).asType("bool"):t[s].rank<e[s].rank?da(t[s],-1):t[s]);const i=ks(r,this.axis);return ts(i,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Fg(e,t){for(;e<0;)e+=t;return e}Og.className="Concatenate",d.registerClass(Og);class Pg extends Mg{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Ah("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,n);if(t[i[0]]!==n[i[1]])throw new Th("Dimension incompatibility: "+`${t[i[0]]} !== ${n[i[1]]}`)}mergeFunction(e){if(2!==e.length)throw new Th("A `Dot` layer must be called on exactly 2 inputs, "+`but received ${e.length} input(s).`);let t,n=e[0],i=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>Fg(t,e[n].shape.length)):[Fg(this.axes,n.shape.length),Fg(this.axes,i.shape.length)],this.normalize&&(n=sf(n,t[0]),i=sf(i,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Ah("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+`but got ${e.shape.length}`),r.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+`but got ${t.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Ah("batchDot is not implemented for complex64-type Tensors yet.");const i=e.shape.length,s=t.shape.length;null==n&&(n=[i-1,s-2]);const a=n;return ui(()=>{let n,r;if(i>s){n=i-s;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else if(s>i){n=s-i;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else n=0;if(r=2===e.shape.length&&2===t.shape.length?a[0]===a[1]?e.mul(t).sum(a[0]):e.transpose([1,0]).mul(t).sum(a[1]):e.matMul(t,a[0]!==e.shape.length-1,a[1]===t.shape.length-1),n>0){let e;e=i>s?i+s-3:i-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);r=r.squeeze(t)}return 1===r.shape.length&&(r=r.expandDims(1)),r})}(n,i,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Fg(this.axes,e.length),Fg(this.axes,t.length)],n}computeOutputShape(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Ah("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,n);t.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);const s=t.concat(n);return 1===s.length&&s.push(1),s}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}Pg.className="Dot",d.registerClass(Pg);class zg extends Wp{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e);return Vd(()=>Od(n.shape,0,this.stddev).add(n),()=>n,t.training||!1)})}}zg.className="GaussianNoise",d.registerClass(zg);class $g extends Wp{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ui(()=>{this.invokeCallHook(e,t);const n=Dp(e);return this.rate>0&&this.rate<1?Vd(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return n.mul(Od(n.shape,1,e))},()=>n,t.training||!1):n})}}$g.className="GaussianDropout",d.registerClass($g);class Bg extends Wp{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Dp(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ui(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e);return Vd(()=>{const t=Dp(e),r=-1.7580993408473766;let i=ba(Mo(n),this.rate);i=Td(i,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,a=-s*r*this.rate;return t.mul(i).add(i.add(-1).mul(r)).mul(s).add(a)},()=>Dp(e),t.training||!1)}return e})}}function Ug(e,t,n,r,i,s=.001){let a;if(2===e.rank)a=Rs(e,t,n,r,i,s);else if(3===e.rank)a=Ls(e,t,n,r,i,s);else{if(4!==e.rank)throw new Ah(`batchNormalization is not implemented for array of rank ${e.rank} `+"yet");a=Os(e,t,n,r,i,s)}return a}Bg.className="AlphaDropout",d.registerClass(Bg);class Vg extends Wp{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=cp(e.betaInitializer||"zeros"),this.gammaInitializer=cp(e.gammaInitializer||"ones"),this.movingMeanInitializer=cp(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=cp(e.movingVarianceInitializer||"ones"),this.betaConstraint=nd(e.betaConstraint),this.gammaConstraint=nd(e.gammaConstraint),this.betaRegularizer=Lm(e.betaRegularizer),this.gammaRegularizer=Lm(e.gammaRegularizer)}build(e){e=Rp(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Th(`Axis ${t} of input tensor should have a defined dimension but `+"the layer received an input with shape "+`${JSON.stringify(e)}.`);this.inputSpec=[new zp({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return ui(()=>{const n=null!=t.training&&t.training,i=Dp(e),s=i.shape,a=s.length,o=kd(0,a),u=this.axis>=0?this.axis:this.axis+a;o.splice(u,1);const l=Nh(1,a);l[u]=s[u];const c=o.slice();c.sort();const h=!r.arraysEqual(c,kd(0,a).slice(0,a-1));if(!n)return(()=>{if(h){const e=this.movingMean.read().reshape(l),t=this.movingVariance.read().reshape(l),n=this.center?this.beta.read().reshape(l):null,r=this.scale?this.gamma.read().reshape(l):null;return Ug(i,e,t,n,r,this.epsilon)}return Ug(i,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,f]=function(e,t,n,i,s=.001){return r.arraysEqual(i.slice().sort(),kd(0,e.rank-1))?function(e,t,n,r,i=.001){return ui(()=>{const s=io(e,r),a=s.mean,o=s.variance;return[Ug(e,a,o,n,t,i),a,o]})}(e,t,n,i,s):function(e,t,n,r,i=.001){return ui(()=>{const s=io(e,r),a=s.mean,o=s.variance,u=[];for(const t of kd(0,e.rank))-1!==r.indexOf(t)?u.push(1):u.push(e.shape[t]);const l=a.reshape(u),c=o.reshape(u),h=null==t?null:t.reshape(u),d=null==n?null:n.reshape(u);return[Ug(e,l,c,d,h,i),a,o]})}(e,t,n,i,s)}(i,this.gamma.read(),this.beta.read(),o,this.epsilon),m=(e,t,n)=>{ui(()=>{const r=1-n,i=e.read(),s=i.sub(t).mul(r);e.write(i.sub(s))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:lp(this.betaInitializer),gammaInitializer:lp(this.gammaInitializer),movingMeanInitializer:lp(this.movingMeanInitializer),movingVarianceInitializer:lp(this.movingVarianceInitializer),betaRegularizer:Dm(this.betaRegularizer),gammaRegularizer:Dm(this.gammaRegularizer),betaConstraint:ed(this.betaConstraint),gammaConstraint:ed(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Vg.className="BatchNormalization",d.registerClass(Vg);class Wg extends Wp{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+`but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+`but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=cp(e.betaInitializer||"zeros"),this.gammaInitializer=cp(e.gammaInitializer||"ones"),this.betaRegularizer=Lm(e.betaRegularizer),this.gammaRegularizer=Lm(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=Rp(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==Uh(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map(t=>e[t]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(e,t){const n=Dp(e),r=n.shape,i=r.length;return ui(()=>{let{mean:e,variance:t}=io(n,this.axis,!0);const s=Nh(1,i);for(const n of this.axis)s[n]=r[n];const a=e=>null!=e&&e.shape.length!==i&&this.axis!==[i-1]?e.reshape(s):e;let o=a(this.gamma.read()),u=a(this.beta.read());const l=[],c=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),c.push(1)):(l.push(1),c.push(r[n]));return e=e.tile(l),t=t.tile(l),o=o.tile(c),u=u.tile(c),Ug(n,e,t,u,o,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:lp(this.betaInitializer),gammaInitializer:lp(this.gammaInitializer),betaRegularizer:Dm(this.betaRegularizer),gammaRegularizer:Dm(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Wg.className="LayerNormalization",d.registerClass(Wg);class Hg extends Wp{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Th("ZeroPadding2D expects padding to be a length-2 array, but "+`received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Th("ZeroPadding2D expects height padding to be a length-2 array, "+`but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new Th("ZeroPadding2D expects width padding to be a length-2 array, "+`but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new zp({ndim:4})]}computeOutputShape(e){let t,n;return e=Rp(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return ui(()=>{return t=Dp(e),n=this.padding,r=this.dataFormat,ui(()=>{if(4!==t.rank)throw new Th("temporalPadding expects input tensor to be 4-D, but received a "+`${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new Th("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new Th(`Unknown data format: ${r}. `+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],po(t,e)});var t,n,r})}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function Gg(e,t,n,r,i,s){return ui(()=>{let a;pd(i),md(s),fd(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),e=Hm(e,i);const o="same"===r?"same":"valid";return a="max"===s?Za(e,t,n,o):Es(e,t,n,o),"channelsFirst"===i&&(a=fr(a,[0,3,1,2])),a})}function jg(e,t,n,r,i,s){return ui(()=>{let a;pd(i),md(s),fd(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),e=Gm(e,i);const o="same"===r?"same":"valid";return a="max"===s?Ya(e,t,n,o):Cs(e,t,n,o),"channelsFirst"===i&&(a=fr(a,[0,4,1,2,3])),a})}Hg.className="ZeroPadding2D",d.registerClass(Hg);class qg extends Wp{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Th("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(Gh(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Th("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.strides)}`);this.strides=e.strides}Gh(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,fd(this.padding),this.inputSpec=[new zp({ndim:3})]}computeOutputShape(e){const t=Vm((e=Rp(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return ui(()=>{this.invokeCallHook(e,t),e=Ad(Dp(e),2);const n=this.poolingFunction(Dp(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return su(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Kg extends qg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),Gg(e,t,n,r,i,"max")}}Kg.className="MaxPooling1D",d.registerClass(Kg);class Xg extends qg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),Gg(e,t,n,r,i,"avg")}}Xg.className="AveragePooling1D",d.registerClass(Xg);class Zg extends Wp{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Th("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Gh(this.poolSize,"poolSize"),Gh(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,pd(this.dataFormat),fd(this.padding),this.inputSpec=[new zp({ndim:4})]}computeOutputShape(e){e=Rp(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Vm(t,this.poolSize[0],this.padding,this.strides[0]),n=Vm(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return ui(()=>(this.invokeCallHook(e,t),this.poolingFunction(Dp(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Yg extends Zg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),Gg(e,t,n,r,i,"max")}}Yg.className="MaxPooling2D",d.registerClass(Yg);class Jg extends Zg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),Gg(e,t,n,r,i,"avg")}}Jg.className="AveragePooling2D",d.registerClass(Jg);class Qg extends Wp{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Th("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Gh(this.poolSize,"poolSize"),Gh(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,pd(this.dataFormat),fd(this.padding),this.inputSpec=[new zp({ndim:5})]}computeOutputShape(e){e=Rp(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=Vm(t,this.poolSize[0],this.padding,this.strides[0]),n=Vm(n,this.poolSize[1],this.padding,this.strides[1]),r=Vm(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return ui(()=>(this.invokeCallHook(e,t),this.poolingFunction(Dp(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class ey extends Qg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),jg(e,t,n,r,i,"max")}}ey.className="MaxPooling3D",d.registerClass(ey);class ty extends Qg{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return pd(i),fd(r),jg(e,t,n,r,i,"avg")}}ty.className="AveragePooling3D",d.registerClass(ty);class ny extends Wp{constructor(e){super(e),this.inputSpec=[new zp({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Ah}}class ry extends ny{constructor(e){super(e||{})}call(e,t){return ui(()=>{const t=Dp(e);return Qa(t,1)})}}ry.className="GlobalAveragePooling1D",d.registerClass(ry);class iy extends ny{constructor(e){super(e||{})}call(e,t){return ui(()=>{const t=Dp(e);return La(t,1)})}}iy.className="GlobalMaxPooling1D",d.registerClass(iy);class sy extends Wp{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,pd(this.dataFormat),this.inputSpec=[new zp({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Ah}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class ay extends sy{call(e,t){return ui(()=>{const t=Dp(e);return Qa(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}ay.className="GlobalAveragePooling2D",d.registerClass(ay);class oy extends sy{call(e,t){return ui(()=>{const t=Dp(e);return La(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}oy.className="GlobalMaxPooling2D",d.registerClass(oy);class uy extends Wp{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=rf(t.layer,n);delete t.layer;const i={layer:r};return Object.assign(i,t),new e(i)}}class ly extends uy{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=Rp(e)).length<3)throw new Th("TimeDistributed layer expects an input shape >= 3D, but received "+`input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=Rp(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))}call(e,t){return ui(()=>sg((e,n)=>[Dp(this.layer.call(e,t)),[]],e=Dp(e),[],!1,null,null,!1,!0)[1])}}ly.className="TimeDistributed",d.registerClass(ly);class cy extends uy{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=rf(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=rf(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,Wh(hd,"BidirectionalMergeMode",this.mergeMode),e.weights)throw new Ah("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),t=i[0]):t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Rh(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=ig(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const s=[],a=[];if(null!=n){const e=n.length;if(e%2>0)throw new Th("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);const r=n.map(e=>new zp({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new Ah("Support for constants in Bidirectional layers is not implemented yet.");const o=s[0]instanceof $p;for(const u of s)if(u instanceof $p!==o)throw new Th("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(s),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=i,o}return super.apply(e,t)}call(e,t){return ui(()=>{const n=t.initialState;let r,i,s,a;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const s=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:s})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=Oo(i,1)),"concat"===this.mergeMode?a=Dd([r,i]):"sum"===this.mergeMode?a=xi(r,i):"ave"===this.mergeMode?a=Ei(.5,xi(r,i)):"mul"===this.mergeMode?a=Ei(r,i):null==this.mergeMode&&(a=[r,i]),this.returnState?null==this.mergeMode?a.concat(s):[a].concat(s):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){yd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),yd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=rf(t.layer);if(delete t.layer,null!=t.numConstants)throw new Ah("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}function hy(e){return new Hp(e)}function dy(e){return new zm(e)}function py(e){return new Om(e)}function fy(e){return new Fm(e)}function my(e){return new Pm(e)}function gy(e){return new Bm(e)}function yy(e){return new $m(e)}function vy(e){return new eg(e)}function by(e){return new Xm(e)}function _y(e){return new Ym(e)}function xy(e){return new Zm(e)}function wy(e){return new Qm(e)}function Sy(e){return new tg(e)}function Ey(e){return new ng(e)}function Cy(e){return new rg(e)}function ky(e){return new Sg(e)}function Ty(e){return new xg(e)}function Ay(e){return new bg(e)}function My(e){return new _g(e)}function Ny(e){return new wg(e)}function Iy(e){return new Eg(e)}function Dy(e){return new Cg(e)}function Ry(e){return new kg(e)}function Ly(e){return new Ag(e)}function Oy(e){return new Ng(e)}function Fy(e){return new Dg(e)}function Py(e){return new Og(e)}function zy(e){return new Rg(e)}function $y(e){return new Lg(e)}function By(e){return new Ig(e)}function Uy(e){return new Pg(e)}function Vy(e){return new Vg(e)}function Wy(e){return new Wg(e)}function Hy(e){return new Hg(e)}function Gy(e){return new Xg(e)}function jy(e){return Gy(e)}function qy(e){return Gy(e)}function Ky(e){return new Jg(e)}function Xy(e){return Ky(e)}function Zy(e){return Ky(e)}function Yy(e){return new ty(e)}function Jy(e){return Yy(e)}function Qy(e){return Yy(e)}function ev(e){return new ry(e)}function tv(e){return new ay(e)}function nv(e){return new iy(e)}function rv(e){return new oy(e)}function iv(e){return new Kg(e)}function sv(e){return new Yg(e)}function av(e){return new ey(e)}function ov(e){return new hg(e)}function uv(e){return new cg(e)}function lv(e){return new pg(e)}function cv(e){return new dg(e)}function hv(e){return new lg(e)}function dv(e){return new ug(e)}function pv(e){return new vg(e)}function fv(e){return new yg(e)}function mv(e){return new ag(e)}function gv(e){return new fg(e)}function yv(e){return new cy(e)}function vv(e){return new ly(e)}cy.className="Bidirectional",d.registerClass(cy);const bv=nv,_v=rv,xv=iv,wv=sv;function Sv(e){return new zg(e)}function Ev(e){return new $g(e)}function Cv(e){return new Bg(e)}function kv(e){return new Tg(e)}function Tv(e,t){return mf(e,t)}function Av(e,t){return bf(e,t)}function Mv(e,t){return _f(e,t)}function Nv(e,t){return gf(e,t)}function Iv(e,t){return xf(e,t)}function Dv(e,t){return vf(e,t)}function Rv(e,t){return function(e,t){return ui(()=>{const n=yf(e,t),r=function(e,t){return ui(()=>ja(e.equal(1),t.equal(0)).sum().cast("float32"))}(e,t),i=n.add(r);return aa(va(i,0),n.div(i),0).cast("float32")})}(e,t)}function Lv(e,t){return df(e,t)}function Ov(e,t){return of(e,t)}function Fv(e,t){return uf(e,t)}function Pv(e,t){return uf(e,t)}function zv(e,t){return uf(e,t)}function $v(e,t){return af(e,t)}function Bv(e,t){return af(e,t)}function Uv(e,t){return af(e,t)}function Vv(e){return new Nm(e)}function Wv(e){return Am(t=e),new Nm({l1:null!=t?t.l1:null,l2:0});var t}function Hv(e){return Am(t=e),new Nm({l2:null!=t?t.l2:null,l1:0});var t}class Gv extends Xp{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof nm))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}function jv(e,t){return e<t}function qv(e,t){return e>t}class Kv extends Gv{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new Ah("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. `+"Falling back to mode 'auto'."),this.mode="auto"),this.monitorFunc="min"===this.mode?jv:"max"===this.mode?qv:-1!==this.monitor.indexOf("acc")?qv:jv,this.monitorFunc===jv&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===jv?1/0:-1/0}async onEpochEnd(e,t){await jp(t);const n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});const t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. `+`Available metrics are: ${Object.keys(e)}`),t}}const Xv={earlyStopping:function(e){return new Kv(e)}};var Zv,Yv;!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(Zv||(Zv={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Yv||(Yv={}));const Jv={};function Qv(e,t){Jv[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function eb(e){return Jv[e]}function tb(e){delete Jv[e]}function nb(e,t,n,i,s){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,o=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd;if("tensor"===a.type)return rb(t.inputNames[a.inputIndexStart],n,i,s);if("tensors"===a.type)return t.inputNames.slice(e,o).map(e=>rb(e,n,i,s));const u=rb(t.inputNames.slice(e)[0],n,i,s),l=u.dataSync();return"number"===a.type?l[0]:r.toNestedArray(u.shape,l)}const o=t.attrParams[e];return o&&o.value}function rb(e,t,n,r){const[i,s]=ab(e);if(null!=r){const e=r.getHashTableHandleByName(i);if(null!=e)return e}const a=n.currentContextIds.find(e=>!!t[sb(i,e)]);return void 0!==a?t[sb(i,a)][s]:void 0}function ib(e,t){const[n,r]=ab(e);return[sb(n,t&&t.currentContextId),r]}function sb(e,t){return t?`${e}-${t}`:e}function ab(e){const t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function ob(e,t,n){let r=nb("pad",e,t,n);if("explicit"===r){r=nb("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)i[e][0]=r[2*e],i[e][1]=r[2*e+1];return i}return r}function ub(e){return e.kept?e:qn(e)}const lb=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],cb=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],hb=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],db=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],pb=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],fb=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mb=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],gb=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],yb=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],vb=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],bb=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_b=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xb=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],wb=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Sb=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Eb=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Cb=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];class kb{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[E,C,k,T,A,M,N,L,R,I,O,F,P,z,$,B,D].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const n=[],r=[],i=[],s=e.node.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?n.push(e[t.name]):"Const"===t.op?r.push(e[t.name]):null!=t.input&&0!==t.input.length||i.push(e[t.name]),e),{});let a=[];const o=[];let u={},l={};null!=t&&(u=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));const c=Object.keys(s);c.forEach(e=>{const t=s[e];t.inputNames.forEach(e=>{const[n]=ib(e);t.inputs.push(s[n]),s[n].children.push(t)})}),0===Object.keys(l).length?c.forEach(e=>{const t=s[e];0===t.children.length&&o.push(t)}):Object.keys(l).forEach(e=>{const[t]=ib(e),n=s[t];null!=n&&(n.signatureKey=l[e],o.push(n))}),Object.keys(u).length>0?Object.keys(u).forEach(e=>{const[t]=ib(e),n=s[t];n&&(n.signatureKey=u[e],a.push(n))}):a=n;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const d={nodes:s,inputs:a,outputs:o,weights:r,placeholders:n,signature:t,functions:h};return i.length>0&&(d.initNodes=i),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){const t=eb(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":i=Ab(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Ab(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=zb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=zb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=Nb(e.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=Nb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=Pb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Pb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=Mb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Mb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=Bb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Bb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=Fb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Fb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=$b(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=$b(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=Rb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Rb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=Lb(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Lb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=Db(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Db(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:i,type:r},t},{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));const i=[],s=[];e.signature.inputArg.forEach(e=>{const[t]=ib(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Ib(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),r[t]=n}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach(e=>{const[n]=ib(e);t.inputs.push(r[n]),r[n].children.push(t)})});const a=e.ret;e.signature.outputArg.forEach(e=>{const[t,n]=ib(a[e.name]),i=r[t];null!=i&&(i.defaultOutput=n,s.push(i))});const o=this.mapArgsToSignature(e);return{nodes:r,inputs:i,outputs:s,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function Tb(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=$e().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Ab(e,t,n,r=!1){const i=e[t];return null!=i?Tb(i.s,r):n}function Mb(e,t,n){const r=e[t];return r?r.b:n}function Nb(e,t,n){const r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function Ib(e){switch("string"==typeof e&&(e=Zv[e]),e){case Zv.DT_FLOAT:return"float32";case Zv.DT_INT32:case Zv.DT_INT64:case Zv.DT_INT8:case Zv.DT_UINT8:return"int32";case Zv.DT_BOOL:return"bool";case Zv.DT_DOUBLE:return"float32";case Zv.DT_STRING:return"string";default:return null}}function Db(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function Rb(e,t,n){const r=e[t];return r&&r.type?Ib(r.type):n}function Lb(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>Ib(e)):n}function Ob(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function Fb(e,t,n){const r=e[t];return r&&r.shape?Ob(r.shape):n}function Pb(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function zb(e,t,n,r=!1){const i=e[t];return i&&i.list&&i.list.s?i.list.s.map(e=>Tb(e,r)):n}function $b(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>Ob(e)):n}function Bb(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class Ub{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return rb(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return rb(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Nb(this.node.rawAttrs,e,t);if(null!=n.s)return Ab(this.node.rawAttrs,e,t);if(null!=n.b)return Mb(this.node.rawAttrs,e,t);if(null!=n.shape)return Fb(this.node.rawAttrs,e,t);if(null!=n.type)return Rb(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Pb(this.node.rawAttrs,e,t);if(null!=n.list.s)return zb(this.node.rawAttrs,e,t);if(null!=n.list.shape)return $b(this.node.rawAttrs,e,t);if(null!=n.list.b)return Bb(this.node.rawAttrs,e,t);if(null!=n.list.type)return Lb(this.node.rawAttrs,e,t)}return t}}function Vb(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){r.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let i=0;i<e.length;i++){const s=e[i],a=t[i];r.assert(s<0||a<0||s===a,()=>n+` Shapes ${e} and ${t} must match`)}}}function Wb(e){return"number"!=typeof e&&!e.some(e=>e<0)}function Hb(e,t,n){let r=Gb(e,n);const i=!Wb(r);if(i&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+` with non-fully-defined elementShape: ${r}`);if(i&&t.forEach(e=>{r=Gb(e.shape,r)}),!Wb(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Gb(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const i=e[r],s=t[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:s}return n}class jb{constructor(e,t,n,r,i,s,a){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Oi(0),ci(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Vb(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,ci(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return rn([],[0].concat(this.elementShape));const n=this.readMany(e);return Vb(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),au(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return rn([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return Vb(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),ks(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,bu(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), `+"and the TensorArray is not marked as dynamically resizeable");const i=0===n?0:t.size/n,s=[];ui(()=>{t=Ss(t,[1,n,i]);for(let n=0;n<e.length;++n)s[n]=Ss(As(t,[0,0===n?0:r[n-1],0],[1,e[n],i]),this.elementShape);return s});const a=[];for(let o=0;o<e.length;o++)a[o]=o;this.writeMany(a,s)}}class qb{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);Vb(t,e.shape,"TensorList shape mismatch: "),ci(e)}),this.idTensor=Oi(0),this.maxNumElements=r,ci(this.idTensor)}get id(){return this.idTensor.id}copy(){return new qb([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Vb(e,this.elementShape,"TensorList shape mismatch: ");const r=Hb(this.elementShape,this.tensors,e);return ui(()=>{const e=this.tensors.map(e=>Ss(e,r));return au(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Hb(this.elementShape,this.tensors,e),r=this.tensors.pop();return Vb(r.shape,e,"TensorList shape mismatch: "),Ss(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Vb(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ci(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);Vb(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=Hb(this.elementShape,this.tensors,t);return Ss(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Vb(this.elementShape,t.shape,"TensorList shape mismatch: "),ci(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Vb(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Hb(this.elementShape,this.tensors,n);return 0===e.length?rn([],[0].concat(r)):ui(()=>{const t=e.map(e=>Ss(this.tensors[e],r));return au(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Vb(this.elementShape,t,"TensorList shape mismatch: ");const n=Hb(this.elementShape,this.tensors,t);return 0===this.size()?rn([],[0].concat(n)):ui(()=>{const e=this.tensors.map(e=>Ss(e,n));return ks(e,0)})}}function Kb(e,t,n){const[r,i]=nb("fusedOps",e,t,n),s="biasadd"===r,a="prelu"===i,o="fusedbatchnorm"===r,u=nb("numArgs",e,t,n);if(s){if(a&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(o)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const l=nb("strides",e,t,n),c=ob(e,t,n),h=nb("dataFormat",e,t,n).toUpperCase(),d=nb("dilations",e,t,n),[p,f]=nb("args",e,t,n);return{stride:l,pad:c,dataFormat:h,dilations:d,biasArg:p,preluArg:f,activationFunc:i,leakyreluAlpha:nb("leakyreluAlpha",e,t,n)}}function Xb(e,t,n){return{boxes:nb("boxes",e,t,n),scores:nb("scores",e,t,n),maxOutputSize:nb("maxOutputSize",e,t,n),iouThreshold:nb("iouThreshold",e,t,n),scoreThreshold:nb("scoreThreshold",e,t,n),softNmsSigma:nb("softNmsSigma",e,t,n)}}class Zb{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Oi(0),this.tensorMap=new Map,ci(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),ui(()=>{const e=bu(t),i=n.length,s=e.length;r.assert(i===s,()=>"The number of elements doesn't match, keys has "+`${i} elements, the values has ${s} `+"elements.");for(let t=0;t<i;t++){const r=n[t],i=e[t];ci(i),this.tensorMap.set(r,i)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return ui(()=>{const e=[];for(let r=0;r<n.length;r++){const i=this.findWithDefault(n[r],t);e.push(i)}return au(e)})}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}function Yb(e,t,n,i){const s=((e,t,n)=>{switch(e.category){case"arithmetic":return ui(()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[xi(nb("a",e,t,n),nb("b",e,t,n))];case"AddN":return[es(nb("tensors",e,t,n))];case"FloorMod":case"Mod":return[ro(nb("a",e,t,n),nb("b",e,t,n))];case"Mul":return[Ei(nb("a",e,t,n),nb("b",e,t,n))];case"RealDiv":case"Div":return[Si(nb("a",e,t,n),nb("b",e,t,n))];case"DivNoNan":return[oa(nb("a",e,t,n),nb("b",e,t,n))];case"FloorDiv":return[wi(nb("a",e,t,n),nb("b",e,t,n))];case"Sub":return[Ui(nb("a",e,t,n),nb("b",e,t,n))];case"Minimum":return[to(nb("a",e,t,n),nb("b",e,t,n))];case"Maximum":return[qi(nb("a",e,t,n),nb("b",e,t,n))];case"Pow":return[Bi(nb("a",e,t,n),nb("b",e,t,n))];case"SquaredDifference":return[iu(nb("a",e,t,n),nb("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"basic_math":return ui(()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[Wi(nb("x",e,t,n))];case"Acos":return[Ji(nb("x",e,t,n))];case"Acosh":return[Qi(nb("x",e,t,n))];case"Asin":return[ss(nb("x",e,t,n))];case"Asinh":return[as(nb("x",e,t,n))];case"Atan":return[os(nb("x",e,t,n))];case"Atan2":return[us(nb("x",e,t,n),nb("y",e,t,n))];case"Atanh":return[ls(nb("x",e,t,n))];case"Ceil":return[zs(nb("x",e,t,n))];case"Complex":return[tn(nb("real",e,t,n),nb("imag",e,t,n))];case"Cos":return[Ys(nb("x",e,t,n))];case"Cosh":return[Js(nb("x",e,t,n))];case"Elu":return[la(nb("x",e,t,n))];case"Erf":return[ca(nb("x",e,t,n))];case"Exp":return[ha(nb("x",e,t,n))];case"Expm1":return[pa(nb("x",e,t,n))];case"Floor":return[ga(nb("x",e,t,n))];case"Log":return[Ma(nb("x",e,t,n))];case"Log1p":return[Na(nb("x",e,t,n))];case"Imag":return[_a(nb("x",e,t,n))];case"Neg":return[Ia(nb("x",e,t,n))];case"Reciprocal":return[Do(nb("x",e,t,n))];case"Real":return[Io(nb("x",e,t,n))];case"Relu":return[Ro(nb("x",e,t,n))];case"Round":return[Bo(nb("x",e,t,n))];case"Selu":return[Vo(nb("x",e,t,n))];case"Sigmoid":return[Ts(nb("x",e,t,n))];case"Sin":return[jo(nb("x",e,t,n))];case"Sign":return[Go(nb("x",e,t,n))];case"Sinh":return[qo(nb("x",e,t,n))];case"Softplus":return[Da(nb("x",e,t,n))];case"Sqrt":return[Ci(nb("x",e,t,n))];case"Square":return[ki(nb("x",e,t,n))];case"Tanh":return[Ms(nb("x",e,t,n))];case"Tan":return[lu(nb("x",e,t,n))];case"ClipByValue":return[$s(nb("x",e,t,n),nb("clipValueMin",e,t,n),nb("clipValueMax",e,t,n))];case"Relu6":return[Lo(nb("x",e,t,n))];case"Rsqrt":return[Uo(rb(e.inputNames[0],t,n))];case"Prod":return[xo(nb("x",e,t,n),nb("axes",e,t,n))];case"LeakyRelu":return[Ea(nb("x",e,t,n),nb("alpha",e,t,n))];case"Prelu":return[_o(nb("x",e,t,n),nb("alpha",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"control":return(async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=nb("thenBranch",e,t,n),i=nb("elseBranch",e,t,n),s=nb("cond",e,t,n),a=nb("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=nb("body",e,t,n),i=nb("cond",e,t,n),s=nb("args",e,t,n),a=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(e=>e.id);let u=await a[0].data();a.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||e.dispose()});let l=s;for(;u[0];){const e=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const t=l.map(e=>e.id);e.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const s=await n.functionMap[i].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await s[0].data(),s.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":return[ub(nb("pred",e,t,n))];case"Switch":{const r=nb("pred",e,t,n);let i=nb("data",e,t,n);return i.kept||(i=ub(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find(e=>void 0!==rb(e,t,n));return r?[ub(rb(r,t,n))]:void 0}case"Enter":{const r=nb("frameName",e,t,n),i=nb("tensor",e,t,n);return n.enterFrame(r),[ub(i)]}case"Exit":{const r=nb("tensor",e,t,n);return n.exitFrame(),[ub(r)]}case"NextIteration":{const r=nb("tensor",e,t,n);return n.nextIteration(),[ub(r)]}case"TensorArrayV3":{const r=nb("size",e,t,n),i=nb("dtype",e,t,n),s=nb("elementShape",e,t,n),a=nb("dynamicSize",e,t,n),o=nb("clearAfterRead",e,t,n),u=nb("identicalElementShapes",e,t,n),l=nb("name",e,t,n),c=new jb(l,i,r,s,u,a,o);return n.addTensorArray(c),[c.idTensor,Oi(1)]}case"TensorArrayWriteV3":{const r=nb("tensorArrayId",e,t,n),i=nb("index",e,t,n),s=nb("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(i,s),[a.idTensor]}case"TensorArrayReadV3":{const r=nb("tensorArrayId",e,t,n),i=nb("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=nb("tensorArrayId",e,t,n),i=nb("indices",e,t,n),s=nb("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=nb("tensorArrayId",e,t,n),i=nb("indices",e,t,n),s=nb("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(i,s),[a.idTensor]}case"TensorArrayConcatV3":{const r=nb("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),s=nb("dtype",e,t,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=nb("tensorArrayId",e,t,n),i=nb("tensor",e,t,n),s=nb("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(s,i),[a.idTensor]}case"TensorArraySizeV3":{const r=nb("tensorArrayId",e,t,n);return[Oi(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=nb("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=nb("tensorListId",e,t,n),i=nb("index",e,t,n),s=nb("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(i,s),[a.idTensor]}case"TensorListGetItem":{const r=nb("tensorListId",e,t,n),i=nb("index",e,t,n),s=nb("elementShape",e,t,n),a=nb("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,s,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=nb("indices",e,t,n),i=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const i=Math.max(...t);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new qb([],n,e.dtype,r),a=bu(e,0);return t.forEach((e,t)=>{s.setItem(e,a[t])}),s}(nb("tensor",e,t,n),r,nb("elementShape",e,t,n),nb("numElements",e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=nb("elementShape",e,t,n),i=nb("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const a=function(e,t,n){return new qb([],e,t,n)}(r,i,nb(s,e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListGather":{const r=nb("tensorListId",e,t,n),i=nb("indices",e,t,n),s=nb("elementShape",e,t,n),a=nb("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,a,s)]}case"TensorListStack":{const r=nb("tensorListId",e,t,n),i=nb("elementShape",e,t,n),s=nb("elementDType",e,t,n),a=nb("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,s,a)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);Vb(e.shape.slice(1),t,"TensorList shape mismatch: ");const i=bu(e);return new qb(i,t,r)}(nb("tensor",e,t,n),nb("elementShape",e,t,n),nb("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=nb("tensorListId",e,t,n),i=n.getTensorList(r.id),s=nb("dtype",e,t,n),a=nb("elementShape",e,t,n);return[i.concat(s,a)]}case"TensorListPushBack":{const r=nb("tensorListId",e,t,n),i=nb("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=nb("tensorListId",e,t,n),i=nb("elementShape",e,t,n),s=nb("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=nb("tensor",e,t,n),i=nb("elementShape",e,t,n),s=function(e,t,n){let r=0;const i=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const s=Gb(e.shape.slice(1),n),a=0===r?0:e.size/r,o=ui(()=>{const n=[];e=Ss(e,[1,r,a]);for(let r=0;r<t.length;++r)n[r]=Ss(As(e,[0,0===r?0:i[r-1],0],[1,t[r],a]),s);return e.dispose(),n}),u=new qb([],n,e.dtype,t.length);for(let l=0;l<o.length;l++)u.setItem(l,o[l]);return u}(r,nb("lengths",e,t,n),i);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"convolution":return ui(()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=nb("stride",e,t,n),i=nb("pad",e,t,n),s=nb("dataFormat",e,t,n).toUpperCase(),a=nb("dilation",e,t,n);return[Gs(nb("x",e,t,n),nb("filter",e,t,n),r,i,s,a)]}case"Conv2D":{const r=nb("strides",e,t,n),i=ob(e,t,n),s=nb("dataFormat",e,t,n).toUpperCase(),a=nb("dilations",e,t,n);return[Hs(nb("x",e,t,n),nb("filter",e,t,n),[r[1],r[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:r,pad:i,dataFormat:s,dilations:a,biasArg:o,preluArg:u,activationFunc:l,leakyreluAlpha:c}=Kb(e,t,n);return[f.conv2d({x:nb("x",e,t,n),filter:nb("filter",e,t,n),strides:[r[1],r[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:o,activation:l,preluActivationWeights:u,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:i,dataFormat:s,dilations:a,biasArg:o,preluArg:u,activationFunc:l,leakyreluAlpha:c}=Kb(e,t,n);return[f.depthwiseConv2d({x:nb("x",e,t,n),filter:nb("filter",e,t,n),strides:[r[1],r[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:o,activation:l,preluActivationWeights:u,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=nb("outputShape",e,t,n),i=nb("strides",e,t,n),s=ob(e,t,n);return[qs(nb("x",e,t,n),nb("filter",e,t,n),r,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=nb("strides",e,t,n),i=ob(e,t,n),s=nb("dilations",e,t,n),a=nb("dataFormat",e,t,n).toUpperCase();return[na(nb("input",e,t,n),nb("filter",e,t,n),[r[1],r[2]],i,a,[s[1],s[2]])]}case"Conv3D":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("dataFormat",e,t,n).toUpperCase(),a=nb("dilations",e,t,n);return[Ks(nb("x",e,t,n),nb("filter",e,t,n),[r[1],r[2],r[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("kernelSize",e,t,n);return[Es(nb("x",e,t,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("kernelSize",e,t,n);return[Za(nb("x",e,t,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("kernelSize",e,t,n),a=nb("includeBatchInIndex",e,t,n),{result:o,indexes:u}=Ja(nb("x",e,t,n),[s[1],s[2]],[r[1],r[2]],i,a);return[o,u]}case"AvgPool3D":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("kernelSize",e,t,n);return[Cs(nb("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("kernelSize",e,t,n);return[Ya(nb("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=nb("strides",e,t,n),i=nb("pad",e,t,n),s=nb("dilations",e,t,n),a=r[1],o=r[2],u=s[1],l=s[2];return[ia(nb("x",e,t,n),nb("filter",e,t,n),[a,o],i,[u,l],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"creation":return ui(()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=nb("shape",e,t,n),i=nb("dtype",e,t,n);return[zi(r,nb("value",e,t,n),i)]}case"LinSpace":return[Ta(nb("start",e,t,n),nb("stop",e,t,n),nb("num",e,t,n))];case"Multinomial":{const r=nb("logits",e,t,n),i=nb("numSamples",e,t,n),s=nb("seed",e,t,n);return[ao(r,i,s)]}case"OneHot":{const r=nb("indices",e,t,n),i=nb("depth",e,t,n),s=nb("onValue",e,t,n),a=nb("offValue",e,t,n);return[pr(r,i,s,a)]}case"Ones":return[lo(nb("shape",e,t,n),nb("dtype",e,t,n))];case"OnesLike":return[co(nb("x",e,t,n))];case"RandomUniform":return[Mo(nb("shape",e,t,n),nb("minval",e,t,n),nb("maxval",e,t,n),nb("dtype",e,t,n))];case"Range":return[No(nb("start",e,t,n),nb("stop",e,t,n),nb("step",e,t,n),nb("dtype",e,t,n))];case"TruncatedNormal":{const r=nb("shape",e,t,n),i=nb("mean",e,t,n),s=nb("stdDev",e,t,n),a=nb("seed",e,t,n);return[gu(r,i,s,nb("dtype",e,t,n),a)]}case"Zeros":return[uo(nb("shape",e,t,n),nb("dtype",e,t,n))];case"ZerosLike":return[Ti(nb("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:u}=Xb(e,t,n),l=await Tl.nonMaxSuppressionWithScoreAsync(r,i,s,a,o,u);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o}=Xb(e,t,n),u=nb("padToMaxOutputSize",e,t,n),l=await Tl.nonMaxSuppressionPaddedAsync(r,i,s,a,o,u);return[l.selectedIndices,l.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o}=Xb(e,t,n);return[await Tl.nonMaxSuppressionAsync(r,i,s,a,o)]}case"Where":{const r=jn(nb("condition",e,t,n),"bool"),i=[await wu(r)];return r.dispose(),i}case"ListDiff":return Ho(nb("x",e,t,n),nb("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return ui(()=>((e,t,n)=>{switch(e.op){case"TopKV2":{const r=nb("x",e,t,n),i=nb("k",e,t,n),s=nb("sorted",e,t,n),a=mu(r,i,s);return[a.values,a.indices]}case"Unique":{const r=nb("x",e,t,n),i=yu(r);return[i.values,i.indices]}case"UniqueV2":{const r=nb("x",e,t,n),i=nb("axis",e,t,n),s=yu(r,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"image":return ui(()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=nb("images",e,t,n),i=nb("size",e,t,n),s=nb("alignCorners",e,t,n),a=nb("halfPixelCenters",e,t,n);return[Tl.resizeBilinear(r,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{const r=nb("images",e,t,n),i=nb("size",e,t,n),s=nb("alignCorners",e,t,n),a=nb("halfPixelCenters",e,t,n);return[Tl.resizeNearestNeighbor(r,[i[0],i[1]],s,a)]}case"CropAndResize":{const r=nb("image",e,t,n),i=nb("boxes",e,t,n),s=nb("boxInd",e,t,n),a=nb("cropSize",e,t,n),o=nb("method",e,t,n),u=nb("extrapolationValue",e,t,n);return[Tl.cropAndResize(r,i,s,a,o,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"graph":return ui(()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=nb("default",e,t,n);return[rb(e.name,t,n)||r];case"Placeholder":return[rb(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[ub(nb("x",e,t,n))];case"IdentityN":return nb("x",e,t,n).map(e=>ub(e));case"Snapshot":return[ub(nb("x",e,t,n))];case"Shape":return[cu(nb("x",e,t,n).shape,"int32")];case"ShapeN":return nb("x",e,t,n).map(e=>cu(e.shape));case"Size":return[Oi(nb("x",e,t,n).size,"int32")];case"Rank":return[Oi(nb("x",e,t,n).rank,"int32")];case"NoOp":return[Oi(1)];case"Print":const i=nb("x",e,t,n),s=nb("data",e,t,n),a=nb("message",e,t,n),o=nb("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,o));return[i];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"logical":return ui(()=>((e,t,n)=>{switch(e.op){case"Equal":return[sa(nb("a",e,t,n),nb("b",e,t,n))];case"NotEqual":return[oo(nb("a",e,t,n),nb("b",e,t,n))];case"Greater":return[va(nb("a",e,t,n),nb("b",e,t,n))];case"GreaterEqual":return[ba(nb("a",e,t,n),nb("b",e,t,n))];case"Less":return[Ca(nb("a",e,t,n),nb("b",e,t,n))];case"LessEqual":return[ka(nb("a",e,t,n),nb("b",e,t,n))];case"LogicalAnd":return[ja(nb("a",e,t,n),nb("b",e,t,n))];case"LogicalNot":return[qa(nb("a",e,t,n))];case"LogicalOr":return[Ka(nb("a",e,t,n),nb("b",e,t,n))];case"Select":case"SelectV2":return[aa(nb("condition",e,t,n),nb("a",e,t,n),nb("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"matrices":return ui(()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[dr(nb("a",e,t,n),nb("b",e,t,n),nb("transposeA",e,t,n),nb("transposeB",e,t,n))];case"Transpose":return[fr(nb("x",e,t,n),nb("perm",e,t,n))];case"_FusedMatMul":const[r,i]=nb("fusedOps",e,t,n),s="biasadd"===r,a="prelu"===i,o=nb("numArgs",e,t,n),u=nb("leakyreluAlpha",e,t,n);if(s){if(a&&2!==o)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==o)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,c]=nb("args",e,t,n);return[f.matMul({a:nb("a",e,t,n),b:nb("b",e,t,n),transposeA:nb("transposeA",e,t,n),transposeB:nb("transposeB",e,t,n),bias:l,activation:i,preluActivationWeights:c,leakyreluAlpha:u})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"normalization":return ui(()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Ds(nb("x",e,t,n),nb("mean",e,t,n),nb("variance",e,t,n),nb("offset",e,t,n),nb("scale",e,t,n),nb("epsilon",e,t,n))];case"LRN":return[Aa(nb("x",e,t,n),nb("radius",e,t,n),nb("bias",e,t,n),nb("alpha",e,t,n),nb("beta",e,t,n))];case"Softmax":return[Jo(nb("x",e,t,n))];case"LogSoftmax":return[Fa(nb("x",e,t,n))];case"SparseToDense":return[Tu(nb("sparseIndices",e,t,n),nb("outputShape",e,t,n),nb("sparseValues",e,t,n),nb("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"reduction":return ui(()=>((e,t,n)=>{switch(e.op){case"Max":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[La(nb("x",e,t,n),r,i)]}case"Mean":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[Qa(nb("x",e,t,n),r,i)]}case"Min":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[eo(nb("x",e,t,n),r,i)]}case"Sum":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[Oa(nb("x",e,t,n),r,i)]}case"All":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[ts(nb("x",e,t,n),r,i)]}case"Any":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[ns(nb("x",e,t,n),r,i)]}case"ArgMax":{const r=nb("axis",e,t,n);return[rs(nb("x",e,t,n),r)]}case"ArgMin":{const r=nb("axis",e,t,n);return[is(nb("x",e,t,n),r)]}case"Prod":{const r=nb("axis",e,t,n),i=nb("keepDims",e,t,n);return[xo(nb("x",e,t,n),r,i)]}case"Cumsum":{const r=nb("axis",e,t,n),i=nb("exclusive",e,t,n),s=nb("reverse",e,t,n);return[Qs(nb("x",e,t,n),r,i,s)]}case"Bincount":const r=nb("x",e,t,n),i=nb("weights",e,t,n),s=nb("size",e,t,n);return[Fs(r,i,s)];case"DenseBincount":{const r=nb("x",e,t,n),i=nb("weights",e,t,n),s=nb("size",e,t,n),a=nb("binaryOutput",e,t,n);return[ea(r,i,s,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"slice_join":return ui(()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=nb("n",e,t,n),i=nb("axis",e,t,n);let s=nb("tensors",e,t,n);return s=s.slice(0,r),[ks(s,i)]}case"Gather":{const r=nb("x",e,t,n),i=nb("indices",e,t,n);return[ya(r,jn(i,"int32"),0)]}case"GatherV2":{const r=nb("axis",e,t,n),i=nb("batchDims",e,t,n),s=nb("x",e,t,n),a=nb("indices",e,t,n);return[ya(s,jn(a,"int32"),r,i)]}case"Reverse":{const r=nb("dims",e,t,n),i=[];for(let e=0;e<r.length;e++)r[e]&&i.push(e);const s=nb("x",e,t,n);return[Oo(s,i)]}case"ReverseV2":{const r=nb("axis",e,t,n),i=nb("x",e,t,n);return[Oo(i,r)]}case"Slice":{const r=nb("begin",e,t,n),i=nb("size",e,t,n);return[As(nb("x",e,t,n),r,i)]}case"StridedSlice":{const r=nb("begin",e,t,n),i=nb("end",e,t,n),s=nb("strides",e,t,n),a=nb("beginMask",e,t,n),o=nb("endMask",e,t,n),u=nb("ellipsisMask",e,t,n),l=nb("newAxisMask",e,t,n),c=nb("shrinkAxisMask",e,t,n),h=nb("x",e,t,n);return[uu(h,r,i,s,a,o,u,l,c)]}case"Pack":return ui(()=>{const i=nb("axis",e,t,n),s=nb("tensors",e,t,n),a=s[0].shape,o=su(s[0]).shape,u=s.map(e=>{const t=r.arraysEqual(e.shape,a);if(!t&&!r.arraysEqual(su(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:Ss(e,a)});return[au(u,i)]});case"Unpack":{const r=nb("axis",e,t,n),i=nb("tensor",e,t,n);return bu(i,r)}case"Tile":{const r=nb("reps",e,t,n);return[fa(nb("x",e,t,n),r)]}case"Split":case"SplitV":{const r=nb("axis",e,t,n),i=nb("numOrSizeSplits",e,t,n),s=nb("x",e,t,n);return nu(s,i,r)}case"ScatterNd":{const r=nb("indices",e,t,n),i=nb("values",e,t,n),s=nb("shape",e,t,n);return[ku(r,i,s)]}case"GatherNd":{const r=nb("x",e,t,n),i=nb("indices",e,t,n);return[Au(r,i)]}case"SparseToDense":{const r=nb("sparseIndices",e,t,n),i=nb("outputShape",e,t,n),s=nb("sparseValues",e,t,n),a=nb("defaultValue",e,t,n);return[Tu(r,s,i,s.dtype===a.dtype?a:jn(a,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"spectral":return ui(()=>((e,t,n)=>{switch(e.op){case"FFT":return[Qo(nb("x",e,t,n))];case"IFFT":return[eu(nb("x",e,t,n))];case"RFFT":return[ru(nb("x",e,t,n))];case"IRFFT":return[tu(nb("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"transformation":return ui(()=>((e,t,n)=>{switch(e.op){case"Cast":return[jn(nb("x",e,t,n),nb("dtype",e,t,n))];case"ExpandDims":{const r=nb("axis",e,t,n);return[da(nb("x",e,t,n),r)]}case"Squeeze":{const r=nb("axis",e,t,n);return[su(nb("x",e,t,n),r)]}case"Reshape":return[Ss(nb("x",e,t,n),nb("shape",e,t,n))];case"MirrorPad":return[no(nb("x",e,t,n),nb("padding",e,t,n),nb("mode",e,t,n))];case"PadV2":case"Pad":return[po(nb("x",e,t,n),nb("padding",e,t,n),nb("constantValue",e,t,n))];case"SpaceToBatchND":{const r=nb("blockShape",e,t,n),i=nb("paddings",e,t,n);return[vo(nb("x",e,t,n),r,i)]}case"BatchToSpaceND":{const r=nb("blockShape",e,t,n),i=nb("crops",e,t,n);return[Is(nb("x",e,t,n),r,i)]}case"DepthToSpace":{const r=nb("blockSize",e,t,n),i=nb("dataFormat",e,t,n).toUpperCase();return[ta(nb("x",e,t,n),r,i)]}case"BroadcastTo":return[Ps(nb("x",e,t,n),nb("shape",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=nb("keyDType",e,t,n),s=nb("valueDType",e,t,n),a=new Zb(i,s);return r.addHashTable(e.name,a),[a.handle]}case"LookupTableImport":case"LookupTableImportV2":{const i=nb("tableHandle",e,t,n,r),s=nb("keys",e,t,n),a=nb("values",e,t,n),o=r.getHashTableById(i.id);return[await o.import(s,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=nb("tableHandle",e,t,n,r),s=nb("keys",e,t,n),a=nb("defaultValue",e,t,n),o=r.getHashTableById(i.id);return[await o.find(s,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,i);case"custom":const s=eb(e.op);if(s&&s.customExecutor)return s.customExecutor(new Ub(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return r.isPromise(s)?s.then(e=>[].concat(e)):[].concat(s)}class Jb{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Qb(e,t,n,r){const i=new Set,s=[];let a=null,o=null;const u=new Set,l=Object.keys(e).map(e=>ab(e)[0]);let c=[];null!=r&&(c=r.map(e=>ab(e.name)[0]));const h=[...t];for(;h.length>0;){const e=h.pop();(r_(e)||i_(e)||s_(e))&&null==a&&(a=e,o=a.children.map(e=>e.name).filter(e=>i.has(e))),i.add(e.name),null==n[e.name]&&-1===l.indexOf(e.name)&&-1===c.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{u.has(e.name)||(u.add(e.name),h.push(e))}):s.push(e.name))}return{inputs:e,outputs:t,usedNodes:i,missingInputs:s,dynamicNode:a,syncInputs:o}}const e_=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],t_=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],n_=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function r_(e){return e_.indexOf(e.op)>=0}function i_(e){return t_.indexOf(e.op)>=0}function s_(e){return n_.indexOf(e.op)>=0}class a_{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new a_(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=Qb(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:s}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has `+`the dynamic op '${i.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=t.map(e=>e.name),i=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs `+`[${i}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:i}=n,s=[],a=Object.keys(i).map(e=>ab(e)[0]).map(t=>e.nodes[t]),o=e.initNodes;a.forEach(e=>{r.has(e.name)&&s.push(e)}),e.weights.forEach(e=>{r.has(e.name)&&s.push(e)}),null!=o&&o.forEach(e=>{r.has(e.name)&&s.push(e)});const u=new Set,l=[];for(;s.length>0;){const e=s.pop();u.add(e.name),t[e.name]||l.push(e),e.children.forEach(e=>{!u.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>u.has(e.name))&&s.push(e)})}return l}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const i=n.map(e=>this.graph.nodes[ab(e)[0]]),s=t.map(e=>ab(e)[0]);let a=s.map(e=>this.graph.nodes[e]);0===a.length&&(a=this._outputs);const o=this.getCompilationKey(i,a);let u=this.compiledMap.get(o);null==u&&(u=this.compile(e,a),this.compiledMap.set(o,u));const l={},c={};return ui(()=>{const n=new Jb(this.weightMap,l,c,this.functionExecutorMap),i=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=ab(t),s=[];s[r]=e[t],i[n]=s});const a=this.getFrozenTensorIds(i),o={};for(let e=0;e<u.length;e++){const t=u[e];if(!i[t.name]){const e=Yb(t,i,n,this._resourceManager);if(r.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. `+"Please use model.executeAsync() instead.");i[t.name]=e,this.checkTensorForDisposal(t.name,t,i,n,a,s,o)}}return null==this.parent&&n.dispose(a),t.map(e=>rb(e,i,n))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,i,s,a){"control"!==t.category&&-1===s.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(a[e.id]=(a[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){const t=function(e,t,n){return t[sb(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach(e=>{if(e&&!i.has(e.id)){const t=a[e.id];1===t?(e.dispose(),delete a[e.id]):null!=t&&a[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},i={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));const s=new Jb(this.weightMap,r,i,this.functionExecutorMap),a=await this.executeWithControlFlow(e,s,t,n),o=t.map(e=>rb(e,a,s)),u=o.map(e=>e.id),l=Object.keys(e).map(t=>e[t].id),c=new Set([...u,...l,...this.weightIds]);return Object.keys(a).forEach(e=>{a[e].forEach(e=>{!e||e.isDisposed||c.has(e.id)||e.dispose()})}),null==this.parent&&s.dispose(c),o}async executeFunctionAsync(e,t,n){const r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const i=Object.keys(e),s=i.map(e=>this.graph.nodes[ab(e)[0]]),a=n.map(e=>ab(e)[0]);let o=a.map(e=>this.graph.nodes[e]);0===o.length&&(o=this._outputs);const{usedNodes:u,missingInputs:l,dynamicNode:c,syncInputs:h}=Qb(e,o,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=ab(t),i=[];i[r]=e[t],p[n]=i});const f={},m=this.getFrozenTensorIds(p),g={};for(;d.length>0;){const e=this.processStack(s,d,t,p,g,m,a,f,u);await Promise.all(e)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=o.filter(e=>!r_(e)&&!rb(e.name,p,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=c&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${y}] from the provided `+`inputs [${i}]. Consider providing the following inputs: `+`[${l}]. ${e}`)}return p}processStack(e,t,n,i,s,a,o,u,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let h="";if("Enter"===e.node.op&&nb("isConstant",e.node,i,n)&&([h]=ib(e.node.name,n)),null==i[e.node.name]){const d=Yb(e.node,i,n,this._resourceManager);h||([h]=ib(e.node.name,n));const p=n.currentContext;r.isPromise(d)?c.push(d.then(r=>(i[h]=r,n.currentContext=p,this.checkTensorForDisposal(h,e.node,i,n,a,o,u),this.processChildNodes(e.node,t,n,i,s,l),r))):(i[h]=d,this.checkTensorForDisposal(h,e.node,i,n,a,o,u),this.processChildNodes(e.node,t,n,i,s,l))}else this.processChildNodes(e.node,t,n,i,s,l)}return c}processChildNodes(e,t,n,r,i,s){e.children.forEach(e=>{const[a]=ib(e.name,n);!i[a]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!rb(e,r,n))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!rb(e,r,n))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const n=e[t],[i]=ab(t),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const e=s.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);r.assert(t,()=>`The shape of dict['${s.name}'] provided in `+`model.execute(dict) must be [${e}], but was `+`[${n.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&r.assert(n.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in `+"model.execute(dict) must be "+`${s.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){const t={};for(const n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter(e=>{const[t]=ab(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]?this._signature.outputs[e].name:e,{})}checkOutputs(e){e.forEach(e=>{const[t]=ab(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}}class o_{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class u_{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new o_}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=a.browserHTTPRequest(e,this.loadOptions);else{const t=a.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(a.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for `+`URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=a.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new a_(kb.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=kb.Instance.transformGraph(e.modelInitializer);this.initializer=new a_(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=a.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for `+`URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof kt||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,r)=>(t[n]=e[r],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function l_(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}model.json?tfjs-format=file`);const n=new u_(e,t);return await n.load(),n}var c_,h_=n("YSVl");function d_(e,t,n=new Map,r=new Set){if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(m_(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const s in e){const a=d_(e[s],t,n,r);i[s]=a}return r.delete(e),i}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,i.value),i.value}function p_(e){return null===e?null:m_(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function f_(e,t){const n=new Map;d_(e,t,n);for(const i of Array.from(n.keys())){const e=n.get(i);if(r.isPromise(e)){const t=await e;n.set(i,t)}}return d_(e,t,n)}function m_(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof kt))}function g_(e){return e instanceof kt?{value:e.clone(),recurse:!1}:m_(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class y_{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class v_ extends y_{constructor(){super(v_.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function b_(e){return new w_(e)}function __(e){return new S_(e)}v_.INITIAL_CAPACITY=32;class x_{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new N_(this,e)}filter(e){return new A_(this,e)}map(e){return new M_(this,e)}mapAsync(e){return new I_(this,e)}serialMapAsync(e){return new I_(this,e).serial()}flatmap(e){return new R_(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new T_(this,e,t)}columnMajorBatch(e,t=!0,n=p_){return this.rowMajorBatch(e,t).map(e=>function(e,t=p_){return function e(t,n,r=new Set){const i=t[0];if(r.has(i))throw new Error("Circular references are not supported.");const s=n(t);if(s.recurse&&null!==s.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse){if(m_(i)){const s=Array.isArray(i)?[]:{};r.add(i);for(const a in i){const i=e(t.map(e=>e[a]),n,r);s[a]=i}return r.delete(i),s}throw new Error(`Can't recurse into non-iterable type: ${i}`)}return s.value}(e,t)}(e,n))}concatenate(e,t){return new L_(b_([this,e]),t)}take(e){return e<0||null==e?this:new k_(this,e)}skip(e){return e<0||null==e?this:new C_(this,e)}prefetch(e){return new F_(this,e)}shuffle(e,t){return new P_(this,e,t)}serial(){return new E_(this)}}class w_ extends x_{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:(t=e,d_(t,g_)),done:!1};var t}}class S_ extends x_{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class E_ extends x_{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class C_ extends x_{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;li(e.value)}return this.upstream.next()}}class k_ extends x_{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class T_ extends x_{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class A_ extends x_{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;li(e.value)}}}class M_ extends x_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=i.getTensorsInContainer(e.value),n=this.transform(e.value),r=i.getTensorsInContainer(n);for(const s of t)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class N_ extends x_{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class I_ extends x_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=i.getTensorsInContainer(e.value),n=await this.transform(e.value),r=i.getTensorsInContainer(n);for(const s of t)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class D_ extends x_{constructor(){super(),this.outputQueue=new v_,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class R_ extends D_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=i.getTensorsInContainer(e.value),n=this.transform(e.value),r=i.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const s of t)i.isTensorInList(s,r)||s.dispose();return!0}}class L_ extends x_{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(c_||(c_={}));class O_ extends x_{constructor(e,t=c_.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;const r=await f_(this.iterators,(function(e){return e instanceof x_?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}}));if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case c_.FAIL:throw new Error("Zipped streams should have the same length. "+`Mismatched at element ${this.count}.`);case c_.SHORTEST:return{value:null,done:!0}}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class F_ extends x_{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new y_(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class P_ extends F_{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=h_.alea(n||r.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class z_{constructor(){this.size=null}batch(e,t=!0){const n=this;let i;return r.assert(e>0,()=>`batchSize needs to be positive, but it is\n      ${e}`),i=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),$_(async()=>(await n.iterator()).columnMajorBatch(e,t,V_),i)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,$_(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,$_(async()=>(await t.iterator()).filter(t=>ui(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return $_(async()=>(await t.iterator()).map(t=>ui(()=>e(t))),this.size)}mapAsync(e){const t=this;return $_(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return $_(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,$_(async()=>{return n=__(async()=>({value:await t.iterator(),done:!1})).take(e),new L_(n,void 0);var n},n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,$_(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+`bufferSize to the dataset size (${this.size} elements)`);const i=this,s=h_.alea(t||r.now().toString());return $_(async()=>{let t=s.int32();return n&&(t+=s.int32()),(await i.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,$_(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function $_(e,t=null){return new class extends z_{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function B_(e){return $_(async()=>b_(e),e.length)}function U_(e){if(!m_(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(const n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return $_(async()=>function(e,t=c_.FAIL){return new O_(e,t)}(await f_(e,e=>{if(e instanceof z_)return{value:e.iterator(),recurse:!1};if(m_(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),c_.SHORTEST),t)}function V_(e){return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof kt||r.isTypedArray(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof kt?au(e):rn(e)}(e),recurse:!1}:{value:null,recurse:!0};var t,n}z_.MAX_BUFFER_SIZE=1e4;class W_ extends z_{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}}const H_=Symbol("out"),G_=Symbol("field"),j_=Symbol("quote"),q_=Symbol("quoteafterquote"),K_=Symbol("quoteinquote");class X_ extends z_{constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new W_(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(r.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&r.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);const t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(r.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");return this.parseRow(t.value,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){const t=this.parseRow(e),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){const s=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||a){const o=t[i];let u=null;if(""===o)if(a&&void 0!==a.default)u=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${s} is empty in this line: ${e}`);u=void 0}else{const e=Number(o);if(isNaN(e))u=a&&"bool"===a.dtype?this.getBoolean(o):o;else if(a&&a.dtype)switch(a.dtype){case"float32":u=e;break;case"int32":u=Math.floor(e);break;case"bool":u=this.getBoolean(o);break;default:u=e}else u=e}a&&a.isLabel?r[s]=u:n[s]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const n=[];let r=0;const i=e.length;let s=H_;for(let a=0;a<i;a++)switch(s){case H_:switch(e.charAt(a)){case'"':r=a+1,s=j_;break;case this.delimiter:if(r=a+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=H_;break;default:s=G_,r=a}break;case G_:switch(e.charAt(a)){case this.delimiter:n.push(e.substring(r,a)),s=H_,r=a+1}break;case j_:switch(e.charAt(a)){case'"':s=q_}break;case q_:switch(e.charAt(a)){case this.delimiter:n.push(e.substring(r,a-1)),s=H_,r=a+1;break;case'"':s=j_;break;default:s=K_}break;case K_:switch(e.charAt(a)){case'"':s=j_}}if(n.push(s===q_?e.substring(r,i-1):e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}class Z_ extends x_{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between "+`2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if($e().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const t=new Z_(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error(`Error thrown while initializing video stream: ${n.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: "+`Expected: ${this.sampleRateHz}; `+`Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t;const n=await this.getAudioData();if(this.includeSpectrogram){const t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],t=[];let n=0;return new Promise(r=>{const i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){const n=new Float32Array(r.sizeFromShape(t));return n.set(e,n.length-e.length),rn(n,t)}}class Y_ extends x_{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=cu([0],"int32"),this.webcamConfig.centerCrop){const e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2;this.cropBox=hu([r,n,t+r,n+e],[1,4])}else this.cropBox=hu([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if($e().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}const n=new Y_(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&r.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. `+"Please provide 'user' or 'environment'");try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=u.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return ui(()=>{const t=da(jn(e,"float32"),0);let n;return n=Tl.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear"),Ss(n,n.shape.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}class J_{}class Q_ extends x_{split(e){return new ex(this,e)}}class ex extends Q_{constructor(e,t){super(),this.upstream=e,this.impl=new tx(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class tx extends D_{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(const n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}}class nx extends x_{decodeUTF8(){return new rx(this)}}class rx extends Q_{constructor(e){super(),this.upstream=e,this.impl=new ix(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class ix extends D_{constructor(e){if(super(),this.upstream=e,$e().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=n(5);this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const e=await this.upstream.next();let t,n;return!e.done&&(t=e.value,n=$e().get("IS_BROWSER")?this.decoder.decode(t,{stream:!0}):this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0)}}class sx extends nx{constructor(e,t={}){super(),this.file=e,this.options=t,r.assert(e instanceof Uint8Array||!!$e().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise((e,t)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(i)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));const i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n});return{value:await e,done:!1}}}function ax(e){return"string"==typeof e&&"file://"===e.substr(0,7)}class ox extends J_{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(ax(this.input)&&$e().get("IS_NODE")){const e=n(6);this.input=e.readFileSync(this.input.substr(7))}return new sx(this.input,this.options)}}class ux extends J_{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return ax(this.url)?new ox(this.url,this.fileOptions).iterator():async function(e,t={}){let n,i;var s;"string"==typeof e?n=e:(n=e.url,i={method:(s=e).method,headers:s.headers,body:s.body,mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,integrity:s.integrity});const a=await r.fetch(n,i);if(a.ok){const e=new Uint8Array(await a.arrayBuffer());return new sx(e,t)}throw new Error(a.statusText)}(this.url,this.fileOptions)}}function lx(e,t={}){return new X_(new ux(e),t)}function cx(e){const t=__(e);return $_(async()=>t)}function hx(e){return $_(async()=>{const t=await e();return __(()=>t.next())})}async function dx(e,t){return Y_.create(e,t)}async function px(e){return Z_.create(e)}const fx="3.1.0";function mx(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&r.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}const gx=y.whereImpl;class yx extends H{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new W(this,si())}nextDataId(){return yx.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,$e().get("IS_NODE")&&g.warn("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let i;if("string"===t&&null!=n&&n.length>0&&r.isString(n[0])){const s=n.map(e=>r.encodeString(e));i=this.write(s,e,t)}else i=this.write(n,e,t);return{dataId:i,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return g.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>r.decodeString(e))}catch(i){throw new Error("Failed to decode encoded string bytes into utf-8")}return Gn(e.shape,e.dtype,n)}makeOutput(e,t,n){const r=this.write(e,t,n);return si().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=r.now();return e(),{kernelMs:r.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){mx([e],"where");const t=this.readSync(e.dataId);return gx(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function vx(e,t,n){return({inputs:i,attrs:s,backend:a})=>{const{x:o}=i;if(mx(o,e),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const u=a,l=u.data.get(o.dataId).values,c=r.sizeFromShape(o.shape),h=n||o.dtype,d=r.getArrayFromDType(h,c);for(let e=0;e<c;++e)d[e]=t(l[e],s);return u.makeTensorInfo(o.shape,h,d)}}function bx(e,t,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;if(mx(a,e),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const o=s,u=o.data.get(a.dataId).values,l=n||a.dtype,c=t(u,l,i);return o.makeTensorInfo(a.shape,l,c)}}yx.nextDataId=0,vi("cpu",()=>new yx,1);const _x=vx("Elu",e=>e>=0?e:Math.exp(e)-1),xx={kernelName:"Elu",backendName:"cpu",kernelFunc:_x};function wx(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Sx={kernelName:"Identity",backendName:"cpu",kernelFunc:wx};function Ex(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{alpha:a}=i;mx([s],"leakyRelu");const o=r.sizeFromShape(s.shape),u=n.data.get(s.dataId).values,l=r.getTypedArrayFromDType("float32",o);for(let r=0;r<u.length;r++)l[r]=u[r]<0?a*u[r]:u[r];return n.makeTensorInfo(s.shape,"float32",l)}const Cx={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:Ex};function kx(e){return(t,n,i,s,a)=>{const o=g.assertAndGetBroadcastShape(t,n),u=o.length,l=r.computeStrides(o),c=r.sizeFromShape(o),h=r.getTypedArrayFromDType(a,c),d=t.length,p=n.length,f=r.computeStrides(t),m=r.computeStrides(n),y=g.getBroadcastDims(t,o),v=g.getBroadcastDims(n,o);if(y.length+v.length===0)for(let r=0;r<h.length;++r)h[r]=e(i[r%i.length],s[r%s.length]);else for(let g=0;g<h.length;++g){const t=r.indexToLoc(g,u,l),n=t.slice(-d);y.forEach(e=>n[e]=0);const a=r.locToIndex(n,d,f),o=t.slice(-p);v.forEach(e=>o[e]=0);const c=r.locToIndex(o,p,m);h[g]=e(i[a],s[c])}return[h,o]}}const Tx=kx((e,t)=>e<0?t*e:e);function Ax(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;mx([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,u]=Tx(r.shape,i.shape,s,a,r.dtype);return n.makeTensorInfo(u,r.dtype,o)}const Mx={kernelName:"Prelu",backendName:"cpu",kernelFunc:Ax},Nx=vx("Relu",e=>Math.max(0,e)),Ix={kernelName:"Relu",backendName:"cpu",kernelFunc:Nx},Dx=vx("Relu6",e=>Math.min(Math.max(0,e),6)),Rx={kernelName:"Relu6",backendName:"cpu",kernelFunc:Dx};function Lx(e,t,n,r,i){if("linear"===n)return wx({inputs:{x:t},backend:e});if("relu"===n)return Nx({inputs:{x:t},backend:e});if("elu"===n)return _x({inputs:{x:t},backend:e});if("relu6"===n)return Dx({inputs:{x:t},backend:e});if("prelu"===n)return Ax({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Ex({inputs:{x:t},backend:e,attrs:{alpha:i}});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Ox(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const Fx={kernelName:"Complex",backendName:"cpu",kernelFunc:Ox};function Px(e,t,n="float32"){if("complex64"===n)return Ox({inputs:{real:Px(e,t,"float32"),imag:Px(e,t,"float32")},backend:e});const i=r.makeZerosTypedArray(r.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function zx(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const $x={kernelName:"Real",backendName:"cpu",kernelFunc:zx};function Bx(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{dtype:a}=i;if("complex64"===a){if("complex64"===s.dtype)return wx({inputs:{x:s},backend:n});const e=Px(n,s.shape,s.dtype),t=Bx({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),r=Ox({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===s.dtype){const e=zx({inputs:{input:s},backend:n}),t=Bx({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!r.hasEncodingLoss(s.dtype,a)){const e=wx({inputs:{x:s},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}if("int32"===a){const e=n.data.get(s.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(s.shape,"int32",t)}if("bool"===a){const e=n.data.get(s.dataId).values,t=r.toTypedArray([0],s.dtype),[i,a]=kx((e,t)=>e!==t?1:0)(s.shape,[],e,t,"bool");return n.makeTensorInfo(a,"bool",i)}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const Ux={kernelName:"Cast",backendName:"cpu",kernelFunc:Bx};function Vx(e,t,n,r){return null==n?({inputs:n,backend:i})=>{const{a:s,b:a}=n,o=i;mx([s,a],e);const u=o.data.get(s.dataId).values,l=o.data.get(a.dataId).values,c=r||s.dtype,[h,d]=t(s.shape,a.shape,u,l,c);return o.makeTensorInfo(d,c,h)}:({inputs:e,backend:i})=>{const{a:s,b:a}=e,o=i;if("complex64"===s.dtype||"complex64"===a.dtype){const e=Bx({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),t=o.data.get(e.dataId),r=t.complexTensorInfos.imag,i=o.data.get(t.complexTensorInfos.real.dataId).values,u=o.data.get(r.dataId).values,l=Bx({inputs:{x:a},backend:o,attrs:{dtype:"complex64"}}),c=o.data.get(l.dataId),h=c.complexTensorInfos.imag,d=o.data.get(c.complexTensorInfos.real.dataId).values,p=o.data.get(h.dataId).values,[f,m,g]=n(s.shape,a.shape,i,u,d,p),y=o.makeTensorInfo(g,"float32",f),v=o.makeTensorInfo(g,"float32",m),b=Ox({inputs:{real:y,imag:v},backend:o});return o.disposeIntermediateTensorInfo(e),o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(v),b}{const e=o.data.get(s.dataId).values,n=o.data.get(a.dataId).values,i=r||s.dtype,[u,l]=t(s.shape,a.shape,e,n,i);return o.makeTensorInfo(l,i,u)}}}function Wx(e){return(t,n,i,s,a,o)=>{const u=g.assertAndGetBroadcastShape(t,n),l=r.sizeFromShape(u),c=u.length,h=r.computeStrides(u),d=r.getTypedArrayFromDType("float32",l),p=r.getTypedArrayFromDType("float32",l),f=g.getBroadcastDims(t,u),m=g.getBroadcastDims(n,u),y=g.mergeRealAndImagArrays(i,s),v=g.mergeRealAndImagArrays(a,o),b=t.length,_=r.computeStrides(t),x=n.length,w=r.computeStrides(n);if(f.length+m.length===0)for(let r=0;r<d.length;r++){const t=r%y.length,n=r%v.length,i=e(y[2*t],y[2*t+1],v[2*n],v[2*n+1]);d[r]=i.real,p[r]=i.imag}else for(let g=0;g<d.length;g++){const t=r.indexToLoc(g,c,h),n=t.slice(-b);f.forEach(e=>n[e]=0);const i=r.locToIndex(n,b,_),s=t.slice(-x);m.forEach(e=>s[e]=0);const a=r.locToIndex(s,x,w),o=e(y[2*i],y[2*i+1],v[2*a],v[2*a+1]);d[g]=o.real,p[g]=o.imag}return[d,p,u]}}const Hx=kx((e,t)=>e+t),Gx=Wx((e,t,n,r)=>({real:e+n,imag:t+r})),jx=Vx("Add",Hx,Gx),qx={kernelName:"Add",backendName:"cpu",kernelFunc:jx};function Kx(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{shape:a}=i,o=r.sizeFromShape(s.shape),u=r.inferFromImplicitShape(a,o),l=r.sizeFromShape(u);r.assert(o===l,()=>`The new shape (${u}) has ${l} elements and the old `+`shape (${s.shape}) has ${o} elements. The new shape and old `+"shape must have the same number of elements."),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.imag;c.complexTensorInfos.real.shape=u,e.shape=u}return{dataId:s.dataId,shape:u,dtype:s.dtype}}const Xx={kernelName:"Reshape",backendName:"cpu",kernelFunc:Kx};function Zx(e){const{inputs:t,backend:n,attrs:i}=e,{a:s,b:a}=t,{transposeA:o,transposeB:u}=i;mx([s,a],"matMul");const l=s.shape.length,c=a.shape.length,h=o?s.shape[l-2]:s.shape[l-1],d=u?a.shape[c-1]:a.shape[c-2],p=o?s.shape[l-1]:s.shape[l-2],f=u?a.shape[c-2]:a.shape[c-1],m=s.shape.slice(0,-2),g=a.shape.slice(0,-2),y=r.sizeFromShape(m),v=r.sizeFromShape(g);r.assert(l>=2&&c>=2&&(y===v||1===y||1===v),()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${m}) and (${g}).`);const b=(y>v?s.shape.slice(0,-2):a.shape.slice(0,-2)).concat([p,f]);r.assert(h===d,()=>`Error in matMul: inner shapes (${h}) and (`+`${d}) of Tensors with shapes ${s.shape} and `+`${a.shape} and transposeA=${o}`+` and transposeB=${u} must match.`);const _=u?[v,f,d]:[v,d,f],x=Kx({inputs:{x:s},backend:n,attrs:{shape:o?[y,h,p]:[y,p,h]}}),w=Kx({inputs:{x:a},backend:n,attrs:{shape:_}}),S=o?x.shape[1]:x.shape[2],E=o?x.shape[2]:x.shape[1],C=u?w.shape[1]:w.shape[2],k=Math.max(y,v),T=n.data.get(x.dataId).values,A=n.data.get(w.dataId).values,M=r.computeStrides(x.shape),N=r.computeStrides(w.shape),[I,D,R]=o?[M[0],1,M[1]]:[M[0],M[1],1],[L,O,F]=u?[1,N[1],N[0]]:[N[1],1,N[0]],P=E*C,z=Gn([k,E,C],x.dtype),$=z.values,B=n.blockSize;for(let r=0;r<k;r++)for(let e=0;e<E;e+=B)for(let t=0;t<C;t+=B)for(let n=0;n<S;n+=B){const i=Math.min(e+B,E),s=Math.min(t+B,C),a=Math.min(n+B,S);for(let o=e;o<i;o++)for(let e=t;e<s;e++){let t=0;for(let i=n;i<a;i++){const n=Math.min(r,y-1)*I,s=Math.min(r,v-1)*F;t+=T[n+o*D+i*R]*A[i*L+e*O+s]}$[r*P+(o*C+e)]+=t}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(b,z.dtype,z.values)}const Yx={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:Zx},Jx={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:a,preluActivationWeights:o}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:h}=r;let d,p,f;const m=[];d=Zx({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:l},backend:n}),a&&(p=jx({inputs:{a:d,b:a},backend:n}),m.push(d),d=p),c&&(f=Lx(n,d,c,o,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}};function Qx(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const ew={kernelName:"Abs",backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;mx(t,"abs");let i=new Float32Array(r.sizeFromShape(t.shape));return i=Qx(n.data.get(t.dataId).values),n.makeOutput(i,t.shape,"float32")}},tw={kernelName:"Acos",backendName:"cpu",kernelFunc:vx("Acos",e=>Math.acos(e))},nw={kernelName:"Acosh",backendName:"cpu",kernelFunc:vx("Acosh",e=>Math.acosh(e))},rw={kernelName:"AddN",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;mx(t,"addN");const i=r.map(e=>n.data.get(e.dataId).values),s=Gn(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const e=i[o];for(let t=0;t<a.length;t++)a[t]+=e[t]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}};function iw(e,t,n,i,s){const a=t.length,o=r.sizeFromShape(t),u=r.computeStrides(t),l=r.computeStrides(s),c=r.getTypedArrayFromDType(n,r.sizeFromShape(s));for(let h=0;h<o;++h){const t=r.indexToLoc(h,a,u),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[i[e]];c[r.locToIndex(n,a,l)]=e[h]}return c}function sw(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:s}=n;mx(i,"transpose");const a=new Array(i.shape.length);for(let u=0;u<a.length;u++)a[u]=i.shape[s[u]];const o=iw(r.data.get(i.dataId).values,i.shape,i.dtype,s,a);return{dataId:r.write(o,a,i.dtype),shape:a,dtype:i.dtype}}const aw={kernelName:"Transpose",backendName:"cpu",kernelFunc:sw},ow={kernelName:"All",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;mx(s,"all");const u=r.parseAxisParam(a,s.shape);let l=u;const c=g.getAxesPermutation(l,s.shape.length);let h=s;null!=c&&(h=sw({inputs:{x:s},backend:n,attrs:{perm:c}}),l=g.getInnerMostAxes(l.length,s.shape.length)),g.assertAxesAreInnerMostDims("all",l,h.shape.length);const[d,p]=g.computeOutAndReduceShapes(h.shape,l),f=r.sizeFromShape(p),m=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values;for(let r=0;r<m.length;++r){const e=r*f;let t=y[e];for(let n=0;n<f;++n){const r=y[e+n];t=t&&r}m[r]=t}null!=c&&n.disposeIntermediateTensorInfo(h);const v=n.makeTensorInfo(d,h.dtype,m);if(o){const e=Kx({inputs:{x:v},backend:n,attrs:{shape:g.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(v),e}return v}},uw={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;mx(s,"any");const u=r.parseAxisParam(a,s.shape);let l=u;const c=g.getAxesPermutation(l,s.shape.length);let h=s;null!=c&&(h=sw({inputs:{x:s},backend:n,attrs:{perm:c}}),l=g.getInnerMostAxes(l.length,s.shape.length)),g.assertAxesAreInnerMostDims("any",l,h.shape.length);const[d,p]=g.computeOutAndReduceShapes(h.shape,l),f=r.sizeFromShape(p),m=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values;for(let r=0;r<m.length;++r){const e=r*f;let t=y[e];for(let n=0;n<f;++n){const r=y[e+n];t=t||r}m[r]=t}null!=c&&n.disposeIntermediateTensorInfo(h);const v=n.makeTensorInfo(d,h.dtype,m);if(o){const e=Kx({inputs:{x:v},backend:n,attrs:{shape:g.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(v),e}return v}},lw={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a}=i;mx(s,"argMax");let o=r.parseAxisParam(a,s.shape);const u=g.getAxesPermutation(o,s.shape.length);let l=s;const c=[];null!=u&&(l=sw({inputs:{x:s},backend:n,attrs:{perm:u}}),c.push(l),o=g.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],g.assertAxesAreInnerMostDims("argMax",o,l.shape.length);const[h,d]=g.computeOutAndReduceShapes(l.shape,o),p=r.sizeFromShape(h),f=r.makeZerosTypedArray(p,"int32"),m=r.sizeFromShape(d),y=n.data.get(l.dataId).values;for(let r=0;r<f.length;++r){const e=r*m;let t=y[e],n=0;for(let r=0;r<m;++r){const i=y[e+r];i>t&&(t=i,n=r)}f[r]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",f)}},cw={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a}=i;mx(s,"argMin");let o=r.parseAxisParam(a,s.shape);const u=g.getAxesPermutation(o,s.shape.length);let l=s;const c=[];null!=u&&(l=sw({inputs:{x:s},backend:n,attrs:{perm:u}}),c.push(l),o=g.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],g.assertAxesAreInnerMostDims("argMin",o,l.shape.length);const[h,d]=g.computeOutAndReduceShapes(l.shape,o),p=r.sizeFromShape(h),f=r.makeZerosTypedArray(p,"int32"),m=r.sizeFromShape(d),y=n.data.get(l.dataId).values;for(let r=0;r<f.length;++r){const e=r*m;let t=y[e],n=0;for(let r=0;r<m;++r){const i=y[e+r];i<t&&(t=i,n=r)}f[r]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(h,"int32",f)}},hw={kernelName:"Asin",backendName:"cpu",kernelFunc:vx("Asin",e=>Math.asin(e))},dw={kernelName:"Asinh",backendName:"cpu",kernelFunc:vx("Asinh",e=>Math.asinh(e))},pw={kernelName:"Atan",backendName:"cpu",kernelFunc:vx("Atan",e=>Math.atan(e))},fw={kernelName:"Atan2",backendName:"cpu",kernelFunc:Vx("Atan2",kx((e,t)=>Math.atan2(e,t)))},mw={kernelName:"Atanh",backendName:"cpu",kernelFunc:vx("Atanh",e=>Math.atanh(e))};function gw(e,t,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,u=i.dilationHeight,l=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Gn(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let _=0;_<i.batchSize;++_){const t=_*y,n=_*r[0];for(let m=0;m<i.inChannels;++m)for(let y=0;y<i.outHeight;++y){const _=y*a-d,x=Math.max(0,_),w=Math.min(i.inHeight,c+_),S=t+y*v;for(let t=0;t<i.outWidth;++t){const a=t*o-p,c=Math.max(0,a),d=Math.min(i.inWidth,h+a);let y=f,v=0,_=0;for(let t=x;t<w;t+=u){const i=n+t*r[1];for(let t=c;t<d;t+=l){const n=e[i+t*r[2]+m];"max"===s&&n>y?y=n:"avg"===s&&(v+=n,_++)}if(isNaN(y))break}g[S+t*b+m]="avg"===s?v/_:y}}}return m}function yw(e,t,n,r,i=!1,s=!1){const a=Gn(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=Gn(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*o-p;let y=n;for(;y<0;)y+=l;const v=Math.min(r.inHeight,h+n);for(let o=0;o<r.outWidth;++o){const h=o*u-f;let p=h;for(;p<0;)p+=c;const b=Math.min(r.inWidth,d+h);let _=Number.NEGATIVE_INFINITY,x=-1;for(let t=y;t<v;t+=l){const a=t-n;for(let n=p;n<b;n+=c){const o=n-h,u=m.get(g,t,n,e);u>_&&(_=u,x=i?s?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:a*d+o)}}a.set(x,g,t,o,e)}}return a}function vw(e,t,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,u=i.strideWidth,l=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,v="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Gn(i.outShape,n),_=b.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],w=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let C=0;C<i.batchSize;++C){const t=C*x,n=C*r[0];for(let b=0;b<i.inChannels;++b)for(let x=0;x<i.outDepth;++x){const C=x*a-m;let k=C;for(;k<0;)k+=l;const T=Math.min(i.inDepth,d+C),A=t+x*w;for(let t=0;t<i.outHeight;++t){const a=t*o-g;let d=a;for(;d<0;)d+=c;const m=Math.min(i.inHeight,p+a),x=A+t*S;for(let t=0;t<i.outWidth;++t){const a=t*u-y;let o=a;for(;o<0;)o+=h;const p=Math.min(i.inWidth,f+a),g=x+t*E;let w=v,S=0,C=0;for(let t=k;t<T;t+=l){const i=n+t*r[1];for(let t=d;t<m;t+=c){const n=i+t*r[2];for(let t=o;t<p;t+=h){const i=e[n+t*r[3]+b];if("max"===s&&i>w?w=i:"avg"===s&&(S+=i,C++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}_[g+b]="avg"===s?S/C:w}}}}return b}const bw={kernelName:"AvgPool",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t;mx(s,"avgPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=i;r.assert(g.eitherStridesOrDilationsAreOne(o,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '1'`);const c=g.computePool2DInfo(s.shape,a,o,1,u,l);let h;if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))h=wx({inputs:{x:s},backend:n});else{const e=n.data.get(s.dataId).values,t=r.computeStrides(s.shape),i=gw(e,0,s.dtype,t,c,"avg");h=n.makeTensorInfo(c.outShape,s.dtype,i.values)}return h}},_w={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{filterSize:a,strides:o,pad:u,dimRoundingMode:l,dataFormat:c}=i;mx(s,"avgPool3d");const h=g.computePool3DInfo(s.shape,a,o,1,u,l,c),d=vw(n.data.get(s.dataId).values,0,s.dtype,r.computeStrides(s.shape),h,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},xw={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=r;mx([i,s],"avgPool3DGrad");const c=g.computePool3DInfo(s.shape,a,o,1,u,l),h=c.strideDepth,d=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,y=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,_=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,E=x-1-c.padInfo.front,C=S-1-c.padInfo.left,k=w-1-c.padInfo.top,T=Gn(s.shape,"float32"),A=1/(f*m*y),M=n.bufferSync(i);for(let g=0;g<c.batchSize;++g)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-E,s=n-k,a=r-C;let o=0;for(let t=0;t<x;t+=v){const n=(i+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=b){const r=(s+t)/d;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<S;t+=_){const i=(a+t)/p;i<0||i>=c.outWidth||Math.floor(i)!==i||(o+=M.get(g,n,r,i,e))}}}T.set(o*A,g,t,n,r,e)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}},ww={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s;mx([i,s],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=g.computePool2DInfo(a.shape,o,u,1,l),h=c.strideHeight,d=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,_=b-1-c.padInfo.left,x=v-1-c.padInfo.top,w=Gn(a.shape,"float32"),S=1/(p*f),E=n.data.get(i.dataId).values,C=Gn(i.shape,"float32",E);for(let g=0;g<c.batchSize;++g)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-x,i=n-_;let s=0;for(let t=0;t<v;t+=m){const n=(r+t)/h;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=y){const r=(i+t)/d;r<0||r>=c.outWidth||Math.floor(r)!==r||(s+=C.get(g,n,r,e))}}w.set(s*S,g,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},Sw={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,scale:a,offset:o,mean:u,variance:l}=t;r.assert(u.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),r.assert(null==o||u.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),r.assert(null==a||u.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),mx([s,u,l,a,o],"batchNorm");let{varianceEpsilon:c}=i;null==c&&(c=.001);const h=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,p=n.data.get(l.dataId).values,f=a?n.data.get(a.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(h.length),y=m.length,v=f.length,b=p.length,_=d.length;let x=0,w=0,S=0,E=0;for(let r=0;r<h.length;++r)g[r]=m[x++]+(h[r]-d[w++])*f[S++]/Math.sqrt(p[E++]+c),x>=y&&(x=0),w>=_&&(w=0),S>=v&&(S=0),E>=b&&(E=0);return n.makeTensorInfo(s.shape,s.dtype,g)}};function Ew(e,t,n,i,s){const a=h.isSliceContinous(i,t,n),o=r.sizeFromShape(n),u=r.computeStrides(i);if(a){const n=h.computeFlatOffset(t,u);return"string"===s?e.slice(n,n+o):e.subarray(n,n+o)}const l=Gn(i,s,"string"===s?g.fromUint8ToStringArray(e):e),c=Gn(n,s);for(let r=0;r<c.size;++r){const e=c.indexToLoc(r),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===s?g.fromStringArrayToUint8(c.values):c.values}function Cw(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,size:a}=r;mx(i,"slice");const[o,u]=h.parseSliceParams(i,s,a);h.assertParamsValid(i,o,u);const l=Ew(n.data.get(i.dataId).values,o,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,l)}const kw={kernelName:"Slice",backendName:"cpu",kernelFunc:Cw},Tw={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,crops:a}=r;mx([i],"batchToSpaceND");const o=s.reduce((e,t)=>e*t),u=g.getReshaped(i.shape,s,o),l=g.getPermuted(u.length,s.length),c=g.getReshapedPermuted(i.shape,s,o),h=g.getSliceBeginCoords(a,s.length),d=g.getSliceSize(c,a,s.length),p=Kx({inputs:{x:i},backend:n,attrs:{shape:u}}),f=sw({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Kx({inputs:{x:f},backend:n,attrs:{shape:c}}),y=Cw({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}};function Aw(e,t,n,i,s){const a=r.sizeFromShape(i),o=r.makeZerosTypedArray(s,n);for(let r=0;r<e.length;r++){const n=e[r];if(n<0)throw new Error("Input x must be non-negative!");n>=s||(o[n]+=a>0?t[r]:1)}return o}function Mw(e,t,n,r=!1){const i=e.shape[0],s=e.shape[1],a=Gn([i,n],t.dtype);for(let o=0;o<i;o++)for(let i=0;i<s;i++){const s=e.get(o,i);if(s<0)throw new Error("Input x must be non-negative!");s>=n||a.set(r?1:t.size>0?a.get(o,s)+t.get(o,i):a.get(o,s)+1,o,s)}return a}const Nw={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a}=r,o=Aw(n.data.get(i.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,o)}};function Iw(e){return(t,n,i)=>{const s=r.getTypedArrayFromDType(n,t.length);for(let r=0;r<t.length;++r)s[r]=e(t[r],i);return s}}const Dw=Iw(e=>Math.ceil(e)),Rw={kernelName:"Ceil",backendName:"cpu",kernelFunc:bx("Ceil",Dw)},Lw={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:vx("ClipByValue",(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e)},Ow={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,i=new Float32Array(r.sizeFromShape(t.shape)),s=n.data.get(t.dataId),a=s.complexTensorInfos.imag,o=n.data.get(s.complexTensorInfos.real.dataId).values,u=n.data.get(a.dataId).values;for(let r=0;r<o.length;r++)i[r]=Math.hypot(o[r],u[r]);return n.makeOutput(i,t.shape,"float32")}};function Fw(e,t,n,i){const s=r.getArrayFromDType(n,r.sizeFromShape(t));if(i&&"string"!==n){let t=0;e.forEach(e=>{const n=r.sizeFromShape(e.shape);s.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const i="string"===n?g.fromUint8ToStringArray(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)s[o+t]=i[a++]}r+=e.shape[1]})}return s}function Pw(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const zw={kernelName:"Imag",backendName:"cpu",kernelFunc:Pw};function $w(e){const{inputs:t,backend:n,attrs:i}=e,{axis:s}=i,a=r.parseAxisParam(s,t[0].shape)[0];let o=g.computeOutShape(t.map(e=>e.shape),a);if(0===r.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);const u=t.filter(e=>r.sizeFromShape(e.shape)>0);if(1===u.length)return wx({inputs:{x:u[0]},backend:n});const l=u.map(e=>e.shape);if(g.assertParamsConsistent(l,a),"complex64"===u[0].dtype){const e=u.map(e=>zx({inputs:{input:e},backend:n})),t=u.map(e=>Pw({inputs:{input:e},backend:n})),r=$w({inputs:e,backend:n,attrs:{axis:a}}),i=$w({inputs:t,backend:n,attrs:{axis:a}}),s=Ox({inputs:{real:r,imag:i},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),s}const c=u.map(e=>{const t=r.sizeFromShape(e.shape.slice(a));return Kx({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),h=c.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=g.computeOutShape(c.map(e=>e.shape),1);const d=Fw(h,o,t[0].dtype,1===c[0].shape[0]),p=g.computeOutShape(u.map(e=>e.shape),a),f=n.makeTensorInfo(p,t[0].dtype,d);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const Bw={kernelName:"Concat",backendName:"cpu",kernelFunc:$w};function Uw(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a}=t,{strides:o,pad:u,dataFormat:l,dilations:c,dimRoundingMode:h}=i;mx([s,a],"conv2d");const d=g.convertConv2DDataFormat(l),p=g.computeConv2DInfo(s.shape,a.shape,o,c,u,h,!1,d),f=p.filterHeight,m=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,_=p.padInfo.top,x="channelsLast"===p.dataFormat,w=new wt(p.outShape,s.dtype),S=r.computeStrides(s.shape),E=r.computeStrides(a.shape),C=S[0],k=x?S[1]:S[2],T=x?S[2]:1,A=x?1:S[1],M=w.strides[0],N=x?w.strides[1]:w.strides[2],I=x?w.strides[2]:1,D=x?1:w.strides[1],R=n.data.get(s.dataId).values,L=n.data.get(a.dataId).values,O=w.values;for(let r=0;r<p.batchSize;++r){const e=r*C,t=r*M;for(let n=0;n<p.outHeight;++n){const r=t+n*N,i=n*p.strideHeight-_;for(let t=0;t<f;++t){const n=i+t*y;if(n<0||n>=p.inHeight)continue;const s=t*E[0],a=e+n*k;for(let e=0;e<p.outWidth;++e){const t=r+e*I,n=e*p.strideWidth-b;for(let e=0;e<m;++e){const r=n+e*v;if(r<0||r>=p.inWidth)continue;const i=a+r*T;let o=s+e*E[1];for(let e=0;e<p.inChannels;++e){const n=R[i+e*A];for(let e=0;e<p.outChannels;++e)O[t+e*D]+=n*L[o+e];o+=p.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,O)}const Vw={kernelName:"Conv2D",backendName:"cpu",kernelFunc:Uw},Ww={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;mx([i,s],"conv2dBackpropFilter");const h=g.convertConv2DDataFormat(u),d=g.computeConv2DInfo(i.shape,c,a,1,o,l,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:y}=d,v="channelsLast"===d.dataFormat,b=new wt(d.filterShape,"float32"),_=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,E=new wt(i.shape,i.dtype,w),C=new wt(s.shape,s.dtype,S);for(let g=0;g<m;++g){const e=Math.max(0,Math.ceil((x-g)/p)),t=Math.min(d.outHeight,(d.inHeight+x-g)/p);for(let n=0;n<y;++n){const r=Math.max(0,Math.ceil((_-n)/f)),i=Math.min(d.outWidth,(d.inWidth+_-n)/f);for(let s=0;s<d.inChannels;++s)for(let a=0;a<d.outChannels;++a){let o=0;for(let u=0;u<d.batchSize;++u)for(let l=e;l<t;++l){const e=g+l*p-x;for(let t=r;t<i;++t){const r=n+t*f-_;o+=v?E.get(u,e,r,s)*C.get(u,l,t,a):E.get(u,s,e,r)*C.get(u,a,l,t)}}b.set(o,g,n,s,a)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},Hw={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{dy:s,filter:a}=t,{inputShape:o,strides:u,pad:l,dataFormat:c,dimRoundingMode:h}=i;mx([s,a],"conv2dBackpropInput");const d=r.computeStrides(a.shape),p=r.computeStrides(s.shape);let f=g.convertConv2DDataFormat(c);const m=g.computeConv2DInfo(o,a.shape,u,1,l,h,!1,f),y=new wt(m.inShape,"float32"),v=y.values,b=n.data.get(s.dataId).values,_=n.data.get(a.dataId).values,[x,w,S]=d,{batchSize:E,filterHeight:C,filterWidth:k,inChannels:T,inHeight:A,inWidth:M,outChannels:N,outHeight:I,outWidth:D,strideHeight:R,strideWidth:L}=m;f=m.dataFormat;const O=C-1-m.padInfo.top,F=k-1-m.padInfo.left,P="channelsLast"===f,z=y.strides[0],$=P?y.strides[1]:y.strides[2],B=P?y.strides[2]:1,U=P?1:y.strides[1],V=p[0],W=P?p[1]:p[2],H=P?p[2]:1,G=P?1:p[1];for(let r=0;r<E;++r)for(let e=0;e<T;++e)for(let t=0;t<A;++t){const n=t-O,i=Math.max(0,Math.ceil(n/R)),s=Math.min(I,(C+n)/R);for(let a=0;a<M;++a){const o=a-F,u=Math.max(0,Math.ceil(o/L)),l=Math.min(D,(k+o)/L);let c=0;for(let t=i;t<s;++t){const i=t*R-n;for(let n=u;n<l;++n){const s=V*r+W*t+H*n,a=x*(C-1-i)+w*(k-1-(n*L-o))+S*e;for(let e=0;e<N;++e)c+=b[s+G*e]*_[a+e]}}v[z*r+$*t+B*a+U*e]=c}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},Gw={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a}=t,{strides:o,pad:u,dilations:l}=i;mx([s,a],"conv3d");const c=g.computeConv3DInfo(s.shape,a.shape,o,l,u),{filterDepth:h,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:m,dilationWidth:y,padInfo:v}=c,b=v.front,_=v.left,x=v.top,w=new wt(c.outShape,s.dtype),S=n.data.get(s.dataId).values,E=n.data.get(a.dataId).values,C=w.values,k=r.computeStrides(s.shape),T=r.computeStrides(a.shape);for(let r=0;r<c.batchSize;++r){const e=r*k[0],t=r*w.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*w.strides[1],i=n*c.strideDepth-b;for(let t=0;t<h;++t){const n=i+t*f;if(n<0||n>=c.inDepth)continue;const s=t*T[0],a=e+n*k[1];for(let e=0;e<c.outHeight;++e){const t=r+e*w.strides[2],n=e*c.strideHeight-x;for(let e=0;e<d;++e){const r=n+e*m;if(r<0||r>=c.inHeight)continue;const i=s+e*T[1],o=a+r*k[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-_;for(let e=0;e<p;++e){const t=r+e*y;if(t<0||t>=c.inWidth)continue;const s=o+t*c.inChannels;let a=i+e*T[2];for(let e=0;e<c.inChannels;++e){const t=S[s+e];for(let e=0;e<c.outChannels;++e)C[n+e]+=t*E[a+e];a+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},jw={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,dy:a}=t,{strides:o,pad:u,filterShape:l}=i;mx([s,a],"conv3dBackpropFilterV2");const c=r.computeStrides(s.shape),h=r.computeStrides(a.shape),d=g.computeConv3DInfo(s.shape,l,o,1,u),p=d.strideDepth,f=d.strideHeight,m=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,_=new wt(d.filterShape,"float32"),x=_.values,[w,S,E,C]=_.strides,k=n.data.get(a.dataId).values,[T,A,M,N]=h,I=n.data.get(s.dataId).values,[D,R,L,O]=c,F=d.padInfo.front,P=d.padInfo.left,z=d.padInfo.top;for(let r=0;r<y;++r){const e=Math.max(0,Math.ceil((F-r)/p)),t=Math.min(d.outDepth,(d.inDepth+F-r)/p),n=r*w;for(let i=0;i<v;++i){const s=Math.max(0,Math.ceil((z-i)/f)),a=Math.min(d.outHeight,(d.inHeight+z-i)/f),o=i*S+n;for(let n=0;n<b;++n){const u=Math.max(0,Math.ceil((P-n)/m)),l=Math.min(d.outWidth,(d.inWidth+P-n)/m),c=n*E+o;for(let o=0;o<d.inChannels;++o){const h=o*C+c;for(let c=0;c<d.outChannels;++c){let g=0;for(let h=0;h<d.batchSize;++h){const d=h*D,y=h*T;for(let h=e;h<t;++h){const e=(r+h*p-F)*R+d,t=h*A+y;for(let r=s;r<a;++r){const s=(i+r*f-z)*L+e,a=r*M+t;for(let e=u;e<l;++e)g+=I[(n+e*m-P)*O+s+o]*k[e*N+a+c]}}}x[h+c]=g}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},qw={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{dy:s,filter:a}=t,{pad:o,strides:u,inputShape:l}=i;mx([s],"conv3dBackpropInputV2");const c=r.computeStrides(s.shape),h=r.computeStrides(a.shape),d=g.computeConv3DInfo(l,a.shape,u,1,o),p=new wt(d.inShape,"float32"),f=p.values,[m,y,v,b]=p.strides,_=n.data.get(s.dataId).values,[x,w,S,E]=c,C=n.data.get(a.dataId).values,[k,T,A,M]=h,{batchSize:N,filterDepth:I,filterHeight:D,filterWidth:R,inChannels:L,inDepth:O,inHeight:F,inWidth:P,outChannels:z,outDepth:$,outHeight:B,outWidth:U,strideDepth:V,strideHeight:W,strideWidth:H}=d,G=I-1-d.padInfo.front,j=D-1-d.padInfo.top,q=R-1-d.padInfo.left;for(let r=0;r<N;++r)for(let e=0;e<L;++e)for(let t=0;t<O;++t){const n=t-G,i=Math.max(0,Math.ceil(n/V)),s=Math.min($,(I+n)/V);for(let a=0;a<F;++a){const o=a-j,u=Math.max(0,Math.ceil(o/W)),l=Math.min(B,(D+o)/W);for(let c=0;c<P;++c){const h=c-q,d=Math.max(0,Math.ceil(h/H)),p=Math.min(U,(R+h)/H);let g=0;for(let t=i;t<s;++t){const i=t*V-n;for(let n=u;n<l;++n){const s=n*W-o;for(let a=d;a<p;++a){const o=x*r+w*t+S*n+E*a,u=k*(I-1-i)+T*(D-1-s)+A*(R-1-(a*H-h))+M*e;for(let e=0;e<z;++e)g+=_[o+e]*C[u+e]}}}f[m*r+y*t+v*a+b*c+e]=g}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},Kw=vx(He,e=>Math.cos(e)),Xw={kernelName:He,backendName:"cpu",kernelFunc:Kw},Zw={kernelName:"Cosh",backendName:"cpu",kernelFunc:vx("Cosh",e=>Math.cosh(e))},Yw={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{image:s,boxes:a,boxInd:o}=t,{cropSize:u,method:l,extrapolationValue:c}=i,[h,d,p,f]=s.shape,m=a.shape[0],[g,y]=u,v=Gn([m,g,y,f],"float32"),b=n.data.get(a.dataId).values,_=n.data.get(o.dataId).values,x=n.data.get(s.dataId).values,w=r.computeStrides(s.shape),S=r.computeStrides(v.shape);for(let r=0;r<m;r++){const e=4*r,t=b[e],n=b[e+1],i=b[e+2],s=b[e+3],a=_[r];if(a>=h)continue;const o=g>1?(i-t)*(d-1)/(g-1):0,u=y>1?(s-n)*(p-1)/(y-1):0;for(let h=0;h<g;h++){const e=g>1?t*(d-1)+h*o:.5*(t+i)*(d-1);if(e<0||e>d-1)for(let t=0;t<y;t++)for(let e=0;e<f;e++)v.values[e+t*S[2]+h*S[1]+r*S[0]]=c;else if("bilinear"===l){const t=Math.floor(e),i=Math.ceil(e),o=e-t;for(let e=0;e<y;e++){const l=y>1?n*(p-1)+e*u:.5*(n+s)*(p-1);if(l<0||l>p-1){for(let t=0;t<f;t++)v.values[t+e*S[2]+h*S[1]+r*S[0]]=c;continue}const d=Math.floor(l),m=Math.ceil(l),g=l-d;for(let n=0;n<f;n++){let s=n+d*w[2]+t*w[1]+a*w[0];const u=x[s];s=n+m*w[2]+t*w[1]+a*w[0];const l=x[s];s=n+d*w[2]+i*w[1]+a*w[0];const c=x[s];s=n+m*w[2]+i*w[1]+a*w[0];const p=x[s],f=u+(l-u)*g;s=n+e*S[2]+h*S[1]+r*S[0],v.values[s]=f+(c+(p-c)*g-f)*o}}}else for(let t=0;t<y;++t){const i=y>1?n*(p-1)+t*u:.5*(n+s)*(p-1);if(i<0||i>p-1){for(let e=0;e<f;e++)v.values[e+t*S[2]+h*S[1]+r*S[0]]=c;continue}const o=Math.round(i),l=Math.round(e);for(let e=0;e<f;e++)v.values[e+t*S[2]+h*S[1]+r*S[0]]=x[e+o*w[2]+l*w[1]+a*w[0]]}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},Jw={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,exclusive:o,reverse:u}=i;mx(s,"cumsum");const l=g.getAxesPermutation([a],s.shape.length);let c=s;null!=l&&(c=sw({inputs:{x:s},backend:n,attrs:{perm:l}}));const h=g.getInnerMostAxes(1,s.shape.length)[0];if(h!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+`axis=${c.shape.length-1} but got axis=${h}`);const d=Ot(c.dtype,"int32"),p=r.makeZerosTypedArray(r.sizeFromShape(c.shape),d),f=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],y=u?(e,t)=>e+m-t-1:(e,t)=>e+t;for(let r=0;r<f.length;r+=m)for(let e=0;e<m;e++){const t=y(r,e);if(0===e)p[t]=o?0:f[t];else{const n=y(r,e-1);p[t]=o?f[n]+p[n]:f[t]+p[n]}}const v=n.makeTensorInfo(c.shape,d,p);if(null!=l){const e=sw({inputs:{x:v},backend:n,attrs:{perm:g.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),e}return v}},Qw={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a,binaryOutput:o}=r;if(1===i.shape.length){const e=Aw(n.data.get(i.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,e)}if(2===i.shape.length){const e=Mw(n.bufferSync(i),n.bufferSync(s),a,o);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${i.shape.length}.`)}},eS={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{blockSize:a,dataFormat:o}=i;r.assert("NHWC"===o,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`),r.assert(a>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${a}`);const u=s.shape[0],l=s.shape[1],c=s.shape[2],h=s.shape[3],d=l*a,p=c*a,f=h/(a*a),m=n.data.get(s.dataId).values,g=new Float32Array(u*d*p*f);let y=0;for(let r=0;r<u;++r)for(let e=0;e<d;++e){const t=Math.floor(e/a),n=e%a;for(let e=0;e<p;++e){const i=Math.floor(e/a),s=(n*a+e%a)*f;for(let e=0;e<f;++e)g[y++]=m[e+s+h*(i+c*(t+l*r))]}}return n.makeTensorInfo([u,d,p,f],s.dtype,g)}};function tS(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a}=t,{strides:o,pad:u,dilations:l,dimRoundingMode:c}=i;mx([s,a],"depthwiseConv2DNative");const h=r.computeStrides(s.shape),d=r.computeStrides(a.shape);let p=l;null==p&&(p=[1,1]),r.assert(g.eitherStridesOrDilationsAreOne(o,p),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${o} and dilations '${p}'`);const f=g.computeConv2DInfo(s.shape,a.shape,o,p,u,c,!0),{filterHeight:m,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:_}=f,x=_.left,w=_.top,S=f.outChannels/f.inChannels,E=new wt(f.outShape,s.dtype),C=n.data.get(s.dataId).values,k=n.data.get(a.dataId).values,T=E.values;for(let r=0;r<f.batchSize;++r){const e=r*h[0],t=r*E.strides[0];for(let n=0;n<f.outHeight;++n){const r=t+n*E.strides[1],i=n*f.strideHeight-x;for(let t=0;t<m;++t){const n=i+t*v;if(n<0||n>=f.inHeight)continue;const s=t*d[0],a=e+n*h[1];for(let e=0;e<f.outWidth;++e){const t=r+e*E.strides[2],n=e*f.strideWidth-w;for(let e=0;e<y;++e){const r=n+e*b;if(r<0||r>=f.inWidth)continue;const i=a+r*f.inChannels;let o=t,u=s+e*d[1];for(let e=0;e<f.inChannels;++e){const t=C[i+e];for(let e=0;e<S;++e)T[o+e]+=t*k[u+e];o+=S,u+=S}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const nS={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:tS},rS={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r;mx([i,s],"depthwiseConv2dNativeBackpropFilter");const h=g.computeConv2DInfo(i.shape,c,a,o,u,l,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,y=new wt(h.filterShape,"float32"),v=h.padInfo.left,b=h.padInfo.top,_=h.outChannels/h.inChannels,x=n.data.get(i.dataId).values,w=new wt(i.shape,i.dtype,x),S=n.data.get(s.dataId).values,E=new wt(s.shape,s.dtype,S);for(let g=0;g<f;++g){const e=Math.max(0,Math.ceil((b-g)/d)),t=Math.min(h.outHeight,(h.inHeight+b-g)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((v-n)/p)),i=Math.min(h.outWidth,(h.inWidth+v-n)/p);for(let s=0;s<h.outChannels;++s){const a=Math.trunc(s/_),o=s%_;let u=0;for(let l=0;l<h.batchSize;++l)for(let o=e;o<t;++o){const e=g+o*d-b;for(let t=r;t<i;++t)u+=w.get(l,e,n+t*p-v,a)*E.get(l,o,t,s)}y.set(u,g,n,a,o)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},iS={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{dy:s,filter:a}=t,{strides:o,dilations:u,pad:l,dimRoundingMode:c,inputShape:h}=i;mx([s,a],"depthwiseConv2DNativeBackpropInput");const d=r.computeStrides(s.shape),p=r.computeStrides(a.shape),f=g.computeConv2DInfo(h,a.shape,o,u,l,c,!0),m=new wt(f.inShape,"float32"),y=m.values,[v,b,_]=m.strides,x=n.data.get(s.dataId).values,[w,S,E]=d,C=n.data.get(a.dataId).values,[k,T,A]=p,{batchSize:M,filterHeight:N,filterWidth:I,inChannels:D,inHeight:R,inWidth:L,outChannels:O,outHeight:F,outWidth:P,strideHeight:z,strideWidth:$}=f,B=N-1-f.padInfo.top,U=I-1-f.padInfo.left,V=O/D;for(let r=0;r<M;++r)for(let e=0;e<D;++e)for(let t=0;t<R;++t){const n=t-B,i=Math.max(0,Math.ceil(n/z)),s=Math.min(F,(N+n)/z);for(let a=0;a<L;++a){const o=a-U,u=Math.max(0,Math.ceil(o/$)),l=Math.min(P,(I+o)/$);let c=0;for(let t=i;t<s;++t){const i=t*z-n;for(let n=u;n<l;++n){const s=w*r+S*t+E*n,a=k*(N-1-i)+T*(I-1-(n*$-o))+A*e;for(let t=0;t<V;++t)c+=x[s+(e*V+t)]*C[a+t]}}y[v*r+b*t+_*a+e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},sS={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:i}=t,s=r.sizeFromShape(i.shape),a=n.data.get(i.dataId).values,o=Gn([s,s],i.dtype),u=o.values;for(let r=0;r<a.length;r++)u[r*s+r]=a[r];const l=[...i.shape,...i.shape];return n.makeTensorInfo(l,o.dtype,o.values)}},aS={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:i,filter:s}=e,{strides:a,pad:o,dilations:u}=n,l=t,c=l.data.get(i.dataId).values,h=i.shape.length,d=l.data.get(s.dataId).values,p=s.shape.length,{batchSize:f,inHeight:m,inWidth:y,inChannels:v,outHeight:b,outWidth:_,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:E,filterWidth:C,dilationHeight:k,dilationWidth:T,outShape:A}=g.computeDilation2DInfo(i.shape,s.shape,a,o,"NHWC",u),M=r.sizeFromShape(A),N=A.length,I=r.getArrayFromDType(i.dtype,M);for(let g=0;g<f;++g)for(let e=0;e<b;++e){const t=e*w-x.top;for(let n=0;n<_;++n){const a=n*S-x.left;for(let o=0;o<v;++o){let u=Number.MIN_SAFE_INTEGER;for(let e=0;e<E;++e){const n=t+e*k;if(n>=0&&n<m)for(let t=0;t<C;++t){const l=a+t*T;if(l>=0&&l<y){const a=r.locToIndex([g,n,l,o],h,r.computeStrides(i.shape)),f=r.locToIndex([e,t,o],p,r.computeStrides(s.shape)),m=c[a]+d[f];m>u&&(u=m)}}}I[r.locToIndex([g,e,n,o],N,r.computeStrides(A))]=u}}}return{dataId:l.write(r.toTypedArray(I,i.dtype),A,i.dtype),shape:A,dtype:i.dtype}}},oS={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:i,filter:s,dy:a}=e,{strides:o,pad:u,dilations:l}=n,c=t,h=r.toNestedArray(i.shape,c.data.get(i.dataId).values),d=r.toNestedArray(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:_,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:E,dilationHeight:C,dilationWidth:k,outShape:T}=g.computeDilation2DInfo(i.shape,s.shape,o,u,"NHWC",l);r.assert(a.rank===T.length,()=>"Error in Dilation2DBackpropFilter, dy "+`must have the same rank as output ${T.length}, but got `+`${a.rank}`);const A=r.toNestedArray(T,c.data.get(a.dataId).values),M=r.makeZerosNestedTypedArray(s.shape,s.dtype);for(let r=0;r<p;++r)for(let e=0;e<v;++e){const t=e*x-_.top;for(let n=0;n<b;++n){const i=n*w-_.left;for(let s=0;s<y;++s){let a=Number.MIN_SAFE_INTEGER,o=0,u=0;for(let e=0;e<S;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<E;++t){const l=i+t*k;if(l>=0&&l<m){const i=h[r][n][l][s]+d[e][t][s];i>a&&(a=i,o=e,u=t)}}}M[o][u][s]+=A[r][e][n][s]}}}return{dataId:c.write(r.toTypedArray(M,i.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},uS={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:i,filter:s,dy:a}=e,{strides:o,pad:u,dilations:l}=n,c=t,h=r.toNestedArray(i.shape,c.data.get(i.dataId).values),d=r.toNestedArray(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:_,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:E,dilationHeight:C,dilationWidth:k,outShape:T}=g.computeDilation2DInfo(i.shape,s.shape,o,u,"NHWC",l);r.assert(a.rank===T.length,()=>"Error in Dilation2DBackpropInput, dy "+`must have the same rank as output ${T.length}, but got `+`${a.rank}`);const A=r.toNestedArray(T,c.data.get(a.dataId).values),M=r.makeZerosNestedTypedArray(i.shape,i.dtype);for(let r=0;r<p;++r)for(let e=0;e<v;++e){const t=e*x-_.top;for(let n=0;n<b;++n){const i=n*w-_.left;for(let s=0;s<y;++s){let a=Number.MIN_SAFE_INTEGER,o=t<0?0:t,u=i<0?0:i;for(let e=0;e<S;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<E;++t){const l=i+t*k;if(l>=0&&l<m){const i=h[r][n][l][s]+d[e][t][s];i>a&&(a=i,o=n,u=l)}}}M[r][o][u][s]+=A[r][e][n][s]}}}return{dataId:c.write(r.toTypedArray(M,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},lS={kernelName:"EluGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:i,y:s}=t;mx([i,s],"eluGrad");const a=new Float32Array(r.sizeFromShape(s.shape)),o=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values;for(let r=0;r<o.length;++r){const e=o[r];a[r]=e>=1?u[r]:u[r]*(e+1)}return n.makeTensorInfo(s.shape,"float32",a)}},cS=Vx("Equal",kx((e,t)=>e===t?1:0),null,"bool"),hS={kernelName:"Equal",backendName:"cpu",kernelFunc:cS},dS=g.ERF_P,pS=g.ERF_A1,fS=g.ERF_A2,mS=g.ERF_A3,gS=g.ERF_A4,yS=g.ERF_A5,vS=vx(Ge,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+dS*n);return t*(1-((((yS*r+gS)*r+mS)*r+fS)*r+pS)*r*Math.exp(-n*n))}),bS={kernelName:Ge,backendName:"cpu",kernelFunc:vS},_S=Iw(e=>Math.exp(e)),xS=bx(je,_S),wS={kernelName:je,backendName:"cpu",kernelFunc:xS};function SS(e){const{inputs:t,backend:n,attrs:i}=e,{input:s}=t,{dim:a}=i,o=s.shape.length,u=s.shape.slice();let l=a;return a<0&&(r.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),u.splice(l,0,1),Kx({inputs:{x:s},backend:n,attrs:{shape:u}})}const ES={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:SS},CS=Iw(e=>Math.expm1(e)),kS={kernelName:"Expm1",backendName:"cpu",kernelFunc:bx("Expm1",CS)},TS=kx((e,t)=>e*t),AS=Wx((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),MS=Vx("Multiply",TS,AS),NS={kernelName:"Multiply",backendName:"cpu",kernelFunc:MS},IS=Vx("RealDiv",kx((e,t)=>e/t)),DS={kernelName:"RealDiv",backendName:"cpu",kernelFunc:IS},RS=kx((e,t)=>e-t),LS=Wx((e,t,n,r)=>({real:e-n,imag:t-r})),OS=Vx(Ye,RS,LS),FS={kernelName:Ye,backendName:"cpu",kernelFunc:OS};function PS(e,t,n){const i=e.shape,s=i[0],a=i[1],o=n.data.get(e.dataId),u=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,a],h=r.sizeFromShape(c),d=r.getTypedArrayFromDType("float32",h),p=r.getTypedArrayFromDType("float32",h);for(let r=0;r<s;r++){const e=Cw({inputs:{x:u},backend:n,attrs:{begin:[r,0],size:[1,a]}}),i=Cw({inputs:{x:l},backend:n,attrs:{begin:[r,0],size:[1,a]}}),s=Ox({inputs:{real:e,imag:i},backend:n}),{real:o,imag:c}=zS(s,t,n),h=g.mergeRealAndImagArrays(o,c);for(let t=0;t<a;t++){const e=g.getComplexWithIndex(h,t);d[r*a+t]=e.real,p[r*a+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s)}const f=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",p),y=Ox({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}function zS(e,t,n){const i=r.sizeFromShape(e.shape),s=n.data.get(e.dataId),a=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(0==((u=i)&u-1)){const s=function e(t,n,r,i,s){if(1===r)return{real:t,imag:n};const a=g.mergeRealAndImagArrays(t,n),o=r/2,u=g.complexWithEvenIndex(a),l=u.real,c=u.imag,h=[l.length],d=s.makeTensorInfo(h,"float32",l),p=s.makeTensorInfo(h,"float32",c),f=Ox({inputs:{real:d,imag:p},backend:s}),m=g.complexWithOddIndex(a),y=m.real,v=m.imag,b=[y.length],_=s.makeTensorInfo(b,"float32",y),x=s.makeTensorInfo(b,"float32",v),w=Ox({inputs:{real:_,imag:x},backend:s}),S=e(l,c,o,i,s),E=S.real,C=S.imag,k=[E.length],T=s.makeTensorInfo(k,"float32",E),A=s.makeTensorInfo(k,"float32",C),M=Ox({inputs:{real:T,imag:A},backend:s}),N=e(y,v,o,i,s),I=N.real,D=N.imag,R=[I.length],L=s.makeTensorInfo(R,"float32",I),O=s.makeTensorInfo(R,"float32",D),F=Ox({inputs:{real:L,imag:O},backend:s}),P=g.exponents(r,i),z=[P.real.length],$=s.makeTensorInfo(z,"float32",P.real),B=s.makeTensorInfo(z,"float32",P.imag),U=Ox({inputs:{real:$,imag:B},backend:s}),V=MS({inputs:{a:U,b:F},backend:s}),W=jx({inputs:{a:M,b:V},backend:s}),H=OS({inputs:{a:M,b:V},backend:s}),G=zx({inputs:{input:W},backend:s}),j=zx({inputs:{input:H},backend:s}),q=Pw({inputs:{input:W},backend:s}),K=Pw({inputs:{input:H},backend:s}),X=$w({inputs:[G,j],backend:s,attrs:{axis:0}}),Z=$w({inputs:[q,K],backend:s,attrs:{axis:0}}),Y=s.data.get(X.dataId).values,J=s.data.get(Z.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(Z),{real:Y,imag:J}}(a,o,i,t,n),u=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(u,"float32",s.real),t=n.makeTensorInfo(u,"float32",s.imag),a=n.makeTensorInfo([],"float32",r.createScalarValue(i,"float32")),o=wx({inputs:{x:a},backend:n}),l=DS.kernelFunc({inputs:{a:e,b:a},backend:n}),c=DS.kernelFunc({inputs:{a:t,b:o},backend:n}),h=n.data.get(l.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:h,imag:d}}return s}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let s=0,a=0;for(let r=0;r<t;r++){const o=g.exponent(i*r,t,n),u=g.getComplexWithIndex(e,r);s+=u.real*o.real-u.imag*o.imag,a+=u.real*o.imag+u.imag*o.real}n&&(s/=t,a/=t),g.assignToTypedArray(r,s,a,i)}return r}(g.mergeRealAndImagArrays(a,o),i,t);return g.splitRealAndImagArrays(e)}var u}const $S={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:i}=t,s=r.sizeFromShape(i.shape),a=i.shape[i.shape.length-1],o=Kx({inputs:{x:i},backend:n,attrs:{shape:[s/a,a]}}),u=PS(o,!1,n),l=Kx({inputs:{x:u},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}};function BS(e){const{backend:t,attrs:n}=e,{shape:i,value:s,dtype:a}=n,o=a||r.inferDtype(s),u=r.getArrayFromDType(o,r.sizeFromShape(i));return function(e,t,n){e.fill(t)}(u,s),t.makeTensorInfo(i,o,u)}const US={kernelName:"Fill",backendName:"cpu",kernelFunc:BS},VS={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,i=t,s=r.getTypedArrayFromDType(n.dtype,r.sizeFromShape(n.shape)),[a,o,u,l]=n.shape,c=i.data.get(n.dataId).values;for(let r=0;r<a;r++){const e=r*u*o*l;for(let t=0;t<o;t++){const n=t*(u*l);for(let r=0;r<u;r++){const i=r*l;for(let o=0;o<l;o++){const h=Math.round(u-[a,t,r,o][2]),d=e+n+i+o;let p=c[d];h>=0&&h<u&&(p=c[e+n+h*l+o]),s[d]=p}}}}return{dataId:i.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},WS=Iw(e=>Math.floor(e)),HS={kernelName:"Floor",backendName:"cpu",kernelFunc:bx("Floor",WS)},GS={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:Vx("FloorDiv",kx((e,t)=>Math.floor(e/t)),null,"int32")},jS={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=Uw({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;m=jx({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=Lx(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},qS={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=tS({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;m=jx({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=Lx(n,m,p,o,f),n.disposeIntermediateTensorInfo(e)}return m}},KS={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:i,indices:s}=t,a=r.sizeFromShape(i.shape),o=s.shape,u=o[o.length-1],[l,c,h,d]=g.prepareAndValidate(i,s);if(0===c)return n.makeTensorInfo(l,i.dtype,[]);const p=Gn([c,h],i.dtype),f=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values;for(let r=0;r<c;r++){const e=[];let t=0;for(let n=0;n<u;n++){const i=f[r*u+n];t+=i*d[n],e.push(i)}if(t<0||t>=a/h)throw new Error(`Invalid indices: ${e} does not index into ${i.shape}`);for(let n=0;n<h;n++)p.values[r*h+n]=m[t*h+n]}return n.makeTensorInfo(l,p.dtype,p.values)}};function XS(e,t,n){const r=Gn(n,e.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i).slice(),s=t.locToIndex([n[0],n[2]]);n[2]=t.values[s];const a=e.locToIndex(n);r.values[i]=e.values[a]}return r}const ZS={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,indices:a}=t,{axis:o,batchDims:u}=i;mx([s,a],"gatherV2");let l=u;null==u&&(l=0);const c=r.sizeFromShape(a.shape),h=r.parseAxisParam(o,s.shape)[0],d=g.segment_util.collectGatherOpShapeInfo(s,a,h,l),p=Kx({inputs:{x:s},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),f=Kx({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,c/d.batchSize]}}),m=[d.batchSize,d.outerSize,c/d.batchSize,d.sliceSize],y=n.bufferSync(f),v=XS(n.bufferSync(p),y,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(d.outputShape,v.dtype,v.values)}},YS=kx((e,t)=>e>t?1:0),JS={kernelName:"Greater",backendName:"cpu",kernelFunc:Vx("Greater",YS,null,"bool")},QS={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:Vx("GreaterEqual",kx((e,t)=>e>=t?1:0),null,"bool")},eE={kernelName:"IFFT",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:i}=t,s=r.sizeFromShape(i.shape),a=i.shape[i.shape.length-1],o=Kx({inputs:{x:i},backend:n,attrs:{shape:[s/a,a]}}),u=PS(o,!0,n),l=Kx({inputs:{x:u},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},tE={kernelName:"IsFinite",backendName:"cpu",kernelFunc:vx("IsFinite",e=>Number.isFinite(e)?1:0,"bool")},nE={kernelName:"IsInf",backendName:"cpu",kernelFunc:vx("IsInf",e=>Math.abs(e)===1/0?1:0,"bool")},rE={kernelName:"IsNan",backendName:"cpu",kernelFunc:vx("IsNan",e=>Number.isNaN(e)?1:0,"bool")},iE=kx((e,t)=>e<t?1:0),sE={kernelName:"Less",backendName:"cpu",kernelFunc:Vx("Less",iE,null,"bool")},aE={kernelName:"LessEqual",backendName:"cpu",kernelFunc:Vx("LessEqual",kx((e,t)=>e<=t?1:0),null,"bool")};function oE(e,t,n){const i=(t-e)/(n-1),s=r.makeZerosTypedArray(n,"float32");s[0]=e;for(let r=1;r<s.length;r++)s[r]=s[r-1]+i;return s}const uE={kernelName:"LinSpace",backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,a=oE(r,i,s);return t.makeTensorInfo([a.length],"float32",a)}},lE=Iw(e=>Math.log(e)),cE=bx(qe,lE),hE={kernelName:qe,backendName:"cpu",kernelFunc:cE},dE={kernelName:"Log1p",backendName:"cpu",kernelFunc:vx("Log1p",e=>Math.log1p(e))},pE={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:Vx("LogicalAnd",kx((e,t)=>e&&t),null,"bool")},fE={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:vx("LogicalNot",e=>e?0:1,"bool")},mE={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:Vx("LogicalOr",kx((e,t)=>e||t),null,"bool")},gE={kernelName:"LRN",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{depthRadius:a,bias:o,alpha:u,beta:l}=i;mx(s,"LRN");const c=s.shape[3],h=c-1,d=n.data.get(s.dataId).values,p=r.sizeFromShape(s.shape),f=new Float32Array(p);function m(e){const t=e%c;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,h);let i=0;for(;n<=r;n++){const e=d[n];i+=e*e}return i}for(let r=0;r<p;r++){const e=m(r),t=d[r]*Math.pow(o+u*e,-l);f[r]=t}return n.makeTensorInfo(s.shape,s.dtype,f)}},yE={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,y:a,dy:o}=t,{depthRadius:u,bias:l,alpha:c,beta:h}=i;mx(o,"LRNGrad");const d=r.sizeFromShape(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=n.data.get(a.dataId).values,y=new Float32Array(d),v=d;for(let r=0;r<v;r++){const e=r%p,t=r-e+Math.max(0,e-u),n=r-e+Math.min(p,e+u+1);let i=0;for(let r=t;r<n;r++)i+=Math.pow(m[r],2);i=c*i+l;for(let s=t;s<n;s++){let e=-2*c*h*m[s]*g[r]/i;r===s&&(e+=Math.pow(i,-h)),e*=f[r],y[s]+=e}}return n.makeTensorInfo(o.shape,s.dtype,y)}};function vE(e,t,n,i){const s=r.getTypedArrayFromDType(i,r.sizeFromShape(n));for(let r=0;r<s.length;++r){const n=r*t;let i=e[n];for(let r=0;r<t;++r){const t=e[n+r];t>i&&(i=t)}s[r]=i}return s}function bE(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{reductionIndices:a,keepDims:o}=i,u=n;let l=s.shape;const c=l.length,h=r.parseAxisParam(a,l);let d=h;const p=g.getAxesPermutation(d,c);let f=u.data.get(s.dataId).values;if(null!=p){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[p[t]];f=iw(f,l,s.dtype,p,e),d=g.getInnerMostAxes(d.length,c),l=e}mx(s,"max"),g.assertAxesAreInnerMostDims("max",d,c);const[m,y]=g.computeOutAndReduceShapes(l,d),v=vE(f,r.sizeFromShape(y),m,s.dtype),b=u.write(v,m,s.dtype);let _=m;return o&&(_=g.expandShapeToKeepDim(m,h)),{dataId:b,shape:_,dtype:s.dtype}}const _E={kernelName:"Max",backendName:"cpu",kernelFunc:bE},xE=kx((e,t)=>Math.max(e,t)),wE={kernelName:"Maximum",backendName:"cpu",kernelFunc:Vx("Maximum",xE)},SE={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t;mx(s,"maxPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=i;r.assert(g.eitherStridesOrDilationsAreOne(o,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '1'`);const c=g.computePool2DInfo(s.shape,a,o,1,u,l);let h;if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))h=wx({inputs:{x:s},backend:n});else{const e=n.data.get(s.dataId).values,t=r.computeStrides(s.shape),i=gw(e,0,s.dtype,t,c,"max");h=n.makeTensorInfo(c.outShape,s.dtype,i.values)}return h}},EE={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{filterSize:a,strides:o,pad:u,dimRoundingMode:l,dataFormat:c}=i;mx(s,"maxPool3d");const h=g.computePool3DInfo(s.shape,a,o,1,u,l,c),d=vw(n.data.get(s.dataId).values,0,s.dtype,r.computeStrides(s.shape),h,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},CE={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=r;mx([i,s],"maxPool3DGrad");const c=g.computePool3DInfo(s.shape,a,o,1,u,l),h=function(e,t){const n=Gn(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=a;const _=Math.min(t.inDepth,l+v);for(let r=0;r<t.outHeight;++r){const l=r*i-p;let d=l;for(;d<0;)d+=o;const x=Math.min(t.inHeight,c+l);for(let i=0;i<t.outWidth;++i){const p=i*s-f;let w=p;for(;w<0;)w+=u;const S=Math.min(t.inWidth,h+p);let E=Number.NEGATIVE_INFINITY,C=-1;for(let t=b;t<_;t+=a){const n=t-v;for(let r=d;r<x;r+=o){const i=r-l;for(let s=w;s<S;s+=u){const a=s-p,o=e.get(m,t,r,s,g);o>=E&&(E=o,C=n*c*h+i*c+a)}}}n.set(C,m,y,r,i,g)}}}return n}(n.bufferSync(s),c),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,_=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=b-1-c.padInfo.front,S=x-1-c.padInfo.left,E=_-1-c.padInfo.top,C=Gn(s.shape,"float32"),k=n.bufferSync(i);for(let g=0;g<c.batchSize;++g)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-w,s=n-E,a=r-S;let o=0;for(let t=0;t<b;t+=m){const n=(i+t)/d;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<_;r+=y){const i=(s+r)/p;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let s=0;s<x;s+=v){const u=(a+s)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;const l=b*_*x-1-h.get(g,n,i,u,e)===t*_*x+r*x+s?1:0;0!==l&&(o+=k.get(g,n,i,u,e)*l)}}}C.set(o,g,t,n,r,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},kE={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:a}=t,o=s;mx([s,a],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:h}=r,d=g.computePool2DInfo(o.shape,u,l,1,c,h),p=n.data.get(o.dataId).values,f=Gn(d.outShape,o.dtype,yw(p,o.shape,o.dtype,d).values),m=d.strideHeight,y=d.strideWidth,v=d.dilationHeight,b=d.dilationWidth,_=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,S=_-1-d.padInfo.top,E=Gn(o.shape,"float32"),C=n.data.get(i.dataId).values,k=Gn(i.shape,"float32",C);for(let g=0;g<d.batchSize;++g)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-S,i=n-w;let s=0;for(let t=0;t<_;t+=v){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=b){const a=(i+r)/y;if(a<0||a>=d.outWidth||Math.floor(a)!==a)continue;const o=_*x-1-f.get(g,n,a,e)===t*x+r?1:0;0!==o&&(s+=k.get(g,n,a,e)*o)}}E.set(s,g,t,n,e)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},TE={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:i}=e,{filterSize:s,strides:a,pad:o,includeBatchInIndex:u}=t,l=n;mx(i,"MaxPoolWithArgmax");const c=l.data.get(i.dataId).values,h=g.computePool2DInfo(i.shape,s,a,[1,1],o),[d,p]=function(e,t,n,i,s){const a=gw(e,0,n,r.computeStrides(t),s,"max"),o=yw(e,t,n,s,!0,i);return[a.values,o.values]}(c,i.shape,i.dtype,u,h),f=l.write(d,h.outShape,i.dtype),m=l.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:m,shape:h.outShape,dtype:"int32"}]}};function AE(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;let u;mx(s,"sum"),u="bool"===s.dtype?Bx({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):wx({inputs:{x:s},backend:n});const l=u.shape.length,c=r.parseAxisParam(a,u.shape),h=g.getAxesPermutation(c,l);let d=c,p=u;null!=h&&(p=sw({inputs:{x:u},backend:n,attrs:{perm:h}}),d=g.getInnerMostAxes(d.length,l)),g.assertAxesAreInnerMostDims("sum",d,p.shape.length);const[f,m]=g.computeOutAndReduceShapes(p.shape,d);let y=Px(n,f,g.upcastType(p.dtype,"int32"));const v=r.sizeFromShape(m),b=n.data.get(y.dataId).values,_=n.data.get(p.dataId).values;for(let r=0;r<b.length;++r){const e=r*v;let t=0;for(let n=0;n<v;++n)t+=_[e+n];b[r]=t}if(o){const e=y;y=Kx({inputs:{x:y},backend:n,attrs:{shape:g.expandShapeToKeepDim(y.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(u),null!=h&&n.disposeIntermediateTensorInfo(p),y}const ME={kernelName:"Sum",backendName:"cpu",kernelFunc:AE},NE={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i,u=r.parseAxisParam(a,s.shape),l=g.computeOutAndReduceShapes(s.shape,u),c=r.sizeFromShape(l[1]),h=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(d);const p=Bx({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});h.push(p);const f=IS({inputs:{a:p,b:d},backend:n});h.push(f);const m=AE({inputs:{x:f},backend:n,attrs:{axis:a,keepDims:o}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}},IE={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;mx(s,"min");const u=r.parseAxisParam(a,s.shape);let l=u;const c=g.getAxesPermutation(l,s.shape.length);let h=s;null!=c&&(h=sw({inputs:{x:s},backend:n,attrs:{perm:c}}),l=g.getInnerMostAxes(l.length,s.shape.length)),g.assertAxesAreInnerMostDims("min",l,h.shape.length);const[d,p]=g.computeOutAndReduceShapes(h.shape,l),f=r.sizeFromShape(p),m=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values;for(let r=0;r<m.length;++r){const e=r*f;let t=y[e];for(let n=0;n<f;++n){const r=y[e+n];r<t&&(t=r)}m[r]=t}null!=c&&n.disposeIntermediateTensorInfo(h);const v=n.makeTensorInfo(d,h.dtype,m);if(o){const e=Kx({inputs:{x:v},backend:n,attrs:{shape:g.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(v),e}return v}},DE=kx((e,t)=>Math.min(e,t)),RE={kernelName:"Minimum",backendName:"cpu",kernelFunc:Vx("Minimum",DE)},LE={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{paddings:a,mode:o}=i;mx(s,"mirrorPad");const u=a.map((e,t)=>e[0]+s.shape[t]+e[1]),l=a.map(e=>e[0]),c=a.map((e,t)=>e[0]+s.shape[t]),h="reflect"===o?0:1,d=n.data.get(s.dataId).values,p=s.shape.length,f=r.computeStrides(s.shape),m=r.sizeFromShape(u),g=u.length,y=r.computeStrides(u),v=r.getTypedArrayFromDType(s.dtype,m);for(let b=0;b<m;b++){let e=r.indexToLoc(b,g,y);for(let n=0;n<g;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-h:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+h);e=e.map((e,t)=>e-l[t]);const t=r.locToIndex(e,p,f);v[b]=d[t]}return{dataId:n.write(v,u,s.dtype),shape:u,dtype:s.dtype}}},OE=kx((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),FE=Vx(Ke,OE),PE={kernelName:Ke,backendName:"cpu",kernelFunc:FE};var zE=n("4xPs");function $E(e){const{inputs:t,backend:n,attrs:i}=e,{logits:s}=t,{dim:a}=i,o=s.shape.length;let u=a;if(-1===u&&(u=o-1),u!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${o} and dim was ${u}`);const l=r.parseAxisParam([u],s.shape),c=bE({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=g.expandShapeToKeepDim(c.shape,l),d=Kx({inputs:{x:c},backend:n,attrs:{shape:h}}),p=OS({inputs:{a:s,b:d},backend:n}),f=xS({inputs:{x:p},backend:n}),m=AE({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=Kx({inputs:{x:m},backend:n,attrs:{shape:h}}),v=IS({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const BE={kernelName:"Softmax",backendName:"cpu",kernelFunc:$E},UE={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{logits:s}=t,{numSamples:a,seed:o,normalized:u}=i;mx(s,"multinomial");const l=u?s:$E({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],h=l.shape[1],d=n.data.get(l.dataId).values,p=[c,a],f=r.makeZerosTypedArray(r.sizeFromShape(p),"int32");for(let r=0;r<c;++r){const e=r*h,t=new Float32Array(h-1);t[0]=d[e];for(let r=1;r<t.length;++r)t[r]=t[r-1]+d[e+r];const n=zE.alea(o.toString()),i=r*a;for(let r=0;r<a;++r){const e=n();f[i+r]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){f[i+r]=n;break}}}return u||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}};function VE(e,t,n){const i=r.createScalarValue(-1,n);return TS([],t,i,e,n)}const WE={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;mx(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=VE(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}},HE=y.nonMaxSuppressionV3Impl,GE={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u}=r;mx(i,"NonMaxSuppression");const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:h}=HE(l,c,a,o,u);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},jE=y.nonMaxSuppressionV4Impl,qE={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r;mx(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:p}=jE(c,h,a,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},KE=y.nonMaxSuppressionV5Impl,XE={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r;mx(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,d=a,p=o,f=u,m=l,{selectedIndices:g,selectedScores:y}=KE(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},ZE=kx((e,t)=>e!==t?1:0),YE={kernelName:"NotEqual",backendName:"cpu",kernelFunc:Vx("NotEqual",ZE,null,"bool")},JE={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{indices:s}=t,{depth:a,onValue:o,offValue:u}=i;mx(s,"oneHot");const l=r.sizeFromShape(s.shape),c=new Float32Array(l*a);c.fill(u);const h=n.data.get(s.dataId).values;for(let r=0;r<l;++r)h[r]>=0&&h[r]<a&&(c[r*a+h[r]]=o);return n.makeTensorInfo([...s.shape,a],"int32",c)}};function QE(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=zx({inputs:{input:r},backend:n}),t=QE({inputs:{x:e},backend:n}),i=Pw({inputs:{input:r},backend:n}),s=QE({inputs:{x:i},backend:n}),a=Ox({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),a}return BS({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const eC={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:QE},tC={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const t=zx({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),s=Pw({inputs:{input:i},backend:r}),a=QE({inputs:{x:s},backend:r}),o=Ox({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(a),o}return BS({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function nC(e){const{inputs:t,backend:n,attrs:i}=e,{axis:s}=i;if(1===t.length)return SS({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const a=t[0].shape,o=t[0].dtype;t.forEach(e=>{r.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),r.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],l=$w({inputs:t.map(e=>{const t=SS({inputs:{input:e},backend:n,attrs:{dim:s}});return u.push(t),t}),backend:n,attrs:{axis:s}});return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}const rC={kernelName:"Pack",backendName:"cpu",kernelFunc:nC},iC={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{paddings:a,constantValue:o}=i;mx(s,"pad");const u=a.map((e,t)=>e[0]+s.shape[t]+e[1]),l=a.map(e=>e[0]),c=n.data.get(s.dataId).values,h=r.sizeFromShape(s.shape),d=s.shape.length,p=r.computeStrides(s.shape),f=r.sizeFromShape(u),m=u.length,g=r.computeStrides(u),y=r.getTypedArrayFromDType(s.dtype,f);0!==o&&y.fill(o);for(let v=0;v<h;v++){const e=r.indexToLoc(v,d,p).map((e,t)=>e+l[t]);y[r.locToIndex(e,m,g)]=c[v]}return{dataId:n.write(y,u,s.dtype),shape:u,dtype:s.dtype}}},sC=kx((e,t)=>Math.pow(e,t)),aC=Vx(Xe,sC),oC={kernelName:Xe,backendName:"cpu",kernelFunc:aC};function uC(e,t,n,i){const[s,a]=g.computeOutAndReduceShapes(e,i),o=Ot(t,"int32"),u=r.makeZerosTypedArray(r.sizeFromShape(s),o),l=r.sizeFromShape(a);for(let r=0;r<u.length;++r){const e=r*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];u[r]=t}return{outVals:u,outShape:s,outDtype:o}}const lC={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;mx(s,"prod");const u=s.shape.length,l=r.parseAxisParam(a,s.shape),c=g.getAxesPermutation(l,u);let h=l,d=s;const p=[];null!=c&&(d=sw({inputs:{x:s},backend:n,attrs:{perm:c}}),p.push(d),h=g.getInnerMostAxes(h.length,u));const f=n.data.get(d.dataId).values,{outVals:m,outShape:y,outDtype:v}=uC(d.shape,d.dtype,f,h);let b=y;return o&&(b=g.expandShapeToKeepDim(y,l)),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(b,v,m)}};function cC(e,t,n,i){if(e===t||e<t&&n<0||t<e&&n>1)return r.makeZerosTypedArray(0,i);const s=Math.abs(Math.ceil((t-e)/n)),a=r.makeZerosTypedArray(s,i);t<e&&1===n&&(n=-1),a[0]=e;for(let r=1;r<a.length;r++)a[r]=a[r-1]+n;return a}const hC={kernelName:"Range",backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:s,step:a}=n,o=cC(r,i,a,s);return t.makeTensorInfo([o.length],s,o)}},dC={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:vx("Reciprocal",e=>1/e)},pC={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:o,size:u}=i;mx(s,"resizeBilinear");const l=r.computeStrides(s.shape),[c,h]=u,[d,p,f,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(r.sizeFromShape([d,c,h,m])),v=[a&&c>1?p-1:p,a&&h>1?f-1:f],b=[a&&c>1?c-1:c,a&&h>1?h-1:h];let _=0;const x=v[0]/b[0],w=v[1]/b[1];for(let r=0;r<d;r++)for(let e=0;e<c;e++){let t;t=o?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),i=t-n,s=Math.min(p-1,Math.ceil(t)),a=r*l[0]+n*l[1],u=r*l[0]+s*l[1];for(let e=0;e<h;e++){let t;t=o?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,s=Math.min(f-1,Math.ceil(t)),c=a+n*l[2],h=u+n*l[2],d=a+s*l[2],p=u+s*l[2];for(let e=0;e<m;e++){const t=g[c+e],n=g[h+e],s=t+(g[d+e]-t)*r;y[_++]=s+(n+(g[p+e]-n)*r-s)*i}}}return n.makeTensorInfo([d,c,h,m],"float32",y)}},fC={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{images:s,dy:a}=t,{alignCorners:o}=i;mx([a,s],"resizeBilinearGrad");const u=r.computeStrides(s.shape),[l,c,h,d]=s.shape,[,p,f]=a.shape,m=new Float32Array(l*c*h*d),g=[o&&p>1?c-1:c,o&&f>1?h-1:h],y=[o&&p>1?p-1:p,o&&f>1?f-1:f],v=g[0]/y[0],b=g[1]/y[1],_=n.data.get(a.dataId).values;let x=0;for(let r=0;r<l;r++){const e=r*u[0];for(let t=0;t<p;t++){const n=t*v,r=Math.floor(n),i=Math.min(Math.ceil(n),c-1),s=e+r*u[1],a=e+i*u[1],o=n-r,l=1-o;for(let e=0;e<f;e++){const t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),h-1),i=t-n,c=1-i,p=s+n*u[2],f=s+r*u[2],g=a+n*u[2],y=a+r*u[2],v=l*c,w=l*i,S=o*c,E=o*i;for(let e=0;e<d;e++){const t=_[x++];m[p+e]+=t*v,m[f+e]+=t*w,m[g+e]+=t*S,m[y+e]+=t*E}}}}return n.makeTensorInfo([l,h,c,d],"float32",m)}},mC={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{images:s}=t,{alignCorners:a,halfPixelCenters:o,size:u}=i;mx(s,"resizeNearestNeighbor");const l=r.computeStrides(s.shape),[c,h]=u,[d,p,f,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(d*c*h*m),v=[a&&c>1?p-1:p,a&&h>1?f-1:f],b=[a&&c>1?c-1:c,a&&h>1?h-1:h],_=v[0]/b[0],x=v[1]/b[1];let w=0;for(let r=0;r<d;r++){const e=r*l[0];for(let t=0;t<c;t++){const n=o?_*(t+.5):_*t;let r=Math.min(p-1,a?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));const i=e+r*l[1];for(let e=0;e<h;e++){const t=o?x*(e+.5):x*e;let n=Math.min(f-1,a?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));const r=i+n*l[2];for(let e=0;e<m;e++)y[w++]=g[r+e]}}}return n.makeTensorInfo([d,c,h,m],s.dtype,y)}},gC={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{images:s,dy:a}=t,{alignCorners:o}=i;mx([a,s],"resizeNearestNeighborGrad");const u=r.computeStrides(s.shape),l=r.computeStrides(a.shape),[c,h,d,p]=s.shape,[,f,m]=a.shape,g=new Float32Array(c*h*d*p),y=n.data.get(a.dataId).values,v=[o&&f>1?h-1:h,o&&m>1?d-1:d],b=[o&&f>1?f-1:f,o&&m>1?m-1:m],_=v[0]/b[0],x=v[1]/b[1],w=1/_,S=1/x,E=2*Math.ceil(w)+2,C=2*Math.ceil(S)+2;for(let r=0;r<c;r++){const e=r*u[0];for(let t=0;t<h;t++){const n=e+t*u[1],r=Math.floor(t*w),i=Math.floor(r-E/2);for(let s=0;s<d;s++){const r=n+s*u[2],a=Math.floor(s*S),c=Math.floor(a-C/2);for(let n=0;n<p;n++){let a=0;for(let r=0;r<E;r++){const u=r+i;if(u<0||u>=f)continue;const p=e+u*l[1],g=u*_;if(t===Math.min(h-1,o?Math.round(g):Math.floor(g)))for(let e=0;e<C;e++){const t=e+c;if(t<0||t>=m)continue;const r=p+t*l[2],i=t*x;s===Math.min(d-1,o?Math.round(i):Math.floor(i))&&(a+=y[r+n])}}g[r+n]=a}}}}return n.makeTensorInfo(s.shape,s.dtype,g)}},yC={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{dims:a}=i;mx(s,"reverse");const o=s.shape.length,u=r.parseAxisParam(a,s.shape);if(0===o)return wx({inputs:{x:s},backend:n});const l=new wt(s.shape,s.dtype),c=n.bufferSync(s);for(let r=0;r<l.size;r++){const e=l.indexToLoc(r),t=e.slice();u.forEach(e=>t[e]=s.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},vC={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:i}=e,{radians:s,fillValue:a,center:o}=t,u=n,l=r.getTypedArrayFromDType(i.dtype,r.sizeFromShape(i.shape)),[c,h,d,p]=i.shape,[f,m]=g.getImageCenter(o,h,d),y=Math.sin(s),v=Math.cos(s),b=u.data.get(i.dataId).values;for(let r=0;r<c;r++){const e=r*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let s=0;s<p;s++){const o=[c,t,r,s],u=o[2],g=o[1];let _=(u-f)*v-(g-m)*y,x=(u-f)*y+(g-m)*v;_=Math.round(_+f),x=Math.round(x+m);let w=a;"number"!=typeof a&&(w=3===s?255:a[s]),_>=0&&_<d&&x>=0&&x<h&&(w=b[e+x*(d*p)+_*p+s]),l[e+n+i+s]=w}}}}return{dataId:u.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},bC={kernelName:"Round",backendName:"cpu",kernelFunc:vx("Round",e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})},_C=Iw(e=>1/Math.sqrt(e)),xC={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:bx("Rsqrt",_C)};function wC(e,t,n,r,i,s,a,o,u,l){const c=[r/i,i],h=e.values,d=t.values;if(0===r)return Gn(n,t.dtype);const p=Gn(c,t.dtype);p.values.fill(u);for(let f=0;f<s;f++){const e=[];let s=0;for(let t=0;t<a;t++){const n=h[f*a+t];e.push(n),s+=n*o[t]}if(s<0||s>=r/i)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<i;n++)l?p.values[s*i+n]+=d[f*i+n]:p.values[s*i+n]=0===t.rank?d[0]:d[f*i+n]}return p}const SC={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:a}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:h}=g.calculateShapes(s,i,a),d=wC(n.bufferSync(i),n.bufferSync(s),a,h,l,u,o,c,0,!0);return n.makeTensorInfo(a,d.dtype,d.values)}},EC={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:i,t:s,e:a}=t;mx([i,s,a],"select");const o=i.shape.length,u=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,h=Ot(s.dtype,a.dtype),d=r.makeZerosTypedArray(r.sizeFromShape(s.shape),h);let p=0;const f=0===o||o>1||1===s.shape.length?1:r.sizeFromShape(s.shape.slice(1));for(let r=0;r<u.length;r++)for(let e=0;e<f;e++)d[p++]=1===u[r]?l[r]:c[r];return n.makeTensorInfo(s.shape,h,d)}},CC=g.SELU_SCALEALPHA,kC=g.SELU_SCALE,TC={kernelName:"Selu",backendName:"cpu",kernelFunc:vx("Selu",e=>e>=0?kC*e:CC*(Math.exp(e)-1))},AC={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:vx("Sigmoid",e=>1/(1+Math.exp(-e)))},MC={kernelName:"Sign",backendName:"cpu",kernelFunc:vx("Sign",e=>e<0?-1:e>0?1:0)},NC=vx(Ze,e=>Math.sin(e)),IC={kernelName:Ze,backendName:"cpu",kernelFunc:NC},DC={kernelName:"Sinh",backendName:"cpu",kernelFunc:vx("Sinh",e=>Math.sinh(e))},RC=Math.log(1.1920928955078125e-7)+2,LC={kernelName:"Softplus",backendName:"cpu",kernelFunc:vx("Softplus",e=>{const t=e>-RC,n=e<RC,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i})},OC={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{blockShape:a,paddings:o}=i;mx([s],"spaceToBatchND");const u=r.sizeFromShape(a),l=[[0,0]];l.push(...o);for(let r=1+a.length;r<s.shape.length;++r)l.push([0,0]);const c=iC.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=g.getReshaped(c.shape,a,u,!1),d=g.getPermuted(h.length,a.length,!1),p=g.getReshapedPermuted(c.shape,a,u,!1),f=Kx({inputs:{x:c},backend:n,attrs:{shape:h}}),m=sw({inputs:{x:f},backend:n,attrs:{perm:d}}),y=Kx({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}},FC={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:a}=t,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=g.calculateShapes(s,i,o),p=wC(n.bufferSync(i),n.bufferSync(s),o,d,c,l,u,h,n.data.get(a.dataId).values[0],!1);return n.makeTensorInfo(o,p.dtype,p.values)}},PC={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{numOrSizeSplits:a,axis:o}=i,u=r.parseAxisParam(o,s.shape)[0],l=g.prepareSplitSize(s,a,u),c=new Array(s.shape.length).fill(0),h=s.shape.slice();return l.map(e=>{const t=[...h];t[u]=e;const r=Cw({inputs:{x:s},backend:n,attrs:{begin:c,size:t}});return c[u]+=e,r})}},zC={kernelName:"Sqrt",backendName:"cpu",kernelFunc:vx("Sqrt",e=>Math.sqrt(e))},$C={kernelName:"Square",backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;mx(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const e=i[a];s[a]=e*e}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},BC=kx((e,t)=>{const n=e-t;return n*n}),UC={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:Vx("SquaredDifference",BC)},VC={kernelName:"Step",backendName:"cpu",kernelFunc:vx("Step",(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})};function WC(e,t,n,r){const i=Gn(e,t.dtype);for(let s=0;s<i.size;s++){const e=i.indexToLoc(s),a=new Array(e.length);for(let t=0;t<a.length;t++)a[t]=e[t]*n[t]+r[t];i.set(t.get(...a),...e)}return i}const HC={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:a,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;mx(i,"stridedSlice");const{nonStrided:f,$begin:m,$strides:g,size:y,newShape:v,outShape:b}=h.sliceInfo(i.shape,s,a,o,u,l,c,d,p),_=Kx({inputs:{x:i},backend:n,attrs:{shape:v}});let x;if(f){const e=Cw({inputs:{x:_},backend:n,attrs:{begin:m,size:y}});x=Kx({inputs:{x:e},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(e)}else if(b.some(e=>0===e))x=n.makeTensorInfo(b,i.dtype,[]);else{const e=WC(b,n.bufferSync(_),g,m);x=n.makeTensorInfo(e.shape,e.dtype,e.values)}const w=Kx({inputs:{x},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(x),w}},GC=vx(Je,e=>Math.tan(e)),jC={kernelName:Je,backendName:"cpu",kernelFunc:GC},qC=vx("Tanh",e=>Math.tanh(e));function KC(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=Gn(n,e.dtype);for(let i=0;i<r.values.length;++i){const t=r.indexToLoc(i),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const s=e.locToIndex(n);r.values[i]=e.values[s]}return r}function XC(e,t,n,i,s){const a=t[t.length-1],[o,u]=[e.length/a,a],l=r.getTypedArrayFromDType(n,o*i),c=r.getTypedArrayFromDType("int32",o*i);for(let r=0;r<o;r++){const t=r*u,n=e.subarray(t,t+u),s=[];for(let e=0;e<n.length;e++)s.push({value:n[e],index:e});s.sort((e,t)=>t.value-e.value);const a=r*i,o=l.subarray(a,a+i),h=c.subarray(a,a+i);for(let e=0;e<i;e++)o[e]=s[e].value,h[e]=s[e].index}const h=t.slice();return h[h.length-1]=i,[Gn(h,n,l),Gn(h,"int32",c)]}function ZC(e,t,n,i){const s=r.parseAxisParam(t,n)[0],a=[1,n[0],1];for(let r=0;r<s;r++)a[0]*=n[r];a[1]=n[s];for(let r=s+1;r<n.length;r++)a[2]*=n[r];const o={},u=new Int32Array(n[s]),l=new wt(a,i,e),c=[],h=1===a[0]&&1===a[2];for(let r=0;r<n[s];r++){let t;if(h)t=e[r].toString();else{const e=[];for(let t=0;t<a[0];t++)for(let n=0;n<a[2];n++)e.push(l.get(t,r,n));t=e.join(",")}if(void 0!==o[t])u[r]=o[t];else{const e=Object.keys(o).length;o[t]=e,u[r]=e,c.push(r)}}const d=a.slice();d[1]=Object.keys(o).length;const p=new wt(d,i);c.forEach((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)p.set(l.get(n,e,r),n,t,r)});const f=n.slice();return f[s]=d[1],{outputValues:p.values,outputShape:f,indices:u}}const YC=[Jx,ew,tw,nw,qx,rw,ow,uw,lw,cw,hw,dw,pw,fw,mw,bw,_w,xw,ww,Yx,Sw,Tw,Nw,Ux,Rw,Lw,Fx,Ow,Bw,Ww,Hw,Vw,jw,qw,Gw,Xw,Zw,Yw,Jw,Qw,eS,nS,rS,iS,sS,aS,uS,oS,DS,xx,lS,hS,bS,wS,ES,kS,$S,US,VS,HS,GS,jS,qS,KS,ZS,JS,QS,Sx,eE,zw,tE,nE,rE,Cx,sE,aE,uE,hE,dE,pE,fE,mE,gE,yE,wE,SE,EE,CE,kE,TE,_E,NE,IE,RE,LE,PE,UE,NS,WE,GE,qE,XE,YE,JE,tC,rC,iC,oC,Mx,lC,hC,$x,dC,Ix,Rx,Xx,pC,fC,mC,gC,yC,vC,bC,xC,SC,EC,TC,AC,MC,IC,DC,kw,BE,LC,OC,FC,PC,zC,$C,UC,VC,HC,FS,ME,jC,{kernelName:"Tanh",backendName:"cpu",kernelFunc:qC},{kernelName:"Tile",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:s}=r;mx(i,"tile");const a=KC(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s}=r;mx(i,"topk");const a=n.data.get(i.dataId).values,[o,u]=XC(a,i.shape,i.dtype,s);return[n.makeTensorInfo(o.shape,o.dtype,o.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},aw,{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;mx(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:u,indices:l}=ZC(a,i,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],u=new Array(a-1);let l=0;for(let p=0;p<a;p++)p!==s&&(u[l++]=i.shape[p]);const c=new Array(a).fill(0),h=i.shape.slice();h[s]=1;const d=new Array(o);for(let p=0;p<d.length;p++){c[s]=p;const e=Cw({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});d[p]=Kx({inputs:{x:e},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(e)}return d}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,segmentIds:a}=t,{numSegments:o}=i;mx(s,"unsortedSegmentSum");const u=[],l=[],c=s.shape.length-a.shape.length;let h=a;for(let r=0;r<c;++r){const e=SS({inputs:{input:h},backend:n,attrs:{dim:r+1}});h=e,l.push(e)}for(let p=0;p<o;++p){const e=r.createScalarValue(p,"int32"),t=n.makeTensorInfo([],"int32",e),i=cS({inputs:{a:t,b:h},backend:n}),a=Bx({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),o=MS({inputs:{a,b:s},backend:n}),c=AE({inputs:{x:o},backend:n,attrs:{axis:0,keepDims:!1}});u.push(c),l.push(t),l.push(i),l.push(a),l.push(o),l.push(c)}const d=nC({inputs:u,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},eC];for(const aR of YC)it(aR);const JC={},QC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ek(e){if(!(e in JC)){const t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete JC[e]},!1),1===e?t.getContext("webgl",QC)||t.getContext("experimental-webgl",QC):t.getContext("webgl2",QC)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;JC[e]=t}const t=JC[e];return t.isContextLost()?(delete JC[e],ek(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),JC[e])}var tk,nk,rk;function ik(e,t){return[t,e]}function sk(e){const t=r.sizeFromShape(e),n=Math.ceil(t/4);return r.sizeToSquarishShape(n)}function ak(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ok(e,t){const n=e;let r,i,s,a,o,u,l,c,h,d;return 2===$e().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,l=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT):(r=e.RGBA,i=e.RGBA,s=e.RGBA,a=n.RGBA,o=e.RGBA,l=4,c=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT),u=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function uk(e,t){const n=t();return $e().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}function lk(e){return!!($e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ck(e,t){return yk(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(tk||(tk={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(nk||(nk={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(rk||(rk={}));const hk=/ERROR: [0-9]+:([0-9]+):/g;function dk(e,t){if(uk(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function pk(e,t,n,r,i,s,a){const o=e.getAttribLocation(t,n);return-1!==o&&(uk(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),uk(e,()=>e.vertexAttribPointer(o,i,e.FLOAT,!1,s,a)),uk(e,()=>e.enableVertexAttribArray(o)),!0)}function fk(e,t,n){uk(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),uk(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function mk(e,t){uk(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),uk(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function gk(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function yk(e,t,n){const r=uk(e,()=>t());if(null==r)throw new Error(n);return r}function vk(e,t=2){return r.sizeFromShape(e.slice(0,e.length-t))}function bk(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function _k(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[vk(e),...bk(e)]),t}function xk(e){return e%2==0}function wk(e,t){if(e=e.slice(-2),t=t.slice(-2),r.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(xk(n)&&xk(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&xk(e[0])&&xk(t[0])}let Sk,Ek;function Ck(e,t){return null!=e.getExtension(t)}function kk(e){try{if(null!=ek(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Tk(e){const t=ok(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Ak(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&r.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}const Mk=$e();function Nk(){let e,t,n,r,i,s,a,o,u,l;return 2===$e().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:u,defineRound:l}}function Ik(e,t,n="index"){const i=r.computeStrides(t);return i.map((t,r)=>`${`int ${e[r]} = ${n} / ${t}`}; ${r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${t}`:`index -= ${e[r]} * ${t}`};`).join("")}function Dk(e){const t=r.computeStrides(e).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}Mk.registerFlag("HAS_WEBGL",()=>Mk.getNumber("WEBGL_VERSION")>0),Mk.registerFlag("WEBGL_VERSION",()=>kk(2)?2:kk(1)?1:0),Mk.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Mk.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===Mk.get("WEBGL_VERSION")),Mk.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Mk.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Mk.registerFlag("WEBGL_PACK",()=>Mk.getBool("HAS_WEBGL")),Mk.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_CLIP",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),Mk.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_PACK_REDUCE",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_LAZILY_UNPACK",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_CONV_IM2COL",()=>Mk.getBool("WEBGL_PACK")),Mk.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==Sk){const t=ek(e);Sk=t.getParameter(t.MAX_TEXTURE_SIZE)}return Sk}(Mk.getNumber("WEBGL_VERSION"))),Mk.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==Ek){const t=ek(e);Ek=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ek)}(Mk.getNumber("WEBGL_VERSION"))),Mk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Mk.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=ek(e);return t=Ck(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Ck(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),Mk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Mk.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!s.isMobile()),Mk.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=ek(e);if(1===e){if(!Ck(t,"OES_texture_float"))return!1}else if(!Ck(t,"EXT_color_buffer_float"))return!1;return Tk(t)}(Mk.getNumber("WEBGL_VERSION"))),Mk.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Mk.getBool("WEBGL_FORCE_F16_TEXTURES")&&Mk.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Mk.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function(e){if(0===e)return!1;const t=ek(e);if(1!==e){if(Ck(t,"EXT_color_buffer_float"))return Tk(t);const e="EXT_color_buffer_half_float";if(Ck(t,e)){const n=t.getExtension(e);return function(e,t){const n=ok(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}return!!Ck(t,"OES_texture_float")&&!!Ck(t,"WEBGL_color_buffer_float")&&Tk(t)}(Mk.getNumber("WEBGL_VERSION"))),Mk.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=Mk.getNumber("WEBGL_VERSION"))&&null!=ek(e).fenceSync;var e}),Mk.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Mk.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Mk.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${e}.`)});const Rk="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";class Lk{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=tk.DENSE;const t=sk(e),n=Nk();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Ik(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}class Ok{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=tk.DENSE;const t=sk(e),n=Nk();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Ik(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}class Fk{constructor(e){this.variableNames=["A"],this.outTexUsage=nk.DOWNLOAD;const t=Nk();this.outputShape=e,this.userCode=`\n      ${Rk}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class Pk{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=nk.DOWNLOAD;const t=Nk();this.outputShape=e,this.userCode=`\n      ${Rk}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}class zk{constructor(e,t,n=!1){this.variableNames=["A"];const r=Nk(),[i,s]=t;this.outputShape=e;let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`\n      ${Dk(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${s};\n        int c = imod(flatIndex, ${s});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${a}, 0., 0., 0.);\n      }\n    `}}class $k{constructor(e,t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=Nk(),[i,s]=t;this.outputShape=e;let a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let u=0;u<=1;u++)for(let t=0;t<=1;t++){const n=2*u+t;a+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${e[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${u} < ${e[1]}) {\n              localCoords[1] += ${u};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${s};\n              c = imod(flatIndex, ${s});\n              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${Dk(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${a}\n\n        ${r.output} = ${o};\n      }\n    `}}function Bk(e,t,n,r,i,s){!function(e,t){const n=$e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size "+`[${e}x${t}]`+" is invalid.");if(e>n||t>n)throw new Error("Requested texture size "+`[${e}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}(t,n);const a=function(e){return yk(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),o=e.TEXTURE_2D;return uk(e,()=>e.bindTexture(o,a)),uk(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),uk(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),uk(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),uk(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),uk(e,()=>e.texImage2D(o,0,r,t,n,0,i,s,null)),uk(e,()=>e.bindTexture(e.TEXTURE_2D,null)),a}function Uk(e){return e.internalFormatFloat}function Vk(e){return e.internalFormatHalfFloat}function Wk(e){return e.downloadTextureFormat}function Hk(e){return e.internalFormatPackedFloat}function Gk(e){return e.internalFormatPackedHalfFloat}class jk{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=$e().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){JC[e]=t}(t,e)):this.gl=ek(t);let n="WEBGL_color_buffer_float";if(1===$e().getNumber("WEBGL_VERSION")){const e="OES_texture_half_float";if(this.textureFloatExtension=ck(this.gl,"OES_texture_float"),Ck(this.gl,e))this.textureHalfFloatExtension=ck(this.gl,e);else if($e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Ck(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ck(this.gl,"EXT_color_buffer_half_float");else if($e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Ck(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Ck(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=function(e){return function(e,t){const n=yk(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return uk(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),uk(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){const n=yk(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return uk(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),uk(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return yk(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=ok(this.gl,this.textureHalfFloatExtension)}get debug(){return $e().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;uk(e,()=>e.finish()),uk(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),uk(e,()=>e.deleteFramebuffer(this.framebuffer)),uk(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),uk(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),uk(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,s]=ik(t,n);return Bk(e,i,s,Uk(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,s]=ik(t,n);return Bk(e,i,s,Vk(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,s]=ik(t,n);return Bk(e,i,s,Wk(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){uk(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?uk(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):uk(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),uk(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,s){let a,o,u;uk(e,()=>e.bindTexture(e.TEXTURE_2D,t)),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,u=e.RGBA):(a=new Float32Array(n*r*4),o=e.FLOAT,u=s.internalFormatPackedFloat),a.set(i),uk(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,o,a)),uk(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,s]=ak(t,n);return Bk(e,i,s,Gk(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,s]=ak(t,n);return Bk(e,i,s,Hk(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(mk(this.gl,this.framebuffer),this.outputTexture=null),uk(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[i,s]=ik(t,n),a=new Uint8Array(t*n*4);return uk(e,()=>e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,i,s){return function(e,t,n,r,i,s,a,o){const u=e,l=new Float32Array(function(e,t){const[n,r]=ak(e,t);return n*r*4}(s,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}(this.gl,e,0,0,0,i,s)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const i=e.createBuffer();uk(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));const s=16*t*n;return uk(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ)),uk(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),uk(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}(this.gl,t,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if($e().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return uk(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=function(e,t){const n=yk(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(uk(e,()=>e.shaderSource(n,t)),uk(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){const n=hk.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const i=+n[1],s=e.split("\n"),a=s.length.toString().length+2,o=s.map((e,t)=>r.rightPad((t+1).toString(),a)+e);let u=0;for(let r=0;r<o.length;r++)u=Math.max(o[r].length,u);const l=o.slice(0,i-1),c=o.slice(i-1,i),h=o.slice(i);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${r.rightPad(c[0],u)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(t,e),i=function(e){const t=Nk();return function(e,t){const n=yk(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(uk(e,()=>e.shaderSource(n,t)),uk(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(t),s=function(e){return yk(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);return uk(t,()=>t.attachShader(s,i)),uk(t,()=>t.attachShader(s,n)),function(e,t){if(uk(e,()=>e.linkProgram(t)),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,s),this.debug&&dk(t,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=function(e,t,n){return uk(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),pk(e,t,"clipSpacePos",n,3,20,0)&&pk(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),s}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&uk(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&dk(this.gl,this.program),uk(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return yk(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),uk(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){uk(e,()=>function(e,t,n){(function(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)})(e,n),uk(e,()=>e.activeTexture(e.TEXTURE0+n)),uk(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),uk(e,()=>e.uniform1i(n,r))}(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=ak(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&dk(this.gl,this.program),gk(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),uk(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),uk(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ck(this.gl,2===$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await r.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||r.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),fk(this.gl,e,this.framebuffer),this.debug&&gk(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(fk(this.gl,this.outputTexture,this.framebuffer),this.debug&&gk(this.gl)):mk(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;fk(r,e,this.framebuffer),this.debug&&gk(r),this.outputTexture=e,uk(r,()=>r.viewport(0,0,t,n)),uk(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),uk(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{getBroadcastDims:qk}=g;const Kk="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Xk="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zk="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Yk="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Jk(e){return`offset${e}`}function Qk(e){const t=e.name,n=r.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function eT(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function tT(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function nT(e,t){return t.map(t=>e[t]).join(", ")}function rT(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but `+`was executed with ${t.length} inputs`);e.forEach((e,n)=>{const i=e.logicalShape,s=t[n],a=s.shape;if(!r.arraysEqual(i,a))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${i} and ${a} must match`);if(e.isUniform&&s.isUniform)return;const o=e.texShape,u=s.isUniform?null:s.texData.texShape;if(!r.arraysEqual(o,u))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${o} and ${u} must match`)})}const{addImpl:iT,bincountImpl:sT,bincountReduceImpl:aT,ceilImpl:oT,concatImpl:uT,expImpl:lT,expm1Impl:cT,floorImpl:hT,gatherV2Impl:dT,greaterImpl:pT,lessImpl:fT,linSpaceImpl:mT,logImpl:gT,maxImpl:yT,maximumImpl:vT,minimumImpl:bT,multiplyImpl:_T,negImpl:xT,prodImpl:wT,rangeImpl:ST,rsqrtImpl:ET,simpleAbsImpl:CT,sliceImpl:kT,stridedSliceImpl:TT,subImpl:AT,tileImpl:MT,topKImpl:NT,transposeImpl:IT,uniqueImpl:DT}=V;function RT(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function LT(e,t){return 1===t?[e]:RT(e,t)}class OT{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=LT("rc",t),r=eT(t),i=function(e,t,n){if(1===e)return`rc > ${t[0]}`;let r="";for(let i=e-2;i<e;i++)r+=`${n[i]} >= ${t[i]}`,i<e-1&&(r+="||");return r}(t,e,n),s=function(e,t,n,r){if(1===e)return"";const i=r.slice(-2);return`\n    int r = ${i[0]};\n    int c = ${i[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${t};\n    bool rEdge = rp1 >= ${n};\n  `}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){const n=e.length,r=function(e,t){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let n=2;n<e;n++)s=`${t[t.length-1-n]},`+s;n.push(s)}return n}(n,t);return 1===n?`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(e,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${a}));\n          }\n        }\n      `}}}class FT{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let i=0;i<4;i++){let e="thisRC = rc;";i%2==1&&(e+="thisRC.z += 1;"),i>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${i}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${i>0?"}":""}\n      `}var r;this.userCode=`\n      ${r=t,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${Ik(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${Dk(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${e[1]};\n        int cols = ${e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class PT{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=$T(t,n),i=BT(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=zT(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[i].shift();return this.usedTextures[i].push(e),e}let a;return r===rk.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===rk.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===rk.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===rk.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===rk.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=$T(n,r),s=BT(t,i,r);s in this.freeTextures||(this.freeTextures[s]=[]);const a=zT(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=$e().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=a):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[s],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function zT(e,t,n,r,i){const s=function(e,t){switch(e){case rk.PACKED_2X2_FLOAT32:return Hk(t);case rk.PACKED_2X2_FLOAT16:return Gk(t);case rk.UNPACKED_FLOAT32:return Uk(t);case rk.UNPACKED_FLOAT16:return Vk(t);case rk.PACKED_4X1_UNSIGNED_BYTE:return Wk(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let a;if(i){const[t,n]=ak(e[0],e[1]);a=t*n}else{const[t,n]=ik(e[0],e[1]);a=t*n}return a*function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}(n,s)}function $T(e,t){if(e===nk.UPLOAD)return rk.PACKED_2X2_FLOAT32;if(e===nk.RENDER||null==e)return function(e){return $e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?rk.PACKED_2X2_FLOAT32:rk.UNPACKED_FLOAT32:e?rk.PACKED_2X2_FLOAT16:rk.UNPACKED_FLOAT16}(t);if(e===nk.DOWNLOAD||e===nk.PIXELS)return rk.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function BT(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class UT{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const VT="return abs(x);",WT="return x;";class HT{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class GT{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const t=e.length,n=LT("rc",t),r=eT(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),a=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const jT=y.whereImpl,qT={};class KT extends H{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!$e().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=ek($e().getNumber("WEBGL_VERSION"));this.binaryCache=(t=$e().getNumber("WEBGL_VERSION"))in qT?qT[t]:(qT[t]={},qT[t]),this.gpgpu=new jk(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var t;this.textureManager=new PT(this.gpgpu),this.numMBBeforeWarning=null==$e().global.screen?1024:$e().global.screen.height*$e().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new W(this,si())}nextDataId(){return KT.nextDataId++}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(e,t,n){if(($e().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||$e().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:nk.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,i){if($e().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:nk.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:u}=t;if(null!=a){let t;t=u?new HT(o,WT):new UT(o,WT);const n=this.runWebGLProgram(t,[{dataId:e,shape:o,dtype:i}],i),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===i)return n;const l=null!=this.activeTimers;let c,h;if(l&&(c=r.now()),"complex64"===i){const e=this.readSync(s.real.dataId),t=this.readSync(s.imag.dataId);h=g.mergeRealAndImagArrays(e,t)}else h=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=r.now()-c),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:u}=t;if(null!=s){let t;t=u?new HT(i,WT):new UT(i,WT);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:a}],a),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if(!$e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===$e().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,h=null;if("complex64"!==a&&$e().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);h=this.gpgpu.createBufferFromTexture(t.texture,...sk(i))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]);c=g.mergeRealAndImagArrays(e[0],e[1])}else if(null==h)c=this.getValuesFromTexture(e);else{const e=r.sizeFromShape(i);c=this.gpgpu.downloadFloat32MatrixFromBuffer(h,e)}null!=l&&this.disposeIntermediateTensorInfo(l);const d=this.convertAndCacheOnCPU(e,c),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(e=>e(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&si().removeDataId(e,this),this.pendingDeletes--),d}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>r.decodeString(e))}catch(i){throw new Error("Failed to decode encoded string bytes into utf-8")}return Gn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!lk(n)){if($e().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:i}=this.texData.get(e),s=r.sizeFromShape(t);if($e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...sk(t)).subarray(0,s);return this.disposeIntermediateTensorInfo(n),i}const a=$e().getBool("WEBGL_PACK")&&!0===i,o=a?_k(t):t,u=a?new Pk(o):new Fk(o),l=this.runWebGLProgram(u,[{shape:o,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(l),h}timerAvailable(){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let i=!1;null==this.programTimersStack?(this.programTimersStack=n,i=!0):this.activeTimers.push(n),this.activeTimers=n,e();const s=r.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),a=r.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if($e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(s);o.kernelMs=r.sum(e),o.getExtraProfileInfo=()=>e.map((e,t)=>({name:a[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}endTimer(e){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=r.now(),e)}async getQueryTime(e){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:s,slice:a}=this.texData.get(e),o=a&&a.origDataId||e,u=this.dataRefCount.get(o);u>1?this.dataRefCount.set(o,u-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,s)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return $e().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=si().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(e,t=128){const n=this.getCPUBackend();return $e().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=n||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&e.every(e=>null==this.texData.get(e.dataId).texture&&r.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){g.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return jT(e.shape,t)}packedUnaryOp(e,t,n){const r=new HT(e.shape,t),i=this.compileAndRun(r,[e],n);return si().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=CT(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if($e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,VT,e.dtype);const t=new UT(e.shape,VT),n=this.compileAndRun(t,[e]);return si().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let i;if("string"===t&&null!=n&&n.length>0&&r.isString(n[0])){const s=n.map(e=>r.encodeString(e));i=this.write(s,e,t)}else i=this.write(n,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return si().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new GT(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new OT(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[vk(e.shape),...bk(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[vk(t),...bk(t)],s=new FT(i,n),a=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:i}=t,s=_k(r);let a;return a=n?new Ok(s):new Lk(s),{dtype:i,shape:r,dataId:this.runWebGLProgram(a,[{shape:s,dtype:i,dataId:e}],i,null,!0).dataId}}runWebGLProgram(e,t,n,i,s=!1){const a=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(a.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===tk.DENSE){const t=sk(e.outputShape);o.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===r.sizeFromShape(a.shape))return o.values=r.getTypedArrayFromDType(a.dtype,0),a;const u=[],l=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&r.sizeFromShape(t.shape)<=$e().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),u.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!wk(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),u.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:o,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach(e=>{r+=`${e.shape}_${e.isUniform?"uniform":e.texData.texShape}_${null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0}`});let i=e.constructor.name;return i+="_"+r+"_"+e.userCode,i}(e,l,c),d=this.getAndSaveBinary(h,()=>function(e,t,n,i){const s=t.userCode,a=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),o=a.map(e=>e.shapeInfo),u={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},l=function(e,t,n,i){const s=[];e.forEach(e=>{const t=r.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?s.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(s.push(`uniform sampler2D ${e.name};`),s.push(`uniform int offset${e.name};`))});const a=s.join("\n"),o=e.map(e=>function(e,t,n=!1){let i="";return i+=n?function e(t){switch(t.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${Nk().texture2D}(${t}, halfCR);\n    }\n  `}(t);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=Nk();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${s.texture2D}(${t}, uv);\n    }\n  `}(t);case 2:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape,a=s[0],o=s[1],u=Nk();if(null!=s&&r.arraysEqual(t,s))return`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);\n\n        return ${u.texture2D}(${n}, uv);\n      }\n    `;const l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(t[1]/2)}, ${l[0]}, ${l[1]}, row, col);\n      return ${u.texture2D}(${n}, uv);\n    }\n  `}(t);case 3:return function(t){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=tT(t,n.slice(1)),a=["b","row","col"];return`\n        ${e(s)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${nT(a,r)});\n        }\n      `}const o=a[0],u=a[1],l=Math.ceil(n[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${o}, ${u}, ${l*Math.ceil(n[1]/2)}, ${l}, b, row, col);\n      return ${Nk().texture2D}(${r}, uv);\n    }\n  `}(t);default:return function(e){const t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],o=a[0],u=a[1],l=Math.ceil(t[n-1]/2);let c=l*Math.ceil(t[n-2]/2),h="int b, int row, int col",d=`b * ${c} + (row / 2) * ${l} + (col / 2)`;for(let p=2;p<n-1;p++)h=`int b${p}, `+h,c*=t[n-p-1],d=`b${p} * ${c} + `+d;return`\n    vec4 ${i}(${h}) {\n      int index = ${d};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${o});\n      return ${Nk().texture2D}(${r}, uv);\n    }\n  `}(t)}}(e):function e(t){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${t};}`;const[r,i]=e.shapeInfo.texShape;if(1===r&&1===i)return`\n      float ${n}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const[s,a]=e.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${a}, ${Jk(t)});\n      return sampleTexture(${t}, uv);\n    }\n  `}(t);case 1:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${Qk(e)}\n      }\n    `;const r=e.shapeInfo.texShape,i=r[0],s=r[1];if(1===s&&1===i)return`\n      float ${n}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const a=Jk(t);return 1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});\n      return sampleTexture(${t}, uv);\n    }\n  `}(t);case 2:return function(t){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),a=t.shapeInfo.texShape;if(null!=a&&r.arraysEqual(n,a))return`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${a[0]}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const{newShape:o,keptDims:u}=r.squeezeShape(n);if(o.length<n.length){const n=tT(t,o),r=["row","col"];return`\n      ${e(n)}\n      float ${s}(int row, int col) {\n        return ${s}(${nT(r,u)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${Qk(t)}\n      }\n    `;const l=a[0],c=a[1],h=Jk(i);return 1===c?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:1===l?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${l}, ${c}, index);\n    return sampleTexture(${i}, uv);\n  }\n`}(t);case 3:return function(t){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),a=n[1]*n[2],o=n[2],{newShape:u,keptDims:l}=r.squeezeShape(n);if(u.length<n.length){const n=tT(t,u),r=["row","col","depth"];return`\n        ${e(n)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${nT(r,l)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${o}, 1)));\n        ${Qk(t)}\n      }\n    `;const c=t.shapeInfo.texShape,h=c[0],d=c[1],p=t.shapeInfo.flatOffset;return d===a&&null==p?`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${i}, uv);\n        }\n      `:d===o&&null==p?`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${o} + depth + ${Jk(i)};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${i}, uv);\n      }\n  `}(t);case 4:return function(t){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),a=n[3],o=n[2]*a,u=n[1]*o,{newShape:l,keptDims:c}=r.squeezeShape(n);if(l.length<n.length){const n=tT(t,l),r=["row","col","depth","depth2"];return`\n      ${e(n)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${nT(r,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${u}, ${o}, ${a}, 1)));\n        ${Qk(t)}\n      }\n    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];return f===u&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:f===a&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${o} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${f}, index + ${Jk(i)});\n      return sampleTexture(${i}, uv);\n    }\n  `}(t);case 5:return function(t){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),a=n[4],o=n[3]*a,u=n[2]*o,l=n[1]*u,{newShape:c,keptDims:h}=r.squeezeShape(n);if(c.length<n.length){const n=tT(t,c),r=["row","col","depth","depth2","depth3"];return`\n      ${e(n)}\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        return ${s}(${nT(r,h)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${u}, ${o}, ${a})) +\n          depth3;\n        ${Qk(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],m=p[1];return m===l&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${u}, ${o}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:m===a&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} + depth * ${o} +\n          depth2 * ${a} + depth3 + ${Jk(i)};\n      vec2 uv = uvFromFlat(${f}, ${m}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(t);case 6:return function(t){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),{newShape:a,keptDims:o}=r.squeezeShape(n);if(a.length<n.length){const n=tT(t,a),r=["row","col","depth","depth2","depth3","depth4"];return`\n      ${e(n)}\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${s}(${nT(r,o)});\n      }\n    `}const u=n[5],l=n[4]*u,c=n[3]*l,h=n[2]*c,d=n[1]*h;if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${d}, ${h}, ${c}, ${l})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${u}, 1)));\n        ${Qk(t)}\n      }\n    `;const p=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,m=f[0],g=f[1];return g===d&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${h}, ${c}, ${l}, ${u})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${g}.0, ${m}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:g===u&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${g}.0, ${m}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${d} + col * ${h} + depth * ${c} +\n          depth2 * ${l} + depth3 * ${u} + depth4 + ${Jk(i)};\n      vec2 uv = uvFromFlat(${m}, ${g}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(t);default:throw new Error(`${n.length}-D input sampling`+" is not yet supported")}}(e),e.shapeInfo.logicalShape.length<=t.logicalShape.length&&(i+=n?function(e,t){const n=e.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",a=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,u=qk(e.shapeInfo.logicalShape,t.logicalShape),l=eT(o),c=o-a;let h;const d=["x","y","z","w","u","v"];h=0===a?"":o<2&&u.length>=1?"coords = 0;":u.map(e=>`coords.${d[e+c]} = 0;`).join("\n");let p="";p=o<2&&a>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>`coords.${d[t+c]}`).join(", ");let f="return outputValue;";const m=1===r.sizeFromShape(e.shapeInfo.logicalShape),g=1===r.sizeFromShape(t.logicalShape);if(1!==a||m||g){if(m&&!g)f=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){const e=a-2,t=a-1;u.indexOf(e)>-1&&u.indexOf(t)>-1?f="return vec4(outputValue.x);":u.indexOf(e)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(t)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${l} coords = getOutputCoords();\n      ${h}\n      vec4 outputValue = get${i}(${p});\n      ${f}\n    }\n  `}(e,t):function(e,t){const n=e.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",a=e.shapeInfo.logicalShape.length,o=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===o&&null==e.shapeInfo.flatOffset&&r.arraysEqual(e.shapeInfo.texShape,t.texShape))return`\n      float ${s}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=eT(o),l=qk(e.shapeInfo.logicalShape,t.logicalShape),c=o-a;let h;const d=["x","y","z","w","u","v"];h=0===a?"":o<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${d[e+c]} = 0;`).join("\n");let p="";return p=o<2&&a>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>`coords.${d[t+c]}`).join(", "),`\n    float ${s}() {\n      ${u} coords = getOutputCoords();\n      ${h}\n      return get${i}(${p});\n    }\n  `}(e,t)),i}(e,t,i)).join("\n"),u=t.texShape,l=Nk(),c=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(l);let h,d,p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Kk}\n    ${Xk}\n    ${Zk}\n  `}(l);return t.isPacked?(h=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,t);case 2:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(r.arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),i=r*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t);default:return function(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2);let s=i,a="",o="b, r, c";for(let u=2;u<e.length-1;u++)s*=e[e.length-u-1],a=`\n      int b${u} = index / ${s};\n      index -= b${u} * ${s};\n    `+a,o=`b${u}, `+o;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${e.length}(${o});\n    }\n  `}(e,t)}}(t.logicalShape,u),d=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(l)):(h=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=t)[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `;case 2:return function(e,t){return r.arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t);case 3:return function(e,t){const n=Ik(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(e,t);case 4:return function(e,t){const n=Ik(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t);case 5:return function(e,t){const n=Ik(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=Ik(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}var n}(t.logicalShape,u),d=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(l)),i&&(p+=Yk),[p,c,d,a,h,o,n].join("\n")}(a,u,s,t.packedInputs),c=e.createProgram(l);let h=null;const d=e.getUniformLocation(c,"NAN",!1);1===$e().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(c,"INFINITY",!1));const p={};for(let r=0;r<t.variableNames.length;r++){const n=t.variableNames[r],i=!1;p[n]=e.getUniformLocation(c,n,i),p[`offset${n}`]=e.getUniformLocation(c,`offset${n}`,i)}return{program:t,source:l,webGLProgram:c,uniformLocations:p,inShapeInfos:o,outShapeInfo:u,infLoc:h,nanLoc:d}}(this.gpgpu,e,l,c)),p=null!=this.activeTimers;let f;if(p&&(f=this.startTimer()),function(e,t,n,i,s){rT(t.inShapeInfos,n),rT([t.outShapeInfo],[i]);const a=i.texData.texture,o=i.texData.texShape;i.texData.isPacked?e.setOutputPackedMatrixTexture(a,o[0],o[1]):e.setOutputMatrixTexture(a,o[0],o[1]),e.setProgram(t.webGLProgram),1===$e().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((n,i)=>{const s=t.program.variableNames[i],a=t.uniformLocations[s],o=t.uniformLocations[`offset${s}`];if(null!=a)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,i)}),null!=s&&s(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,d,l,c,i),u.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!$e().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===s){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,i=!1){return this.runWebGLProgram(e,t,n=n||t[0].dtype,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||($e().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=ui(()=>{if(!$e().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=$e().getBool("DEBUG");$e().set("DEBUG",!1);const t=this.abs(Oi(1e-8)).dataSync()[0];if($e().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:i,values:s,texture:a,usage:o,isPacked:u}=t;if(null!=a)return;const l=null!=this.activeTimers;let c;l&&(c=r.now());let h=t.texShape;if(null==h&&(h=function(e,t=!1){let n=$e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((t,n)=>n>=e.length-2?r.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length){const t=r.squeezeShape(e);e=t.newShape}let i=r.sizeFromShape(e);if(e.length<=1&&i<=n)return[1,i];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=vk(e);let n=2,s=2;return e.length&&([n,s]=bk(e)),i=t*(n/2)*(s/2),r.sizeToSquarishShape(i).map(e=>2*e)}return r.sizeToSquarishShape(i)}(n,u),t.texShape=h),null!=s){const e=_k(n);let a,o=h[1],d=h[0];const p=s instanceof Uint8Array;u?([o,d]=ak(h[0],h[1]),a=new $k(e,[d,o],p)):a=new zk(e,[d,o],p);const f=this.makeTensorInfo([d,o],i);this.texData.get(f.dataId).usage=p?nk.PIXELS:nk.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),o,d,s);const m=this.runWebGLProgram(a,[f],i,null,!0),g=this.texData.get(m.dataId);t.texture=g.texture,t.texShape=g.texShape,t.isPacked=g.isPacked,t.usage=g.usage,this.disposeIntermediateTensorInfo(f),this.texData.delete(m.dataId),t.values=null,l&&(this.uploadWaitMs+=r.now()-c)}else{const e=this.acquireTexture(h,o,i,u);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*r.bytesPerElement(t)}}KT.nextDataId=0,s.isBrowser()&&vi("webgl",()=>new KT,2);class XT{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=g.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class ZT{constructor(e,t,n,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=g.assertAndGetBroadcastShape(t,n);const s=this.outputShape.length;let a="";if(i)if(0===s||1===r.sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a=`\n          ${eT(s)} coords = getOutputCoords();\n        `,1===s)a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=LT("coords",s);a+=`\n            bool nextRowOutOfBounds =\n              (${e[s-2]} + 1) >= ${this.outputShape[s-2]};\n            bool nextColOutOfBounds =\n              (${e[s-1]} + 1) >= ${this.outputShape[s-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}function YT(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const JT={kernelName:"Identity",backendName:"webgl",kernelFunc:YT};function QT(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=YT({inputs:{x:r},backend:n}),u=YT({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:u},s}const eA={kernelName:"Complex",backendName:"webgl",kernelFunc:QT},tA="return (a < 0.) ? b * a : a;",nA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",rA={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{alpha:a}=i,o=n.makeTensorInfo([],"float32",r.createScalarValue(a,"float32")),u=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ZT(nA,s.shape,o.shape):new XT(tA,s.shape,o.shape),l=n.runWebGLProgram(u,[s,o],s.dtype);return n.disposeIntermediateTensorInfo(o),l}},iA="return (a < 0.) ? b * a : a;",sA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",aA={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,s=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ZT(sA,r.shape,i.shape):new XT(iA,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)}};function oA({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,u=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&null!=n){const e=o.texData.get(a.dataId),t=n(e.values,u);return o.makeTensorInfo(a.shape,u,t)}let l;return l=$e().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new HT(a.shape,t):new UT(a.shape,e),o.runWebGLProgram(l,[a],u)}}function uA({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:u,b:l}=a,c=o;if(r&&"complex64"===u.dtype){const t=c.texData.get(u.dataId),n=c.texData.get(l.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{const[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:u.shape},s={dataId:r.dataId,dtype:r.dtype,shape:l.shape},a=new XT(e,u.shape,l.shape);return c.runWebGLProgram(a,[i,s],Ot(n.dtype,r.dtype))}),s=QT({inputs:{real:r,imag:i},backend:c});return c.disposeIntermediateTensorInfo(r),c.disposeIntermediateTensorInfo(i),s}const h=s||Ot(u.dtype,l.dtype);if(c.shouldExecuteOnCPU([u,l])&&null!=i){const e=c.texData.get(u.dataId),t=c.texData.get(l.dataId),[n,r]=i(u.shape,l.shape,e.values,t.values,h),s=c.makeTensorInfo(r,h);return c.texData.get(s.dataId).values=n,s}let d;return d=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new ZT(t,u.shape,l.shape,n):new XT(e,u.shape,l.shape),c.runWebGLProgram(d,[u,l],h)}}function lA(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?sA:iA;if("leakyrelu"===e)return t?nA:tA;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class cA{constructor(e,t,n,r=!1,i=!1,s=!1,a=null,o=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const l=Math.ceil((r?e[1]:e[2])/2),c=r?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",m="";a&&(f=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:u?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,m="result = activation(result);");const g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(v=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${f}\n\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${y};\n          int batchB = ${v};\n          vec4 a = getMatrixA(batchA, ${c});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${p[0]});\n          result += (${d[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}class hA{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=g.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const dA="return a * b;";function pA(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,s=g.upcastType(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),s=new hA("return areal * breal - aimag * bimag;",r.shape,i.shape),a=new hA("return areal * bimag + aimag * breal;",r.shape,i.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],u=n.runWebGLProgram(s,o,"float32"),l=n.runWebGLProgram(a,o,"float32"),c=QT({inputs:{real:u,imag:l},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),c}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[a,o]=_T(r.shape,i.shape,e.values,t.values,s),u=n.makeTensorInfo(o,s);return n.texData.get(u.dataId).values=a,u}let a;return a=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ZT(dA,r.shape,i.shape):new XT(dA,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const fA={kernelName:"Multiply",backendName:"webgl",kernelFunc:pA};function mA(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{shape:a}=i,o=n,u=r.sizeFromShape(s.shape),l=r.inferFromImplicitShape(a,u),c=r.sizeFromShape(l);r.assert(u===c,()=>`The new shape (${l}) has ${c} elements and the old `+`shape (${s.shape}) has ${u} elements. The new shape and old `+"shape must have the same number of elements.");const h=o.texData.get(s.dataId);return!h.isPacked||wk(s.shape,l)||null!==h.texture&&wk(h.shape,l)?(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype}):function(e,t,n){const r=[vk(e.shape),...bk(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[vk(t),...bk(t)],a=new FT(s,r),o=n.runWebGLProgram(a,[i],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}(s,l,o)}const gA={kernelName:"Reshape",backendName:"webgl",kernelFunc:mA};class yA{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=4*Math.floor(n/4),u=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${r.isInt(e)?e.toPrecision(2):e}, ones);`}let c="";s%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===u}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class vA{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:s}=e;this.outputShape=[r,s];let a="0.0",o="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",o="min"):"max"===t&&(a="-1.0 / 1e-20",o="max");let u=`${t}(${t}(${t}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");const l=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n      }\n    `,d="vec4";"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${l}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${l};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${u});\n      }\n    `}}function bA(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=g.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let s=e;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:u,outSize:l}=i[a];let c,h;c="mean"===n?0===a?new yA({windowSize:u,inSize:o,batchSize:e.shape[0],outSize:l},o):new yA({windowSize:u,inSize:o,batchSize:e.shape[0],outSize:l}):new vA({windowSize:u,inSize:o,batchSize:e.shape[0],outSize:l},n),h=s,s=r.runWebGLProgram(c,[s],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return s}class _A{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[t[s]];this.outputShape=n,this.rank=n.length;const r=eT(this.rank),i=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class xA{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let l=0;l<n.length;l++)n[l]=e[t[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=eT(this.rank),i=RT("rc",this.rank),s=new Array(this.rank);for(let l=0;l<t.length;l++)s[t[l]]=i[l];const a=`vec2(${s.slice(-2).join()})`,o=`++${i[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${u};\n      if(${o}) {\n        result[1] = ${u};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${u};\n        if(${o}) {\n          result[3] = ${u};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function wA(e,t,n){const r=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xA(e.shape,t):new _A(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function SA(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i;return function(e,t,n,i){const s=e.shape.length,a=r.parseAxisParam(t,e.shape);let o=a;const u=g.getAxesPermutation(o,s),l=null!=u;let c=e;l&&(c=wA(e,u,i),o=g.getInnerMostAxes(o.length,s)),g.assertAxesAreInnerMostDims("sum",o,s);const[h,d]=g.computeOutAndReduceShapes(c.shape,o);let p=h;n&&(p=g.expandShapeToKeepDim(h,a));const f=r.sizeFromShape(d),m=mA({inputs:{x:c},attrs:{shape:[r.sizeFromShape(e.shape)/f,f]},backend:i}),y=bA(m,Ft(e.dtype),"sum",i),v=mA({inputs:{x:y},attrs:{shape:p},backend:i});return i.disposeIntermediateTensorInfo(m),i.disposeIntermediateTensorInfo(y),l&&i.disposeIntermediateTensorInfo(c),v}(s,a,o,n)}const EA={kernelName:"Sum",backendName:"webgl",kernelFunc:SA};function CA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:s}=r,a=n,o=new Array(i.shape.length);for(let l=0;l<o.length;l++)o[l]=i.shape[s[l]];let u;if(a.shouldExecuteOnCPU([i])){const e=a.texData.get(i.dataId),t=IT(e.values,i.shape,i.dtype,s,o);u=a.makeTensorInfo(o,i.dtype),a.texData.get(u.dataId).values=t}else u=wA(i,s,a);return u}const kA={kernelName:"Transpose",backendName:"webgl",kernelFunc:CA};function TA({a:e,b:t,transposeA:n,transposeB:i,backend:s,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:u=0,activation:l=null}){const c=e.shape.length,h=t.shape.length,d=n?e.shape[c-2]:e.shape[c-1],p=i?t.shape[h-1]:t.shape[h-2],f=n?e.shape[c-1]:e.shape[c-2],m=i?t.shape[h-2]:t.shape[h-1],g=e.shape.slice(0,-2),y=t.shape.slice(0,-2),v=r.sizeFromShape(g),b=r.sizeFromShape(y);r.assert(c>=2&&h>=2&&(v===b||1===v||1===b),()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${g}) and (${y}).`);const _=(v>b?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([f,m]);r.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (`+`${p}) of Tensors with shapes ${e.shape} and `+`${t.shape} and transposeA=${n}`+` and transposeB=${i} must match.`);const x=n?[v,d,f]:[v,f,d],w=i?[b,m,p]:[b,p,m],S=mA({inputs:{x:e},backend:s,attrs:{shape:x}}),E=mA({inputs:{x:t},backend:s,attrs:{shape:w}}),C=[S,E],k=Math.max(v,b),T=n?S.shape[1]:S.shape[2],A=null!=a,M=null!=o,N="leakyrelu"===l,I=null!=l?lA(l,!0):null;let D;if((1===f||1===m)&&T>1e3&&!1===(A||M||N||null!=I)){let e=S,t=E;n&&(e=CA({inputs:{x:S},backend:s,attrs:{perm:[0,2,1]}}),C.push(e)),i&&(t=CA({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),C.push(t));const r=1===m;let a=e;1!==m&&(a=mA({inputs:{x:e},backend:s,attrs:{shape:[k,T,1]}}),C.push(a));const o=1===m?2:1;let u=t;r&&(u=mA({inputs:{x:t},backend:s,attrs:{shape:[k,1,T]}}),C.push(u));const l=pA({inputs:{a,b:u},backend:s});D=SA({inputs:{x:l},backend:s,attrs:{axis:o,keepDims:!0}}),C.push(l)}else{const l=Ot(e.dtype,t.dtype),c=new cA(x,w,[k,f,m],n,i,A,I,M,N),h=[S,E];if(null!=a&&h.push(a),M&&h.push(o),N){const e=s.makeTensorInfo([],"float32",r.createScalarValue(u,"float32"));h.push(e),C.push(e)}D=s.runWebGLProgram(c,h,l)}const R=mA({inputs:{x:D},backend:s,attrs:{shape:_}});C.push(D);for(const r of C)s.disposeIntermediateTensorInfo(r);return R}const AA={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:a,preluActivationWeights:o}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:h}=r;return TA({a:i,b:s,transposeA:u,transposeB:l,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:h,activation:c})}},MA={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=CT(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=$e().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new HT(r.shape,"return abs(x);"):new UT(r.shape,"return abs(x);"),n.runWebGLProgram(i,[r],r.dtype)}},NA={kernelName:"Acos",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},IA={kernelName:"Acosh",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},DA="return a + b;",RA={kernelName:"Add",backendName:"webgl",kernelFunc:uA({opSnippet:DA,packedOpSnippet:DA,supportsComplex:!0,cpuKernelImpl:iT})};class LA{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);const n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class OA{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);const n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const FA={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return YT({inputs:{x:i[0]},backend:r});if(i.length>$e().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),s=e({inputs:i.slice(t),backend:r});return e({inputs:[n,s],backend:r})}const s=i.map(e=>e.dtype).reduce((e,t)=>Ot(e,t)),a=i.map(e=>e.shape),o=$e().getBool("WEBGL_PACK")?new OA(i[0].shape,a):new LA(i[0].shape,a);return r.runWebGLProgram(o,i,s)}},PA={kernelName:"All",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i,u=s.shape.length,l=r.parseAxisParam(a,s.shape);let c=l;const h=g.getAxesPermutation(c,u);let d=s;null!=h&&(d=CA({inputs:{x:s},backend:n,attrs:{perm:h}}),c=g.getInnerMostAxes(c.length,u)),g.assertAxesAreInnerMostDims("all",c,u);const[p,f]=g.computeOutAndReduceShapes(d.shape,c),m=mA({inputs:{x:d},backend:n,attrs:{shape:[-1,r.sizeFromShape(f)]}}),y=bA(m,m.dtype,"all",n);let v;return v=mA(o?{inputs:{x:y},backend:n,attrs:{shape:g.expandShapeToKeepDim(p,l)}}:{inputs:{x:y},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=h&&n.disposeIntermediateTensorInfo(d),v}},zA={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i,u=s.shape.length,l=r.parseAxisParam(a,s.shape);let c=l;const h=g.getAxesPermutation(c,u);let d=s;null!=h&&(d=CA({inputs:{x:s},backend:n,attrs:{perm:h}}),c=g.getInnerMostAxes(c.length,u)),g.assertAxesAreInnerMostDims("any",c,u);const[p,f]=g.computeOutAndReduceShapes(d.shape,c),m=mA({inputs:{x:d},backend:n,attrs:{shape:[-1,r.sizeFromShape(f)]}}),y=bA(m,m.dtype,"any",n);let v;return v=mA(o?{inputs:{x:y},backend:n,attrs:{shape:g.expandShapeToKeepDim(p,l)}}:{inputs:{x:y},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=h&&n.disposeIntermediateTensorInfo(d),v}};class $A{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===t?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class BA{constructor(e,t,n,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const s=Math.ceil(e[e.length-1]/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,o=a.length,u=eT(o),l=LT("coords",o);let c,h;if(1===s){h=o+1;const e=eT(h);c=`\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\n        ++${l[o-1]};\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\n        ++${l[o-2]};\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\n        --${l[o-1]};\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\n        --${l[o-2]};`}else h=o,c=`\n        ${u} sourceLocR = coords;\n        ++${l[o-1]};\n        ${u} sourceLocG = coords;\n        ++${l[o-2]};\n        ${u} sourceLocA = coords;\n        --${l[o-1]};\n        ${u} sourceLocB = coords;\n        --${l[o-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(e=>"int "+e),m=LT("sourceLocR",h-1).concat("inIdx.r"),g=LT("sourceLocG",h-1).concat("inIdx.g"),y=LT("sourceLocB",h-1).concat("inIdx.b"),v=LT("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",_=i?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,w=i?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${w}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${l[o-1]} < ${a[o-1]-1};\n        bool hasNextRow = ${l[o-2]} < ${a[o-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${_}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function UA(e,t,n,i){const s=[n];if(g.assertAxesAreInnerMostDims("arg"+i.charAt(0).toUpperCase()+i.slice(1),s,t.shape.length),!$e().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],[a,o]=g.computeOutAndReduceShapes(t.shape,s),u=r.sizeFromShape(o),l=mA({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});n.push(l);const c=function e(t,n,r,i=null){let s=n.shape[0],a=n.shape[1];null!=i&&(s=i.shape[0],a=i.shape[1]);const o=g.computeOptimalWindowSize(a),u={windowSize:o,inSize:a,batchSize:s,outSize:Math.ceil(a/o)},l=new $A(u,r,null==i),c=[n];null!=i&&c.push(i);const h=t.runWebGLProgram(l,c,"int32");if(1===h.shape[1])return h;const d=e(t,n,r,h);return t.disposeIntermediateTensorInfo(h),d}(e,l,i);n.push(c);const h=mA({inputs:{x:c},backend:e,attrs:{shape:a}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return function e(t,n,r,i=null){const s=null!=i?i.shape:n.shape,a=g.computeOptimalWindowSize(s[s.length-1]),o=new BA(s,a,r,null==i),u=t.runWebGLProgram(o,null==i?[n]:[n,i],"int32");if(u.shape.length===n.shape.length){const i=e(t,n,r,u);return t.disposeIntermediateTensorInfo(u),i}return u}(e,t,i)}const VA={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a}=i;let o=r.parseAxisParam(a,s.shape);const u=g.getAxesPermutation(o,s.shape.length);let l=s;const c=[];null!=u&&(l=CA({inputs:{x:s},backend:n,attrs:{perm:u}}),c.push(l),o=g.getInnerMostAxes(o.length,l.shape.length)),g.assertAxesAreInnerMostDims("argMax",[o[0]],l.shape.length);const h=UA(n,l,o[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},WA={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a}=i;let o=r.parseAxisParam(a,s.shape);const u=g.getAxesPermutation(o,s.shape.length);let l=s;const c=[];null!=u&&(l=CA({inputs:{x:s},backend:n,attrs:{perm:u}}),c.push(l),o=g.getInnerMostAxes(o.length,l.shape.length)),g.assertAxesAreInnerMostDims("argMin",[o[0]],l.shape.length);const h=UA(n,l,o[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},HA={kernelName:"Asin",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},GA={kernelName:"Asinh",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},jA={kernelName:"Atan",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},qA={kernelName:"Atan2",backendName:"webgl",kernelFunc:uA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},KA={kernelName:"Atanh",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})};class XA{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideHeight,o=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t;let m="0.0";if(f||(m="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${o});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${l}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`:`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let g=`${t}(${t}(${t}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(g="avgValue / count");const y=4*Math.floor(s/4),v=s%4,b=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${o});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${m};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${m});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${u}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${l};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              getValue(batch, xR, xC + 3 * ${l}, d)\n            );\n\n            ${b}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${b}\n          } else if (${2===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${b}\n          } else if (${3===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              initializationValue\n            );\n\n            ${b}\n          }\n        }\n        setOutput(${g});\n      }\n    `}}class ZA{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideDepth,o=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${o}, ${u});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${l}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let _=`${t}(${t}(${t}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(_="avgValue / count");const x=4*Math.floor(s/4),w=s%4,S=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${o}, ${u});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${l}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n          setOutput(${_});\n        }\n      }\n    `}}const YA={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t;Ak(s,"avgPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=i;r.assert(g.eitherStridesOrDilationsAreOne(o,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '1'`);const c=g.computePool2DInfo(s.shape,a,o,1,u,l);if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))return YT({inputs:{x:s},backend:n});const h=new XA(c,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}},JA={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:u,dataFormat:l}=r,c=g.computePool3DInfo(i.shape,s,a,[1,1,1],o,u,l),h=new ZA(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}};class QA{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n            wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${e.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class eM{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterDepth*e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n            wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const tM={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,h=g.computePool3DInfo(a.shape,o,u,[1,1,1],l,c),d=new eM(h);return n.runWebGLProgram(d,[i],a.dtype)}},nM={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s;Ak([i,s],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=g.computePool2DInfo(a.shape,o,u,1,l),h=new QA(c);return n.runWebGLProgram(h,[i],a.dtype)}},rM={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s}=t,{transposeA:a,transposeB:o}=r;return TA({a:i,b:s,transposeA:a,transposeB:o,backend:n})}};class iM{constructor(e,t,n,r,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(e,t),g.assertAndGetBroadcastShape(e,n);let a="0.0";null!=r&&(g.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let o="1.0";null!=i&&(g.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class sM{constructor(e,t,n,r,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(e,t),g.assertAndGetBroadcastShape(e,n);let a="vec4(0.0)";null!=r&&(g.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=i&&(g.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const aM={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:i,mean:s,variance:a,offset:o,scale:u}=e;r.assert(s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),r.assert(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),r.assert(null==u||s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;null==l&&(l=.001);const c=[i,s,a];let h=null;null!=o&&(h=o.shape,c.push(o));let d=null;null!=u&&(d=u.shape,c.push(u));const p=$e().getBool("WEBGL_PACK_NORMALIZATION")?new sM(i.shape,s.shape,a.shape,h,d,l):new iM(i.shape,s.shape,a.shape,h,d,l);return t.runWebGLProgram(p,c,c[0].dtype)}};class oM{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=eT(this.rank),n=`uniform int start[${this.rank}];`,r=function(e){if(1===e)return"sourceLoc";if(e<=6)return uM.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let i;i=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map((e,t)=>`sourceLoc.${uM[t]} = start[${t}] + coords.${uM[t]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}const uM=["x","y","z","w","u","v"];class lM{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;const t=eT(this.rank),n=LT("coords",this.rank),r=LT("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${a}\n        ${o}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}function cM(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{begin:a,size:o}=i,[u,l]=h.parseSliceParams(s,a,o);if(h.assertParamsValid(s,u,l),0===r.sizeFromShape(l))return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||"string"===s.dtype){const e=n.texData.get(s.dataId),t=kT(e.values,u,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,t)}const{isPacked:c}=n.texData.get(s.dataId),d=h.isSliceContinous(s.shape,u,l);if(c||!d){const e=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lM(l):new oM(l),t=e.getCustomSetupFunc(u);return n.runWebGLProgram(e,[s],s.dtype,t)}return n.uploadToGPU(s.dataId),function(e,t,n,i){const s=i.texData.get(e.dataId),a=i.makeTensorInfo(n,e.dtype),o=i.texData.get(a.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=e.dtype;let u=h.computeFlatOffset(t,r.computeStrides(e.shape));s.slice&&(u+=s.slice.flatOffset),o.slice={flatOffset:u,origDataId:s.slice&&s.slice.origDataId||e.dataId};const l=i.dataRefCount.get(o.slice.origDataId)||1;return i.dataRefCount.set(o.slice.origDataId,l+1),a}(s,u,l,n)}const hM={kernelName:"Slice",backendName:"webgl",kernelFunc:cM},dM={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{blockShape:a,crops:o}=i;r.assert(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce((e,t)=>e*t),l=g.getReshaped(s.shape,a,u),c=g.getPermuted(l.length,a.length),h=g.getReshapedPermuted(s.shape,a,u),d=g.getSliceBeginCoords(o,a.length),p=g.getSliceSize(h,o,a.length),f=[],m=mA({inputs:{x:s},backend:n,attrs:{shape:l}}),y=CA({inputs:{x:m},backend:n,attrs:{perm:c}}),v=mA({inputs:{x:y},backend:n,attrs:{shape:h}}),b=cM({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(m),f.push(y),f.push(v),f.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},pM={kernelName:"Bincount",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a}=r,o=n.readSync(i.dataId),u=n.readSync(s.dataId),l=sT(o,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,l)}},fM=uA({opSnippet:"return float(a != b);",dtype:"bool"}),mM={kernelName:"NotEqual",backendName:"webgl",kernelFunc:fM};function gM(e){const{inputs:t,backend:n}=e,{input:r}=t;return YT({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const yM={kernelName:"Real",backendName:"webgl",kernelFunc:gM},vM={kernelName:"Cast",backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:i,attrs:s}=t,{x:a}=n,{dtype:o}=s;if("complex64"===o){if("complex64"===a.dtype)return YT({inputs:{x:a},backend:i});const t=uo(a.shape),n=e({inputs:{x:a},backend:i,attrs:{dtype:"float32"}}),r=QT({inputs:{real:n,imag:t},backend:i});return t.dispose(),i.disposeIntermediateTensorInfo(n),r}if("complex64"===a.dtype){const t=gM({inputs:{input:a},backend:i}),n=e({inputs:{x:t},backend:i,attrs:{dtype:o}});return i.disposeIntermediateTensorInfo(t),n}if(!r.hasEncodingLoss(a.dtype,o)){const e=YT({inputs:{x:a},backend:i});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o)return function(e,t){const n=new UT(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,i);if("bool"===o){const e=i.makeTensorInfo([],"bool",r.getTypedArrayFromDType("bool",1)),t=fM({inputs:{a,b:e},backend:i});return i.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${o}`)}},bM="return ceil(x);",_M={kernelName:"Ceil",backendName:"webgl",kernelFunc:oA({opSnippet:bM,packedOpSnippet:bM,cpuKernelImpl:oT})};class xM{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}class wM{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}const SM={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:s,clipValueMax:a}=r;let o;o=$e().getBool("WEBGL_PACK_CLIP")?new wM(i.shape):new xM(i.shape);const u=o.getCustomSetupFunc(s,a);return n.runWebGLProgram(o,[i],i.dtype,u)}};class EM{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function CM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const kM={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),s=new EM(r.shape),a=[CM(r,i.complexTensorInfos.real),CM(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}};class TM{constructor(e){this.outputShape=[],this.outputShape=g.computeOutShape(e,1),this.variableNames=e.map((e,t)=>`T${t}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<t.length;r++)n.push(`else if (yC < ${t[r]}) `+`setOutput(getT${r}(yR, yC-${t[r-1]}));`);n.push(`else setOutput(getT${t.length}(yR, yC-${t[t.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class AM{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=g.computeOutShape(e,t);const n=this.outputShape,r=n.length,i=eT(r),s=LT("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>`T${t}`);const o=new Array(e.length-1);o[0]=e[0][t];for(let p=1;p<o.length;p++)o[p]=o[p-1]+e[p][t];const u=a[t],l=a.slice(-2),c=a.join();let h=`if (${u} < ${o[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${l.join()}));\n        }`;for(let p=1;p<o.length;p++){const e=o[p-1];h+=`\n        if (${u} < ${o[p]}  && ${u} >= ${o[p-1]}) {\n          return getChannel(\n            getT${p}(${MM(a,u,e)}),\n            vec2(${MM(l,u,e)}));\n        }`}const d=o[o.length-1];h+=`\n        return getChannel(\n          getT${o.length}(${MM(a,u,d)}),\n          vec2(${MM(l,u,d)}));`,this.userCode=`\n      float getValue(${a.map(e=>"int "+e)}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function MM(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}function NM(e){const{inputs:t,backend:n}=e,{input:r}=t;return YT({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const IM={kernelName:"Imag",backendName:"webgl",kernelFunc:NM};function DM(e,t,n){const i=g.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>mA({inputs:{x:e},attrs:{shape:[-1,r.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:i}}function RM(e){const{inputs:t,backend:n,attrs:i}=e,{axis:s}=i,a=r.parseAxisParam(s,t[0].shape)[0],o=g.computeOutShape(t.map(e=>e.shape),a);if(0===r.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);const u=t.filter(e=>r.sizeFromShape(e.shape)>0);if(1===u.length)return YT({inputs:{x:u[0]},backend:n});const l=u.map(e=>e.shape);return g.assertParamsConsistent(l,a),function e(t,n,r){const i=t[0].dtype;if("complex64"===i){const i=t.map(e=>gM({inputs:{input:e},backend:r})),s=t.map(e=>NM({inputs:{input:e},backend:r})),a=e(i,n,r),o=e(s,n,r),u=QT({inputs:{real:a,imag:o},backend:r});return i.forEach(e=>r.disposeIntermediateTensorInfo(e)),s.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),u}if("string"===i){const{tensors2D:e,outShape:s}=DM(t,n,r),a=e.map(e=>({vals:r.readSync(e.dataId),shape:e.shape})),o=uT(a,s,i,1===e[0].shape[0]),u=g.computeOutShape(t.map(e=>e.shape),n),l=r.makeTensorInfo(u,i,o);return e.forEach(e=>r.disposeIntermediateTensorInfo(e)),l}if(t.length>$e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const i=Math.floor(t.length/2),s=e(t.slice(0,i),n,r),a=e(t.slice(i),n,r),o=e([s,a],n,r);return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(a),o}if($e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const e=new AM(t.map(e=>e.shape),n);return r.runWebGLProgram(e,t,i)}const{tensors2D:s,outShape:a}=DM(t,n,r),o=new TM(s.map(e=>e.shape)),u=r.runWebGLProgram(o,s,i);s.forEach(e=>r.disposeIntermediateTensorInfo(e));const l=mA({inputs:{x:u},attrs:{shape:a},backend:r});return r.disposeIntermediateTensorInfo(u),l}(u,a,n)}const LM={kernelName:"Concat",backendName:"webgl",kernelFunc:RM};class OM{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",_="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,_="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${o}, ${u});\n      const ivec2 pads = ivec2(${s}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${l};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${_}\n        setOutput(result);\n      }\n    `}}class FM{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${s}, ${a});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${u};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${l};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class PM{constructor(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:r,inChannels:i,strideWidth:s,strideHeight:a,padInfo:o,outWidth:u,dilationWidth:l,dilationHeight:c,dataFormat:h}=n,{left:d,top:p}=o,f=i*r,m=Nk(),g="channelsLast"===h,y=g?0:1,v=g?1:2;let b="";for(let _=0;_<=1;_++)for(let n=0;n<=1;n++)b+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${_};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${u})) * ${a} - ${p};\n            d0 = offsetY + ${c} * (pos / ${f});\n\n            if(d0 < ${t[y]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${u}.) * ${s}. - ${d}.);\n              d1 = offsetX + ${l} * (int(mod(float(pos), ${f}.) / ${i}.));\n\n              if(d1 < ${t[v]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${i}.));\n\n                if (${g}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*_+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*_+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${b}\n\n        ${m.output} = result;\n      }\n    `}}function zM({x:e,filter:t,convInfo:n,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:u=null}){const l=e.shape,c=i.texData.get(e.dataId),h="channelsLast"===n.dataFormat;let d;const p=[],f=l[2]%2!=0&&!!c.isPacked;if((1!=l[0]*l[1]*l[2]&&1!==n.outChannels||!(n.inChannels>1e3))&&$e().getBool("WEBGL_LAZILY_UNPACK")&&$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&f){const f={dataId:e.dataId,shape:[1,h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),n.inChannels],dtype:e.dtype},m=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,r.assert(wk(c.shape,f.shape),()=>`packed reshape ${c.shape} to ${f.shape} isn't free`);const g=mA({inputs:{x:t},backend:i,attrs:{shape:[1,n.inChannels,n.outChannels]}});p.push(g);const y=TA({a:f,b:g,backend:i,transposeA:!1,transposeB:!1,bias:s,activation:u,preluActivationWeights:a,leakyreluAlpha:o}),v=i.texData.get(y.dataId);r.assert(v.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=m,v.shape=n.outShape,d=YT({inputs:{x:y},backend:i}),d.shape=n.outShape,p.push(y)}else{const r=mA({inputs:{x:e},backend:i,attrs:{shape:[1,h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],n.inChannels]}}),c=mA({inputs:{x:t},backend:i,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=TA({a:r,b:c,transposeA:!1,transposeB:!1,backend:i,bias:s,activation:u,preluActivationWeights:a,leakyreluAlpha:o});d=mA({inputs:{x:f},backend:i,attrs:{shape:n.outShape}}),p.push(r),p.push(c),p.push(f)}for(const r of p)i.disposeIntermediateTensorInfo(r);return d}function $M({x:e,filter:t,convInfo:n,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:u=null}){const{filterWidth:l,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=n,m="channelsLast"===f,g=l*c*h,y=p*d,v=[g,y],b=[],_=mA({inputs:{x:e},backend:i,attrs:{shape:e.shape.slice(1)}}),x=mA({inputs:{x:t},backend:i,attrs:{shape:[1,g,r.sizeFromShape(t.shape)/g]}});b.push(_),b.push(x);const w=new PM(v,_.shape,n),S=i.runWebGLProgram(w,[_],"float32"),E=mA({inputs:{x:S},backend:i,attrs:{shape:[1,v[0],v[1]]}});b.push(S),b.push(E);const C=null!=s,k=null!=a,T="leakyrelu"===u,A=u?lA(u,!0):null,M=new cA(E.shape,x.shape,[1,y,n.outChannels],!0,!1,C,A,k,T),N=[E,x];if(s&&N.push(s),k&&N.push(a),T){const e=i.makeTensorInfo([],"float32",r.createScalarValue(o,"float32"));N.push(e),b.push(e)}const I=i.runWebGLProgram(M,N,"float32"),D=mA({inputs:{x:I},backend:i,attrs:{shape:m?[1,p,d,n.outChannels]:[1,n.outChannels,p,d]}});b.push(I);for(const r of b)i.disposeIntermediateTensorInfo(r);return D}const BM={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r,h=g.convertConv2DDataFormat(u),d=g.computeConv2DInfo(i.shape,s.shape,a,l,o,c,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if($e().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])p=$M({x:i,filter:s,convInfo:d,backend:n});else{const e=new OM(d);p=n.runWebGLProgram(e,[i,s],"float32")}else p=zM({x:i,filter:s,convInfo:d,backend:n});const f=mA({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class UM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===e.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class VM{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r="channelsLast"===e.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class WM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${e.strideDepth} - ${e.padInfo.front};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class HM{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${e.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const GM={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,h=g.convertConv2DDataFormat(u),d=g.computeConv2DInfo(i.shape,c,a,1,o,l,!1,h),p=new UM(d);return n.runWebGLProgram(p,[i,s],"float32")}},jM={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{inputShape:a,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r,h=g.convertConv2DDataFormat(l),d=g.computeConv2DInfo(a,s.shape,o,1,u,c,!1,h),p=new VM(d);return n.runWebGLProgram(p,[i,s],"float32")}},qM={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:u}=r,l=g.computeConv3DInfo(i.shape,s.shape,a,u,o),c=new FM(l);return n.runWebGLProgram(c,[i,s],"float32")}},KM={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,filterShape:u}=r,l=g.computeConv3DInfo(i.shape,u,a,1,o),c=new WM(l);return n.runWebGLProgram(c,[i,s],"float32")}},XM={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{pad:a,strides:o,inputShape:u}=r,l=g.computeConv3DInfo(u,s.shape,o,1,a),c=new HM(l);return n.runWebGLProgram(c,[i,s],"float32")}},ZM=oA({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),YM={kernelName:He,backendName:"webgl",kernelFunc:ZM},JM={kernelName:"Cosh",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})};class QM{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,a,o,u]=e,[l]=t,[c,h]=n;this.outputShape=[l,c,h,u];const d="bilinear"===r?1:0,[p,f]=[`${a-1}.0`,`${o-1}.0`],[m,g,y]=c>1?[`${(a-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,b,_]=h>1?[`${(o-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${b};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${_};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const eN={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:s,boxInd:a}=t,{cropSize:o,method:u,extrapolationValue:l}=r,c=new QM(i.shape,s.shape,o,u,l);return n.runWebGLProgram(c,[i,s,a],"float32")}};class tN{constructor(e,t,n){this.variableNames=["x"],this.outputShape=e;const r=e.length,i=t?"0.0":`getX(${nN(r,"coords")})`,s=e[e.length-1];let a="",o="";t?(a=n?`end != ${s-1}`:"end != 0",o=n?"end + 1":"end - 1"):(a=n?`end + pow2 < ${s}`:"end >= pow2",o=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${eT(r)} coords = getOutputCoords();\n        int end = ${rN(r,"coords")};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${a}) {\n          int idx = ${o};\n          ${rN(r,"coords")} = idx;\n          val += getX(${nN(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.index&&(this.index=t.getUniformLocation(n,"index")),t.gl.uniform1f(this.index,e)}}}function nN(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function rN(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}const iN={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:a,reverse:o}=r,u=i.shape.length,l=g.getAxesPermutation([s],u);let c=i;null!=l&&(c=CA({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=g.getInnerMostAxes(1,u)[0];if(h!==u-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${i.shape.length-1} `+`but got axis=${s}`);const d=c.shape[h];let p=YT({inputs:{x:c},backend:n});for(let f=0;f<=Math.ceil(Math.log2(d))-1;f++){const e=new tN(c.shape,!1,o),t=e.getCustomSetupFunc(f),r=p;p=n.runWebGLProgram(e,[p],p.dtype,t),n.disposeIntermediateTensorInfo(r)}if(a){const e=new tN(c.shape,a,o),t=p;p=n.runWebGLProgram(e,[p],p.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=l){const e=CA({inputs:{x:p},backend:n,attrs:{perm:g.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),e}return p}},sN={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a,binaryOutput:o}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(s.dataId),r=sT(e,t,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(s),r=aT(e,t,a,o);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${i.shape.length}.`)}};class aN{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const oN={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{blockSize:a,dataFormat:o}=i;r.assert(a>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${a}`);const u=s.shape[0],l=("NHWC"===o?s.shape[1]:s.shape[2])*a,c=("NHWC"===o?s.shape[2]:s.shape[3])*a,h=("NHWC"===o?s.shape[3]:s.shape[1])/(a*a),d=new aN("NHWC"===o?[u,l,c,h]:[u,h,l,c],a,o);return n.runWebGLProgram(d,[s],s.dtype)}};class uN{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.inHeight,a=e.inWidth,o=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,h=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,m=e.outChannels/e.inChannels;let g="",y="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,y="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${l}, ${c});\n      const ivec2 pads = ivec2(${o}, ${u});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${m};\n        int q = d2 - d1 * ${m};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${h};\n\n          if (xR < 0 || xR >= ${s}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${a}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${v}\n        ${y}\n        setOutput(result);\n      }\n    `}}class lN{constructor(e,t=!1,n=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;const a=e.inHeight,o=e.inWidth,u=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,h=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,f=e.filterHeight,m=e.filterWidth,g=m;let y="int xR; int xC; int xCOffset;";for(let r=0;r<f;r++)for(let e=0;e<m;e++)y+=`\n          vec4 xTexelR${r}C${2*e} = vec4(0.);\n          vec4 wR${r}C${e} = vec4(0.);\n          vec4 xR${r}C${e} = vec4(0.);`;for(let x=0;x<f;x++)for(let e=0;e<g;e++){const t=2*e;if(y+=`\n          xR = xRCorner + ${x*d};\n          xC = xCCorner + ${t*p};\n        `,1===h){if(t<m&&(y+=l%2==1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${a} && xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    xTexelR${x}C${t}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${x}C${t} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${a} && xCOffset >= 0 && xCOffset < ${o}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${x}C${t} = vec4(previous.zw, xTexelR${x}C${t}.xy);\n                } else {\n                  xR${x}C${t} = vec4(0, 0, xTexelR${x}C${t}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${a} && xC >= 0 && xC < ${o}) {\n                  xTexelR${x}C${t} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${t} = vec4(0.);\n                }\n\n                xR${x}C${t} = xTexelR${x}C${t};\n              `,t+1<m)){const e=l%2==0?r.nearestLargerEven(p):p;p%2==0&&l%2==1||p%2!=0&&l%2!=1?(y+=`\n                  xCOffset = xC + ${l%2} + ${e};\n\n                  if(xR >= 0 && xR < ${a} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${x}C${t+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,p>1&&(y+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${a} &&\n                      xCOffset >= 0 && xCOffset < ${o}) {\n                      xTexelR${x}C${t} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${x}C${t} = vec4(0.);\n                    }\n                  `),y+=`\n                  xR${x}C${t+1} = vec4(\n                    xTexelR${x}C${t}.zw, xTexelR${x}C${t+2}.xy);\n                `):y+=`\n                  xCOffset = xC + ${e};\n\n                  if(xR >= 0 && xR < ${a} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${x}C${t+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${x}C${t+1} = xTexelR${x}C${t+2};\n                `}}else t<m&&(y+=`\n              if(xR >= 0 && xR < ${a}) {\n            `,l%2==1?(y+=`\n                xCOffset = xC + 1 - ${h};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${t} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${t} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o}) {\n                  xTexelR${x}C${t+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${x}C${t+2} = vec4(0.);\n                }\n\n                xR${x}C${t} = vec4(\n                  xTexelR${x}C${t}.zw, xTexelR${x}C${t+2}.zw);\n              `,t+1<m&&(y+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${h};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${x}C${t+1} = vec4(xTexelR${x}C${t+2}.xy, final.xy);\n                `)):(y+=`\n                if(xC >= 0 && xC < ${o}) {\n                  xTexelR${x}C${t} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${t} = vec4(0.);\n                }\n\n                xCOffset = xC + ${h};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${t+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${t+2} = vec4(0.);\n                }\n\n                xR${x}C${t} = vec4(\n                  xTexelR${x}C${t}.xy, xTexelR${x}C${t+2}.xy);\n              `,t+1<m&&(y+=`\n                  xR${x}C${t+1} = vec4(\n                    xTexelR${x}C${t}.zw, xTexelR${x}C${t+2}.zw);\n                `)),y+="}");t<m&&(y+=`\n            vec4 wTexelR${x}C${t} = getW(${x}, ${t}, d1, q);\n            wR${x}C${t} = vec4(wTexelR${x}C${t}.xz, wTexelR${x}C${t}.xz);\n          `,t+1<m&&(y+=`\n              vec4 wTexelR${x}C${t+1} = getW(${x}, ${t+1}, d1, q);\n              wR${x}C${t+1} =\n                vec4(wTexelR${x}C${t+1}.xz, wTexelR${x}C${t+1}.xz);`))}for(let r=0;r<f;r++)for(let e=0;e<m;e++)y+=`dotProd += xR${r}C${e} * wR${r}C${e};`;let v="",b="";n&&(v=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:s?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,b="result = activation(result);");const _=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${c}, ${h});\n      const ivec2 pads = ivec2(${u}, ${l});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${y}\n\n        vec4 result = dotProd;\n        ${_}\n        ${b}\n        setOutput(result);\n      }\n    `}}const cN={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a}=t,{strides:o,pad:u,dilations:l,dimRoundingMode:c}=i;let h=l;null==h&&(h=[1,1]),r.assert(g.eitherStridesOrDilationsAreOne(o,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${o} and dilations '${h}'`);const d=g.computeConv2DInfo(s.shape,a.shape,o,h,u,c,!0);let p;return p=$e().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new lN(d):new uN(d),n.runWebGLProgram(p,[s,a],"float32")}};class hN{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${e.outChannels/e.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class dN{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const pN={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r,h=g.computeConv2DInfo(i.shape,c,a,o,u,l,!0),d=new hN(h);return n.runWebGLProgram(d,[i,s],"float32")}},fN={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{strides:a,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r,h=g.computeConv2DInfo(c,s.shape,a,o,u,l,!0),d=new dN(h);return n.runWebGLProgram(d,[i,s],"float32")}};class mN{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const gN={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:i}=t,s=[...i.shape,...i.shape],a=r.sizeFromShape(i.shape),o=mA({inputs:{x:i},backend:n,attrs:{shape:[a]}}),u=new mN(a),l=n.runWebGLProgram(u,[o],o.dtype),c=mA({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}};class yN{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:o,dilationHeight:u,dilationWidth:l}=e,{top:c,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${s});\n      const ivec2 pads = ivec2(${c}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${u};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${l};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const vN={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:u}=r,l=g.computeDilation2DInfo(i.shape,s.shape,a,o,"NHWC",u);let c;const h=new yN(l);c=n.runWebGLProgram(h,[i,s],"float32");const d=mA({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}},bN={kernelName:"Elu",backendName:"webgl",kernelFunc:oA({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},_N={kernelName:"EluGrad",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,s=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ZT("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new XT("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)}},xN={kernelName:"Equal",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"})},wN=oA({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${g.ERF_P};\n  float a1 = ${g.ERF_A1};\n  float a2 = ${g.ERF_A2};\n  float a3 = ${g.ERF_A3};\n  float a4 = ${g.ERF_A4};\n  float a5 = ${g.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),SN={kernelName:Ge,backendName:"webgl",kernelFunc:wN},EN="return exp(x);",CN=oA({opSnippet:EN,packedOpSnippet:EN,cpuKernelImpl:lT}),kN={kernelName:je,backendName:"webgl",kernelFunc:CN};function TN(e){const{inputs:t,attrs:n,backend:i}=e,{dim:s}=n,{input:a}=t,o=a.shape.length,u=a.shape.slice();let l=s;return s<0&&(r.assert(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),u.splice(l,0,1),mA({inputs:{x:a},backend:i,attrs:{shape:u}})}const AN={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:TN},MN="return exp(x) - 1.0;",NN={kernelName:"Expm1",backendName:"webgl",kernelFunc:oA({opSnippet:MN,packedOpSnippet:MN,cpuKernelImpl:cT})};class IN{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=n?`${r}.0`:"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${s};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function DN(e,t,n){const i=n.texData.get(e.dataId),s=r.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],o=mA({inputs:{x:e},backend:n,attrs:{shape:[s/a,a]}}),u=o.shape,l=new IN("real",u,t),c=new IN("imag",u,t),h=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:u},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,h,"float32"),p=n.runWebGLProgram(c,h,"float32"),f=QT({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const m=mA({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),m}const RN={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return DN(r,!1,n)}};class LN{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}function ON(e){const{backend:t,attrs:n}=e,{shape:i,value:s}=n;let{dtype:a}=n;if(a=a||r.inferDtype(s),"string"===a){const e=r.getArrayFromDType(a,r.sizeFromShape(i));return e.fill(s),t.makeTensorInfo(i,a,e)}{const e=new LN(i,s),n=e.getCustomSetupFunc(s);return t.runWebGLProgram(e,[],a,n)}}const FN={kernelName:"Fill",backendName:"webgl",kernelFunc:ON};class PN{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const zN={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new PN(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}},$N="return floor(x);",BN={kernelName:"Floor",backendName:"webgl",kernelFunc:oA({opSnippet:$N,packedOpSnippet:$N,cpuKernelImpl:hT})},UN={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:uA({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})};class VN{constructor(e){this.variableNames=["A"];const t=Nk(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class WN{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Nk(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const HN={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:s}=r,a="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,u="undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap,[l,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],h=[c,l],d=[c,l,s];(o||a||u)&&(null==GN&&(GN=document.createElement("canvas").getContext("2d")),GN.canvas.width=l,GN.canvas.height=c,GN.drawImage(i,0,0,l,c),i=GN.canvas);const p=n.makeTensorInfo(h,"int32");n.texData.get(p.dataId).usage=nk.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const f=$e().getBool("WEBGL_PACK")?new WN(d):new VN(d),m=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),m}};let GN;const jN={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a,bias:o,preluActivationWeights:u}=t,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=i,y=g.convertConv2DDataFormat(h),v=g.computeConv2DInfo(s.shape,a.shape,l,d,c,p,!1,y);let b;const _=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if($e().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])b=$M({x:s,filter:a,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:u,leakyreluAlpha:m});else{const e=null!=o,t=null!=u,i="leakyrelu"===f,l=f?lA(f,!1):null,c=new OM(v,e,l,t,i),h=[s,a];if(o&&h.push(o),u&&h.push(u),i){const e=n.makeTensorInfo([],"float32",r.createScalarValue(m,"float32"));h.push(e),_.push(e)}b=n.runWebGLProgram(c,h,"float32")}else b=zM({x:s,filter:a,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:u,leakyreluAlpha:m});const x=mA({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return _.push(b),_.forEach(e=>n.disposeIntermediateTensorInfo(e)),x}},qN={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,filter:a,bias:o,preluActivationWeights:u}=t,{strides:l,pad:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=i,m=[];let y=h;null==y&&(y=[1,1]),r.assert(g.eitherStridesOrDilationsAreOne(l,y),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${l} and dilations '${y}'`);const v=g.computeConv2DInfo(s.shape,a.shape,l,y,c,d,!0),b=$e().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,_=p?lA(p,b):null,x=[s,a],w=null!=o,S=null!=u,E="leakyrelu"===p;if(w&&x.push(o),S&&x.push(u),E){const e=n.makeTensorInfo([],"float32",r.createScalarValue(f,"float32"));x.push(e),m.push(e)}let C;C=b?new lN(v,w,_,S,E):new uN(v,w,_,S,E);const k=n.runWebGLProgram(C,x,"float32");return m.forEach(e=>n.disposeIntermediateTensorInfo(e)),k}};class KN{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=eT(t.length),i=eT(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const XN={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:i,indices:s}=t,a=s.shape,o=a[a.length-1],[u,l,c,h]=g.prepareAndValidate(i,s),d=mA({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),p=mA({inputs:{x:i},backend:n,attrs:{shape:[r.sizeFromShape(i.shape)/c,c]}}),f=new KN(o,h,[l,c]),m=n.runWebGLProgram(f,[p,d],p.dtype),y=mA({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}};class ZN{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=eT(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)r.push(2===i?"int(getIndices(resRC.x, resRC.z))":`${n[i]}`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}const YN={kernelName:"GatherV2",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,indices:a}=t,{axis:o,batchDims:u}=i,l=r.parseAxisParam(o,s.shape)[0],c=g.segment_util.collectGatherOpShapeInfo(s,a,l,u),h=r.sizeFromShape(a.shape),d=[],p=mA({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=mA({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,h/c.batchSize]}});d.push(p),d.push(f);const m=[c.batchSize,c.outerSize,h/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,a])||"string"===s.dtype){const e=n.bufferSync(f),t=n.bufferSync(p),r=dT(t,e,m);return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const y=new ZN(p.shape,m),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=mA({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},JN={kernelName:"Greater",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:pT,dtype:"bool"})},QN={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"})},eI={kernelName:"IFFT",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return DN(r,!0,n)}},tI={kernelName:"IsFinite",backendName:"webgl",kernelFunc:oA({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},nI={kernelName:"IsInf",backendName:"webgl",kernelFunc:oA({opSnippet:"return float(isinf(x));",dtype:"bool"})},rI={kernelName:"IsNan",backendName:"webgl",kernelFunc:oA({opSnippet:"return float(isnan(x));",dtype:"bool"})},iI={kernelName:"Less",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:fT,dtype:"bool"})},sI={kernelName:"LessEqual",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"})},aI={kernelName:"LinSpace",backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,a=mT(r,i,s);return t.makeTensorInfo([a.length],"float32",a)}},oI=oA({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:gT}),uI={kernelName:qe,backendName:"webgl",kernelFunc:oI},lI={kernelName:"Log1p",backendName:"webgl",kernelFunc:oA({opSnippet:"return log(1.0 + x);"})},cI={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},hI={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:oA({opSnippet:"return float(!(x >= 1.0));"})},dI={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:uA({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})};class pI{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const s=t,a=e[3]-1;let o;this.outputShape=e;const u=`float(${n}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}class fI{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,a=e[3]-1;let o;this.outputShape=e;const u=`float(${n}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}const mI={kernelName:"LRN",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:s,bias:a,alpha:o,beta:u}=r,l=$e().getBool("WEBGL_PACK_NORMALIZATION")?new fI(i.shape,s,a,o,u):new pI(i.shape,s,a,o,u);return n.runWebGLProgram(l,[i],i.dtype)}};class gI{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const yI={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:s,dy:a}=t,{depthRadius:o,bias:u,alpha:l,beta:c}=r,h=new gI(i.shape,o,u,l,c);return n.runWebGLProgram(h,[i,s,a],i.dtype)}};function vI(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{reductionIndices:a,keepDims:o}=i,u=s.shape.length,l=r.parseAxisParam(a,s.shape);let c=l;const h=g.getAxesPermutation(c,u),d=null!=h,p=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(p){const e=n.texData.get(f.dataId).values,t=new Array(u);for(let n=0;n<t.length;n++)t[n]=s.shape[h[n]];const r=IT(e,s.shape,s.dtype,h,t);f=n.makeTensorInfo(t,s.dtype),n.texData.get(f.dataId).values=r}else f=wA(s,h,n);c=g.getInnerMostAxes(c.length,u)}g.assertAxesAreInnerMostDims("max",c,u);const[m,y]=g.computeOutAndReduceShapes(f.shape,c);let v,b=m;if(o&&(b=g.expandShapeToKeepDim(m,l)),p){const e=n.texData.get(f.dataId),t=yT(e.values,r.sizeFromShape(y),b,s.dtype);v=n.makeTensorInfo(b,s.dtype),n.texData.get(v.dataId).values=t}else v=function(e,t,n,i){const s=r.sizeFromShape(t),a=mA({inputs:{x:e},attrs:{shape:[r.sizeFromShape(e.shape)/s,s]},backend:i}),o=bA(a,e.dtype,"max",i),u=mA({inputs:{x:o},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(o),u}(f,y,b,n);return d&&n.disposeIntermediateTensorInfo(f),v}const bI={kernelName:"Max",backendName:"webgl",kernelFunc:vI},_I={kernelName:"Maximum",backendName:"webgl",kernelFunc:uA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:vT})},xI={kernelName:"MaxPool",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t;Ak(s,"maxPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:l}=i;r.assert(g.eitherStridesOrDilationsAreOne(o,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '1'`);const c=g.computePool2DInfo(s.shape,a,o,1,u,l);if(1===c.filterWidth&&1===c.filterHeight&&r.arraysEqual(c.inShape,c.outShape))return YT({inputs:{x:s},backend:n});const h=new XA(c,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}},wI={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dataFormat:u,dimRoundingMode:l}=r,c=g.computePool3DInfo(i.shape,s,a,[1,1,1],o,l,u),h=new ZA(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}};class SI{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.effectiveFilterHeight,n=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${t-1-e.padInfo.top}, ${n-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t};\n          wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${t*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class EI{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.effectiveFilterDepth,n=e.effectiveFilterHeight,r=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${t-1-e.padInfo.front}, ${n-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${t};\n           wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${t*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const CI={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,h=g.computePool3DInfo(a.shape,o,u,[1,1,1],l,c),d=new ZA(h,"max",!0),p=n.runWebGLProgram(d,[a],a.dtype),f=new EI(h),m=n.runWebGLProgram(f,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),m}},kI={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:a}=t,o=s;Ak([s,a],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:h}=r,d=g.computePool2DInfo(o.shape,u,l,1,c,h),p=new XA(d,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),m=new SI(d),y=n.runWebGLProgram(m,[i,f],o.dtype);return n.disposeIntermediateTensorInfo(f),y}},TI={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:i}=e,{filterSize:s,strides:a,pad:o,includeBatchInIndex:u}=t,l=n;r.assert(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];r.assert(g.eitherStridesOrDilationsAreOne(a,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${a} and dilations '${c}'`);const h=g.computePool2DInfo(i.shape,s,a,c,o),[d,p]=function(e,t,n,r){let i=new XA(n,"max",!1);const s=r.runWebGLProgram(i,[e],"float32");return i=new XA(n,"max",!0,!0,t),[s,r.runWebGLProgram(i,[e],"float32")]}(i,u,h,l);return[d,p]}},AI={kernelName:"Mean",backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:i}=e,{keepDims:s,axis:a}=t,o=n,u=i.shape.length,l=r.parseAxisParam(a,i.shape);let c=l;const h=g.getAxesPermutation(c,u),d=null!=h,p=o.shouldExecuteOnCPU([i]),f=[];let m=i;if(d){if(p){const e=o.texData.get(m.dataId).values,t=new Array(u);for(let r=0;r<t.length;r++)t[r]=i.shape[h[r]];const n=IT(e,i.shape,i.dtype,h,t);m=o.makeTensorInfo(t,i.dtype),o.texData.get(m.dataId).values=n}else m=wA(i,h,o);f.push(m),c=g.getInnerMostAxes(c.length,u)}g.assertAxesAreInnerMostDims("sum",c,u);const[y,v]=g.computeOutAndReduceShapes(m.shape,c);let b=y;s&&(b=g.expandShapeToKeepDim(y,l));const _=function(e,t,n,i){const s=r.sizeFromShape(t),a=mA({inputs:{x:e},attrs:{shape:[r.sizeFromShape(e.shape)/s,s]},backend:i}),o=bA(a,"float32","mean",i),u=mA({inputs:{x:o},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(o),u}(m,v,b,o);for(const r of f)o.disposeIntermediateTensorInfo(r);return _}},MI={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i,u=s.shape.length,l=r.parseAxisParam(a,s.shape);let c=l;const h=g.getAxesPermutation(c,u);let d=s;null!=h&&(d=CA({inputs:{x:s},backend:n,attrs:{perm:h}}),c=g.getInnerMostAxes(c.length,s.shape.length)),g.assertAxesAreInnerMostDims("min",c,u);const[p,f]=g.computeOutAndReduceShapes(d.shape,c),m=mA({inputs:{x:d},backend:n,attrs:{shape:[-1,r.sizeFromShape(f)]}}),y=bA(m,m.dtype,"min",n);let v;return v=mA(o?{inputs:{x:y},backend:n,attrs:{shape:g.expandShapeToKeepDim(p,l)}}:{inputs:{x:y},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=h&&n.disposeIntermediateTensorInfo(d),v}},NI={kernelName:"Minimum",backendName:"webgl",kernelFunc:uA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:bT})};class II{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=eT(r),s=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${u};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${u};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${u};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class DI{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=eT(r),s=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),o=LT("rc",r),u=LT("source",r),l=`${o[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${u.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${u.join()}), ${c});\n        ${o[r-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${u.join()}), ${c});\n        }\n      `}else{const e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${u.join()}), ${c});\n        ${o[r-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${u.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${u.join()}), ${c});\n          ${o[r-1]} += 1;\n          if(${l}) {\n            ${e}\n            result[3] = getChannel(getX(${u.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${s});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const RI={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:s}=n,a=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DI(r.shape,i,s):new II(r.shape,i,s);return t.runWebGLProgram(a,[r],r.dtype)}},LI=uA({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),OI={kernelName:Ke,backendName:"webgl",kernelFunc:LI};class FI{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(n,"seed")),t.gl.uniform1f(this.seedLoc,e)}}}const PI=uA({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),zI={kernelName:"RealDiv",backendName:"webgl",kernelFunc:PI},$I="return a - b;",BI=uA({opSnippet:$I,packedOpSnippet:$I,supportsComplex:!0,cpuKernelImpl:AT}),UI={kernelName:Ye,backendName:"webgl",kernelFunc:BI};function VI(e){const{inputs:t,backend:n,attrs:i}=e,{logits:s}=t,{dim:a}=i,o=r.parseAxisParam([a],s.shape),u=vI({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=g.expandShapeToKeepDim(u.shape,o),c=mA({inputs:{x:u},backend:n,attrs:{shape:l}}),h=BI({inputs:{a:s,b:c},backend:n}),d=CN({inputs:{x:h},backend:n}),p=SA({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=mA({inputs:{x:p},backend:n,attrs:{shape:l}}),m=PI({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}const WI={kernelName:"Softmax",backendName:"webgl",kernelFunc:VI},HI={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:s,seed:a,normalized:o}=r,u=o?i:VI({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),l=new FI(u.shape[0],u.shape[1],s),c=l.getCustomSetupFunc(a),h=n.runWebGLProgram(l,[u],"int32",c);return o||n.disposeIntermediateTensorInfo(u),h}},GI="return -x;",jI={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=xT(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=$e().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new HT(r.shape,GI):new UT(r.shape,GI),n.runWebGLProgram(i,[r],r.dtype)}},qI=y.nonMaxSuppressionV3Impl,KI={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u}=r,l=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:h}=qI(l,c,a,o,u);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},XI=y.nonMaxSuppressionV4Impl,ZI={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(i.dataId),h=n.readSync(s.dataId),{selectedIndices:d,validOutputs:p}=XI(c,h,a,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},YI=y.nonMaxSuppressionV5Impl,JI={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(i.dataId),h=n.readSync(s.dataId),d=a,p=o,f=u,m=l,{selectedIndices:y,selectedScores:v}=YI(c,h,d,p,f,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}};class QI{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const eD={kernelName:"OneHot",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:i}=e,{indices:s}=t,{depth:a,onValue:o,offValue:u}=i,l=r.sizeFromShape(s.shape),c=new QI(l,a,o,u),h=mA({inputs:{x:s},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[h],s.dtype);n.disposeIntermediateTensorInfo(h);const p=mA({inputs:{x:d},backend:n,attrs:{shape:[...s.shape,a]}});return n.disposeIntermediateTensorInfo(d),p}};function tD(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=gM({inputs:{input:r},backend:n}),t=tD({inputs:{x:e},backend:n}),i=NM({inputs:{input:r},backend:n}),s=tD({inputs:{x:i},backend:n}),a=QT({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),a}return ON({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const nD={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:tD},rD={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const t=gM({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),s=NM({inputs:{input:i},backend:r}),a=tD({inputs:{x:s},backend:r}),o=QT({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(a),o}return ON({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}},iD={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{axis:s}=i;if(1===t.length)return TN({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const a=t[0].shape,o=t[0].dtype;t.forEach(e=>{r.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),r.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],l=RM({inputs:t.map(e=>{const t=TN({inputs:{input:e},backend:n,attrs:{dim:s}});return u.push(t),t}),backend:n,attrs:{axis:s}});return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}};class sD{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=eT(r),s=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class aD{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=eT(r),s=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),o=LT("rc",r),u=LT("source",r),l=`${o[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${u.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${o[r-1]} += 1;\n       if(${l}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${l}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(${n});\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${u.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${s});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const oD=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,constantValue:a}=r,o=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aD(i.shape,s,a):new sD(i.shape,s,a);return n.runWebGLProgram(o,[i],i.dtype)},uD={kernelName:"PadV2",backendName:"webgl",kernelFunc:oD},lD=uA({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),cD={kernelName:Xe,backendName:"webgl",kernelFunc:lD},hD={kernelName:"Prod",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{axis:a,keepDims:o}=i,u=s.shape.length,l=[],c=r.parseAxisParam(a,s.shape);let h=c;const d=g.getAxesPermutation(h,u);let p,f=s;if(null!=d&&(f=CA({inputs:{x:s},backend:n,attrs:{perm:d}}),h=g.getInnerMostAxes(h.length,u),l.push(f)),g.assertAxesAreInnerMostDims("prod",h,u),n.shouldExecuteOnCPU([f])){const e=n.texData.get(f.dataId).values,{outVals:t,outShape:r,outDtype:i}=wT(f.shape,f.dtype,e,h);p=n.makeTensorInfo(r,i,t)}else{const[e,t]=g.computeOutAndReduceShapes(f.shape,h),i=r.sizeFromShape(t),a=mA({inputs:{x:f},backend:n,attrs:{shape:[-1,i]}}),o=bA(a,Ft(s.dtype),"prod",n);p=mA({inputs:{x:o},backend:n,attrs:{shape:e}}),l.push(a),l.push(o)}if(o){l.push(p);const e=g.expandShapeToKeepDim(p.shape,c);p=mA({inputs:{x:p},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}},dD=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:s,dtype:a}=n,o=ST(r,i,s,a);return t.makeTensorInfo([o.length],a,o)},pD={kernelName:"Range",backendName:"webgl",kernelFunc:dD},fD={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:oA({opSnippet:"return 1.0 / x;"})},mD={kernelName:"Relu",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},gD={kernelName:"Relu6",backendName:"webgl",kernelFunc:oA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})};class yD{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[s,a,o,u]=e;this.outputShape=[s,t,n,u];const l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${l[0]/c[0]},\n          ${l[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class vD{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,a,o,u]=e;this.outputShape=[s,t,n,u];const l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${l[0]/c[0]},\n          ${l[1]/c[1]},\n          ${l[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${u-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const bD={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r,[u,l]=o,c=$e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new vD(i.shape,u,l,s,a):new yD(i.shape,u,l,s,a);return n.runWebGLProgram(c,[i],"float32")}};class _D{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,s,a]=e,o=[n&&s>1?r-1:r,n&&a>1?i-1:i],u=[n&&s>1?s-1:s,n&&a>1?a-1:a],l=o[0]/u[0],c=o[1]/u[1],h=1/l,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const xD={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r,o=new _D(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}};class wD{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[s,a,o,u]=e;this.outputShape=[s,t,n,u];const l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${l[0]/c[0]},\n          ${l[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}const SD={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r,[u,l]=o,c=new wD(i.shape,u,l,s,a);return n.runWebGLProgram(c,[i],i.dtype)}};class ED{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,s,a]=e,o=[n&&s>1?r-1:r,n&&a>1?i-1:i],u=[n&&s>1?s-1:s,n&&a>1?a-1:a],l=o[0]/u[0],c=o[1]/u[1],h=1/l,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${u[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${u[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const CD={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r,o=new ED(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}};class kD{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),i=eT(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class TD{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=LT("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=eT(n);function o(n){const r=e.map((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(i,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return o(e)}(r.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const AD={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{dims:a}=i,o=s.shape.length,u=r.parseAxisParam(a,s.shape);if(0===o)return YT({inputs:{x:s},backend:n});const l=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TD(s.shape,u):new kD(s.shape,u);return n.runWebGLProgram(l,[s],s.dtype)}};class MD{constructor(e,t,n,r){this.variableNames=["Image"],this.outputShape=[];const i=e[1],s=e[2],a=Math.sin(t).toFixed(3),o=Math.cos(t).toFixed(3);this.outputShape=e;const[u,l]=g.getImageCenter(r,i,s),c=u.toFixed(3),h=l.toFixed(3);let d="";d="number"==typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${c}) * ${o} - (float(y) - ${h}) * ${a};\n          float coordYFloat = (float(x) - ${c}) * ${a} + (float(y) - ${h}) * ${o};\n          int coordX = int(round(coordXFloat + ${c}));\n          int coordY = int(round(coordYFloat + ${h}));\n          ${d}\n          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const ND={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:s,center:a}=t,o=n,u=new MD(r.shape,i,s,a);return o.runWebGLProgram(u,[r],r.dtype)}},ID={kernelName:"Round",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},DD={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:oA({opSnippet:"return inversesqrt(x);",cpuKernelImpl:ET})};class RD{constructor(e,t,n,r,i,s,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const o=eT(i.length),u=eT(s.length);let l="";1===n?l="i":2===n&&(l="i, j");let c="";1===r?c="i":2===r&&(c="i, coords[1]"),this.userCode=`\n        ${o} strides = ${o}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${`getIndices(${l})`});\n              flattenedIndex += index * ${t>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${`getUpdates(${c})`};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const LD={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:a}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:h}=g.calculateShapes(s,i,a),d=[h/l,l];if(0===h)return n.makeTensorInfo(a,i.dtype);const p=mA({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),f=mA({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new RD(u,o,p.shape.length,f.shape.length,c,d),v=n.runWebGLProgram(y,[f,p,m],f.dtype),b=mA({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}};class OD{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[];for(let r=0;r<t.length;r++)a.push(`${n[r]}`),r<e&&s.push(`${n[r]}`);r=s.join(),i=a.join()}const s=eT(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}const FD={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:s}=t,a=new OD(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],Ot(i.dtype,s.dtype))}},PD={kernelName:"Selu",backendName:"webgl",kernelFunc:oA({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${g.SELU_SCALEALPHA};\n  float scale = ${g.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`})},zD={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:oA({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},$D={kernelName:"Sign",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},BD=oA({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),UD={kernelName:Ze,backendName:"webgl",kernelFunc:BD},VD={kernelName:"Sinh",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},WD={kernelName:"Softplus",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},HD={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{blockShape:a,paddings:o}=i;r.assert(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce((e,t)=>e*t),l=[[0,0]];l.push(...o);for(let r=1+a.length;r<s.shape.length;++r)l.push([0,0]);const c=[],h=oD({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=g.getReshaped(h.shape,a,u,!1),p=g.getPermuted(d.length,a.length,!1),f=g.getReshapedPermuted(h.shape,a,u,!1),m=mA({inputs:{x:h},backend:n,attrs:{shape:d}}),y=CA({inputs:{x:m},backend:n,attrs:{perm:p}}),v=mA({inputs:{x:y},backend:n,attrs:{shape:f}});return c.push(h),c.push(m),c.push(y),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},GD={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:a}=t,{outputShape:o}=r,{sliceRank:u,numUpdates:l,strides:c,outputSize:h}=g.calculateShapes(s,i,o),d=new RD(l,u,i.shape.length,s.shape.length,c,[h,1],!1),p=n.runWebGLProgram(d,[s,i,a],s.dtype),f=mA({inputs:{x:p},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),f}},jD={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{numOrSizeSplits:a,axis:o}=i,u=r.parseAxisParam(o,s.shape)[0],l=g.prepareSplitSize(s,a,u),c=new Array(s.shape.length).fill(0),h=s.shape.slice();return l.map(e=>{const t=[...h];t[u]=e;const r=cM({inputs:{x:s},backend:n,attrs:{begin:c,size:t}});return c[u]+=e,r})}},qD={kernelName:"Sqrt",backendName:"webgl",kernelFunc:oA({opSnippet:"return sqrt(x);"})},KD={kernelName:"Square",backendName:"webgl",kernelFunc:oA({opSnippet:"return x * x;"})},XD={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:uA({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},ZD={kernelName:"Step",backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=new UT(r.shape,"if (isnan(x)) return x;"+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `);return n.runWebGLProgram(i,[r],r.dtype)}};class YD{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=eT(n.length),s=eT(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const JD={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:a,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{nonStrided:f,$begin:m,$strides:g,size:y,newShape:v,outShape:b}=h.sliceInfo(i.shape,s,a,o,u,l,c,d,p),_=mA({inputs:{x:i},backend:n,attrs:{shape:v}});let x;if(f){const e=cM({inputs:{x:_},backend:n,attrs:{begin:m,size:y}});x=mA({inputs:{x:e},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(e)}else if(b.some(e=>0===e))x=n.makeTensorInfo(b,i.dtype,[]);else if(n.shouldExecuteOnCPU([_])){const e=n.texData.get(_.dataId),t=Gn(_.shape,_.dtype,e.values),r=TT(b,t,g,m);x=n.makeTensorInfo(b,_.dtype,r.values)}else{const e=new YD(m,g,b);x=n.runWebGLProgram(e,[_],_.dtype)}const w=mA({inputs:{x},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(x),w}},QD=oA({opSnippet:"return tan(x);"});class eR{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[s]*t[s];this.outputShape=n,this.rank=n.length;const r=eT(this.rank),i=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function tR(e){const{inputs:t,backend:n,attrs:i}=e,{x:s}=t,{reps:a}=i;if("string"===s.dtype){const e=n.readSync(s.dataId).map(e=>r.decodeString(e)),t=Gn(s.shape,s.dtype,e),i=MT(t,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const o=new eR(s.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}class nR{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,s=e.numSegments,a=s*Math.ceil(i/n);this.outputShape=[r,a];const o=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${l}\n        } else if (${2===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${l}\n        } else if (${3===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}const rR=[mI,yI,AA,MA,NA,IA,RA,FA,PA,zA,VA,WA,HA,GA,qA,jA,KA,JA,YA,tM,nM,rM,aM,dM,pM,vM,_M,SM,kM,eA,LM,GM,jM,BM,KM,XM,qM,YM,JM,eN,iN,sN,oN,pN,fN,cN,gN,vN,bN,_N,xN,SN,kN,AN,NN,RN,FN,zN,BN,UN,HN,jN,qN,XN,YN,JN,QN,JT,eI,IM,tI,nI,rI,rA,iI,sI,aI,lI,uI,cI,hI,dI,bI,wI,xI,CI,kI,TI,_I,AI,MI,NI,RI,OI,HI,fA,jI,KI,ZI,JI,mM,eD,rD,iD,uD,cD,aA,hD,pD,yM,zI,fD,gD,mD,gA,bD,xD,SD,CD,AD,ND,ID,DD,LD,FD,PD,zD,$D,UD,VD,hM,WI,WD,HD,GD,jD,qD,KD,XD,ZD,JD,UI,EA,{kernelName:Je,backendName:"webgl",kernelFunc:QD},{kernelName:"Tanh",backendName:"webgl",kernelFunc:oA({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},{kernelName:"Tile",backendName:"webgl",kernelFunc:tR},{kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s,sorted:a}=r,o=n.readSync(i.dataId),[u,l]=NT(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},kA,{kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;Ak(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:u,indices:l}=DT(a,i,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}},{kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,u=i.shape[s],l=new Array(o-1);let c=0;for(let m=0;m<o;m++)m!==s&&(l[c++]=a.shape[m]);const h=[],d=new Array(o).fill(0),p=a.shape.slice();p[s]=1;const f=new Array(u);for(let m=0;m<f.length;m++){d[s]=m;const e=cM({inputs:{x:a},backend:n,attrs:{begin:d,size:p}}),t=mA({inputs:{x:e},backend:n,attrs:{shape:l}});f[m]=t,h.push(e)}return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:i}=e,{x:s,segmentIds:a}=t,{numSegments:o}=i,u=s.shape.length,l=[];let c=0;const h=g.getAxesPermutation([c],u);let d=s;null!=h&&(d=CA({inputs:{x:s},backend:n,attrs:{perm:h}}),l.push(d),c=g.getInnerMostAxes(1,u)[0]);const p=g.segment_util.computeOutShape(d.shape,c,o),f=r.sizeFromShape([d.shape[c]]),m=mA({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(m);const y=Ft(s.dtype),v=(e,t,r,i,s)=>{const a=e.shape[0],o=e.shape[1],u=g.segment_util.segOpComputeOptimalWindowSize(o,s),c=new nR({windowSize:u,inSize:o,batchSize:a,numSegments:s},t),h=n.compileAndRun(c,[e,r],i);if(l.push(h),h.shape[1]===s)return h;const d=dD({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),p=tR({inputs:{x:d},backend:n,attrs:{reps:[o/u]}});return l.push(d),l.push(p),v(h,t,p,i,s)},b=mA({inputs:{x:v(m,"unsortedSegmentSum",a,y,o)},backend:n,attrs:{shape:p}});let _=b;if(null!=h){l.push(b);const e=g.getUndoAxesPermutation(h);_=CA({inputs:{x:_},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),_}},nD];for(const aR of rR)it(aR);n.d(t,"version",(function(){return iR})),n.d(t,"AdadeltaOptimizer",(function(){return Pi})),n.d(t,"AdagradOptimizer",(function(){return $i})),n.d(t,"AdamOptimizer",(function(){return Vi})),n.d(t,"AdamaxOptimizer",(function(){return Ki})),n.d(t,"MomentumOptimizer",(function(){return Zi})),n.d(t,"Optimizer",(function(){return Fi})),n.d(t,"RMSPropOptimizer",(function(){return Yi})),n.d(t,"SGDOptimizer",(function(){return Xi})),n.d(t,"Tensor",(function(){return kt})),n.d(t,"TensorBuffer",(function(){return wt})),n.d(t,"Variable",(function(){return At})),n.d(t,"Rank",(function(){return Mt})),n.d(t,"sumOutType",(function(){return Ft})),n.d(t,"upcastType",(function(){return Ot})),n.d(t,"Reduction",(function(){return ml})),n.d(t,"getKernel",(function(){return tt})),n.d(t,"getGradient",(function(){return nt})),n.d(t,"getKernelsForBackend",(function(){return rt})),n.d(t,"registerKernel",(function(){return it})),n.d(t,"registerGradient",(function(){return st})),n.d(t,"unregisterKernel",(function(){return at})),n.d(t,"unregisterGradient",(function(){return ot})),n.d(t,"copyRegisteredKernels",(function(){return ut})),n.d(t,"customGrad",(function(){return Ri})),n.d(t,"grad",(function(){return Ai})),n.d(t,"grads",(function(){return Mi})),n.d(t,"valueAndGrad",(function(){return Ni})),n.d(t,"valueAndGrads",(function(){return Ii})),n.d(t,"variableGrads",(function(){return Di})),n.d(t,"Environment",(function(){return ze})),n.d(t,"env",(function(){return $e})),n.d(t,"ENV",(function(){return Ue})),n.d(t,"version_core",(function(){return"3.1.0"})),n.d(t,"nextFrame",(function(){return Rl})),n.d(t,"browser",(function(){return u})),n.d(t,"io",(function(){return a})),n.d(t,"math",(function(){return o})),n.d(t,"serialization",(function(){return d})),n.d(t,"test_util",(function(){return p})),n.d(t,"util",(function(){return r})),n.d(t,"backend_util",(function(){return g})),n.d(t,"tensor_util",(function(){return i})),n.d(t,"slice_util",(function(){return h})),n.d(t,"gather_util",(function(){return l})),n.d(t,"scatter_util",(function(){return c})),n.d(t,"device_util",(function(){return s})),n.d(t,"kernel_impls",(function(){return y})),n.d(t,"KernelBackend",(function(){return H})),n.d(t,"DataStorage",(function(){return W})),n.d(t,"abs",(function(){return Wi})),n.d(t,"acos",(function(){return Ji})),n.d(t,"acosh",(function(){return Qi})),n.d(t,"add",(function(){return xi})),n.d(t,"addN",(function(){return es})),n.d(t,"all",(function(){return ts})),n.d(t,"any",(function(){return ns})),n.d(t,"argMax",(function(){return rs})),n.d(t,"argMin",(function(){return is})),n.d(t,"asin",(function(){return ss})),n.d(t,"asinh",(function(){return as})),n.d(t,"atan",(function(){return os})),n.d(t,"atan2",(function(){return us})),n.d(t,"atanh",(function(){return ls})),n.d(t,"avgPool",(function(){return Es})),n.d(t,"avgPool3d",(function(){return Cs})),n.d(t,"basicLSTMCell",(function(){return Ns})),n.d(t,"batchToSpaceND",(function(){return Is})),n.d(t,"batchNorm",(function(){return Ds})),n.d(t,"batchNorm2d",(function(){return Rs})),n.d(t,"batchNorm3d",(function(){return Ls})),n.d(t,"batchNorm4d",(function(){return Os})),n.d(t,"bincount",(function(){return Fs})),n.d(t,"broadcastTo",(function(){return Ps})),n.d(t,"buffer",(function(){return Gn})),n.d(t,"cast",(function(){return jn})),n.d(t,"ceil",(function(){return zs})),n.d(t,"clipByValue",(function(){return $s})),n.d(t,"clone",(function(){return qn})),n.d(t,"complex",(function(){return tn})),n.d(t,"concat",(function(){return ks})),n.d(t,"concat1d",(function(){return Bs})),n.d(t,"concat2d",(function(){return Us})),n.d(t,"concat3d",(function(){return Vs})),n.d(t,"concat4d",(function(){return Ws})),n.d(t,"conv1d",(function(){return Gs})),n.d(t,"conv2d",(function(){return Hs})),n.d(t,"conv2dTranspose",(function(){return qs})),n.d(t,"conv3d",(function(){return Ks})),n.d(t,"conv3dTranspose",(function(){return Zs})),n.d(t,"cos",(function(){return Ys})),n.d(t,"cosh",(function(){return Js})),n.d(t,"cumsum",(function(){return Qs})),n.d(t,"denseBincount",(function(){return ea})),n.d(t,"depthToSpace",(function(){return ta})),n.d(t,"depthwiseConv2d",(function(){return na})),n.d(t,"diag",(function(){return ra})),n.d(t,"dilation2d",(function(){return ia})),n.d(t,"div",(function(){return Si})),n.d(t,"divNoNan",(function(){return oa})),n.d(t,"dot",(function(){return ua})),n.d(t,"elu",(function(){return la})),n.d(t,"equal",(function(){return sa})),n.d(t,"erf",(function(){return ca})),n.d(t,"exp",(function(){return ha})),n.d(t,"expandDims",(function(){return da})),n.d(t,"expm1",(function(){return pa})),n.d(t,"eye",(function(){return ma})),n.d(t,"fill",(function(){return zi})),n.d(t,"floor",(function(){return ga})),n.d(t,"floorDiv",(function(){return wi})),n.d(t,"gather",(function(){return ya})),n.d(t,"greater",(function(){return va})),n.d(t,"greaterEqual",(function(){return ba})),n.d(t,"imag",(function(){return _a})),n.d(t,"isFinite",(function(){return xa})),n.d(t,"isInf",(function(){return wa})),n.d(t,"isNaN",(function(){return Sa})),n.d(t,"leakyRelu",(function(){return Ea})),n.d(t,"less",(function(){return Ca})),n.d(t,"lessEqual",(function(){return ka})),n.d(t,"linspace",(function(){return Ta})),n.d(t,"localResponseNormalization",(function(){return Aa})),n.d(t,"log",(function(){return Ma})),n.d(t,"log1p",(function(){return Na})),n.d(t,"logSigmoid",(function(){return Ra})),n.d(t,"logSoftmax",(function(){return Fa})),n.d(t,"logSumExp",(function(){return Ga})),n.d(t,"logicalAnd",(function(){return ja})),n.d(t,"logicalNot",(function(){return qa})),n.d(t,"logicalOr",(function(){return Ka})),n.d(t,"logicalXor",(function(){return Xa})),n.d(t,"matMul",(function(){return dr})),n.d(t,"max",(function(){return La})),n.d(t,"maxPool",(function(){return Za})),n.d(t,"maxPool3d",(function(){return Ya})),n.d(t,"maxPoolWithArgmax",(function(){return Ja})),n.d(t,"maximum",(function(){return qi})),n.d(t,"mean",(function(){return Qa})),n.d(t,"min",(function(){return eo})),n.d(t,"minimum",(function(){return to})),n.d(t,"mirrorPad",(function(){return no})),n.d(t,"mod",(function(){return ro})),n.d(t,"moments",(function(){return io})),n.d(t,"mul",(function(){return Ei})),n.d(t,"multiRNNCell",(function(){return so})),n.d(t,"multinomial",(function(){return ao})),n.d(t,"neg",(function(){return Ia})),n.d(t,"notEqual",(function(){return oo})),n.d(t,"oneHot",(function(){return pr})),n.d(t,"ones",(function(){return lo})),n.d(t,"onesLike",(function(){return co})),n.d(t,"outerProduct",(function(){return ho})),n.d(t,"pad",(function(){return po})),n.d(t,"pad1d",(function(){return fo})),n.d(t,"pad2d",(function(){return mo})),n.d(t,"pad3d",(function(){return go})),n.d(t,"pad4d",(function(){return yo})),n.d(t,"pool",(function(){return bo})),n.d(t,"pow",(function(){return Bi})),n.d(t,"prelu",(function(){return _o})),n.d(t,"print",(function(){return Kn})),n.d(t,"prod",(function(){return xo})),n.d(t,"rand",(function(){return wo})),n.d(t,"randomGamma",(function(){return To})),n.d(t,"randomNormal",(function(){return Ao})),n.d(t,"randomUniform",(function(){return Mo})),n.d(t,"range",(function(){return No})),n.d(t,"real",(function(){return Io})),n.d(t,"reciprocal",(function(){return Do})),n.d(t,"relu",(function(){return Ro})),n.d(t,"relu6",(function(){return Lo})),n.d(t,"reshape",(function(){return Ss})),n.d(t,"reverse",(function(){return Oo})),n.d(t,"reverse1d",(function(){return Fo})),n.d(t,"reverse2d",(function(){return Po})),n.d(t,"reverse3d",(function(){return zo})),n.d(t,"reverse4d",(function(){return $o})),n.d(t,"round",(function(){return Bo})),n.d(t,"rsqrt",(function(){return Uo})),n.d(t,"scalar",(function(){return Oi})),n.d(t,"selu",(function(){return Vo})),n.d(t,"separableConv2d",(function(){return Wo})),n.d(t,"setdiff1dAsync",(function(){return Ho})),n.d(t,"sigmoid",(function(){return Ts})),n.d(t,"sign",(function(){return Go})),n.d(t,"sin",(function(){return jo})),n.d(t,"sinh",(function(){return qo})),n.d(t,"slice",(function(){return As})),n.d(t,"slice1d",(function(){return Ko})),n.d(t,"slice2d",(function(){return Xo})),n.d(t,"slice3d",(function(){return Zo})),n.d(t,"slice4d",(function(){return Yo})),n.d(t,"softmax",(function(){return Jo})),n.d(t,"softplus",(function(){return Da})),n.d(t,"spaceToBatchND",(function(){return vo})),n.d(t,"fft",(function(){return Qo})),n.d(t,"ifft",(function(){return eu})),n.d(t,"irfft",(function(){return tu})),n.d(t,"rfft",(function(){return ru})),n.d(t,"split",(function(){return nu})),n.d(t,"sqrt",(function(){return Ci})),n.d(t,"square",(function(){return ki})),n.d(t,"squaredDifference",(function(){return iu})),n.d(t,"squeeze",(function(){return su})),n.d(t,"stack",(function(){return au})),n.d(t,"step",(function(){return ou})),n.d(t,"stridedSlice",(function(){return uu})),n.d(t,"sub",(function(){return Ui})),n.d(t,"sum",(function(){return Oa})),n.d(t,"tan",(function(){return lu})),n.d(t,"tanh",(function(){return Ms})),n.d(t,"tensor",(function(){return rn})),n.d(t,"tensor1d",(function(){return cu})),n.d(t,"tensor2d",(function(){return hu})),n.d(t,"tensor3d",(function(){return gr})),n.d(t,"tensor4d",(function(){return du})),n.d(t,"tensor5d",(function(){return pu})),n.d(t,"tensor6d",(function(){return fu})),n.d(t,"tile",(function(){return fa})),n.d(t,"topk",(function(){return mu})),n.d(t,"truncatedNormal",(function(){return gu})),n.d(t,"unique",(function(){return yu})),n.d(t,"unsortedSegmentSum",(function(){return vu})),n.d(t,"unstack",(function(){return bu})),n.d(t,"variable",(function(){return _u})),n.d(t,"where",(function(){return aa})),n.d(t,"whereAsync",(function(){return wu})),n.d(t,"zeros",(function(){return uo})),n.d(t,"zerosLike",(function(){return Ti})),n.d(t,"op",(function(){return en})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return"__op"})),n.d(t,"image",(function(){return Tl})),n.d(t,"linalg",(function(){return Al})),n.d(t,"losses",(function(){return Ml})),n.d(t,"spectral",(function(){return Cl})),n.d(t,"fused",(function(){return f})),n.d(t,"signal",(function(){return kl})),n.d(t,"train",(function(){return Il})),n.d(t,"enableProdMode",(function(){return ei})),n.d(t,"enableDebugMode",(function(){return ti})),n.d(t,"disableDeprecationWarnings",(function(){return ni})),n.d(t,"deprecationWarn",(function(){return ri})),n.d(t,"disposeVariables",(function(){return ii})),n.d(t,"engine",(function(){return si})),n.d(t,"memory",(function(){return ai})),n.d(t,"profile",(function(){return oi})),n.d(t,"tidy",(function(){return ui})),n.d(t,"dispose",(function(){return li})),n.d(t,"keep",(function(){return ci})),n.d(t,"time",(function(){return hi})),n.d(t,"setBackend",(function(){return di})),n.d(t,"ready",(function(){return pi})),n.d(t,"getBackend",(function(){return fi})),n.d(t,"removeBackend",(function(){return mi})),n.d(t,"findBackend",(function(){return gi})),n.d(t,"findBackendFactory",(function(){return yi})),n.d(t,"registerBackend",(function(){return vi})),n.d(t,"backend",(function(){return bi})),n.d(t,"setPlatform",(function(){return _i})),n.d(t,"Abs",(function(){return"Abs"})),n.d(t,"Acos",(function(){return"Acos"})),n.d(t,"Acosh",(function(){return"Acosh"})),n.d(t,"Add",(function(){return"Add"})),n.d(t,"AddN",(function(){return"AddN"})),n.d(t,"All",(function(){return"All"})),n.d(t,"Any",(function(){return"Any"})),n.d(t,"ArgMax",(function(){return"ArgMax"})),n.d(t,"ArgMin",(function(){return"ArgMin"})),n.d(t,"Asin",(function(){return"Asin"})),n.d(t,"Asinh",(function(){return"Asinh"})),n.d(t,"Atan",(function(){return"Atan"})),n.d(t,"Atanh",(function(){return"Atanh"})),n.d(t,"Atan2",(function(){return"Atan2"})),n.d(t,"AvgPool",(function(){return"AvgPool"})),n.d(t,"AvgPoolGrad",(function(){return"AvgPoolGrad"})),n.d(t,"AvgPool3D",(function(){return"AvgPool3D"})),n.d(t,"AvgPool3DGrad",(function(){return"AvgPool3DGrad"})),n.d(t,"BatchMatMul",(function(){return"BatchMatMul"})),n.d(t,"BatchToSpaceND",(function(){return"BatchToSpaceND"})),n.d(t,"Bincount",(function(){return"Bincount"})),n.d(t,"BroadcastTo",(function(){return"BroadcastTo"})),n.d(t,"Cast",(function(){return"Cast"})),n.d(t,"Ceil",(function(){return"Ceil"})),n.d(t,"ClipByValue",(function(){return"ClipByValue"})),n.d(t,"Complex",(function(){return"Complex"})),n.d(t,"ComplexAbs",(function(){return"ComplexAbs"})),n.d(t,"Concat",(function(){return"Concat"})),n.d(t,"Conv2D",(function(){return"Conv2D"})),n.d(t,"Conv2DBackpropFilter",(function(){return"Conv2DBackpropFilter"})),n.d(t,"Conv2DBackpropInput",(function(){return"Conv2DBackpropInput"})),n.d(t,"Conv3D",(function(){return"Conv3D"})),n.d(t,"Conv3DBackpropFilterV2",(function(){return"Conv3DBackpropFilterV2"})),n.d(t,"Conv3DBackpropInputV2",(function(){return"Conv3DBackpropInputV2"})),n.d(t,"Cos",(function(){return He})),n.d(t,"Cosh",(function(){return"Cosh"})),n.d(t,"Cumsum",(function(){return"Cumsum"})),n.d(t,"CropAndResize",(function(){return"CropAndResize"})),n.d(t,"DenseBincount",(function(){return"DenseBincount"})),n.d(t,"DepthToSpace",(function(){return"DepthToSpace"})),n.d(t,"DepthwiseConv2dNative",(function(){return"DepthwiseConv2dNative"})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return"DepthwiseConv2dNativeBackpropFilter"})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return"DepthwiseConv2dNativeBackpropInput"})),n.d(t,"Diag",(function(){return"Diag"})),n.d(t,"Dilation2D",(function(){return"Dilation2D"})),n.d(t,"Dilation2DBackpropInput",(function(){return"Dilation2DBackpropInput"})),n.d(t,"Dilation2DBackpropFilter",(function(){return"Dilation2DBackpropFilter"})),n.d(t,"RealDiv",(function(){return"RealDiv"})),n.d(t,"Elu",(function(){return"Elu"})),n.d(t,"EluGrad",(function(){return"EluGrad"})),n.d(t,"Erf",(function(){return Ge})),n.d(t,"Equal",(function(){return"Equal"})),n.d(t,"Exp",(function(){return je})),n.d(t,"ExpandDims",(function(){return"ExpandDims"})),n.d(t,"Expm1",(function(){return"Expm1"})),n.d(t,"FFT",(function(){return"FFT"})),n.d(t,"Fill",(function(){return"Fill"})),n.d(t,"FlipLeftRight",(function(){return"FlipLeftRight"})),n.d(t,"Floor",(function(){return"Floor"})),n.d(t,"FloorDiv",(function(){return"FloorDiv"})),n.d(t,"FusedBatchNorm",(function(){return"FusedBatchNorm"})),n.d(t,"GatherV2",(function(){return"GatherV2"})),n.d(t,"GatherNd",(function(){return"GatherNd"})),n.d(t,"Greater",(function(){return"Greater"})),n.d(t,"GreaterEqual",(function(){return"GreaterEqual"})),n.d(t,"Identity",(function(){return"Identity"})),n.d(t,"IFFT",(function(){return"IFFT"})),n.d(t,"Imag",(function(){return"Imag"})),n.d(t,"IsFinite",(function(){return"IsFinite"})),n.d(t,"IsInf",(function(){return"IsInf"})),n.d(t,"IsNan",(function(){return"IsNan"})),n.d(t,"LeakyRelu",(function(){return"LeakyRelu"})),n.d(t,"Less",(function(){return"Less"})),n.d(t,"LessEqual",(function(){return"LessEqual"})),n.d(t,"LinSpace",(function(){return"LinSpace"})),n.d(t,"Log",(function(){return qe})),n.d(t,"Log1p",(function(){return"Log1p"})),n.d(t,"LogicalAnd",(function(){return"LogicalAnd"})),n.d(t,"LogicalNot",(function(){return"LogicalNot"})),n.d(t,"LogicalOr",(function(){return"LogicalOr"})),n.d(t,"LogSoftmax",(function(){return"LogSoftmax"})),n.d(t,"LRN",(function(){return"LRN"})),n.d(t,"LRNGrad",(function(){return"LRNGrad"})),n.d(t,"Max",(function(){return"Max"})),n.d(t,"Maximum",(function(){return"Maximum"})),n.d(t,"MaxPool",(function(){return"MaxPool"})),n.d(t,"MaxPoolGrad",(function(){return"MaxPoolGrad"})),n.d(t,"MaxPool3D",(function(){return"MaxPool3D"})),n.d(t,"MaxPool3DGrad",(function(){return"MaxPool3DGrad"})),n.d(t,"MaxPoolWithArgmax",(function(){return"MaxPoolWithArgmax"})),n.d(t,"Mean",(function(){return"Mean"})),n.d(t,"Min",(function(){return"Min"})),n.d(t,"Minimum",(function(){return"Minimum"})),n.d(t,"MirrorPad",(function(){return"MirrorPad"})),n.d(t,"Mod",(function(){return Ke})),n.d(t,"Multinomial",(function(){return"Multinomial"})),n.d(t,"Multiply",(function(){return"Multiply"})),n.d(t,"Neg",(function(){return"Neg"})),n.d(t,"NotEqual",(function(){return"NotEqual"})),n.d(t,"NonMaxSuppressionV3",(function(){return"NonMaxSuppressionV3"})),n.d(t,"NonMaxSuppressionV4",(function(){return"NonMaxSuppressionV4"})),n.d(t,"NonMaxSuppressionV5",(function(){return"NonMaxSuppressionV5"})),n.d(t,"OnesLike",(function(){return"OnesLike"})),n.d(t,"OneHot",(function(){return"OneHot"})),n.d(t,"Pack",(function(){return"Pack"})),n.d(t,"PadV2",(function(){return"PadV2"})),n.d(t,"Pool",(function(){return"Pool"})),n.d(t,"Pow",(function(){return Xe})),n.d(t,"Prelu",(function(){return"Prelu"})),n.d(t,"Prod",(function(){return"Prod"})),n.d(t,"Range",(function(){return"Range"})),n.d(t,"Real",(function(){return"Real"})),n.d(t,"Reciprocal",(function(){return"Reciprocal"})),n.d(t,"Relu",(function(){return"Relu"})),n.d(t,"Reshape",(function(){return"Reshape"})),n.d(t,"ResizeNearestNeighbor",(function(){return"ResizeNearestNeighbor"})),n.d(t,"ResizeNearestNeighborGrad",(function(){return"ResizeNearestNeighborGrad"})),n.d(t,"ResizeBilinear",(function(){return"ResizeBilinear"})),n.d(t,"ResizeBilinearGrad",(function(){return"ResizeBilinearGrad"})),n.d(t,"Relu6",(function(){return"Relu6"})),n.d(t,"Reverse",(function(){return"Reverse"})),n.d(t,"Round",(function(){return"Round"})),n.d(t,"Rsqrt",(function(){return"Rsqrt"})),n.d(t,"ScatterNd",(function(){return"ScatterNd"})),n.d(t,"Select",(function(){return"Select"})),n.d(t,"Selu",(function(){return"Selu"})),n.d(t,"Slice",(function(){return"Slice"})),n.d(t,"Sin",(function(){return Ze})),n.d(t,"Sinh",(function(){return"Sinh"})),n.d(t,"Sign",(function(){return"Sign"})),n.d(t,"Sigmoid",(function(){return"Sigmoid"})),n.d(t,"Softplus",(function(){return"Softplus"})),n.d(t,"Sqrt",(function(){return"Sqrt"})),n.d(t,"Sum",(function(){return"Sum"})),n.d(t,"SpaceToBatchND",(function(){return"SpaceToBatchND"})),n.d(t,"SplitV",(function(){return"SplitV"})),n.d(t,"Softmax",(function(){return"Softmax"})),n.d(t,"SquaredDifference",(function(){return"SquaredDifference"})),n.d(t,"Square",(function(){return"Square"})),n.d(t,"Sub",(function(){return Ye})),n.d(t,"SparseToDense",(function(){return"SparseToDense"})),n.d(t,"StridedSlice",(function(){return"StridedSlice"})),n.d(t,"Tan",(function(){return Je})),n.d(t,"Tanh",(function(){return"Tanh"})),n.d(t,"Tile",(function(){return"Tile"})),n.d(t,"TopK",(function(){return"TopK"})),n.d(t,"Transpose",(function(){return"Transpose"})),n.d(t,"Unique",(function(){return"Unique"})),n.d(t,"Unpack",(function(){return"Unpack"})),n.d(t,"UnsortedSegmentSum",(function(){return"UnsortedSegmentSum"})),n.d(t,"ZerosLike",(function(){return"ZerosLike"})),n.d(t,"Step",(function(){return"Step"})),n.d(t,"FromPixels",(function(){return"FromPixels"})),n.d(t,"RotateWithOffset",(function(){return"RotateWithOffset"})),n.d(t,"_FusedMatMul",(function(){return"_FusedMatMul"})),n.d(t,"FusedConv2D",(function(){return"FusedConv2D"})),n.d(t,"FusedDepthwiseConv2D",(function(){return"FusedDepthwiseConv2D"})),n.d(t,"booleanMaskAsync",(function(){return Su})),n.d(t,"transpose",(function(){return fr})),n.d(t,"norm",(function(){return Eu})),n.d(t,"movingAverage",(function(){return Cu})),n.d(t,"scatterND",(function(){return ku})),n.d(t,"sparseToDense",(function(){return Tu})),n.d(t,"gatherND",(function(){return Au})),n.d(t,"dropout",(function(){return Mu})),n.d(t,"enclosingPowerOfTwo",(function(){return Nu})),n.d(t,"cosineWindow",(function(){return Iu})),n.d(t,"inTopKAsync",(function(){return Du})),n.d(t,"CallbackList",(function(){return Zp})),n.d(t,"CustomCallback",(function(){return Qp})),n.d(t,"History",(function(){return Jp})),n.d(t,"Callback",(function(){return Gv})),n.d(t,"callbacks",(function(){return Xv})),n.d(t,"EarlyStopping",(function(){return Kv})),n.d(t,"InputSpec",(function(){return zp})),n.d(t,"SymbolicTensor",(function(){return $p})),n.d(t,"LayersModel",(function(){return nm})),n.d(t,"input",(function(){return lm})),n.d(t,"loadLayersModel",(function(){return um})),n.d(t,"model",(function(){return am})),n.d(t,"registerCallbackConstructor",(function(){return cm})),n.d(t,"sequential",(function(){return om})),n.d(t,"RNN",(function(){return ag})),n.d(t,"Sequential",(function(){return sm})),n.d(t,"LayerVariable",(function(){return Op})),n.d(t,"version_layers",(function(){return"3.1.0"})),n.d(t,"constraints",(function(){return v})),n.d(t,"initializers",(function(){return b})),n.d(t,"layers",(function(){return _})),n.d(t,"metrics",(function(){return x})),n.d(t,"models",(function(){return w})),n.d(t,"regularizers",(function(){return S})),n.d(t,"GraphModel",(function(){return u_})),n.d(t,"loadGraphModel",(function(){return l_})),n.d(t,"deregisterOp",(function(){return tb})),n.d(t,"registerOp",(function(){return Qv})),n.d(t,"version_converter",(function(){return"3.1.0"})),n.d(t,"data",(function(){return U}));const iR={"tfjs-core":"3.1.0","tfjs-backend-cpu":"3.1.0","tfjs-backend-webgl":"3.1.0","tfjs-data":fx,"tfjs-layers":"3.1.0","tfjs-converter":"3.1.0",tfjs:"3.1.0"}},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zuR4:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("HSsa"),s=n("CgaS"),a=n("SntB"),o=function e(t){var n=new s(t),o=i(s.prototype.request,n);return r.extend(o,s.prototype,n),r.extend(o,n),o.create=function(n){return e(a(t,n))},o}(n("JEQr"));o.Axios=s,o.Cancel=n("endd"),o.CancelToken=n("jfS+"),o.isCancel=n("Lmem"),o.VERSION=n("XM5P").version,o.all=function(e){return Promise.all(e)},o.spread=n("DfZB"),o.isAxiosError=n("XwJu"),e.exports=o,e.exports.default=o}},[[0,0]]]);