function _toArray2(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _get2(){return(_get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new k(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(C([])));v&&v!==t&&n.call(v,a)&&(p=v);var g=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(a,i){function o(){return new t((function(r,o){!function r(a,i,o,s){var u=c(e[a],e,i);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}(a,i,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(_.prototype),s(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new _(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(a,n.prototype),a}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"0Tit":function(e,t){var n="function"==typeof Float32Array;function r(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function i(e){return 3*e}function o(e,t,n){return((r(t,n)*e+a(t,n))*e+i(t))*e}function s(e,t,n){return 3*r(t,n)*e*e+2*a(t,n)*e+i(t)}function u(e){return e}e.exports=function(e,t,r,a){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===a)return u;for(var i=n?new Float32Array(11):new Array(11),c=0;c<11;++c)i[c]=o(.1*c,e,r);return function(n){return 0===n?0:1===n?1:o(function(t){for(var n=0,a=1;10!==a&&i[a]<=t;++a)n+=.1;--a;var u=n+(t-i[a])/(i[a+1]-i[a])*.1,c=s(u,e,r);return c>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var i=s(t,n,r);if(0===i)return t;t-=(o(t,n,r)-e)/i}return t}(t,u,e,r):0===c?u:function(e,t,n,r,a){var i,s,u=0;do{(i=o(s=t+(n-t)/2,r,a)-e)>0?n=s:t=s}while(Math.abs(i)>1e-7&&++u<10);return s}(t,n,n+.1,e,r)}(n),t,a)}}},1:function(e,t){},"1h5C":function(e,t,n){var r;!function(n){"use strict";var a={s:1,n:0,d:1};function i(e,t){if(isNaN(e=parseInt(e,10)))throw l.InvalidParameter;return e*t}function o(e,t){if(0===t)throw l.DivisionByZero;var n=Object.create(l.prototype);n.s=e<0?-1:1;var r=c(e=e<0?-e:e,t);return n.n=e/r,n.d=t/r,n}function s(e){for(var t={},n=e,r=2,a=4;a<=n;){for(;n%r==0;)n/=r,t[r]=(t[r]||0)+1;a+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var u=function(e,t){var n,r=0,o=1,s=1,u=0,c=0,h=0,f=1,d=1,p=0,m=1,v=1,g=1,y=1e7;if(null==e);else if(void 0!==t){if(s=(r=e)*(o=t),r%1!=0||o%1!=0)throw l.NonIntegerParameter}else switch(typeof e){case"object":if("d"in e&&"n"in e)r=e.n,o=e.d,"s"in e&&(r*=e.s);else{if(!(0 in e))throw l.InvalidParameter;r=e[0],1 in e&&(o=e[1])}s=r*o;break;case"number":if(e<0&&(s=e,e=-e),e%1==0)r=e;else if(e>0){for(e>=1&&(e/=d=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));m<=y&&g<=y;){if(e===(n=(p+v)/(m+g))){m+g<=y?(r=p+v,o=m+g):g>m?(r=v,o=g):(r=p,o=m);break}e>n?(p+=v,m+=g):(v+=p,g+=m),m>y?(r=v,o=g):(r=p,o=m)}r*=d}else(isNaN(e)||isNaN(t))&&(o=r=NaN);break;case"string":if(null===(m=e.match(/\d+|./g)))throw l.InvalidParameter;if("-"===m[p]?(s=-1,p++):"+"===m[p]&&p++,m.length===p+1?c=i(m[p++],s):"."===m[p+1]||"."===m[p]?("."!==m[p]&&(u=i(m[p++],s)),(++p+1===m.length||"("===m[p+1]&&")"===m[p+3]||"'"===m[p+1]&&"'"===m[p+3])&&(c=i(m[p],s),f=Math.pow(10,m[p].length),p++),("("===m[p]&&")"===m[p+2]||"'"===m[p]&&"'"===m[p+2])&&(h=i(m[p+1],s),d=Math.pow(10,m[p+1].length)-1,p+=3)):"/"===m[p+1]||":"===m[p+1]?(c=i(m[p],s),f=i(m[p+2],1),p+=3):"/"===m[p+3]&&" "===m[p+1]&&(u=i(m[p],s),c=i(m[p+2],s),f=i(m[p+4],1),p+=5),m.length<=p){s=r=h+(o=f*d)*u+d*c;break}default:throw l.InvalidParameter}if(0===o)throw l.DivisionByZero;a.s=s<0?-1:1,a.n=Math.abs(r),a.d=Math.abs(o)};function c(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function l(e,t){if(u(e,t),!(this instanceof l))return o(a.s*a.n,a.d);e=c(a.d,a.n),this.s=a.s,this.n=a.n/e,this.d=a.d/e}l.DivisionByZero=new Error("Division by Zero"),l.InvalidParameter=new Error("Invalid argument"),l.NonIntegerParameter=new Error("Parameters must be integer"),l.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(e,t){return u(e,t),o(this.s*this.n*a.d+a.s*this.d*a.n,this.d*a.d)},sub:function(e,t){return u(e,t),o(this.s*this.n*a.d-a.s*this.d*a.n,this.d*a.d)},mul:function(e,t){return u(e,t),o(this.s*a.s*this.n*a.n,this.d*a.d)},div:function(e,t){return u(e,t),o(this.s*a.s*this.n*a.d,this.d*a.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new l(NaN);if(void 0===e)return o(this.s*this.n%this.d,1);if(u(e,t),0===a.n&&0===this.d)throw l.DivisionByZero;return o(this.s*(a.d*this.n)%(a.n*this.d),a.d*this.d)},gcd:function(e,t){return u(e,t),o(c(a.n,this.n)*c(a.d,this.d),a.d*this.d)},lcm:function(e,t){return u(e,t),0===a.n&&0===this.n?o(0,1):o(a.n*this.n,c(a.n,this.n)*c(a.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):o(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):o(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):o(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(e,t){if(u(e,t),1===a.d)return a.s<0?o(Math.pow(this.s*this.d,a.n),Math.pow(this.n,a.n)):o(Math.pow(this.s*this.n,a.n),Math.pow(this.d,a.n));if(this.s<0)return null;var n=s(this.n),r=s(this.d),i=1,c=1;for(var l in n)if("1"!==l){if("0"===l){i=0;break}if(n[l]*=a.n,n[l]%a.d!=0)return null;n[l]/=a.d,i*=Math.pow(l,n[l])}for(var l in r)if("1"!==l){if(r[l]*=a.n,r[l]%a.d!=0)return null;r[l]/=a.d,c*=Math.pow(l,r[l])}return a.s<0?o(c,i):o(i,c)},equals:function(e,t){return u(e,t),this.s*this.n*a.d==a.s*a.n*this.d},compare:function(e,t){u(e,t);var n=this.s*this.n*a.d-a.s*a.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var a=o(n[r-1],1),i=r-2;i>=0;i--)a=a.inverse().add(n[i]);if(a.sub(t).abs().valueOf()<e)return a.mul(this.s)}return this},divisible:function(e,t){return u(e,t),!(!(a.n*this.d)||this.n*a.d%(a.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,a=this.d;return this.s<0&&(n+="-"),1===a?n+=r:(e&&(t=Math.floor(r/a))>0&&(n+=t,n+=" ",r%=a),n+=r,n+="/",n+=a),n},toLatex:function(e){var t,n="",r=this.n,a=this.d;return this.s<0&&(n+="-"),1===a?n+=r:(e&&(t=Math.floor(r/a))>0&&(n+=t,r%=a),n+="\\frac{",n+=r,n+="}{",n+=a,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,n),a=function(e,t,n){for(var r=1,a=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),i=0;i<300;i++){if(r===a)return i;r=10*r%t,a=10*a%t}return 0}(0,n,r),i=this.s<0?"-":"";if(i+=t/n|0,t%=n,(t*=10)&&(i+="."),r){for(var o=a;o--;)i+=t/n|0,t%=n,t*=10;for(i+="(",o=r;o--;)i+=t/n|0,t%=n,t*=10;i+=")"}else for(o=e;t&&o--;)i+=t/n|0,t%=n,t*=10;return i}},void 0===(r=(function(){return l}).apply(t,[]))||(e.exports=r)}()},2:function(e,t){},"2SVd":function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},3:function(e,t){},"34t7":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"3Mn4":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},4:function(e,t){},"4xPs":function(e,t,n){var r=n("JNaD"),a=n("VdZX"),i=n("LJTJ"),o=n("eUH1"),s=n("9YWz"),u=n("B+jg"),c=n("wptm");c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},5:function(e,t){},"5fPn":function(e,t,n){var r;!function(a,i,o){var s,u=o.pow(256,6),c=o.pow(2,52),l=2*c;function h(e,t,n){var r=[],h=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(o){}return a.length?a:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(256):(e=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,m(i)]}}():e,3),r),v=new f(r),g=function(){for(var e=v.g(6),t=u,n=0;e<c;)e=256*(e+n),t*=256,n=v.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(m(v.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&d(r,v),e.state=function(){return d(v,{})}),n?(o.random=e,t):e})(g,h,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(p(o.random(),i),e.exports){e.exports=h;try{s=n(8)}catch(v){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},"5o5E":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"5oMp":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"5vwH":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n=a[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=0==(n=s[127&i]^=r+(o=o+1640531527|0))?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,s[a]=(r^=r>>>15)^(n^=n>>>12);e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},6:function(e,t){},"6XX6":function(e,t){e.exports=function e(t,n){"use strict";var r,a,i=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=l(t).replace(o,"")||"",f=l(n).replace(o,"")||"",d=h.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(h.match(u),16)||1!==d.length&&h.match(s)&&Date.parse(h),v=parseInt(f.match(u),16)||m&&f.match(s)&&Date.parse(f)||null;if(v){if(m<v)return-1;if(m>v)return 1}for(var g=0,y=Math.max(d.length,p.length);g<y;g++){if(r=!(d[g]||"").match(c)&&parseFloat(d[g])||d[g]||0,a=!(p[g]||"").match(c)&&parseFloat(p[g])||p[g]||0,isNaN(r)!==isNaN(a))return isNaN(r)?1:-1;if(typeof r!=typeof a&&(r+="",a+=""),r<a)return-1;if(r>a)return 1}return 0}},7:function(e,t){},"7a9l":function(e,t,n){var r;!function(n){"use strict";var a=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},i=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},o=function(){throw SyntaxError("Invalid Param")};function s(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e/=2,t/=2,.5*Math.log(e*e+t*t)+Math.LN2)}function u(e,t){if(!(this instanceof u))return new u(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return u.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return u.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):o();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),a=1,i=0;null===r&&o();for(var s=0;s<r.length;s++){var c=r[s];" "===c||"\t"===c||"\n"===c||("+"===c?a++:"-"===c?i++:"i"===c||"I"===c?(a+i===0&&o()," "===r[s+1]||isNaN(r[s+1])?n.im+=parseFloat((i%2?"-":"")+"1"):(n.im+=parseFloat((i%2?"-":"")+r[s+1]),s++),a=i=0):((a+i===0||isNaN(c))&&o(),"i"===r[s+1]||"I"===r[s+1]?(n.im+=parseFloat((i%2?"-":"")+c),s++):n.re+=parseFloat((i%2?"-":"")+c),a=i=0))}a+i>0&&o();break;case"number":n.im=0,n.re=e;break;default:o()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}u.prototype={re:0,im:0,sign:function(){var e=this.abs();return new u(this.re/e,this.im/e)},add:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:0===n.im&&0===this.im?new u(this.re*n.re,0):new u(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new u(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return u.NAN;if(this.isInfinite()||n.isZero())return u.INFINITY;if(this.isZero()||n.isInfinite())return u.ZERO;e=this.re,t=this.im;var r,a,i=n.re,o=n.im;return 0===o?new u(e/i,t/i):Math.abs(i)<Math.abs(o)?new u((e*(a=i/o)+t)/(r=i*a+o),(t*a-e)/r):new u((e+t*(a=o/i))/(r=o*a+i),(t-e*a)/r)},pow:function(e,t){var n=new u(e,t);if(e=this.re,t=this.im,n.isZero())return u.ONE;if(0===n.im){if(0===t&&e>0)return new u(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new u(Math.pow(t,n.re),0);case 1:return new u(0,Math.pow(t,n.re));case 2:return new u(-Math.pow(t,n.re),0);case 3:return new u(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return u.ZERO;var r=Math.atan2(t,e),a=s(e,t);return e=Math.exp(n.re*a-n.im*r),t=n.im*a+n.re*r,new u(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,a=this.abs();if(n>=0){if(0===r)return new u(Math.sqrt(n),0);e=.5*Math.sqrt(2*(a+n))}else e=Math.abs(r)/Math.sqrt(2*(a-n));return t=n<=0?.5*Math.sqrt(2*(a-n)):Math.abs(r)/Math.sqrt(2*(a+n)),new u(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return new u(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new u(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new u(s(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new u(Math.sin(e)*a(t),Math.cos(e)*i(t))},cos:function(){var e=this.re,t=this.im;return new u(Math.cos(e)*a(t),-Math.sin(e)*i(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+a(t);return new u(Math.sin(e)/n,i(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-a(t);return new u(-Math.sin(e)/n,i(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*a(2*t)+.5*Math.cos(2*e);return new u(Math.cos(e)*a(t)/n,Math.sin(e)*i(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*a(2*t)-.5*Math.cos(2*e);return new u(Math.sin(e)*a(t)/n,-Math.cos(e)*i(t)/n)},asin:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new u(0,1/0);if(-1===t)return new u(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new u((1-t*t-e*e)/n,-2*e/n).log();return new u(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new u(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atan():new u(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acos():new u(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asin():new u(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new u(i(e)*Math.cos(t),a(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new u(a(e)*Math.cos(t),i(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=a(e)+Math.cos(t);return new u(i(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=a(e)-Math.cos(t);return new u(i(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-a(2*e);return new u(-2*i(e)*Math.cos(t)/n,2*a(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+a(2*e);return new u(2*a(e)*Math.cos(t)/n,-2*i(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,a=1+e,i=r*r+t*t,o=0!==i?new u((a*r-t*t)/i,(t*r+a*t)/i):new u(-1!==e?e/0:0,0!==t?t/0:0),c=o.re;return o.re=s(o.re,o.im)/2,o.im=Math.atan2(o.im,c)/2,n&&(o.im=-o.im),o},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atanh():new u(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new u(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asinh():new u(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return u.INFINITY;var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acosh():new u(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new u(e/n,-t/n)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new u(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new u(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new u(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new u(e,t);return Math.abs(n.re-this.re)<=u.EPSILON&&Math.abs(n.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<u.EPSILON&&(e=0),Math.abs(t)<u.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.re)||isNaN(this.im)})),isZero:function(){return 0===this.im&&0===this.re},isFinite:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.re)&&isFinite(this.im)})),isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-15,void 0===(r=(function(){return u}).apply(t,[]))||(e.exports=r)}()},8:function(e,t){},"9/Hw":function(e,t,n){var r;!function(a,i){var o,s=this,u=i.pow(256,6),c=i.pow(2,52),l=2*c;function h(e,t,n){var r=[],h=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(o){}return a.length?a:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,m(a)]}}():e,3),r),v=new f(r),g=function(){for(var e=v.g(6),t=u,n=0;e<c;)e=256*(e+n),t*=256,n=v.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(m(v.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&d(r,v),e.state=function(){return d(v,{})}),n?(i.random=e,t):e})(g,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,p(i.random(),a),e.exports){e.exports=h;try{o=n(3)}catch(v){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},"9YWz":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n=a[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=0==(n=s[127&i]^=r+(o=o+1640531527|0))?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,s[a]=(r^=r>>>15)^(n^=n>>>12);e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"9rSQ":function(e,t,n){"use strict";var r=n("xTJ+");function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},"9wtq":function wtq(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AUPredictor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BlendShapeKeys}));var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("qAop"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zhpf"),mathjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("eQl+"),bezier_easing__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("0Tit"),bezier_easing__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(bezier_easing__WEBPACK_IMPORTED_MODULE_4__),_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ws/Y"),_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__),a1_0x2c401b=a1_0x26cf;function a1_0x4794(){var e=["mouthLeft","_numTimes",'{"format": "layers-model", "generatedBy": "keras v2.6.0", "convertedBy": "TensorFlow.js Converter v3.11.0", "modelTopology": {"keras_version": "2.6.0", "backend": "tensorflow", "model_config": {"class_name": "Functional", "config": {"name": "model", "layers": [{"class_name": "InputLayer", "config": {"batch_input_shape": [null, 1160], "dtype": "float32", "sparse": false, "ragged": false, "name": "input_1"}, "name": "input_1", "inbound_nodes": []}, {"class_name": "Dense", "config": {"name": "dense", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense", "inbound_nodes": [[["input_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation", "inbound_nodes": [[["dense", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_1", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_1", "inbound_nodes": [[["activation", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization", "inbound_nodes": [[["dense_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_1", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_1", "inbound_nodes": [[["batch_normalization", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_2", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_2", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_1", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_1", "inbound_nodes": [[["dense_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_2", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_2", "inbound_nodes": [[["batch_normalization_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh1", "trainable": true, "dtype": "float32", "units": 56, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh1", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh1", "trainable": true, "dtype": "float32", "units": 192, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh1", "trainable": true, "dtype": "float32", "units": 170, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh1", "inbound_nodes": [[["activation_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_3", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_3", "inbound_nodes": [[["ameh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_6", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_6", "inbound_nodes": [[["bmeh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_9", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_9", "inbound_nodes": [[["dmeh1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_12", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_12", "inbound_nodes": [[["emeh1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh2", "trainable": true, "dtype": "float32", "units": 42, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh2", "inbound_nodes": [[["activation_3", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh2", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh2", "inbound_nodes": [[["activation_6", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh2", "trainable": true, "dtype": "float32", "units": 168, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh2", "inbound_nodes": [[["activation_9", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh2", "trainable": true, "dtype": "float32", "units": 136, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh2", "inbound_nodes": [[["activation_12", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "abatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "abatch_meh", "inbound_nodes": [[["ameh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "bbatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "bbatch_meh", "inbound_nodes": [[["bmeh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "dbatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "dbatch_meh", "inbound_nodes": [[["dmeh2", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "ebatch_meh", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "ebatch_meh", "inbound_nodes": [[["emeh2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_4", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_4", "inbound_nodes": [[["abatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_7", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_7", "inbound_nodes": [[["bbatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_10", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_10", "inbound_nodes": [[["dbatch_meh", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_13", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_13", "inbound_nodes": [[["ebatch_meh", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "ameh3", "trainable": true, "dtype": "float32", "units": 21, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "ameh3", "inbound_nodes": [[["activation_4", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "bmeh3", "trainable": true, "dtype": "float32", "units": 18, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "bmeh3", "inbound_nodes": [[["activation_7", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dmeh3", "trainable": true, "dtype": "float32", "units": 132, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dmeh3", "inbound_nodes": [[["activation_10", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "emeh3", "trainable": true, "dtype": "float32", "units": 85, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "emeh3", "inbound_nodes": [[["activation_13", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_2", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_2", "inbound_nodes": [[["ameh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_3", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_3", "inbound_nodes": [[["bmeh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_4", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_4", "inbound_nodes": [[["dmeh3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_5", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_5", "inbound_nodes": [[["emeh3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_5", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_5", "inbound_nodes": [[["batch_normalization_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_8", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_8", "inbound_nodes": [[["batch_normalization_3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_11", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_11", "inbound_nodes": [[["batch_normalization_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_14", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_14", "inbound_nodes": [[["batch_normalization_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "a", "trainable": true, "dtype": "float32", "units": 7, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "a", "inbound_nodes": [[["activation_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "b", "trainable": true, "dtype": "float32", "units": 6, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "b", "inbound_nodes": [[["activation_8", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "d", "trainable": true, "dtype": "float32", "units": 12, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "d", "inbound_nodes": [[["activation_11", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "e", "trainable": true, "dtype": "float32", "units": 17, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "e", "inbound_nodes": [[["activation_14", 0, 0, {}]]]}], "input_layers": [["input_1", 0, 0]], "output_layers": [["a", 0, 0], ["b", 0, 0], ["d", 0, 0], ["e", 0, 0]]}}, "training_config": {"loss": {"class_name": "MeanSquaredError", "config": {"reduction": "auto", "name": "mean_squared_error"}}, "metrics": [[{"class_name": "MeanSquaredError", "config": {"name": "a_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "a_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "b_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "b_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "d_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "d_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "e_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "e_mean_absolute_error", "dtype": "float32"}}]], "weighted_metrics": null, "loss_weights": null, "optimizer_config": {"class_name": "Adam", "config": {"name": "Adam", "learning_rate": 0.0010000000474974513, "decay": 0.0, "beta_1": 0.8999999761581421, "beta_2": 0.9990000128746033, "epsilon": 1e-07, "amsgrad": false}}}}, "weightsManifest": [{"paths": ["group1-shard1of1.bin"], "weights": [{"name": "a/kernel", "shape": [21, 7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.556572911038482, "scale": 1.7865215094000194e-05, "original_dtype": "float32"}}, {"name": "a/bias", "shape": [7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.10618831217288971, "scale": 2.0704332983829415e-06, "original_dtype": "float32"}}, {"name": "abatch_meh/gamma", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.5954435467720032, "scale": 2.906645263843008e-05, "original_dtype": "float32"}}, {"name": "abatch_meh/beta", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.398840860885023, "scale": 4.080394553657963e-05, "original_dtype": "float32"}}, {"name": "abatch_meh/moving_mean", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -45.36759420988479, "scale": 0.0011905317713250792, "original_dtype": "float32"}}, {"name": "abatch_meh/moving_variance", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 272.3578186035156, "scale": 0.053539502146843054, "original_dtype": "float32"}}, {"name": "ameh1/kernel", "shape": [256, 56], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.9669180374410358, "scale": 0.00011625349580755021, "original_dtype": "float32"}}, {"name": "ameh1/bias", "shape": [56], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.5168186292428578, "scale": 4.6718779968671507e-05, "original_dtype": "float32"}}, {"name": "ameh2/kernel", "shape": [56, 42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.3650252736223236, "scale": 6.791951045697492e-05, "original_dtype": "float32"}}, {"name": "ameh2/bias", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.574758284531623e-05, "scale": 2.3699896743890158e-09, "original_dtype": "float32"}}, {"name": "ameh3/kernel", "shape": [42, 21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.387673316711673, "scale": 9.804281297460923e-05, "original_dtype": "float32"}}, {"name": "ameh3/bias", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.000730973485926314, "scale": 2.9787020616394217e-08, "original_dtype": "float32"}}, {"name": "b/kernel", "shape": [18, 6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5878396282318283, "scale": 1.7015156542544527e-05, "original_dtype": "float32"}}, {"name": "b/bias", "shape": [6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06554881483316422, "scale": 3.028060452765455e-06, "original_dtype": "float32"}}, {"name": "batch_normalization/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0659782737493515, "scale": 3.963848691769902e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.737366672465154, "scale": 8.230024447491669e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -639.2119206451883, "scale": 0.019872285041509306, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 28617.220703125, "scale": 2.8634100278000307, "original_dtype": "float32"}}, {"name": "batch_normalization_1/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.7101871967315674, "scale": 2.3909925532266425e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.6198879090019047, "scale": 3.6647389462058384e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -13.417481649510417, "scale": 0.0004462824430237957, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 50.368892669677734, "scale": 0.00735016585105779, "original_dtype": "float32"}}, {"name": "batch_normalization_2/gamma", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.07954882830381393, "scale": 3.61600275842587e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/beta", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3633462526154292, "scale": 2.088299383649275e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_mean", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.555408387268909, "scale": 0.00014231088023768906, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_variance", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 2.9835925102233887, "scale": 0.002103711746191373, "original_dtype": "float32"}}, {"name": "batch_normalization_3/gamma", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.13704028725624084, "scale": 3.136768624467326e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/beta", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.197779997613962, "scale": 1.8280019498412214e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_mean", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.34296822306711, "scale": 8.450012108076716e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_variance", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1.8258646726608276, "scale": 0.0005250956852648708, "original_dtype": "float32"}}, {"name": "batch_normalization_4/gamma", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.018790236537950786, "scale": 3.486129227820183e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/beta", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.0121277259881456, "scale": 1.5666399287797316e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_mean", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -17.618480081107837, "scale": 0.00044627473039103924, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_variance", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 7.623943328857422, "scale": 0.07896514896070637, "original_dtype": "float32"}}, {"name": "batch_normalization_5/gamma", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0004157903604209423, "scale": 2.8974031282717733e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/beta", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.638156025870049, "scale": 2.5022240268070646e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_mean", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -16.018785895385943, "scale": 0.0003304545826794418, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_variance", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 5.026840686798096, "scale": 0.02218802065655397, "original_dtype": "float32"}}, {"name": "bbatch_meh/gamma", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.5382624864578247, "scale": 2.495532742697705e-05, "original_dtype": "float32"}}, {"name": "bbatch_meh/beta", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3300857264544277, "scale": 4.7896497171567435e-05, "original_dtype": "float32"}}, {"name": "bbatch_meh/moving_mean", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -41.23182957402499, "scale": 0.0010736337249772157, "original_dtype": "float32"}}, {"name": "bbatch_meh/moving_variance", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 288.2581481933594, "scale": 0.04803069069500673, "original_dtype": "float32"}}, {"name": "bmeh1/kernel", "shape": [256, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.037021392137733, "scale": 7.896982141915162e-05, "original_dtype": "float32"}}, {"name": "bmeh1/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.3618815611999877, "scale": 5.123322403129891e-05, "original_dtype": "float32"}}, {"name": "bmeh2/kernel", "shape": [48, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.2043543038892466, "scale": 8.140316796792111e-05, "original_dtype": "float32"}}, {"name": "bmeh2/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00010922925104205914, "scale": 5.599777045117355e-09, "original_dtype": "float32"}}, {"name": "bmeh3/kernel", "shape": [36, 18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.9007637238278763, "scale": 8.466117686007328e-05, "original_dtype": "float32"}}, {"name": "bmeh3/bias", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.001139454659517362, "scale": 2.9132376946727736e-08, "original_dtype": "float32"}}, {"name": "d/kernel", "shape": [132, 12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5991028362365703, "scale": 1.969890626497124e-05, "original_dtype": "float32"}}, {"name": "d/bias", "shape": [12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.09291373938322067, "scale": 3.661211894671195e-06, "original_dtype": "float32"}}, {"name": "dbatch_meh/gamma", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.9481399059295654, "scale": 3.6249010151980756e-05, "original_dtype": "float32"}}, {"name": "dbatch_meh/beta", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.7675781527363736, "scale": 4.439924022848895e-05, "original_dtype": "float32"}}, {"name": "dbatch_meh/moving_mean", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -93.1041650764091, "scale": 0.0026268703291597523, "original_dtype": "float32"}}, {"name": "dbatch_meh/moving_variance", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 416.5739440917969, "scale": 0.09431991524760744, "original_dtype": "float32"}}, {"name": "dense/kernel", "shape": [1160, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.302071191004524, "scale": 0.0001244848285831339, "original_dtype": "float32"}}, {"name": "dense/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.7899360630508045, "scale": 0.00017292907547785213, "original_dtype": "float32"}}, {"name": "dense_1/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.728972155174511, "scale": 0.00014147162937668684, "original_dtype": "float32"}}, {"name": "dense_1/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.659173342545318e-05, "scale": 8.986122406546762e-10, "original_dtype": "float32"}}, {"name": "dense_2/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.380055203386509, "scale": 0.00019140694282725572, "original_dtype": "float32"}}, {"name": "dense_2/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.0005605566668835558, "scale": 1.521102428317475e-08, "original_dtype": "float32"}}, {"name": "dmeh1/kernel", "shape": [256, 192], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.886825000451233, "scale": 9.821166869949547e-05, "original_dtype": "float32"}}, {"name": "dmeh1/bias", "shape": [192], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.4170925846814364, "scale": 6.929936594172529e-05, "original_dtype": "float32"}}, {"name": "dmeh2/kernel", "shape": [192, 168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.7923388286432544, "scale": 0.00012085690436141664, "original_dtype": "float32"}}, {"name": "dmeh2/bias", "shape": [168], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.53316866229146e-05, "scale": 1.3870111869447297e-09, "original_dtype": "float32"}}, {"name": "dmeh3/kernel", "shape": [168, 132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.241508069892966, "scale": 0.00013638040407704227, "original_dtype": "float32"}}, {"name": "dmeh3/bias", "shape": [132], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00012595775596559573, "scale": 3.5738779924411452e-09, "original_dtype": "float32"}}, {"name": "e/kernel", "shape": [85, 17], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.6249463344280604, "scale": 1.7811843311521986e-05, "original_dtype": "float32"}}, {"name": "e/bias", "shape": [17], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0452120378613472, "scale": 3.36981284915787e-06, "original_dtype": "float32"}}, {"name": "ebatch_meh/gamma", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.8508233428001404, "scale": 3.097433060523601e-05, "original_dtype": "float32"}}, {"name": "ebatch_meh/beta", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2.0944821072104975, "scale": 6.662474495691375e-05, "original_dtype": "float32"}}, {"name": "ebatch_meh/moving_mean", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -65.29840389119866, "scale": 0.001759448276646961, "original_dtype": "float32"}}, {"name": "ebatch_meh/moving_variance", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 323.66790771484375, "scale": 0.08672052419657673, "original_dtype": "float32"}}, {"name": "emeh1/kernel", "shape": [256, 170], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.5674398564197314, "scale": 0.00012560523401238403, "original_dtype": "float32"}}, {"name": "emeh1/bias", "shape": [170], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.893315350761073, "scale": 7.135969209863836e-05, "original_dtype": "float32"}}, {"name": "emeh2/kernel", "shape": [170, 136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.05371150677961, "scale": 0.00019732581729645896, "original_dtype": "float32"}}, {"name": "emeh2/bias", "shape": [136], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.348974392223888e-05, "scale": 9.267951825719906e-10, "original_dtype": "float32"}}, {"name": "emeh3/kernel", "shape": [136, 85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.8435495867867076, "scale": 0.00013598982471254477, "original_dtype": "float32"}}, {"name": "emeh3/bias", "shape": [85], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00011991454833326964, "scale": 3.425542716484878e-09, "original_dtype": "float32"}}]}]}',"lessThan","acquire","spki","domainReentrant","customModelMetaUrl","zzDecode","getPrototypeOf","fromPartial","You must pass a function to execute","invalid varint encoding","already ended","createPrediction","constructor","of type ",'"iat" claim must be a number',"tune","crit","7TEzjFv","rpcCall",'unexpected "typ" JWT header value',"startsWith","isArray","isBusy","image","all","setMinCutoff","oneOfGetter","close","encode",'"exp" claim must be a number',"splice","buf","atan2","encrypt","dcodeIO","jawLeft","RS256","eyeBlink_L","has","some","mouthStretch_R","_faceStats","predict","3514830fpamlm","zzEncode","setAlpha","ZERO","-Infinity","The input to be decoded is not correctly encoded.","call","Stream has no video tracks","utf8Slice","length","stopped","toNumber","type","rem_u","6056793inCjTa","key64Re","util","state","initialized","sub","iss","ES512","pop","Infinity","private","width","AUPredictor initialized.","requestVideoFrameCallback","dcutoff should be >0","tris","fromHash",'" MUST be integrity protected',"nbf","boolean","array","apply","-----BEGIN PUBLIC KEY-----","bezier_y1","copy","then","Key must be ","_configure","invalid","shl","double","equals","sint64",' instances for symmetric algorithms must be of type "secret"',"usages","Service","minCutoff","clearTimeout has not been defined","fromJSON",'" is missing',"8pvGoqb","algorithm.hash","readDoubleBE","initialize","now","join","fromValue","https://hallway-public.nyc3.cdn.digitaloceanspaces.com/webSDK/Mouth_Smile_Opene_uint16_bin_norm_dist7/","subarray","+Infinity",'"iat" claim timestamp check failed (it should be in the past)',"toInt","rpcImpl must be a function","ECDSA","ERR_JOSE_GENERIC","shouldMirrorOutput","data_means","mouthRollUpper","lastRawValue","eyeLookUp_R","gte","zeroHash","rpcImpl","HS384","transformX","rollFilter","resolve"," Received function ","clockTolerance","jawOpen","ERR_JWT_CLAIM_VALIDATION_FAILED","fromInt","JWT Claims Set must be a top-level JSON object","roll","MAX_VALUE","mouthFrown_R","requestFrameToken","getNumBitsAbs","blendShapeTune","shiftRight","lcFirst","long"," must be ","mouthLowerDown_L","getModel","setVideoFrameCallback","uint64","fromNumber","eyeLookUp_L","isObject","freeze","code","mouthPress_R","_Buffer_from","customModelUrl","tensor","jawForward","browser","dataSync","len","browDown_R","https://hallway.nyc3.cdn.digitaloceanspaces.com/face_mesh/0.4.1633559619/","divide","browInnerUp","abs","stack","PS384","base64","skip","mod","floor","writeDoubleLE","alloc","val","-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoqnt8ovlPhSlFr2pKTeod2hshZ1hIXJj1mWhPj4EG3piVhflM3rK1YYtWEeAubOqolzOeODTYDXVGxdjd64cIKcXpHfEj5G0RirjcUmUrcoIagQMsPaAV/GcJXX9VVbrpWQnI7Spj7WlcMPhyofj6JHf0kvKChZN4ZG/UQouy4AbIWOtu5lxIw307JSkF1boS902tAycgNoCnX6YLDOTWKPPihkBB/zhJqeaTQbSki9ADan/94uddSGXiEsqljynrc6oxCAN7oYxz2URgNkA0cP/3gAYyoABWioxw8IEeLrDVV0OYOH/ZKGfcaovWI2m6n0+J03bwh3cP8oN7/u9qQIDAQAB-----END PUBLIC KEY-----","signature","readFloatBE","check_failed","newError","error","getVideoTracks",'" is not recognized',"mouthSmile_R","JWS Payload must be a string or an Uint8Array instance","Long","_slice","ceil","throw","skipQueue","mouthLowerDown_R","isOdd","ERR_JWS_INVALID","Initializing AUPredictor...","done","yaw","modulo","interior hyphen","mouthFrown_L","inquire","CryptoKey does not support this operation, its ","BufferWriter"," requires key modulusLength to be 2048 bits or larger","endsWith","isEven","set","toSigned","toLowerCase","comp","mouthStretch_L","Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, ","int64","blendShapes","max","sign","lastUpdateTime","one of type ","shru","push","CryptoKey does not support this operation, its usages must include ","iat","numTimes","seconds","getTracks","easingCurves","longFromHash","sorted","alpha","\0\0\0\0\0\0\0\0","exp","373667UJHCOK","_getScalerTriFeatureVectorDot","predictor-lock","use a NodeJS version that still implements Domain, or install a browser polyfill.","_lastUpdateTime"," at offset ","minute","jawRight","ldelim","P-256","mouthClose","subtle","toLong","mouthDimple_L","newBuffer","Tensor","writeFloatBE","forEach","build","transformZ","Ed448","Invalid time period format","eyeLookOut_R","pos","utf8","sint32","greaterThan","uint32","_dataStream","endScope","_listeners","HS256","one of ","fork","eyeLookOut_L","browOuterUp_L","getLowBitsUnsigned","head",' instances for asymmetric algorithm encryption must be of type "public"',"mouthUpperUp_R","division by zero","dir","DEFAULT_MAX_PENDING","NODE-ED448","states","lasttime","public","diffAmp","ECDH-ES+A128KW","isNegative","CryptoKey","urn:hallway:issuer","reduce","domains","negate","toUpperCase","weightSpecs","div","encodeDelimited","emit",'{"browDown_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browDown_R":{"fps":30,"minCutoff":0.001,"beta":10,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browInnerUp":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeBlink_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeBlink_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeLookDown_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookDown_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawOpen":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.030685920577617327,"bezier_y1":0.0040000000000000036,"bezier_x2":1,"bezier_y2":1},"mouthClose":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.023465703971119134,"bezier_y1":0.03200000000000003,"bezier_x2":1,"bezier_y2":1},"mouthFunnel":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPucker":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLeft":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRight":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawLeft":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawRight":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"noseSneer_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"noseSneer_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"tune_points":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1}}',"actionUnitModel","isBuffer","transform","claim","ONE","beta_","RSA-OAEP",'unexpected "sub" claim value',"isInteger",'Flattened JWS must have either of the "protected" or "header" members',"RS384","faceMeshResultsCallback","init","_acquireBatch","resultsCallback","__esModule","entries","unsigned","start","isSet","charCodeAt","startScope","value","name","read","Promise","900788OFFnrj","filter","map","unprotectedHeader","greaterThanOrEqual","startTime","neg","data_std","number","updateInterval","utf8Write","fromBits","writeDoubleBE","_tune",'{"tris": [[[7, 8, 9, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 35, 46, 52, 53, 55, 56, 63, 65, 66, 68, 69, 70, 71, 104, 105, 107, 108, 110, 111, 112, 113, 117, 118, 119, 120, 121, 124, 128, 130, 133, 139, 143, 144, 145, 151, 153, 154, 155, 156, 157, 158, 159, 160, 161, 163, 168, 173, 189, 190, 193, 221, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 243, 244, 245, 246, 247, 468, 469, 470, 471, 472], [60, 51, 43, 79, 13, 0, 38, 39, 73, 74, 73, 39, 39, 41, 74, 75, 74, 41, 50, 51, 53, 60, 53, 51, 2, 48, 29, 30, 29, 48, 36, 37, 71, 72, 71, 37, 10, 11, 56, 57, 56, 11, 19, 53, 62, 60, 62, 53, 5, 4, 46, 47, 46, 4, 63, 61, 78, 77, 78, 61, 8, 55, 9, 54, 9, 55, 11, 80, 57, 79, 57, 80, 18, 63, 1, 59, 1, 63, 32, 35, 12, 70, 12, 35, 18, 64, 63, 61, 63, 64, 50, 7, 51, 33, 51, 7, 66, 16, 67, 17, 67, 16, 37, 38, 72, 73, 72, 38, 80, 34, 42, 69, 42, 34, 16, 28, 17, 20, 17, 28, 15, 25, 40, 52, 40, 25, 17, 20, 15, 25, 15, 20, 49, 3, 50, 7, 50, 3, 9, 54, 19, 53, 19, 54, 34, 40, 69, 14, 69, 40, 8, 10, 55, 56, 55, 10, 68, 15, 34, 40, 34, 15, 22, 24, 28, 27, 28, 24, 18, 29, 21, 22, 21, 29, 28, 27, 20, 23, 20, 27, 1, 2, 18, 29, 18, 2, 3, 49, 4, 47, 4, 49, 67, 17, 68, 15, 68, 17, 5, 46, 31, 58, 31, 46, 21, 22, 16, 28, 16, 22, 35, 36, 70, 71, 70, 36, 29, 30, 22, 24, 22, 30, 14, 45, 32, 57, 79, 58, 0, 58, 79, 21, 16, 65, 66, 65, 16, 21, 65, 18, 64, 18, 65, 42, 6, 13, 0, 13, 6, 25, 26, 52, 44, 52, 26, 79, 80, 13, 42, 13, 80, 47, 49, 55, 54, 55, 49, 56, 57, 46, 58, 46, 57, 55, 56, 47, 46, 47, 56, 20, 23, 25, 26, 25, 23, 32, 12, 14, 69, 14, 12, 49, 50, 54, 53, 54, 50, 51, 33, 43, 76, 43, 33, 62, 60, 76, 43, 76, 60, 52, 44, 45, 70, 71, 31, 5, 31, 71, 12, 6, 69, 42, 69, 6, 71, 72, 5, 4, 5, 72, 72, 73, 4, 3, 4, 73, 73, 74, 3, 7, 3, 74, 7, 74, 33, 75, 33, 74, 61, 62, 77, 76, 77, 62, 64, 19, 61, 62, 61, 19, 64, 65, 19, 9, 19, 65, 65, 66, 9, 8, 9, 66, 67, 10, 66, 8, 66, 10, 10, 67, 11, 68, 11, 67, 11, 68, 80, 34, 80, 68, 33, 75, 76, 77, 76, 75, 75, 41, 77, 78, 77, 41, 40, 52, 14, 45, 14, 52, 6, 31, 0, 58, 0, 31, 12, 70, 6, 31, 6, 70, 85, 13, 83, 83, 43, 85, 84, 55, 82, 82, 47, 84]], [[8, 9, 151, 168, 249, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 263, 265, 276, 282, 283, 285, 286, 293, 295, 296, 298, 299, 300, 301, 333, 334, 336, 337, 339, 340, 341, 342, 346, 347, 348, 349, 350, 353, 357, 359, 362, 368, 372, 373, 374, 380, 381, 382, 383, 384, 385, 386, 387, 388, 390, 398, 413, 414, 417, 441, 442, 443, 444, 445, 446, 448, 449, 450, 451, 452, 453, 463, 464, 465, 466, 467, 473, 474, 475, 476, 477], [52, 60, 45, 15, 79, 4, 40, 73, 41, 74, 41, 73, 41, 74, 43, 75, 43, 74, 51, 54, 52, 60, 52, 54, 1, 31, 2, 32, 2, 31, 38, 71, 39, 72, 39, 71, 12, 57, 13, 58, 13, 57, 21, 62, 54, 60, 54, 62, 7, 48, 6, 49, 6, 48, 63, 78, 61, 77, 61, 78, 10, 11, 56, 55, 56, 11, 13, 58, 80, 79, 80, 58, 20, 0, 63, 3, 63, 0, 34, 14, 37, 70, 37, 14, 20, 63, 64, 61, 64, 63, 51, 52, 9, 35, 9, 52, 66, 67, 18, 19, 18, 67, 39, 72, 40, 73, 40, 72, 80, 44, 36, 69, 36, 44, 18, 19, 30, 22, 30, 19, 17, 42, 27, 53, 27, 42, 19, 17, 22, 27, 22, 17, 50, 51, 5, 9, 5, 51, 11, 21, 55, 54, 55, 21, 36, 69, 42, 16, 42, 69, 10, 56, 12, 57, 12, 56, 68, 36, 17, 42, 17, 36, 24, 30, 26, 29, 26, 30, 20, 23, 31, 24, 31, 23, 30, 22, 29, 25, 29, 22, 0, 20, 1, 31, 1, 20, 5, 6, 50, 49, 50, 6, 67, 68, 19, 17, 19, 68, 7, 33, 48, 59, 48, 33, 23, 18, 24, 30, 24, 18, 37, 70, 38, 71, 38, 70, 31, 24, 32, 26, 32, 24, 16, 34, 47, 58, 59, 79, 4, 79, 59, 23, 65, 18, 66, 18, 65, 23, 20, 65, 64, 65, 20, 44, 15, 8, 4, 8, 15, 27, 53, 28, 46, 28, 53, 79, 15, 80, 44, 80, 15, 49, 56, 50, 55, 50, 56, 57, 48, 58, 59, 58, 48, 56, 49, 57, 48, 57, 49, 22, 27, 25, 28, 25, 27, 34, 16, 14, 69, 14, 16, 50, 55, 51, 54, 51, 55, 52, 45, 35, 76, 35, 45, 62, 76, 60, 45, 60, 76, 53, 47, 46, 70, 33, 71, 7, 71, 33, 14, 69, 8, 44, 8, 69, 71, 7, 72, 6, 72, 7, 72, 6, 73, 5, 73, 6, 73, 5, 74, 9, 74, 5, 9, 35, 74, 75, 74, 35, 61, 77, 62, 76, 62, 77, 64, 61, 21, 62, 21, 61, 64, 21, 65, 11, 65, 21, 65, 11, 66, 10, 66, 11, 67, 66, 12, 10, 12, 66, 12, 13, 67, 68, 67, 13, 13, 80, 68, 36, 68, 80, 35, 76, 75, 77, 75, 76, 75, 77, 43, 78, 43, 77, 42, 16, 53, 47, 53, 16, 8, 4, 33, 59, 33, 4, 14, 8, 70, 33, 70, 8, 85, 45, 83, 85, 15, 83, 84, 56, 82, 82, 49, 84]], [[0, 2, 11, 12, 13, 14, 15, 16, 17, 18, 37, 38, 39, 40, 41, 42, 43, 57, 61, 62, 72, 73, 74, 76, 77, 78, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 95, 96, 97, 98, 106, 146, 164, 165, 167, 178, 179, 180, 181, 182, 183, 184, 185, 186, 191, 194, 200, 201, 202, 203, 204, 206, 207, 210, 212, 214, 216, 267, 268, 269, 270, 271, 272, 273, 287, 291, 292, 302, 303, 304, 306, 307, 308, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 335, 375, 391, 393, 402, 403, 404, 405, 406, 407, 408, 409, 410, 415, 418, 421, 422, 423, 424, 426, 427, 430, 432, 434, 436], [85, 116, 99, 25, 39, 57, 70, 0, 80, 10, 20, 0, 2, 80, 0, 2, 0, 20, 70, 80, 72, 10, 12, 20, 81, 72, 80, 21, 20, 12, 72, 81, 73, 12, 13, 21, 82, 73, 81, 22, 21, 13, 82, 113, 73, 22, 13, 54, 114, 73, 113, 55, 54, 13, 75, 86, 112, 15, 53, 26, 116, 112, 86, 57, 26, 53, 98, 73, 115, 38, 56, 13, 114, 115, 73, 55, 13, 56, 126, 125, 124, 68, 66, 67, 119, 124, 125, 61, 67, 66, 89, 90, 9, 29, 9, 30, 8, 9, 90, 8, 30, 9, 84, 104, 83, 24, 23, 44, 78, 83, 104, 18, 44, 23, 117, 121, 111, 58, 52, 63, 103, 111, 121, 43, 63, 52, 105, 120, 102, 46, 42, 62, 96, 97, 84, 36, 24, 37, 104, 84, 97, 44, 37, 24, 118, 89, 59, 60, 59, 29, 9, 59, 89, 9, 29, 59, 103, 97, 111, 43, 52, 37, 110, 111, 97, 51, 37, 52, 110, 97, 109, 51, 50, 37, 96, 109, 97, 36, 37, 50, 8, 90, 7, 8, 7, 30, 91, 7, 90, 31, 30, 7, 105, 72, 98, 46, 38, 12, 73, 98, 72, 13, 12, 38, 103, 76, 97, 43, 37, 16, 104, 97, 76, 44, 16, 37, 100, 79, 99, 40, 39, 19, 85, 99, 79, 25, 19, 39, 127, 123, 122, 69, 64, 65, 105, 106, 72, 46, 12, 47, 70, 72, 106, 10, 47, 12, 119, 125, 76, 61, 16, 67, 77, 76, 125, 17, 67, 16, 121, 119, 103, 63, 43, 61, 76, 103, 119, 16, 61, 43, 83, 79, 84, 23, 24, 19, 100, 84, 79, 40, 19, 24, 80, 71, 81, 20, 21, 11, 74, 81, 71, 14, 11, 21, 81, 74, 82, 21, 22, 14, 75, 82, 74, 15, 14, 22, 123, 127, 126, 65, 68, 69, 125, 126, 127, 67, 69, 68, 82, 75, 113, 22, 54, 15, 112, 113, 75, 53, 15, 54, 95, 96, 100, 35, 40, 36, 84, 100, 96, 24, 36, 40, 109, 96, 108, 50, 49, 36, 95, 108, 96, 35, 36, 49, 7, 91, 6, 7, 6, 31, 92, 6, 91, 32, 31, 6, 6, 92, 5, 6, 5, 32, 93, 5, 92, 33, 32, 5, 107, 108, 94, 48, 34, 49, 95, 94, 108, 35, 49, 34, 99, 94, 100, 39, 40, 34, 95, 100, 94, 35, 34, 40, 74, 87, 75, 14, 15, 27, 86, 75, 87, 26, 27, 15, 76, 77, 104, 16, 44, 17, 78, 104, 77, 18, 17, 44, 71, 88, 74, 11, 14, 28, 87, 74, 88, 27, 28, 14, 112, 116, 79, 53, 19, 57, 85, 79, 116, 25, 57, 19, 122, 98, 127, 64, 69, 38, 115, 127, 98, 56, 38, 69, 106, 101, 45, 47, 45, 41, 1, 45, 101, 1, 41, 45, 0, 70, 45, 0, 45, 10, 106, 45, 70, 47, 10, 45, 2, 3, 80, 2, 20, 3, 71, 80, 3, 11, 3, 20, 3, 4, 71, 3, 11, 4, 88, 71, 4, 28, 4, 11, 120, 105, 122, 62, 64, 46, 98, 122, 105, 38, 46, 64, 105, 102, 106, 46, 47, 42, 101, 106, 102, 41, 42, 47, 92, 108, 93, 32, 33, 49, 107, 93, 108, 48, 49, 33, 91, 109, 92, 31, 32, 50, 108, 92, 109, 49, 50, 32, 90, 110, 91, 30, 31, 51, 109, 91, 110, 50, 51, 31, 89, 111, 90, 29, 30, 52, 110, 90, 111, 51, 52, 30, 117, 111, 118, 58, 60, 52, 89, 118, 111, 29, 52, 60, 113, 112, 83, 54, 23, 53, 79, 83, 112, 19, 53, 23, 113, 83, 114, 54, 55, 23, 78, 114, 83, 18, 23, 55, 115, 114, 77, 56, 17, 55, 78, 77, 114, 18, 55, 17, 127, 115, 125, 69, 67, 56, 77, 125, 115, 17, 56, 67, 5, 93, 4, 5, 4, 33, 88, 4, 93, 28, 33, 4, 93, 107, 88, 33, 28, 48, 87, 88, 107, 27, 48, 28, 107, 94, 87, 48, 27, 34, 86, 87, 94, 26, 34, 27, 94, 99, 86, 34, 26, 39, 116, 86, 99, 57, 39, 26]], [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477], [0, 1, 36, 0, 36, 17, 1, 2, 41, 1, 41, 36, 2, 3, 31, 2, 31, 41, 3, 4, 48, 3, 48, 31, 4, 5, 48, 5, 6, 48, 6, 7, 59, 6, 59, 48, 7, 8, 58, 7, 58, 59, 8, 9, 56, 8, 56, 57, 8, 57, 58, 9, 10, 55, 9, 55, 56, 10, 11, 54, 10, 54, 55, 11, 12, 54, 12, 13, 54, 13, 14, 35, 13, 35, 54, 14, 15, 46, 14, 46, 35, 15, 16, 45, 15, 45, 46, 16, 26, 45, 17, 36, 18, 18, 37, 19, 18, 36, 37, 19, 38, 20, 19, 37, 38, 20, 39, 21, 20, 38, 39, 21, 39, 27, 22, 42, 23, 22, 27, 42, 23, 43, 24, 23, 42, 43, 24, 44, 25, 24, 43, 44, 25, 45, 26, 25, 44, 45, 27, 39, 28, 27, 28, 42, 28, 39, 29, 28, 29, 42, 29, 31, 30, 29, 30, 35, 29, 40, 31, 29, 35, 47, 29, 39, 40, 29, 47, 42, 30, 31, 32, 30, 32, 33, 30, 33, 34, 30, 34, 35, 31, 50, 32, 31, 40, 41, 31, 48, 49, 31, 49, 50, 32, 51, 33, 32, 50, 51, 33, 51, 34, 34, 52, 35, 34, 51, 52, 35, 46, 47, 35, 52, 53, 35, 53, 54, 36, 41, 37, 37, 40, 38, 37, 41, 40, 38, 40, 39, 42, 47, 43, 43, 47, 44, 44, 46, 45, 44, 47, 46, 48, 60, 49, 48, 59, 60, 49, 61, 50, 49, 60, 61, 50, 62, 51, 50, 61, 62, 51, 62, 52, 52, 63, 53, 52, 62, 63, 53, 64, 54, 53, 63, 64, 54, 64, 55, 55, 65, 56, 55, 64, 65, 56, 66, 57, 56, 65, 66, 57, 66, 58, 58, 67, 59, 58, 66, 67, 59, 67, 60, 60, 67, 61, 61, 66, 62, 61, 67, 66, 62, 66, 63, 63, 65, 64, 63, 66, 65, 21, 27, 22, 472, 33, 470, 470, 133, 472, 471, 159, 469, 469, 145, 471, 477, 362, 475, 477, 263, 475, 476, 386, 474, 474, 374, 476]]], "label_keys": [["browDown_L", "cheekSquint_L", "browOuterUp_L", "browDown_R", "browOuterUp_R", "cheekSquint_R", "browInnerUp"], ["eyeBlink_L", "eyeBlink_R", "eyeSquint_L", "eyeSquint_R", "eyeWide_L", "eyeWide_R"], ["eyeLookDown_L", "eyeLookDown_R", "eyeLookIn_L", "eyeLookIn_R", "eyeLookOut_L", "eyeLookOut_R", "eyeLookUp_L", "eyeLookUp_R"], ["jawOpen", "jawLeft", "jawRight", "mouthClose", "mouthFunnel", "mouthPucker", "mouthRollLower", "mouthRollUpper", "mouthShrugLower", "mouthShrugUpper", "noseSneer_L", "noseSneer_R"], ["mouthLeft", "mouthRight", "mouthSmile_L", "mouthSmile_R", "mouthFrown_L", "mouthFrown_R", "mouthDimple_L", "mouthDimple_R", "mouthStretch_L", "mouthStretch_R", "mouthPress_L", "mouthPress_R", "mouthLowerDown_L", "mouthLowerDown_R", "mouthUpperUp_L", "mouthUpperUp_R"]], "type": "multi_spur_dot", "data_min": [-0.0017550074262544513, -0.0015888019697740674, -0.0017187476623803377, -0.0027021938003599644, -0.00840499997138977, -0.012177195399999619, -0.006785913370549679, -0.011435691267251968, -0.009481549263000488, -0.011232671327888966, -0.005913160741329193, -0.006541644688695669, -0.004088891204446554, -0.0028658448718488216, 0.0008937628008425236, -0.0014253321569412947, -0.003379533998668194, -0.05247845500707626, -0.03722202777862549, -0.01632705330848694, -0.015382098965346813, -0.02333829551935196, -0.0063448259606957436, -0.006486705970019102, -0.026732610538601875, -0.002594631165266037, -0.0024819879326969385, -0.0011332901194691658, -0.014717886224389076, -0.020526109263300896, 0.0009483033209107816, -6.562717317137867e-05, 0.003971200902014971, -0.0025534299202263355, 0.005063787568360567, 8.11954087112099e-05, -0.013988249003887177, -0.006610263604670763, -0.0003309780149720609, 0.00545515026897192, -0.004532479215413332, -0.0015585519140586257, 0.002584811532869935, 0.002811002777889371, -0.020826643332839012, -0.0017957848031073809, -0.0023131167981773615, 0.0008118495461530983, -0.18270130455493927, -0.02499575726687908, -0.031774282455444336, 0.0010722535662353039, -0.0051225703209638596, -0.005623739678412676, -0.009153920225799084, 0.008124765940010548, -0.04908079281449318, -0.006196742877364159, -0.005988628137856722, 0.006428960710763931, 0.0003101342299487442, -0.00232656835578382, -0.001176844467408955, -0.00084810791304335, -0.006075503770262003, -0.02473851852118969, -0.015873298048973083, -0.01800304837524891, -0.008554470725357533, -0.02030240371823311, -0.004769818391650915, -0.013027854263782501, -0.005569886416196823, -0.002855725586414337, -0.02324126660823822, -0.0011017153738066554, -0.01515586581081152, -0.007202725391834974, -0.021577106788754463, -0.0047977459616959095, -0.015712302178144455, 0.0018171507399529219, -0.04218415543437004, 0.003599596442654729, -0.008515105582773685, 0.003922000527381897, -0.03360369801521301, 0.004381608683615923, -0.0012833441141992807, -0.0011298761237412691, -0.0034428401850163937, -0.0007926009711809456, -0.007261634338647127, -0.025431213900446892, -0.0021018001716583967, 0.0012902612797915936, -0.00821943674236536, 0.0015087845968082547, -0.03998952358961105, 0.003925271797925234, -0.00425840076059103, -0.004315055441111326, -0.0050179981626570225, -0.0028619857039302588, -0.004568891599774361, -0.0025188063737004995, -0.018748672679066658, 0.0018272872548550367, -0.03501500189304352, -0.060936089605093, -0.06657426059246063, -0.07045453786849976, -0.05476086586713791, 0.013215681537985802, -0.033690210431814194, 0.028368977829813957, -0.03590276837348938, -0.06219175085425377, -0.05718810483813286, -0.09179447591304779, -0.049490347504615784, 0.003276834264397621, -0.2224636822938919, 0.005630712490528822, -0.004936552606523037, 0.0021044814493507147, -0.0023064170964062214, 0.000921845727134496, -0.0016314919339492917, -0.0032274883706122637, -0.014002657495439053, 0.0007550256559625268, -0.004097432363778353, -0.004856402985751629, -0.0015870482893660665, -0.0033077180851250887, -0.016597673296928406, 0.005158626474440098, -0.03445936739444733, 0.00545958336442709, -0.022790541872382164, -0.011063412763178349, -0.01793551817536354, -0.00035710117663256824, -0.03299255669116974, -0.05196274071931839, -0.049705177545547485, -0.06774846464395523, -0.01917189545929432, 0.004815578460693359, -0.012143676169216633, -0.0023987065069377422, 0.0005946963792666793, -0.001411741366609931, 7.520611688960344e-05, -0.013843615539371967, 0.014278718270361423, 0.001808188739232719, -0.06429895013570786, -0.003280320903286338, -0.022841110825538635, -0.017019130289554596, 0.00048229319509118795, -0.00966423936188221, -0.004826822783797979, -0.0011247374350205064, -0.041764434427022934, -0.10759850591421127, -0.04113900661468506, -0.12872539460659027, -0.002331000519916415, -0.007355756126344204, -0.007285710424184799, 9.530829265713692e-05, 0.001222519320435822, -0.005669853650033474, 0.0021250322461128235, -0.004807861056178808, -0.01985650695860386, -0.00402058707550168, 0.0022181477397680283, -0.00294042332097888, 0.0011985059827566147, -0.005299006123095751, 0.004811618942767382, -0.005190132185816765, -0.04117422178387642, -0.09933539479970932, -0.062477342784404755, -0.13131371140480042, -0.028346074745059013, -0.004036494065076113, -0.007280837744474411, -0.00048430555034428835, -0.005807450041174889, -0.0051109096966683865, 0.002538948552682996, -0.004422084894031286, -3.6005385481985286e-05, -0.0023883762769401073, -0.004277486819773912, -0.0021956029813736677, -0.005624614655971527, -0.0037700277753174305, 0.0009276365162804723, 0.0012946042697876692, -0.00729520944878459, -0.0934818908572197, -0.013185937888920307, -0.006523772142827511, -0.01293903961777687, -0.002899773186072707, -0.012736348435282707, -0.013921556994318962, -0.0031980155035853386, -0.00262717017903924, -0.013627937063574791, -0.013069857843220234, -0.010410521179437637, -0.00437180744484067, -0.008226401172578335, -0.011711595579981804, -0.003236369928345084, -0.002269494580104947, -0.005061361473053694, -0.009619944728910923, -0.004189006984233856, -0.00493813119828701, 0.001313506276346743, -0.0005794925382360816, -0.0007508127600885928, -0.00255648628808558, -0.008849035948514938, 0.0015626826789230108, 0.002015381818637252, 0.003440193133428693, -0.0169757679104805, 0.008412284776568413, -0.0024139813613146544, 0.007210076320916414, 0.004792986903339624, -0.024742357432842255, 0.0032899959478527308, -0.0026013581082224846, 0.011801465414464474, -0.009576565586030483, 0.010437027551233768, -0.002092166803777218, -0.011856031604111195, -0.009130856953561306, -0.005431095138192177, -0.009956598281860352, -0.0008372836746275425, -0.0015743045369163156, -0.006356232333928347, -0.002174090128391981, -0.0005838467041030526, -0.0015569630777463317, -0.01587550714612007, 0.0004350940871518105, 0.0016732083167880774, -0.0030427975580096245, -0.0050909495912492275, -0.004462432581931353, -0.0017954494105651975, 0.002329146256670356, -0.0049954853020608425, 0.0029943769332021475, -0.023720422759652138, 0.010021002031862736, -0.04896392300724983, 0.00955036748200655, -0.003149070544168353, -0.003595980117097497, -0.0044156694784760475, -0.00015828415052965283, -0.007738469168543816, -0.0006288129952736199, -0.007669622078537941, 0.0032958819065243006, -0.015032083727419376, -0.06351669132709503, -0.032248154282569885, -0.18025453388690948, -0.06163984164595604, -0.09758920222520828, -0.05956967547535896, -0.15200407803058624, -0.001096255611628294, -0.00139527244027704, -0.0028954821173101664, -0.002875474514439702, -0.011264363303780556, -0.014317790977656841, -0.010434065014123917, -0.01481181662529707, -0.011153372935950756, -0.007928225211799145, -0.005756193306297064, -0.006947657559067011, -0.0035682523157447577, -0.00456055486574769, -0.0018615118460729718, 0.0007266966858878732, -0.061812303960323334, -0.007415087893605232, -0.08674275130033493, -0.04630497470498085, -0.02018740214407444, -0.02930389530956745, -0.0054146163165569305, -0.019008932635188103, -0.001769978436641395, -0.030524788424372673, -0.00014460454985965043, -0.005722136236727238, -0.019330516457557678, -0.013080030679702759, -0.0005406397976912558, 0.0006768343737348914, -0.003592651104554534, -0.00011539365368662402, -0.0007877812604419887, 0.001867897342890501, -0.004998684860765934, -0.018355347216129303, 0.0033769430592656136, -0.002138799522072077, 0.005226228851824999, -0.0060445996932685375, 0.00563605735078454, 0.0006765238358639181, -0.004361319821327925, -0.025803610682487488, 0.000510705285705626, -0.0015869643539190292, -0.03488793224096298, -0.17181245982646942, -0.005682847928255796, -0.03906115144491196, -0.0038437219336628914, -0.0062820790335536, 0.0022861266043037176, -0.004289176315069199, -0.007193434052169323, -0.036163829267024994, -0.003429545322433114, -0.006793618202209473, -0.0032077347859740257, 0.00011159323912579566, -0.0019818281289190054, -0.001566017046570778, -0.004464716650545597, -0.006538650020956993, 0.001966161886230111, -0.017514653503894806, -0.015502318739891052, -0.02005508542060852, -0.00971568189561367, -0.01379891112446785, -0.002751927822828293, -0.007097617257386446, -0.0010141932871192694, -0.022898994386196136, 0.011320621706545353, -0.01667596586048603, 0.013757219538092613, -0.023103035986423492, -0.002773732878267765, -0.011905886232852936, -0.0027192996349185705, -0.03863510489463806, 0.0026216416154056787, -0.010501322336494923, 0.003675147658213973, -0.036132875829935074, 0.0014550071209669113, -0.0018736012279987335, 0.0019570349249988794, -0.004570788703858852, -0.024695543572306633, -0.0070677087642252445, 0.0015389658510684967, -0.0015470845391973853, -0.0017567910254001617, -0.01030063722282648, -0.0004982421523891389, -0.03609298914670944, -0.002823418006300926, -0.010021904483437538, -0.000822446309030056, -0.008871868252754211, -0.004276425112038851, -0.0027345081325620413, -0.00210174429230392, -0.03211423382163048, -0.1239132508635521, -0.03809807822108269, -0.22577586770057678, -0.06880004703998566, 0.006170286331325769, -0.046202756464481354, 0.01874195598065853, -0.031128570437431335, -0.14452524483203888, -0.03727085888385773, -0.19164685904979706, -0.05660000815987587, -0.005821654573082924, -0.07455462217330933, -0.012828732840716839, -0.17196810245513916, 0.006120102945715189, -0.005307846236974001, 0.0050476123578846455, -0.0035822747740894556, -0.004437021445482969, -0.004186282865703106, -0.001121386419981718, -0.013540775515139103, -0.0007832555565983057, -0.004128068685531616, -0.002604132052510977, -0.0006470903754234314, 0.00934524368494749, -0.020768797025084496, 0.02071642130613327, -0.036626044660806656, -0.015338278375566006, -0.018702659755945206, -0.0023613718803972006, -0.014420952647924423, -0.09450634568929672, -0.041014645248651505, -0.15458405017852783, -0.04692044109106064, 0.0024283176753669977, -0.020913168787956238, -0.0030568446964025497, -0.011409053578972816, -0.0018502924358472228, -8.079489634837955e-05, -0.01686715893447399, -0.004737157374620438, 0.007374128792434931, 0.015073728747665882, -0.021714771166443825, -0.04924936220049858, -0.028673412278294563, 0.0005148854106664658, -0.010022389702498913, 0.0009542204206809402, -0.0022619464434683323, -0.004738507326692343, -0.20920825004577637, -0.053124573081731796, -0.1343402862548828, -0.04354647919535637, -0.009980801492929459, -0.0014624247560277581, 0.00033216102747246623, -0.00853058136999607, -0.007161133456975222, 0.0016002418706193566, -0.00674074562266469, 0.004149973392486572, -0.0049417936243116856, -0.01840830408036709, -0.003805524669587612, 0.0006072089308872819, -0.0068114749155938625, 0.002082789782434702, -0.007076718844473362, 0.004669892136007547, -0.15106898546218872, -0.04195433109998703, -0.19100460410118103, -0.06171984225511551, -0.0033198946621268988, -0.024084772914648056, -0.0021770154125988483, -0.010920047760009766, -0.00709277531132102, -0.003812472801655531, -0.005868278909474611, 0.0023881052620708942, -0.0023940149694681168, -5.4608844948234037e-05, -0.001964323688298464, -0.003951669670641422, -0.003661360824480653, -0.004194484557956457, 0.0006211569416336715, -0.0007705226889811456, -0.14360688626766205, -0.006210861727595329, -0.007739512249827385, -0.008927994407713413, -0.003718102350831032, -0.0090349605306983, -0.01290854997932911, -0.004998357966542244, -0.004569604992866516, -0.0022221889812499285, -0.011524578556418419, -0.0159295666962862, -0.0012933453544974327, -0.011573835276067257, -0.011216502636671066, -0.012415648438036442, -0.0023467191495001316, -0.0053845904767513275, -0.006211387924849987, -0.007682466879487038, -0.0036011007614433765, -0.004763314966112375, -0.0021101797465234995, 0.0010817794827744365, -0.005372007843106985, -0.0014367243275046349, 0.001060896785929799, -0.0074447025544941425, 0.0025269915349781513, 0.0007522053783759475, 0.004856477957218885, -0.007255106698721647, 0.0055701700039207935, -0.0031268696766346693, -0.023120691999793053, 0.006284522358328104, -0.0017701038159430027, 0.0038350927643477917, -0.008014312945306301, 0.009922790341079235, -0.0014460731763392687, 0.008490183390676975, 0.0021334330085664988, -0.009615948423743248, 0.0011934987269341946, -0.004463811870664358, 0.0006682063103653491, -0.002030304167419672, 0.0012410152703523636, -0.005908595863729715, -0.0028675224166363478, 0.00019662964041344821, -0.0004395789874251932, -0.022811641916632652, -0.002813180675730109, 0.0007484991801902652, -0.0050108544528484344, -0.006222299300134182, 0.00028754191589541733, -0.003109501674771309, -0.0002497186360415071, -0.008227615617215633, 0.0012362507404759526, -0.01818208023905754, -0.0004104207328055054, -0.047850366681814194, -0.004527592565864325, -0.0020121841225773096, 2.5093655494856648e-05, -0.00423873495310545, -0.0010890704579651356, -0.004439406096935272, 0.0007468892727047205, -0.005535487551242113, -0.029513470828533173, -0.07137080281972885, -0.010449573397636414, -0.06309930980205536, -0.07058767974376678, -0.17850437760353088, -0.06531018763780594, -0.0978664979338646, -0.006045295391231775, -0.005661287344992161, -0.004807377699762583, -0.005653973203152418, 0.0055648935958743095, -0.005067060701549053, -0.005116194020956755, 0.0033998049329966307, 0.004790185485035181, -0.0026523973792791367, -0.003076146822422743, 0.0032513479236513376, -0.01402913685888052, 0.0028308462351560593, -0.0016663633286952972, -0.0158160962164402, -0.0030019800178706646, 0.0009702600655145943, -0.0011858252109959722, -0.001725122332572937, -0.010960761457681656, 0.0012620642082765698, -0.00041617784881964326, -0.006936001591384411, -0.000968805281445384, 0.0006372143398039043, -0.00011386282130843028, -0.0007841656915843487, 0.00041235960088670254, -0.00772911636158824, -0.006658187136054039, 4.0546619857195765e-05, 0.0010429632384330034, -0.008548825047910213, -0.006776439491659403, 0.0009567182860337198, -0.0046468693763017654, -0.0005580070428550243, -0.00044720774167217314, -0.007303833030164242, -0.0016883499920368195, -0.0002393221657257527, -0.00016272826178465039, -0.0008628210052847862, -0.01528827752918005, -0.04696725308895111, -0.04328825697302818, -0.017725083976984024, -0.013940648175776005, -0.03673973307013512, -0.0376172699034214, -0.019602665677666664, -0.01371542178094387, 0.03389925882220268, 0.03171230107545853, -0.006756296381354332, 0.020775265991687775, 0.018827250227332115, 0.019953398033976555, 0.020913492888212204, -0.014863859862089157, -0.06588846445083618, -0.067988820374012, -0.018099281936883926, -0.023277945816516876, -0.0762646272778511, -0.06295018643140793, -0.01959771290421486, -0.007107370533049107, 0.00014098981046117842, 0.0001657917455304414, -0.006901054177433252, -0.010065849870443344, 0.000545539369340986, 0.0008877046639099717, -0.009749294258654118, 0.01933789998292923, -0.006816227920353413, -0.010929225943982601, 0.028245653957128525, 0.017888268455863, -0.002430209657177329, -0.007239288184791803, 0.020528949797153473, 0.022753342986106873, -0.028654687106609344, -0.028138337656855583, 0.020207542926073074, -0.006661432795226574, 0.0014252347173169255, 0.0005114582017995417, -0.006003751419484615, -0.00836870726197958, 0.0019027983071282506, 0.0013873932184651494, -0.00830660481005907, -0.005349602550268173, 0.016998272389173508, 0.016633981838822365, -0.00483625428751111, 0.0027292652521282434, 0.012664729729294777, 0.012340669520199299, 0.0034173615276813507, -0.01711096242070198, -0.06766404956579208, -0.056872665882110596, -0.017429541796445847, -0.023178614675998688, -0.07428869605064392, -0.08287251740694046, -0.023087764158844948, 0.0009956430876627564, -0.015787316486239433, -0.016686467453837395, -0.001452335505746305, 0.0004431893758010119, -0.002495462540537119, -0.0031423072796314955, -0.0008392774034291506, 0.004603215958923101, -0.008040600456297398, -0.010952301323413849, 0.0023781093768775463, 0.004196403082460165, -0.005828905384987593, -0.007322467397898436, 0.0023391975555568933, -0.014215744100511074, -0.04533449187874794, -0.041230764240026474, -0.01375406514853239, -0.013538516126573086, -0.034997716546058655, -0.03780592605471611, -0.014576926827430725, -0.049390438944101334, -0.01738622598350048, -0.019763343036174774, -0.04363982006907463, -0.044301122426986694, -0.01634133793413639, -0.016169728711247444, -0.059706948697566986, -0.0004388031375128776, -0.005225528497248888, -0.0043638297356665134, -0.0004663611180149019, -3.061230745515786e-05, -0.0023387824185192585, -0.00286985095590353, 2.936377677542623e-05, 0.00918550044298172, 0.020199058577418327, 0.02824549935758114, 0.01444602757692337, -0.07582846283912659, -0.039788272231817245, -0.036580491811037064, -0.10252363979816437, -0.04883879795670509, -0.02264079824090004, -0.027699651196599007, -0.09117710590362549, 0.03240462392568588, -0.007947408594191074, -0.00949480477720499, 0.03050868771970272, 0.028644803911447525, -0.00520807970315218, -0.005842485465109348, 0.027817944064736366, 0.029159149155020714, -0.007168091833591461, -0.011589918285608292, 0.032167691737413406, 0.02241133153438568, -0.00315028871409595, -0.0036084619350731373, 0.025336820632219315, -0.007219528313726187, 0.0005717524909414351, 0.00029486624407581985, -0.007270591799169779, -0.004822599235922098, -1.6687314200680703e-05, -0.00022568815620616078, -0.005906475242227316, -0.013400690630078316, 0.0009048269712366164, -0.0008720164187252522, -0.012498537078499794, -0.0038177594542503357, 0.0003958342131227255, -0.0005065423902124166, -0.005072413943707943, -0.0072682942263782024, -0.0015056958654895425, -0.0021522503811866045, -0.0085648437961936, -0.0028109767008572817, -0.0015007847687229514, -0.0011184073518961668, -0.0015273081371560693, -0.03966642543673515, 0.0841207206249237, 0.08589240163564682, -0.027911560609936714, 0.025170082226395607, 0.0578308068215847, 0.059659574180841446, 0.03880349174141884, -0.011483533307909966, 0.0007374511915259063, -0.0005013322224840522, -0.006271709222346544, -0.0007398260058835149, 0.0004977225326001644, -0.000291619187919423, -0.0004558905493468046, -0.0022692917846143246, -0.00031230287277139723, -0.0004854651924688369, -0.0029451348818838596, -0.006115255877375603, 0.0009175703162327409, 0.0006290946039371192, -0.005320174153894186, -0.0017410111613571644, -0.01197733636945486, -0.010226906277239323, -0.0016034391010180116, -0.0013423492200672626, -0.0061634862795472145, -0.005252036731690168, -0.0009041364537551999, 0.004599188454449177, -0.006844657473266125, -0.009581747464835644, 0.003590831533074379, 0.003592825261875987, -0.005524179898202419, -0.0055524129420518875, 0.003020654199644923, 0.0026109092868864536, -0.006911212578415871, -0.005778111517429352, 0.002397613599896431, -0.0002256018779007718, -0.003424223978072405, -0.001954244449734688, 0.00011693056876538321, -0.0027809871826320887, -0.0006996587035246193, -0.0006883858586661518, -0.0023617022670805454, -0.004836219362914562, 6.748591113137081e-05, 4.0136823372449726e-05, -0.003559766337275505, -0.0005596810951828957, -0.004184838384389877, -0.0028487129602581263, -0.00032399402698501945, -0.0012840424897149205, -0.007020408287644386, -0.004513151478022337, -0.0007841573096811771, -0.007233802229166031, -0.0019782988820225, -0.0016112641897052526, -0.008746213279664516, -0.003379994770511985, -0.0016046288656070828, -0.0009218735503964126, -0.0061158002354204655, -0.06569132208824158, -0.016457105055451393, -0.016147594898939133, -0.07335231453180313, -0.03360828757286072, -0.016747821122407913, -0.016171732917428017, -0.040471918880939484, -0.010333070531487465, -0.001599182141944766, -0.002680606907233596, -0.013598616234958172, -0.004086735192686319, -0.00189745775423944, -0.001847253879532218, -0.006739071104675531, -0.0034283380955457687, 5.0362312322249636e-05, 0.0003793757641687989, -0.002326889894902706, 7.323188765440136e-05, 0.0006063703913241625, 0.0006077517173253, 4.0592672689854226e-07, 0.0035124323330819607, 0.01089155301451683, 0.015240035019814968, 0.0042736041359603405, 0.003887722035869956, 0.01859378069639206, 0.021623743698000908, 0.0034113407600671053, -0.007972557097673416, 0.011656898073852062, 0.01042073406279087, -0.00573944253847003, -0.005246983841061592, 0.011213698424398899, 0.011503457091748714, -0.003049667924642563, -0.07616200298070908, -0.013729897327721119, -0.01472389418631792, -0.10297046601772308, -0.07364169508218765, -0.013666439801454544, -0.01475105993449688, -0.10152357816696167, -0.006708221975713968, 0.005982368253171444, 0.006099741905927658, -0.006404302082955837, -0.003269408131018281, 0.004696938209235668, 0.004777426365762949, -0.0042374590411782265, -0.007772132754325867, 0.00143259740434587, 0.002181034069508314, -0.009460732340812683, -0.006562178023159504, 0.00046114245196804404, 0.00047662912402302027, -0.008317760191857815, 0.035505231469869614, -0.006239328999072313, -0.010590475983917713, 0.03587409853935242, 0.02186494879424572, 0.009203917346894741, -0.0014413496246561408, 0.02226690761744976, -0.01060116570442915, 0.02647348865866661, 0.02396969124674797, -0.006268142722547054, -0.010061622597277164, 0.035051748156547546, 0.03929473087191582, -0.0023070552852004766, -6.426733307307586e-05, -0.008624549023807049, -0.008426294662058353, -0.00034232932375743985, 2.3171362045104615e-05, -0.0036035089287906885, -0.0034748432226479053, 0.00011241766333114356, 2.5616642233217135e-05, -0.01336352527141571, -0.014813861809670925, -0.0008253547130152583, 0.0001553465990582481, -0.004811761435121298, -0.006928318180143833, 0.0003864490718115121, 0.0012765225255861878, -0.01704893819987774, -0.016908487305045128, -0.0016229844186455011, 2.8652348191826604e-05, -0.006605285685509443, -0.010170716792345047, -0.001410383847542107, -0.062245018780231476, -0.027189016342163086, -0.03072996251285076, -0.08479258418083191, -0.03646257147192955, -0.02014448493719101, -0.02259751968085766, -0.03307178243994713, -0.005343543365597725, 0.018728775903582573, 0.024783464148640633, -0.006328159477561712, 0.0021016444079577923, 0.01549041923135519, 0.019102193415164948, 0.0005087766330689192, -0.0054718670435249805, -0.000341697916155681, -0.00041323958430439234, -0.004589085001498461, -0.00043313446803949773, 0.0005452987970784307, 0.0006272486643865705, -0.00020728804520331323, 0.0005605931510217488, -0.004252469167113304, -0.0035884238313883543, 0.00024493830278515816, 0.001367409829981625, -0.008794465102255344, -0.00854357611387968, 0.0007034845184534788, -0.015769651159644127, -0.055282946676015854, -0.06119707226753235, -0.018377184867858887, -0.022471023723483086, -0.0521090105175972, -0.06277498602867126, -0.01807698979973793, -0.022325003519654274, 0.032900139689445496, 0.03312921151518822, -0.023631177842617035, 0.008489558473229408, 0.02198556251823902, 0.022638360038399696, 0.012833341024816036, -0.10092896968126297, -0.007863509468734264, -0.0078087192960083485, -0.09635179489850998, -0.012055609375238419, -0.007382173091173172, -0.006888116709887981, -0.0079734418541193, -0.17152728140354156, -0.006571047939360142, -0.006926593370735645, -0.14787603914737701, -0.0032189073972404003, -0.005765177309513092, -0.00611438974738121, -0.0031016694847494364, -0.1725601851940155, -0.004838674329221249, -0.005547360982745886, -0.1725870966911316, 0.0008443516562692821, -0.004096240270882845, -0.004509693942964077, -0.0002680102188605815, -0.12231101095676422, -0.005086295306682587, -0.005986839532852173, -0.13405992090702057, 0.0007216954254545271, -0.0031789622735232115, -0.003750934498384595, 9.101020259549841e-05, -0.07394794374704361, 0.01898699626326561, 0.0784023329615593, -0.008211439475417137, -0.10013681650161743, 0.01707828789949417, -0.055859945714473724, 0.004363321233540773, -0.1429523229598999, 0.20962825417518616, 0.30189764499664307, -0.14085352420806885, 0.006279100198298693, 0.0266476608812809, -0.1141248568892479, 0.14827358722686768, -0.005405576899647713, 0.04045424982905388, 0.05865837633609772, 0.058835990726947784, 0.09641452878713608, 0.027323829010128975, -0.0031988564878702164, -0.025808481499552727, 0.2807534337043762, 0.6693254113197327, 0.37055957317352295, -0.05712592974305153, -0.003276233095675707, 0.025898050516843796, -0.24270524084568024, 0.5921747088432312, -0.6957690715789795, 0.2319674789905548, 0.07611296325922012, -0.00644589401781559, -0.06195696443319321, -0.02550996094942093, 0.9649220108985901, -0.05507628992199898, 0.10060697793960571, -0.13770614564418793, -0.018686190247535706, 1.284175992012024, -0.04201856628060341, 1.316433072090149, -0.06736090779304504, 0.5376058220863342, -0.8982057571411133, 0.3340030610561371, -0.002154209418222308, 0.7263802289962769, -0.06095598638057709, -0.35455194115638733, -0.004409575369209051, 0.11899102479219437, -0.5837915539741516, 0.5059089660644531, 0.1672084778547287, -0.30817002058029175, 0.25577312707901, -0.347360223531723, -0.19340364634990692, -0.01487851794809103, 0.0963641032576561, -0.21059150993824005, 0.003939735237509012, -0.04660046473145485, -0.05789317935705185, 0.0013987553538754582, -0.2402401864528656, 0.9873924255371094, -0.027747323736548424, -0.03686317428946495, 0.5323299169540405, -0.7375632524490356, 0.247849240899086, -0.02701573632657528, -0.06063912808895111, 0.31797051429748535, 0.36898118257522583, -0.026747683063149452, -0.18201202154159546, -0.17546416819095612, 0.2671070992946625, 0.009929713793098927, 0.10489723086357117, -0.11290787905454636, 0.19573774933815002, -0.27427592873573303, 0.006807482335716486, -0.04950438067317009, 0.32612308859825134, -0.08895852416753769, -0.0880751758813858, 0.3880513608455658, 0.3359605073928833, -0.017861258238554, -0.0338505394756794, 0.39399394392967224, 0.012797990813851357, -0.021994592621922493, -0.031668566167354584, 0.008746340870857239, 0.33820170164108276, -0.2321101576089859, -0.04773007705807686, 0.046494558453559875, -0.06026547774672508, -0.05482165142893791, -0.4393479824066162, 0.2682640552520752, -0.3505781888961792, 0.9110074043273926, 0.9436298608779907, -0.20858818292617798, -0.059400320053100586, 0.061031524091959, 0.045665327459573746, -0.1395794153213501, -0.450369268655777, 0.5726431012153625, -0.12002208083868027, 0.011141400784254074, 0.013398603536188602, -0.04891210049390793, 0.05766274780035019, -0.13170713186264038, -0.2509750723838806, 0.17947393655776978, -0.1075071468949318, 0.1182883158326149, 0.3896220326423645, 0.14173883199691772, -0.08669650554656982, -0.2050056755542755, 0.32954421639442444, -0.47129255533218384, -0.03835580125451088, 0.06468944996595383, -0.013088957406580448, -0.06356703490018845, -0.14633439481258392, 0.022571904584765434, -0.03487197682261467, -0.054408036172389984, -0.0021362064871937037, -0.016524236649274826, -0.033146247267723083, -0.0031798246782273054, -0.0019636666402220726, -0.02372274547815323, 0.24607069790363312, -0.10825299471616745, 0.023242169991135597, -0.049140945076942444, 0.42635753750801086, -0.0752435252070427, -0.47220492362976074, 0.20920124650001526, 0.011527356691658497, 0.0031455920543521643, -0.009182516485452652, 0.004422810859978199, 0.009970464743673801, 0.005533569026738405, -0.07238771766424179, 0.03134161978960037, -0.062168776988983154, 0.10902909189462662, -0.0229549128562212, -0.003442106768488884, 0.14196990430355072, 0.23318608105182648, -0.0014517403906211257, -0.01359589397907257, 0.5067964792251587, -0.04042511805891991, 0.4921152591705322, 0.15805912017822266, 0.014073921367526054, 0.34256136417388916, 0.28166770935058594, -0.5545210242271423, -0.00631805881857872, -0.011597431264817715, 0.17966437339782715, -0.027621205896139145, -0.09016994386911392, 0.5330501794815063, -0.03540848195552826, 0.00283635500818491, 0.5983527898788452, 0.12992610037326813, 0.7187473773956299, -0.47408565878868103, -0.6846879124641418, 0.030332067981362343, 0.7610382437705994, 0.02657151035964489, 0.8967934250831604, 0.04059344530105591, 0.5247260332107544, -0.024696731939911842, 0.14641518890857697, -0.8374667763710022, -0.19611681997776031, -0.14699965715408325, -0.23048052191734314, 0.2608278691768646, -0.018463974818587303, -0.008795540779829025, -0.29646384716033936, 0.004307615105062723, -0.002931284951046109, -0.012486997060477734, -0.00398692162707448, -0.02745361626148224, -0.010179318487644196, -0.02978643961250782, -0.009584405459463596, -0.02363409474492073, -0.005882218014448881, -0.011731592006981373, -0.003569596679881215, -0.012929435819387436, -0.01146947592496872, -0.02493930049240589, -0.011636428534984589, -0.028100116178393364], "data_max": [0.008349306881427765, 0.005672150757163763, 0.014356470666825771, 0.02379765547811985, 0.06808670610189438, 0.051368679851293564, 0.05698595941066742, 0.055431921035051346, 0.046252913773059845, 0.05065183714032173, 0.039162248373031616, 0.053484514355659485, 0.02072051353752613, 0.10316137969493866, 0.06896251440048218, 0.04357532039284706, 0.6764539480209351, 1.513785481452942, 1.2356493473052979, 0.7237898111343384, 0.14310680329799652, 0.09747528284788132, 0.10897786915302277, 0.10122590512037277, 0.03539795055985451, 0.31710758805274963, 0.05534624308347702, 0.25714215636253357, 0.1061478927731514, 0.05987474322319031, 0.06965920329093933, 0.044535547494888306, 0.05982903391122818, 0.05053604394197464, 0.05826690047979355, 0.04762769863009453, 0.11541672796010971, 0.1317714899778366, 0.08735601603984833, 0.1195395365357399, 0.3974659740924835, 0.06514158844947815, 0.3676466941833496, 0.0614975243806839, 0.03144760802388191, 0.1769673079252243, 0.03816024959087372, 0.1311076581478119, 0.20745962858200073, 0.6800547242164612, 0.2049279361963272, 0.4648285210132599, 0.18801157176494598, 0.11124785989522934, 0.0899101197719574, 0.18225827813148499, 0.1674463450908661, 0.2703116238117218, 0.17656309902668, 0.16157472133636475, 0.033622995018959045, 0.02541462332010269, 0.02733018808066845, 0.03221754729747772, 0.18345117568969727, 0.09031009674072266, 0.14199095964431763, 0.13315033912658691, 0.09469197690486908, 0.059229422360658646, 0.0890376940369606, 0.05771556869149208, 0.03330990672111511, 0.07355577498674393, 0.01829608716070652, 0.09782955795526505, 0.08069887012243271, 0.1352771520614624, 0.07236023992300034, 0.1625991314649582, 0.10591074079275131, 0.2284781038761139, 0.07852916419506073, 0.2589837610721588, 0.07984018325805664, 0.14050664007663727, 0.07740873843431473, 0.17834687232971191, 0.033743999898433685, 0.04762502759695053, 0.03344056010246277, 0.0511842742562294, 0.2885180711746216, 0.06120173633098602, 0.21099472045898438, 0.07125423103570938, 0.05900163948535919, 0.1249275952577591, 0.03128783404827118, 0.17900227010250092, 0.08209634572267532, 0.4112873673439026, 0.08187774568796158, 0.3932150900363922, 0.15663687884807587, 0.1418062150478363, 0.06559181958436966, 0.23211146891117096, 1.0302798748016357, 0.37175142765045166, 0.9141867756843567, 0.4938003718852997, 0.08577699959278107, 0.30230313539505005, 0.05921987071633339, 0.29368525743484497, 0.8957617282867432, 0.22073514759540558, 0.894860565662384, 0.37379610538482666, 0.18016254901885986, 1.0419650077819824, 0.17946967482566833, 1.2297052145004272, 0.03127046674489975, 0.056422095745801926, 0.041047289967536926, 0.048244260251522064, 0.17171093821525574, 0.0998927503824234, 0.12752032279968262, 0.15131548047065735, 0.04750961810350418, 0.050682805478572845, 0.06080193817615509, 0.03900217264890671, 0.058593638241291046, 0.18033914268016815, 0.05392996966838837, 0.20760226249694824, 0.14634232223033905, 0.15446126461029053, 0.09049750119447708, 0.19762638211250305, 1.1127889156341553, 0.5309557318687439, 1.0771925449371338, 0.4915632903575897, 0.15900449454784393, 0.26576289534568787, 0.016284963116049767, 0.09554287046194077, 0.04012329503893852, 0.05125878006219864, 0.21054545044898987, 0.23178435862064362, 0.1843944489955902, 0.24094857275485992, 0.1341746747493744, 0.34199368953704834, 0.24493078887462616, 0.20733551681041718, 0.03723606839776039, 0.021061444655060768, 0.024686943739652634, 0.047101013362407684, 1.1957427263259888, 0.4238695502281189, 1.3375520706176758, 0.25563547015190125, 0.09655347466468811, 0.02356044016778469, 0.022419696673750877, 0.07240051031112671, 0.06122269853949547, 0.3062049150466919, 0.08921023458242416, 0.27765607833862305, 0.031178487464785576, 0.20449167490005493, 0.05928901210427284, 0.14307810366153717, 0.06572449952363968, 0.29026299715042114, 0.07996624708175659, 0.2585676610469818, 0.9186116456985474, 0.20564013719558716, 0.979293942451477, 0.24969114363193512, 0.07936578243970871, 0.1504940688610077, 0.09061235934495926, 0.10413055866956711, 0.05068710818886757, 0.2370714545249939, 0.10737115144729614, 0.15727266669273376, 0.021663960069417953, 0.007971254177391529, 0.012868929654359818, 0.01998109556734562, 0.03549323230981827, 0.031001901254057884, 0.024995509535074234, 0.019378207623958588, 1.7579928636550903, 0.603255569934845, 0.06884075701236725, 0.08767224848270416, 0.04991159588098526, 0.10980807989835739, 0.05892716348171234, 0.06627549231052399, 0.05544927716255188, 0.057400330901145935, 0.06871574372053146, 0.07158517092466354, 0.04919140040874481, 0.07551632076501846, 0.0756913498044014, 0.054524876177310944, 0.06177141144871712, 0.05267295986413956, 0.05678672716021538, 0.04390588402748108, 0.04817986488342285, 0.044334929436445236, 0.05677465721964836, 0.04641563445329666, 0.056819524616003036, 0.05262887477874756, 0.042976729571819305, 0.0884852334856987, 0.07150378078222275, 0.05819135904312134, 0.060970183461904526, 0.11834677308797836, 0.059772033244371414, 0.10719452798366547, 0.19482199847698212, 0.07062593847513199, 0.13223206996917725, 0.1270359754562378, 0.15294373035430908, 0.10047248005867004, 0.1333674192428589, 0.11388808488845825, 0.049736835062503815, 0.0730263963341713, 0.06423891335725784, 0.06044207885861397, 0.06824725866317749, 0.06418463587760925, 0.055221471935510635, 0.08067412674427032, 0.06581048667430878, 0.06716645509004593, 0.030897758901119232, 0.10386382043361664, 0.06678584218025208, 0.04657614603638649, 0.05417937412858009, 0.06673312187194824, 0.08239397406578064, 0.09648013114929199, 0.07537046074867249, 0.10726933181285858, 0.09659025073051453, 0.21478307247161865, 0.05900653824210167, 0.2610757648944855, 0.03647148609161377, 0.050088364630937576, 0.024171102792024612, 0.05635756254196167, 0.0540706105530262, 0.0953555554151535, 0.045485761016607285, 0.10102840512990952, 1.0636638402938843, 0.33594557642936707, 0.870901882648468, 0.14826737344264984, 0.407716304063797, 0.39994481205940247, 0.5319401621818542, 0.23560801148414612, 0.013692444190382957, 0.0048681264743208885, 0.014118478633463383, 0.030284307897090912, 0.053486086428165436, 0.06827282905578613, 0.06037027761340141, 0.05676674097776413, 0.04868278279900551, 0.048423830419778824, 0.05307643115520477, 0.04015098512172699, 0.10241597890853882, 0.023188896477222443, 0.041004981845617294, 0.07106988877058029, 1.3315119743347168, 0.7001356482505798, 0.6611624956130981, 1.2903028726577759, 0.09933722019195557, 0.13947676122188568, 0.09074509143829346, 0.10753612220287323, 0.32211941480636597, 0.034159425646066666, 0.2600895166397095, 0.055051714181900024, 0.06062901020050049, 0.1063435822725296, 0.04468721151351929, 0.062283046543598175, 0.04972069337964058, 0.06794975697994232, 0.04684329032897949, 0.06621643900871277, 0.12617290019989014, 0.12644091248512268, 0.1232776865363121, 0.08922047168016434, 0.06278026849031448, 0.41461703181266785, 0.06225666403770447, 0.38617873191833496, 0.18115289509296417, 0.03423745930194855, 0.13460737466812134, 0.03730665519833565, 0.6677278876304626, 0.20130714774131775, 0.49817126989364624, 0.19429410994052887, 0.13071168959140778, 0.1677394062280655, 0.18350379168987274, 0.08171524107456207, 0.2688418924808502, 0.17512403428554535, 0.1636405885219574, 0.18197156488895416, 0.027141742408275604, 0.03587888553738594, 0.030418701469898224, 0.029257064685225487, 0.0935673713684082, 0.19055680930614471, 0.13882361352443695, 0.1601465344429016, 0.06152663379907608, 0.09421981126070023, 0.0638168677687645, 0.08812052756547928, 0.0797778069972992, 0.03462808579206467, 0.10869485884904861, 0.022844593971967697, 0.13673347234725952, 0.07672435790300369, 0.16454283893108368, 0.051539480686187744, 0.26014643907546997, 0.10175818204879761, 0.29465192556381226, 0.07989417016506195, 0.15719838440418243, 0.08510775119066238, 0.19233521819114685, 0.054759860038757324, 0.04948506876826286, 0.035231925547122955, 0.05104586482048035, 0.03230052813887596, 0.05129454284906387, 0.29853448271751404, 0.07274146378040314, 0.21742941439151764, 0.1429339051246643, 0.059467993676662445, 0.20278790593147278, 0.03128458559513092, 0.4304691255092621, 0.08479622006416321, 0.4046287536621094, 0.09557303786277771, 0.15030087530612946, 0.17824259400367737, 0.261583149433136, 0.06656207144260406, 0.33612769842147827, 1.7890833616256714, 0.4576065242290497, 1.9782384634017944, 0.32280224561691284, 0.09021876752376556, 0.3124014735221863, 0.05978744849562645, 0.257584810256958, 2.0167834758758545, 0.34229445457458496, 1.9636132717132568, 0.9427706599235535, 0.18174336850643158, 1.0884089469909668, 0.15398436784744263, 0.06084952875971794, 0.03275132551789284, 0.054003242403268814, 0.039168812334537506, 0.11100117117166519, 0.19541054964065552, 0.16135098040103912, 0.14541611075401306, 0.05566278472542763, 0.04455737769603729, 0.040943119674921036, 0.05111705884337425, 0.17930488288402557, 0.062199972569942474, 0.21223585307598114, 0.050017811357975006, 0.1588629186153412, 0.14488545060157776, 0.20151908695697784, 0.10386504232883453, 0.47722670435905457, 1.315027117729187, 0.49706971645355225, 1.6171525716781616, 0.2728373408317566, 0.1542547643184662, 0.10942566394805908, 0.016508502885699272, 0.05966943874955177, 0.04504777491092682, 0.2331983596086502, 0.22758278250694275, 0.26672276854515076, 0.19778059422969818, 0.3443162143230438, 0.1228068619966507, 0.2066270112991333, 0.24519169330596924, 0.02194538712501526, 0.04188670590519905, 0.04043510928750038, 0.030313992872834206, 0.687596321105957, 1.8356554508209229, 0.2848058044910431, 2.3098862171173096, 0.021490583196282387, 0.10001937299966812, 0.07632005214691162, 0.026833435520529747, 0.3075956106185913, 0.07361912727355957, 0.2766689658164978, 0.09250988066196442, 0.22160875797271729, 0.030324311926960945, 0.15955939888954163, 0.061966490000486374, 0.2921532094478607, 0.07635524123907089, 0.2721116244792938, 0.08359531313180923, 0.3760293126106262, 1.7420833110809326, 0.30068227648735046, 1.520578145980835, 0.15278686583042145, 0.07512302696704865, 0.10311869531869888, 0.08835823088884354, 0.23786142468452454, 0.05691982060670853, 0.15510724484920502, 0.10657677054405212, 0.008334869518876076, 0.021539956331253052, 0.021513160318136215, 0.010316160507500172, 0.03138723969459534, 0.0226146150380373, 0.01916218176484108, 0.018481088802218437, 0.6192165017127991, 2.696153402328491, 0.08729328960180283, 0.07382968813180923, 0.09891343116760254, 0.0563386008143425, 0.07005707174539566, 0.06320015341043472, 0.06049492955207825, 0.05811283737421036, 0.0695347860455513, 0.06902224570512772, 0.07916412502527237, 0.05295887589454651, 0.05029428005218506, 0.07796914130449295, 0.05240410193800926, 0.06598079204559326, 0.043376240879297256, 0.05926866456866264, 0.047579050064086914, 0.04968387633562088, 0.040921375155448914, 0.06360478699207306, 0.04503268748521805, 0.061434607952833176, 0.09201855212450027, 0.04454139620065689, 0.055451683700084686, 0.073920838534832, 0.12560482323169708, 0.06341881304979324, 0.10869581252336502, 0.057750072330236435, 0.0613960400223732, 0.2120513916015625, 0.12082380056381226, 0.13945452868938446, 0.09993907064199448, 0.16844166815280914, 0.12174542248249054, 0.14653223752975464, 0.08002104610204697, 0.053137652575969696, 0.06302641332149506, 0.06599833071231842, 0.06701190024614334, 0.07445545494556427, 0.08703914284706116, 0.06201395019888878, 0.07212744653224945, 0.0742398276925087, 0.10702183842658997, 0.030238237231969833, 0.04117811471223831, 0.06868474930524826, 0.06212208420038223, 0.05348493531346321, 0.08828842639923096, 0.08104672282934189, 0.1028069406747818, 0.07228555530309677, 0.23892341554164886, 0.09859469532966614, 0.2960006892681122, 0.05743416026234627, 0.03818168863654137, 0.04054000973701477, 0.044457126408815384, 0.026767659932374954, 0.11728772521018982, 0.054344747215509415, 0.11045248806476593, 0.056433044373989105, 0.823777973651886, 0.24333907663822174, 1.1403231620788574, 0.3078289031982422, 0.4957813322544098, 0.2115127593278885, 0.36414045095443726, 0.3516906499862671, 0.17609389126300812, 0.1577739119529724, 0.14900998771190643, 0.19692039489746094, 0.08392494171857834, 0.038975637406110764, 0.04349235072731972, 0.08183898776769638, 0.08606470376253128, 0.03319874033331871, 0.035671282559633255, 0.08384941518306732, 0.020852355286478996, 0.1409895420074463, 0.12500503659248352, 0.023016078397631645, 0.02248646505177021, 0.12329311668872833, 0.1103644147515297, 0.023713110014796257, 0.015589541755616665, 0.11020654439926147, 0.1028345376253128, 0.01617252640426159, 0.019523387774825096, 0.10221291333436966, 0.09586472064256668, 0.019017258659005165, 0.09875120222568512, 0.023175690323114395, 0.023404143750667572, 0.09075693041086197, 0.10357924550771713, 0.01739657297730446, 0.018106980249285698, 0.09574408829212189, 0.009341597557067871, 0.07678013294935226, 0.08340135961771011, 0.01048195082694292, 0.010367287322878838, 0.07112227380275726, 0.07902144640684128, 0.012005685828626156, 0.5360978245735168, 0.18104064464569092, 0.15969577431678772, 0.5418282747268677, 0.5332912802696228, 0.13361138105392456, 0.1365017592906952, 0.5449246168136597, 0.1421641707420349, 0.24663691222667694, 0.2391645461320877, 0.1332544982433319, 0.18428312242031097, 0.18848590552806854, 0.1836477816104889, 0.19435866177082062, 0.769553542137146, 0.19113165140151978, 0.1883496791124344, 0.7560417652130127, 0.8064625859260559, 0.16825176775455475, 0.1961187869310379, 0.8079618215560913, 0.00678535969927907, 0.07910274714231491, 0.07803421467542648, 0.006931595038622618, 0.0027460947167128325, 0.08071334660053253, 0.0790175125002861, 0.002409097272902727, 0.14078658819198608, 0.1366545408964157, 0.14952170848846436, 0.14364974200725555, 0.12411246448755264, 0.15654844045639038, 0.16261026263237, 0.12616299092769623, 0.14647436141967773, 0.04669737070798874, 0.0404495894908905, 0.14269989728927612, 0.018153296783566475, 0.07945048063993454, 0.08076074719429016, 0.018040355294942856, 0.009354538284242153, 0.08921752125024796, 0.09456862509250641, 0.008685726672410965, 0.09034053236246109, 0.11483027040958405, 0.11588134616613388, 0.08401724696159363, 0.1083529070019722, 0.10127004981040955, 0.10323911905288696, 0.09844524413347244, 0.6003931760787964, 0.1589658409357071, 0.1737227439880371, 0.6476812958717346, 0.5963484644889832, 0.1634300947189331, 0.16956734657287598, 0.642507016658783, 0.11479503661394119, 0.01898818649351597, 0.022111812606453896, 0.10138207674026489, 0.10669893771409988, 0.019579138606786728, 0.020343346521258354, 0.09629844129085541, 0.1180909052491188, 0.046011123806238174, 0.04020935669541359, 0.11057516932487488, 0.11770402640104294, 0.046374447643756866, 0.04176134988665581, 0.10915406048297882, 0.5369492173194885, 0.13682785630226135, 0.14409451186656952, 0.5895155072212219, 0.552986204624176, 0.16479244828224182, 0.19480296969413757, 0.5583574175834656, 0.14008165895938873, 0.4787417948246002, 0.49161794781684875, 0.1533423662185669, 0.14011336863040924, 0.4966813623905182, 0.5076850652694702, 0.1407073587179184, 0.09061423689126968, 0.009235210716724396, 0.009057236835360527, 0.08512385189533234, 0.09567609429359436, 0.006125580985099077, 0.006489085033535957, 0.08885009586811066, 0.2318415343761444, 0.21224403381347656, 0.18479956686496735, 0.22689907252788544, 0.3209224343299866, 0.5956022143363953, 0.5685640573501587, 0.32096418738365173, 0.1781027466058731, 0.5804927945137024, 0.558323085308075, 0.18589794635772705, 0.1394391655921936, 0.12171268463134766, 0.11251603811979294, 0.13248324394226074, 0.11397114396095276, 0.1401534527540207, 0.12968559563159943, 0.1158437579870224, 0.12512323260307312, 0.1267443746328354, 0.11827042698860168, 0.11393579840660095, 0.10411746799945831, 0.14308352768421173, 0.1358683556318283, 0.10207723081111908, 0.0027349863667041063, 0.07785692811012268, 0.07791268080472946, 0.0027376622892916203, 0.005406789481639862, 0.07780538499355316, 0.07777811586856842, 0.005248602945357561, 0.02169765718281269, 0.09517282992601395, 0.08957036584615707, 0.02137831225991249, 0.021944940090179443, 0.08269070088863373, 0.08042729645967484, 0.0219681728631258, 0.013961263932287693, 0.08572200685739517, 0.080621138215065, 0.013244742527604103, 0.013682729564607143, 0.0777520164847374, 0.07204551249742508, 0.013510194607079029, 0.1738416999578476, 0.6441306471824646, 0.6205596923828125, 0.18304966390132904, 0.32763728499412537, 0.44796496629714966, 0.425108939409256, 0.306691437959671, 0.010911070741713047, 0.0885467529296875, 0.08905385434627533, 0.012210092507302761, 0.01736409217119217, 0.0834425613284111, 0.08490283042192459, 0.018059248104691505, 0.01823158748447895, 0.06238380819559097, 0.06153620034456253, 0.017726976424455643, 0.007953855209052563, 0.07119819521903992, 0.07221643626689911, 0.007251082919538021, 0.09802976250648499, 0.02433079108595848, 0.024465598165988922, 0.08725199848413467, 0.09010285884141922, 0.01889411173760891, 0.020498892292380333, 0.08088558167219162, 0.11059598624706268, 0.045024506747722626, 0.043351415544748306, 0.10280727595090866, 0.10383274406194687, 0.049696411937475204, 0.046135589480400085, 0.09621112793684006, 0.08993737399578094, 0.026147538796067238, 0.02725105918943882, 0.08625251799821854, 0.08176705241203308, 0.027068106457591057, 0.029153738170862198, 0.07935348153114319, 0.02819560468196869, 0.07506302744150162, 0.0698932409286499, 0.023547887802124023, 0.02002549357712269, 0.08355472981929779, 0.07462388277053833, 0.016101311892271042, 0.059710100293159485, 0.009559386409819126, 0.01021283958107233, 0.05524997413158417, 0.06375153362751007, 0.010969586670398712, 0.012405681423842907, 0.05945056676864624, 0.013950400054454803, 0.0657510831952095, 0.06504601240158081, 0.016158420592546463, 0.010985762812197208, 0.06197886914014816, 0.06271852552890778, 0.011626837775111198, 0.15690571069717407, 0.49270886182785034, 0.5222122669219971, 0.1871236115694046, 0.12584497034549713, 0.5821676254272461, 0.6322730779647827, 0.1224188283085823, 0.02317129261791706, 0.07358245551586151, 0.07169412076473236, 0.02349483035504818, 0.02418951503932476, 0.06632933020591736, 0.06309864670038223, 0.02442300319671631, 0.01141140516847372, 0.10890796780586243, 0.12897498905658722, 0.010685225017368793, 0.007666117511689663, 0.1116151213645935, 0.130783811211586, 0.007160963956266642, 0.12943442165851593, 0.13693904876708984, 0.11787217110395432, 0.1284751296043396, 0.1304548680782318, 0.11891846358776093, 0.11624626070261002, 0.12574346363544464, 0.03351086005568504, 0.07063766568899155, 0.06703447550535202, 0.04357372596859932, 0.03261176869273186, 0.06651786714792252, 0.06627804785966873, 0.04153983294963837, 0.1525651216506958, 0.6273330450057983, 0.6487682461738586, 0.14236919581890106, 0.19307640194892883, 0.5867601037025452, 0.5820944309234619, 0.17640890181064606, 0.03773675486445427, 0.07960091531276703, 0.08006780594587326, 0.04045010730624199, 0.043088581413030624, 0.07555907219648361, 0.07471678406000137, 0.04472183436155319, 0.029768897220492363, 0.07088787108659744, 0.07032835483551025, 0.03612912446260452, 0.02906092256307602, 0.0664457380771637, 0.0653582289814949, 0.03458814695477486, 0.2136254608631134, 0.07490253448486328, 0.07527337223291397, 0.20219746232032776, 0.19189347326755524, 0.100594162940979, 0.10708574950695038, 0.17307963967323303, 0.07432111352682114, 0.17451806366443634, 0.16158615052700043, 0.07972022891044617, 0.046100419014692307, 0.17981892824172974, 0.16506892442703247, 0.05256161838769913, 0.08311336487531662, 0.028245121240615845, 0.02783273532986641, 0.07499343156814575, 0.07452823221683502, 0.026046158745884895, 0.025067931041121483, 0.06924928724765778, 0.10156140476465225, 0.041745223104953766, 0.03602055087685585, 0.09183886647224426, 0.0941835567355156, 0.03518077731132507, 0.03345433250069618, 0.08525111526250839, 0.11279694736003876, 0.034208737313747406, 0.03233148530125618, 0.1046457588672638, 0.10977500677108765, 0.032425977289676666, 0.03165360912680626, 0.10333172231912613, 0.17642588913440704, 0.6882777214050293, 0.6468811631202698, 0.17530928552150726, 0.18638162314891815, 0.6063037514686584, 0.6358646750450134, 0.2219354808330536, 0.08575557917356491, 0.1522865742444992, 0.15627145767211914, 0.0946047380566597, 0.10325897485017776, 0.13620533049106598, 0.14095963537693024, 0.10414255410432816, 0.012704014778137207, 0.11100514233112335, 0.12930993735790253, 0.013718661852180958, 0.010017530992627144, 0.10665369778871536, 0.1267017424106598, 0.009415175765752792, 0.11993817239999771, 0.020872624590992928, 0.020395932719111443, 0.1331881284713745, 0.12549027800559998, 0.004697326570749283, 0.007253553718328476, 0.13911904394626617, 0.5045966506004333, 0.22197312116622925, 0.22162945568561554, 0.5144121050834656, 0.5528397560119629, 0.12113390117883682, 0.11611922085285187, 0.5383970737457275, 0.09688371419906616, 0.27476051449775696, 0.25236907601356506, 0.09614943712949753, 0.15601733326911926, 0.17405693233013153, 0.1620418131351471, 0.14081239700317383, 0.10623186081647873, 2.2706687450408936, 2.3358254432678223, 0.1068853959441185, 0.10560343414545059, 2.129997730255127, 2.254873514175415, 0.11350049823522568, 0.08194103837013245, 1.9138668775558472, 2.0513296127319336, 0.07284533977508545, 0.16704128682613373, 1.628330111503601, 1.784407615661621, 0.18149395287036896, 0.06972602754831314, 1.323169469833374, 1.4429523944854736, 0.0687553808093071, 0.2171306312084198, 0.9984128475189209, 1.0822029113769531, 0.22946225106716156, 0.044934168457984924, 0.7075914740562439, 0.7607077956199646, 0.04410487040877342, 0.1918485462665558, 0.4235049784183502, 0.45546239614486694, 0.2114814966917038, 0.2432108223438263, 0.47114795446395874, 0.7994376420974731, 1.1804901361465454, 0.005376606248319149, 0.36584779620170593, 0.3900587260723114, 0.35152456164360046, 0.02895672619342804, 1.2447905540466309, 1.4650791883468628, 0.5032419562339783, 0.0725283995270729, 0.15316617488861084, 0.07883904874324799, 0.9966694116592407, 0.017956826835870743, 0.20991231501102448, 0.20762453973293304, 0.21386732161045074, 0.797603964805603, 0.3447200655937195, 0.032225511968135834, 0.010364256799221039, 1.4409863948822021, 2.605710744857788, 1.8172281980514526, 0.8804658055305481, 0.04888208955526352, 0.25440868735313416, 0.14487366378307343, 1.692124366760254, 0.11179595440626144, 1.7124601602554321, 0.4953001141548157, 0.29652196168899536, 0.046824246644973755, 0.13706490397453308, 3.675518035888672, 1.6434593200683594, 1.2724311351776123, 0.28950169682502747, 0.09570178389549255, 4.338246822357178, 0.09692833572626114, 4.472177982330322, 0.9416369199752808, 2.3624839782714844, -0.1997743546962738, 1.5417006015777588, 0.11407104879617691, 3.3114798069000244, 0.4679356515407562, 0.072076216340065, 0.08220023661851883, 1.6973872184753418, 0.07429879158735275, 2.2614054679870605, 0.857371985912323, 0.09513282775878906, 1.203830599784851, 0.38829007744789124, 0.07319151610136032, 0.341673344373703, 0.5962036848068237, 0.04327670484781265, 0.34663090109825134, 0.01348208636045456, 0.010210143402218819, 0.08032652735710144, 0.5776411294937134, 3.3730573654174805, 0.05313333496451378, 0.0484578013420105, 2.3372585773468018, -0.08579545468091965, 1.332088589668274, 0.059247396886348724, 0.4891608953475952, 1.6098058223724365, 1.2855390310287476, 0.04728373885154724, 0.2519562542438507, 0.35544028878211975, 1.229941487312317, 0.21987681090831757, 0.6687581539154053, 0.4266337752342224, 0.8735748529434204, -0.021184932440519333, 0.056420739740133286, -0.0007528388523496687, 1.7453796863555908, 0.027713989838957787, 0.036322981119155884, 1.916714072227478, 1.7607418298721313, 0.21710264682769775, 0.21344685554504395, 1.916892170906067, 0.11670029908418655, -0.0009059818694368005, -0.0005993525846861303, 0.17949463427066803, 1.5696945190429688, 0.06401512026786804, 0.27418750524520874, 0.5248119831085205, 0.06972552090883255, 0.07248697429895401, -0.057930491864681244, 1.24066960811615, 0.033574674278497696, 2.508976697921753, 2.7148585319519043, 0.03133438900113106, 0.06941238790750504, 0.5669744610786438, 0.5430120229721069, 0.0735003799200058, -0.11049481481313705, 1.6435365676879883, -0.0009347707382403314, 0.14279590547084808, 0.05283520743250847, -0.01176627166569233, 0.5022004246711731, 0.09475389122962952, 0.3559330403804779, 1.1023976802825928, 0.3964761793613434, 0.7025829553604126, 1.754889965057373, 1.075143575668335, 0.5725009441375732, 0.19170914590358734, 1.7373096942901611, 0.1179027259349823, 0.2562268376350403, 0.7511534094810486, 0.09517258405685425, 0.017482344061136246, 0.1424380987882614, 0.40638861060142517, 0.07960847020149231, 0.06906680762767792, 0.12009253352880478, 0.011914415284991264, 0.008260407485067844, 0.06266318261623383, 0.054594218730926514, 0.005186849739402533, 0.7619826793670654, 0.36346644163131714, 0.28957870602607727, 0.2501959204673767, 2.0529685020446777, -0.012078973464667797, -0.10420624911785126, 1.3044954538345337, 0.04378150403499603, 0.012136157602071762, -0.0020360462367534637, 0.02018699049949646, 0.5344423055648804, 0.4133152365684509, 0.05833093076944351, 0.5789175629615784, 0.5303189158439636, 0.7169333696365356, 0.004144710022956133, 0.026051277294754982, 1.2594009637832642, 1.5243374109268188, 0.026902908459305763, 0.0030490770004689693, 2.6393306255340576, 0.26073259115219116, 1.8038398027420044, 0.9269912838935852, 0.13201288878917694, 1.4710512161254883, 1.2756671905517578, 0.006609570700675249, 0.10219670832157135, 0.07703149318695068, 0.9961103200912476, 0.19744545221328735, 0.6094313859939575, 1.9854542016983032, -0.001592517364770174, 0.046772152185440063, 2.495866537094116, 1.484893798828125, 2.7942912578582764, 0.5577430129051208, 0.06420143693685532, 0.9916814565658569, 2.91664719581604, 0.1339062750339508, 3.641533851623535, 1.1290959119796753, 2.7008180618286133, 0.024551374837756157, 1.1679887771606445, -0.11201747506856918, 0.24917101860046387, 0.3768630623817444, 0.04315502569079399, 1.2865806818008423, 0.015524918213486671, 0.02876356989145279, 0.03112761490046978, 0.4346376657485962, 0.20285660028457642, 0.04259456321597099, 0.2503029406070709, 0.02496136538684368, 0.07594813406467438, 0.09186459332704544, 0.10173232853412628, 0.06542108207941055, 0.20320385694503784, 0.0469539500772953, 0.21358722448349, 0.04497377201914787, 0.08664047718048096, 0.054968591779470444, 0.08284500986337662, 0.055721741169691086], "data_means": [0.0009033591682377821, 0.001946241024355613, 0.006604708225581771, 0.003524304855770593, 0.04023071141069897, 0.013507506106528955, 0.03476033512359655, 0.01897788239394318, 0.026881373440389506, 0.01522928983921765, 0.021924807924592588, 0.020185855355813846, 0.010917921081665562, 0.022647268579699564, 0.023498861789676025, 0.01006632787276985, 0.24390031490122013, 0.19759839523302514, 0.21372031584592296, 0.2277783942783446, 0.0823189419025111, 0.011344599799608189, 0.06265885575394305, 0.03100468595166216, 0.01705246439845696, 0.055732899551093375, 0.018812013416860156, 0.05397335053311248, 0.011470688295120698, 0.02613497879853425, 0.016926986877096324, 0.02067868021614126, 0.03172597159348641, 0.012841616769081346, 0.028656085142229594, 0.015911503218786243, 0.043970676598668296, 0.03718430934873205, 0.030529569784060615, 0.050625416161283375, 0.052590506086668765, 0.028855257865016606, 0.05646282682189302, 0.02498293712953359, 0.014536122945427806, 0.03710826532558438, 0.014314440002116886, 0.03732994827007575, 0.05489769670315692, 0.08920344938567801, 0.0644001131495216, 0.07970103293984994, 0.039655522848969234, 0.04420173177778673, 0.021614310486703127, 0.0622429441397794, 0.06716843650126171, 0.09215225975241757, 0.09106441741738357, 0.06825627883525602, 0.009024934309685997, 0.00929782515454882, 0.00613690658086962, 0.012185852882842834, 0.04071306297842625, 0.0506722934744422, 0.019817167656316786, 0.07156818879633392, 0.058045527021569836, 0.015258838932591919, 0.053859332747167976, 0.01944503320728776, 0.009465778221311429, 0.027068335911354383, 0.0010067600512876549, 0.03552735408151769, 0.019107148286565217, 0.08019023567321067, 0.0006196433163442468, 0.09867774064572223, 0.026682389919670004, 0.08172583245584339, 0.010822959937615442, 0.09758526243718965, 0.019905021574626622, 0.0692179914751092, 0.0019883161948526353, 0.08713469685522882, 0.01225430049373675, 0.021131407647024453, 0.00849914118929621, 0.024886566952939688, 0.036391972103836843, 0.022261410083659346, 0.03263943768169871, 0.026013944504840295, 0.019319082774179062, 0.04811630076848549, 0.0015578856097783692, 0.06587749793247952, 0.0405660535259371, 0.06674885741733955, 0.03384177035499277, 0.07347314058944887, 0.033859646829978045, 0.05528453510264499, 0.009012332383907114, 0.08013184954924839, 0.14430153858897599, 0.12290598605284643, 0.0853483533456871, 0.18185917129267723, 0.012536106903815434, 0.17683052655693834, 0.008651708768678587, 0.18071492469707867, 0.10942692690081775, 0.087887125118464, 0.06840625735085615, 0.12890779466970498, 0.05905190917542559, 0.1593043952094274, 0.03540622356843426, 0.18295008081933037, 0.009148850728241453, 0.029531214999362846, 0.014092989740128625, 0.02458707598624748, 0.036696071100161896, 0.04393267928004217, 0.01597386804263124, 0.06465488233688443, 0.011923444260113287, 0.02696126450943777, 0.019996949891973766, 0.018887758876730106, 0.01774116915079003, 0.12101001533947454, -0.003030889801015409, 0.1417820742939855, 0.05627976472858698, 0.03525878376095258, 0.04112408182407617, 0.05041446666336213, 0.18967686365365824, 0.1509596944191512, 0.16116279167169595, 0.1794737663990267, 0.06289228392091718, 0.08964356050643336, 0.0038515226875822975, 0.016570536345915737, 0.01127278071287369, 0.009149278320996837, 0.12035694650809825, 0.05211371239027834, 0.09935011985525705, 0.07312053904329088, 0.03937066064858882, 0.217388640430183, 0.13008038603890862, 0.12667891503599316, 0.015083565381111929, 0.0002251459194520864, 0.006739316967360744, 0.008569394333265836, 0.09717898720372428, 0.07172399480728016, 0.08605580453422867, 0.08284717747418045, 0.027023192299200274, 0.00515641803481292, 0.004924981780343836, 0.02725462855364963, 0.025366071793530218, 0.061995612483671435, 0.03110428795900481, 0.056257396318019896, 0.008357391309922687, 0.037542726808790755, 0.019735031679957014, 0.02616508643968256, 0.024581304735467498, 0.05796123131389697, 0.03198513256075612, 0.05055740348866916, 0.08322857158019925, 0.07350880845136569, 0.04729319373708317, 0.10944418629505305, 0.03701491787832492, 0.05573164719065986, 0.048091831796167966, 0.04465473327413727, 0.02145597242200833, 0.04909668944328527, 0.03795398247097054, 0.03259867939513749, 0.005692172154987668, 0.0012576628180422397, 0.0016629149315607722, 0.005286920041241352, 0.005809238538870442, 0.011030476680834058, 0.008294273862969347, 0.00854544135688744, 0.14231215176626189, 0.08392618406782999, 0.024472524385218276, 0.016688762641616645, 0.017219629775578157, 0.023941657251484175, 0.03153646323590668, 0.028661784671822232, 0.029250080776411728, 0.030948167131474306, 0.03785939831995346, 0.009258413076324013, 0.028287366726251723, 0.018830444670686175, 0.04246931020322991, 0.009430361804986593, 0.034849471540582, 0.017050200467646215, 0.03293804623054026, 0.011282001791879685, 0.028300559301164298, 0.01591948872072992, 0.016222811610460897, 0.014967617842415692, 0.014912973437392616, 0.016277456015189026, 0.017160421312570704, 0.03957507734523435, 0.030840868642248543, 0.02589463001718983, 0.02846492343640923, 0.060822443184537105, 0.029810979413500256, 0.059476387206868916, 0.0849060116480422, 0.0014727278446802037, 0.05515191681771616, 0.0312268226753417, 0.07526307376414972, 0.02082408540078774, 0.06034566608520718, 0.03574149308141959, 0.007542809569107636, 0.04422126802372104, 0.014803730129121923, 0.036960347463603396, 0.019048137090054946, 0.02748940428868331, 0.009806227495393097, 0.036731313883350804, 0.017589068569783185, 0.02629345643969331, 0.0005628338875767339, 0.04331969112286254, 0.020841075356232478, 0.011448549490578414, 0.017260958502329324, 0.015028666344135463, 0.019499105209438358, 0.023681355047722865, 0.013417928490411917, 0.029762531766799286, 0.024097573707663706, 0.0822905742722793, 0.002843369242361242, 0.10354477873620284, 0.013344561728763823, 0.008053569946846884, 0.0070959073931909054, 0.0143022242823584, 0.0123926355963334, 0.031995736983481335, 0.009690081523688143, 0.03469829105679509, 0.16226496302910925, 0.0569996414443674, 0.17588426218434564, 0.03352727495506584, -0.009100079731400453, 0.0783580982602945, -0.008965498350829033, 0.06435546756789849, 0.0039570800554748105, 0.0019414115762088197, 0.0033655860124712756, 0.003832078698749061, 0.014252387514052589, 0.039645374143761875, 0.019777488781299264, 0.03412027287670517, 0.01590112228156803, 0.026698034714444582, 0.02084737426000796, 0.02175178273621531, 0.023926323170258147, 0.011365468711009255, 0.010639217411793528, 0.024652574469908373, 0.19311242008065102, 0.24936959128090788, 0.22746860247910997, 0.21501340887727172, 0.012179083856217932, 0.08303586552530844, 0.032265297788038695, 0.06294965159191504, 0.05499337015370511, 0.016739053253135804, 0.05333513366603272, 0.01839728974215506, 0.026566119189426064, 0.011782329701498792, 0.021171888295314318, 0.017176560596051414, 0.012536240240400912, 0.03160322900562424, 0.015544563274248977, 0.028594905971633295, 0.03824928691253166, 0.04625464631351037, 0.05245701163729991, 0.03204692158779941, 0.029488447363294153, 0.05309734780788433, 0.025399821449227287, 0.05718597372376122, 0.0363993266259635, 0.014671477034079608, 0.03668213513432386, 0.014388668525642847, 0.08754738006007634, 0.05770498332623726, 0.07935246110852433, 0.06589990227770873, 0.04385556972074023, 0.04044965909726849, 0.061992797350816635, 0.022312431467252765, 0.09440621697363397, 0.0687414575949707, 0.06925969540160735, 0.09388797916902603, 0.009111028777809407, 0.008982421881722267, 0.011964070074464143, 0.0061293805851526904, 0.05164934034869428, 0.0424921185967414, 0.07307298331260291, 0.02106847563212118, 0.01631854675890415, 0.05733332977223506, 0.02016817651222267, 0.053483700018546916, 0.02794807148034548, 0.009331911362968787, 0.03691706386298508, 0.00036291898048002795, 0.08133153510569996, 0.020128829215122837, 0.10059392054334595, 0.0008664437760290627, 0.08281521610240998, 0.027004233499341796, 0.09799556419401594, 0.01182388540725473, 0.07065657156536821, 0.02054828181420676, 0.08925075776579149, 0.001954095612868621, 0.020832047617260048, 0.012189554776866564, 0.02443602077302867, 0.008585581621986712, 0.022227109552778377, 0.03654917978639399, 0.02556457001233768, 0.03321171932759244, 0.04959593043875683, 0.019293414215824777, 0.0672433171485572, 0.0016460275045228332, 0.0663307487088586, 0.04069204562691852, 0.07309084776897182, 0.03393194656426629, 0.056413222464623554, 0.03439383083259939, 0.08192022495554203, 0.00888682834306105, 0.12057259220058483, 0.14584831663799935, 0.17941242875882604, 0.08700848008825723, 0.17852027958054711, 0.013120392888951476, 0.18249430451798662, 0.009146367951415924, 0.08757524680174499, 0.11286200349902328, 0.1273546022253635, 0.07308264807250132, 0.15732541986460968, 0.05930432448854295, 0.18064844184083118, 0.035981302508854854, 0.02898827836752665, 0.009034303247745625, 0.024280789723760465, 0.01374179189159587, 0.04525232697931775, 0.03789899113601641, 0.0666604885341898, 0.01649082957915636, 0.02721463667244087, 0.011765719773185614, 0.019088582824846545, 0.019891773620727426, 0.12191495499160206, 0.01863645676327623, 0.143149270097183, -0.0025978583471345683, 0.03458100128389385, 0.057523686193698194, 0.05067879598887526, 0.041425891488471506, 0.14781145229180176, 0.19125960627617697, 0.17692633293535456, 0.162144725636571, 0.09127619514716424, 0.06519654666646969, 0.017911582528537168, 0.003802464046539574, 0.009915313513067254, 0.011798733061237571, 0.05378479928571712, 0.11966419253125272, 0.07407152184253556, 0.09937746997458545, 0.21868802794501496, 0.0411779486171207, 0.12608049877720898, 0.1337854777770914, -0.00017738028067204104, 0.015514321528702735, 0.008249408005875323, 0.007087533241951219, 0.07168871593659291, 0.1016905874369847, 0.08420567518169766, 0.08917362819136077, 0.005760862625350098, 0.02677941533894707, 0.027990401624479036, 0.004549876339820684, 0.06522847414394911, 0.025555809746723102, 0.058802002268741486, 0.031982281618403455, 0.04025922832852147, 0.008197985530962645, 0.02819511733712502, 0.02026209652249564, 0.061178480908811346, 0.025253295815120022, 0.05400142365124812, 0.03243035307120342, 0.07539696495623288, 0.08874009350312638, 0.11222286220383897, 0.051914196257301336, 0.05743437435208322, 0.03751808654262207, 0.046075963136719175, 0.04887649775796426, 0.05149434866645121, 0.021642706234943992, 0.03428029507239528, 0.03885675982808604, 0.0013062525446635596, 0.00577510495863392, 0.005382340753384082, 0.0016990167496395835, 0.01121899594172559, 0.005797953895110903, 0.008700829023015633, 0.008316120813732857, 0.08688568395854554, 0.1462039067909434, 0.016439266936016814, 0.024474539282088276, 0.023864716055468804, 0.017049090163132802, 0.029488547637327257, 0.0315912872368818, 0.03189296105877612, 0.0291868738158448, 0.009478708990919602, 0.037903526910165485, 0.01922777895472042, 0.028154456945139378, 0.010037153798389145, 0.042235398912432824, 0.01748039265766612, 0.03479216005407062, 0.011698261640365522, 0.03231702850483681, 0.016159589839920302, 0.0278557003061905, 0.014622622764775519, 0.01623449535274285, 0.016076386335688236, 0.014780731780977385, 0.04047275889979148, 0.016830108870415958, 0.02635734616867517, 0.030945521601482107, 0.06092411674824982, 0.0280340179297422, 0.059864068908634646, 0.029094065768252738, 0.0022033419757675463, 0.0845340239394202, 0.031206039560507822, 0.05553132635160458, 0.020350544989543258, 0.0749530070034191, 0.03527227123221871, 0.060031280758774105, 0.0452748259532358, 0.007914196163169292, 0.03795911450311967, 0.015229907612411171, 0.02826512997986905, 0.019301496391703934, 0.03774712193203154, 0.009819504441392797, 0.027358893357524606, 0.017560614950263734, 0.04436746383617268, 0.0005520444712611666, 0.011581876907864348, 0.020785006489387813, 0.014946291514028001, 0.01742059188302208, 0.023890996071526734, 0.020254554492145645, 0.03009808501981339, 0.014047465543209332, 0.08331576964024615, 0.025133005873865216, 0.10589604682684112, 0.002552728684031523, 0.007722702763816291, 0.01375163266292138, 0.014123522487702043, 0.0073508129386605885, 0.03149307429558608, 0.012990943888771832, 0.034507934575508804, 0.009976083608269171, 0.17925307565302293, 0.07354947194148644, 0.1629096131725557, 0.06068211363174524, -0.008917432074088561, 0.05567747822580003, -0.00854060959202281, 0.06807630419028761, 0.0034628888953279363, 0.003057698850169123, 0.002975976748236677, 0.0035116250869681653, 0.02873374580948926, 0.003015967245377856, 0.0029140256088217944, 0.02870837210483546, 0.028607374784593423, 0.003142338269410062, 0.0030140494963352676, 0.02860834821640537, 0.001277498030998623, 0.03462246386698344, 0.03446863506094898, 0.0013685929770640881, 0.004702494051515391, 0.031197467844775506, 0.03111217916872517, 0.004725048869723946, 0.0017869346711888762, 0.02739152887471873, 0.027530227033146382, 0.0017958110031376811, 0.0035230775012550218, 0.025655386044136322, 0.025713995740426723, 0.0036120422954966243, 0.022857747416142098, 0.0008937404179463302, 0.000914286829020581, 0.022564822432398646, 0.024067549375202484, -0.00031606154024672395, -0.0002931095496692241, 0.023772218810807072, 0.001212974009829999, 0.01672255258395953, 0.016532406475755837, 0.0011586641935669257, 0.002340998715273014, 0.01559452787880978, 0.015346881526941483, 0.0023441891421200857, 0.049604742384054074, 0.03272190027153067, 0.033553995574714626, 0.05083095618344005, 0.04809483093860063, 0.03423181171637711, 0.0343120555312526, 0.05007289622836532, 0.026586954889757968, 0.09038664962668083, 0.09139441482948564, 0.026630330928138476, 0.054569614492795376, 0.06240399002348863, 0.06320452058521918, 0.0548202251701957, 0.05244179025108032, 0.03685465291733981, 0.03486796322705893, 0.051024380564171655, 0.05478384464294198, 0.034512598523500936, 0.03283897501262413, 0.05305336877883457, -0.0007287828951283684, 0.011439927424606935, 0.011579896425632496, -0.0007363350883802034, -0.0018092010568810835, 0.01252034558631904, 0.012674507520457165, -0.0018309461832261985, 0.05057248933660359, 0.02969632991018095, 0.02991375667965348, 0.050591176017803156, 0.043879950110163886, 0.03638886913556381, 0.036758458640773775, 0.043746474056824594, 0.0517281412027695, 0.0037312372608305873, 0.003928354480344128, 0.05194931857822874, 0.0015728361924445358, 0.01694903077775081, 0.016945963605050757, 0.0015287727157464286, -0.0009054166118248042, 0.019427283582232627, 0.019382256632735854, -0.0009075203112765442, 0.019199832840827286, 0.047925683159991656, 0.047838885623045474, 0.019337494310789585, 0.02804487907090021, 0.039080636929630076, 0.03904505136792013, 0.028131328567099222, 0.028662976811949195, 0.033680865824625046, 0.032420086454900014, 0.029338405218412578, 0.03717892493989398, 0.02516491769617865, 0.024186514122958247, 0.03757197755008694, 0.02427270714338594, 0.003781193389961745, 0.0035807300716053036, 0.02439615996127734, 0.0224907390671491, 0.005563161466554605, 0.00553388442859793, 0.0224430056051596, 0.03183827996747825, 0.007175750986857408, 0.007107675220171631, 0.03182705655758607, 0.030611839868768566, 0.008402191086725689, 0.00815062165289521, 0.0307841101257207, 0.06659910853100234, 0.03302834630539114, 0.03439368373083219, 0.06699721565258906, 0.0619745230692448, 0.03765293176766889, 0.03826889503365349, 0.06312200434843869, 0.03250489984775991, 0.03332153471927117, 0.03593355613039457, 0.033175560736563345, 0.031102506062162857, 0.03472392850638517, 0.03741113856462494, 0.03169797830393706, 0.013137733222132363, 0.002322190318210948, 0.0022071983337412873, 0.01312281163795205, 0.013348313829364184, 0.00211160971109808, 0.00209872617291163, 0.013231283799516333, 0.057740951367456696, 0.05695977193143405, 0.05732290578824624, 0.05803762715912189, 0.05904977238766275, 0.037751972156961265, 0.03700405576246708, 0.059983725717844175, 0.043315576682638385, 0.05348616786270005, 0.053650419676746046, 0.04333736180496055, 0.052015067974568216, 0.025832360748408948, 0.026058215361541206, 0.052394331312468095, 0.0466880810883594, 0.031159347633215904, 0.03152634868094068, 0.04692619798979437, 0.050052812279655766, 0.028181301682888463, 0.02844572902040891, 0.05017226124778833, 0.04245077462144937, 0.0357833393418081, 0.036133942689398214, 0.04248404758129375, -0.0017873739569911724, 0.01153235743630635, 0.011648571910892799, -0.001826289515655755, -0.0005560808009751997, 0.010301064280990056, 0.010364953397947484, -0.0005426710026095717, 0.002281402239953896, 0.026118231801719287, 0.026043577064885987, 0.002304423060363109, 0.0048379028688982475, 0.02356173117181394, 0.02349998552336687, 0.0048480146023070795, 0.0019689820083371263, 0.02260932915910584, 0.022632423137884237, 0.001985306015427505, 0.0025180436417977193, 0.022060267525922928, 0.022021819803423336, 0.002595909349626776, 0.023849685986085122, 0.1851472833571807, 0.18621379311050998, 0.023804273513020946, 0.0794325949387711, 0.12956437440103485, 0.13041057080503116, 0.07960749581862431, 0.0009267656768053537, 0.022170074973273658, 0.02202900335305681, 0.0010146493353219107, 0.0035715709704645777, 0.01952526967976127, 0.01939107633297596, 0.003652576355529723, 0.0032947479909884686, 0.01383910713730872, 0.013955256999744267, 0.0032674012981244657, -0.00026649167334631457, 0.017400346802032434, 0.017463231860048826, -0.00024057356239459978, 0.01815280842440751, 0.003057529715769915, 0.0030238754462654544, 0.018141961953385053, 0.017212579654348557, 0.003997758485479041, 0.003977543336834023, 0.017188294062475365, 0.02846325056391301, 0.006072715254876633, 0.006068449688642811, 0.02876308913591221, 0.026245343519129445, 0.008290622299919346, 0.00826655833381365, 0.02656498049085919, 0.024702980759858495, 0.003935018508599894, 0.003635189476197106, 0.02472217202430232, 0.022529960785145128, 0.006108038483460617, 0.006022475608417645, 0.022334885891643046, 0.002761205250013273, 0.014274511517374125, 0.014528369312578506, 0.002765619372895427, 0.0014224903602503877, 0.015613226406358814, 0.01578017634878153, 0.0015138123370080617, 0.01333686572954922, 0.002566542486710415, 0.002442252943357483, 0.013257223306247259, 0.013711841119991143, 0.0021915670964267535, 0.0019780036311242855, 0.013721472618898493, 0.0007095422865579428, 0.01825604129867606, 0.01816786945769192, 0.0006787576565504217, 0.002390589114331522, 0.016574994471251686, 0.016495165715905664, 0.0023514613983265393, 0.03812124106731505, 0.02737171361485877, 0.029810368154986187, 0.03846027968158362, 0.025278245962880645, 0.040214708718441614, 0.04239416406681978, 0.02587648376967873, 0.002884603065072348, 0.01950737150796497, 0.019501361139992304, 0.0029465805540180266, 0.00434184840405694, 0.018050126168621814, 0.018220677131500704, 0.00422726456231893, 0.0019052577414447529, 0.01400450938391781, 0.013976642841756322, 0.0019463673421362797, 0.00213393648128215, 0.013775830644395826, 0.013795608075334321, 0.0021274021092743426, 0.04117578096960604, 0.037750033303980586, 0.037761404082733555, 0.04090828536554991, 0.03732693832086324, 0.0415988759525977, 0.04163662785755562, 0.03703306159011691, 0.01346788422013429, 0.033979608114795425, 0.03293818417977388, 0.01358069944053998, 0.01458205622934181, 0.03286543610543433, 0.03192471970185327, 0.014594163917412138, 0.02312137474878105, 0.05979876370571548, 0.05955116652194442, 0.02296823377730827, 0.035957305139113466, 0.04696283331525959, 0.04727026520591305, 0.03524913509280042, 0.004716207414950523, 0.02850719610368788, 0.028494005335544782, 0.004573754442110756, 0.007328828109208335, 0.025894575409082514, 0.025720280248325896, 0.007347479530083797, 0.004356088345486068, 0.023345413888552134, 0.02320776679303281, 0.004435367856987374, 0.006145200237762098, 0.021556301995688643, 0.02141652969871485, 0.0062266049509820875, 0.08156341749668089, 0.021959121933011985, 0.022086936308967867, 0.08224796501059126, 0.0652886105767759, 0.03823392885128881, 0.03906750002040147, 0.065267401298427, 0.026619454200473805, 0.06121282412024444, 0.062209646629078894, 0.026498028038612436, 0.018130594982476343, 0.06970168333994857, 0.07067469819103807, 0.018032976472548697, 0.02095453078352435, 0.004061172250879262, 0.004036440990213596, 0.020876602151555863, 0.01975905980852648, 0.005256643226110368, 0.0051367079217290975, 0.01977633522051971, 0.023413398036445224, 0.004229501965938378, 0.00423310381821725, 0.023282739908998828, 0.021964233949738416, 0.0056786660525771585, 0.005617888451940927, 0.02189795527612065, 0.028976634367570173, 0.0054122123826138265, 0.005252054204241407, 0.02847579781736937, 0.027495364409302656, 0.006893482340107342, 0.006567776180599739, 0.027160075840557737, 0.03642700456063297, 0.04505762973773155, 0.047540612485456234, 0.03818464772217632, 0.03695679222557632, 0.044527842073729194, 0.047651369041737265, 0.03807389116240805, 0.022738908035835847, 0.055056072854833944, 0.054732200744350964, 0.022587358364432764, 0.030155725947687697, 0.04763925494339079, 0.04710332538660859, 0.03021623372139397, 0.00245165189996758, 0.016785365990951196, 0.01662998928080491, 0.002524587157668153, 0.0032970229119632264, 0.015939994978610147, 0.015851381088992908, 0.0033031953492081286, 0.014723950957359164, 0.00022688626413635405, 0.00022746858609221367, 0.014552461780223786, 0.017422084161530755, -0.0024712469397604924, -0.0024453170155227474, 0.017225247381335844, 0.03387346292310759, 0.03098707405635666, 0.03153224034064424, 0.035930994917319575, 0.03711660763738331, 0.027743929340500777, 0.028055332826511, 0.03940790243077146, 0.013428740592732065, 0.07803675168024769, 0.07809181339571486, 0.013012182707533458, 0.038029233220937694, 0.05343625905385081, 0.05323766707781173, 0.037866329024384617, 0.02015789606411893, 0.04496906920388186, 0.044614465533777674, 0.019679029743430807, 0.021516447543953827, 0.04361051772718932, 0.043298074708291286, 0.020995420571605077, 0.0162017963381712, 0.040915602745291206, 0.040725902850041996, 0.016101595698811283, 0.021585352920004592, 0.03553204616021259, 0.03531649595288832, 0.021511002589974668, 0.012963063077017991, 0.02993918018169093, 0.02974239094329893, 0.012913925809204295, 0.020249502671839347, 0.022652740587517522, 0.02257588683840648, 0.020080429916372253, 0.010465610842470087, 0.016577482723780613, 0.016469874133953347, 0.010320646536174982, 0.017482297855832985, 0.009560795710455788, 0.00955432390532837, 0.01723619676556323, 0.04863335373031755, 0.20478340606298745, 0.33417952126076, 0.1490207785724731, -0.03494139372513147, 0.12649271283165145, 0.0741434654808976, 0.1266999409849009, -0.033453617104272595, 0.5283529482725062, 0.6735341344507316, 0.08302492909902691, 0.03012495073124185, 0.07101740524378808, -0.014403024953316102, 0.39139811772078975, 0.010272273409410889, 0.10044567285512662, 0.10106542491212994, 0.1141054975825465, 0.25978807005192633, 0.14350458207997813, 0.01003009493291757, -0.004427184575370566, 0.7150369064964459, 1.31776967219086, 0.8169072472690376, 0.26830465022891903, 0.019504063621973617, 0.10633883233458505, -0.08907319627912606, 0.9357144401358458, -0.21116741497620076, 0.6988974634491498, 0.18660711474316416, 0.06229958056522604, -0.02759786991136261, 0.06478562167338951, 1.7104727914006965, 0.41580538166620484, 0.48568272007136515, 0.04783838250127539, 0.020814886785350074, 2.1457300774676713, 0.007356470395559214, 2.172330240322502, 0.04616755613459663, 1.2008605797405867, -0.397478543812714, 0.61570690319105, 0.039989607869967116, 1.5309872887707028, 0.15418153034972162, -0.09123551705301218, 0.02096537247679933, 0.37120263845735463, -0.18266548205572158, 1.0359188254865128, 0.4036638351924194, -0.07519339205637042, 0.5227127445442219, 0.05410189050035575, -0.08656818655789404, 0.16657423238426147, 0.30572260913137167, -0.11091625441585885, 0.10010135196281703, -0.009880016732427456, -0.01877337473866218, 0.025040060376531937, 0.11735972788089417, 1.6263755839334684, 0.009259374068977994, 0.0024252748329659252, 1.11716752643206, -0.27701805120151307, 0.5399486211625079, 0.00734523170521713, 0.21724784090701474, 0.6970913369233964, 0.6671322765556199, 0.010057593141333237, -0.037225148728744, 0.0776805184899941, 0.5571163714513864, 0.08984774913348495, 0.3212303862278484, 0.12490339328697884, 0.4203408747847555, -0.09187043163949977, 0.02449115539215194, -0.018343959760495777, 0.813619437205731, -0.01959681556097678, -0.018026980880008286, 0.8893789744649984, 0.8178676376083235, 0.04958066958602028, 0.04356156184428969, 0.8891779018105791, 0.05792540820467329, -0.011395646437098629, -0.01572515024927436, 0.07940661793232942, 0.7203871709240296, -0.07545039104425516, 0.11230946721460933, 0.20193722774963016, 0.003015365496301932, 0.005020013767844134, -0.1972052154638354, 0.5464803806299969, -0.16677134711627328, 1.4488628758487014, 1.5488833293539046, -0.09961726258639443, -0.028874030626161746, 0.22121914104861132, 0.1388464257132178, -0.06122867112531885, -0.2414905193497684, 0.9401684079616982, -0.05108257596980704, 0.06053970768822435, 0.023913930021069653, -0.021732186618391613, 0.1992948746014453, -0.031621500073963464, 0.03462049455599401, 0.5054791341469824, 0.07991382384148721, 0.35964336237587563, 0.81343579322516, 0.46568127497507195, 0.29591979407982366, -0.09854421853756713, 0.6770918747240255, -0.12994342628495664, 0.040768102941021976, 0.2920687846150235, 0.0436553293936579, -0.02960461776320916, 0.026481443331620363, 0.1205941743418337, 0.00999988297513895, 0.00396283122556497, 0.030118630585207577, -3.283558766888098e-05, -0.006499152944784987, 0.015956284664620363, 0.013218262679743643, -0.005182883415759822, 0.40497902239582223, 0.09615922699676556, 0.12476304908181121, 0.06975857919875515, 0.888721670440536, -0.03546832699048165, -0.20148933860906257, 0.5343262261606857, 0.021573540098168517, 0.005242773140795682, -0.004219171481335252, 0.008690428521787016, 0.1653922797490988, 0.0952738065377342, -0.010516924987284897, 0.2004586095074282, 0.15706853050581984, 0.3243949801450732, -0.00538015687244109, 0.006184493427559534, 0.5598011131015412, 0.6254860508905735, 0.009652516001244654, -0.004445555660409587, 1.2290466425764304, 0.07190826189616341, 0.851468266786895, 0.3785713014755912, 0.05826399783315324, 0.6730296204612914, 0.5622110434457817, -0.1343074222169542, 0.020230808442028295, 0.02029758124779886, 0.4542380888359486, 0.06345544653838558, 0.24654618397499248, 1.0249548080909383, -0.01167330322614518, 0.016030926824456507, 1.3483019053604102, 0.5645309617594004, 1.3150834532314095, -0.044127312532821435, -0.20760175367187667, 0.32398804253692387, 1.314991089940065, 0.048506206238237266, 1.61287365972475, 0.4393180480882201, 1.2863722840566914, -0.0016053611026388911, 0.43989800747930846, -0.32351171863053607, 0.03758474976054287, 0.05377273129973486, -0.05976952717682914, 0.5774630625610535, 0.0008270380440922077, 0.0035305855536817534, -0.054486278010241786, 0.11242516453075374, 0.025171519269912342, 0.00858760043526758, 0.02703876262316723, 0.005073571021887128, -0.0013000665482681816, 0.011852797275328808, -0.0013088952194782327, 0.009820130788535133, 0.02672573088218935, 0.010897625191157041, 0.024758130206384572, 0.008915863082490698, -0.001224541353522044, 0.008180156469535292, -0.001188089747493027, 0.009979459639974975], "data_vars": [1.0594801205308153e-06, 2.72553588980069e-07, 3.7988368634865136e-06, 6.730361387678675e-06, 5.382387910664084e-05, 1.4978481289035853e-05, 3.5773445538152376e-05, 2.0224043314169212e-05, 2.6317390289297953e-05, 1.227910370727598e-05, 1.8648014356658804e-05, 1.4662624916554039e-05, 9.799171659967827e-06, 0.00017095841321037328, 7.311893974981522e-05, 2.9441713510149237e-05, 0.005225893288629064, 0.0028374739657766428, 0.00678398211868441, 0.002322501276525359, 0.00013862722041777442, 5.255941875272884e-05, 8.58021780011788e-05, 5.038473873323951e-05, 2.8834719546333655e-05, 0.0013151360089039715, 3.15490192363032e-05, 0.0008209740273787001, 0.0001172119890501515, 7.833936052847098e-05, 3.080665301040198e-05, 2.3855366066862103e-05, 4.098870774195066e-05, 1.577872604882566e-05, 3.777997866542689e-05, 1.7139442116454595e-05, 0.0001266338168132882, 0.00019123168186105624, 4.597980577459236e-05, 0.00014712887075672365, 0.0018658199991028772, 3.416392848559877e-05, 0.001478144088557997, 2.8455102615764692e-05, 2.1201380628526838e-05, 0.0003988532432003527, 1.4588718155896496e-05, 0.00019983088975605276, 0.0005583788067640479, 0.000534455297628438, 0.00041846648624599485, 0.00035519160956331696, 0.00010893942929291084, 9.09931676521948e-05, 3.704344852322119e-05, 0.00016569538794032488, 0.0004594615237641983, 0.0007473696876091683, 0.0003232885648217517, 0.0002356087809258197, 6.903223820408824e-06, 9.731763441141467e-06, 4.943062046791749e-06, 1.2067491014262364e-05, 0.000282518172429494, 6.421520075549829e-05, 0.00022520252256963866, 0.0001305839418841626, 8.05853318759496e-05, 2.154865663645441e-05, 6.849526638026344e-05, 1.9905856718580128e-05, 1.063394425178834e-05, 6.684350021462971e-05, 1.2243595462802196e-05, 0.00011764053314451079, 4.8706751674116746e-05, 0.00012179014160801195, 3.9239010304833594e-05, 0.00018678456283816288, 7.59212460544177e-05, 0.0005390414758983796, 4.463243783750214e-05, 0.0007154965023986585, 7.853140632135996e-05, 0.00014656040832005196, 4.540224426132477e-05, 0.00025333310840939746, 8.93263004497438e-06, 2.5541485784743427e-05, 6.6961859693778205e-06, 3.07060482378342e-05, 0.0009295672533190327, 6.394837261505954e-05, 0.00043944951989356815, 4.5976043522878764e-05, 2.9207621277667296e-05, 0.00018984344627069193, 2.0565122878195812e-05, 0.000368023639285626, 6.328525393661417e-05, 0.002120390043420581, 5.670296365350776e-05, 0.0019229787935683331, 0.0002193701562054889, 0.00021380304685861287, 5.257695527372076e-05, 0.0005328186713886013, 0.003814391219656698, 0.0008305742738303386, 0.002654193160324723, 0.0012865001262028913, 6.65716243667182e-05, 0.0010030085716642944, 2.608440140339554e-05, 0.0009714798439484752, 0.0026367131321440762, 0.00033373695172968107, 0.0018241938840383304, 0.0006939411172079906, 0.00036774940900889116, 0.0013835494689630576, 0.0003236062115370001, 0.0019398536708528547, 6.9349123331590025e-06, 2.8212777060862372e-05, 1.0520786701974194e-05, 2.223965436649442e-05, 0.0002841007467161194, 8.35507749589621e-05, 0.0001868079734183123, 0.00017785691073792312, 1.5040203945242374e-05, 2.1106750654828438e-05, 2.014651574732065e-05, 1.3751005877251281e-05, 4.039833658480404e-05, 0.0002941485977866763, 2.7693942679989096e-05, 0.0004117018128223004, 0.00011790802462844803, 0.00011509538582381228, 6.519024603837533e-05, 0.00016213059168665529, 0.005903053302286863, 0.001588309274099357, 0.004786686836110475, 0.0015325057267862325, 0.00013753248252362508, 0.0004274627780234333, 9.126708743567628e-06, 0.00011621143917080332, 8.505602516428852e-06, 3.475490238169531e-05, 0.00044549906467956685, 0.0004950659769685739, 0.0003520399406755685, 0.0005233835821065716, 0.0001854131539241624, 0.001288761678244539, 0.0006267461831987571, 0.00045050900910631854, 2.2111706877839136e-05, 4.0591065209522494e-06, 1.0764652121215444e-05, 8.458620084713004e-06, 0.0011354624118341714, 0.00047674312631690985, 0.0008284944694969081, 0.0005062678778341236, 0.00010051244590174548, 9.63640333502573e-06, 8.925428115883175e-06, 6.470059069342805e-05, 3.536558243021772e-05, 0.0014407558324813078, 7.062666024618787e-05, 0.0011398964647312138, 2.6524731792599268e-05, 0.0005790577238575185, 2.313234770159121e-05, 0.0002757053962291123, 4.242263899258239e-05, 0.0012787117686122815, 5.037567854500018e-05, 0.0009977659871532926, 0.0015498954953229265, 0.0002545094331805259, 0.0009067194447282792, 0.0006139468867998354, 5.792205125306312e-05, 0.00018607646040982737, 5.687970128678185e-05, 9.993866173432596e-05, 3.947069101117978e-05, 0.0008518351053578166, 0.00012896899612514274, 0.0003753703719456032, 2.4627795913546084e-06, 1.0976770033251338e-06, 1.2838225709455346e-06, 4.1076045595827125e-06, 5.205744076071994e-06, 1.4363290542444095e-05, 1.3838820807275359e-06, 4.675906729856298e-06, 0.0012042540454591155, 0.0007251887783729236, 3.0118107959853865e-05, 3.535110053751745e-05, 1.7155083332954026e-05, 4.7429870637447556e-05, 4.646046118769793e-05, 5.099185095581704e-05, 2.623175882477902e-05, 4.0155149421197127e-05, 3.578654731262653e-05, 2.248446272990295e-05, 2.1816581629413414e-05, 2.5767940328241642e-05, 4.6046122194404476e-05, 1.7910188450481216e-05, 3.1516709181278855e-05, 1.6733073839620444e-05, 3.235934484917388e-05, 1.2664208427478894e-05, 2.2913501824478763e-05, 1.3080697172451038e-05, 1.7639602231210943e-05, 1.691637100385546e-05, 1.8790203604608645e-05, 1.742243847999937e-05, 2.072873003580199e-05, 8.173765376737344e-05, 3.707455365325117e-05, 3.288124146827863e-05, 5.776563236440849e-05, 0.00013844566676100658, 2.5310417305476104e-05, 0.00013090567247848905, 0.0004551501948939528, 6.580804229596052e-05, 0.00019366860048942327, 0.00017888524401412392, 0.00024890852595073863, 0.00013769675254980478, 0.00016768135371975844, 0.00018049930151472747, 3.8020972625608456e-05, 3.624636995182391e-05, 4.781449297998094e-05, 2.9392546563003094e-05, 5.877569363846459e-05, 3.029918664333598e-05, 4.50557338132182e-05, 4.9126860606107744e-05, 4.692762117159518e-05, 3.634602031165738e-05, 1.328324011174233e-05, 0.00010006177450698811, 2.6005991748777444e-05, 1.2087272541558745e-05, 2.2154778823852434e-05, 2.0779639848173243e-05, 2.0449343251717482e-05, 2.9990687351420636e-05, 1.4909388681776284e-05, 4.544158817316401e-05, 4.7410137989570686e-05, 0.000509364689853423, 4.025966413131982e-05, 0.0007597799815349537, 1.6077247826510004e-05, 9.46928645848218e-06, 7.849952096537642e-06, 1.4638087065272441e-05, 1.9033532774381275e-05, 5.9592194467675424e-05, 1.852478548202761e-05, 5.938890733828287e-05, 0.0030674286681230006, 0.00037027426368636986, 0.0038221061281181576, 0.00025683718396529704, 0.0002810714744834999, 0.0010356764474608688, 0.0002771951488042809, 0.0006982421214743314, 3.989063291967361e-06, 2.886712735656816e-07, 3.671604629569832e-06, 7.776125261306862e-06, 1.662905028704839e-05, 5.303564654566287e-05, 2.095799373053182e-05, 3.518568668426357e-05, 1.3615743459573504e-05, 2.7103885863378598e-05, 1.6124509904006974e-05, 1.9269593591349022e-05, 0.0001896603421464517, 1.0802718302957497e-05, 3.239612874467313e-05, 8.805876780318547e-05, 0.002657483682664032, 0.005545986272358718, 0.0024383602004632767, 0.006805730363136899, 5.049520486134653e-05, 0.0001450821936100045, 5.218467379589039e-05, 8.691148773624864e-05, 0.0013072194292576911, 3.1636301011706656e-05, 0.0008259194322667765, 2.920649012044813e-05, 8.586513923936261e-05, 0.00011410225703478834, 2.8167876709062274e-05, 3.23753769573201e-05, 1.4386710196565252e-05, 4.154294106928284e-05, 1.5467029340489954e-05, 3.846667303088213e-05, 0.00019466793706713728, 0.00014424235912089022, 0.0001539456278170183, 5.367565324182263e-05, 4.488339586641347e-05, 0.0018459472165018676, 2.934853341919321e-05, 0.001451140232307887, 0.0004086938898506197, 2.4670905532773632e-05, 0.00020493353524847678, 1.4582483736128335e-05, 0.0005469165058671916, 0.0005018116113807328, 0.0003505513967033428, 0.00038392131044362926, 0.00010093614483008115, 0.00010216691798561244, 0.00017349402511244067, 3.5719120836273674e-05, 0.0007938609399408804, 0.0005071729709766206, 0.0002513785236284059, 0.0003634408991069559, 1.009386294159729e-05, 6.35935259812004e-06, 1.2514507930647499e-05, 4.532351099854603e-06, 6.820484285330995e-05, 0.0003165136385308242, 0.00014078474897105217, 0.00024837245826614683, 2.2874529017175536e-05, 8.249541596168185e-05, 2.0764759446661313e-05, 6.941898849135086e-05, 7.198516491245287e-05, 1.1038006363088498e-05, 0.00012616478743427182, 1.1770277061748145e-05, 0.00013431477176269486, 5.340208921553055e-05, 0.000209955759045609, 4.181038356394016e-05, 0.0005491049921753959, 7.359725529386096e-05, 0.0007095865583166179, 4.749631315965734e-05, 0.00015778888570367911, 8.135479556482263e-05, 0.0002691801304123532, 4.8823863604869186e-05, 2.5478508546013452e-05, 8.402027430345306e-06, 2.966169259180345e-05, 6.424385466109649e-06, 7.259270272280489e-05, 0.0009013820073693063, 4.334714309475501e-05, 0.00042500444687302647, 0.00020466659134382194, 3.0451779636919616e-05, 0.00038903646287579953, 2.1414635967875257e-05, 0.002091925139605111, 6.704713121554934e-05, 0.0018982382834611304, 5.413316352103373e-05, 0.0002253345825814175, 0.0002350199159922918, 0.0005631019408299877, 5.485341657401156e-05, 0.000893003516032224, 0.003974664028897229, 0.0013825110137737906, 0.0027854986136836655, 0.0011139854337367681, 5.893910828042108e-05, 0.001104527098907065, 2.357686004898443e-05, 0.00038127028931351576, 0.002753305541562316, 0.0007599345405812764, 0.0019364797653093214, 0.0014197973808631641, 0.0003262614035357424, 0.001967335122018848, 0.0002840962851013697, 2.8541765785971127e-05, 7.038523433405274e-06, 2.3363396036289937e-05, 1.0381025025151376e-05, 8.804632461431727e-05, 0.00031310651680594787, 0.00019293140720539554, 0.00020476966850655086, 2.1022798589621955e-05, 1.6603221990393116e-05, 1.3379594794981458e-05, 2.1750908557069433e-05, 0.00034056915960214637, 3.963149043231508e-05, 0.00047662512938142544, 2.8063725544958754e-05, 0.00011824217820738248, 0.00012024631493814224, 0.0001617605351590279, 6.547254455289843e-05, 0.0016911000058703741, 0.0059833933022530395, 0.0015826378777956225, 0.004929458372073227, 0.00041340463123020534, 0.00015613844632310578, 0.00013616697113046097, 1.0517754082391674e-05, 4.0599309254680175e-05, 9.906946287010044e-06, 0.0005300195513288564, 0.0004651586435184858, 0.0005693578810630607, 0.00036852427958986055, 0.0014026523090673187, 0.00019992141581249854, 0.000471143907764555, 0.0007232345957248597, 4.220988817819786e-06, 2.3318678358921362e-05, 8.918937289783813e-06, 1.1819459720737379e-05, 0.0004947720866344912, 0.0012536213932252947, 0.0005450334673496501, 0.0009422788305095586, 1.0793877618552273e-05, 0.00010276351545406927, 6.721708892870326e-05, 9.114764600588951e-06, 0.0016395141939564034, 3.984322992251746e-05, 0.001281557326066383, 8.153000998534548e-05, 0.0006771397377354394, 2.9020293570717066e-05, 0.00032346827477380596, 2.6158493145993326e-05, 0.0014703977033993399, 4.333347856930253e-05, 0.0011614821816555833, 5.594344333283241e-05, 0.00029342167089840875, 0.0016783439180827334, 0.0006811830536370498, 0.00103254559971164, 0.00018596196950305746, 7.185864764449183e-05, 0.00010270906838083589, 6.81023908656535e-05, 0.0009530744656703594, 4.196076121243067e-05, 0.00041481185742566113, 0.00015174895884640714, 1.308589401714769e-06, 2.3483779785318378e-06, 4.473219552290187e-06, 1.290128157917126e-06, 1.564595023951315e-05, 5.752944671330411e-06, 5.2332005777634825e-06, 1.4335919535561773e-06, 0.0008012569145745162, 0.0013041030325391398, 4.066122322779061e-05, 3.112917151359397e-05, 5.3139271538946026e-05, 1.7704370390000434e-05, 5.335118036498261e-05, 5.076067753601732e-05, 4.14375299195684e-05, 2.7826700900967583e-05, 2.4921739120871814e-05, 3.709416286909844e-05, 2.8226730024582733e-05, 2.237791590635615e-05, 1.9817148670105723e-05, 4.867321884792953e-05, 1.7647917672507583e-05, 3.336846870688537e-05, 1.338636076347479e-05, 3.304390154901161e-05, 1.3431685284735607e-05, 2.3752317402267957e-05, 1.6271843611418986e-05, 1.7490864541389843e-05, 1.6916958972574546e-05, 1.8544774450939302e-05, 8.4290810572701e-05, 2.1012165531900607e-05, 3.5285717024879804e-05, 3.90051782313286e-05, 0.0001504116346373979, 5.6808343466785675e-05, 0.00014391068257186247, 2.478027876948236e-05, 6.872259501529872e-05, 0.0004700693933369619, 0.000185264553862014, 0.00020440561339353085, 0.00014038092054105157, 0.0002537785565665306, 0.00018363246361181412, 0.00017304890715759798, 3.997543339358139e-05, 4.3703645630370785e-05, 3.318296648457938e-05, 5.3790687445191556e-05, 3.287151771452928e-05, 6.621150252527674e-05, 5.226832736147495e-05, 5.012885499764175e-05, 4.0893197111986885e-05, 5.129649959552995e-05, 0.00010700083783896036, 1.4696610687008682e-05, 1.2252053163148733e-05, 2.6339505913995684e-05, 2.0209485671857402e-05, 2.3515964325263428e-05, 3.086313418333645e-05, 2.3108580584172636e-05, 4.7086339482070564e-05, 1.7002849247245414e-05, 0.000526775162629274, 4.972016833670023e-05, 0.0007937344677830592, 4.448499283137594e-05, 9.979479349650605e-06, 1.718021396225208e-05, 1.533085333552541e-05, 8.560415067516582e-06, 7.031777212638991e-05, 1.937512362494311e-05, 6.746262514771441e-05, 2.0866454006894525e-05, 0.004484593106525537, 0.0007668633766489154, 0.0030792645823952422, 0.00040701724896781064, 0.0003079171281180028, 0.0006502751077376835, 0.0003026982738919248, 0.0010683636652686237, 7.380826644880708e-05, 8.767555852105811e-05, 8.586963935385035e-05, 7.452072471361698e-05, 4.920818909294053e-05, 5.1076814276089675e-06, 5.280467803255978e-06, 5.0012218918678475e-05, 5.1315562805696116e-05, 2.9926894343767807e-06, 3.1282787171297654e-06, 5.231017232493421e-05, 2.6995513415273745e-06, 8.317840305466506e-05, 8.527858440735452e-05, 2.8848691133020246e-06, 3.197438698151059e-06, 6.427759576227202e-05, 6.510412604777124e-05, 3.4200361855872223e-06, 1.0930500956427844e-06, 5.0006521150210716e-05, 4.934381323545789e-05, 1.2150285470595734e-06, 2.204378526965042e-06, 4.094760623768627e-05, 4.0494659080191176e-05, 2.3048697417565745e-06, 3.631712062847348e-05, 1.6087346279806101e-06, 1.5795127714626879e-06, 3.449773933162498e-05, 3.8410113264787835e-05, 7.968609067409286e-07, 7.54982520509772e-07, 3.663219895014984e-05, 7.005645047100158e-07, 2.8933343047735935e-05, 2.849427840279321e-05, 7.005870823241553e-07, 7.186326436270446e-07, 2.807141354312301e-05, 2.722173772681299e-05, 7.263923361359025e-07, 0.0005748062997494172, 7.844123024687041e-05, 7.369185239816194e-05, 0.0006657247166769471, 0.000548876968526337, 6.112311305859667e-05, 6.259301832718787e-05, 0.0006443077121636475, 6.572694163487291e-05, 0.00024821734343091886, 0.00026346482874760926, 6.554586160349207e-05, 9.707101379650248e-05, 0.00017033783056814695, 0.0001804611233436268, 9.861449458364352e-05, 0.0006930568792454487, 0.00015514264761862744, 0.0001320027762165087, 0.0007085530264936803, 0.0007871453158197991, 0.00015119453092530082, 0.00012895585380845044, 0.0008066999589798472, 1.034755340285389e-06, 3.368636098823187e-05, 3.3907346109831475e-05, 1.0664281048537583e-06, 6.817795006145992e-07, 3.7713410328312895e-05, 3.796549374366082e-05, 7.593141554810855e-07, 9.63607861114164e-05, 0.00016442209750320883, 0.00013704455349696667, 7.672023803388378e-05, 6.241748157321283e-05, 0.00020017651296967955, 0.00016126828505704245, 5.004489235380213e-05, 0.000102006168303008, 2.8795739964100456e-05, 2.4456504856942155e-05, 9.004075678305491e-05, 4.09233714299581e-06, 4.329014689344e-05, 4.2341046404766565e-05, 3.91540675524413e-06, 1.433305805200348e-06, 5.361463329354774e-05, 5.2342653037891905e-05, 1.4340675326900563e-06, 5.8026236440518094e-05, 6.82725767618621e-05, 6.701268004247009e-05, 6.225420301378221e-05, 7.397851497173414e-05, 6.918936128803613e-05, 6.937241269980972e-05, 7.920422099520613e-05, 0.0003651419437893758, 0.0001372237861984732, 0.00012770533825599476, 0.00036932087676698174, 0.0004926794293880091, 0.00013809872858761504, 0.00013015138228627345, 0.0005019439576907384, 6.643060055650643e-05, 4.155122193681433e-06, 4.115083964435009e-06, 6.4469319801529e-05, 5.514226660152654e-05, 2.0048750106420783e-06, 2.001652764289049e-06, 5.32590120574903e-05, 8.67072713425863e-05, 1.0355574613781575e-05, 1.0148190282555193e-05, 8.785209656700202e-05, 8.15460565069817e-05, 1.2153466507199566e-05, 1.1925310289271221e-05, 8.184310746183355e-05, 0.0008248400078191776, 8.056395147235542e-05, 8.594712396412276e-05, 0.0009116735494243868, 0.0007443043385693175, 9.411292273322973e-05, 0.00010187733308670901, 0.0008442927167990665, 8.714442100577892e-05, 0.0004019647020428796, 0.00041461392223092307, 9.28454957140103e-05, 7.358304596003851e-05, 0.00044489825967648794, 0.0004746281249334342, 7.383791601601093e-05, 3.4594909862063656e-05, 1.1255487050824329e-06, 1.0350356966630901e-06, 3.412482244812239e-05, 3.852096965612535e-05, 2.204799194406762e-07, 2.115861839015694e-07, 3.74415320962922e-05, 0.0002865712160648112, 0.00017079251586722303, 0.00014721457797135145, 0.00025499609593609285, 0.00031915733991977845, 0.0007379175096554074, 0.0007672092225756608, 0.00026040492985396455, 0.0001768068168344776, 0.0008593821178686512, 0.000880411018782785, 0.00015905347594424396, 8.225754869055655e-05, 0.00013209466568600954, 0.00010699709623987626, 8.453042977292899e-05, 6.040144094242186e-05, 0.00016391034022622918, 0.0001336149658288617, 6.078396596978433e-05, 5.759516284861461e-05, 0.0001500916510703256, 0.00012001119650064457, 4.747137483366554e-05, 4.0962214620813084e-05, 0.00017194745503194071, 0.00013514226826199185, 3.448166270081673e-05, 3.547497677673516e-07, 3.036416279060138e-05, 3.066900264586907e-05, 4.0424831104298443e-07, 4.3974987742151497e-07, 2.9614195545265745e-05, 2.968233429764669e-05, 4.331177230579997e-07, 3.3050434025198383e-06, 5.361758688649746e-05, 5.3052218478669644e-05, 3.1824066989472778e-06, 3.3496948541293564e-06, 4.5508464059287835e-05, 4.441584700918188e-05, 3.2985719227681086e-06, 1.428909773089303e-06, 3.363385128034181e-05, 3.281282590392399e-05, 1.4347328032300456e-06, 1.6542821385719143e-06, 2.9329845712894246e-05, 2.8338369312012055e-05, 1.6254595813571563e-06, 0.00021026307710566363, 0.0010925110837346518, 0.0010350053304132125, 0.00018425809763950545, 0.00045753421984828915, 0.0005769741651165493, 0.0005260894038302856, 0.0004220543257882114, 1.1062332955682802e-06, 3.928817062942873e-05, 3.7693850973500995e-05, 1.0575637484680397e-06, 1.957641110897599e-06, 3.2462767902798574e-05, 3.159821333986785e-05, 1.7849670272787905e-06, 2.2724039314337258e-06, 2.7809925192343464e-05, 2.737673907576963e-05, 2.2662603373686167e-06, 7.975525628647507e-07, 3.5423045610205394e-05, 3.504132897184692e-05, 7.77745329182233e-07, 5.059459782736882e-05, 4.956888957672382e-06, 4.829148000150586e-06, 4.850182449122898e-05, 4.1655476422815715e-05, 3.424203988537197e-06, 3.3221456706416073e-06, 3.993260456516565e-05, 7.309903699073522e-05, 1.0567608484287605e-05, 9.97421878720741e-06, 7.249624657794608e-05, 6.256899482349968e-05, 1.5022805879781487e-05, 1.4160685630548545e-05, 6.234668535382133e-05, 4.881545108686454e-05, 4.657793399647491e-06, 4.393124328825578e-06, 4.8397057720475864e-05, 4.188836595654353e-05, 5.747616284205044e-06, 5.377559598453116e-06, 4.15533689863155e-05, 2.6178371708873654e-06, 3.0720942640474924e-05, 2.987501383800604e-05, 2.469225889377192e-06, 2.065834536164378e-06, 3.5312511541192126e-05, 3.421162668189442e-05, 1.8452265013482172e-06, 1.8027843375079875e-05, 1.1167827040778146e-06, 1.0160326343044813e-06, 1.7263075914591007e-05, 2.2885636213750884e-05, 1.5913745605607775e-06, 1.4965203497486081e-06, 2.1955686521187286e-05, 1.2843038275090144e-06, 2.8584156387949048e-05, 2.7919224372100145e-05, 1.1470989483830683e-06, 8.19167840298043e-07, 2.5830889319138603e-05, 2.486849184820467e-05, 8.385502977668323e-07, 0.0001345817268736535, 0.0004609122320990311, 0.0005063558022713558, 0.0001483029504132185, 6.575319369800412e-05, 0.0006490963588467264, 0.0007395909693945843, 6.891778968186606e-05, 3.104043189451991e-06, 4.0732580034462656e-05, 4.0057558652267166e-05, 3.302210308130301e-06, 2.7119271360563616e-06, 3.2080650470481e-05, 3.199685054016754e-05, 2.62949887547284e-06, 6.205801703668073e-07, 2.3435136685035433e-05, 2.3564870457758668e-05, 6.111407357442097e-07, 1.7364822917457815e-07, 2.3396634951514785e-05, 2.412478202058324e-05, 1.6617048287102596e-07, 0.00010577427206275059, 8.097429633672431e-05, 6.81775525358065e-05, 8.856608222585093e-05, 0.0001262607449564163, 6.661871631104395e-05, 5.4807696673640976e-05, 0.00010255449047653664, 1.4183822017694884e-05, 2.4413479914436795e-05, 2.7834662182947393e-05, 1.4086130089120049e-05, 9.771237470405123e-06, 2.3209326059032636e-05, 2.6616221829314822e-05, 9.810247996929998e-06, 0.00013251767077957952, 0.0010884403075358854, 0.001084258701316466, 0.00011577565644882892, 0.00014038050132153372, 0.000817444118885173, 0.0008251341355283005, 0.00011598642635467235, 4.961574018107203e-06, 4.914665752821996e-05, 5.015333996767014e-05, 4.836332823371192e-06, 7.137939107402958e-06, 4.431798023505323e-05, 4.498455935510227e-05, 6.864582412150762e-06, 4.705954345267453e-06, 4.204399091714339e-05, 4.2485718046191276e-05, 4.7918814680223065e-06, 4.18855849863504e-06, 3.8623924977088175e-05, 3.8249047860901636e-05, 4.4602310717939e-06, 0.00023399488691256272, 4.7073718065383475e-05, 4.493855625724958e-05, 0.00020339517028317717, 0.00020343699724544265, 5.57538273729579e-05, 5.250949890319037e-05, 0.0001751908092586548, 5.074823254782748e-05, 9.811263830196532e-05, 0.00010090359479026399, 5.077950423387889e-05, 2.1507121504022256e-05, 0.00010663511208717571, 0.00010309294331898183, 2.1760317374897242e-05, 3.7693055201634435e-05, 4.577140202819219e-06, 4.439624400136502e-06, 3.677311510489764e-05, 3.083027938034853e-05, 4.082330546227533e-06, 3.957059338425908e-06, 3.0207473360351686e-05, 5.778164883701727e-05, 9.827040316223498e-06, 9.495752238848753e-06, 5.672481915820477e-05, 4.915904531361034e-05, 8.019393134515162e-06, 7.67077903291333e-06, 4.832725108851232e-05, 7.060737824679604e-05, 7.087459457777584e-06, 7.024246867748977e-06, 6.819720116417174e-05, 6.464653895854007e-05, 5.643332659783258e-06, 5.448958231798164e-06, 6.370210740737886e-05, 0.00017407749567632339, 0.0006552468477936813, 0.0006481075869470452, 0.00018448423784217407, 0.00015268141475435, 0.0006108142979046571, 0.0006130722460031794, 0.00016198069718283907, 5.2953352649156803e-05, 0.00012819539704001553, 0.00012247072064465393, 5.316043853056784e-05, 6.860664324599582e-05, 0.00012420655139888103, 0.00011649256006491355, 7.138000577207459e-05, 9.291471082572729e-07, 2.7352308562128744e-05, 2.654887025666355e-05, 8.606095420509763e-07, 5.537846395185544e-07, 2.5590772574211888e-05, 2.495377990595971e-05, 5.510433828377089e-07, 3.24899192745148e-05, 8.989999716263888e-07, 8.28089939106559e-07, 3.1885405643919995e-05, 4.070294574753956e-05, 5.463908801342247e-07, 5.466547417920515e-07, 3.984310082621543e-05, 0.0004606443676811983, 0.0001015653935648403, 8.862608692447569e-05, 0.0005385981846836117, 0.0005583609459689752, 4.5695426458850135e-05, 4.193868288953972e-05, 0.0006282743449053935, 0.00010365184094127442, 0.0002337741399291531, 0.00020398806789257185, 8.275986013634972e-05, 0.00014326591107720582, 0.00012324123332968596, 0.00010672000598673305, 0.00011246420095652848, 4.519486004513718e-05, 0.014267650713839508, 0.014239215945462179, 4.375686120747138e-05, 4.602734988962144e-05, 0.013178365971423368, 0.013120058611808443, 4.3214105593794766e-05, 8.780313952694347e-05, 0.01082106003425755, 0.010816486093976221, 8.810023082971834e-05, 8.287885303854529e-05, 0.008085113642837441, 0.008085517397519906, 8.330451842159912e-05, 0.00010198310740547659, 0.0054145075473547915, 0.0054008568260358525, 0.00010566411728876022, 0.00012138889448550911, 0.003090848845883638, 0.003081707429654503, 0.00011914462580340149, 5.879247623032381e-05, 0.0015575930185571564, 0.0015469430834569788, 5.942270235216951e-05, 0.00010513774100118838, 0.0005539897554077421, 0.0005491775670206694, 0.00010216636407601404, 0.00020313773750427674, 0.0006635680792487921, 0.0013997434948345032, 0.007026700589887805, 2.56126819554745e-05, 0.0003761783286083079, 0.0005976046748648476, 0.0002906714972704942, 0.00015987099729948792, 0.004209202172586877, 0.005755379591615814, 0.001388123704463277, 2.4743695593854282e-05, 7.639953383809642e-05, 0.00017155451643810854, 0.0022839357476078744, 4.511232734672015e-06, 0.00014461097013792755, 0.00012016473737666442, 0.00012081642921351525, 0.001287404370312779, 0.000559119062741553, 1.2211363787686158e-05, 1.1943189770155127e-05, 0.00591788288202052, 0.019970213002928627, 0.011754112899173096, 0.0024562012465942883, 1.4966125424274376e-05, 0.00023154900645144116, 0.00045763796416625687, 0.006776609650876252, 0.004514175647521074, 0.014246316348391613, 0.0008767979765407122, 0.00018983794011457854, 1.7306137938797073e-05, 8.033268812390195e-05, 0.03407008217281547, 0.009033510198987566, 0.004784162356266646, 0.0009148315931940271, 9.674660838662389e-05, 0.05119441117301382, 8.159015275370149e-05, 0.05306120971223334, 0.00599150788386126, 0.01467267156401233, 0.0021825866379098446, 0.0052640944097296005, 0.00010816876005299564, 0.03834762676326592, 0.0016495416744712014, 0.001188717036299078, 6.297683999298468e-05, 0.010334266801472265, 0.0022021872519213596, 0.014402347502940505, 0.001942761715832034, 0.000733996632362841, 0.007071271115505972, 0.0008679402634111199, 0.0002893251565461353, 0.0006049124346317719, 0.0008918202020026816, 0.00018872808514114477, 0.0003803693186580078, 1.0433743941757444e-05, 1.6620916755727897e-05, 3.8407130452044214e-05, 0.003018393146749446, 0.034685579243857644, 2.6158463555000625e-05, 2.9174757763911876e-05, 0.019370178198613305, 0.0022742455769488045, 0.005614655505149592, 1.3537792252405265e-05, 0.0012835246306086888, 0.00826166558382751, 0.004342307530414021, 2.0190440888740574e-05, 0.00043911047754837307, 0.0007110761076740471, 0.0035900761491488536, 0.0001313651617928921, 0.0016026406003944993, 0.0015325373372423088, 0.0020368890468971832, 0.0001834908820637703, 1.995098967858798e-05, 1.742255620556468e-05, 0.01123970499901931, 3.874465089471696e-05, 3.826287067121454e-05, 0.012821405831850626, 0.011399677585419493, 0.00014067605178906035, 0.00013476469008755215, 0.012971114644962258, 5.589956235246366e-05, 2.156021697065197e-06, 3.6593093085241535e-06, 8.667524574060525e-05, 0.009529199161653519, 0.0004432162566449831, 0.0003712097415578356, 0.0007127187598614023, 9.99060923144683e-05, 9.709561650753267e-05, 0.0008781382729594536, 0.005303694150017595, 0.0004200359221073041, 0.0102602571470586, 0.011731014242210444, 0.0003298130152788408, 2.1671197686147745e-05, 0.0008185238365552727, 0.0002961379734956069, 6.060044851056479e-05, 0.0004587564663591653, 0.004920448813340636, 8.215994027169422e-05, 0.00011518520448716753, 7.526827441138758e-06, 6.255837606217936e-06, 0.0007030857665976702, 5.591064818289419e-05, 0.0017663077955264732, 0.0037088124319359372, 0.0012121835180012811, 0.0015485836482227908, 0.007846585290566203, 0.0035311539219088804, 0.001038033380678755, 0.00016815954914440898, 0.006174188459948834, 0.002327755629472236, 0.00036181279444963025, 0.0014930931235972488, 3.118254855740899e-05, 1.5214208925518525e-05, 0.00014832280696650866, 0.0005808587333023869, 7.41353373174063e-05, 6.075581693139708e-05, 7.19239594832535e-05, 1.940848324161595e-06, 5.3008475782724834e-06, 1.996063491647412e-05, 1.4265780986755467e-05, 3.561953143583157e-06, 0.001608354886672519, 0.0005683950596934541, 0.00046496223731354243, 0.000607975541107159, 0.010788206047899599, 3.2779466326862344e-05, 0.0005829646249128405, 0.0050109353162559, 9.284660622989134e-06, 4.821815294353416e-07, 5.014127567432289e-07, 2.2616977194664663e-06, 0.0012882891782310508, 0.0005457962064423119, 7.157132602068503e-05, 0.0008556125010799068, 0.0015784865841231262, 0.0018903071876847917, 2.724052286138611e-06, 3.3968025715006133e-06, 0.0047496979914099105, 0.01155329972927938, 2.6166348081548594e-06, 9.072354966005404e-07, 0.028601383495686482, 0.0003352337899649174, 0.010868165074294032, 0.003537232566733904, 7.9260832822755e-05, 0.009361233155720365, 0.005983685358632272, 0.0008632653376820973, 4.0191168946359705e-05, 3.3130672905955115e-05, 0.004938751146984588, 0.00019241372782642852, 0.002505745406896359, 0.010845348993885574, 7.74723734228028e-06, 1.1984625501550946e-05, 0.01664856693711803, 0.011553323369603677, 0.021663160432844258, 0.0030285801966769502, 0.0018885408487559284, 0.004192168270427411, 0.021089477680105707, 4.795356948788662e-05, 0.03054924807601293, 0.0045193144548754316, 0.027618018124121166, 7.443953831486155e-06, 0.00496997682640464, 0.0022018376042287737, 0.0005228414329810238, 0.0007457928802658777, 0.00026654365162378737, 0.008096586116532856, 1.9870943719848092e-06, 2.4436384596768505e-06, 0.00014937311317124135, 0.00040143819601704466, 8.54224552076957e-05, 5.8208580629595665e-06, 8.6023355554555e-05, 5.667500726567963e-06, 7.346991348116933e-06, 1.894369483792884e-05, 7.185934556625867e-06, 1.7956148534892538e-05, 8.972296265525944e-05, 1.4430903429912857e-05, 9.129305628479893e-05, 6.114683719898276e-06, 8.014289411734202e-06, 1.4820639946981858e-05, 7.750950581008709e-06, 1.871186712950176e-05], "data_std": [0.001029310507344997, 0.0005220666518559378, 0.00194906050790798, 0.00259429400563596, 0.007336475932397028, 0.0038702042955166918, 0.0059810906645989224, 0.0044971149989931555, 0.005130047786258716, 0.003504155205934232, 0.004318334673998624, 0.0038291807108772028, 0.003130362863945301, 0.013075106623288901, 0.008550961334833367, 0.005426021886257854, 0.07229034021658125, 0.05326794501176709, 0.08236493257864302, 0.048192336284157866, 0.011774006132908816, 0.007249787497073886, 0.009262946507520098, 0.007098220814629502, 0.005369796974405425, 0.03626480399649185, 0.005616851363201915, 0.028652644334837583, 0.010826448588994985, 0.008850952520970326, 0.00555037413247089, 0.004884195539376173, 0.006402242399499621, 0.0039722444598520945, 0.006146542008758004, 0.004139980931895049, 0.011253169189756643, 0.01382865437636852, 0.006780841081650001, 0.01212966902915012, 0.04319513860497356, 0.0058449917438435075, 0.03844663949629404, 0.005334332443311412, 0.004604495697525066, 0.01997131050282762, 0.003819518052830291, 0.014136155409306052, 0.02363004034622133, 0.0231182892452802, 0.020456453413189562, 0.018846527785332686, 0.010437405295039129, 0.009539033895117198, 0.0060863329290485905, 0.012872272058200327, 0.0214350536216777, 0.027338062982025048, 0.017980227051451594, 0.015349553118114537, 0.002627398679380201, 0.0031195774459278082, 0.002223299810370106, 0.0034738294451890357, 0.01680827690245178, 0.008013438759702247, 0.015006749233916006, 0.011427333104629558, 0.008976933322463167, 0.004642053062649587, 0.00827618670525644, 0.004461598000557662, 0.003260972899578949, 0.008175787436976925, 0.0034990849464970404, 0.010846222067822086, 0.006979022257746191, 0.011035857085338318, 0.006264104908511159, 0.013666914898328842, 0.008713279867789036, 0.023217266762010975, 0.006680751292893796, 0.026748766371529332, 0.00886179475734797, 0.012106213624418329, 0.006738118747938832, 0.01591644144931264, 0.002988750582597079, 0.005053858504622327, 0.002587698971939708, 0.005541303839155023, 0.030488805377040157, 0.007996772637449407, 0.020963051302078334, 0.006780563658198245, 0.0054044075787885665, 0.01377836878119801, 0.00453487848549394, 0.019183942224830275, 0.00795520294754409, 0.04604769313896822, 0.007530137027538593, 0.043851782102536416, 0.014811149725983089, 0.014622005568957114, 0.0072509968468977256, 0.02308286532015905, 0.061760757926507814, 0.02881968552622215, 0.05151886218002803, 0.03586781462819963, 0.008159143604981971, 0.03167031057101105, 0.005107289046391984, 0.031168571413339997, 0.051348935063388376, 0.018268468784484404, 0.04271058281080147, 0.026342762140823248, 0.019176793501753393, 0.03719609480796415, 0.017989058105887593, 0.044043769943691864, 0.0026334221714641583, 0.0053115701125808715, 0.0032435762210828644, 0.004715893803564115, 0.016855288390179485, 0.00914061130116373, 0.013667771340577523, 0.013336300489188263, 0.0038781701800259328, 0.004594208381737646, 0.004488487022073323, 0.0037082348735282774, 0.006355968579595406, 0.017150760851538813, 0.005262503461280486, 0.02029043648673681, 0.010858546156297721, 0.01072825175990069, 0.008074047686159361, 0.01273305115385371, 0.07683133021292071, 0.03985359800694734, 0.06918588610482976, 0.03914723140640002, 0.011727424377229003, 0.020675172986541934, 0.0030210443134068106, 0.010780140962473697, 0.0029164366127911734, 0.005895328861199798, 0.02110684876241754, 0.022250078133988067, 0.018762727431681368, 0.02287757815212466, 0.013616649878885863, 0.035899326988740876, 0.025034899304745707, 0.021225197504530283, 0.004702308675303987, 0.0020147224426586034, 0.0032809529288326347, 0.0029083706924518758, 0.03369662315179626, 0.021834448156912732, 0.028783579858956184, 0.022500397281695353, 0.010025589553824028, 0.0031042556813229366, 0.002987545500219733, 0.008043667738875597, 0.005946896874019065, 0.03795728958291553, 0.00840396693509606, 0.0337623527724478, 0.005150216674335097, 0.024063618261963817, 0.00480960993237406, 0.016604378826957433, 0.006513266384279273, 0.0357590795269157, 0.00709758258458471, 0.03158743400710625, 0.03936871213696133, 0.015953351785143018, 0.03011178249005328, 0.02477795162639227, 0.007610653799317317, 0.0136409845835932, 0.007541863250336872, 0.009996932616274152, 0.0062825704143431435, 0.02918621430329423, 0.011356451740096585, 0.019374477333481882, 0.0015693245653320437, 0.0010477008176598575, 0.0011330589441620126, 0.002026722615352854, 0.0022816099745732164, 0.003789893209899732, 0.0011763851753263197, 0.0021623845009286157, 0.03470236368691786, 0.02692932933388657, 0.005487996716458007, 0.005945679148551279, 0.004141869545622366, 0.006886934778074173, 0.0068161911055734, 0.0071408578585361185, 0.005121694917190892, 0.006336809088271251, 0.005982185830666457, 0.004741778435345008, 0.00467082237185417, 0.005076213187824329, 0.006785729304533483, 0.004232043058675233, 0.005613974454989874, 0.004090608003661613, 0.00568852747634868, 0.0035586807144613146, 0.004786804970382516, 0.003616724647032317, 0.004199952646305782, 0.004112951617008819, 0.004334766845472619, 0.00417401946329906, 0.004552881509088721, 0.0090408878860084, 0.00608888771889014, 0.005734216726657498, 0.007600370541257084, 0.011766293671373607, 0.005030945965270955, 0.011441401683294274, 0.02133424933982803, 0.008112215621885337, 0.013916486643166201, 0.013374798840136771, 0.01577683510564583, 0.011734425957404341, 0.012949183515564155, 0.01343500284758911, 0.006166114872884583, 0.006020495822756122, 0.006914802454154489, 0.005421489330710068, 0.007666530743332644, 0.005504469696831474, 0.006712356800202012, 0.007009055614425366, 0.0068503737979467355, 0.006028766068745525, 0.003644617965129175, 0.01000308824848547, 0.005099607019053276, 0.0034766755013315156, 0.004706886319410363, 0.004558469024592933, 0.0045220950069317966, 0.005476375384450982, 0.0038612677557735213, 0.0067410376184356075, 0.006885502014346571, 0.022569109194946594, 0.00634505036475833, 0.0275641067610571, 0.004009644351623969, 0.00307722057358295, 0.0028017765964718964, 0.003825975309025457, 0.004362743720914773, 0.0077195980768220976, 0.0043040429228839725, 0.007706419878145939, 0.055384372056772484, 0.019242511886091426, 0.06182318438998559, 0.01602614064474966, 0.016765186383798418, 0.03218192734223463, 0.01664917862251111, 0.02642427144642462, 0.001997263951501494, 0.0005372813728072858, 0.0019161431652070864, 0.0027885704691305298, 0.004077873255392863, 0.007282557692573597, 0.0045779901409386875, 0.005931752412589687, 0.0036899516879728253, 0.0052061392474057585, 0.0040155335765010075, 0.00438971452276216, 0.013771722555528474, 0.00328674889563494, 0.005691759723027065, 0.009383963331300132, 0.05155078741070821, 0.07447137888047138, 0.049379754965605864, 0.08249685062556569, 0.007105997808988301, 0.012045006999167933, 0.007223896026099102, 0.009322633090294213, 0.036155489614409744, 0.005624615632352726, 0.02873881403723502, 0.005404302926414112, 0.009266344437768467, 0.010681865803069627, 0.005307341774284211, 0.005689936463381652, 0.0037929817026404506, 0.006445381375006667, 0.003932814429958519, 0.0062021506778602315, 0.013952345217458507, 0.012010094051292447, 0.01240748273490712, 0.007326366987929463, 0.006699507136081987, 0.042964487853364056, 0.005417428672275548, 0.038093834570805375, 0.020216178913202654, 0.004966981531350165, 0.014315499825310912, 0.0038187018391239104, 0.023386246083268506, 0.022401152010125124, 0.018723017831090767, 0.019593910034590576, 0.01004669820538475, 0.010107765232019016, 0.013171713066736637, 0.005976547568310125, 0.028175537970744773, 0.022520501126232086, 0.015854921117066646, 0.019064125972804415, 0.003177084031245836, 0.0025217756835452356, 0.003537585042178845, 0.0021289319152698618, 0.008258622333858713, 0.017790830181046196, 0.011865274921848721, 0.015759836873081738, 0.00478273237984058, 0.009082698715782763, 0.0045568365613286275, 0.00833180583615286, 0.00848440716328801, 0.003322349524521539, 0.011232309977661399, 0.003430783738702885, 0.011589424997069305, 0.007307673310673552, 0.0144898502078389, 0.006466094923826912, 0.02343298939903733, 0.00857888426859, 0.026638065964266586, 0.006891756899344124, 0.012561404607116161, 0.009019689327511377, 0.01640670992040614, 0.006987407502419563, 0.005047624049591397, 0.0028986250930993656, 0.005446254914324471, 0.0025346371468337727, 0.008520135135243155, 0.03002302462060254, 0.006583854729165507, 0.020615635980319076, 0.014306173190054073, 0.0055183131151575315, 0.019724007272250727, 0.004627595052278803, 0.045737568142667044, 0.008188231262949854, 0.0435687764742267, 0.0073575242793370195, 0.015011148609664002, 0.01533035929103724, 0.023729769085054066, 0.007406309241046552, 0.029883164424676045, 0.06304493658413203, 0.03718213299117992, 0.05277782312376729, 0.03337642032538493, 0.007677181011310146, 0.0332344264115851, 0.004855600894738408, 0.01952614373893411, 0.05247195004535581, 0.027566910247274295, 0.04400545154079573, 0.0376801987901227, 0.018062707536129305, 0.04435465163902032, 0.016855156039069164, 0.005342449418194909, 0.002653021566705645, 0.004833569699124027, 0.003221959811225363, 0.009383300305026866, 0.017694816099805836, 0.01388997506136694, 0.0143097752779892, 0.0045850625502409405, 0.004074705141527803, 0.0036578128430773296, 0.004663786933069459, 0.018454515967701413, 0.006295354670891472, 0.021831745907769845, 0.005297520697926414, 0.01087392193311054, 0.010965688074085558, 0.012718511515072348, 0.00809151064714732, 0.04112298634426218, 0.07735239687464791, 0.039782381499799915, 0.07021010163839123, 0.020332354296298434, 0.01249553705620954, 0.011669060421921765, 0.0032431087065332353, 0.006371758725397579, 0.0031475301884191743, 0.023022153490254913, 0.021567536797661567, 0.02386122128188456, 0.019196986211118153, 0.03745200006765084, 0.014139356980163508, 0.02170584962088688, 0.02689302132012801, 0.002054504518812209, 0.0048289417431691345, 0.0029864589884650706, 0.003437944112509303, 0.022243472899583176, 0.035406516253725026, 0.023345951840729264, 0.03069656056481831, 0.003285403722307545, 0.010137234112620132, 0.00819860286443387, 0.0030190668426831745, 0.04049091495578241, 0.0063121493900665454, 0.03579884531750128, 0.00902939698902122, 0.02602190880268854, 0.005387048688355904, 0.017985223789928385, 0.005114537432260451, 0.03834576512992458, 0.006582816917498353, 0.03408052496156101, 0.0074795349676856525, 0.017129555478715985, 0.04096759595195614, 0.02609948378104536, 0.03213324757492837, 0.01363678736004406, 0.008476948014733358, 0.010134548257363813, 0.008252417274087242, 0.03087190414714258, 0.006477712652814315, 0.020366930486100776, 0.012318642735561703, 0.0011439359255285102, 0.0015324418352850584, 0.0021149987121249474, 0.0011358380861360153, 0.003955496206484485, 0.0023985296894827902, 0.0022876189756520825, 0.0011973270036026822, 0.028306481847352846, 0.03611236675349789, 0.006376615342624221, 0.005579352248567388, 0.007289668822309147, 0.004207656163471587, 0.007304189233924776, 0.0071246528010856305, 0.00643719891875095, 0.005275101980148591, 0.004992167777716592, 0.006090497752162662, 0.005312883400243481, 0.004730530192944143, 0.0044516456137147446, 0.006976619442676341, 0.004200942474315446, 0.005776544703097637, 0.0036587375915026745, 0.005748382515891893, 0.003664926368255658, 0.004873634927060905, 0.004033837330807848, 0.004182208093984546, 0.004113023094096913, 0.004306364412232121, 0.009181002699743694, 0.004583902871124192, 0.005940178198074516, 0.0062454125749488, 0.012264242114268534, 0.007537130983788571, 0.011996277863231682, 0.004977979386205046, 0.008289909228411293, 0.02168108376758325, 0.013611192227795992, 0.014297049114888388, 0.01184824546255907, 0.015930428637250495, 0.013551105623225514, 0.013154805477755951, 0.006322612861276688, 0.006610873288028654, 0.005760465821839357, 0.007334213485111513, 0.0057333687928241, 0.008137045073322179, 0.0072296837663534735, 0.007080173373416907, 0.006394778894691112, 0.007162157467937294, 0.01034412093118407, 0.0038336158762986, 0.0035002932967322514, 0.005132202832507274, 0.004495496154136649, 0.004849326172290685, 0.005555459853453758, 0.004807138502703312, 0.006861948665071065, 0.004123451133122037, 0.02295158300922344, 0.007051252962183404, 0.028173293520336935, 0.006669707102367835, 0.003159031394217317, 0.004144902165582691, 0.003915463361535313, 0.0029258187003839767, 0.008385569278611315, 0.004401718258242242, 0.008213563486557732, 0.004567981393010979, 0.06696710465986667, 0.027692298146757617, 0.05549112165378568, 0.0201746684970983, 0.017547567584084205, 0.02550049230382981, 0.017398226170846406, 0.03268583279141934, 0.008591173752684035, 0.009363522762350616, 0.009266587254963413, 0.008632538717759508, 0.007014854887518382, 0.002260018014885936, 0.0022979268489784392, 0.007071931767111337, 0.0071634881730687685, 0.0017299391418130236, 0.0017686940710958934, 0.00723257715651442, 0.001643031144417955, 0.009120219463075714, 0.00923464045901921, 0.0016984902452772653, 0.0017881383330578926, 0.008017330962500676, 0.008068712787537504, 0.0018493339843271206, 0.0010454903613342328, 0.007071528911784969, 0.007024515160169981, 0.0011022833333855563, 0.001484714964888898, 0.006399031664063421, 0.006363541394553128, 0.0015181797461949538, 0.006026368776342308, 0.0012683590296050287, 0.0012567866849480416, 0.0058734776182109505, 0.006197589310755258, 0.0008926706597289555, 0.0008688973014745598, 0.006052453961010347, 0.0008369973146372788, 0.005378972304049904, 0.005338003222441254, 0.000837010801796581, 0.0008477220320523966, 0.005298246270524145, 0.005217445517378499, 0.0008522865340575917, 0.023975118346932455, 0.008856705383316666, 0.00858439586681334, 0.02580164174382993, 0.023428123452942984, 0.00781812720915928, 0.007911574958703727, 0.02538321713580939, 0.00810721540572797, 0.015754914897609534, 0.01623159969773803, 0.008096039871658987, 0.00985246232149621, 0.013051353591415219, 0.013433581925295531, 0.009930483099207386, 0.026325973471943043, 0.012455627146740844, 0.011489246111756363, 0.02661865936694935, 0.028056110133441503, 0.012296118530873913, 0.01135587309758481, 0.02840246395966109, 0.0010172292466722479, 0.005803995260872623, 0.005823001469159309, 0.001032680059289303, 0.0008256994008806106, 0.006141124516594082, 0.006161614540334442, 0.0008713863411145974, 0.00981635299443823, 0.012822718023227713, 0.011706602987073862, 0.008759008964139937, 0.00790047350310175, 0.014148374923279337, 0.012699145052208927, 0.007074241468440424, 0.010099810310248801, 0.0053661662259103056, 0.004945351843594362, 0.009488980808445915, 0.002022952580510925, 0.006579524822769498, 0.006506999800581414, 0.0019787386778562068, 0.0011972075029836507, 0.007322201396680355, 0.00723482225337236, 0.0011975255874886583, 0.007617495417820617, 0.008262722115735354, 0.008186127292100344, 0.007890133269709847, 0.008601076384484336, 0.008318014263514828, 0.008329010307342026, 0.008899675330887421, 0.019108687652200917, 0.01171425568264895, 0.011300678663513744, 0.01921772298600908, 0.02219638325016058, 0.011751541540904966, 0.011408390871909738, 0.022404105822164348, 0.008150496951505867, 0.0020384116840524223, 0.002028566973120436, 0.008029278909187861, 0.007425783904849813, 0.0014159360898861495, 0.0014147977821190735, 0.007297877229543554, 0.00931167392806397, 0.00321800786415782, 0.0031856224325169475, 0.009372944924995666, 0.009030285516360028, 0.0034861822251855347, 0.003453304256689703, 0.009046718049206218, 0.028720027991267306, 0.008975742391153804, 0.009270767172360805, 0.03019393232794276, 0.02728194162022413, 0.009701181512229824, 0.010093430194275334, 0.029056715519808263, 0.009335117621421753, 0.020049057385395443, 0.02036207067640526, 0.009635636757060235, 0.008578056071164289, 0.021092611494940305, 0.021785961648121806, 0.008592899162448663, 0.005881743777321795, 0.0010609188023041314, 0.0010173670412703029, 0.005841645525716396, 0.006206526376011412, 0.00046955289312352894, 0.0004599849822565617, 0.006118948610365362, 0.016928414458088247, 0.013068761068564343, 0.012133201472461892, 0.0159685971812208, 0.017864975228636015, 0.027164637116210616, 0.027698541885371165, 0.016137066953259026, 0.013296872445597033, 0.02931521990142068, 0.029671720859815075, 0.01261164049377574, 0.009069594736842245, 0.011493244349878303, 0.010343940073292974, 0.00919404316788479, 0.007771836394470863, 0.012802747370241637, 0.011559193995640947, 0.007796407247558604, 0.00758914770238494, 0.012251189781826318, 0.010954962186180497, 0.006889947375246457, 0.006400173014912416, 0.01311287363745799, 0.01162507067772028, 0.005872108880190892, 0.0005956087371482655, 0.0055103686619500675, 0.005537960152065837, 0.0006358052461587466, 0.0006631363942821378, 0.005441892643673315, 0.0054481496214445774, 0.0006581168004678195, 0.0018179778333411655, 0.007322403081400085, 0.007283695386180675, 0.0017839301272603919, 0.0018302171603745158, 0.006745996150257413, 0.006664521513895944, 0.0018161971046029416, 0.0011953701406214323, 0.0057994699137371005, 0.005728248065850849, 0.0011978033241021022, 0.0012861889979983168, 0.0054157036212198915, 0.005323379501032409, 0.0012749351282936542, 0.014500450927666478, 0.03305315542780525, 0.03217149872811667, 0.013574170237605886, 0.021390049552263528, 0.024020286532773695, 0.022936638895668337, 0.02054396081061808, 0.0010517762573704925, 0.0062680276506592355, 0.006139531820383456, 0.001028379185158879, 0.0013991572859752398, 0.00569761071878367, 0.005621228810488668, 0.0013360265818009723, 0.001507449478899285, 0.005273511656604493, 0.005232278573983769, 0.0015054103551419516, 0.0008930579840440097, 0.0059517262714447305, 0.005919571688209116, 0.0008818987068718453, 0.007112987967610293, 0.0022264071859550718, 0.0021975322523573085, 0.006964325128196484, 0.006454105392911996, 0.0018504604801338495, 0.001822675415602462, 0.006319224997194328, 0.008549797482439874, 0.003250785825656253, 0.003158198661770252, 0.008514472771578172, 0.007910056562598, 0.003875926454382421, 0.0037630686454738697, 0.007895991727061354, 0.006986805499429947, 0.0021581921600375372, 0.0020959781317622514, 0.006956799387683669, 0.006472122214277441, 0.0023974186710303737, 0.0023189565753702927, 0.006446190269167945, 0.0016179731675424552, 0.0055426476200886995, 0.005465804043140043, 0.0015713770678539229, 0.0014373011292573236, 0.0059424331330854814, 0.005849070582741708, 0.0013583911444603198, 0.004245920792369998, 0.0010567794018042813, 0.0010079844414992135, 0.0041548857883931065, 0.004783893415801703, 0.0012614969522598053, 0.001223323485325369, 0.004685689545967305, 0.0011332712947520617, 0.005346415283902762, 0.005283864530066999, 0.0010710270530584502, 0.0009050789138511863, 0.005082409794491054, 0.004986831844789302, 0.0009157239200582413, 0.0116009364653744, 0.0214688665769535, 0.022502351038754947, 0.01217796988061715, 0.008108834299577474, 0.025477369543316798, 0.027195421846233317, 0.008301673908427508, 0.0017618295006759284, 0.006382208084547436, 0.006329104095546791, 0.0018171984779132688, 0.0016467929851855581, 0.005663978325389407, 0.005656575867091994, 0.0016215729633515846, 0.0007877691098074405, 0.00484098509448598, 0.004854366123167747, 0.0007817549077199387, 0.00041671120596232847, 0.004837006817393871, 0.004911698486326623, 0.00040764013893509793, 0.010284661980967124, 0.008998571905403896, 0.008256969936714468, 0.009410955436397037, 0.011236580661233928, 0.008162028933484857, 0.007403222046760517, 0.01012691910091794, 0.00376614152916415, 0.004940999890147418, 0.005275856535478139, 0.003753149356090169, 0.003125897866278603, 0.004817605843054477, 0.005159091182496664, 0.0031321315420859957, 0.011511631977247166, 0.032991518721269646, 0.032928083778386893, 0.010759909685904847, 0.01184822777133921, 0.02859097967690462, 0.02872514813762151, 0.010769699455169228, 0.0022274590945979686, 0.007010467711088895, 0.0070819022845327465, 0.0021991663928341556, 0.0026716921805108756, 0.006657175094216257, 0.0067070529560383126, 0.002620034811247889, 0.0021693211715344165, 0.00648413378310036, 0.00651810693730866, 0.0021890366529645653, 0.002046596809006366, 0.006214814959199362, 0.006184581462063673, 0.002111925915318504, 0.015296891413374245, 0.006861028936346463, 0.0067036226219298455, 0.014261667864705627, 0.014263134201340273, 0.007466848556985597, 0.00724634383004218, 0.013235966502626652, 0.007123779372483926, 0.009905182396198736, 0.010045078137588776, 0.0071259739147627316, 0.004637577115695464, 0.01032642784738148, 0.010153469521251434, 0.004664795534093348, 0.0061394670128305465, 0.002139425203838456, 0.0021070416227821657, 0.006064084028515571, 0.005552502082876559, 0.002020477801468636, 0.0019892358679718973, 0.0054961325821300646, 0.007601424132162161, 0.003134811049524915, 0.0030815178465893643, 0.007531588090051445, 0.007011351176029506, 0.002831853303848058, 0.0027696171274949415, 0.0069517804257982945, 0.008402819660494686, 0.002662228288065767, 0.002650329577193934, 0.00825815967175325, 0.00804030714329621, 0.002375569965246921, 0.002334300373087869, 0.007981359997355015, 0.01319384309730578, 0.025597789900569178, 0.025457957242226745, 0.013582497481765791, 0.012356432120735743, 0.024714657551838687, 0.02476029575758697, 0.012727163752495647, 0.007276905430824068, 0.011322340616675313, 0.011066649025095805, 0.007291120526405241, 0.008282912727174893, 0.011144799298277247, 0.010793171918621215, 0.008448668875750463, 0.0009639227708988272, 0.005229943456876828, 0.005152559583028958, 0.0009276904343858334, 0.0007441670776905912, 0.005058732309009035, 0.004995375852321796, 0.0007423229639703388, 0.005699992918812689, 0.0009481560903281636, 0.0009099944720197805, 0.005646716359435809, 0.006379886029353468, 0.0007391825756430035, 0.0007393610361603129, 0.006312139164040621, 0.021462627231566927, 0.010077965745369464, 0.009414142920334049, 0.023207718213637714, 0.023629662417583863, 0.006759839233210368, 0.006476008252738697, 0.025065401351372644, 0.01018095481481351, 0.015289674291140185, 0.014282439143667718, 0.009097244645295065, 0.011969373879915599, 0.011101406817592353, 0.010330537545874999, 0.010604914000430577, 0.0067227122536322485, 0.11944727168855515, 0.11932818588021096, 0.006614896915861303, 0.006784345944129135, 0.11479706429793128, 0.11454282435756699, 0.006573743651359913, 0.00937033294642957, 0.1040243242432151, 0.10400233696401356, 0.009386172320478585, 0.009103782347933484, 0.08991725998292786, 0.08991950510050589, 0.00912713089758217, 0.010098668595685105, 0.07358333743011927, 0.07349052201499083, 0.01027930529212749, 0.011017662841342946, 0.055595403100289126, 0.05551312844413025, 0.010915339014588667, 0.007667625201476909, 0.03946635299286161, 0.03933119733057944, 0.007708612219600199, 0.01025366963585176, 0.02353698696536458, 0.023434537909262674, 0.01010773783178086, 0.014252639667944909, 0.02575981520214755, 0.037413146016266836, 0.08382541732605812, 0.005060897346861967, 0.019395317182462058, 0.024445954161473174, 0.01704909080480523, 0.01264401033293978, 0.06487836444136733, 0.0758642181243293, 0.03725753218428828, 0.00497430352852078, 0.008740682687187336, 0.013097882135601487, 0.04779054035693543, 0.0021239662743725513, 0.012025430143571894, 0.010961967769368072, 0.01099165270619097, 0.035880417644068456, 0.02364569860971659, 0.003494476182160376, 0.00345589203681989, 0.07692777705107902, 0.14131600405802813, 0.10841638667274009, 0.049560077144757235, 0.0038686076854954387, 0.015216734421400709, 0.021392474475063816, 0.08232016551778945, 0.06718761528377885, 0.11935793374716074, 0.029610774669716296, 0.013778168968138637, 0.004160064655602972, 0.008962850446364815, 0.18458082829160635, 0.09504477996706377, 0.06916763951637099, 0.03024618311777582, 0.009835985379545045, 0.226261819963099, 0.009032726761820126, 0.2303501893036629, 0.07740483114031875, 0.12113080353077961, 0.04671816175653581, 0.07255407920806108, 0.010400421147866832, 0.19582550079922154, 0.040614550034085095, 0.034477775976693714, 0.007935794855777502, 0.1016575958867426, 0.04692746798966848, 0.1200097808636467, 0.044076770705577265, 0.02709237221733898, 0.08409085036736144, 0.02946082591189731, 0.01700956073936465, 0.024594967668849898, 0.029863358853328633, 0.013737834077508171, 0.019503059212800638, 0.003230130638497063, 0.00407687585728679, 0.00619734866310136, 0.05493990486658532, 0.1862406487420446, 0.005114534539427867, 0.005401366286775215, 0.13917678757110793, 0.047689050912644554, 0.07493100496556543, 0.00367937389407563, 0.03582631198726278, 0.09089370486357957, 0.06589618752563779, 0.00449337744783816, 0.020954963076759956, 0.02666601034414498, 0.059917244171848, 0.011461464208070978, 0.04003299389746537, 0.03914763514239792, 0.045131907193217344, 0.013545880630795855, 0.004466653073453095, 0.0041740335654573595, 0.10601747497002233, 0.006224520133690384, 0.006185698883005423, 0.11323164677708536, 0.10676927266502986, 0.011860693562733183, 0.011608819495864002, 0.11389080140626923, 0.0074766009892506405, 0.0014683397757553247, 0.0019129321233447238, 0.00930995412129433, 0.09761761706604766, 0.02105270188467464, 0.01926680413451685, 0.02669679306323893, 0.009995303512873848, 0.009853710798858096, 0.02963339793137894, 0.07282646599978332, 0.02049477792285889, 0.10129292742861468, 0.10830980676841061, 0.01816075481027264, 0.004655233365380059, 0.02860985558431347, 0.017208659840196937, 0.0077846289899111305, 0.02141860094308602, 0.07014591088111007, 0.009064212060167956, 0.010732437024607577, 0.002743506413540664, 0.0025011672487496583, 0.02651576449204643, 0.007477342320831259, 0.04202746477633969, 0.06090001996663004, 0.034816425979719415, 0.03935204757344643, 0.08858095331709974, 0.05942351320739023, 0.03221852542682168, 0.012967634678090256, 0.07857600435214833, 0.048246819889731965, 0.019021377301594915, 0.038640563189441854, 0.005584133644300519, 0.0039005395685108137, 0.012178785118660591, 0.024101011043157233, 0.0086101879954741, 0.00779460178145087, 0.008480799460148406, 0.0013931433250608477, 0.0023023569615227965, 0.004467732637084959, 0.003777006882010604, 0.0018873137374541512, 0.04010430010201548, 0.02384103730321846, 0.02156298303374425, 0.024657160037343293, 0.10386628927568174, 0.005725335477232958, 0.024144660380979486, 0.07078796024929593, 0.00304707410854891, 0.0006943929215043465, 0.0007081050464042951, 0.0015038941849300656, 0.03589274548193619, 0.023362281704540588, 0.008459983807353594, 0.029250854706827062, 0.03973017221361023, 0.04347766308904828, 0.0016504703227076247, 0.0018430416629855693, 0.06891805272502924, 0.10748627693468306, 0.0016176015603834152, 0.0009524891057647539, 0.1691194355941578, 0.018309390758977136, 0.10425049196188012, 0.05947463801263446, 0.00890285531853433, 0.09675346585895704, 0.07735428468179556, 0.029381377395930528, 0.0063396505381889704, 0.005755925026088779, 0.07027624881127754, 0.01387132754376554, 0.05005742109713962, 0.10414100534316717, 0.0027833859492137052, 0.0034618817861895496, 0.12902932588027433, 0.10748638690366179, 0.14718410387281725, 0.055032537618003315, 0.04345734516460858, 0.06474695568462976, 0.1452221666279143, 0.006924851585982664, 0.17478343192652138, 0.06722584662817889, 0.16618669659187876, 0.0027283610156073838, 0.070498062571993, 0.046923742436305885, 0.022865726163431237, 0.027309208708160653, 0.016326164632999, 0.08998103198192858, 0.0014096433492145485, 0.0015632141438961108, 0.01222182937089376, 0.020035922639525354, 0.009242426911136256, 0.0024126454490785766, 0.009274877657120605, 0.002380651324022055, 0.0027105334065672263, 0.004352435506464035, 0.0026806593510973874, 0.004237469591028653, 0.009472220576784486, 0.0037988028943224806, 0.009554739990434012, 0.0024727886524930263, 0.0028309520327505023, 0.0038497584270940763, 0.0027840529055692723, 0.00432572157327558], "label_norm": {"browDown_L": [0.16184226283028932, 0.20977234886071028], "cheekSquint_L": [0.16185153609579386, 0.2097683718446928], "browOuterUp_L": [0.15270091543678424, 0.16839646529867786], "browDown_R": [0.06948338508522964, 0.16283591380307832], "browOuterUp_R": [0.06948302474716682, 0.16283847961001208], "cheekSquint_R": [0.05328527165206706, 0.0987137094443144], "browInnerUp": [0.12377143222455209, 0.11054432239365392], "eyeBlink_L": [0.12378660998864666, 0.11056262499764855], "eyeBlink_R": [0.190942831872188, 0.279206755584966], "eyeSquint_L": [0.19093755749443306, 0.2792060904994797], "eyeSquint_R": [0.14227027950930204, 0.1416391784898584], "eyeWide_L": [0.14227035540092334, 0.14163926447890837], "eyeWide_R": [0.11309330373911854, 0.18565386881570314], "eyeLookDown_L": [0.11306353298758509, 0.18566134365607134], "eyeLookDown_R": [0.06285944359725414, 0.17045273250250584], "eyeLookIn_L": [0.0628729756892031, 0.1704466309400626], "eyeLookIn_R": [0.07485748085688285, 0.16893314702185766], "eyeLookOut_L": [0.07485740438210119, 0.1689329351938502], "eyeLookOut_R": [0.18266849983368028, 0.14296388111660893], "eyeLookUp_L": [0.18265154591402213, 0.14292028255240136], "eyeLookUp_R": [0.08961160259588949, 0.16585373167085588], "jawOpen": [0.08961131633644744, 0.16585278449154386], "jawLeft": [0.11765810615884183, 0.08816165020315778], "jawRight": [0.026571828761178935, 0.05492373416723142], "mouthClose": [0.15299164237732532, 0.150655587484649], "mouthFunnel": [0.026557468328964346, 0.054797332139965196], "mouthPucker": [0.09498957945671399, 0.09181490726836748], "mouthRollLower": [0.14519119410745168, 0.12731614011549094], "mouthRollUpper": [0.10349672362506636, 0.11123604030718619], "mouthShrugLower": [0.10465714266768646, 0.09383210265018498], "mouthShrugUpper": [0.0678096379479136, 0.07960643467573829], "noseSneer_L": [0.08945952378613364, 0.08728771405812234], "noseSneer_R": [0.2222825280831422, 0.1261008077133412], "mouthLeft": [0.022971706246310317, 0.08432441787704713], "mouthRight": [0.02298672339965462, 0.0843408328391454], "mouthSmile_L": [0.13505946631542162, 0.21724098606264428], "mouthSmile_R": [0.13508046237566498, 0.21726259548479832], "mouthFrown_L": [0.051900052605321746, 0.09449455049264716], "mouthFrown_R": [0.05189726627093182, 0.09449150605096043], "mouthDimple_L": [0.09506372589428794, 0.06431724885890054], "mouthDimple_R": [0.09506641018113879, 0.06431844000329903], "mouthStretch_L": [0.20472376314609514, 0.16635334721205874], "mouthStretch_R": [0.20473381382347117, 0.1663557625463717], "mouthPress_L": [0.07839229651774052, 0.0643156347072905], "mouthPress_R": [0.07839077916451218, 0.06430965774739499], "mouthLowerDown_L": [0.17512900932173842, 0.09322782743034486], "mouthLowerDown_R": [0.1751238538275112, 0.09322656028013022], "mouthUpperUp_L": [0.0822388672075358, 0.09820284010334808], "mouthUpperUp_R": [0.08224144650194605, 0.09820911130340014]}, "label_norm_mm": {"browDown_L": [-0.8073297739028931, 1.6146595478057861], "cheekSquint_L": [-0.8073297739028931, 1.6353405714035034], "browOuterUp_L": [0.0, 0.9911944270133972], "browDown_R": [-0.7330395579338074, 1.470625638961792], "browOuterUp_R": [-0.725012481212616, 1.4660791158676147], "cheekSquint_R": [0.0, 0.9704002141952515], "browInnerUp": [0.005171118304133415, 0.8572343587875366], "eyeBlink_L": [0.00921106431633234, 0.8549602031707764], "eyeBlink_R": [0.0, 0.999589204788208], "eyeSquint_L": [0.0, 0.9996109008789062], "eyeSquint_R": [0.0, 1.0], "eyeWide_L": [0.0, 1.0], "eyeWide_R": [0.0, 1.0], "eyeLookDown_L": [0.0, 1.0], "eyeLookDown_R": [0.0, 1.0], "eyeLookIn_L": [0.0, 1.0], "eyeLookIn_R": [0.0, 1.0], "eyeLookOut_L": [0.0, 1.0], "eyeLookOut_R": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_L": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_R": [0.0, 0.9534252882003784], "jawOpen": [0.0, 0.9534395337104797], "jawLeft": [0.0, 0.8010596036911011], "jawRight": [0.0, 0.7739279270172119], "mouthClose": [0.0, 1.0], "mouthFunnel": [0.0, 0.7443013787269592], "mouthPucker": [0.0, 0.9496217966079712], "mouthRollLower": [0.0, 0.9745720624923706], "mouthRollUpper": [0.0, 0.9714981913566589], "mouthShrugLower": [0.006537656299769878, 0.8364248275756836], "mouthShrugUpper": [0.0, 0.9035037159919739], "noseSneer_L": [0.0, 0.9107782244682312], "noseSneer_R": [0.02829817868769169, 0.9374051094055176], "mouthLeft": [0.0, 1.0], "mouthRight": [0.0, 1.0], "mouthSmile_L": [0.0, 0.9820542931556702], "mouthSmile_R": [0.0, 0.9820542931556702], "mouthFrown_L": [0.0, 0.867120623588562], "mouthFrown_R": [0.0, 0.867120623588562], "mouthDimple_L": [0.0, 0.7573938965797424], "mouthDimple_R": [0.0, 0.7562941908836365], "mouthStretch_L": [0.0, 0.9634690284729004], "mouthStretch_R": [0.0, 0.9634690284729004], "mouthPress_L": [0.0011928933672606945, 0.8130543828010559], "mouthPress_R": [0.00045785587280988693, 0.813126266002655], "mouthLowerDown_L": [0.008856703527271748, 0.9179792404174805], "mouthLowerDown_R": [0.008817199617624283, 0.9179792404174805], "mouthUpperUp_L": [0.0, 0.9093780517578125], "mouthUpperUp_R": [0.0, 0.9063169956207275]}}',"freq","RSA-OAEP-512","Array","tongueOut",'Extension Header Parameter "',"send","Ed25519","Reader","_startTime","algorithm","shiftLeft","toBytesBE","P-521","performance"," Received ","maxPending","rpc","[object Object]","_state","UONE","EventEmitter","multiply","ERR_JWT_INVALID","round","split","format","subtract","onUpdate","toBytes","request must be specified","LN2","alpha should be in (0.0., 1.0]","finish","setDerivateCutoff",'{"tris": [[[6, 7, 8, 9, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 35, 46, 47, 50, 52, 53, 55, 56, 63, 65, 66, 68, 69, 70, 71, 100, 101, 104, 105, 107, 108, 110, 111, 112, 113, 114, 116, 117, 118, 119, 120, 121, 122, 123, 124, 128, 130, 133, 139, 143, 144, 145, 151, 153, 154, 155, 156, 157, 158, 159, 160, 161, 163, 168, 173, 188, 189, 190, 193, 221, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 243, 244, 245, 246, 247], [69, 60, 52, 89, 14, 1, 45, 46, 83, 84, 83, 46, 50, 46, 40, 17, 40, 46, 46, 50, 84, 85, 84, 50, 59, 60, 62, 69, 62, 60, 18, 31, 43, 44, 43, 31, 3, 57, 34, 35, 34, 57, 43, 44, 81, 82, 81, 44, 11, 12, 65, 66, 65, 12, 22, 62, 72, 69, 72, 62, 6, 5, 55, 56, 55, 5, 73, 71, 88, 87, 88, 71, 9, 64, 10, 63, 10, 64, 12, 90, 66, 89, 66, 90, 21, 73, 2, 68, 2, 73, 37, 42, 13, 80, 13, 42, 21, 74, 73, 71, 73, 74, 59, 8, 60, 38, 60, 8, 76, 19, 77, 20, 77, 19, 44, 45, 82, 83, 82, 45, 90, 39, 51, 79, 51, 39, 19, 33, 20, 23, 20, 33, 16, 28, 49, 61, 49, 28, 20, 23, 16, 28, 16, 23, 48, 42, 41, 37, 41, 42, 58, 4, 59, 8, 59, 4, 10, 63, 22, 62, 22, 63, 39, 49, 79, 15, 79, 49, 9, 11, 64, 65, 64, 11, 78, 16, 39, 49, 39, 16, 25, 27, 33, 32, 33, 27, 73, 47, 68, 0, 68, 47, 21, 34, 24, 25, 24, 34, 31, 30, 44, 45, 44, 30, 33, 32, 23, 26, 23, 32, 2, 3, 21, 34, 21, 3, 30, 17, 45, 46, 45, 17, 4, 58, 5, 56, 5, 58, 77, 20, 78, 16, 78, 20, 6, 55, 36, 67, 36, 55, 24, 25, 19, 33, 19, 25, 42, 43, 80, 81, 80, 43, 34, 35, 25, 27, 25, 35, 41, 37, 54, 15, 54, 37, 66, 89, 67, 1, 67, 89, 48, 18, 42, 43, 42, 18, 24, 19, 75, 76, 75, 19, 24, 75, 21, 74, 21, 75, 51, 7, 14, 1, 14, 7, 28, 29, 61, 53, 61, 29, 73, 88, 47, 70, 47, 88, 89, 90, 14, 51, 14, 90, 56, 58, 64, 63, 64, 58, 65, 66, 55, 67, 55, 66, 64, 65, 56, 55, 56, 65, 23, 26, 28, 29, 28, 26, 37, 13, 15, 79, 15, 13, 58, 59, 63, 62, 63, 59, 60, 38, 52, 86, 52, 38, 72, 69, 86, 52, 86, 69, 61, 53, 54, 80, 81, 36, 6, 36, 81, 13, 7, 79, 51, 79, 7, 81, 82, 6, 5, 6, 82, 82, 83, 5, 4, 5, 83, 83, 84, 4, 8, 4, 84, 8, 84, 38, 85, 38, 84, 71, 72, 87, 86, 87, 72, 74, 22, 71, 72, 71, 22, 74, 75, 22, 10, 22, 75, 75, 76, 10, 9, 10, 76, 77, 11, 76, 9, 76, 11, 11, 77, 12, 78, 12, 77, 12, 78, 90, 39, 90, 78, 38, 85, 86, 87, 86, 85, 85, 50, 87, 88, 87, 50, 70, 88, 40, 50, 40, 88, 49, 61, 15, 54, 15, 61, 7, 36, 1, 67, 1, 36, 13, 80, 7, 36, 7, 80]], [[6, 8, 9, 151, 168, 249, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 263, 265, 276, 277, 280, 282, 283, 285, 286, 293, 295, 296, 298, 299, 300, 301, 329, 330, 333, 334, 336, 337, 339, 340, 341, 342, 343, 345, 346, 347, 348, 349, 350, 351, 352, 353, 357, 359, 362, 368, 372, 373, 374, 380, 381, 382, 383, 384, 385, 386, 387, 388, 390, 398, 412, 413, 414, 417, 441, 442, 443, 444, 445, 446, 448, 449, 450, 451, 452, 453, 463, 464, 465, 466, 467], [61, 69, 54, 16, 89, 5, 47, 83, 48, 84, 48, 83, 52, 42, 48, 19, 48, 42, 48, 84, 52, 85, 52, 84, 60, 63, 61, 69, 61, 63, 20, 45, 33, 46, 33, 45, 2, 36, 3, 37, 3, 36, 45, 81, 46, 82, 46, 81, 13, 66, 14, 67, 14, 66, 24, 72, 63, 69, 63, 72, 8, 57, 7, 58, 7, 57, 73, 88, 71, 87, 71, 88, 11, 12, 65, 64, 65, 12, 14, 67, 90, 89, 90, 67, 23, 1, 73, 4, 73, 1, 39, 15, 44, 80, 44, 15, 23, 73, 74, 71, 74, 73, 60, 61, 10, 40, 10, 61, 76, 77, 21, 22, 21, 77, 46, 82, 47, 83, 47, 82, 90, 53, 41, 79, 41, 53, 21, 22, 35, 25, 35, 22, 18, 51, 30, 62, 30, 51, 22, 18, 25, 30, 25, 18, 50, 43, 44, 39, 44, 43, 59, 60, 6, 10, 6, 60, 12, 24, 64, 63, 64, 24, 41, 79, 51, 17, 51, 79, 11, 65, 13, 66, 13, 65, 78, 41, 18, 51, 18, 41, 27, 35, 29, 34, 29, 35, 73, 4, 49, 0, 49, 4, 23, 26, 36, 27, 36, 26, 33, 46, 32, 47, 32, 46, 35, 25, 34, 28, 34, 25, 1, 23, 2, 36, 2, 23, 32, 47, 19, 48, 19, 47, 6, 7, 59, 58, 59, 7, 77, 78, 22, 18, 22, 78, 8, 38, 57, 68, 57, 38, 26, 21, 27, 35, 27, 21, 44, 80, 45, 81, 45, 80, 36, 27, 37, 29, 37, 27, 43, 56, 39, 17, 39, 56, 67, 68, 89, 5, 89, 68, 50, 44, 20, 45, 20, 44, 26, 75, 21, 76, 21, 75, 26, 23, 75, 74, 75, 23, 53, 16, 9, 5, 9, 16, 30, 62, 31, 55, 31, 62, 73, 49, 88, 70, 88, 49, 89, 16, 90, 53, 90, 16, 58, 65, 59, 64, 59, 65, 66, 57, 67, 68, 67, 57, 65, 58, 66, 57, 66, 58, 25, 30, 28, 31, 28, 30, 39, 17, 15, 79, 15, 17, 59, 64, 60, 63, 60, 64, 61, 54, 40, 86, 40, 54, 72, 86, 69, 54, 69, 86, 62, 56, 55, 80, 38, 81, 8, 81, 38, 15, 79, 9, 53, 9, 79, 81, 8, 82, 7, 82, 8, 82, 7, 83, 6, 83, 7, 83, 6, 84, 10, 84, 6, 10, 40, 84, 85, 84, 40, 71, 87, 72, 86, 72, 87, 74, 71, 24, 72, 24, 71, 74, 24, 75, 12, 75, 24, 75, 12, 76, 11, 76, 12, 77, 76, 13, 11, 13, 76, 13, 14, 77, 78, 77, 14, 14, 90, 78, 41, 78, 90, 40, 86, 85, 87, 85, 86, 85, 87, 52, 88, 52, 87, 70, 42, 88, 52, 88, 42, 51, 17, 62, 56, 62, 17, 9, 5, 38, 68, 38, 5, 15, 9, 80, 38, 80, 9]], [[0, 2, 11, 12, 13, 14, 15, 16, 17, 18, 32, 36, 37, 38, 39, 40, 41, 42, 43, 57, 61, 62, 64, 72, 73, 74, 76, 77, 78, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 95, 96, 97, 98, 106, 129, 146, 164, 165, 167, 178, 179, 180, 181, 182, 183, 184, 185, 186, 191, 194, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 210, 211, 212, 214, 216, 240, 262, 266, 267, 268, 269, 270, 271, 272, 273, 287, 291, 292, 294, 302, 303, 304, 306, 307, 308, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 335, 358, 375, 391, 393, 402, 403, 404, 405, 406, 407, 408, 409, 410, 415, 418, 421, 422, 423, 424, 425, 426, 427, 428, 430, 431, 432, 434, 436, 460], [97, 129, 111, 28, 42, 61, 81, 0, 92, 12, 23, 0, 2, 92, 0, 2, 0, 23, 81, 92, 83, 12, 14, 23, 93, 83, 92, 24, 23, 14, 83, 93, 84, 14, 15, 24, 94, 84, 93, 25, 24, 15, 79, 140, 130, 10, 62, 74, 134, 130, 140, 68, 74, 62, 94, 126, 84, 25, 15, 58, 127, 84, 126, 59, 58, 15, 86, 98, 125, 17, 57, 29, 129, 125, 98, 61, 29, 57, 110, 84, 128, 41, 60, 15, 127, 128, 84, 59, 15, 60, 142, 141, 139, 76, 73, 75, 132, 139, 141, 66, 75, 73, 101, 102, 9, 32, 9, 33, 8, 9, 102, 8, 33, 9, 96, 117, 95, 27, 26, 48, 89, 95, 117, 20, 48, 26, 130, 134, 124, 62, 56, 68, 115, 124, 134, 46, 68, 56, 118, 133, 114, 50, 45, 67, 116, 114, 133, 47, 67, 45, 108, 109, 96, 39, 27, 40, 117, 96, 109, 48, 40, 27, 131, 101, 64, 65, 64, 32, 9, 64, 101, 9, 32, 64, 115, 109, 124, 46, 56, 40, 123, 124, 109, 55, 40, 56, 123, 109, 122, 55, 54, 40, 108, 122, 109, 39, 40, 54, 8, 102, 7, 8, 7, 33, 103, 7, 102, 34, 33, 7, 135, 80, 136, 69, 70, 11, 133, 136, 80, 67, 11, 70, 118, 83, 110, 50, 41, 14, 84, 110, 83, 15, 14, 41, 114, 144, 113, 45, 44, 78, 115, 87, 109, 46, 40, 18, 117, 109, 87, 48, 18, 40, 112, 90, 111, 43, 42, 21, 97, 111, 90, 28, 21, 42, 135, 136, 137, 69, 71, 70, 143, 137, 136, 77, 70, 71, 118, 119, 83, 50, 14, 51, 81, 83, 119, 12, 51, 14, 63, 138, 64, 63, 64, 72, 131, 64, 138, 65, 72, 64, 132, 141, 87, 66, 18, 75, 88, 87, 141, 19, 75, 18, 139, 132, 140, 73, 74, 66, 134, 140, 132, 68, 66, 74, 134, 132, 115, 68, 46, 66, 87, 115, 132, 18, 66, 46, 95, 90, 96, 26, 27, 21, 112, 96, 90, 43, 21, 27, 92, 82, 93, 23, 24, 13, 85, 93, 82, 16, 13, 24, 133, 80, 116, 67, 47, 11, 114, 91, 144, 45, 78, 22, 93, 85, 94, 24, 25, 16, 86, 94, 85, 17, 16, 25, 137, 143, 142, 71, 76, 77, 141, 142, 143, 75, 77, 76, 94, 86, 126, 25, 58, 17, 125, 126, 86, 57, 17, 58, 107, 108, 112, 38, 43, 39, 96, 112, 108, 27, 39, 43, 122, 108, 121, 54, 53, 39, 107, 121, 108, 38, 39, 53, 7, 103, 6, 7, 6, 34, 104, 6, 103, 35, 34, 6, 6, 104, 5, 6, 5, 35, 105, 5, 104, 36, 35, 5, 120, 121, 106, 52, 37, 53, 107, 106, 121, 38, 53, 37, 111, 106, 112, 42, 43, 37, 107, 112, 106, 38, 37, 43, 85, 99, 86, 16, 17, 30, 98, 86, 99, 29, 30, 17, 87, 88, 117, 18, 48, 19, 89, 117, 88, 20, 19, 48, 82, 100, 85, 13, 16, 31, 99, 85, 100, 30, 31, 16, 125, 129, 90, 57, 21, 61, 97, 90, 129, 28, 61, 21, 136, 110, 143, 70, 77, 41, 128, 143, 110, 60, 41, 77, 119, 113, 49, 51, 49, 44, 1, 49, 113, 1, 44, 49, 0, 81, 49, 0, 49, 12, 119, 49, 81, 51, 12, 49, 2, 3, 92, 2, 23, 3, 82, 92, 3, 13, 3, 23, 3, 4, 82, 3, 13, 4, 100, 82, 4, 31, 4, 13, 133, 118, 136, 67, 70, 50, 110, 136, 118, 41, 50, 70, 118, 114, 119, 50, 51, 45, 113, 119, 114, 44, 45, 51, 104, 121, 105, 35, 36, 53, 120, 105, 121, 52, 53, 36, 103, 122, 104, 34, 35, 54, 121, 104, 122, 53, 54, 35, 102, 123, 103, 33, 34, 55, 122, 103, 123, 54, 55, 34, 101, 124, 102, 32, 33, 56, 123, 102, 124, 55, 56, 33, 130, 124, 131, 62, 65, 56, 101, 131, 124, 32, 56, 65, 126, 125, 95, 58, 26, 57, 90, 95, 125, 21, 57, 26, 126, 95, 127, 58, 59, 26, 89, 127, 95, 20, 26, 59, 128, 127, 88, 60, 19, 59, 89, 88, 127, 20, 59, 19, 143, 128, 141, 77, 75, 60, 88, 141, 128, 19, 60, 75, 138, 79, 131, 72, 65, 10, 130, 131, 79, 62, 10, 65, 114, 116, 91, 45, 22, 47, 5, 105, 4, 5, 4, 36, 100, 4, 105, 31, 36, 4, 105, 120, 100, 36, 31, 52, 99, 100, 120, 30, 52, 31, 120, 106, 99, 52, 30, 37, 98, 99, 106, 29, 37, 30, 106, 111, 98, 37, 29, 42, 129, 98, 111, 61, 42, 29]]], "label_keys": [["browDown_L", "browDown_R", "cheekSquint_L", "cheekSquint_R", "browOuterUp_L", "browOuterUp_R", "browInnerUp"], ["eyeBlink_L", "eyeBlink_R", "eyeSquint_L", "eyeSquint_R", "eyeWide_L", "eyeWide_R"], ["mouthClose", "jawOpen", "mouthFunnel", "mouthPucker", "mouthRollLower", "mouthRollUpper", "mouthShrugLower", "mouthShrugUpper", "mouthLowerDown_L", "mouthLowerDown_R", "mouthUpperUp_L", "mouthUpperUp_R"], ["jawForward", "jawLeft", "jawRight", "noseSneer_L", "noseSneer_R", "mouthLeft", "mouthRight", "mouthSmile_L", "mouthSmile_R", "mouthFrown_L", "mouthFrown_R", "mouthDimple_L", "mouthDimple_R", "mouthStretch_L", "mouthStretch_R", "mouthPress_L", "mouthPress_R"]], "type": "dot_features_norm_no_iris_upper_lower_mouth_eye_features_tri", "data_min": [], "data_max": [], "data_means": [0.0009584624785929918, 0.0010070432908833027, 0.00561505788937211, 0.0026129777543246746, 0.03180234506726265, 0.010580021888017654, 0.027208315208554268, 0.015174049884080887, 0.019053246825933456, 0.021434327587485313, 0.023129519075155258, 0.017358053475618362, 0.021504685282707214, 0.012309825979173183, 0.01748153753578663, 0.016332970932126045, 0.007263301406055689, 0.019363461062312126, 0.018046963959932327, 0.008579800836741924, 0.09151671826839447, 0.03532027080655098, 0.0941653698682785, 0.03267161548137665, 0.19824782013893127, 0.14688214659690857, 0.1675434559583664, 0.17758649587631226, 0.0660620629787445, 0.010029759258031845, 0.05049744248390198, 0.025594374164938927, 0.013388559222221375, 0.020216817036271095, 0.012813664972782135, 0.020791713148355484, 0.005662212613970041, 0.02311328984797001, 0.012632292695343494, 0.016143208369612694, 0.0262139979749918, 0.01095395628362894, 0.024555042386054993, 0.012612915597856045, 0.03407197818160057, 0.029567919671535492, 0.02421543002128601, 0.03942446410655975, 0.022325247526168823, 0.024682793766260147, 0.026570377871394157, 0.020437659695744514, 0.015178601257503033, 0.014258328825235367, 0.01086408831179142, 0.018572842702269554, 0.050395336002111435, 0.07209660112857819, 0.0543065071105957, 0.06818541884422302, 0.03203488886356354, 0.036361970007419586, 0.017763681709766388, 0.050633177161216736, 0.055964384227991104, 0.06320002675056458, 0.07204209268093109, 0.047122325748205185, 0.007759011350572109, 0.007501004729419947, 0.005381112918257713, 0.009878900833427906, 0.04116656258702278, 0.03795693442225456, 0.021997306495904922, 0.057126183062791824, 0.0457286611199379, 0.012790507636964321, 0.04283333197236061, 0.015685833990573883, 0.007983056828379631, 0.01715342327952385, 0.0001388487871736288, 0.024997632950544357, 0.01792411133646965, 0.06537957489490509, 0.0016012341948226094, 0.08170245587825775, 0.022745070978999138, 0.06553371995687485, 0.0096671711653471, 0.07861161977052689, 0.01801632158458233, 0.05676553025841713, 0.002364120213314891, 0.0724177435040474, 0.16681423783302307, 0.020389752462506294, 0.10783695429563522, 0.0793670192360878, 0.010316131636500359, 0.017139554023742676, 0.00734533229842782, 0.0201103538274765, 0.016856234520673752, 0.019879693165421486, 0.01631445810198784, 0.020421473309397697, 0.016912968829274178, 0.03552190586924553, 0.0013489547418430448, 0.05108591914176941, 0.027389558032155037, 0.02548580802977085, 0.023887960240244865, 0.02898740954697132, 0.031152784824371338, 0.04223264753818512, 0.009229506365954876, 0.06415592133998871, 0.11480626463890076, 0.09074558317661285, 0.06654737889766693, 0.13900445401668549, 0.06196732074022293, 0.03686026856303215, 0.06424575299024582, 0.03458184748888016, 0.015535380691289902, 0.13692401349544525, 0.009726780466735363, 0.1427326202392578, 0.059599608182907104, 0.015147252939641476, 0.0530291311442852, 0.021717732772231102, 0.08841946721076965, 0.06840980798006058, 0.055165842175483704, 0.10166344046592712, 0.053360484540462494, 0.11954861134290695, 0.037103503942489624, 0.13580559194087982, 0.034810394048690796, 0.018781214952468872, 0.03361587971448898, 0.019975729286670685, 0.007251198869198561, 0.023421205580234528, 0.011118563823401928, 0.019553840160369873, 0.0357130765914917, 0.0331711508333683, 0.016715677455067635, 0.05216854438185692, 0.009014262817800045, 0.022483978420495987, 0.01571260765194893, 0.015785636380314827, 0.016640055924654007, 0.09721265733242035, -0.00042073571239598095, 0.11427345126867294, 0.04610998183488846, 0.02854100614786148, 0.03372888267040253, 0.04092211276292801, 0.15157905220985413, 0.11156394332647324, 0.12671184539794922, 0.13643115758895874, 0.04176277667284012, 0.08159783482551575, 0.05207235738635063, 0.07128825038671494, 0.0034653223119676113, 0.013019933365285397, 0.009557103738188744, 0.006928151473402977, 0.1444462388753891, 0.08576080948114395, 0.0763494074344635, 0.15385763347148895, 0.09526139497756958, 0.049970757216215134, 0.07605482637882233, 0.06917732208967209, 0.040304362773895264, 0.1658620834350586, 0.11258336156606674, 0.09358307719230652, 0.01204579696059227, 5.064598371973261e-05, 0.0057475995272397995, 0.006348843220621347, 0.07918871194124222, 0.05989256873726845, 0.06970753520727158, 0.0693737342953682, 0.0296676903963089, 0.05262714624404907, 0.038453031331300735, 0.043841809034347534, 0.011802580207586288, 0.0048634945414960384, 8.753117435844615e-05, 0.016578542068600655, 0.020046120509505272, 0.053619563579559326, 0.024722063913941383, 0.04894360899925232, 0.006824055220931768, 0.03101937659084797, 0.016941962763667107, 0.02090146765112877, 0.020358260720968246, 0.05029279738664627, 0.027824176475405693, 0.04282688349485397, 0.06812911480665207, 0.06166563555598259, 0.038949258625507355, 0.0908455029129982, 0.030823418870568275, 0.04373401030898094, 0.04018499329686165, 0.03437243402004242, 0.01560981385409832, 0.04182998836040497, 0.029431475326418877, 0.02800832875072956, 0.0049715787172317505, 0.0010853813728317618, 0.0017884960398077965, 0.00426846370100975, 0.004917975980788469, 0.008242158219218254, 0.00675099017098546, 0.006409144960343838, 0.11439801007509232, 0.0708015188574791, 0.020787399262189865, 0.013736214488744736, 0.015147298574447632, 0.01937631517648697, 0.02438150718808174, 0.020754879340529442, 0.02355070784687996, 0.021585674956440926, 0.03039160743355751, 0.008083038032054901, 0.0230221226811409, 0.015452520921826363, 0.03354590758681297, 0.0077066319063305855, 0.027673253789544106, 0.013579286634922028, 0.02557680942118168, 0.008482919074594975, 0.021638723090291023, 0.012421006336808205, 0.013443629257380962, 0.012055521830916405, 0.012470507994294167, 0.0130286430940032, 0.013020467944443226, 0.029497845098376274, 0.024993717670440674, 0.017524592578411102, 0.025103121995925903, 0.04234560579061508, 0.024430440738797188, 0.04301828891038895, 0.05709700658917427, 0.002964586950838566, 0.03635567054152489, 0.023705918341875076, 0.054073382169008255, 0.015899060294032097, 0.041219908744096756, 0.028752528131008148, 0.009372779168188572, 0.03327846899628639, 0.015318827703595161, 0.027332421392202377, 0.019466083496809006, 0.020176872611045837, 0.011795789003372192, 0.02784717082977295, 0.016592970117926598, 0.01821114681661129, 0.0011994709493592381, 0.03360464423894882, 0.017300834879279137, 0.00896559376269579, 0.014446187764406204, 0.011820241808891296, 0.015813909471035004, 0.019322317093610764, 0.010514000430703163, 0.024622224271297455, 0.041107531636953354, 0.038539379835128784, 0.03859834745526314, 0.041048564016819, 0.020250065252184868, 0.06527622789144516, 0.00219165813177824, 0.08333463221788406, 0.01176728680729866, 0.006148751359432936, 0.0063952491618692875, 0.011520789004862309, 0.010927334427833557, 0.02626844123005867, 0.009048189036548138, 0.028147585690021515, 0.003189746756106615, 0.001047678291797638, 0.002412316156551242, 0.00251014088280499, 0.010876696556806564, 0.03212699666619301, 0.015587999485433102, 0.027415689080953598, 0.021553292870521545, 0.019081899896264076, 0.017451027408242226, 0.023184167221188545, 0.012576878070831299, 0.021577639505267143, 0.01652698963880539, 0.017627527937293053, 0.01924513280391693, 0.007476259488612413, 0.008556446991860867, 0.018164945766329765, 0.03625088557600975, 0.09242618083953857, 0.033533915877342224, 0.095143161714077, 0.15025664865970612, 0.19932259619235992, 0.18025469779968262, 0.1693245768547058, 0.010089603252708912, 0.067097008228302, 0.025773154571652412, 0.051413461565971375, 0.02059110812842846, 0.013834694400429726, 0.021093230694532394, 0.01333257369697094, 0.02354457415640354, 0.005520888604223728, 0.01634461246430874, 0.012720850296318531, 0.010927006602287292, 0.026938797906041145, 0.01261371374130249, 0.025252094492316246, 0.029094919562339783, 0.034333735704422, 0.03931177407503128, 0.024116873741149902, 0.024822339415550232, 0.0223153755068779, 0.020639237016439438, 0.026498476043343544, 0.014609248377382755, 0.015299099497497082, 0.018758079037070274, 0.011150269769132137, 0.07315195351839066, 0.04974095895886421, 0.0686292052268982, 0.054263703525066376, 0.03522201627492905, 0.032127756625413895, 0.049603421241045, 0.017746344208717346, 0.06473400443792343, 0.05677974969148636, 0.048350632190704346, 0.07316312193870544, 0.007188798859715462, 0.007735166233032942, 0.009540391154587269, 0.0053835720755159855, 0.03764266148209572, 0.04062659665942192, 0.05644158273935318, 0.021827679127454758, 0.012895357795059681, 0.046591758728027344, 0.015888530761003494, 0.043598588556051254, 0.017102740705013275, 0.0080290287733078, 0.02491878718137741, 0.00021298231149557978, 0.06472694873809814, 0.018105728551745415, 0.08136855065822601, 0.0014641237212345004, 0.06540029495954514, 0.023037368431687355, 0.07821951061487198, 0.010218163020908833, 0.056045565754175186, 0.017681453377008438, 0.07130908221006393, 0.0024179299362003803, 0.021195458248257637, 0.1665366142988205, 0.08005531132221222, 0.10767676681280136, 0.017210761085152626, 0.010162414982914925, 0.02012740820646286, 0.0072457692585885525, 0.01963777467608452, 0.01670161262154579, 0.020161297172307968, 0.01617809571325779, 0.03517119958996773, 0.01748495176434517, 0.05088501796126366, 0.0017711336258798838, 0.025902649387717247, 0.028176549822092056, 0.02947438322007656, 0.024604814127087593, 0.04187890142202377, 0.03176398575305939, 0.06394246965646744, 0.009700409136712551, 0.09019935876131058, 0.11635902523994446, 0.13888733088970184, 0.06767105311155319, 0.037246719002723694, 0.06175660341978073, 0.03479745611548424, 0.06420587748289108, 0.1381712406873703, 0.014585934579372406, 0.1431790292263031, 0.009578125551342964, 0.015641242265701294, 0.06039672717452049, 0.022193705663084984, 0.05384426563978195, 0.06801073998212814, 0.0897948294878006, 0.10126852989196777, 0.05653705075383186, 0.12121204286813736, 0.052906885743141174, 0.1375453621149063, 0.03657355159521103, 0.019182659685611725, 0.0351303294301033, 0.020298253744840622, 0.034014735370874405, 0.023697182536125183, 0.006918806117027998, 0.019837481901049614, 0.010778509080410004, 0.03319263830780983, 0.03562372177839279, 0.05193181335926056, 0.016884544864296913, 0.02264363318681717, 0.008681918494403362, 0.01594884693622589, 0.015376707538962364, 0.09719572961330414, 0.016590096056461334, 0.11399760842323303, -0.00021180477051530033, 0.027895493432879448, 0.047106485813856125, 0.04042673483490944, 0.034575242549180984, 0.11196717619895935, 0.1533479392528534, 0.1370055079460144, 0.12830962240695953, 0.08240267634391785, 0.04252122715115547, 0.07165717333555222, 0.053266722708940506, 0.01277428213506937, 0.00353052606806159, 0.006763224955648184, 0.009541581384837627, 0.08542919903993607, 0.1457022726535797, 0.15400540828704834, 0.07712607085704803, 0.04989008978009224, 0.0959622710943222, 0.06930959224700928, 0.07654276490211487, 0.16842858493328094, 0.03971026837825775, 0.09518996626138687, 0.11294887959957123, -3.1399158615386114e-05, 0.012013934552669525, 0.006212912499904633, 0.005769622046500444, 0.05893167853355408, 0.0803028792142868, 0.06843945384025574, 0.07079508900642395, 0.05311926454305649, 0.02992238849401474, 0.044531743973493576, 0.038509905338287354, 0.004900534171611071, 0.01187540590763092, 0.01663953997194767, 0.00013639865210279822, 0.0528947077691555, 0.020423905923962593, 0.04845243692398071, 0.024866178631782532, 0.030551737174391747, 0.006982103455811739, 0.020579732954502106, 0.01695410907268524, 0.04955659806728363, 0.020606623962521553, 0.04210541024804115, 0.02805781178176403, 0.06058310717344284, 0.06956096738576889, 0.09050605446100235, 0.03963801637291908, 0.044286422431468964, 0.030812732875347137, 0.03472260758280754, 0.04037655144929886, 0.041398532688617706, 0.01574314758181572, 0.027675652876496315, 0.02946602739393711, 0.0010518224444240332, 0.005036170594394207, 0.004156096838414669, 0.0019318965496495366, 0.008338944986462593, 0.0049943700432777405, 0.006442762911319733, 0.006890552118420601, 0.07090817391872406, 0.11592648178339005, 0.012915708124637604, 0.021528594195842743, 0.01876692846417427, 0.015677371993660927, 0.021062389016151428, 0.024030504748225212, 0.02172125317156315, 0.023371640592813492, 0.007864276878535748, 0.03158018738031387, 0.015553937293589115, 0.023890526965260506, 0.00788877159357071, 0.03452903404831886, 0.013775202445685863, 0.028642605990171432, 0.008731149137020111, 0.025845520198345184, 0.012492726556956768, 0.022083943709731102, 0.011747396551072598, 0.013323877938091755, 0.012793575413525105, 0.012277700006961823, 0.029758449643850327, 0.013404075056314468, 0.017863111570477486, 0.02529941312968731, 0.043395426124334335, 0.02519271709024906, 0.04389430209994316, 0.024693841114640236, 0.002487616613507271, 0.058051180094480515, 0.023873046040534973, 0.03666575253009796, 0.016282064840197563, 0.05492701008915901, 0.02919151447713375, 0.042017560452222824, 0.033046647906303406, 0.009194583632051945, 0.027417104691267014, 0.014824125915765762, 0.020230920985341072, 0.01949259452521801, 0.027841465547680855, 0.01188204251229763, 0.01780499704182148, 0.016780059784650803, 0.033200085163116455, 0.0013849688693881035, 0.008716283366084099, 0.0171784870326519, 0.011522030457854271, 0.01437273807823658, 0.019000761210918427, 0.015753036364912987, 0.024310650303959846, 0.010443147271871567, 0.03801502287387848, 0.041074130684137344, 0.0406385138630867, 0.038450632244348526, 0.06523336470127106, 0.021197663620114326, 0.08364110440015793, 0.0027899143751710653, 0.00596371665596962, 0.011900968849658966, 0.01132891420274973, 0.006535771768540144, 0.025395188480615616, 0.010891971178352833, 0.02721889689564705, 0.009068263694643974, 0.005885453894734383, 0.0054228948429226875, 0.005574987269937992, 0.005757585167884827, 0.02890717424452305, 0.005003248807042837, 0.005023003555834293, 0.028751889243721962, 0.02841075323522091, 0.005499669816344976, 0.005609978921711445, 0.028164919465780258, 0.004022703506052494, 0.03839637711644173, 0.03788066655397415, 0.004002286586910486, 0.009675349108874798, 0.03274373337626457, 0.032409556210041046, 0.00947339367121458, 0.005360433366149664, 0.027826568111777306, 0.027799731120467186, 0.005095434375107288, 0.006560017820447683, 0.026626983657479286, 0.02638670988380909, 0.006508455611765385, 0.06350692361593246, 0.023178592324256897, 0.023110024631023407, 0.0635368749499321, 0.05302991345524788, 0.03365560993552208, 0.03351029008626938, 0.053136613219976425, 0.02166939340531826, 0.0014093514764681458, 0.0013514403253793716, 0.021760348230600357, 0.02303030714392662, 4.8440502723678946e-05, 6.647076952503994e-05, 0.023045316338539124, 0.0018620425835251808, 0.01770467683672905, 0.01757699064910412, 0.0019222425762563944, 0.0033565135672688484, 0.01621020957827568, 0.016202935948967934, 0.0032962963450700045, 0.03636700659990311, 0.0316324457526207, 0.031528618186712265, 0.03634941577911377, 0.03428526967763901, 0.0337141752243042, 0.0336156003177166, 0.034262433648109436, 0.02603255771100521, 0.08683351427316666, 0.08607469499111176, 0.025721756741404533, 0.05249905586242676, 0.06036701425909996, 0.05943998694419861, 0.052356451749801636, 0.03646713122725487, 0.035266466438770294, 0.035771239548921585, 0.03638780489563942, 0.037209950387477875, 0.03452363982796669, 0.03482655808329582, 0.03733248636126518, -0.0002757781185209751, 0.0109507255256176, 0.010928465984761715, -0.00032790936529636383, -0.0018051794031634927, 0.012480128556489944, 0.012420364655554295, -0.0018198058241978288, 0.04993613436818123, 0.029402825981378555, 0.029640506953001022, 0.05021069198846817, 0.04305045306682587, 0.03628851845860481, 0.03647952899336815, 0.043371666222810745, 0.0501881018280983, 0.005071873310953379, 0.00533944321796298, 0.04992153123021126, 0.03345107659697533, 0.021808896213769913, 0.0218220092356205, 0.033438969403505325, 0.0020475040655583143, 0.01665797457098961, 0.016705896705389023, 0.001984044909477234, -0.0007108051795512438, 0.01941628009080887, 0.019466400146484375, -0.0007764579495415092, 0.01718723401427269, 0.046921566128730774, 0.046952616423368454, 0.01680903695523739, 0.026005148887634277, 0.03810364753007889, 0.03810646012425423, 0.025655193254351616, 0.02122175507247448, 0.03213158994913101, 0.031721025705337524, 0.020796164870262146, 0.026631057262420654, 0.026722287759184837, 0.026339052245020866, 0.026178138330578804, 0.025202926248311996, 0.00400166492909193, 0.0040250071324408054, 0.025163402780890465, 0.023121457546949387, 0.0060831340961158276, 0.00614088773727417, 0.023047523573040962, 0.032835137099027634, 0.007676077075302601, 0.007502107415348291, 0.032841552048921585, 0.03135661408305168, 0.009154606610536575, 0.009135511703789234, 0.03120815008878708, 0.06754796952009201, 0.05221839249134064, 0.05170522630214691, 0.06815771013498306, 0.05621564760804176, 0.06355070322751999, 0.06337576359510422, 0.05648715794086456, 0.05275442451238632, 0.02998337708413601, 0.029943551868200302, 0.052415672689676285, 0.0471675731241703, 0.03557022660970688, 0.03534575179219246, 0.04701347276568413, -0.010977497324347496, 0.050810106098651886, 0.05046600475907326, -0.010850799269974232, 0.031163765117526054, 0.02661798894405365, 0.026900576427578926, 0.03143700957298279, 0.030816037207841873, 0.02696571871638298, 0.02708219178020954, 0.031255390495061874, 0.011860005557537079, 0.002034959848970175, 0.0020777415484189987, 0.011862294748425484, 0.012294488959014416, 0.001600475749000907, 0.0015799064422026277, 0.012360128574073315, 0.04621139541268349, 0.06659480184316635, 0.0668988898396492, 0.04529530182480812, 0.05774557963013649, 0.055060598999261856, 0.055333755910396576, 0.05686045065522194, 0.06291753053665161, 0.025610987097024918, 0.026066213846206665, 0.06281393021345139, 0.04662888124585152, 0.04189964011311531, 0.04235084354877472, 0.04652930423617363, 0.07389014214277267, 0.028019752353429794, 0.02825934812426567, 0.07388510555028915, 0.06283166259527206, 0.039078239351511, 0.039033193141222, 0.06311126053333282, 0.05160742625594139, 0.0267635527998209, 0.02726048044860363, 0.05158013105392456, 0.04642927274107933, 0.03194170817732811, 0.03218497335910797, 0.04665563255548477, 0.03325378894805908, 0.05761918053030968, 0.057019222527742386, 0.03293166309595108, 0.035597898066043854, 0.05527506396174431, 0.05488429218530655, 0.03506658226251602, 0.04883366450667381, 0.028310345485806465, 0.02860073745250702, 0.04922343045473099, 0.041031040251255035, 0.03611297160387039, 0.03647473827004433, 0.04134942218661308, -0.0014812566805630922, 0.010813038796186447, 0.010801656171679497, -0.0015018400736153126, -0.00013526449038181454, 0.009467046707868576, 0.00939848180860281, -9.866552863968536e-05, 0.0032999105751514435, 0.02620586007833481, 0.02596632018685341, 0.0031941451597958803, 0.006410648580640554, 0.02309512533247471, 0.022840628400444984, 0.006319834850728512, 0.03457927703857422, 0.016057437285780907, 0.015435897745192051, 0.03370242938399315, 0.01257686410099268, 0.0005941065610386431, 0.0005570741486735642, 0.012616035528481007, 0.0035972348414361477, 0.0229113157838583, 0.02259695902466774, 0.0034995581954717636, 0.004937628284096718, 0.021570926532149315, 0.02130502089858055, 0.004791495390236378, 0.02415172941982746, 0.1815473735332489, 0.18159063160419464, 0.023847796022892, 0.07796955108642578, 0.12772957980632782, 0.12746043503284454, 0.0779779702425003, 0.0033393865451216698, 0.023043733090162277, 0.02318986877799034, 0.0032425702083855867, 0.00563826272264123, 0.02074485644698143, 0.020650634542107582, 0.005781804211437702, 0.0033272167202085257, 0.012992696836590767, 0.013114207424223423, 0.0033701101783663034, -0.0003833834489341825, 0.016703296452760696, 0.016810836270451546, -0.00032651846413500607, 0.018602682277560234, 0.002742969198152423, 0.002836626023054123, 0.0185400303453207, 0.01726001501083374, 0.004085636232048273, 0.004149062093347311, 0.017227593809366226, 0.02894480712711811, 0.0055397492833435535, 0.005638373550027609, 0.028890712186694145, 0.026413876563310623, 0.008070678450167179, 0.007992072030901909, 0.026537014171481133, 0.02460050769150257, 0.003218489931896329, 0.003222785657271743, 0.024727094918489456, 0.022859511896967888, 0.004959487821906805, 0.005032500252127647, 0.022917380556464195, 0.0025244655553251505, 0.015221891924738884, 0.014963808469474316, 0.0025685701984912157, 0.0013849899405613542, 0.01636136882007122, 0.01620597019791603, 0.001326410099864006, 0.010839248076081276, 0.0022033562418073416, 0.0022428384982049465, 0.011020133271813393, 0.012255043722689152, 0.0007875615265220404, 0.0008589223143644631, 0.012404047884047031, 0.0009708598372526467, 0.01784399338066578, 0.01775168813765049, 0.0010606428841128945, 0.002536135958507657, 0.016278717666864395, 0.016183776780962944, 0.0026285548228770494, 0.03594512119889259, 0.0190235935151577, 0.019178375601768494, 0.03621656820178032, 0.02550216019153595, 0.029466552659869194, 0.02975623682141304, 0.02563871443271637, 0.0024548270739614964, 0.019185489043593407, 0.019094014540314674, 0.0025419818703085184, 0.0041571566835045815, 0.01748315989971161, 0.01746705174446106, 0.004168943967670202, 0.0028575921896845102, 0.012579746544361115, 0.01249763835221529, 0.002832249039784074, 0.0021403837017714977, 0.01329695526510477, 0.013146352022886276, 0.0021835342049598694, 0.04091670736670494, 0.0363510437309742, 0.03658076003193855, 0.041083838790655136, 0.03681156411767006, 0.04045617952942848, 0.04061256721615791, 0.037052031606435776, 0.009813188575208187, 0.031673695892095566, 0.03110058233141899, 0.009862997569143772, 0.011644204147160053, 0.02984267845749855, 0.029404066503047943, 0.011559509672224522, 0.02586270123720169, 0.048224180936813354, 0.04866808280348778, 0.026108378544449806, 0.0367041751742363, 0.037382714450359344, 0.03794226422905922, 0.036834198981523514, 0.005035281181335449, 0.028216466307640076, 0.027931049466133118, 0.005106007680296898, 0.008300041779875755, 0.02495170384645462, 0.024808544665575027, 0.008228513412177563, 0.0028414654079824686, 0.022080281749367714, 0.02223893441259861, 0.0030836700461804867, 0.005222175270318985, 0.019699575379490852, 0.01992814801633358, 0.005394455976784229, 0.07707154750823975, 0.0213310569524765, 0.021293269470334053, 0.0774119570851326, 0.06386612355709076, 0.03453648090362549, 0.03457747772336006, 0.06412775814533234, 0.0224266666918993, 0.06177789717912674, 0.06093547120690346, 0.023190302774310112, 0.01488575804978609, 0.06931880861520767, 0.0689135193824768, 0.01521222572773695, 0.02058957889676094, 0.0025650118477642536, 0.00264900759793818, 0.020495131611824036, 0.0194379985332489, 0.0037165924441069365, 0.003712523030117154, 0.019431615248322487, 0.023611566051840782, 0.0038703985046595335, 0.0038902158848941326, 0.02359255589544773, 0.02205014042556286, 0.00543182622641325, 0.005516957025974989, 0.021965812891721725, 0.02932065911591053, 0.005788552574813366, 0.005839203018695116, 0.029211916029453278, 0.02777433767914772, 0.0073348721489310265, 0.007345658726990223, 0.02770545892417431, 0.03813246265053749, 0.03281630948185921, 0.03254169598221779, 0.038419581949710846, 0.037398938089609146, 0.03354983776807785, 0.033561866730451584, 0.03739940747618675, 0.020764091983437538, 0.05284073203802109, 0.052730362862348557, 0.020392371341586113, 0.027968278154730797, 0.04563654586672783, 0.04563106968998909, 0.027491668239235878, 0.003587540704756975, 0.015605240128934383, 0.01563517190515995, 0.0037281657569110394, 0.004649173468351364, 0.014543607831001282, 0.01455957256257534, 0.004803764168173075, 0.013164635747671127, 0.0012220651842653751, 0.001275696326047182, 0.01318086963146925, 0.016515467315912247, -0.002128767780959606, -0.0020458644721657038, 0.01650243066251278, 0.021150927990674973, 0.03208109736442566, 0.03199780732393265, 0.021062655374407768, 0.026418741792440414, 0.026813281700015068, 0.026625534519553185, 0.02643493190407753, 0.013586469925940037, 0.07683483511209488, 0.07664096355438232, 0.013630985282361507, 0.037456393241882324, 0.05296491086483002, 0.0529322549700737, 0.03733968734741211, 0.07388583570718765, 0.023125478997826576, 0.02316446416079998, 0.07409963011741638, 0.06479888409376144, 0.03221243619918823, 0.03208654746413231, 0.0651775598526001, 0.029349476099014282, 0.009595082141458988, 0.009606669656932354, 0.02913002483546734, 0.020677318796515465, 0.05212793126702309, 0.051827386021614075, 0.020386960357427597, 0.020626911893486977, 0.05217834189534187, 0.051684122532606125, 0.020530223846435547, 0.017139526084065437, 0.04883945360779762, 0.048462361097335815, 0.017079805955290794, 0.021977834403514862, 0.04400114715099335, 0.043872442096471786, 0.021669724956154823, 0.014090077951550484, 0.03774363547563553, 0.03770215064287186, 0.013648035004734993, 0.021229658275842667, 0.030604055151343346, 0.030437707901000977, 0.020912474021315575, 0.009046846069395542, 0.02356758527457714, 0.023380117490887642, 0.00901411660015583, 0.017866218462586403, 0.014748211950063705, 0.014626993797719479, 0.017767243087291718], "data_vars": [5.339471726983902e-07, 1.0307996234359962e-07, 1.26115037346608e-06, 2.386340383964125e-06, 2.9954388082842343e-05, 6.357935490086675e-06, 1.9627850633696653e-05, 7.6134110713610426e-06, 8.97258723853156e-06, 1.5318291843868792e-05, 1.5571380572509952e-05, 8.785131285549141e-06, 1.3617334843729623e-05, 5.164934464119142e-06, 9.32976217882242e-06, 7.902936886239331e-06, 4.997736141376663e-06, 6.60526129649952e-05, 3.537176235113293e-05, 1.1856940545840189e-05, 0.00022829818772152066, 7.924408419057727e-05, 0.00016681707347743213, 2.8484722861321643e-05, 0.003092251718044281, 0.0009263755055144429, 0.0024961286690086126, 0.0011078238021582365, 8.693015843164176e-05, 2.3594233425683342e-05, 4.535955667961389e-05, 1.8810880646924488e-05, 1.0703782209020574e-05, 0.00018983187328558415, 6.595052127522649e-06, 0.00013729541387874633, 2.009636773436796e-05, 3.944470881833695e-05, 8.817787602311e-06, 1.686139512457885e-05, 1.6497513570357114e-05, 5.966903700027615e-06, 1.5199826520984061e-05, 5.170092208572896e-06, 7.504005770897493e-05, 7.579872180940583e-05, 2.341326944588218e-05, 4.1173545469064265e-05, 0.00023085300927050412, 2.179864895879291e-05, 0.0002099464909406379, 1.4605384421884082e-05, 1.1845731023640838e-05, 6.835807289462537e-05, 3.901034233422251e-06, 3.98140364268329e-05, 0.00025921579799614847, 0.0001825896615628153, 0.00023648107890039682, 0.00013593139010481536, 3.4907159715658054e-05, 3.388454206287861e-05, 1.1770227501983754e-05, 5.333644003258087e-05, 0.00033793176407925785, 0.00038753831177018583, 0.0001652137580094859, 0.00010718466364778578, 2.3263669390871655e-06, 4.642587555281352e-06, 1.9181256902811583e-06, 4.915379577141721e-06, 0.0001428022515028715, 3.2106352591654286e-05, 0.00011494761565700173, 5.817900091642514e-05, 4.539143628790043e-05, 8.435114068561234e-06, 3.458294304437004e-05, 6.916564416314941e-06, 4.807743152923649e-06, 1.3158594811102375e-05, 5.014738690078957e-06, 2.7017786123906262e-05, 1.7176887922687456e-05, 5.903050987399183e-05, 1.559161137265619e-05, 0.00010063863010145724, 2.3609813069924712e-05, 0.0001404913200531155, 2.056349148915615e-05, 0.0001773668482201174, 2.7743521059164777e-05, 3.8985370338195935e-05, 2.3982496713870205e-05, 6.953470438020304e-05, 0.0008761662757024169, 0.0001267491898033768, 0.0002760574279818684, 0.000106927560409531, 2.617656264192192e-06, 7.007308795436984e-06, 2.208859086749726e-06, 1.020562103803968e-05, 0.00013550715812016279, 3.316766378702596e-05, 8.19336564745754e-05, 1.859996518760454e-05, 1.601444455445744e-05, 5.401159432949498e-05, 8.95907032827381e-06, 0.000120900287583936, 2.3000147848506458e-05, 0.00029302662005648017, 1.661068745306693e-05, 0.00030591170070692897, 9.396838868269697e-05, 5.5984837672440335e-05, 3.0237053579185158e-05, 0.00014935039507690817, 0.0012065068585798144, 0.0002564573078416288, 0.0007396160508506, 0.000507824239321053, 0.00017627057968638837, 5.194248296902515e-05, 0.00019475765293464065, 2.9068189178360626e-05, 3.3988060749834403e-05, 0.0005500542465597391, 1.4063813978282269e-05, 0.0005427420837804675, 7.990156154846773e-05, 1.2508435247582383e-05, 5.6239532568724826e-05, 1.315402096224716e-05, 0.0007000158075243235, 0.00011491913755889982, 0.0004734531103167683, 0.0002777900081127882, 8.497729140799493e-05, 0.0005325073725543916, 5.4575659305555746e-05, 0.0006970558315515518, 3.0297485864139162e-05, 1.106584841181757e-05, 2.892175871238578e-05, 9.670769941294566e-06, 2.1843188733328134e-06, 9.972275620384607e-06, 3.5535992992663523e-06, 7.003615792200435e-06, 0.00012718614016193897, 2.1346131688915193e-05, 9.397634858032688e-05, 5.2645256801042706e-05, 5.189589955989504e-06, 1.7297157683060504e-05, 9.264905202144291e-06, 9.248475180356763e-06, 1.8295020709047094e-05, 0.00020150317868683487, 1.1790296412073076e-05, 0.0002721990749705583, 3.629479033406824e-05, 3.9438022213289514e-05, 2.0190263967378996e-05, 5.234523632680066e-05, 0.002315798308700323, 0.0005255487631075084, 0.0017152737127617002, 0.0006335361395031214, 7.689293852308765e-05, 0.0001910604041768238, 6.269967707339674e-05, 0.00011766421084757894, 2.2986280328041175e-06, 3.631356230471283e-05, 5.925298864895012e-06, 1.0488174666534178e-05, 0.000590055191423744, 0.0002761102223303169, 0.00011898963566636667, 0.0003839934361167252, 0.0002221450413344428, 0.000256335741141811, 0.0001485140819568187, 0.0002800534130074084, 0.00013493977894540876, 0.0007362337200902402, 0.0004501925141084939, 0.00024544421466998756, 6.601310360565549e-06, 1.5482263506783056e-06, 3.0824560326436767e-06, 3.097056833212264e-06, 0.00036895027733407915, 0.00013028043031226844, 0.0003524291096255183, 0.00017893491894938052, 5.572280861088075e-05, 8.318486652569845e-05, 5.996014442644082e-05, 5.1891729526687413e-05, 2.2803860701969825e-05, 2.1511843897314975e-06, 3.058362153751659e-06, 1.2175853044027463e-05, 2.5624289264669642e-05, 0.0004943641251884401, 4.715563409263268e-05, 0.0003912097599823028, 8.980783604783937e-06, 0.00018343949341215193, 1.6803898688522168e-05, 8.6967833340168e-05, 3.081850445596501e-05, 0.0004281283472664654, 4.166453072684817e-05, 0.0003371997154317796, 0.0003483959590084851, 8.421517122769728e-05, 0.00021387498418334872, 0.0002644033229444176, 5.751719800173305e-05, 5.652706022374332e-05, 4.3793344957521185e-05, 3.028929313586559e-05, 2.2703135982737876e-05, 0.0003146201779600233, 7.872438436606899e-05, 0.00014197341806720942, 9.864589856078965e-07, 4.889377009931195e-07, 7.182078434198047e-07, 2.0284710444684606e-06, 2.3586617317050695e-06, 6.9051229729666375e-06, 1.4292193100118311e-06, 3.0697578949911986e-06, 0.00047801650362089276, 0.00017434947949368507, 9.419650268682744e-06, 1.6317306290147826e-05, 5.582439825957408e-06, 2.1793168343720026e-05, 2.9128064852557145e-05, 1.6426987713202834e-05, 1.744684050208889e-05, 1.155661084339954e-05, 1.7585305613465607e-05, 1.1479922250146046e-05, 9.348799721919931e-06, 1.1180415640410502e-05, 2.2477399397757836e-05, 8.60706131788902e-06, 1.4323951290862169e-05, 5.655125278281048e-06, 1.8365235519013368e-05, 4.402026661409764e-06, 1.2736490134557243e-05, 4.080222424818203e-06, 5.544946816371521e-06, 5.229740963841323e-06, 6.484339337475831e-06, 4.58053000329528e-06, 1.4055100109544583e-05, 2.2858059310237877e-05, 1.6393991245422512e-05, 1.22332758110133e-05, 5.8673147577792406e-05, 5.9761296142823994e-05, 2.442411641823128e-05, 6.142393976915628e-05, 0.00013384433987084776, 2.565453905845061e-05, 5.6817574659362435e-05, 5.9890950069529936e-05, 7.935538451420143e-05, 5.4284562793327495e-05, 5.249865716905333e-05, 6.207748810993508e-05, 2.073114228551276e-05, 2.0126011804677546e-05, 2.1313784600351937e-05, 1.451853404432768e-05, 2.8675285648205318e-05, 6.6730108301271684e-06, 2.4220194973167963e-05, 1.1048656233469956e-05, 1.9325423636473715e-05, 7.081286639731843e-06, 6.204327291925438e-06, 2.260140172438696e-05, 9.461315130465664e-06, 5.590543878497556e-06, 1.0471171663084533e-05, 6.837932232883759e-06, 7.481475677195704e-06, 6.164016667753458e-06, 8.316515959450044e-06, 8.609632459410932e-06, 3.666979682748206e-05, 1.8399179680272937e-05, 3.485421621007845e-05, 2.0353712898213416e-05, 1.5415525922435336e-05, 0.00016653124475851655, 1.7831882360042073e-05, 0.00023260530724655837, 5.5297605285886675e-06, 3.3190021895279642e-06, 2.6304171569790924e-06, 5.439733740786323e-06, 5.865151251782663e-06, 2.6468329451745376e-05, 6.065211891836952e-06, 2.484555443516001e-05, 1.5917236169116222e-06, 1.0177103604291915e-07, 5.999109475851583e-07, 2.3223456082632765e-06, 6.494849458249519e-06, 3.0323511964525096e-05, 8.013011211005505e-06, 1.9777162378886715e-05, 1.6899635738809593e-05, 9.515288184047677e-06, 9.355171641800553e-06, 1.674672785156872e-05, 5.3662151913158596e-06, 1.3874386240786407e-05, 8.250160135503393e-06, 9.252091331291012e-06, 6.507631769636646e-05, 5.230781425780151e-06, 1.1506783266668208e-05, 3.574077345547266e-05, 7.52280539018102e-05, 0.0002267898089485243, 3.068911246373318e-05, 0.00016579889052081853, 0.0009007648332044482, 0.0029540415853261948, 0.0010663717985153198, 0.002413744805380702, 2.319840496056713e-05, 8.569993224227801e-05, 1.784108826541342e-05, 4.3856554839294404e-05, 0.00019668843015097082, 9.75241982814623e-06, 0.00014196612755768, 6.1445648498192895e-06, 4.071030343766324e-05, 2.032967677223496e-05, 1.7188363926834427e-05, 8.846054697642103e-06, 6.030089934938587e-06, 1.61248190124752e-05, 5.190496267459821e-06, 1.4966636626922991e-05, 7.659417315153405e-05, 8.422042446909472e-05, 4.1391376726096496e-05, 2.5046767405001447e-05, 2.3463571778847836e-05, 0.00023769712424837053, 1.5520585293415934e-05, 0.0002128564810846001, 7.009634282439947e-05, 1.1848454960272647e-05, 4.026897659059614e-05, 4.140718374401331e-06, 0.00019482933566905558, 0.0002654529525898397, 0.0001426533708581701, 0.00024362550175283104, 3.0204939321265556e-05, 3.277920768596232e-05, 4.8053876525955275e-05, 1.0936147191387136e-05, 0.000365819112630561, 0.0003595411835703999, 0.00010061085049528629, 0.0001816860749386251, 4.309588803153019e-06, 2.4806529381748987e-06, 4.743605131807271e-06, 2.0285065147618297e-06, 3.2485437259310856e-05, 0.00014442905376199633, 5.829970177728683e-05, 0.00011876373901031911, 7.977551831572782e-06, 4.7501416702289134e-05, 6.906859198352322e-06, 3.5845921956934035e-05, 1.2780126780853607e-05, 4.996105872123735e-06, 2.601349842734635e-05, 4.88013165522716e-06, 5.987683834973723e-05, 1.689407872618176e-05, 0.00010151757305720821, 1.5481342416023836e-05, 0.00013895791198592633, 2.4349725208594464e-05, 0.0001743668835842982, 2.0861607481492683e-05, 3.703436232171953e-05, 2.8818039936595596e-05, 6.543185736518353e-05, 2.46959607466124e-05, 0.0001229270565090701, 0.0008401681552641094, 0.00010855605796677992, 0.00026714178966358304, 6.957046025490854e-06, 2.4529661004635273e-06, 9.477852472628001e-06, 2.137260025847354e-06, 3.367578028701246e-05, 0.00013649674656335264, 1.8859915144275874e-05, 8.333923324244097e-05, 5.275322837405838e-05, 1.6317007975885645e-05, 0.00011919342796318233, 8.457525837002322e-06, 0.0003065184282604605, 2.0731946278829128e-05, 0.00031789159402251244, 1.4618172826885711e-05, 5.545864041778259e-05, 9.913223038893193e-05, 0.00014807989646214992, 3.191066571162082e-05, 0.0002513255749363452, 0.0011581791331991553, 0.00048766323016025126, 0.0007211781921796501, 5.368792699300684e-05, 0.0001759060105541721, 3.06355650536716e-05, 0.00019748852355405688, 0.0005421460955403745, 2.9637985790031962e-05, 0.0005371818551793694, 1.2615709238161799e-05, 1.3204609786043875e-05, 8.1241836596746e-05, 1.3613327610073611e-05, 5.81062886340078e-05, 0.00011225118942093104, 0.0006791549385525286, 0.0002684740466065705, 0.0004670906055252999, 0.0005263508064672351, 8.16240135463886e-05, 0.0006887301569804549, 5.019495074520819e-05, 1.1391373845981434e-05, 3.0804993002675474e-05, 1.0035151717602275e-05, 2.8952761567779817e-05, 1.0326361007173546e-05, 1.9139135929435724e-06, 7.241671937663341e-06, 3.283363639638992e-06, 2.126998697349336e-05, 0.00013298753765411675, 5.04260569869075e-05, 9.964529454009607e-05, 1.690606768534053e-05, 5.112467079015914e-06, 8.939731742430013e-06, 9.503976798441727e-06, 0.0002035998331848532, 1.7050620954250917e-05, 0.0002756546309683472, 1.130000782723073e-05, 3.566162195056677e-05, 3.6949979403289035e-05, 4.828510282095522e-05, 1.9862432964146137e-05, 0.0005006029969081283, 0.00223131594248116, 0.0006000260473228991, 0.0016720013227313757, 0.00019855394202750176, 7.552130409749225e-05, 0.00012138607417000458, 6.772428605472669e-05, 3.53441500919871e-05, 2.268265916427481e-06, 1.0146704880753532e-05, 5.518977559404448e-06, 0.00026475032791495323, 0.0006173101137392223, 0.0003728623269125819, 0.00011736035958165303, 0.000259831256698817, 0.00022564007667824626, 0.00028946675593033433, 0.000146037113154307, 0.0007548145367763937, 0.00013338547432795167, 0.00024216444580815732, 0.0004720342403743416, 1.424441734343418e-06, 6.345506790239597e-06, 2.864832367777126e-06, 3.0445501124631846e-06, 0.00012987558147870004, 0.0004055512836202979, 0.00017392513109371066, 0.0004054513992741704, 8.838995563564822e-05, 5.6979351938935e-05, 5.7212295359931886e-05, 6.131385453045368e-05, 2.106941337842727e-06, 2.2393935068976134e-05, 1.1740244190150406e-05, 2.9978377824591007e-06, 0.0004817536973860115, 2.6617753974278457e-05, 0.00038335632416419685, 4.668962355935946e-05, 0.00017787171236705035, 8.592536687501706e-06, 8.483664714731276e-05, 1.5543382687610574e-05, 0.0004164507845416665, 2.962770486192312e-05, 0.0003271162568125874, 4.010033080703579e-05, 8.032572804950178e-05, 0.0003506809880491346, 0.0002458902890793979, 0.00022691242338623852, 5.872736073797569e-05, 5.3017625759821385e-05, 3.0769955628784373e-05, 4.1999639506684616e-05, 0.00030922124278731644, 2.4555347408750094e-05, 0.00013889411638956517, 8.106879249680787e-05, 5.016700583837519e-07, 1.0399634220448206e-06, 1.9458975657471456e-06, 7.188016866166436e-07, 6.573944119736552e-06, 2.4050041247392073e-06, 3.0922026326152263e-06, 1.5230231156238005e-06, 0.00017269383533857763, 0.0005526632303372025, 1.466191497456748e-05, 8.759228876442648e-06, 2.0091463738936e-05, 5.071353371022269e-06, 1.6490816051373258e-05, 2.8583304811036214e-05, 1.1626651030383073e-05, 1.737899219733663e-05, 1.0815121640916914e-05, 1.668307595537044e-05, 1.0583248695184011e-05, 8.939039616961963e-06, 8.154158422257751e-06, 2.292508725076914e-05, 5.691562819265528e-06, 1.4648512660642155e-05, 4.690470632340293e-06, 1.777456964191515e-05, 4.461410753719974e-06, 1.2310450983932242e-05, 5.155460712558124e-06, 5.436189439933514e-06, 4.338019607530441e-06, 6.739976015524007e-06, 2.2663300114800222e-05, 1.482426614529686e-05, 1.179907030746108e-05, 1.860922020568978e-05, 5.74729529034812e-05, 6.232690066099167e-05, 6.363628199324012e-05, 2.614464028738439e-05, 2.587586459412705e-05, 0.00012556732690427452, 6.2491228163708e-05, 5.38785861863289e-05, 5.772897566203028e-05, 7.287222251761705e-05, 6.616409518755972e-05, 4.66664569103159e-05, 2.2217338482732885e-05, 2.016534563153982e-05, 1.5665638784412295e-05, 2.0917832443956286e-05, 7.1623044277657755e-06, 2.9190838176873513e-05, 1.1657727554847952e-05, 2.5200171876349486e-05, 7.033369456621585e-06, 2.0190762370475568e-05, 2.2016509319655597e-05, 6.478790510300314e-06, 5.259912541077938e-06, 1.0346470844524447e-05, 6.353963726724032e-06, 1.1814815479738172e-05, 6.144574399513658e-06, 6.924326953594573e-06, 9.044991202245e-06, 7.955294677230995e-06, 1.8732929675024934e-05, 3.6463541619013995e-05, 2.1212539650150575e-05, 3.425675822654739e-05, 0.0001643048890400678, 1.6000725736375898e-05, 0.00023365205561276525, 1.7795251551433466e-05, 3.003647634614026e-06, 5.289710770739475e-06, 4.982992777513573e-06, 2.4736243631195975e-06, 2.3668337234994397e-05, 5.536486696655629e-06, 2.2232861738302745e-05, 5.583108304563211e-06, 9.331059118267149e-05, 0.00012983992928639054, 0.0001277391129406169, 9.627899999031797e-05, 3.918042784789577e-05, 2.604472456368967e-06, 2.4987373308249516e-06, 3.86592437280342e-05, 3.945919524994679e-05, 1.7854944189821254e-06, 1.7285958620050224e-06, 3.9641643525101244e-05, 1.551284185552504e-06, 5.478897219290957e-05, 5.623513789032586e-05, 1.8897321751865093e-06, 1.4360318800754612e-06, 4.161777178524062e-05, 4.182115299045108e-05, 1.659839313106204e-06, 7.227097853501618e-07, 3.366342207300477e-05, 3.2932224712567404e-05, 8.038132932597364e-07, 9.61282012212905e-07, 2.702393612707965e-05, 2.6691961465985514e-05, 9.161105936073e-07, 7.749829819658771e-05, 8.603712194599211e-05, 8.615553088020533e-05, 7.603126869071275e-05, 5.874380440218374e-05, 0.00010983548418153077, 0.00011027861182810739, 5.6060842325678095e-05, 2.6669635190046392e-05, 1.1172118092872552e-06, 1.1001947086697328e-06, 2.8777129045920447e-05, 2.6504596462473273e-05, 7.285511287591362e-07, 6.940010734979296e-07, 2.8468686650739983e-05, 8.148739993885101e-07, 2.3004859031061642e-05, 2.2938655092730187e-05, 8.043734283091908e-07, 9.394225344294682e-07, 1.847938801802229e-05, 1.8747596186585724e-05, 1.030870635077008e-06, 6.087447764002718e-05, 3.12684423988685e-05, 3.290722816018388e-05, 5.813570896862075e-05, 5.066502490080893e-05, 3.458158244029619e-05, 3.586319871828891e-05, 4.893045115750283e-05, 6.325239519355819e-05, 0.0002104303566738963, 0.00020714617858175188, 6.106025830376893e-05, 9.153464634437114e-05, 0.00015282293315976858, 0.0001469405833631754, 8.684358181199059e-05, 5.947280442342162e-05, 8.474782953271642e-05, 8.822282688925043e-05, 6.26414330326952e-05, 6.349800969474018e-05, 9.325578139396384e-05, 9.688183490652591e-05, 6.688966823276132e-05, 6.695335059703211e-07, 3.3915355743374676e-05, 3.2755382562754676e-05, 6.061383714950352e-07, 4.6235788886406226e-07, 3.5312426916789263e-05, 3.43622341461014e-05, 4.4857199554826366e-07, 8.120956044876948e-05, 0.0001464051747461781, 0.00014712550910189748, 7.769755757180974e-05, 5.4891286708880216e-05, 0.00017181930888909847, 0.00016787229105830193, 5.2807798056164756e-05, 6.752836634404957e-05, 2.3325439542531967e-05, 2.325934656255413e-05, 6.967531953705475e-05, 2.826210948114749e-05, 1.6882817362784408e-05, 1.5822193745407276e-05, 2.8516415113699622e-05, 1.7034864185916376e-06, 3.278916483395733e-05, 3.206613109796308e-05, 1.5392214436360518e-06, 8.867603469298047e-07, 4.2089057387784123e-05, 4.074320531799458e-05, 8.374831281798834e-07, 6.068753282306716e-05, 6.90485248924233e-05, 7.253897638292983e-05, 5.8950874517904595e-05, 7.536619523307309e-05, 7.512318552471697e-05, 7.811195973772556e-05, 7.403466588584706e-05, 4.845193325309083e-05, 7.412064587697387e-05, 6.834091618657112e-05, 4.8079458792926744e-05, 5.666831202688627e-05, 7.192205521278083e-05, 6.643450615229085e-05, 5.550569039769471e-05, 4.86037642986048e-05, 3.602425067583681e-06, 3.2815123631735332e-06, 4.6647575800307095e-05, 3.9443937566829845e-05, 1.2964900406586821e-06, 1.1923772262889543e-06, 3.7092719139764085e-05, 8.331074786838144e-05, 3.760154640986002e-06, 2.9797245133522665e-06, 8.519503171555698e-05, 7.77694585849531e-05, 4.879384050582303e-06, 4.232885657984298e-06, 7.924954843474552e-05, 8.961817366071045e-05, 0.00014411855954676867, 0.0001463231019442901, 8.672439435031265e-05, 7.038908370304853e-05, 0.00016853534907568246, 0.00016773154493421316, 6.951862451387569e-05, 0.00011185216862941161, 3.7167112168390304e-05, 3.735943391802721e-05, 0.00010615312930895016, 9.793408389668912e-05, 4.754646943183616e-05, 4.8231355322059244e-05, 9.408502228325233e-05, 2.2656279270449886e-06, 5.171993689145893e-05, 5.528430483536795e-05, 2.293264969921438e-06, 4.922153311781585e-05, 8.473724301438779e-05, 8.39242129586637e-05, 4.6431694499915466e-05, 4.653619907912798e-05, 7.187482697190717e-05, 6.997976743150502e-05, 4.522898234426975e-05, 4.281392102711834e-05, 1.6805444147394155e-06, 1.6520908729944495e-06, 4.102958700968884e-05, 5.329980922397226e-05, 5.117981345392764e-07, 4.6155543032000423e-07, 5.143351518199779e-05, 0.00014328306133393198, 0.0001732324599288404, 0.00016761838924139738, 0.00015104914200492203, 0.00020399660570546985, 0.00011505798465805128, 0.00010784030746435747, 0.00022129352146293968, 0.00012034493556711823, 0.00014502884005196393, 0.00015382740821223706, 0.00011713431013049558, 8.084840374067426e-05, 0.00015228685515467077, 0.0001541484525660053, 8.020001405384392e-05, 0.00011231336975470185, 0.00010077429033117369, 0.00010386859503341839, 0.00011354185699019581, 8.084882574621588e-05, 0.00013950903667137027, 0.00014250200183596462, 8.157434785971418e-05, 6.200381903909147e-05, 0.00010934368037851527, 0.00010806738282553852, 6.241286610020325e-05, 5.052820415585302e-05, 0.00013519718777388334, 0.00013429572572931647, 5.0172762712463737e-05, 5.2068891818635166e-05, 0.00010852551349671558, 0.00010118396312464029, 5.002778925700113e-05, 4.7345252824015915e-05, 0.00012550261453725398, 0.00011898486991412938, 4.545283809420653e-05, 4.4866967073176056e-05, 0.00012633681762963533, 0.00012370750482659787, 4.2809362639673054e-05, 3.7692399928346276e-05, 0.00013882758503314108, 0.00013709336053580046, 3.547091182554141e-05, 5.899769917050435e-07, 3.1037619919516146e-05, 3.043389915546868e-05, 6.211440108927491e-07, 5.466299057843571e-07, 3.2336043659597635e-05, 3.184481101925485e-05, 5.829370479659701e-07, 1.0288929388480028e-06, 3.373081926838495e-05, 3.380937050678767e-05, 1.0515927897358779e-06, 1.7136208043666556e-06, 2.695959119591862e-05, 2.7235060770181008e-05, 1.7199635067299823e-06, 7.655907393200323e-05, 1.9877286831615493e-05, 1.883660297608003e-05, 7.089962309692055e-05, 7.47660033084685e-06, 7.417871188408753e-07, 8.094060603980324e-07, 7.2330021794186905e-06, 7.506157544412417e-07, 2.1353289412218146e-05, 2.1461841242853552e-05, 7.399995070045406e-07, 7.572307367809117e-07, 1.860951306298375e-05, 1.871464519354049e-05, 7.689735070925963e-07, 0.00016881329065654427, 0.0010041117202490568, 0.0009110623504966497, 0.00018195106531493366, 0.00035114827915094793, 0.0005473628407344222, 0.0005086870514787734, 0.0003466935595497489, 5.6157222161346e-07, 3.312068656668998e-05, 3.431721415836364e-05, 5.834183411934646e-07, 1.2494278962549288e-06, 2.9511651518987492e-05, 2.9497632567654364e-05, 1.4148569107419462e-06, 1.5386738141387468e-06, 1.8374525097897276e-05, 1.8059898138744757e-05, 1.5756945686007384e-06, 6.567933610313048e-07, 2.447979204589501e-05, 2.4704346287762746e-05, 7.146128950807906e-07, 3.540631223586388e-05, 2.1436494535009842e-06, 2.1361313429224538e-06, 3.298069350421429e-05, 2.7622114430414513e-05, 1.6989689584079315e-06, 1.6908143152249977e-06, 2.634062184370123e-05, 6.430796929635108e-05, 3.0379273994185496e-06, 2.7812563985207817e-06, 6.465100886998698e-05, 5.093229265185073e-05, 5.864334525540471e-06, 5.623914148600306e-06, 5.0038754125125706e-05, 3.8543563277926296e-05, 1.0847425073734485e-06, 1.1248948794673197e-06, 3.745517824427225e-05, 3.041516538360156e-05, 2.0216282337059965e-06, 2.129810354745132e-06, 3.0267878173617646e-05, 1.1479072554720915e-06, 1.993005207623355e-05, 1.8595381334307604e-05, 1.1269822834947263e-06, 6.455704806285212e-07, 2.2485781300929375e-05, 2.122598743881099e-05, 7.059550171106821e-07, 1.1559379345271736e-05, 1.4550485047948314e-06, 1.4854376786388457e-06, 1.112360132538015e-05, 1.6786867490736768e-05, 4.5117306513020594e-07, 4.782516498380573e-07, 1.6130970834637992e-05, 3.668225190267549e-07, 1.4489904970105272e-05, 1.4713354175910354e-05, 3.208506598184613e-07, 8.777510061008797e-07, 1.3046496860624757e-05, 1.289222200284712e-05, 8.46305113100243e-07, 6.838694389443845e-05, 4.85128111904487e-05, 4.761421223520301e-05, 6.641656364081427e-05, 5.078837421024218e-05, 6.313870107987896e-05, 6.188006227603182e-05, 5.0001704948954284e-05, 8.960128639046161e-07, 1.9983477614005096e-05, 2.0408357158885337e-05, 9.04602813989186e-07, 5.035493586547091e-07, 1.59017708938336e-05, 1.5989227904356085e-05, 5.32300248323736e-07, 1.2509742646216182e-06, 2.9081844331813045e-05, 3.1682149710832164e-05, 1.4299232589110034e-06, 7.011852289906528e-07, 3.15185752697289e-05, 3.422334702918306e-05, 8.087938567769015e-07, 7.964775431901217e-05, 5.251578477327712e-05, 5.138714186614379e-05, 8.008594159036875e-05, 9.760991088114679e-05, 4.129824446863495e-05, 4.387429362395778e-05, 9.422142466064543e-05, 1.5789506505825557e-05, 2.7106625566375442e-05, 2.906534427893348e-05, 1.683635127847083e-05, 1.0627438314259052e-05, 2.585527727205772e-05, 2.7540118026081473e-05, 1.1448461918917019e-05, 4.9262383981840685e-05, 0.00021458353148773313, 0.0002140799624612555, 4.6725606807740405e-05, 4.127931606490165e-05, 0.0001299676951020956, 0.00013101904187351465, 4.121046731597744e-05, 1.743606844684109e-06, 3.493124677333981e-05, 3.5967095755040646e-05, 1.901621089928085e-06, 2.7937162485613953e-06, 3.151126657030545e-05, 3.266126805101521e-05, 2.826375066433684e-06, 7.074182235555782e-07, 2.8920949262101203e-05, 2.9072349207126535e-05, 8.669560429552803e-07, 8.080678526312113e-07, 2.7483252779347822e-05, 2.675249197636731e-05, 9.515133569948375e-07, 0.00015991553664207458, 3.766631562029943e-05, 3.793861105805263e-05, 0.00016614138439763337, 0.0001507236884208396, 3.713477781275287e-05, 3.8781221519457176e-05, 0.00015274400357156992, 5.372344458010048e-05, 9.360956028103828e-05, 9.789044997887686e-05, 5.784836321254261e-05, 2.6164589144173078e-05, 8.252171392086893e-05, 8.575742685934529e-05, 2.8283220672165044e-05, 2.379599209234584e-05, 6.908703085173329e-07, 7.544057893937861e-07, 2.296855927852448e-05, 1.8405657101538964e-05, 1.0306633839718415e-06, 1.0758084272310953e-06, 1.776330464053899e-05, 3.844401362584904e-05, 4.017223091068445e-06, 3.5885677789337933e-06, 3.883387034875341e-05, 3.121536792605184e-05, 3.27567795466166e-06, 3.3407789032935398e-06, 3.098238448728807e-05, 5.0366590585326776e-05, 3.958227807743242e-06, 3.3973019526456483e-06, 4.968115172232501e-05, 4.6008179197087884e-05, 2.326412413822254e-06, 2.0732704797410406e-06, 4.567075666273013e-05, 9.33438423089683e-05, 9.50303438003175e-05, 9.172539284918457e-05, 9.044481703313068e-05, 7.09503801772371e-05, 9.725021664053202e-05, 9.22109538805671e-05, 6.953517004149035e-05, 5.7132063375320286e-05, 0.00011271332914475352, 0.00010843962081708014, 5.7211709645343944e-05, 7.478769111912698e-05, 0.00012072209210600704, 0.00011660149903036654, 7.40239120204933e-05, 5.963749458715029e-07, 3.21340630762279e-05, 3.4305761801078916e-05, 7.447749226230371e-07, 1.0599520692267106e-06, 2.8412665415089577e-05, 3.111658588750288e-05, 1.1794464853664977e-06, 3.515973730827682e-05, 5.271274403639836e-07, 5.273775514069712e-07, 3.617610127548687e-05, 4.335060657467693e-05, 3.3114989150817564e-07, 3.6263801916902594e-07, 4.522862582234666e-05, 3.688338983920403e-05, 5.7667588407639414e-05, 5.650289313052781e-05, 3.503351399558596e-05, 7.191784970927984e-05, 3.985942748840898e-05, 4.217925379634835e-05, 6.774670328013599e-05, 8.470545435557142e-05, 0.00022046933008823544, 0.0002066808519884944, 8.196205453714356e-05, 0.00010675665544113144, 0.00012018878624076024, 0.00011461091344244778, 0.0001044997334247455, 0.00010763148020487279, 0.00010678513353923336, 0.00010971113078994676, 0.00010491009015822783, 9.928819054039195e-05, 0.00012178243196103722, 0.00012385068112052977, 9.642702207202092e-05, 1.1504734175105114e-05, 8.811111001705285e-06, 8.225454621424433e-06, 1.1661988537525758e-05, 1.8874299712479115e-05, 0.011746448464691639, 0.011881430633366108, 1.9365446860319935e-05, 3.1039409805089235e-05, 0.01104643102735281, 0.0111555689945817, 3.494667907943949e-05, 4.665603773901239e-05, 0.009346614591777325, 0.009475046768784523, 3.8916881749173626e-05, 5.02498987771105e-05, 0.007213188800960779, 0.007363167125731707, 5.629674706142396e-05, 7.109723810572177e-05, 0.005030478350818157, 0.005152884870767593, 6.508886144729331e-05, 8.27993790153414e-05, 0.003045598976314068, 0.003134653903543949, 8.878632070263848e-05, 4.68103498860728e-05, 0.0016695850063115358, 0.001716217608191073, 4.6092027332633734e-05, 7.503974484279752e-05, 0.0007057961774989963, 0.000721720396541059, 7.992346945684403e-05], "data_std": [0.0007307169144041836, 0.0003210606810171157, 0.0011230094823986292, 0.0015447784680873156, 0.005473060067743063, 0.002521494636312127, 0.004430333152413368, 0.002759241033345461, 0.0029954276978969574, 0.0039138589054346085, 0.003946058917790651, 0.0029639722779393196, 0.0036901673302054405, 0.0022726492024958134, 0.003054465865716338, 0.0028112162835896015, 0.0022355616092681885, 0.008127275854349136, 0.0059474166482687, 0.003443390829488635, 0.015109539963304996, 0.008901914581656456, 0.012915768660604954, 0.005337107926607132, 0.05560801923274994, 0.03043641708791256, 0.04996127262711525, 0.033283986151218414, 0.009323634207248688, 0.004857389722019434, 0.006734950467944145, 0.0043371510691940784, 0.003271663561463356, 0.013777948915958405, 0.0025680833496153355, 0.011717312969267368, 0.004482897464185953, 0.006280502304434776, 0.0029694759286940098, 0.004106262698769569, 0.004061713349074125, 0.002442724537104368, 0.0038986955769360065, 0.0022737837862223387, 0.008662566542625427, 0.008706246502697468, 0.00483872601762414, 0.006416661664843559, 0.015193847939372063, 0.004668902140110731, 0.014489530585706234, 0.003821699181571603, 0.003441762877628207, 0.008267894387245178, 0.0019751035142689943, 0.006309836637228727, 0.01610017940402031, 0.013512574136257172, 0.01537794154137373, 0.01165896188467741, 0.005908227991312742, 0.005821043159812689, 0.0034307765308767557, 0.007303180173039436, 0.01838291995227337, 0.01968599297106266, 0.012853550724685192, 0.010353002697229385, 0.001525243278592825, 0.0021546664647758007, 0.0013849640963599086, 0.002217065542936325, 0.011949989944696426, 0.005666246637701988, 0.010721362195909023, 0.007627516053617001, 0.006737316492944956, 0.0029043268878012896, 0.0058807265013456345, 0.002629936207085848, 0.0021926567424088717, 0.003627477679401636, 0.002239361172541976, 0.005197863560169935, 0.004144500941038132, 0.007683131378144026, 0.003948621451854706, 0.01003188081085682, 0.0048589929938316345, 0.011852903291583061, 0.004534698557108641, 0.013317914679646492, 0.005267211701720953, 0.0062438263557851315, 0.00489719258621335, 0.008338747546076775, 0.029600106179714203, 0.011258293874561787, 0.016614975407719612, 0.01034057792276144, 0.0016179172089323401, 0.002647132147103548, 0.001486223074607551, 0.0031946238595992327, 0.011640754528343678, 0.005759137216955423, 0.009051721543073654, 0.004312767647206783, 0.00400180509313941, 0.007349258288741112, 0.002993170637637377, 0.010995466262102127, 0.0047958469949662685, 0.017118019983172417, 0.0040756212547421455, 0.017490331083536148, 0.009693729691207409, 0.007482301443815231, 0.005498822778463364, 0.012220899574458599, 0.034734807908535004, 0.016014285385608673, 0.02719588205218315, 0.02253495529294014, 0.013276693411171436, 0.007207113318145275, 0.013955559581518173, 0.005391492508351803, 0.0058299279771745205, 0.023453235626220703, 0.0037501752376556396, 0.02329682558774948, 0.00893876701593399, 0.0035367265809327364, 0.00749930227175355, 0.0036268471740186214, 0.026457812637090683, 0.010720034129917622, 0.021758977323770523, 0.016667034476995468, 0.009218312799930573, 0.023076120764017105, 0.007387534249573946, 0.026401814073324203, 0.005504315253347158, 0.0033265370875597, 0.005377895198762417, 0.003109786193817854, 0.0014779440825805068, 0.0031578911002725363, 0.0018850993365049362, 0.002646434586495161, 0.011277683079242706, 0.004620187450200319, 0.00969413947314024, 0.007255705073475838, 0.002278067171573639, 0.004158985335379839, 0.0030438306275755167, 0.0030411304906010628, 0.004277267958968878, 0.014195181429386139, 0.0034337001852691174, 0.01649845764040947, 0.006024515721946955, 0.0062799700535833836, 0.004493357613682747, 0.007235000841319561, 0.04812274128198624, 0.02292484976351261, 0.04141586273908615, 0.02517014369368553, 0.00876886211335659, 0.013822460547089577, 0.007918313145637512, 0.010847313329577446, 0.0015161227202042937, 0.006026073358952999, 0.0024341936223208904, 0.0032385450322180986, 0.02429105155169964, 0.016616564244031906, 0.010908236727118492, 0.01959574967622757, 0.014904530718922615, 0.01601048931479454, 0.012186635285615921, 0.01673479564487934, 0.011616358533501625, 0.027133626863360405, 0.021217741072177887, 0.0156666599214077, 0.0025693015195429325, 0.001244277460500598, 0.001755692414008081, 0.0017598456470295787, 0.01920807920396328, 0.011414045467972755, 0.018773095682263374, 0.013376655988395214, 0.007464771158993244, 0.009120574221014977, 0.007743393536657095, 0.007203591521829367, 0.004775338806211948, 0.001466691610403359, 0.0017488173907622695, 0.0034893914125859737, 0.005062044132500887, 0.022234300151467323, 0.006866996176540852, 0.019779022783041, 0.002996795577928424, 0.013543983921408653, 0.00409925589337945, 0.009325654245913029, 0.005551441572606564, 0.020691262558102608, 0.00645480677485466, 0.018362998962402344, 0.018665367737412453, 0.009176881983876228, 0.014624465256929398, 0.016260484233498573, 0.0075840093195438385, 0.007518447935581207, 0.006617654114961624, 0.005503571126610041, 0.00476478086784482, 0.017737535759806633, 0.008872676640748978, 0.01191525999456644, 0.0009932063985615969, 0.0006992408307269216, 0.0008474714122712612, 0.0014242440229281783, 0.0015357935335487127, 0.002627760171890259, 0.001195499557070434, 0.0017520724795758724, 0.02186358906328678, 0.013204146176576614, 0.00306914490647614, 0.004039468709379435, 0.0023627188056707382, 0.004668315406888723, 0.0053970422595739365, 0.004053022246807814, 0.004176941700279713, 0.0033995015546679497, 0.004193483851850033, 0.0033882034476846457, 0.0030575806740671396, 0.0033437127713114023, 0.004741033539175987, 0.002933779265731573, 0.003784699598327279, 0.0023780507035553455, 0.00428546778857708, 0.0020981007255613804, 0.0035688220523297787, 0.0020199560094624758, 0.0023547711316496134, 0.0022868625819683075, 0.002546436619013548, 0.002140217227861285, 0.003749013179913163, 0.004781010095030069, 0.00404894957318902, 0.0034976101014763117, 0.007659839931875467, 0.007730543147772551, 0.004942076280713081, 0.007837343029677868, 0.011569111607968807, 0.005065030883997679, 0.007537743542343378, 0.007738924119621515, 0.008908163756132126, 0.007367806043475866, 0.007245595566928387, 0.007878926582634449, 0.004553146194666624, 0.004486202262341976, 0.004616685677319765, 0.0038103193510323763, 0.005354931112378836, 0.0025832171086221933, 0.004921401850879192, 0.003323951968923211, 0.0043960693292319775, 0.0026610686909407377, 0.002490848768502474, 0.004754093009978533, 0.0030759251676499844, 0.0023644331376999617, 0.0032359189353883266, 0.0026149440091103315, 0.00273522874340415, 0.002482743700966239, 0.002883837092667818, 0.0029342174530029297, 0.006055559031665325, 0.004289426375180483, 0.005903746001422405, 0.0045115090906620026, 0.0039262608624994755, 0.012904698960483074, 0.0042227813974022865, 0.0152514036744833, 0.0023515443317592144, 0.001821812940761447, 0.0016218561213463545, 0.0023323236964643, 0.002421807497739792, 0.0051447381265461445, 0.0024627652019262314, 0.0049845315515995026, 0.0012616353342309594, 0.0003190157294739038, 0.0007745391922071576, 0.0015239244094118476, 0.002548499498516321, 0.0055066789500415325, 0.0028307263273745775, 0.0044471523724496365, 0.004110916517674923, 0.003084686119109392, 0.0030586225911974907, 0.0040922765620052814, 0.002316509373486042, 0.003724833717569709, 0.0028723091818392277, 0.0030417251400649548, 0.008066989481449127, 0.0022870900575071573, 0.0033921650610864162, 0.005978358909487724, 0.00867341086268425, 0.015059541910886765, 0.005539775360375643, 0.012876291759312153, 0.030012745410203934, 0.054351095110177994, 0.032655347138643265, 0.049129877239465714, 0.004816472064703703, 0.009257425554096699, 0.004223871044814587, 0.006622428074479103, 0.014024564996361732, 0.003122886409983039, 0.011914953589439392, 0.002478823298588395, 0.0063804625533521175, 0.00450884411111474, 0.004145885352045298, 0.0029742317274212837, 0.0024556240532547235, 0.004015571903437376, 0.0022782660089433193, 0.0038686736952513456, 0.00875180959701538, 0.00917716883122921, 0.006433613132685423, 0.0050046746619045734, 0.004843920934945345, 0.015417429618537426, 0.003939617425203323, 0.014589602127671242, 0.008372356183826923, 0.003442158456891775, 0.006345784291625023, 0.002034875564277172, 0.013958128169178963, 0.01629272662103176, 0.011943758465349674, 0.015608507208526134, 0.0054959021508693695, 0.005725312978029251, 0.006932090502232313, 0.003306984668597579, 0.019126398488879204, 0.018961571156978607, 0.010030495934188366, 0.013479097746312618, 0.002075954806059599, 0.0015750088496133685, 0.0021779818926006556, 0.0014242564793676138, 0.005699599627405405, 0.012017863802611828, 0.007635423913598061, 0.010897877626121044, 0.002824455965310335, 0.006892126984894276, 0.00262809032574296, 0.005987146403640509, 0.003574930364266038, 0.0022351969964802265, 0.005100342910736799, 0.0022091020364314318, 0.007738012354820967, 0.004110240843147039, 0.010075593367218971, 0.003934633918106556, 0.011788041330873966, 0.004934544209390879, 0.013204805552959442, 0.0045674508437514305, 0.00608558626845479, 0.005368243437260389, 0.008088995702564716, 0.00496950326487422, 0.011087247170507908, 0.028985654935240746, 0.010419024154543877, 0.016344472765922546, 0.002637621248140931, 0.0015661948127672076, 0.00307861203327775, 0.001461937092244625, 0.005803083535283804, 0.01168318185955286, 0.004342800471931696, 0.009129032492637634, 0.007263141684234142, 0.00403943145647645, 0.010917574167251587, 0.0029081825632601976, 0.01750766858458519, 0.0045532346703112125, 0.017829515039920807, 0.0038233718369156122, 0.007447056006640196, 0.00995651725679636, 0.012168807908892632, 0.005648952443152666, 0.01585325039923191, 0.034032031893730164, 0.02208309806883335, 0.026854760944843292, 0.007327204570174217, 0.013262956403195858, 0.0055349403992295265, 0.014053060673177242, 0.023284031078219414, 0.005444078240543604, 0.02317718416452408, 0.003551859874278307, 0.003633814863860607, 0.009013425558805466, 0.0036896243691444397, 0.007622748147696257, 0.01059486623853445, 0.026060601696372032, 0.01638517715036869, 0.02161227911710739, 0.02294233627617359, 0.009034601040184498, 0.0262436680495739, 0.007084839511662722, 0.0033751109149307013, 0.0055502247996628284, 0.0031678308732807636, 0.0053807771764695644, 0.003213465679436922, 0.0013834426645189524, 0.0026910353917628527, 0.001812005415558815, 0.004611939657479525, 0.01153202261775732, 0.007101130671799183, 0.009982248768210411, 0.0041116988286376, 0.0022610765881836414, 0.0029899384826421738, 0.0030828521121293306, 0.014268841594457626, 0.004129239823669195, 0.01660284958779812, 0.0033615485299378633, 0.005971735343337059, 0.006078649312257767, 0.006948748137801886, 0.004456729162484407, 0.02237415872514248, 0.04723680764436722, 0.024495428428053856, 0.04089011251926422, 0.014090917073190212, 0.008690299466252327, 0.011017534881830215, 0.008229476399719715, 0.005945094395428896, 0.001506076310761273, 0.003185389330610633, 0.0023492504842579365, 0.01627114973962307, 0.024845726788043976, 0.019309643656015396, 0.010833298787474632, 0.016119282692670822, 0.015021320432424545, 0.01701372303068638, 0.012084581889212132, 0.02747388742864132, 0.011549263261258602, 0.015561633743345737, 0.021726349368691444, 0.001193499774672091, 0.0025190289597958326, 0.0016925815725699067, 0.0017448639264330268, 0.011396297253668308, 0.02013830468058586, 0.013188067823648453, 0.020135823637247086, 0.0094015933573246, 0.007548466790467501, 0.0075638811103999615, 0.007830316200852394, 0.0014515307266265154, 0.004732223227620125, 0.003426403971388936, 0.001731426571495831, 0.021948888897895813, 0.005159239750355482, 0.019579486921429634, 0.006832980550825596, 0.013336854986846447, 0.0029313028790056705, 0.009210681542754173, 0.003942509647458792, 0.02040712535381317, 0.005443133879452944, 0.018086355179548264, 0.00633248221129179, 0.008962461724877357, 0.018726477399468422, 0.015680888667702675, 0.015063612721860409, 0.0076633780263364315, 0.007281320169568062, 0.005547067150473595, 0.0064807129092514515, 0.01758468709886074, 0.004955335054546595, 0.011785334907472134, 0.009003820829093456, 0.0007082867086865008, 0.0010197859955951571, 0.001394954277202487, 0.0008478217059746385, 0.00256397039629519, 0.0015508076176047325, 0.0017584660090506077, 0.0012341082328930497, 0.013141302391886711, 0.023508790880441666, 0.0038290880620479584, 0.0029595994856208563, 0.0044823503121733665, 0.0022519666235893965, 0.004060888662934303, 0.005346335470676422, 0.0034097875468432903, 0.004168811719864607, 0.0032886352855712175, 0.004084492102265358, 0.0032531905453652143, 0.002989822765812278, 0.0028555486351251602, 0.00478801503777504, 0.0023856996558606625, 0.0038273376412689686, 0.0021657494362443686, 0.004215989727526903, 0.0021122051402926445, 0.0035086253192275763, 0.0022705639712512493, 0.002331563737243414, 0.0020827914122492075, 0.0025961464270949364, 0.004760598763823509, 0.0038502293173223734, 0.0034349774941802025, 0.00431384053081274, 0.0075810919515788555, 0.00789473857730627, 0.00797723513096571, 0.005113183055073023, 0.00508683267980814, 0.011205682530999184, 0.007905139587819576, 0.007340203505009413, 0.007597958669066429, 0.008536523208022118, 0.008134131319820881, 0.006831285078078508, 0.004713527392596006, 0.004490584135055542, 0.003957984037697315, 0.0045736017636954784, 0.0026762480847537518, 0.005402854643762112, 0.0034143414814025164, 0.00501997722312808, 0.002652049995958805, 0.0044934130273759365, 0.004692175425589085, 0.002545346738770604, 0.0022934498265385628, 0.003216593060642481, 0.002520706970244646, 0.0034372685477137566, 0.0024788251612335443, 0.0026314116548746824, 0.0030074892565608025, 0.0028205132111907005, 0.0043281554244458675, 0.006038505118340254, 0.004605707246810198, 0.005852927453815937, 0.012818146497011185, 0.004000090528279543, 0.015285681001842022, 0.004218441899865866, 0.0017331034177914262, 0.0022999371867626905, 0.002232261700555682, 0.001572776003740728, 0.004865011665970087, 0.002352973911911249, 0.004715173505246639, 0.002362860133871436, 0.009659741073846817, 0.011394732631742954, 0.011302173137664795, 0.0098121864721179, 0.006259426940232515, 0.0016138377832248807, 0.0015807395102456212, 0.006217655725777149, 0.00628165528178215, 0.0013362239114940166, 0.0013147607678547502, 0.006296161096543074, 0.0012455056421458721, 0.007401957176625729, 0.007499008905142546, 0.001374675310216844, 0.0011983454460278153, 0.006451183930039406, 0.006466927472501993, 0.0012883475283160806, 0.0008501234115101397, 0.005802018567919731, 0.00573866069316864, 0.0008965563611127436, 0.0009804499568417668, 0.005198454950004816, 0.0051664263010025024, 0.0009571366827003658, 0.008803311735391617, 0.009275619871914387, 0.009282000362873077, 0.008719591423869133, 0.0076644509099423885, 0.010480242781341076, 0.010501362383365631, 0.007487379014492035, 0.005164265166968107, 0.0010569824371486902, 0.0010489017004147172, 0.0053644319996237755, 0.005148261319845915, 0.0008535520755685866, 0.0008330672862939537, 0.005335605703294277, 0.0009027037303894758, 0.004796338267624378, 0.00478943157941103, 0.0008968687034212053, 0.0009692381136119366, 0.004298765677958727, 0.004329849500209093, 0.0010153179755434394, 0.007802209816873074, 0.005591819062829018, 0.0057364823296666145, 0.00762467784807086, 0.0071179368533194065, 0.005880610551685095, 0.005988589022308588, 0.006995030678808689, 0.007953137159347534, 0.014506218023598194, 0.01439257338643074, 0.007814106531441212, 0.009567374363541603, 0.012362156994640827, 0.012121904641389847, 0.009318990632891655, 0.007711861282587051, 0.00920585822314024, 0.009392701089382172, 0.007914634421467781, 0.007968563586473465, 0.009656903333961964, 0.009842856787145138, 0.008178610354661942, 0.0008182502933777869, 0.005823689047247171, 0.005723231937736273, 0.0007785488851368427, 0.0006799690308980644, 0.005942426156252623, 0.005861931014806032, 0.0006697551580145955, 0.00901163462549448, 0.012099800631403923, 0.012129530310630798, 0.008814621716737747, 0.007408865261822939, 0.013107986189424992, 0.01295655407011509, 0.007266897242516279, 0.008217564783990383, 0.00482964189723134, 0.00482279434800148, 0.008347174152731895, 0.0053162118420004845, 0.004108870401978493, 0.003977712243795395, 0.005340076517313719, 0.001305176760070026, 0.005726182367652655, 0.005662696436047554, 0.0012406536843627691, 0.0009416795219294727, 0.006487607955932617, 0.006383040454238653, 0.0009151410195045173, 0.007790220435708761, 0.008309544064104557, 0.008516981266438961, 0.007677947171032429, 0.008681370876729488, 0.008667362853884697, 0.008838096633553505, 0.008604340255260468, 0.006960742175579071, 0.00860933493822813, 0.008266856893897057, 0.006933935452252626, 0.007527835667133331, 0.008480687625706196, 0.008150736801326275, 0.007450214121490717, 0.006971640046685934, 0.0018980056047439575, 0.0018114944687113166, 0.006829902995377779, 0.006280440837144852, 0.0011386352125555277, 0.0010919602354988456, 0.006090379320085049, 0.009127472527325153, 0.0019391118548810482, 0.001726187882013619, 0.009230115450918674, 0.008818699046969414, 0.0022089327685534954, 0.002057397738099098, 0.008902221918106079, 0.009466687217354774, 0.012004938907921314, 0.012096408754587173, 0.009312593378126621, 0.008389820344746113, 0.01298211608082056, 0.012951121665537357, 0.008337782695889473, 0.010576018132269382, 0.006096483673900366, 0.006112236529588699, 0.010303064249455929, 0.009896164759993553, 0.006895394995808601, 0.00694487988948822, 0.009699743241071701, 0.0015052002854645252, 0.007191657554358244, 0.007435341831296682, 0.0015143529744818807, 0.007015806157141924, 0.009205283597111702, 0.009161015972495079, 0.006814080756157637, 0.006821744609624147, 0.008477902039885521, 0.008365390822291374, 0.00672524981200695, 0.006543234921991825, 0.0012963581830263138, 0.0012853369116783142, 0.006405434105545282, 0.0073006716556847095, 0.000715400674380362, 0.00067937868880108, 0.007171716541051865, 0.011970090679824352, 0.013161780312657356, 0.012946751900017262, 0.012290204875171185, 0.014282737858593464, 0.010726508684456348, 0.010384619235992432, 0.01487593725323677, 0.01097018364816904, 0.012042791582643986, 0.01240271795541048, 0.010822860524058342, 0.008991573937237263, 0.012340456247329712, 0.012415653094649315, 0.008955446071922779, 0.01059779990464449, 0.010038639418780804, 0.010191594250500202, 0.010655602440237999, 0.008991597220301628, 0.01181139424443245, 0.011937419883906841, 0.009031851775944233, 0.007874250411987305, 0.010456752963364124, 0.010395546443760395, 0.007900181226432323, 0.00710831955075264, 0.011627432890236378, 0.011588603258132935, 0.007083273492753506, 0.007215877529233694, 0.010417558252811432, 0.010059024207293987, 0.007073032669723034, 0.0068807885982096195, 0.011202794499695301, 0.010908018797636032, 0.0067418720573186874, 0.006698281038552523, 0.011239965446293354, 0.011122387833893299, 0.006542886607348919, 0.006139413453638554, 0.011782512068748474, 0.01170868705958128, 0.005955745931714773, 0.0007680996204726398, 0.005571141839027405, 0.0055166929960250854, 0.0007881268975324929, 0.0007393442210741341, 0.005686479154974222, 0.005643120501190424, 0.000763503136113286, 0.001014343579299748, 0.005807823967188597, 0.005814582575112581, 0.0010254719527438283, 0.0013090533902868629, 0.005192262586206198, 0.005218721926212311, 0.0013114737812429667, 0.008749804459512234, 0.0044583952985703945, 0.0043401154689490795, 0.008420191705226898, 0.0027343372348695993, 0.000861270644236356, 0.0008996699471026659, 0.002689424203708768, 0.0008663808112032712, 0.004620961844921112, 0.004632692784070969, 0.0008602322195656598, 0.0008701900369487703, 0.004313874524086714, 0.004326042719185352, 0.0008769113337621093, 0.012992816977202892, 0.031687721610069275, 0.030183808878064156, 0.013488924130797386, 0.01873895153403282, 0.023395786061882973, 0.02255409210920334, 0.018619708716869354, 0.000749381200876087, 0.00575505755841732, 0.005858089774847031, 0.0007638182723894715, 0.0011177781270816922, 0.005432462785393, 0.00543117243796587, 0.0011894776253029704, 0.0012404329609125853, 0.004286551848053932, 0.00424969382584095, 0.0012552667176350951, 0.0008104278822429478, 0.004947705660015345, 0.004970346577465534, 0.0008453478221781552, 0.005950320512056351, 0.001464120694436133, 0.001461551059037447, 0.005742881912738085, 0.0052556744776666164, 0.0013034450821578503, 0.0013003131607547402, 0.00513231148943305, 0.008019224740564823, 0.0017429650761187077, 0.0016677099047228694, 0.008040585555136204, 0.007136686239391565, 0.002421638695523143, 0.0023714792914688587, 0.007073807530105114, 0.006208346225321293, 0.0010415096767246723, 0.0010606106370687485, 0.006120063364505768, 0.005514994729310274, 0.0014218396972864866, 0.001459387014620006, 0.005501625128090382, 0.0010714043164625764, 0.0044643087312579155, 0.004312236327677965, 0.0010615942301228642, 0.0008034739876165986, 0.004741917364299297, 0.004607167094945908, 0.0008402112871408463, 0.0033999087754637003, 0.0012062538880854845, 0.001218785298988223, 0.003335206303745508, 0.004097178112715483, 0.0006716941716149449, 0.0006915574194863439, 0.004016337916254997, 0.0006056587444618344, 0.003806560765951872, 0.003835798939689994, 0.0005664367927238345, 0.0009368836763314903, 0.003611993510276079, 0.003590574022382498, 0.0009199484484270215, 0.008269639685750008, 0.006965113803744316, 0.0069003053940832615, 0.00814963597804308, 0.007126596290618181, 0.007945986464619637, 0.0078663881868124, 0.007071188185364008, 0.0009465795592404902, 0.004470288287848234, 0.004517560824751854, 0.000951106077991426, 0.0007096120971255004, 0.003987702541053295, 0.003998653031885624, 0.0007295890827663243, 0.0011184696340933442, 0.005392758641391993, 0.005628689657896757, 0.0011957939714193344, 0.0008373680175282061, 0.005614140536636114, 0.005850072484463453, 0.0008993296651169658, 0.008924558758735657, 0.007246777415275574, 0.007168482523411512, 0.008949074894189835, 0.009879772551357746, 0.006426371168345213, 0.0066237673163414, 0.009706771932542324, 0.003973601385951042, 0.005206402391195297, 0.005391228478401899, 0.004103212151676416, 0.003259975230321288, 0.005084808450192213, 0.0052478681318461895, 0.0033835575450211763, 0.007018716540187597, 0.014648670330643654, 0.01463147159665823, 0.0068356129340827465, 0.0064248982816934586, 0.01140033733099699, 0.011446354910731316, 0.006419538054615259, 0.001320457085967064, 0.005910266190767288, 0.005997257307171822, 0.0013789928052574396, 0.0016714413650333881, 0.005613489542156458, 0.005715003702789545, 0.0016811826499179006, 0.0008410816080868244, 0.00537782022729516, 0.005391878075897694, 0.0009311047615483403, 0.00089892593678087, 0.00524244736880064, 0.005172281060367823, 0.0009754554484970868, 0.012645771726965904, 0.006137289106845856, 0.006159432698041201, 0.01288958452641964, 0.012276957742869854, 0.006093831267207861, 0.0062274569645524025, 0.012358964420855045, 0.007329627871513367, 0.009675203822553158, 0.009893960319459438, 0.0076058111153542995, 0.005115133244544268, 0.009084146469831467, 0.009260530583560467, 0.005318196956068277, 0.004878113511949778, 0.0008311860729008913, 0.0008685653447173536, 0.004792552441358566, 0.004290181677788496, 0.0010152158793061972, 0.0010372118558734655, 0.004214653745293617, 0.006200323812663555, 0.0020043011754751205, 0.0018943515606224537, 0.00623168284073472, 0.005587071646004915, 0.0018098833970725536, 0.0018277798080816865, 0.00556618208065629, 0.007096942514181137, 0.0019895294681191444, 0.0018431771313771605, 0.007048485800623894, 0.006782933138310909, 0.0015252581797540188, 0.0014398855855688453, 0.00675801420584321, 0.009661462157964706, 0.009748350828886032, 0.00957733765244484, 0.009510247968137264, 0.00842320453375578, 0.009861552156507969, 0.009602653793990612, 0.008338775485754013, 0.007558575365692377, 0.010616653598845005, 0.010413434356451035, 0.007563842460513115, 0.008647987619042397, 0.010987360961735249, 0.010798217728734016, 0.0086037153378129, 0.0007722531445324421, 0.005668691359460354, 0.005857111886143684, 0.000863003428094089, 0.001029539736919105, 0.005330353043973446, 0.005578224081546068, 0.0010860232869163156, 0.005929564591497183, 0.0007260354468598962, 0.0007262076251208782, 0.006014657206833363, 0.006584117654711008, 0.000575456244405359, 0.0006021943408995867, 0.006725223269313574, 0.0060731698758900166, 0.007593917660415173, 0.007516840472817421, 0.005918911658227444, 0.008480438962578773, 0.006313432473689318, 0.006494555622339249, 0.008230838924646378, 0.009203556925058365, 0.014848209917545319, 0.014376399107277393, 0.009053289890289307, 0.010332311503589153, 0.01096306461840868, 0.010705648921430111, 0.010222511366009712, 0.010374559089541435, 0.01033368892967701, 0.010474308393895626, 0.010242562741041183, 0.009964345954358578, 0.011035507544875145, 0.011128822341561317, 0.009819726459681988, 0.0033918628469109535, 0.0029683515895158052, 0.002868005307391286, 0.0034149654675275087, 0.004344456363469362, 0.10838103294372559, 0.10900197178125381, 0.004400618840008974, 0.005571302492171526, 0.10510200262069702, 0.10561992973089218, 0.005911571439355612, 0.006830522324889898, 0.09667789191007614, 0.09733985364437103, 0.006238339468836784, 0.0070887161418795586, 0.08493049442768097, 0.0858088955283165, 0.0075031160376966, 0.008431917987763882, 0.07092586159706116, 0.07178359478712082, 0.008067767135798931, 0.009099416434764862, 0.05518694594502449, 0.05598798021674156, 0.009422649629414082, 0.006841809023171663, 0.040860556066036224, 0.041427258402109146, 0.006789111066609621, 0.00866254884749651, 0.026566823944449425, 0.026864854618906975, 0.008939992636442184], "label_norm": {}, "label_norm_mm": {}}',"toBytesLE","mouthShrugLower","getBinFileUrl","JWS Payload must be a string",'"spki" must be SPKI formatted string',"leftAmp","mins","getLowBits","merge","filterWithAlpha","parse","maxOccupationTime","isNode","transformY","fromBytesBE","_initializePromise","requestDelimited","rotation","versions","hours","Invalid Compact JWS","shiftRightUnsigned","browOuterUp_R","message","add","readDoubleLE","fixed64","stop","customBinFileUrl","key32Re","multiFaceLandmarks","stream","toHash","algorithm.name","16tHBtks","modelJSON","signature verification failed","_push","_Buffer_allocUnsafe","Compact JWS must be a string or Uint8Array","reset","Uint8Array","1900695YiNQRH","custom","timeout","slice","eyeSquint_R","oneOfSetter","rem_s","secs","__isLong__","starting","RS512","off","minimal","exports","b64","mouthRight","weeks","mozNow","writeFloatLE","Maximum occupation time is exceeded in queue ","height","test","concat","not","4680054JNsNPf","hasOwnProperty"," or ","defineProperty","deriveBits","toJSON","NaN","mouthPress_L","JWTs MUST NOT use unencoded payload","fixed32","secret","includes"," is not supported either by JOSE or your javascript runtime","tail","min",'"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present',"PBES2","dataStream","JWS Protected and JWS Unprotected Header Parameter names must be disjoint","eyeLookIn_R",'"nbf" claim timestamp check failed',"pitch","eyeLookDown_L","createElement","function","header","end","captureStackTrace","low","EdDSA","sec","reason",'JWS "alg" (Algorithm) Header Parameter missing or invalid',"_initialize","object","count","high","ECDH-ES+A192KW","getHighBitsUnsigned","_timeSum","process","avatarDensePredictor","requestAnimationFrame","NODE-ED25519","utf-8","roots","fromString","ERR_JWT_EXPIRED","clearTimeout","BufferReader","CryptoKey does not support this operation","quire","ECDH-ES+A256KW","setTimeout","getHighBits","and","fromCharCode","HMAC","run","replace","setOptions",'{"format": "layers-model", "generatedBy": "keras v2.6.0", "convertedBy": "TensorFlow.js Converter v3.11.0", "modelTopology": {"keras_version": "2.6.0", "backend": "tensorflow", "model_config": {"class_name": "Functional", "config": {"name": "model", "layers": [{"class_name": "InputLayer", "config": {"batch_input_shape": [null, 1266], "dtype": "float32", "sparse": false, "ragged": false, "name": "input_1"}, "name": "input_1", "inbound_nodes": []}, {"class_name": "Dense", "config": {"name": "dense", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense", "inbound_nodes": [[["input_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation", "inbound_nodes": [[["dense", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_1", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_1", "inbound_nodes": [[["activation", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization", "inbound_nodes": [[["dense_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_1", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_1", "inbound_nodes": [[["batch_normalization", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_2", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_2", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_5", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_5", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_8", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_8", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_11", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_11", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_14", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_14", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_2", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_2", "inbound_nodes": [[["dense_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_5", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_5", "inbound_nodes": [[["dense_5", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_8", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_8", "inbound_nodes": [[["dense_8", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_11", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_11", "inbound_nodes": [[["dense_11", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_14", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_14", "inbound_nodes": [[["dense_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "shared", "trainable": true, "dtype": "float32", "units": 96, "activation": "swish", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "shared", "inbound_nodes": [[["activation_2", 0, 0, {}]], [["activation_5", 0, 0, {}]], [["activation_8", 0, 0, {}]], [["activation_11", 0, 0, {}]], [["activation_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_3", "trainable": true, "dtype": "float32", "units": 42, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_3", "inbound_nodes": [[["shared", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_6", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_6", "inbound_nodes": [[["shared", 1, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_9", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_9", "inbound_nodes": [[["shared", 2, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_12", "trainable": true, "dtype": "float32", "units": 72, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_12", "inbound_nodes": [[["shared", 3, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_15", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_15", "inbound_nodes": [[["shared", 4, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_1", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_1", "inbound_nodes": [[["dense_3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_2", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_2", "inbound_nodes": [[["dense_6", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_3", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_3", "inbound_nodes": [[["dense_9", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_4", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_4", "inbound_nodes": [[["dense_12", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_5", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_5", "inbound_nodes": [[["dense_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_3", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_3", "inbound_nodes": [[["batch_normalization_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_6", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_6", "inbound_nodes": [[["batch_normalization_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_9", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_9", "inbound_nodes": [[["batch_normalization_3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_12", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_12", "inbound_nodes": [[["batch_normalization_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_15", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_15", "inbound_nodes": [[["batch_normalization_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_4", "trainable": true, "dtype": "float32", "units": 21, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_4", "inbound_nodes": [[["activation_3", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_7", "trainable": true, "dtype": "float32", "units": 18, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_7", "inbound_nodes": [[["activation_6", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_10", "trainable": true, "dtype": "float32", "units": 24, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_10", "inbound_nodes": [[["activation_9", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_13", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_13", "inbound_nodes": [[["activation_12", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_16", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_16", "inbound_nodes": [[["activation_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_4", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_4", "inbound_nodes": [[["dense_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_7", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_7", "inbound_nodes": [[["dense_7", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_10", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_10", "inbound_nodes": [[["dense_10", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_13", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_13", "inbound_nodes": [[["dense_13", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_16", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_16", "inbound_nodes": [[["dense_16", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "a", "trainable": true, "dtype": "float32", "units": 7, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "a", "inbound_nodes": [[["activation_4", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "b", "trainable": true, "dtype": "float32", "units": 6, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "b", "inbound_nodes": [[["activation_7", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "c", "trainable": true, "dtype": "float32", "units": 8, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "c", "inbound_nodes": [[["activation_10", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "d", "trainable": true, "dtype": "float32", "units": 12, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "d", "inbound_nodes": [[["activation_13", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "e", "trainable": true, "dtype": "float32", "units": 16, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "e", "inbound_nodes": [[["activation_16", 0, 0, {}]]]}], "input_layers": [["input_1", 0, 0]], "output_layers": [["a", 0, 0], ["b", 0, 0], ["c", 0, 0], ["d", 0, 0], ["e", 0, 0]]}}, "training_config": {"loss": {"class_name": "MeanSquaredError", "config": {"reduction": "auto", "name": "mean_squared_error"}}, "metrics": [[{"class_name": "MeanSquaredError", "config": {"name": "a_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "a_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "b_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "b_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "c_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "c_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "d_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "d_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "e_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "e_mean_absolute_error", "dtype": "float32"}}]], "weighted_metrics": null, "loss_weights": null, "optimizer_config": {"class_name": "Adam", "config": {"name": "Adam", "learning_rate": 0.0010000000474974513, "decay": 0.0, "beta_1": 0.8999999761581421, "beta_2": 0.9990000128746033, "epsilon": 1e-07, "amsgrad": false}}}}, "weightsManifest": [{"paths": ["group1-shard1of1.bin"], "weights": [{"name": "a/kernel", "shape": [21, 7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.34152484037805736, "scale": 9.998385162423367e-06, "original_dtype": "float32"}}, {"name": "a/bias", "shape": [7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05245498940348625, "scale": 2.5705616638954565e-06, "original_dtype": "float32"}}, {"name": "b/kernel", "shape": [18, 6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.49812461368150135, "scale": 1.4075292842088198e-05, "original_dtype": "float32"}}, {"name": "b/bias", "shape": [6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05327168479561806, "scale": 3.762704696063729e-06, "original_dtype": "float32"}}, {"name": "batch_normalization/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.6943549513816833, "scale": 4.430730073468549e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.579886580037427, "scale": 7.17555939073447e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2468.1569582629986, "scale": 0.07718779579256313, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 439589.96875, "scale": 51.03764066910811, "original_dtype": "float32"}}, {"name": "batch_normalization_1/gamma", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.24011404812335968, "scale": 1.8985137346817335e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/beta", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.7531593294995136, "scale": 1.1959655887249125e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_mean", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4832.2838959501605, "scale": 0.09189646843051423, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_variance", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1683400.125, "scale": 127.26468108644237, "original_dtype": "float32"}}, {"name": "batch_normalization_2/gamma", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.21489904820919037, "scale": 1.690830133540994e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/beta", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.9055880334267783, "scale": 1.3959182930400135e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_mean", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5010.460415001437, "scale": 0.08848807754801824, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_variance", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1195131.5, "scale": 356.11878385595486, "original_dtype": "float32"}}, {"name": "batch_normalization_3/gamma", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.25988802313804626, "scale": 2.0154197619673844e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/beta", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4214927238326438, "scale": 2.3814587432277496e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_mean", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4516.991902261345, "scale": 0.09553301261074712, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_variance", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1302695.875, "scale": 239.49736972610054, "original_dtype": "float32"}}, {"name": "batch_normalization_4/gamma", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20372924208641052, "scale": 1.2058584442889562e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/beta", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5091016292572021, "scale": 7.333824422545552e-06, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_mean", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5581.663886533228, "scale": 0.13759802505936714, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_variance", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1547579.875, "scale": 266.28256847486074, "original_dtype": "float32"}}, {"name": "batch_normalization_5/gamma", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20020067691802979, "scale": 1.4120464495211178e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/beta", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.0803118545666908, "scale": 1.6702409625335354e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_mean", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5893.203580423688, "scale": 0.15120471020971618, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_variance", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1174690.375, "scale": 252.40655565728238, "original_dtype": "float32"}}, {"name": "c/kernel", "shape": [24, 8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.5177297037499278, "scale": 2.771855910419008e-05, "original_dtype": "float32"}}, {"name": "c/bias", "shape": [8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0011589399073272943, "scale": 2.454352526953003e-06, "original_dtype": "float32"}}, {"name": "d/kernel", "shape": [36, 12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.15260927745549588, "scale": 7.149314974959986e-06, "original_dtype": "float32"}}, {"name": "d/bias", "shape": [12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06730722635984421, "scale": 3.79263997723693e-06, "original_dtype": "float32"}}, {"name": "dense/kernel", "shape": [1266, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -17.766702855722013, "scale": 0.0004408501738349424, "original_dtype": "float32"}}, {"name": "dense/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -32.2838449468545, "scale": 0.0006995567606417149, "original_dtype": "float32"}}, {"name": "dense_1/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -15.679528270048255, "scale": 0.00036315379539670776, "original_dtype": "float32"}}, {"name": "dense_1/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.192216108751227e-05, "scale": 8.993424732360127e-10, "original_dtype": "float32"}}, {"name": "dense_10/kernel", "shape": [48, 24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4914666624994, "scale": 0.00011503602762266674, "original_dtype": "float32"}}, {"name": "dense_10/bias", "shape": [24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4884052329353725, "scale": 6.925375681497543e-05, "original_dtype": "float32"}}, {"name": "dense_11/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.527113251610789, "scale": 0.0003040893041288097, "original_dtype": "float32"}}, {"name": "dense_11/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.077751987095218, "scale": 0.00020590211212421307, "original_dtype": "float32"}}, {"name": "dense_12/kernel", "shape": [96, 72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.040607545991925, "scale": 0.0002703182319122475, "original_dtype": "float32"}}, {"name": "dense_12/bias", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.242119919933536e-05, "scale": 2.699762086386201e-09, "original_dtype": "float32"}}, {"name": "dense_13/kernel", "shape": [72, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.645381233680709, "scale": 0.0001528868824755144, "original_dtype": "float32"}}, {"name": "dense_13/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.1402740888594924, "scale": 4.8027438844681385e-05, "original_dtype": "float32"}}, {"name": "dense_14/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.119709127176868, "scale": 0.00028039937053181863, "original_dtype": "float32"}}, {"name": "dense_14/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.081811899195512, "scale": 0.00027500845124103605, "original_dtype": "float32"}}, {"name": "dense_15/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.011770248267565, "scale": 0.00027143886289962544, "original_dtype": "float32"}}, {"name": "dense_15/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.66976530797628e-05, "scale": 2.967733268261449e-09, "original_dtype": "float32"}}, {"name": "dense_16/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.360003139687646, "scale": 0.0001221625293939203, "original_dtype": "float32"}}, {"name": "dense_16/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.117162990980711, "scale": 6.43648655689071e-05, "original_dtype": "float32"}}, {"name": "dense_2/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.283893973543414, "scale": 0.00023756733727944455, "original_dtype": "float32"}}, {"name": "dense_2/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.288528963516677, "scale": 0.0001738561084689397, "original_dtype": "float32"}}, {"name": "dense_3/kernel", "shape": [96, 42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.805625922701546, "scale": 0.0003913238663926972, "original_dtype": "float32"}}, {"name": "dense_3/bias", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00023975147793200651, "scale": 5.611634629997344e-09, "original_dtype": "float32"}}, {"name": "dense_4/kernel", "shape": [42, 21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.910697617828778, "scale": 9.83204932200824e-05, "original_dtype": "float32"}}, {"name": "dense_4/bias", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.2725718021392822, "scale": 4.936938509521272e-05, "original_dtype": "float32"}}, {"name": "dense_5/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.804166829475978, "scale": 0.000304168831559025, "original_dtype": "float32"}}, {"name": "dense_5/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.093871475057325, "scale": 0.00017886326607153874, "original_dtype": "float32"}}, {"name": "dense_6/kernel", "shape": [96, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.628214164030146, "scale": 0.00023941252645788108, "original_dtype": "float32"}}, {"name": "dense_6/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00018072614102045825, "scale": 5.3396602558783386e-09, "original_dtype": "float32"}}, {"name": "dense_7/kernel", "shape": [36, 18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.399672209062356, "scale": 0.00010582749336273526, "original_dtype": "float32"}}, {"name": "dense_7/bias", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4238353799521228, "scale": 2.524262276977844e-05, "original_dtype": "float32"}}, {"name": "dense_8/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.658081016895599, "scale": 0.0003199952267359894, "original_dtype": "float32"}}, {"name": "dense_8/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.988045453686931, "scale": 0.00010946545492113887, "original_dtype": "float32"}}, {"name": "dense_9/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.9635740770340115, "scale": 0.0002236393629990736, "original_dtype": "float32"}}, {"name": "dense_9/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.43627593902066e-05, "scale": 3.4019985236795956e-09, "original_dtype": "float32"}}, {"name": "e/kernel", "shape": [48, 16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.21210380814900756, "scale": 8.544304227723476e-06, "original_dtype": "float32"}}, {"name": "e/bias", "shape": [16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06371922045946121, "scale": 2.9261341000018006e-06, "original_dtype": "float32"}}, {"name": "shared/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.98148017837316, "scale": 0.0002198997183814514, "original_dtype": "float32"}}, {"name": "shared/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -14.595442970970305, "scale": 0.0005023211374920948, "original_dtype": "float32"}}]}]}',"yawFilter","JWS Unprotected Header incorrect type","beta","asPromise","_stop","buffer","extractable","fromBytesLE","Avatar Webkit: ","noseSneer_R","arraybuffer","ES384","reverse","eyeBlink_R","week","protected","raw","second","setBeta","key","hash","_onPredict","faceMeshCalculator","write","neq","pow","aud","RSASSA-PKCS1-v1_5","domain","isZero","srcObject","noseSneer_L","bezier_x2","transformTune","UZERO","_promiseTry","isString","days","Right","illegal buffer","keys","algorithms"," + ","Invalid clockTolerance option type","webkitNow","ERR_JWS_SIGNATURE_VERIFICATION_FAILED","onResults","PS256","verify","SHA-","Private accessor was defined without a getter","invalid wire type ","mouthUpperUp_L","onPredict","weightData","isLong","create","process.chdir is not supported","getSettings","started","_predictionQuality","cheekSquint_L","readFloatLE","isset","pool","toUnsigned","cheekSquint_R","NODE-","cheekPuff","skipType","substring","node","mouthFunnel","_video","string","HS512","auTuner","Instance","playsInline","mouthSmile_L","begin","zero",'" option must be an array of strings',"sfixed64","decode","paused","Invalid or unsupported EC Key Curve or OKP Key Sub Type","weightsManifest","model","modelMeta","video","bool","emptyObject","modelInitializer","ProtocolError","log","queues","int32","async-lock timed out in queue ","data","bezier_x1","filters","LongBits","lastIndexOf","rotationTune","faceStats","fps","pitchFilter","ctx","global","eyeLookIn_L","payload","compare","Avatar WebKit: API token not set! This could be a configuration mistake, or if you need to sign up for an API token, you can do that here: https://joinhallway.com/sdk/","dcutoff","generatedBy","get","mincutoff","protectedHeader","msNow","ERR_JOSE_ALG_NOT_ALLOWED","0.9.9","setFrequency","mincutoff should be >0","urn:hallway:audience","browDown_L","mouthPucker","muted","getTime","RSA-PSS","undefined","DEFAULT_TIMEOUT","float","hasLastRawValue",' instances for asymmetric algorithms must not be of type "secret"',"weights","decrypt","setTimeout has not been defined","toJSONOptions","Writer","PS512","alg ","convertedBy","fun","sqrt","prototype","byteLength","play","JWS Signature missing or incorrect type","9001650GgveSs","unshift","from","eqz","mouthDimple_R","rightAmp","sfixed32","mouthShrugUpper","bytes","shr","ES256","fromBytes","allocUnsafe","oNow","notEquals","userDefinedMetadata","Module","next","maxTokenAge",'"exp" claim timestamp check failed',"xor",' instances for asymmetric algorithm verifying must be of type "public"',"eyeSquint_L","importKey","_start","toString","DEFAULT_MAX_OCCUPATION_TIME","index out of range: ","eyeWide_L","Left","mouthRollLower","writeBytesBuffer",' instances for asymmetric algorithm decryption must be of type "private"',"unspecified","loadFiltersAndCurvesFromTune","typ","mul","eyeLookDown_R","predictFace","_stream",", or ","bind","Buffer","eyeWide_R","paths","ERR_JOSE_NOT_SUPPORTED","indexOf","hour","toARKitConvention","lessThanOrEqual","radix"];return(a1_0x4794=function(){return e})()}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){var t=a1_0x26cf;try{u(r[t(754)](e))}catch(n){i(n)}}function s(e){var t=a1_0x26cf;try{u(r[t(281)](e))}catch(n){i(n)}}function u(e){var t,r=a1_0x26cf;e[r(287)]?a(e[r(406)]):(t=e.value,t instanceof n?t:new n((function(e){e(t)})))[r(873)](o,s)}u((r=r[a1_0x26cf(869)](e,t||[])).next())}))}function __classPrivateFieldGet(e,t,n,r){var a=a1_0x26cf;if("a"===n&&!r)throw new TypeError(a(638));if("function"==typeof t?e!==t||!r:!t[a(829)](e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r[a(840)](e):r?r.value:t.get(e)}function getDefaultExportFromCjs(e){var t=a1_0x26cf;return e&&e[t(399)]&&Object.prototype[t(527)][t(840)](e,"default")?e.default:e}!function(e,t){for(var n=a1_0x26cf,r=e();;)try{if(825040==parseInt(n(323))/1+-parseInt(n(410))/2+-parseInt(n(834))/3+parseInt(n(494))/4*(parseInt(n(502))/5)+parseInt(n(526))/6*(parseInt(n(808))/7)+-parseInt(n(888))/8*(-parseInt(n(848))/9)+-parseInt(n(737))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}(a1_0x4794);var asyncLock={exports:{}},global$1=typeof global!==a1_0x2c401b(718)?global:typeof self!==a1_0x2c401b(718)?self:typeof window!==a1_0x2c401b(718)?window:{};function defaultSetTimout(){throw new Error(a1_0x2c401b(725))}function defaultClearTimeout(){throw new Error(a1_0x2c401b(885))}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){var t=a1_0x2c401b;if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(n){try{return cachedSetTimeout[t(840)](null,e,0)}catch(r){return cachedSetTimeout[t(840)](this,e,0)}}}function runClearTimeout(e){var t=a1_0x2c401b;if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(n){try{return cachedClearTimeout[t(840)](null,e)}catch(r){return cachedClearTimeout[t(840)](this,e)}}}typeof global$1[a1_0x2c401b(579)]===a1_0x2c401b(550)&&(cachedSetTimeout=setTimeout),typeof global$1[a1_0x2c401b(574)]===a1_0x2c401b(550)&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){var e=a1_0x2c401b;draining&&currentQueue&&(draining=!1,currentQueue[e(843)]?queue=currentQueue[e(524)](queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){var e=a1_0x2c401b;if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex][e(584)]();queueIndex=-1,n=queue[e(843)]}currentQueue=null,draining=!1,runClearTimeout(t)}}function nextTick(e){var t=a1_0x2c401b,n=new Array(arguments[t(843)]-1);if(arguments[t(843)]>1)for(var r=1;r<arguments[t(843)];r++)n[r-1]=arguments[r];queue[t(311)](new Item(e,n)),1===queue[t(843)]&&!draining&&runTimeout(drainQueue)}function Item(e,t){var n=a1_0x2c401b;this[n(731)]=e,this[n(868)]=t}Item.prototype[a1_0x2c401b(584)]=function(){var e=a1_0x2c401b;this[e(731)].apply(null,this[e(868)])};var title=a1_0x2c401b(251),platform=a1_0x2c401b(251),browser=!0,env={},argv=[],version$1="",versions={},release={},config={};function noop$1(){}var on=noop$1,addListener=noop$1,once=noop$1,off=noop$1,removeListener=noop$1,removeAllListeners=noop$1,emit=noop$1;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error(a1_0x2c401b(645))}function umask(){return 0}var performance$1=global$1[a1_0x2c401b(438)]||{},performanceNow=performance$1[a1_0x2c401b(892)]||performance$1[a1_0x2c401b(519)]||performance$1[a1_0x2c401b(707)]||performance$1[a1_0x2c401b(750)]||performance$1[a1_0x2c401b(632)]||function(){return(new Date).getTime()};function hrtime(e){var t=a1_0x2c401b,n=.001*performanceNow[t(840)](performance$1),r=Math[t(264)](n),a=Math[t(264)](n%1*1e9);return e&&(r-=e[0],(a-=e[1])<0&&(r--,a+=1e9)),[r,a]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version$1,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},AsyncLock$1=function e(t){var n=a1_0x2c401b;if(t=t||{},this[n(409)]=t.Promise||Promise,this[n(684)]=Object[n(644)](null),this.domainReentrant=t.domainReentrant||!1,this[n(794)]){if(void 0===process||typeof process[n(616)]===n(718))throw new Error(n(303)+n(326));this[n(376)]=Object[n(644)](null)}this.timeout=t[n(504)]||e.DEFAULT_TIMEOUT,this[n(471)]=t.maxOccupationTime||e[n(763)],t[n(440)]===1/0||Number[n(392)](t[n(440)])&&t[n(440)]>=0?this[n(440)]=t[n(440)]:this[n(440)]=e.DEFAULT_MAX_PENDING};AsyncLock$1[a1_0x2c401b(719)]=0,AsyncLock$1.DEFAULT_MAX_OCCUPATION_TIME=0,AsyncLock$1[a1_0x2c401b(365)]=1e3,AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(792)]=function(e,t,n,r){var a=a1_0x2c401b;if(Array.isArray(e))return this[a(397)](e,t,n,r);if(typeof t!==a(550))throw new Error(a(799));var i=null,o=null,s=null;typeof n!==a(550)&&(r=n,n=null,s=new(this[a(409)])((function(e,t){i=e,o=t}))),r=r||{};var u=!1,c=null,l=null,h=this,f=function(t,r,c){var f=a;l&&(clearTimeout(l),l=null),t&&(!!h[f(684)][e]&&0===h[f(684)][e][f(843)]&&delete h[f(684)][e],h.domainReentrant&&delete h[f(376)][e]),!u&&(s?r?o(r):i(c):typeof n===f(550)&&n(r,c),u=!0),t&&h[f(684)][e]&&h.queues[e][f(843)]>0&&h[f(684)][e].shift()()},d=function(n){var r=a;if(u)return f(n);if(c&&(clearTimeout(c),c=null),h.domainReentrant&&n&&(h[r(376)][e]=process[r(616)]),1===t[r(843)]){var i=!1;t((function(e,t){!i&&(i=!0,f(n,e,t))}))}else h[r(623)]((function(){return t()}))[r(873)]((function(e){f(n,void 0,e)}),(function(e){f(n,e)}))};if(h.domainReentrant&&process[a(616)]&&(d=process[a(616)].bind(d)),h[a(684)][e])if(h.domainReentrant&&process[a(616)]&&process[a(616)]===h.domains[e])d(!1);else if(h.queues[e][a(843)]>=h[a(440)])f(!1,new Error("Too many pending tasks in queue "+e));else{var p=function(){d(!0)};r[a(282)]?h[a(684)][e].unshift(p):h[a(684)][e][a(311)](p);var m=r[a(504)]||h[a(504)];m&&(c=setTimeout((function(){c=null,f(!1,new Error(a(686)+e))}),m))}else h[a(684)][e]=[],d(!0);var v=r.maxOccupationTime||h[a(471)];return v&&(l=setTimeout((function(){h.queues[e]&&f(!1,new Error(a(521)+e))}),v)),s||void 0},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(397)]=function(e,t,n,r){var a=a1_0x2c401b;typeof n!==a(550)&&(r=n,n=null);var i=this,o=t;if(e[a(600)]().forEach((function(e){var t,n;t=e,n=o,o=function(e){i[a1_0x26cf(792)](t,n,e,r)}})),typeof n!==a(550))return new this.Promise((function(e,t){1===o.length?o((function(n,r){n?t(n):e(r)})):e(o())}));o(n)},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(813)]=function(e){var t=a1_0x2c401b;return e?!!this[t(684)][e]:Object[t(628)](this.queues).length>0},AsyncLock$1[a1_0x2c401b(733)][a1_0x2c401b(623)]=function(e){var t=a1_0x2c401b;try{return this.Promise[t(914)](e())}catch(n){return this[t(409)].reject(n)}};var lib=AsyncLock$1,_0x53a39f;_0x53a39f=asyncLock,_0x53a39f[a1_0x2c401b(515)]=lib;var AsyncLock=getDefaultExportFromCjs(asyncLock[a1_0x2c401b(515)]),crypto$1=crypto,isCryptoKey=function(e){return e instanceof CryptoKey},encoder=new TextEncoder,decoder=new TextDecoder;function concat(){for(var e=a1_0x2c401b,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[e(375)]((function(e,t){return e+t.length}),0),i=new Uint8Array(a),o=0;return n[e(340)]((function(t){var n=e;i[n(298)](t,o),o+=t[n(843)]})),i}var decodeBase64=function(e){for(var t=a1_0x2c401b,n=atob(e),r=new Uint8Array(n.length),a=0;a<n[t(843)];a++)r[a]=n[t(404)](a);return r},decode=function(e){var t=a1_0x2c401b,n=e;n instanceof Uint8Array&&(n=decoder[t(672)](n)),n=n.replace(/-/g,"+").replace(/_/g,"/")[t(585)](/\s/g,"");try{return decodeBase64(n)}catch(r){throw new TypeError(t(839))}},JOSEError=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(e){var t;_classCallCheck(this,r);var a,i=a1_0x2c401b;return(t=n.call(this,e))[i(245)]=i(902),t[i(407)]=t[i(803)][i(407)],null===(a=Error[i(553)])||void 0===a||a.call(Error,_assertThisInitialized(t),t[i(803)]),t}return _createClass(r,null,[{key:t,get:function(){return a1_0x2c401b(902)}}]),r}(_wrapNativeSuper(Error),a1_0x2c401b(245)),JWTClaimValidationFailed=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a1_0x2c401b(770),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a1_0x2c401b(770);_classCallCheck(this,n);var o=a1_0x2c401b;return(r=t.call(this,e)).code=o(918),r[o(387)]=a,r[o(557)]=i,r}return _createClass(n,null,[{key:"code",get:function(){return a1_0x2c401b(918)}}]),n}(JOSEError),JWTExpired=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a1_0x2c401b(770),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a1_0x2c401b(770);_classCallCheck(this,r);var o=a1_0x2c401b;return(t=n.call(this,e))[o(245)]=o(573),t.claim=a,t.reason=i,t}return _createClass(r,null,[{key:t,get:function(){return"ERR_JWT_EXPIRED"}}]),r}(JOSEError,a1_0x2c401b(245)),JOSEAlgNotAllowed=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);var t=a1_0x2c401b;return(e=n.apply(this,arguments))[t(245)]=t(708),e}return _createClass(r,null,[{key:t,get:function(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}]),r}(JOSEError,a1_0x2c401b(245)),JOSENotSupported=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);var t=a1_0x2c401b;return(e=n.apply(this,arguments))[t(245)]=t(782),e}return _createClass(r,null,[{key:t,get:function(){return a1_0x2c401b(782)}}]),r}(JOSEError,a1_0x2c401b(245)),JWSInvalid=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);var t=a1_0x2c401b;return(e=n.apply(this,arguments))[t(245)]=t(285),e}return _createClass(r,null,[{key:t,get:function(){return a1_0x2c401b(285)}}]),r}(JOSEError,a1_0x2c401b(245)),JWTInvalid=function(e,t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);var t=a1_0x2c401b;return(e=n.apply(this,arguments))[t(245)]=t(447),e}return _createClass(r,null,[{key:t,get:function(){return a1_0x2c401b(447)}}]),r}(JOSEError,a1_0x2c401b(245)),JWSSignatureVerificationFailed=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);var r=a1_0x2c401b;return(e=t.apply(this,arguments)).code=r(633),e[r(483)]=r(496),e}return _createClass(n,null,[{key:"code",get:function(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}]),n}(JOSEError);function isCloudflareWorkers(){return typeof WebSocketPair===a1_0x2c401b(550)}function isNodeJs(){var e=a1_0x2c401b;try{return void 0!==process[e(478)][e(659)]}catch(t){return!1}}function unusable(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a1_0x2c401b(493),n=a1_0x2c401b;return new TypeError(n(293)+t+n(236)+e)}function isAlgorithm(e,t){return e[a1_0x2c401b(407)]===t}function getHashLength(e){var t=a1_0x2c401b;return parseInt(e[t(407)][t(505)](4),10)}function getNamedCurve$1(e){var t=a1_0x2c401b;switch(e){case t(747):return"P-256";case t(599):return"P-384";case t(855):return t(437);default:throw new Error("unreachable")}}function checkUsage(e,t){var n=a1_0x2c401b;if(t[n(843)]&&!t[n(830)]((function(t){return e[n(882)].includes(t)}))){var r=n(312);if(t[n(843)]>2){var a=t[n(856)]();r+=n(355)+t[n(893)](", ")+n(777)+a+"."}else 2===t[n(843)]?r+=n(355)+t[0]+n(528)+t[1]+".":r+=t[0]+".";throw new TypeError(r)}}function checkSigCryptoKey(e,t){var n=a1_0x2c401b;switch(t){case n(354):case"HS384":case n(663):if(!isAlgorithm(e[n(434)],"HMAC"))throw unusable("HMAC");var r=parseInt(t.slice(2),10);if(getHashLength(e[n(434)][n(608)])!==r)throw unusable(n(637)+r,n(889));break;case"RS256":case"RS384":case n(512):if(!isAlgorithm(e[n(434)],"RSASSA-PKCS1-v1_5"))throw unusable(n(615));var a=parseInt(t[n(505)](2),10);if(getHashLength(e.algorithm[n(608)])!==a)throw unusable(n(637)+a,n(889));break;case n(635):case"PS384":case n(728):if(!isAlgorithm(e.algorithm,n(717)))throw unusable(n(717));var i=parseInt(t[n(505)](2),10);if(getHashLength(e[n(434)][n(608)])!==i)throw unusable("SHA-"+i,n(889));break;case isNodeJs()&&n(555):if(e.algorithm[n(407)]!==n(569)&&e[n(434)][n(407)]!==n(366))throw unusable("NODE-ED25519 or NODE-ED448");break;case isCloudflareWorkers()&&n(555):if(!isAlgorithm(e[n(434)],n(569)))throw unusable(n(569));break;case n(747):case"ES384":case n(855):if(!isAlgorithm(e[n(434)],n(901)))throw unusable(n(901));var o=getNamedCurve$1(t);if(e[n(434)].namedCurve!==o)throw unusable(o,"algorithm.namedCurve");break;default:throw new TypeError(n(576))}for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];checkUsage(e,u)}crypto$1.getRandomValues[a1_0x2c401b(778)](crypto$1);var invalidKeyInput=function(e){for(var t=a1_0x2c401b,n=t(874),r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];if(a[t(843)]>2){var o=a.pop();n+="one of type "+a[t(893)](", ")+", or "+o+"."}else 2===a[t(843)]?n+=t(309)+a[0]+t(528)+a[1]+".":n+=t(804)+a[0]+".";return null==e?n+=t(439)+e:typeof e===t(550)&&e[t(407)]?n+=t(915)+e[t(407)]:typeof e===t(560)&&null!=e&&e[t(803)]&&e[t(803)].name&&(n+=" Received an instance of "+e[t(803)][t(407)]),n},isKeyLike=function(e){return isCryptoKey(e)},types=[a1_0x2c401b(373)],isDisjoint=function(){for(var e=a1_0x2c401b,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a,i=n[e(411)](Boolean);if(0===i.length||1===i[e(843)])return!0;var o,s=_createForOfIteratorHelper(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=Object[e(628)](u);if(a&&0!==a.size){var l,h=_createForOfIteratorHelper(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;if(a[e(829)](f))return!1;a[e(484)](f)}}catch(d){h.e(d)}finally{h.f()}}else a=new Set(c)}}catch(d){s.e(d)}finally{s.f()}return!0};function isObjectLike(e){return"object"==typeof e&&null!==e}function isObject(e){var t=a1_0x2c401b;if(!isObjectLike(e)||Object.prototype[t(762)][t(840)](e)!==t(442))return!1;if(null===Object[t(797)](e))return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}var checkKeyLength=function(e,t){var n=a1_0x2c401b;if(e[n(811)]("RS")||e[n(811)]("PS")){var r=t[n(434)].modulusLength;if("number"!=typeof r||r<2048)throw new TypeError(e+n(295))}},findOid=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=a1_0x2c401b;0===r&&(n[a(738)](n[a(843)]),n[a(738)](6));var i=t[a(783)](n[0],r);if(-1===i)return!1;var o=t[a(896)](i,i+n.length);return o[a(843)]===n[a(843)]&&(o.every((function(e,t){return e===n[t]}))||e(t,n,i+1))},getNamedCurve=function(e){var t=a1_0x2c401b;switch(!0){case findOid(e,[42,134,72,206,61,3,1,7]):return t(332);case findOid(e,[43,129,4,0,34]):return"P-384";case findOid(e,[43,129,4,0,35]):return t(437);case(isCloudflareWorkers()||isNodeJs())&&findOid(e,[43,101,112]):return t(431);case isNodeJs()&&findOid(e,[43,101,113]):return t(343);default:throw new JOSENotSupported(t(674))}},genericImport=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a,i){var o,s,u,c,l,h,f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a1_0x2c401b,l=new Uint8Array(atob(r[s(585)](t,""))[s(449)]("")[s(412)]((function(e){return e.charCodeAt(0)}))),h="spki"===n,e.t0=a,e.next=e.t0===s(635)?5:e.t0===s(260)?5:e.t0===s(728)?5:e.t0===s(827)?7:"RS384"===e.t0?7:e.t0===s(512)?7:"RSA-OAEP"===e.t0?9:"RSA-OAEP-256"===e.t0?9:"RSA-OAEP-384"===e.t0?9:e.t0===s(426)?9:e.t0===s(747)?11:e.t0===s(599)?13:e.t0===s(855)?15:"ECDH-ES"===e.t0?17:e.t0===s(371)?17:e.t0===s(563)?17:e.t0===s(578)?17:e.t0===((isCloudflareWorkers()||isNodeJs())&&s(555))?19:22;break;case 5:return u={name:s(717),hash:"SHA-"+a[s(505)](-3)},c=h?[s(636)]:[s(307)],e.abrupt("break",23);case 7:return u={name:s(615),hash:s(637)+a[s(505)](-3)},c=h?["verify"]:[s(307)],e.abrupt("break",23);case 9:return u={name:s(390),hash:"SHA-"+(parseInt(a.slice(-3),10)||1)},c=h?[s(824),"wrapKey"]:[s(724),"unwrapKey"],e.abrupt("break",23);case 11:return u={name:s(901),namedCurve:"P-256"},c=h?[s(636)]:[s(307)],e.abrupt("break",23);case 13:return u={name:s(901),namedCurve:"P-384"},c=h?[s(636)]:[s(307)],e.abrupt("break",23);case 15:return u={name:s(901),namedCurve:"P-521"},c=h?[s(636)]:["sign"],e.abrupt("break",23);case 17:return u={name:"ECDH",namedCurve:getNamedCurve(l)},c=h?[]:[s(530)],e.abrupt("break",23);case 19:return f=getNamedCurve(l)[s(378)](),u={name:"NODE-"+f,namedCurve:s(655)+f},c=h?[s(636)]:[s(307)],e.abrupt("break",23);case 22:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value');case 23:return e.abrupt("return",crypto$1[s(334)].importKey(n,l,u,null!==(o=null==i?void 0:i[s(594)])&&void 0!==o&&o,c));case 24:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),fromSPKI=function(e,t,n){return genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,a1_0x2c401b(793),e,t,n)};function importSPKI(e,t,n){return _importSPKI.apply(this,arguments)}function _importSPKI(){return(_importSPKI=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(typeof t===(a=a1_0x2c401b)(662)&&0===t[a(783)](a(870))){e.next=3;break}throw new TypeError(a(464));case 3:return e.abrupt("return",fromSPKI(t,n,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var symmetricTypeCheck=function(e){var t=a1_0x2c401b;if(!(e instanceof Uint8Array)){if(!isKeyLike(e))throw new TypeError(invalidKeyInput.apply(void 0,[e].concat(types,[t(501)])));if(e[t(846)]!==t(536))throw new TypeError(types[t(893)](" or ")+t(881))}},asymmetricTypeCheck=function(e,t){var n=a1_0x2c401b;if(!isKeyLike(e))throw new TypeError(invalidKeyInput.apply(void 0,[e].concat(types)));if(e[n(846)]===n(536))throw new TypeError(types[n(893)](n(528))+n(722));if(t===n(307)&&"public"===e[n(846)])throw new TypeError(types[n(893)](n(528))+' instances for asymmetric algorithm signing must be of type "private"');if("decrypt"===t&&e[n(846)]===n(369))throw new TypeError(types[n(893)](n(528))+n(769));if(e[n(434)]&&t===n(636)&&e[n(846)]===n(858))throw new TypeError(types[n(893)](n(528))+n(758));if(e[n(434)]&&"encrypt"===t&&e.type===n(858))throw new TypeError(types[n(893)](n(528))+n(361))},checkKeyType=function(e,t,n){var r=a1_0x2c401b;e.startsWith("HS")||e===r(364)||e.startsWith(r(542))||/^A\d{3}(?:GCM)?KW$/[r(523)](e)?symmetricTypeCheck(t):asymmetricTypeCheck(t,n)};function validateCrit(e,t,n,r,a){var i,o=a1_0x2c401b;if(void 0!==a[o(807)]&&void 0===r[o(807)])throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r[o(807)])return new Set;if(!Array[o(812)](r[o(807)])||0===r[o(807)][o(843)]||r[o(807)].some((function(e){return typeof e!==o(662)||0===e[o(843)]})))throw new e(o(541));i=void 0!==n?new Map([].concat(_toConsumableArray(Object[o(400)](n)),_toConsumableArray(t[o(400)]()))):t;var s,u=_createForOfIteratorHelper(r[o(807)]);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(!i.has(c))throw new JOSENotSupported(o(429)+c+o(275));if(void 0===a[c])throw new e(o(429)+c+o(887));if(i.get(c)&&void 0===r[c])throw new e(o(429)+c+o(865))}}catch(l){u.e(l)}finally{u.f()}return new Set(r[o(807)])}var validateAlgorithms=function(e,t){var n=a1_0x2c401b;if(void 0!==t&&(!Array.isArray(t)||t[n(830)]((function(e){return typeof e!==n(662)}))))throw new TypeError('"'+e+n(670));if(t)return new Set(t)};function subtleDsa(e,t){var n=a1_0x2c401b,r=n(637)+e[n(505)](-3);switch(e){case n(354):case n(911):case n(663):return{hash:r,name:n(583)};case n(635):case n(260):case"PS512":return{hash:r,name:n(717),saltLength:e.slice(-3)>>3};case n(827):case n(394):case n(512):return{hash:r,name:n(615)};case n(747):case"ES384":case n(855):return{hash:r,name:n(901),namedCurve:t.namedCurve};case(isCloudflareWorkers()||isNodeJs())&&n(555):var a=t.namedCurve;return{name:a,namedCurve:a};default:throw new JOSENotSupported(n(729)+e+n(538))}}function getCryptoKey(e,t,n){var r=a1_0x2c401b;if(isCryptoKey(t))return checkSigCryptoKey(t,e,n),t;if(t instanceof Uint8Array){if(!e[r(811)]("HS"))throw new TypeError(invalidKeyInput.apply(void 0,[t].concat(types)));return crypto$1[r(334)][r(760)](r(604),t,{hash:r(637)+e[r(505)](-3),name:"HMAC"},!1,[n])}throw new TypeError(invalidKeyInput.apply(void 0,[t].concat(types,["Uint8Array"])))}var verify=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a){var i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a1_0x2c401b,e.next=3,getCryptoKey(t,n,i(636));case 3:return o=e.sent,checkKeyLength(t,o),s=subtleDsa(t,o[i(434)]),e.prev=6,e.next=9,crypto$1[i(334)][i(636)](s,o,r,a);case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,n,r,a){return e.apply(this,arguments)}}();function flattenedVerify(e,t,n){return _flattenedVerify.apply(this,arguments)}function _flattenedVerify(){return(_flattenedVerify=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a1_0x2c401b,isObject(t)){e.next=3;break}throw new JWSInvalid("Flattened JWS must be an object");case 3:if(void 0!==t[i(603)]||void 0!==t[i(551)]){e.next=5;break}throw new JWSInvalid(i(393));case 5:if(void 0===t[i(603)]||typeof t[i(603)]===i(662)){e.next=7;break}throw new JWSInvalid("JWS Protected Header incorrect type");case 7:if(void 0!==t.payload){e.next=9;break}throw new JWSInvalid("JWS Payload missing");case 9:if(typeof t[i(269)]===i(662)){e.next=11;break}throw new JWSInvalid(i(736));case 11:if(void 0===t[i(551)]||isObject(t[i(551)])){e.next=13;break}throw new JWSInvalid(i(589));case 13:if(o={},!t[i(603)]){e.next=23;break}s=decode(t.protected),e.prev=16,o=JSON.parse(decoder.decode(s)),e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(16),new JWSInvalid("JWS Protected Header is invalid");case 23:if(isDisjoint(o,t[i(551)])){e.next=25;break}throw new JWSInvalid(i(544));case 25:if(u=_objectSpread(_objectSpread({},o),t[i(551)]),c=!0,!validateCrit(JWSInvalid,new Map([[i(516),!0]]),null==r?void 0:r[i(807)],o,u)[i(829)]("b64")||typeof(c=o[i(516)])===i(867)){e.next=29;break}throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 29:if(typeof(l=u.alg)===i(662)&&l){e.next=32;break}throw new JWSInvalid(i(558));case 32:if(!(h=r&&validateAlgorithms(i(629),r[i(629)]))||h[i(829)](l)){e.next=35;break}throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');case 35:if(!c){e.next=40;break}if(typeof t.payload===i(662)){e.next=38;break}throw new JWSInvalid(i(463));case 38:e.next=42;break;case 40:if(typeof t.payload===i(662)||t.payload instanceof Uint8Array){e.next=42;break}throw new JWSInvalid(i(277));case 42:if(f=!1,e.t1=typeof n===i(550),!e.t1){e.next=49;break}return e.next=47,n(o,t);case 47:n=e.sent,f=!0;case 49:return checkKeyType(l,n,i(636)),d=concat(encoder[i(819)](null!==(a=t.protected)&&void 0!==a?a:""),encoder[i(819)]("."),typeof t.payload===i(662)?encoder.encode(t[i(699)]):t[i(699)]),p=decode(t[i(269)]),e.next=53,verify(l,n,p,d);case 53:if(e.sent){e.next=55;break}throw new JWSSignatureVerificationFailed;case 55:return m=c?decode(t.payload):"string"==typeof t[i(699)]?encoder[i(819)](t.payload):t.payload,v={payload:m},e.abrupt("return",(void 0!==t[i(603)]&&(v[i(706)]=o),void 0!==t[i(551)]&&(v[i(413)]=t[i(551)]),f?_objectSpread(_objectSpread({},v),{},{key:n}):v));case 58:case"end":return e.stop()}}),e,null,[[16,20]])})))).apply(this,arguments)}function compactVerify(e,t,n){return _compactVerify.apply(this,arguments)}function _compactVerify(){return(_compactVerify=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=a1_0x2c401b,t instanceof Uint8Array&&(t=decoder[a(672)](t)),"string"==typeof t){e.next=3;break}throw new JWSInvalid(a(499));case 3:if(i=t.split("."),o=i[0],s=i[1],u=i[2],3===i.length){e.next=6;break}throw new JWSInvalid(a(480));case 6:return e.next=8,flattenedVerify({payload:s,protected:o,signature:u},n,r);case 8:return c=e.sent,l={payload:c[a(699)],protectedHeader:c.protectedHeader},e.abrupt("return",typeof n===a(550)?_objectSpread(_objectSpread({},l),{},{key:c[a(607)]}):l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var epoch=function(e){return Math[a1_0x2c401b(264)](e[a1_0x2c401b(716)]()/1e3)},minute=60,hour=60*minute,day=24*hour,week=7*day,year=365.25*day,REGEX=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=function(e){var t=a1_0x2c401b,n=REGEX.exec(e);if(!n)throw new TypeError(t(344));var r=parseFloat(n[1]);switch(n[2][t(300)]()){case t(556):case t(509):case t(605):case t(315):case"s":return Math[t(448)](r);case t(329):case"minutes":case"min":case t(466):case"m":return Math[t(448)](r*minute);case t(784):case t(479):case"hr":case"hrs":case"h":return Math[t(448)](r*hour);case"day":case t(625):case"d":return Math[t(448)](r*day);case t(602):case t(518):case"w":return Math[t(448)](r*week);default:return Math[t(448)](r*year)}},normalizeTyp=function(e){return e.toLowerCase()[a1_0x2c401b(585)](/^application\//,"")},checkAudiencePresence=function(e,t){var n=a1_0x2c401b;return typeof e===n(662)?t[n(537)](e):!!Array.isArray(e)&&t[n(830)](Set.prototype[n(829)].bind(new Set(e)))},jwtPayload=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=a1_0x2c401b,i=r.typ;if(i&&("string"!=typeof e[a(772)]||normalizeTyp(e[a(772)])!==normalizeTyp(i)))throw new JWTClaimValidationFailed(a(810),a(772),a(271));try{n=JSON[a(470)](decoder[a(672)](t))}catch(d){}if(!isObject(n))throw new JWTInvalid(a(920));var o=r.issuer;if(o&&!(Array.isArray(o)?o:[o])[a(537)](n[a(854)]))throw new JWTClaimValidationFailed('unexpected "iss" claim value',a(854),"check_failed");var s=r.subject;if(s&&n.sub!==s)throw new JWTClaimValidationFailed(a(391),"sub","check_failed");var u,c=r.audience;if(c&&!checkAudiencePresence(n[a(614)],typeof c===a(662)?[c]:c))throw new JWTClaimValidationFailed('unexpected "aud" claim value',a(614),"check_failed");switch(typeof r[a(916)]){case a(662):u=secs(r[a(916)]);break;case"number":u=r[a(916)];break;case a(718):u=0;break;default:throw new TypeError(a(631))}var l=r.currentDate,h=epoch(l||new Date);if((void 0!==n[a(313)]||r[a(755)])&&typeof n[a(313)]!==a(418))throw new JWTClaimValidationFailed(a(805),a(313),a(876));if(void 0!==n[a(866)]){if("number"!=typeof n[a(866)])throw new JWTClaimValidationFailed('"nbf" claim must be a number',a(866),a(876));if(n[a(866)]>h+u)throw new JWTClaimValidationFailed(a(546),a(866),a(271))}if(void 0!==n[a(322)]){if(typeof n[a(322)]!==a(418))throw new JWTClaimValidationFailed(a(820),a(322),a(876));if(n[a(322)]<=h-u)throw new JWTExpired(a(756),a(322),a(271))}if(r[a(755)]){var f=h-n[a(313)];if(f-u>("number"==typeof r.maxTokenAge?r[a(755)]:secs(r[a(755)])))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat",a(271));if(f<0-u)throw new JWTClaimValidationFailed(a(898),a(313),a(271))}return n};function jwtVerify(e,t,n){return _jwtVerify.apply(this,arguments)}function _jwtVerify(){return(_jwtVerify=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a1_0x2c401b,e.next=3,compactVerify(t,n,r);case 3:if(o=e.sent,null===(a=o.protectedHeader[i(807)])||void 0===a||!a[i(537)](i(516))||!1!==o[i(706)][i(516)]){e.next=6;break}throw new JWTInvalid(i(534));case 6:return s={payload:jwtPayload(o[i(706)],o[i(699)],r),protectedHeader:o[i(706)]},e.abrupt("return",typeof n===i(550)?_objectSpread(_objectSpread({},s),{},{key:o[i(607)]}):s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var version=a1_0x2c401b(709);function extent(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var a=e[r];a<t&&(t=a),a>n&&(n=a)}return[t,n]}function scaleLinear(e,t,n){return(e-t[0])/(t[1]-t[0])*(n[1]-n[0])+n[0]}function computeFeature_dot(e,t,n){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],a=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.c)(r,a)}function getTriDotFeatures(e,t,n,r,a){for(var i=a1_0x2c401b,o=[],s=0;s<t[i(843)]/3;s++){var u=[t[3*s],t[3*s+1],t[3*s+2]],c=e[u[0]],l=e[u[1]],h=e[u[2]],f=computeFeature_dot(c,l,h),d=computeFeature_dot(c,h,l),p=(f-n[a+2*s])/r[a+2*s],m=(d-n[a+2*s+1])/r[a+2*s+1];o[i(311)](p),o[i(311)](m)}return o}function normalizePoints(e){var t=a1_0x2c401b,n=[0,0],r=[0,0],a=[0,0];if(e[t(843)]>0){var i=e[0][t(843)];n=extent(e[t(412)]((function(e){return e?e[0]:0}))),r=extent(e[t(412)]((function(e){return e?e[1]:0}))),3===i&&(a=extent(e[t(412)]((function(e){return e?e[2]:0}))));for(var o=function(e){return Math[t(258)](e[1]-e[0])},s=o(n),u=o(r),c=o(a),l=Math[t(306)](s,u,c),h=function(e,t){return[e/l*-t,t*(e/l)]},f=h(s,1),d=h(u,1),p=h(c,1),m=new Array(e[t(843)]),v=0;v<e[t(843)];v++){var g=e[v],y=scaleLinear(g[0],n,f),_=scaleLinear(g[1],r,d),b=0;3===i&&(b=scaleLinear(g[2],a,p)||0),m[v]=[y,_,b]}return m}return[]}function findRotation(e,t,n,r){var a=e[t],i=e[n],o=[(a[0]+i[0])/2,a[1],a[2]],s=e[r],u=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.f)(a,i);u=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.b)(u,Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.e)(u));var c=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.f)(o,s);c=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.b)(c,Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.e)(c));var l=Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.a)(u,c);return rotationMatrixToEulerAngles(Object(mathjs__WEBPACK_IMPORTED_MODULE_3__.d)([u,c,l]).toArray())}function findTransform(e,t){var n=e[t];return{x:n.x-.5,y:.5-n.y,z:20*-n.z-1}}function rotationMatrixToEulerAngles(e){var t=a1_0x2c401b,n=Math[t(732)](Math[t(613)](e[0][0],2)+Math[t(613)](e[1][0],2)),r=0,a=0,i=0;return n<1e-6?(r=Math[t(823)](-e[1][2],e[1][1]),a=Math[t(823)](-e[2][0],n),i=0):(r=Math[t(823)](e[2][1],e[2][2]),a=Math[t(823)](-e[2][0],n),i=Math[t(823)](e[1][0],-e[0][0])),{pitch:r,yaw:a,roll:i}}var fetchJSON=function(e){return __awaiter(void 0,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(e);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})))},JSONHandler=function(){function e(t,n){_classCallCheck(this,e);var r=a1_0x2c401b;this.modelJSON=t,this[r(364)]=n}return _createClass(e,[{key:"load",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this[(t=a1_0x26cf)(495)],r={modelTopology:n.modelTopology,format:n[t(450)],generatedBy:n[t(703)],convertedBy:n[t(730)]},null!=n.signature&&(r.signature=n.signature),null!=n[t(752)]&&(r.userDefinedMetadata=n[t(752)]),null!=n[t(681)]&&(r[t(681)]=n[t(681)]),null==n[t(675)]){e.next=10;break}return e.next=5,loadWeights(n[t(675)],this[t(364)]);case 5:a=e.sent,i=_slicedToArray(a,2),o=i[0],s=i[1],r[t(379)]=o,r[t(642)]=s;case 10:return e.abrupt("return",(null!=n.trainingConfig&&(r.trainingConfig=n.trainingConfig),r));case 11:case"end":return e.stop()}}),e,this)})))}}]),e}();function loadWeights(e,t){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,a,i,o,s,u,c,l,h,f,d;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a1_0x26cf,a=[],i=[],o=_createForOfIteratorHelper(e),n.prev=3,o.s();case 5:if((s=o.n()).done){n.next=32;break}u=s.value,c=_createForOfIteratorHelper(u[r(781)]),n.prev=8,c.s();case 10:if((l=c.n()).done){n.next=21;break}return h=l.value,f=t+h,n.next=15,axios__WEBPACK_IMPORTED_MODULE_1___default.a[r(704)](f,{responseType:r(598),withCredentials:!1});case 15:return n.next=17,n.sent.data;case 17:d=n.sent,a[r(311)](d);case 19:n.next=10;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(8),c.e(n.t0);case 26:return n.prev=26,c.f(),n.finish(26);case 29:i.push.apply(i,_toConsumableArray(u[r(723)]));case 30:n.next=5;break;case 32:n.next=37;break;case 34:n.prev=34,n.t1=n.catch(3),o.e(n.t1);case 37:return n.prev=37,o.f(),n.finish(37);case 40:return n.abrupt("return",[i,concatenateArrayBuffers(a)]);case 41:case"end":return n.stop()}}),n,null,[[3,34,37,40],[8,23,26,29]])})))}function concatenateArrayBuffers(e){var t=a1_0x2c401b;if(1===e[t(843)])return e[0];var n=0;e[t(340)]((function(e){n+=e[t(734)]}));var r=new Uint8Array(n),a=0;return e.forEach((function(e){r.set(new Uint8Array(e),a),a+=e.byteLength})),r[t(593)]}var LowPassFilter=function(e,t,n){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,r);var n=a1_0x2c401b;this.y=this.s=t,this[n(836)](e),this[n(852)]=!1}return _createClass(r,[{key:e,value:function(e){var t=a1_0x2c401b;(e<=0||e>1)&&console[t(683)](t(456)+e),this.a=e}},{key:t,value:function(e){var t;return this.initialized?t=this.a*e+(1-this.a)*this.s:(t=e,this[a1_0x2c401b(852)]=!0),this.y=e,this.s=t,t}},{key:n,value:function(e,t){return this[a1_0x2c401b(836)](t),this.filter(e)}},{key:"hasLastRawValue",value:function(){return this[a1_0x2c401b(852)]}},{key:"lastRawValue",value:function(){return this.y}},{key:"reset",value:function(){this[a1_0x2c401b(852)]=!1}}]),r}(a1_0x2c401b(836),a1_0x2c401b(411),a1_0x2c401b(469)),OneEuroFilter=function(e,t,n,r,a,i){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,o);var a=a1_0x2c401b;this.setFrequency(e),this.setMinCutoff(t),this[a(606)](n),this[a(458)](r),this.x=new LowPassFilter(this[a(320)](t)),this.dx=new LowPassFilter(this[a(320)](r)),this[a(368)]=void 0}return _createClass(o,[{key:e,value:function(e){var t=1/this[a1_0x2c401b(425)];return 1/(1+1/(2*Math.PI*e)/t)}},{key:t,value:function(e){e<=0&&console.log("freq should be >0"),this.freq=e}},{key:n,value:function(e){var t=a1_0x2c401b;e<=0&&console[t(683)](t(711)),this[t(705)]=e}},{key:r,value:function(e){this[a1_0x2c401b(389)]=e}},{key:a,value:function(e){var t=a1_0x2c401b;e<=0&&console[t(683)](t(862)),this[t(702)]=e}},{key:i,value:function(){var e=a1_0x2c401b;this.x[e(500)](),this.dx[e(500)](),this[e(368)]=void 0}},{key:"filter",value:function(e,t){var n=a1_0x2c401b;void 0!==this[n(368)]&&void 0!==t&&(this.freq=1/(t-this[n(368)])),this.lasttime=t;var r=this.x[n(721)]()?(e-this.x[n(906)]())*this[n(425)]:0,a=this.dx[n(469)](r,this.alpha(this[n(702)])),i=this[n(705)]+this[n(389)]*Math[n(258)](a);return this.x.filterWithAlpha(e,this[n(320)](i))}}]),o}(a1_0x2c401b(320),a1_0x2c401b(710),a1_0x2c401b(816),a1_0x2c401b(606),a1_0x2c401b(458),a1_0x2c401b(500)),BlendShapeFactory=function(e){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:e,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.browDown_L,n=void 0===t?0:t,r=e.browDown_R,a=void 0===r?0:r,i=e.browInnerUp,o=void 0===i?0:i,s=e.browOuterUp_L,u=void 0===s?0:s,c=e.browOuterUp_R,l=void 0===c?0:c,h=e.cheekSquint_L,f=void 0===h?0:h,d=e.cheekSquint_R,p=void 0===d?0:d,m=e.eyeBlink_L,v=void 0===m?0:m,g=e.eyeBlink_R,y=void 0===g?0:g,_=e.eyeLookDown_L,b=void 0===_?0:_,x=e.eyeLookDown_R,w=void 0===x?0:x,k=e.eyeLookIn_L,C=void 0===k?0:k,S=e.eyeLookIn_R,T=void 0===S?0:S,E=e.eyeLookOut_L,A=void 0===E?0:E,M=e.eyeLookOut_R,I=void 0===M?0:M,N=e.eyeLookUp_L,R=void 0===N?0:N,D=e.eyeLookUp_R,O=void 0===D?0:D,L=e.eyeSquint_L,F=void 0===L?0:L,P=e.eyeSquint_R,z=void 0===P?0:P,B=e.eyeWide_L,U=void 0===B?0:B,V=e.eyeWide_R,W=void 0===V?0:V,G=e.jawLeft,H=void 0===G?0:G,j=e.jawOpen,q=void 0===j?0:j,K=e.jawRight,X=void 0===K?0:K,Z=e.mouthClose,Y=void 0===Z?0:Z,J=e.mouthDimple_L,$=void 0===J?0:J,Q=e.mouthDimple_R,ee=void 0===Q?0:Q,te=e.mouthFrown_L,ne=void 0===te?0:te,re=e.mouthFrown_R,ae=void 0===re?0:re,ie=e.mouthFunnel,oe=void 0===ie?0:ie,se=e.mouthLeft,ue=void 0===se?0:se,ce=e.mouthLowerDown_L,le=void 0===ce?0:ce,he=e.mouthLowerDown_R,fe=void 0===he?0:he,de=e.mouthPress_L,pe=void 0===de?0:de,me=e.mouthPress_R,ve=void 0===me?0:me,ge=e.mouthPucker,ye=void 0===ge?0:ge,_e=e.mouthRight,be=void 0===_e?0:_e,xe=e.mouthRollLower,we=void 0===xe?0:xe,ke=e.mouthRollUpper,Ce=void 0===ke?0:ke,Se=e.mouthShrugLower,Te=void 0===Se?0:Se,Ee=e.mouthShrugUpper,Ae=void 0===Ee?0:Ee,Me=e.mouthSmile_L,Ie=void 0===Me?0:Me,Ne=e.mouthSmile_R,Re=void 0===Ne?0:Ne,De=e.mouthStretch_L,Oe=void 0===De?0:De,Le=e.mouthStretch_R,Fe=void 0===Le?0:Le,Pe=e.mouthUpperUp_L,ze=void 0===Pe?0:Pe,Be=e.mouthUpperUp_R,Ue=void 0===Be?0:Be,Ve=e.noseSneer_L,We=void 0===Ve?0:Ve,Ge=e.noseSneer_R,He=void 0===Ge?0:Ge,je=e.cheekPuff,qe=void 0===je?0:je,Ke=e.jawForward,Xe=void 0===Ke?0:Ke,Ze=e.tongueOut,Ye=void 0===Ze?0:Ze;return{browDown_L:n,browDown_R:a,browInnerUp:o,browOuterUp_L:u,browOuterUp_R:l,cheekSquint_L:f,cheekSquint_R:p,eyeBlink_L:v,eyeBlink_R:y,eyeLookDown_L:b,eyeLookDown_R:w,eyeLookIn_L:C,eyeLookIn_R:T,eyeLookOut_L:A,eyeLookOut_R:I,eyeLookUp_L:R,eyeLookUp_R:O,eyeSquint_L:F,eyeSquint_R:z,eyeWide_L:U,eyeWide_R:W,jawLeft:H,jawOpen:q,jawRight:X,mouthClose:Y,mouthDimple_L:$,mouthDimple_R:ee,mouthFrown_L:ne,mouthFrown_R:ae,mouthFunnel:oe,mouthLeft:ue,mouthLowerDown_L:le,mouthLowerDown_R:fe,mouthPress_L:pe,mouthPress_R:ve,mouthPucker:ye,mouthRight:be,mouthRollLower:we,mouthRollUpper:Ce,mouthShrugLower:Te,mouthShrugUpper:Ae,mouthSmile_L:Ie,mouthSmile_R:Re,mouthStretch_L:Oe,mouthStretch_R:Fe,mouthUpperUp_L:ze,mouthUpperUp_R:Ue,noseSneer_L:We,noseSneer_R:He,cheekPuff:qe,jawForward:Xe,tongueOut:Ye}}}]),t}(a1_0x2c401b(644)),BlendShapeKeys=function(e){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:e,value:function(e){var t=a1_0x2c401b;return e.endsWith("_L")?e[t(658)](0,e[t(691)]("_L"))[t(524)](t(766)):e[t(296)]("_R")?e[t(658)](0,e.lastIndexOf("_R"))[t(524)]("Right"):e}},{key:"fromARKitConvention",value:function(e){var t=a1_0x2c401b;return[t(826),"jawRight","mouthLeft","mouthRight"].includes(e)?e:e[t(296)](t(766))?e[t(658)](0,e[t(691)](t(766)))[t(524)]("_L"):e[t(296)](t(626))?e.substring(0,e.lastIndexOf("Right"))[t(524)]("_R"):e}}]),t}(a1_0x2c401b(785));BlendShapeKeys[a1_0x2c401b(561)]=52,BlendShapeKeys[a1_0x2c401b(713)]="browDown_L",BlendShapeKeys[a1_0x2c401b(254)]=a1_0x2c401b(254),BlendShapeKeys.browInnerUp=a1_0x2c401b(257),BlendShapeKeys.browOuterUp_L=a1_0x2c401b(358),BlendShapeKeys[a1_0x2c401b(482)]=a1_0x2c401b(482),BlendShapeKeys[a1_0x2c401b(656)]=a1_0x2c401b(656),BlendShapeKeys.cheekSquint_L="cheekSquint_L",BlendShapeKeys[a1_0x2c401b(654)]=a1_0x2c401b(654),BlendShapeKeys.eyeBlink_L=a1_0x2c401b(828),BlendShapeKeys.eyeBlink_R=a1_0x2c401b(601),BlendShapeKeys[a1_0x2c401b(548)]=a1_0x2c401b(548),BlendShapeKeys[a1_0x2c401b(774)]=a1_0x2c401b(774),BlendShapeKeys[a1_0x2c401b(698)]="eyeLookIn_L",BlendShapeKeys[a1_0x2c401b(545)]=a1_0x2c401b(545),BlendShapeKeys[a1_0x2c401b(357)]=a1_0x2c401b(357),BlendShapeKeys[a1_0x2c401b(345)]="eyeLookOut_R",BlendShapeKeys[a1_0x2c401b(242)]=a1_0x2c401b(242),BlendShapeKeys[a1_0x2c401b(907)]="eyeLookUp_R",BlendShapeKeys[a1_0x2c401b(759)]=a1_0x2c401b(759),BlendShapeKeys[a1_0x2c401b(506)]="eyeSquint_R",BlendShapeKeys.eyeWide_L=a1_0x2c401b(765),BlendShapeKeys[a1_0x2c401b(780)]=a1_0x2c401b(780),BlendShapeKeys.jawForward=a1_0x2c401b(250),BlendShapeKeys.jawLeft="jawLeft",BlendShapeKeys[a1_0x2c401b(917)]="jawOpen",BlendShapeKeys[a1_0x2c401b(330)]="jawRight",BlendShapeKeys[a1_0x2c401b(333)]=a1_0x2c401b(333),BlendShapeKeys[a1_0x2c401b(336)]=a1_0x2c401b(336),BlendShapeKeys[a1_0x2c401b(741)]=a1_0x2c401b(741),BlendShapeKeys[a1_0x2c401b(291)]=a1_0x2c401b(291),BlendShapeKeys[a1_0x2c401b(923)]="mouthFrown_R",BlendShapeKeys[a1_0x2c401b(660)]=a1_0x2c401b(660),BlendShapeKeys[a1_0x2c401b(788)]=a1_0x2c401b(788),BlendShapeKeys[a1_0x2c401b(237)]="mouthLowerDown_L",BlendShapeKeys.mouthLowerDown_R="mouthLowerDown_R",BlendShapeKeys[a1_0x2c401b(533)]=a1_0x2c401b(533),BlendShapeKeys.mouthPress_R=a1_0x2c401b(246),BlendShapeKeys[a1_0x2c401b(714)]="mouthPucker",BlendShapeKeys[a1_0x2c401b(517)]="mouthRight",BlendShapeKeys[a1_0x2c401b(767)]="mouthRollLower",BlendShapeKeys[a1_0x2c401b(905)]="mouthRollUpper",BlendShapeKeys.mouthShrugLower=a1_0x2c401b(461),BlendShapeKeys[a1_0x2c401b(744)]=a1_0x2c401b(744),BlendShapeKeys.mouthSmile_L=a1_0x2c401b(667),BlendShapeKeys.mouthSmile_R=a1_0x2c401b(276),BlendShapeKeys[a1_0x2c401b(302)]=a1_0x2c401b(302),BlendShapeKeys[a1_0x2c401b(831)]=a1_0x2c401b(831),BlendShapeKeys.mouthUpperUp_L=a1_0x2c401b(640),BlendShapeKeys[a1_0x2c401b(362)]="mouthUpperUp_R",BlendShapeKeys.noseSneer_L="noseSneer_L",BlendShapeKeys.noseSneer_R=a1_0x2c401b(597),BlendShapeKeys[a1_0x2c401b(428)]="tongueOut",BlendShapeKeys[a1_0x2c401b(319)]=[BlendShapeKeys.browDown_L,BlendShapeKeys[a1_0x2c401b(254)],BlendShapeKeys.browInnerUp,BlendShapeKeys[a1_0x2c401b(358)],BlendShapeKeys[a1_0x2c401b(482)],BlendShapeKeys[a1_0x2c401b(656)],BlendShapeKeys[a1_0x2c401b(649)],BlendShapeKeys.cheekSquint_R,BlendShapeKeys[a1_0x2c401b(828)],BlendShapeKeys[a1_0x2c401b(601)],BlendShapeKeys.eyeLookDown_L,BlendShapeKeys.eyeLookDown_R,BlendShapeKeys[a1_0x2c401b(698)],BlendShapeKeys[a1_0x2c401b(545)],BlendShapeKeys.eyeLookOut_L,BlendShapeKeys[a1_0x2c401b(345)],BlendShapeKeys.eyeLookUp_L,BlendShapeKeys[a1_0x2c401b(907)],BlendShapeKeys[a1_0x2c401b(759)],BlendShapeKeys[a1_0x2c401b(506)],BlendShapeKeys[a1_0x2c401b(765)],BlendShapeKeys[a1_0x2c401b(780)],BlendShapeKeys[a1_0x2c401b(250)],BlendShapeKeys[a1_0x2c401b(826)],BlendShapeKeys[a1_0x2c401b(917)],BlendShapeKeys[a1_0x2c401b(330)],BlendShapeKeys[a1_0x2c401b(333)],BlendShapeKeys[a1_0x2c401b(336)],BlendShapeKeys.mouthDimple_R,BlendShapeKeys[a1_0x2c401b(291)],BlendShapeKeys[a1_0x2c401b(923)],BlendShapeKeys.mouthFunnel,BlendShapeKeys[a1_0x2c401b(788)],BlendShapeKeys.mouthLowerDown_L,BlendShapeKeys.mouthLowerDown_R,BlendShapeKeys.mouthPress_L,BlendShapeKeys.mouthPress_R,BlendShapeKeys[a1_0x2c401b(714)],BlendShapeKeys[a1_0x2c401b(517)],BlendShapeKeys.mouthRollLower,BlendShapeKeys.mouthRollUpper,BlendShapeKeys[a1_0x2c401b(461)],BlendShapeKeys[a1_0x2c401b(744)],BlendShapeKeys[a1_0x2c401b(667)],BlendShapeKeys[a1_0x2c401b(276)],BlendShapeKeys[a1_0x2c401b(302)],BlendShapeKeys[a1_0x2c401b(831)],BlendShapeKeys[a1_0x2c401b(640)],BlendShapeKeys[a1_0x2c401b(362)],BlendShapeKeys[a1_0x2c401b(619)],BlendShapeKeys.noseSneer_R,BlendShapeKeys[a1_0x2c401b(428)]];var TUNE_PARAMS=a1_0x2c401b(383),AUTuner=function(e,t,n){function r(){var e=this;_classCallCheck(this,r);var t=a1_0x2c401b;this[t(689)]={},this.easingCurves={},this[t(695)]=new OneEuroFilter(20,.001,1,1),this[t(913)]=new OneEuroFilter(20,.001,5,1),this[t(588)]=new OneEuroFilter(20,.001,5,1),this[t(912)]=new OneEuroFilter(20,.001,1,1),this[t(473)]=new OneEuroFilter(20,.001,5,1),this[t(342)]=new OneEuroFilter(20,.001,5,1),this[t(692)]=function(n){var r=t;return{pitch:e.pitchFilter[r(411)](n[r(547)]),yaw:e.yawFilter[r(411)](n[r(288)]),roll:e[r(913)][r(411)](n[r(921)])}},this.transformTune=function(n){var r=t;return{x:e[r(912)].filter(n.x),y:e[r(473)][r(411)](n.y),z:e[r(342)].filter(n.z)}},this.blendShapeTune=function(n,r){var a=t,i=BlendShapeFactory[a(644)]();r[a(340)]((function(t,r){var o=a;t[o(340)]((function(t,a){var s=o,u=n[r][a],c=Math[s(540)](Math[s(306)](u,0),1),l=e.filters[t],h=e[s(317)][t],f=l[s(411)](c);f=h(f),i[t]=1.15*f}))}));var o=i.mouthSmile_L,s=i[a(276)],u=i[a(828)],c=i[a(601)],l=e.diffAmp(.5,i[a(713)],i[a(254)]);i[a(713)]=l[a(465)]*(1-u/2),i[a(254)]=l[a(742)]*(1-c/2);var h=e[a(370)](.5,i[a(358)],i.browOuterUp_R);i[a(358)]=h[a(465)],i[a(482)]=h[a(742)];var f=e.diffAmp(.5,i[a(667)],i.mouthSmile_R);i[a(667)]=f[a(465)],i[a(276)]=f.rightAmp,i[a(640)]=i[a(640)]*(1-.2*i.mouthSmile_R),i[a(362)]=i[a(362)]*(1-.2*i[a(667)]);var d=e[a(370)](.2,i[a(640)],i[a(362)]);return i.mouthUpperUp_L=d.leftAmp,i[a(362)]=d[a(742)],i[a(828)]=u*(1-.5*s),i[a(601)]=c*(1-.5*o),i[a(744)]=i[a(744)]/2,i},this[t(423)]=JSON[t(470)](TUNE_PARAMS),this[t(771)](this[t(423)])}return _createClass(r,[{key:"tune",get:function(){return this[a1_0x2c401b(423)]}},{key:e,set:function(e){this[a1_0x2c401b(423)]=e,this.loadFiltersAndCurvesFromTune(e)}},{key:t,value:function(e){var t=this,n=a1_0x2c401b;BlendShapeKeys[n(319)][n(340)]((function(r){var a,i=n,o=null!==(a=e[r])&&void 0!==a?a:{fps:120,minCutoff:.01,beta:25,bezier_x1:.08894012120656589,bezier_y1:.003999877929687479,bezier_x2:.8217921067661327,bezier_y2:.8839998779296875};t[i(689)][r]=new OneEuroFilter(o[i(694)],o[i(884)],o[i(590)],1),t[i(317)][r]=bezier_easing__WEBPACK_IMPORTED_MODULE_4___default()(o[i(688)],o[i(871)],o[i(620)],o.bezier_y2)}))}},{key:n,value:function(e,t,n){var r=a1_0x2c401b,a=(t-n)*e,i=(n-t)*e;return{leftAmp:Math[r(540)](Math[r(306)](a+t,0),1),rightAmp:Math[r(540)](Math[r(306)](i+n,0),1)}}}]),r}(a1_0x2c401b(806),a1_0x2c401b(771),a1_0x2c401b(370)),CENTER_POINT=5,leftEyePoint=33,rightEyePoint=263,bottomChinPoint=152,AvatarDenseCombinePredictor=function(e,t,n,r,a){function i(){_classCallCheck(this,i),this[a1_0x2c401b(664)]=new AUTuner}return _createClass(i,[{key:e,value:function(e){var t=e.predictionQuality,n=e.customBinFileUrl,r=e.customModelMetaUrl,a=e.customModelUrl;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a1_0x26cf,this.customBinFileUrl=n,this[i(795)]=r,this.customModelUrl=a,e.next=6,this[i(396)](t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"predictFace",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,a,i,o,s,u,c;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e[(n=a1_0x26cf)(490)].length<1)){t.next=3;break}return t.abrupt("return");case 3:return Object(_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.engine)()[n(405)](),r=e[n(490)][0][n(412)]((function(t){return[t.x*e[n(814)][n(859)],t.y*e[n(814)][n(522)],t.z*e[n(814)][n(859)]]})),a=findRotation(r,leftEyePoint,rightEyePoint,bottomChinPoint),i=this[n(664)][n(692)](a),o=findTransform(e[n(490)][0],CENTER_POINT),s=this[n(664)][n(621)](o),t.next=11,this[n(802)](this[n(384)],this[n(677)],r);case 11:return u=t.sent,c={blendShapes:this[n(664)][n(232)](u,this[n(677)].label_keys),rotation:i,transform:s},t.abrupt("return",(Object(_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.engine)()[n(352)](),c));case 14:case"end":return t.stop()}}),t,this)})))}},{key:t,value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==(n=a1_0x26cf)(503)){t.next=7;break}return t.next=4,fetchJSON(this[n(248)]);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=e===n(562)?JSON.parse(MODEL_HIGH):e===n(554)?JSON[n(470)](MODEL_LITE):void 0;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,this)})))}},{key:n,value:function(e){var t=a1_0x2c401b;return e===t(503)?this[t(488)]:e===t(562)?t(895):e===t(554)?"https://hallway-public.nyc3.cdn.digitaloceanspaces.com/webSDK/LiteModelV2/":void 0}},{key:"getModelMeta",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==(n=a1_0x26cf)(503)){t.next=7;break}return t.next=4,fetchJSON(this.customModelMetaUrl);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=e===n(562)?JSON[n(470)](ALL_AU_META_HIGH):"low"===e?JSON.parse(ALL_AU_META_LITE):void 0;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,this)})))}},{key:r,value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,a;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a1_0x26cf,t.next=3,this[n(238)](e);case 3:return r=t.sent,a=this[n(462)](e),t.next=7,this.getModelMeta(e);case 7:return this[n(677)]=t.sent,t.next=10,_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__.loadLayersModel(new JSONHandler(r,a));case 10:this[n(384)]=t.sent;case 11:case"end":return t.stop()}}),t,this)})))}},{key:a,value:function(e,t,n,r){for(var a=a1_0x2c401b,i=[],o=0,s=0;s<t[a(843)];s++){for(var u=t[s],c=u[0],l=u[1],h=[],f=0;f<c.length;f++){var d=c[f];h[a(311)](e[d])}var p=getTriDotFeatures(normalizePoints(h),l,n,r,o);i=i.concat(p),o+=l[a(843)]/3*2}return _tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__[a(249)]([i])}},{key:"createPrediction",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function r(){var a,i,o,s,u,c;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this[(a=a1_0x26cf)(324)](n,t[a(863)],t[a(904)],t[a(417)]),o=e[a(833)](i),s=[],u=[],!(o instanceof _tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_2__[a(338)])){r.next=8;break}s[a(311)](o[a(252)]()),r.next=13;break;case 8:if(!(o instanceof Array)){r.next=13;break}for(c=0;c<o.length;c++)u.push(o[c].data());return r.next=12,Promise[a(815)](u);case 12:s=r.sent;case 13:return r.abrupt("return",s);case 14:case"end":return r.stop()}}),r,this)})))}}]),i}(a1_0x2c401b(586),a1_0x2c401b(238),a1_0x2c401b(462),a1_0x2c401b(396),a1_0x2c401b(324)),MODEL_HIGH=a1_0x2c401b(587),MODEL_LITE=a1_0x2c401b(790),ALL_AU_META_HIGH=a1_0x2c401b(424),ALL_AU_META_LITE=a1_0x2c401b(459),MediaPipeFaceMeshCalculator=function(e){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,t);var i=a1_0x2c401b;this[i(430)]=function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i,t.abrupt("return",this[n(676)][n(430)]({image:e}));case 2:case"end":return t.stop()}}),t,this)})))},this[i(818)]=function(){n[i(676)].close()},this[i(398)]=e,this[i(676)]=new _mediapipe_face_mesh__WEBPACK_IMPORTED_MODULE_5__.FaceMesh({locateFile:function(e){return i(255)+e}}),this[i(586)]({selfieMode:r,refineLandmarks:a}),this[i(676)][i(634)](this[i(398)])}return _createClass(t,[{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a1_0x26cf,e.abrupt("return",this[t(676)][t(891)]());case 2:case"end":return e.stop()}}),e,this)})))}},{key:e,value:function(e){var t=e.selfieMode,n=e.refineLandmarks;this[a1_0x2c401b(676)].setOptions({maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5,refineLandmarks:n,selfieMode:t})}}]),t}(a1_0x2c401b(586)),requestVideoFrameCallback=function(e,t){var n=a1_0x2c401b;return(null==e?void 0:e[n(861)])?e[n(861)](t):window[n(568)](t)},cancelVideoFrameCallback=function(e,t){(null==e?void 0:e.cancelVideoFrameCallback)?e.cancelVideoFrameCallback(t):window.cancelAnimationFrame(t)},Stats=function(e,t,n,r,a){function i(){_classCallCheck(this,i);var e=a1_0x2c401b;this._startTime=0,this[e(789)]=0,this._timeSum=0,this._lastUpdateTime=0,this[e(419)]=1e3}return _createClass(i,[{key:e,get:function(){return this[a1_0x2c401b(433)]}},{key:t,get:function(){return this[a1_0x2c401b(789)]}},{key:"timeSum",get:function(){return this[a1_0x2c401b(565)]}},{key:n,get:function(){return this[a1_0x2c401b(327)]}},{key:r,value:function(){var e=a1_0x2c401b;this[e(433)]=(performance||Date)[e(892)]()}},{key:a,value:function(){var e=a1_0x2c401b,t=(performance||Date)[e(892)]();if(this._timeSum+=t-this[e(415)],this[e(789)]++,t-this[e(327)]>=this[e(419)]){var n=this[e(565)]/this[e(789)];this._timeSum=0,this[e(789)]=0,this[e(452)]&&this[e(452)](n),this._lastUpdateTime=t}}}]),i}(a1_0x2c401b(415),a1_0x2c401b(314),a1_0x2c401b(308),a1_0x2c401b(668),a1_0x2c401b(552)),_AUPredictor_authenticate,DEFAULT_FPS=40,lockKey=a1_0x2c401b(325),lock=new AsyncLock,AUPredictor=function(e,t,n,r,a,i,o,s,u,c){function l(e){var t=this;_classCallCheck(this,l);var n=a1_0x2c401b;this.lastFrameTime=performance[n(892)](),this[n(903)]=!1,this[n(661)]=document[n(549)](n(678)),this[n(351)]=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a,this._state="stopped",this._faceStats=new Stats,_AUPredictor_authenticate[n(298)](this,(function(){return __awaiter(t,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,e.next=3,axios__WEBPACK_IMPORTED_MODULE_1___default.a[t(704)]("https://kits.joinhallway.com/auth",{headers:{authorization:"Bearer "+this.apiToken}});case 3:return r=e.sent,!1,e.next=7,importSPKI(t(268),t(827));case 7:return a=e.sent,e.next=10,jwtVerify(r[t(687)],a,{issuer:t(374),audience:t(712)});case 10:return!0,e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})))})),this[n(395)]=function(e){return __awaiter(t,void 0,void 0,_regeneratorRuntime().mark((function t(){var r,a;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this[(r=n)(851)]===r(844)){t.next=5;break}if(this.requestFrameToken&&cancelVideoFrameCallback(this[r(661)],this[r(230)]),this[r(491)]&&!this[r(661)][r(673)]||this.stop(),this[r(230)]){t.next=4;break}return t.abrupt("return");case 4:this[r(239)]();case 5:return this.lastFrameTime=performance[r(892)](),t.next=8,this[r(567)][r(775)](e);case 8:a=t.sent,this._faceStats.end(),a&&(this[r(609)]&&this[r(641)](a),this[r(351)][r(754)](a));case 10:case"end":return t.stop()}}),t,this)})))},this[n(833)]=function(e){return __awaiter(t,void 0,void 0,_regeneratorRuntime().mark((function t(){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n,t.t0="stopped"!==this[r(851)],!t.t0){t.next=6;break}return console.warn("AVATAR_WEBKIT: predict was called while stream was not stoppped. Stopping stream..."),t.next=6,this[r(487)]();case 6:return t.next=8,this[r(891)]();case 8:return t.next=10,this.faceMeshCalculator[r(430)](e);case 10:case"end":return t.stop()}}),t,this)})))};var r=e.apiToken,a=e.fps,i=void 0===a?DEFAULT_FPS:a,o=e.onPredict,s=e.predictionQuality,u=void 0===s?n(562):s,c=e.shouldMirrorOutput,h=void 0!==c&&c,f=e.refineLandmarks;console[n(683)](n(596)+version),!r&&console[n(273)](n(701)),this[n(661)].autoplay=!0,this[n(661)][n(715)]=!0,this[n(661)][n(666)]=!0,this.apiToken=r,this[n(648)]=u,this[n(610)]=new MediaPipeFaceMeshCalculator(this.faceMeshResultsCallback,h,null!=f?f:"high"===u),this.avatarDensePredictor=new AvatarDenseCombinePredictor,this[n(609)]=o,this.frameRateMs=1e3/(i>0?i:DEFAULT_FPS)}return _createClass(l,[{key:e,value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a1_0x26cf,e.abrupt("return",lock[t(792)](lockKey,(function(){return n[t(559)]()})));case 2:case"end":return e.stop()}}),e)})))}},{key:t,value:function(){var e=this,t=a1_0x2c401b;return!this[t(475)]&&(console[t(683)](t(286)),this[t(475)]=__classPrivateFieldGet(this,_AUPredictor_authenticate,"f")[t(840)](this)[t(873)]((function(){return Promise[t(815)]([e[t(610)][t(396)](),e[t(567)][t(396)](e[t(648)])])}))[t(873)]((function(){return console[t(683)](t(860))}))),this._initializePromise}},{key:n,get:function(){return this[a1_0x2c401b(832)]}},{key:r,get:function(){return this[a1_0x2c401b(351)]}},{key:a,get:function(){return this._video}},{key:"stream",get:function(){return this._stream}},{key:"state",get:function(){return this[a1_0x2c401b(443)]}},{key:i,get:function(){return this._onPredict}},{key:"onPredict",set:function(e){this[a1_0x2c401b(609)]=e}},{key:"auTuner",get:function(){return this.avatarDensePredictor.auTuner}},{key:o,value:function(e){var t=e.shouldMirrorOutput,n=e.predictionQuality,r=e.customBinFileUrl,a=e.customModelMetaUrl,i=e.customModelUrl,o=e.refineLandmarks;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this[(s=a1_0x26cf)(648)]=null!=n?n:this[s(648)],this[s(903)]=null!=t?t:this[s(903)],e.next=5,this[s(487)]();case 5:return o=null!=o?o:n===s(562),this[s(610)][s(586)]({selfieMode:t,refineLandmarks:o}),e.next=9,this.avatarDensePredictor[s(586)]({predictionQuality:n,customBinFileUrl:r,customModelMetaUrl:a,customModelUrl:i});case 9:return e.next=11,this[s(402)]({stream:this[s(491)]});case 11:case"end":return e.stop()}}),e,this)})))}},{key:s,value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a1_0x26cf,t.abrupt("return",lock[n(792)](lockKey,(function(){return r[n(761)](e)})));case 2:case"end":return t.stop()}}),t)})))}},{key:u,value:function(e){var t=e.stream;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var n,r,a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a1_0x26cf,t){e.next=3;break}throw Error("Start was called but stream was "+t);case 3:if(t[n(274)]().length){e.next=5;break}throw Error(n(841));case 5:return r=t[n(274)]()[0],a=this._stream===t,this[n(776)]=t,e.prev=7,(this[n(443)]!==n(844)||this[n(230)])&&this[n(592)]({stopStream:!a}),this[n(443)]=n(511),i=r[n(646)](),o=i.width,s=i.height,this[n(661)][n(859)]=o,this[n(661)][n(522)]=s,this._video[n(618)]=t,e.next=15,Promise.all([this[n(559)](),this[n(661)][n(735)]()]);case 15:this.setVideoFrameCallback(),this[n(443)]=n(647),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(7),this[n(592)]({stopStream:!a}),e.t0;case 22:case"end":return e.stop()}}),e,this,[[7,19]])})))}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a1_0x26cf,t.abrupt("return",lock[n(792)](lockKey,(function(){return r[n(592)](e)})));case 2:case"end":return t.stop()}}),t)})))}},{key:c,value:function(e){var t,n=e.stopStream,r=void 0!==n&&n;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cancelVideoFrameCallback(this[(n=a1_0x26cf)(661)],this.requestFrameToken),this[n(230)]=void 0,this[n(678)].srcObject=null,r&&(null===(t=this[n(776)])||void 0===t||t[n(316)]()[n(340)]((function(e){return e[n(487)]()})),this[n(776)]=void 0),this[n(443)]=n(844);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"setVideoFrameCallback",value:function(){var e=this,t=a1_0x2c401b;this[t(230)]=requestVideoFrameCallback(this[t(661)],(function(){var n=t;e[n(832)][n(668)](),e[n(610)][n(430)](e[n(661)])}))}}]),l}(a1_0x2c401b(891),a1_0x2c401b(559),a1_0x2c401b(693),a1_0x2c401b(543),a1_0x2c401b(678),a1_0x2c401b(641),a1_0x2c401b(586),a1_0x2c401b(402),a1_0x2c401b(761),a1_0x2c401b(592));_AUPredictor_authenticate=new WeakMap;var commonjsGlobal=typeof globalThis!==a1_0x2c401b(718)?globalThis:typeof window!==a1_0x2c401b(718)?window:void 0!==global$1?global$1:typeof self!==a1_0x2c401b(718)?self:{},_long=Long,wasm=null;try{wasm=new(WebAssembly[a1_0x2c401b(665)])(new(WebAssembly[a1_0x2c401b(753)])(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{})[a1_0x2c401b(515)]}catch(a1_0x34f0a2){}function Long(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function isLong(e){return!0===(e&&e[a1_0x2c401b(510)])}a1_0x2c401b(733),a1_0x2c401b(510),Object[a1_0x2c401b(529)](Long.prototype,"__isLong__",{value:!0}),Long[a1_0x2c401b(643)]=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(n=fromBits(e,(0|e)<0?-1:0,!0),a&&(UINT_CACHE[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(n=fromBits(e,e<0?-1:0,!1),a&&(INT_CACHE[e]=n),n)}function fromNumber(e,t){var n=a1_0x2c401b;if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t)[n(416)]():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,n){return new Long(e,t,n)}Long[a1_0x2c401b(919)]=fromInt,Long[a1_0x2c401b(241)]=fromNumber,Long[a1_0x2c401b(421)]=fromBits;var pow_dbl=Math[a1_0x2c401b(613)];function fromString(e,t,n){var r,a=a1_0x2c401b;if(0===e[a(843)])throw Error("empty string");if(e===a(532)||e===a(857)||e===a(897)||e===a(838))return ZERO;if(typeof t===a(418)?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError(a(787));if((r=e[a(783)]("-"))>0)throw Error(a(290));if(0===r)return fromString(e[a(658)](1),t,n)[a(416)]();for(var i=fromNumber(pow_dbl(n,8)),o=ZERO,s=0;s<e[a(843)];s+=8){var u=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+u),n);if(u<8){var l=fromNumber(pow_dbl(n,u));o=o[a(773)](l)[a(484)](fromNumber(c))}else o=(o=o[a(773)](i))[a(484)](fromNumber(c))}return o[a(401)]=t,o}function fromValue(e,t){var n=a1_0x2c401b;return typeof e===n(418)?fromNumber(e,t):typeof e===n(662)?fromString(e,t):fromBits(e[n(554)],e[n(562)],typeof t===n(867)?t:e[n(401)])}Long[a1_0x2c401b(572)]=fromString,Long[a1_0x2c401b(894)]=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long[a1_0x2c401b(837)]=ZERO;var UZERO=fromInt(0,!0);Long[a1_0x2c401b(622)]=UZERO;var ONE=fromInt(1);Long[a1_0x2c401b(388)]=ONE;var UONE=fromInt(1,!0);Long[a1_0x2c401b(444)]=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long[a1_0x2c401b(922)]=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long[a1_0x2c401b(733)];LongPrototype[a1_0x2c401b(899)]=function(){var e=a1_0x2c401b;return this[e(401)]?this[e(554)]>>>0:this[e(554)]},LongPrototype[a1_0x2c401b(845)]=function(){var e=a1_0x2c401b;return this[e(401)]?(this[e(562)]>>>0)*TWO_PWR_32_DBL+(this[e(554)]>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype[a1_0x2c401b(762)]=function(e){var t=a1_0x2c401b;if((e=e||10)<2||36<e)throw RangeError(t(787));if(this[t(617)]())return"0";if(this[t(372)]()){if(this.eq(MIN_VALUE)){var n=fromNumber(e),r=this.div(n),a=r[t(773)](n)[t(853)](this);return r[t(762)](e)+a[t(899)]()[t(762)](e)}return"-"+this[t(416)]()[t(762)](e)}for(var i=fromNumber(pow_dbl(e,6),this[t(401)]),o=this,s="";;){var u=o[t(380)](i),c=(o.sub(u[t(773)](i))[t(899)]()>>>0)[t(762)](e);if((o=u)[t(617)]())return c+s;for(;c[t(843)]<6;)c="0"+c;s=""+c+s}},LongPrototype[a1_0x2c401b(580)]=function(){return this.high},LongPrototype[a1_0x2c401b(564)]=function(){return this.high>>>0},LongPrototype[a1_0x2c401b(467)]=function(){return this[a1_0x2c401b(554)]},LongPrototype[a1_0x2c401b(359)]=function(){return this[a1_0x2c401b(554)]>>>0},LongPrototype[a1_0x2c401b(231)]=function(){var e=a1_0x2c401b;if(this[e(372)]())return this.eq(MIN_VALUE)?64:this.neg()[e(231)]();for(var t=0!=this.high?this[e(562)]:this[e(554)],n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},LongPrototype[a1_0x2c401b(617)]=function(){return 0===this[a1_0x2c401b(562)]&&0===this.low},LongPrototype[a1_0x2c401b(740)]=LongPrototype[a1_0x2c401b(617)],LongPrototype.isNegative=function(){return!this[a1_0x2c401b(401)]&&this.high<0},LongPrototype.isPositive=function(){var e=a1_0x2c401b;return this[e(401)]||this[e(562)]>=0},LongPrototype[a1_0x2c401b(284)]=function(){return 1==(1&this[a1_0x2c401b(554)])},LongPrototype[a1_0x2c401b(297)]=function(){return 0==(1&this[a1_0x2c401b(554)])},LongPrototype[a1_0x2c401b(879)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),(this[t(401)]===e[t(401)]||this[t(562)]>>>31!=1||e.high>>>31!=1)&&this[t(562)]===e[t(562)]&&this[t(554)]===e[t(554)]},LongPrototype.eq=LongPrototype.equals,LongPrototype[a1_0x2c401b(751)]=function(e){return!this.eq(e)},LongPrototype[a1_0x2c401b(612)]=LongPrototype[a1_0x2c401b(751)],LongPrototype.ne=LongPrototype[a1_0x2c401b(751)],LongPrototype[a1_0x2c401b(791)]=function(e){return this[a1_0x2c401b(301)](e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this[a1_0x2c401b(301)](e)<=0},LongPrototype.lte=LongPrototype[a1_0x2c401b(786)],LongPrototype.le=LongPrototype[a1_0x2c401b(786)],LongPrototype[a1_0x2c401b(349)]=function(e){return this[a1_0x2c401b(301)](e)>0},LongPrototype.gt=LongPrototype[a1_0x2c401b(349)],LongPrototype.greaterThanOrEqual=function(e){return this[a1_0x2c401b(301)](e)>=0},LongPrototype[a1_0x2c401b(908)]=LongPrototype[a1_0x2c401b(414)],LongPrototype.ge=LongPrototype[a1_0x2c401b(414)],LongPrototype[a1_0x2c401b(700)]=function(e){var t=a1_0x2c401b;if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e[t(372)]();return n&&!r?-1:!n&&r?1:this[t(401)]?e[t(562)]>>>0>this[t(562)]>>>0||e[t(562)]===this[t(562)]&&e[t(554)]>>>0>this[t(554)]>>>0?-1:1:this[t(853)](e).isNegative()?-1:1},LongPrototype[a1_0x2c401b(301)]=LongPrototype[a1_0x2c401b(700)],LongPrototype[a1_0x2c401b(377)]=function(){var e=a1_0x2c401b;return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this[e(525)]().add(ONE)},LongPrototype[a1_0x2c401b(416)]=LongPrototype[a1_0x2c401b(377)],LongPrototype[a1_0x2c401b(484)]=function(e){var t=a1_0x2c401b;isLong(e)||(e=fromValue(e));var n=this[t(562)]>>>16,r=65535&this.high,a=this[t(554)]>>>16,i=65535&this[t(554)],o=e[t(562)]>>>16,s=65535&e[t(562)],u=e[t(554)]>>>16,c=0,l=0,h=0,f=0;return h+=(f+=i+(65535&e[t(554)]))>>>16,l+=(h+=a+u)>>>16,c+=(l+=r+s)>>>16,c+=n+o,fromBits((h&=65535)<<16|(f&=65535),(c&=65535)<<16|(l&=65535),this[t(401)])},LongPrototype[a1_0x2c401b(451)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),this[t(484)](e[t(416)]())},LongPrototype[a1_0x2c401b(853)]=LongPrototype[a1_0x2c401b(451)],LongPrototype[a1_0x2c401b(446)]=function(e){var t=a1_0x2c401b;if(this[t(617)]())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this[t(554)],this.high,e[t(554)],e[t(562)]),wasm.get_high(),this[t(401)]);if(e[t(617)]())return ZERO;if(this.eq(MIN_VALUE))return e[t(284)]()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this[t(284)]()?MIN_VALUE:ZERO;if(this[t(372)]())return e[t(372)]()?this.neg()[t(773)](e[t(416)]()):this[t(416)]().mul(e)[t(416)]();if(e.isNegative())return this[t(773)](e.neg())[t(416)]();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this[t(845)]()*e[t(845)](),this.unsigned);var n=this[t(562)]>>>16,r=65535&this[t(562)],a=this[t(554)]>>>16,i=65535&this.low,o=e[t(562)]>>>16,s=65535&e.high,u=e[t(554)]>>>16,c=65535&e[t(554)],l=0,h=0,f=0,d=0;return f+=(d+=i*c)>>>16,h+=(f+=a*c)>>>16,f&=65535,h+=(f+=i*u)>>>16,l+=(h+=r*c)>>>16,h&=65535,l+=(h+=a*u)>>>16,h&=65535,l+=(h+=i*s)>>>16,l+=n*c+r*u+a*s+i*o,fromBits((f&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this[t(401)])},LongPrototype.mul=LongPrototype.multiply,LongPrototype[a1_0x2c401b(256)]=function(e){var t,n,r,a=a1_0x2c401b;if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error(a(363));if(wasm)return this[a(401)]||-2147483648!==this[a(562)]||-1!==e[a(554)]||-1!==e[a(562)]?fromBits((this[a(401)]?wasm.div_u:wasm.div_s)(this[a(554)],this[a(562)],e[a(554)],e[a(562)]),wasm.get_high(),this.unsigned):this;if(this.isZero())return this[a(401)]?UZERO:ZERO;if(this[a(401)]){if(e[a(401)]||(e=e[a(653)]()),e.gt(this))return UZERO;if(e.gt(this[a(310)](1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this[a(746)](1)[a(380)](e)[a(877)](1)).eq(ZERO)?e[a(372)]()?ONE:NEG_ONE:(n=this.sub(e[a(773)](t)),r=t.add(n[a(380)](e)));if(e.eq(MIN_VALUE))return this[a(401)]?UZERO:ZERO;if(this[a(372)]())return e[a(372)]()?this[a(416)]()[a(380)](e[a(416)]()):this[a(416)]()[a(380)](e)[a(416)]();if(e[a(372)]())return this[a(380)](e[a(416)]())[a(416)]();r=ZERO}for(n=this;n[a(908)](e);){t=Math[a(306)](1,Math.floor(n.toNumber()/e[a(845)]()));for(var i=Math[a(280)](Math[a(683)](t)/Math[a(455)]),o=i<=48?1:pow_dbl(2,i-48),s=fromNumber(t),u=s.mul(e);u[a(372)]()||u.gt(n);)u=(s=fromNumber(t-=o,this.unsigned))[a(773)](e);s.isZero()&&(s=ONE),r=r[a(484)](s),n=n[a(853)](u)}return r},LongPrototype.div=LongPrototype[a1_0x2c401b(256)],LongPrototype[a1_0x2c401b(289)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),wasm?fromBits((this[t(401)]?wasm[t(847)]:wasm[t(508)])(this[t(554)],this[t(562)],e[t(554)],e[t(562)]),wasm.get_high(),this[t(401)]):this.sub(this[t(380)](e)[t(773)](e))},LongPrototype[a1_0x2c401b(263)]=LongPrototype[a1_0x2c401b(289)],LongPrototype.rem=LongPrototype[a1_0x2c401b(289)],LongPrototype[a1_0x2c401b(525)]=function(){return fromBits(~this.low,~this.high,this[a1_0x2c401b(401)])},LongPrototype[a1_0x2c401b(581)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]&e[t(554)],this[t(562)]&e.high,this[t(401)])},LongPrototype.or=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]|e[t(554)],this[t(562)]|e[t(562)],this[t(401)])},LongPrototype[a1_0x2c401b(757)]=function(e){var t=a1_0x2c401b;return isLong(e)||(e=fromValue(e)),fromBits(this[t(554)]^e[t(554)],this.high^e[t(562)],this.unsigned)},LongPrototype[a1_0x2c401b(435)]=function(e){var t=a1_0x2c401b;return isLong(e)&&(e=e[t(899)]()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this[t(562)]<<e|this[t(554)]>>>32-e,this[t(401)]):fromBits(0,this[t(554)]<<e-32,this[t(401)])},LongPrototype[a1_0x2c401b(877)]=LongPrototype[a1_0x2c401b(435)],LongPrototype[a1_0x2c401b(233)]=function(e){var t=a1_0x2c401b;return isLong(e)&&(e=e[t(899)]()),0==(e&=63)?this:e<32?fromBits(this[t(554)]>>>e|this[t(562)]<<32-e,this[t(562)]>>e,this[t(401)]):fromBits(this[t(562)]>>e-32,this.high>=0?0:-1,this[t(401)])},LongPrototype[a1_0x2c401b(746)]=LongPrototype[a1_0x2c401b(233)],LongPrototype[a1_0x2c401b(481)]=function(e){var t=a1_0x2c401b;if(isLong(e)&&(e=e[t(899)]()),0==(e&=63))return this;var n=this[t(562)];return e<32?fromBits(this.low>>>e|n<<32-e,n>>>e,this[t(401)]):32===e?fromBits(n,0,this.unsigned):fromBits(n>>>e-32,0,this[t(401)])},LongPrototype[a1_0x2c401b(310)]=LongPrototype[a1_0x2c401b(481)],LongPrototype.shr_u=LongPrototype[a1_0x2c401b(481)],LongPrototype[a1_0x2c401b(299)]=function(){var e=a1_0x2c401b;return this[e(401)]?fromBits(this[e(554)],this[e(562)],!1):this},LongPrototype.toUnsigned=function(){var e=a1_0x2c401b;return this[e(401)]?this:fromBits(this.low,this[e(562)],!0)},LongPrototype[a1_0x2c401b(453)]=function(e){var t=a1_0x2c401b;return e?this.toBytesLE():this[t(436)]()},LongPrototype[a1_0x2c401b(460)]=function(){var e=this[a1_0x2c401b(562)],t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype[a1_0x2c401b(436)]=function(){var e=a1_0x2c401b,t=this[e(562)],n=this[e(554)];return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]},Long[a1_0x2c401b(748)]=function(e,t,n){return n?Long[a1_0x2c401b(595)](e,t):Long.fromBytesBE(e,t)},Long[a1_0x2c401b(595)]=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long[a1_0x2c401b(474)]=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,t){for(var n=a1_0x2c401b,r=new Array(arguments[n(843)]-1),a=0,i=2,o=!0;i<arguments.length;)r[a++]=arguments[i++];return new Promise((function(n,i){r[a]=function(e){var t=a1_0x26cf;if(o)if(o=!1,e)i(e);else{for(var r=new Array(arguments[t(843)]-1),a=0;a<r[t(843)];)r[a++]=arguments[a];n.apply(null,r)}};try{e.apply(t||null,r)}catch(s){o&&(o=!1,i(s))}}))}var base64$1={};!function(e){var t=a1_0x2c401b,n=e;n[t(843)]=function(e){var n=e[t(843)];if(!n)return 0;for(var r=0;--n%4>1&&"="===e.charAt(n);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),a=new Array(123),i=0;i<64;)a[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n[t(819)]=function(e,n,a){for(var i,o=t,s=null,u=[],c=0,l=0;n<a;){var h=e[n++];switch(l){case 0:u[c++]=r[h>>2],i=(3&h)<<4,l=1;break;case 1:u[c++]=r[i|h>>4],i=(15&h)<<2,l=2;break;case 2:u[c++]=r[i|h>>6],u[c++]=r[63&h],l=0}c>8191&&((s||(s=[]))[o(311)](String[o(582)][o(869)](String,u)),c=0)}return l&&(u[c++]=r[i],u[c++]=61,1===l&&(u[c++]=61)),s?(c&&s[o(311)](String[o(582)][o(869)](String,u[o(505)](0,c))),s[o(893)]("")):String[o(582)][o(869)](String,u.slice(0,c))},n[t(672)]=function(e,n,r){for(var i,o=t,s=r,u=0,c=0;c<e[o(843)];){var l=e[o(404)](c++);if(61===l&&u>1)break;if(void 0===(l=a[l]))throw Error("invalid encoding");switch(u){case 0:i=l,u=1;break;case 1:n[r++]=i<<2|(48&l)>>4,i=l,u=2;break;case 2:n[r++]=(15&i)<<4|(60&l)>>2,i=l,u=3;break;case 3:n[r++]=(3&i)<<6|l,u=0}}if(1===u)throw Error("invalid encoding");return r-s},n[t(523)]=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter[a1_0x2c401b(733)].on=function(e,t,n){var r=a1_0x2c401b;return(this[r(353)][e]||(this._listeners[e]=[]))[r(311)]({fn:t,ctx:n||this}),this},EventEmitter.prototype.off=function(e,t){var n=a1_0x2c401b;if(void 0===e)this[n(353)]={};else if(void 0===t)this[n(353)][e]=[];else for(var r=this._listeners[e],a=0;a<r[n(843)];)r[a].fn===t?r[n(821)](a,1):++a;return this},EventEmitter[a1_0x2c401b(733)].emit=function(e){var t=a1_0x2c401b,n=this._listeners[e];if(n){for(var r=[],a=1;a<arguments.length;)r.push(arguments[a++]);for(a=0;a<n.length;)n[a].fn[t(869)](n[a++][t(696)],r)}return this};var _float=factory(factory);function factory(e){var t=a1_0x2c401b;return typeof Float32Array!==t(718)?function(){var n=t,r=new Float32Array([-0]),a=new Uint8Array(r[n(593)]),i=128===a[3];function o(e,t,n){r[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function s(e,t,n){r[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function u(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],r[0]}function c(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],r[0]}e[n(520)]=i?o:s,e[n(339)]=i?s:o,e[n(650)]=i?u:c,e.readFloatBE=i?c:u}():function(){var n=t;function r(e,t,n,r){var a=a1_0x26cf,i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math[a(448)](t/1401298464324817e-60))>>>0,n,r);else{var o=Math[a(264)](Math.log(t)/Math[a(455)]);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function a(e,t,r){var a=n,i=e(t,r),o=2*(i>>31)+1,s=i>>>23&255,u=8388607&i;return 255===s?u?NaN:o*(1/0):0===s?1401298464324817e-60*o*u:o*Math[a(613)](2,s-150)*(u+8388608)}e[n(520)]=r[n(778)](null,writeUintLE),e.writeFloatBE=r[n(778)](null,writeUintBE),e[n(650)]=a[n(778)](null,readUintLE),e[n(270)]=a[n(778)](null,readUintBE)}(),typeof Float64Array!==t(718)?function(){var n=t,r=new Float64Array([-0]),a=new Uint8Array(r[n(593)]),i=128===a[7];function o(e,t,n){r[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function s(e,t,n){r[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function u(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],r[0]}function c(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],r[0]}e[n(265)]=i?o:s,e[n(422)]=i?s:o,e[n(485)]=i?u:c,e[n(890)]=i?c:u}():function(){var n=t;function r(e,t,n,r,a,i){var o,s=a1_0x26cf,u=r<0?1:0;if(u&&(r=-r),0===r)e(0,a,i+t),e(1/r>0?0:2147483648,a,i+n);else if(isNaN(r))e(0,a,i+t),e(2146959360,a,i+n);else if(r>17976931348623157e292)e(0,a,i+t),e((u<<31|2146435072)>>>0,a,i+n);else if(r<22250738585072014e-324)e((o=r/5e-324)>>>0,a,i+t),e((u<<31|o/4294967296)>>>0,a,i+n);else{var c=Math[s(264)](Math[s(683)](r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(o=r*Math.pow(2,-c))>>>0,a,i+t),e((u<<31|c+1023<<20|1048576*o&1048575)>>>0,a,i+n)}}function a(e,t,n,r,a){var i=e(r,a+t),o=e(r,a+n),s=2*(o>>31)+1,u=o>>>20&2047,c=4294967296*(1048575&o)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e[n(265)]=r.bind(null,writeUintLE,0,4),e[n(422)]=r.bind(null,writeUintBE,4,0),e[n(485)]=a[n(778)](null,readUintLE,0,4),e[n(890)]=a[n(778)](null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(_0x637a7a){var _0x5d8707=a1_0x2c401b;try{var _0x4f88ed=eval(_0x5d8707(577)[_0x5d8707(585)](/^/,"re"))(_0x637a7a);if(_0x4f88ed&&(_0x4f88ed[_0x5d8707(843)]||Object[_0x5d8707(628)](_0x4f88ed).length))return _0x4f88ed}catch(_0x59817){}return null}var utf8$2={},_0x421d98,_0x727c26,_0xfb84c1;_0x421d98=utf8$2,_0x727c26=a1_0x2c401b,_0xfb84c1=_0x421d98,_0xfb84c1[_0x727c26(843)]=function(e){for(var t=_0x727c26,n=0,r=0,a=0;a<e[t(843)];++a)(r=e[t(404)](a))<128?n+=1:r<2048?n+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(a+1))?(++a,n+=4):n+=3;return n},_0xfb84c1[_0x727c26(408)]=function(e,t,n){var r=_0x727c26;if(n-t<1)return"";for(var a,i=null,o=[],s=0;t<n;)(a=e[t++])<128?o[s++]=a:a>191&&a<224?o[s++]=(31&a)<<6|63&e[t++]:a>239&&a<365?(a=((7&a)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(a>>10),o[s++]=56320+(1023&a)):o[s++]=(15&a)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[]))[r(311)](String[r(582)].apply(String,o)),s=0);return i?(s&&i[r(311)](String[r(582)][r(869)](String,o[r(505)](0,s))),i[r(893)]("")):String.fromCharCode[r(869)](String,o[r(505)](0,s))},_0xfb84c1.write=function(e,t,n){for(var r,a,i=_0x727c26,o=n,s=0;s<e[i(843)];++s)(r=e[i(404)](s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(a=e.charCodeAt(s+1)))?(++s,t[n++]=(r=65536+((1023&r)<<10)+(1023&a))>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o};var pool_1=pool,longbits,hasRequiredLongbits,hasRequiredMinimal;function pool(e,t,n){var r=n||8192,a=r>>>1,i=null,o=r;return function(n){var s=a1_0x26cf;if(n<1||n>a)return e(n);o+n>r&&(i=e(r),o=0);var u=t[s(840)](i,o,o+=n);return 7&o&&(o=1+(7|o)),u}}function requireLongbits(){var e=a1_0x2c401b;if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=n;var t=requireMinimal();function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=n[e(669)]=new n(0,0);r[e(845)]=function(){return 0},r.zzEncode=r[e(796)]=function(){return this},r[e(843)]=function(){return 1};var a=n[e(909)]=e(321);n[e(241)]=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var a=e>>>0,i=(e-a)/4294967296>>>0;return t&&(i=~i>>>0,a=~a>>>0,++a>4294967295&&(a=0,++i>4294967295&&(i=0))),new n(a,i)},n[e(739)]=function(a){var i=e;if(typeof a===i(418))return n[i(241)](a);if(t[i(624)](a)){if(!t[i(278)])return n[i(241)](parseInt(a,10));a=t[i(278)][i(572)](a)}return a.low||a[i(562)]?new n(a[i(554)]>>>0,a[i(562)]>>>0):r},n.prototype[e(845)]=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},n[e(733)][e(335)]=function(e){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var i=String[e(733)][e(404)];return n.fromHash=function(t){var o=e;return t===a?r:new n((i[o(840)](t,0)|i[o(840)](t,1)<<8|i[o(840)](t,2)<<16|i[o(840)](t,3)<<24)>>>0,(i[o(840)](t,4)|i[o(840)](t,5)<<8|i[o(840)](t,6)<<16|i.call(t,7)<<24)>>>0)},n.prototype[e(492)]=function(){return String[e(582)](255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n[e(733)][e(835)]=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype[e(796)]=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal?minimal:(hasRequiredMinimal=1,function(e){var t=a1_0x26cf,n=e;function r(e,n,r){for(var a=t,i=Object[a(628)](n),o=0;o<i[a(843)];++o)void 0!==e[i[o]]&&r||(e[i[o]]=n[i[o]]);return e}function a(e){var n=t;function a(e,t){var n=a1_0x26cf;if(!(this instanceof a))return new a(e,t);Object.defineProperty(this,n(483),{get:function(){return e}}),Error[n(553)]?Error[n(553)](this,a):Object[n(529)](this,"stack",{value:(new Error)[n(259)]||""}),t&&r(this,t)}return(a[n(733)]=Object.create(Error[n(733)]))[n(803)]=a,Object[n(529)](a[n(733)],n(407),{get:function(){return e}}),a.prototype.toString=function(){return this.name+": "+this[n(483)]},a}n[t(591)]=aspromise,n[t(261)]=base64$1,n[t(445)]=eventemitter,n.float=_float,n[t(292)]=inquire_1,n[t(347)]=utf8$2,n.pool=pool_1,n[t(690)]=requireLongbits(),n[t(472)]=Boolean(typeof commonjsGlobal!==t(718)&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal[t(566)][t(478)]&&commonjsGlobal[t(566)][t(478)].node),n[t(697)]=n[t(472)]&&commonjsGlobal||typeof window!==t(718)&&window||typeof self!==t(718)&&self||commonjsGlobal,n.emptyArray=Object[t(244)]?Object[t(244)]([]):[],n[t(680)]=Object[t(244)]?Object[t(244)]({}):{},n.isInteger=Number[t(392)]||function(e){var n=t;return typeof e===n(418)&&isFinite(e)&&Math[n(264)](e)===e},n[t(624)]=function(e){return typeof e===t(662)||e instanceof String},n[t(243)]=function(e){return e&&"object"==typeof e},n[t(651)]=n[t(403)]=function(e,n){var r=t,a=e[n];return!(null==a||!e.hasOwnProperty(n))&&("object"!=typeof a||(Array[r(812)](a)?a[r(843)]:Object.keys(a)[r(843)])>0)},n[t(779)]=function(){var e=t;try{var r=n[e(292)]("buffer")[e(779)];return r.prototype.utf8Write?r:null}catch(a){return null}}(),n._Buffer_from=null,n[t(498)]=null,n[t(337)]=function(e){var r=t;return typeof e===r(418)?n[r(779)]?n[r(498)](e):new n.Array(e):n[r(779)]?n[r(247)](e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array=typeof Uint8Array!==t(718)?Uint8Array:Array,n[t(278)]=n[t(697)][t(825)]&&n[t(697)][t(825)][t(278)]||n[t(697)][t(278)]||n[t(292)](t(235)),n.key2Re=/^true|false|0|1$/,n[t(489)]=/^-?(?:0|[1-9][0-9]*)$/,n[t(849)]=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){var r=t;return e?n[r(690)][r(739)](e)[r(492)]():n.LongBits.zeroHash},n[t(318)]=function(e,r){var a=t,i=n.LongBits[a(864)](e);return n.Long?n[a(278)][a(421)](i.lo,i.hi,r):i[a(845)](Boolean(r))},n[t(468)]=r,n[t(234)]=function(e){var n=t;return e.charAt(0)[n(300)]()+e[n(658)](1)},n[t(272)]=a,n[t(682)]=a(t(682)),n[t(817)]=function(e){for(var n=t,r={},a=0;a<e[n(843)];++a)r[e[a]]=1;return function(){for(var e=n,t=Object[e(628)](this),a=t[e(843)]-1;a>-1;--a)if(1===r[t[a]]&&null!=this[t[a]])return t[a]}},n[t(507)]=function(e){return function(t){for(var n=a1_0x26cf,r=0;r<e[n(843)];++r)e[r]!==t&&delete this[e[r]]}},n[t(726)]={longs:String,enums:String,bytes:String,json:!0},n[t(875)]=function(){var e=t,r=n.Buffer;r?(n._Buffer_from=r[e(739)]!==Uint8Array[e(739)]&&r.from||function(e,t){return new r(e,t)},n[e(498)]=r[e(749)]||function(e){return new r(e)}):n._Buffer_from=n[e(498)]=null}}(minimal),minimal)}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4[a1_0x2c401b(690)],base64=util$4[a1_0x2c401b(261)],utf8$1=util$4[a1_0x2c401b(347)];function Op(e,t,n){var r=a1_0x2c401b;this.fn=e,this[r(253)]=t,this[r(754)]=void 0,this.val=n}function noop(){}function State(e){var t=a1_0x2c401b;this[t(360)]=e[t(360)],this.tail=e.tail,this[t(253)]=e[t(253)],this[t(754)]=e[t(367)]}function Writer$1(){var e=a1_0x2c401b;this[e(253)]=0,this[e(360)]=new Op(noop,0,0),this[e(539)]=this[e(360)],this.states=null}var create$1=function(){var e=a1_0x2c401b;return util$4[e(779)]?function(){return(Writer$1[e(644)]=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,n){t[n]=255&e}function writeVarint32(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function VarintOp(e,t){var n=a1_0x2c401b;this[n(253)]=e,this[n(754)]=void 0,this[n(267)]=t}function writeVarint64(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function writeFixed32(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer$1[a1_0x2c401b(644)]=create$1(),Writer$1[a1_0x2c401b(266)]=function(e){return new util$4.Array(e)},util$4[a1_0x2c401b(427)]!==Array&&(Writer$1[a1_0x2c401b(266)]=util$4[a1_0x2c401b(652)](Writer$1[a1_0x2c401b(266)],util$4.Array[a1_0x2c401b(733)].subarray)),Writer$1.prototype[a1_0x2c401b(497)]=function(e,t,n){var r=a1_0x2c401b;return this[r(539)]=this[r(539)][r(754)]=new Op(e,t,n),this[r(253)]+=t,this},VarintOp[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](Op[a1_0x2c401b(733)]),VarintOp[a1_0x2c401b(733)].fn=writeVarint32,Writer$1.prototype[a1_0x2c401b(350)]=function(e){var t=a1_0x2c401b;return this[t(253)]+=(this.tail=this[t(539)][t(754)]=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e))[t(253)],this},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(685)]=function(e){return e<0?this[a1_0x2c401b(497)](writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this[a1_0x2c401b(350)]((e<<1^e>>31)>>>0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(240)]=function(e){var t=a1_0x2c401b,n=LongBits$1.from(e);return this[t(497)](writeVarint64,n.length(),n)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(304)]=Writer$1[a1_0x2c401b(733)][a1_0x2c401b(240)],Writer$1.prototype[a1_0x2c401b(880)]=function(e){var t=a1_0x2c401b,n=LongBits$1[t(739)](e).zzEncode();return this._push(writeVarint64,n[t(843)](),n)},Writer$1.prototype[a1_0x2c401b(679)]=function(e){return this[a1_0x2c401b(497)](writeByte,1,e?1:0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(535)]=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(743)]=Writer$1[a1_0x2c401b(733)][a1_0x2c401b(535)],Writer$1.prototype[a1_0x2c401b(486)]=function(e){var t=a1_0x2c401b,n=LongBits$1[t(739)](e);return this[t(497)](writeFixed32,4,n.lo)[t(497)](writeFixed32,4,n.hi)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(671)]=Writer$1.prototype[a1_0x2c401b(486)],Writer$1[a1_0x2c401b(733)][a1_0x2c401b(720)]=function(e){var t=a1_0x2c401b;return this[t(497)](util$4[t(720)].writeFloatLE,4,e)},Writer$1[a1_0x2c401b(733)].double=function(e){var t=a1_0x2c401b;return this[t(497)](util$4[t(720)][t(265)],8,e)};var writeBytes=util$4[a1_0x2c401b(427)][a1_0x2c401b(733)][a1_0x2c401b(298)]?function(e,t,n){t[a1_0x2c401b(298)](e,n)}:function(e,t,n){for(var r=a1_0x2c401b,a=0;a<e[r(843)];++a)t[n+a]=e[a]};function a1_0x26cf(e,t){var n=a1_0x4794();return(a1_0x26cf=function(e,t){return n[e-=230]})(e,t)}Writer$1[a1_0x2c401b(733)].bytes=function(e){var t=a1_0x2c401b,n=e[t(843)]>>>0;if(!n)return this[t(497)](writeByte,1,0);if(util$4.isString(e)){var r=Writer$1[t(266)](n=base64[t(843)](e));base64[t(672)](e,r,0),e=r}return this.uint32(n)[t(497)](writeBytes,n,e)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(662)]=function(e){var t=a1_0x2c401b,n=utf8$1[t(843)](e);return n?this[t(350)](n)[t(497)](utf8$1[t(611)],n,e):this._push(writeByte,1,0)},Writer$1[a1_0x2c401b(733)][a1_0x2c401b(356)]=function(){var e=a1_0x2c401b;return this.states=new State(this),this.head=this[e(539)]=new Op(noop,0,0),this[e(253)]=0,this},Writer$1[a1_0x2c401b(733)].reset=function(){var e=a1_0x2c401b;return this.states?(this[e(360)]=this.states[e(360)],this[e(539)]=this[e(367)][e(539)],this[e(253)]=this[e(367)][e(253)],this.states=this[e(367)][e(754)]):(this[e(360)]=this[e(539)]=new Op(noop,0,0),this[e(253)]=0),this},Writer$1.prototype.ldelim=function(){var e=a1_0x2c401b,t=this[e(360)],n=this[e(539)],r=this[e(253)];return this.reset().uint32(r),r&&(this[e(539)][e(754)]=t.next,this[e(539)]=n,this.len+=r),this},Writer$1.prototype[a1_0x2c401b(457)]=function(){for(var e=a1_0x2c401b,t=this[e(360)][e(754)],n=this[e(803)][e(266)](this[e(253)]),r=0;t;)t.fn(t[e(267)],n,r),r+=t[e(253)],t=t[e(754)];return n},Writer$1[a1_0x2c401b(875)]=function(e){var t=a1_0x2c401b;BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1[t(875)]()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](Writer[a1_0x2c401b(733)])).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer[a1_0x2c401b(840)](this)}function writeStringBuffer(e,t,n){var r=a1_0x2c401b;e[r(843)]<40?util$3.utf8.write(e,t,n):t[r(420)]?t[r(420)](e,n):t.write(e,n)}BufferWriter[a1_0x2c401b(875)]=function(){var e=a1_0x2c401b;BufferWriter[e(266)]=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3[e(779)]&&util$3.Buffer[e(733)]instanceof Uint8Array&&"set"===util$3[e(779)].prototype[e(298)].name?function(t,n,r){n[e(298)](t,r)}:function(t,n,r){var a=e;if(t[a(872)])t[a(872)](n,r,0,t[a(843)]);else for(var i=0;i<t.length;)n[r++]=t[i++]}},BufferWriter[a1_0x2c401b(733)][a1_0x2c401b(745)]=function(e){var t=a1_0x2c401b;util$3[t(624)](e)&&(e=util$3._Buffer_from(e,t(261)));var n=e.length>>>0;return this[t(350)](n),n&&this[t(497)](BufferWriter[t(768)],n,e),this},BufferWriter[a1_0x2c401b(733)].string=function(e){var t=a1_0x2c401b,n=util$3[t(779)][t(734)](e);return this[t(350)](n),n&&this[t(497)](writeStringBuffer,n,e),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2[a1_0x2c401b(690)],utf8=util$2[a1_0x2c401b(347)];function indexOutOfRange(e,t){var n=a1_0x2c401b;return RangeError(n(764)+e[n(346)]+n(630)+(t||1)+" > "+e.len)}function Reader$1(e){var t=a1_0x2c401b;this[t(822)]=e,this[t(346)]=0,this[t(253)]=e[t(843)]}var create_array=typeof Uint8Array!==a1_0x2c401b(718)?function(e){var t=a1_0x2c401b;if(e instanceof Uint8Array||Array[t(812)](e))return new Reader$1(e);throw Error(t(627))}:function(e){var t=a1_0x2c401b;if(Array[t(812)](e))return new Reader$1(e);throw Error(t(627))},create=function(){var e=a1_0x2c401b;return util$2[e(779)]?function(t){var n=e;return(Reader$1[n(644)]=function(e){var t=n;return util$2[t(779)][t(385)](e)?new BufferReader$1(e):create_array(e)})(t)}:create_array},_0x46f220;function readLongVarint(){var e=a1_0x2c401b,t=new LongBits(0,0),n=0;if(!(this[e(253)]-this[e(346)]>4)){for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this[e(822)][this.pos])<<7*n)>>>0,this[e(822)][this.pos++]<128)return t}return t.lo=(t.lo|(127&this[e(822)][this[e(346)]++])<<7*n)>>>0,t}for(;n<4;++n)if(t.lo=(t.lo|(127&this[e(822)][this[e(346)]])<<7*n)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this[e(822)][this[e(346)]])>>4)>>>0,this[e(822)][this[e(346)]++]<128)return t;if(n=0,this.len-this.pos>4){for(;n<5;++n)if(t.hi=(t.hi|(127&this[e(822)][this.pos])<<7*n+3)>>>0,this[e(822)][this[e(346)]++]<128)return t}else for(;n<5;++n){if(this[e(346)]>=this[e(253)])throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this[e(822)][this.pos])<<7*n+3)>>>0,this[e(822)][this[e(346)]++]<128)return t}throw Error(e(800))}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){var e=a1_0x2c401b;if(this[e(346)]+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this[e(346)]+=4),readFixed32_end(this[e(822)],this[e(346)]+=4))}Reader$1[a1_0x2c401b(644)]=create(),Reader$1[a1_0x2c401b(733)][a1_0x2c401b(279)]=util$2[a1_0x2c401b(427)][a1_0x2c401b(733)][a1_0x2c401b(896)]||util$2.Array[a1_0x2c401b(733)][a1_0x2c401b(505)],Reader$1.prototype.uint32=(_0x46f220=4294967295,function(){var e=a1_0x26cf;if(_0x46f220=(127&this[e(822)][this[e(346)]])>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this.buf[this[e(346)]])<<7)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this.buf[this[e(346)]])<<14)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(127&this[e(822)][this[e(346)]])<<21)>>>0,this[e(822)][this[e(346)]++]<128)return _0x46f220;if(_0x46f220=(_0x46f220|(15&this[e(822)][this[e(346)]])<<28)>>>0,this.buf[this[e(346)]++]<128)return _0x46f220;if((this[e(346)]+=5)>this[e(253)])throw this[e(346)]=this[e(253)],indexOutOfRange(this,10);return _0x46f220}),Reader$1[a1_0x2c401b(733)].int32=function(){return 0|this[a1_0x2c401b(350)]()},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(348)]=function(){var e=this[a1_0x2c401b(350)]();return e>>>1^-(1&e)|0},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(679)]=function(){return 0!==this[a1_0x2c401b(350)]()},Reader$1.prototype[a1_0x2c401b(535)]=function(){var e=a1_0x2c401b;if(this[e(346)]+4>this[e(253)])throw indexOutOfRange(this,4);return readFixed32_end(this[e(822)],this.pos+=4)},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(743)]=function(){var e=a1_0x2c401b;if(this.pos+4>this[e(253)])throw indexOutOfRange(this,4);return 0|readFixed32_end(this[e(822)],this[e(346)]+=4)},Reader$1.prototype.float=function(){var e=a1_0x2c401b;if(this[e(346)]+4>this[e(253)])throw indexOutOfRange(this,4);var t=util$2[e(720)][e(650)](this[e(822)],this[e(346)]);return this[e(346)]+=4,t},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(878)]=function(){var e=a1_0x2c401b;if(this[e(346)]+8>this[e(253)])throw indexOutOfRange(this,4);var t=util$2[e(720)][e(485)](this[e(822)],this[e(346)]);return this[e(346)]+=8,t},Reader$1[a1_0x2c401b(733)].bytes=function(){var e=a1_0x2c401b,t=this[e(350)](),n=this.pos,r=this[e(346)]+t;if(r>this[e(253)])throw indexOutOfRange(this,t);return this[e(346)]+=t,Array[e(812)](this.buf)?this[e(822)].slice(n,r):n===r?new(this.buf[e(803)])(0):this[e(279)][e(840)](this[e(822)],n,r)},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(662)]=function(){var e=a1_0x2c401b,t=this[e(745)]();return utf8[e(408)](t,0,t[e(843)])},Reader$1[a1_0x2c401b(733)][a1_0x2c401b(262)]=function(e){var t=a1_0x2c401b;if("number"==typeof e){if(this[t(346)]+e>this[t(253)])throw indexOutOfRange(this,e);this[t(346)]+=e}else do{if(this[t(346)]>=this[t(253)])throw indexOutOfRange(this)}while(128&this[t(822)][this[t(346)]++]);return this},Reader$1[a1_0x2c401b(733)].skipType=function(e){var t=a1_0x2c401b;switch(e){case 0:this[t(262)]();break;case 1:this[t(262)](8);break;case 2:this[t(262)](this[t(350)]());break;case 3:for(;4!=(e=7&this[t(350)]());)this.skipType(e);break;case 5:this[t(262)](4);break;default:throw Error(t(639)+e+t(328)+this[t(346)])}return this},Reader$1[a1_0x2c401b(875)]=function(e){var t=a1_0x2c401b;BufferReader$1=e,Reader$1[t(644)]=create(),BufferReader$1[t(875)]();var n=util$2[t(278)]?"toLong":t(845);util$2[t(468)](Reader$1.prototype,{int64:function(){return readLongVarint[t(840)](this)[n](!1)},uint64:function(){return readLongVarint[t(840)](this)[n](!0)},sint64:function(){var e=t;return readLongVarint.call(this)[e(796)]()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader[a1_0x2c401b(733)]))[a1_0x2c401b(803)]=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){var e=a1_0x2c401b;util$1.Buffer&&(BufferReader[e(733)][e(279)]=util$1[e(779)][e(733)][e(505)])},BufferReader[a1_0x2c401b(733)].string=function(){var e=a1_0x2c401b,t=this[e(350)]();return this.buf[e(842)]?this[e(822)][e(842)](this.pos,this[e(346)]=Math.min(this[e(346)]+t,this[e(253)])):this[e(822)][e(762)](e(570),this.pos,this[e(346)]=Math.min(this[e(346)]+t,this[e(253)]))},BufferReader[a1_0x2c401b(875)]();var rpc={},service=Service,util=requireMinimal(),_0x422d19;function Service(e,t,n){var r=a1_0x2c401b;if("function"!=typeof e)throw TypeError(r(900));util[r(445)][r(840)](this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Service[a1_0x2c401b(733)]=Object[a1_0x2c401b(644)](util[a1_0x2c401b(445)][a1_0x2c401b(733)]))[a1_0x2c401b(803)]=Service,Service[a1_0x2c401b(733)][a1_0x2c401b(809)]=function e(t,n,r,a,i){var o=a1_0x2c401b;if(!a)throw TypeError(o(454));var s=this;if(!i)return util[o(591)](e,s,t,n,r,a);if(s.rpcImpl)try{return s[o(910)](t,n[s[o(476)]?o(381):"encode"](a).finish(),(function(e,n){var a=o;if(e)return s.emit(a(273),e,t),i(e);if(null!==n){if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":a(672)](n)}catch(u){return s[a(382)](a(273),u,t),i(u)}return s[a(382)](a(687),n,t),i(null,n)}s[a(552)](!0)}))}catch(u){return s[o(382)]("error",u,t),void setTimeout((function(){i(u)}),0)}else setTimeout((function(){i(Error(o(801)))}),0)},Service[a1_0x2c401b(733)].end=function(e){var t=a1_0x2c401b;return this[t(910)]&&(e||this[t(910)](null,null,null),this[t(910)]=null,this.emit(t(552))[t(513)]()),this},_0x422d19=rpc,_0x422d19[a1_0x2c401b(883)]=service;var roots={},_0x1725e0;function createBaseAvatarPredictionMessage(){return{blendShapes:void 0,rotation:void 0,transform:void 0}}(function(e){var t=a1_0x2c401b,n=e;function r(){var e=t;n[e(850)][e(875)](),n[e(727)][e(875)](n[e(294)]),n.Reader[e(875)](n[e(575)])}n[t(341)]=t(514),n[t(727)]=writer,n[t(294)]=writer_buffer,n[t(432)]=reader,n[t(575)]=reader_buffer,n[t(850)]=requireMinimal(),n[t(441)]=rpc,n[t(571)]=roots,n.configure=r,r()})(indexMinimal),_0x1725e0=minimal$1,_0x1725e0.exports=indexMinimal;var AvatarPredictionMessage={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:minimal$1[a1_0x2c401b(515)][a1_0x2c401b(727)][a1_0x2c401b(644)](),n=a1_0x2c401b;return void 0!==e[n(305)]&&BlendShapes[n(819)](e[n(305)],t[n(350)](10)[n(356)]())[n(331)](),void 0!==e[n(477)]&&Rotation[n(819)](e[n(477)],t[n(350)](18).fork())[n(331)](),void 0!==e[n(386)]&&Transform[n(819)](e[n(386)],t[n(350)](26).fork()).ldelim(),t},decode:function(e,t){for(var n=a1_0x2c401b,r=e instanceof minimal$1[n(515)][n(432)]?e:new(minimal$1[n(515)][n(432)])(e),a=void 0===t?r.len:r[n(346)]+t,i=createBaseAvatarPredictionMessage();r.pos<a;){var o=r[n(350)]();switch(o>>>3){case 1:i[n(305)]=BlendShapes.decode(r,r[n(350)]());break;case 2:i[n(477)]=Rotation.decode(r,r[n(350)]());break;case 3:i.transform=Transform.decode(r,r[n(350)]());break;default:r[n(657)](7&o)}}return i},fromJSON:function(e){var t=a1_0x2c401b;return{blendShapes:isSet(e[t(305)])?BlendShapes[t(886)](e[t(305)]):void 0,rotation:isSet(e[t(477)])?Rotation.fromJSON(e[t(477)]):void 0,transform:isSet(e[t(386)])?Transform[t(886)](e[t(386)]):void 0}},toJSON:function(e){var t=a1_0x2c401b,n={};return void 0!==e.blendShapes&&(n.blendShapes=e[t(305)]?BlendShapes[t(531)](e[t(305)]):void 0),void 0!==e.rotation&&(n.rotation=e.rotation?Rotation[t(531)](e[t(477)]):void 0),void 0!==e[t(386)]&&(n[t(386)]=e[t(386)]?Transform[t(531)](e[t(386)]):void 0),n},fromPartial:function(e){var t=a1_0x2c401b,n=createBaseAvatarPredictionMessage();return n[t(305)]=void 0!==e[t(305)]&&null!==e[t(305)]?BlendShapes.fromPartial(e[t(305)]):void 0,n.rotation=void 0!==e.rotation&&null!==e[t(477)]?Rotation[t(798)](e[t(477)]):void 0,n[t(386)]=void 0!==e[t(386)]&&null!==e[t(386)]?Transform.fromPartial(e[t(386)]):void 0,n}};function createBaseBlendShapes(){return{browDown_L:0,browDown_R:0,browInnerUp:0,browOuterUp_L:0,browOuterUp_R:0,cheekSquint_L:0,cheekSquint_R:0,eyeBlink_L:0,eyeBlink_R:0,eyeLookDown_L:0,eyeLookDown_R:0,eyeLookIn_L:0,eyeLookIn_R:0,eyeLookOut_L:0,eyeLookOut_R:0,eyeLookUp_L:0,eyeLookUp_R:0,eyeSquint_L:0,eyeSquint_R:0,eyeWide_L:0,eyeWide_R:0,jawLeft:0,jawOpen:0,jawRight:0,mouthClose:0,mouthDimple_L:0,mouthDimple_R:0,mouthFrown_L:0,mouthFrown_R:0,mouthFunnel:0,mouthLeft:0,mouthLowerDown_L:0,mouthLowerDown_R:0,mouthPress_L:0,mouthPress_R:0,mouthPucker:0,mouthRight:0,mouthRollLower:0,mouthRollUpper:0,mouthShrugLower:0,mouthShrugUpper:0,mouthSmile_L:0,mouthSmile_R:0,mouthStretch_L:0,mouthStretch_R:0,mouthUpperUp_L:0,mouthUpperUp_R:0,noseSneer_L:0,noseSneer_R:0,cheekPuff:0,jawForward:0,tongueOut:0}}var BlendShapes={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:minimal$1.exports[a1_0x2c401b(727)].create(),n=a1_0x2c401b;return 0!==e[n(713)]&&t[n(350)](13).float(e.browDown_L),0!==e[n(254)]&&t[n(350)](21)[n(720)](e.browDown_R),0!==e[n(257)]&&t.uint32(29)[n(720)](e.browInnerUp),0!==e[n(358)]&&t[n(350)](37)[n(720)](e[n(358)]),0!==e[n(482)]&&t[n(350)](45)[n(720)](e[n(482)]),0!==e[n(649)]&&t[n(350)](53)[n(720)](e[n(649)]),0!==e[n(654)]&&t[n(350)](61).float(e[n(654)]),0!==e.eyeBlink_L&&t[n(350)](69)[n(720)](e[n(828)]),0!==e.eyeBlink_R&&t[n(350)](77).float(e[n(601)]),0!==e[n(548)]&&t[n(350)](85)[n(720)](e[n(548)]),0!==e[n(774)]&&t[n(350)](93)[n(720)](e[n(774)]),0!==e.eyeLookIn_L&&t[n(350)](101)[n(720)](e[n(698)]),0!==e[n(545)]&&t[n(350)](109)[n(720)](e[n(545)]),0!==e.eyeLookOut_L&&t.uint32(117)[n(720)](e[n(357)]),0!==e[n(345)]&&t[n(350)](125).float(e.eyeLookOut_R),0!==e[n(242)]&&t[n(350)](133)[n(720)](e.eyeLookUp_L),0!==e.eyeLookUp_R&&t[n(350)](141)[n(720)](e.eyeLookUp_R),0!==e[n(759)]&&t.uint32(149)[n(720)](e.eyeSquint_L),0!==e[n(506)]&&t[n(350)](157)[n(720)](e[n(506)]),0!==e[n(765)]&&t[n(350)](165)[n(720)](e.eyeWide_L),0!==e[n(780)]&&t[n(350)](173).float(e[n(780)]),0!==e[n(826)]&&t[n(350)](181)[n(720)](e[n(826)]),0!==e[n(917)]&&t.uint32(189)[n(720)](e.jawOpen),0!==e.jawRight&&t[n(350)](197).float(e.jawRight),0!==e[n(333)]&&t[n(350)](205).float(e[n(333)]),0!==e[n(336)]&&t[n(350)](213)[n(720)](e[n(336)]),0!==e[n(741)]&&t[n(350)](221)[n(720)](e[n(741)]),0!==e.mouthFrown_L&&t[n(350)](229).float(e[n(291)]),0!==e[n(923)]&&t[n(350)](237).float(e[n(923)]),0!==e[n(660)]&&t[n(350)](245)[n(720)](e[n(660)]),0!==e[n(788)]&&t[n(350)](253)[n(720)](e[n(788)]),0!==e[n(237)]&&t.uint32(261)[n(720)](e.mouthLowerDown_L),0!==e[n(283)]&&t[n(350)](269)[n(720)](e[n(283)]),0!==e.mouthPress_L&&t.uint32(277)[n(720)](e.mouthPress_L),0!==e.mouthPress_R&&t[n(350)](285).float(e.mouthPress_R),0!==e.mouthPucker&&t[n(350)](293)[n(720)](e[n(714)]),0!==e[n(517)]&&t[n(350)](301)[n(720)](e.mouthRight),0!==e[n(767)]&&t[n(350)](309)[n(720)](e.mouthRollLower),0!==e.mouthRollUpper&&t[n(350)](317)[n(720)](e.mouthRollUpper),0!==e[n(461)]&&t[n(350)](325)[n(720)](e[n(461)]),0!==e.mouthShrugUpper&&t[n(350)](333)[n(720)](e[n(744)]),0!==e[n(667)]&&t[n(350)](341)[n(720)](e[n(667)]),0!==e.mouthSmile_R&&t[n(350)](349)[n(720)](e[n(276)]),0!==e[n(302)]&&t[n(350)](357).float(e.mouthStretch_L),0!==e.mouthStretch_R&&t[n(350)](365).float(e[n(831)]),0!==e[n(640)]&&t.uint32(373)[n(720)](e[n(640)]),0!==e[n(362)]&&t[n(350)](381).float(e[n(362)]),0!==e[n(619)]&&t.uint32(389)[n(720)](e.noseSneer_L),0!==e[n(597)]&&t[n(350)](397)[n(720)](e.noseSneer_R),0!==e[n(656)]&&t.uint32(405).float(e[n(656)]),0!==e[n(250)]&&t.uint32(413).float(e[n(250)]),0!==e[n(428)]&&t[n(350)](421)[n(720)](e[n(428)]),t},decode:function(e,t){for(var n=a1_0x2c401b,r=e instanceof minimal$1.exports[n(432)]?e:new(minimal$1[n(515)][n(432)])(e),a=void 0===t?r[n(253)]:r[n(346)]+t,i=createBaseBlendShapes();r[n(346)]<a;){var o=r[n(350)]();switch(o>>>3){case 1:i.browDown_L=r[n(720)]();break;case 2:i[n(254)]=r.float();break;case 3:i[n(257)]=r.float();break;case 4:i[n(358)]=r[n(720)]();break;case 5:i[n(482)]=r[n(720)]();break;case 6:i.cheekSquint_L=r[n(720)]();break;case 7:i[n(654)]=r.float();break;case 8:i.eyeBlink_L=r[n(720)]();break;case 9:i[n(601)]=r[n(720)]();break;case 10:i.eyeLookDown_L=r[n(720)]();break;case 11:i[n(774)]=r[n(720)]();break;case 12:i.eyeLookIn_L=r[n(720)]();break;case 13:i[n(545)]=r[n(720)]();break;case 14:i[n(357)]=r[n(720)]();break;case 15:i[n(345)]=r[n(720)]();break;case 16:i[n(242)]=r[n(720)]();break;case 17:i.eyeLookUp_R=r[n(720)]();break;case 18:i[n(759)]=r[n(720)]();break;case 19:i[n(506)]=r.float();break;case 20:i.eyeWide_L=r[n(720)]();break;case 21:i.eyeWide_R=r[n(720)]();break;case 22:i[n(826)]=r[n(720)]();break;case 23:i[n(917)]=r.float();break;case 24:i.jawRight=r[n(720)]();break;case 25:i[n(333)]=r[n(720)]();break;case 26:i.mouthDimple_L=r.float();break;case 27:i[n(741)]=r.float();break;case 28:i[n(291)]=r[n(720)]();break;case 29:i[n(923)]=r[n(720)]();break;case 30:i.mouthFunnel=r[n(720)]();break;case 31:i[n(788)]=r[n(720)]();break;case 32:i.mouthLowerDown_L=r[n(720)]();break;case 33:i[n(283)]=r[n(720)]();break;case 34:i[n(533)]=r[n(720)]();break;case 35:i[n(246)]=r[n(720)]();break;case 36:i[n(714)]=r.float();break;case 37:i[n(517)]=r[n(720)]();break;case 38:i[n(767)]=r.float();break;case 39:i[n(905)]=r[n(720)]();break;case 40:i[n(461)]=r.float();break;case 41:i[n(744)]=r.float();break;case 42:i[n(667)]=r[n(720)]();break;case 43:i.mouthSmile_R=r.float();break;case 44:i.mouthStretch_L=r[n(720)]();break;case 45:i[n(831)]=r[n(720)]();break;case 46:i[n(640)]=r[n(720)]();break;case 47:i[n(362)]=r[n(720)]();break;case 48:i[n(619)]=r[n(720)]();break;case 49:i[n(597)]=r[n(720)]();break;case 50:i[n(656)]=r[n(720)]();break;case 51:i.jawForward=r[n(720)]();break;case 52:i[n(428)]=r[n(720)]();break;default:r[n(657)](7&o)}}return i},fromJSON:function(e){var t=a1_0x2c401b;return{browDown_L:isSet(e[t(713)])?Number(e[t(713)]):0,browDown_R:isSet(e[t(254)])?Number(e[t(254)]):0,browInnerUp:isSet(e.browInnerUp)?Number(e[t(257)]):0,browOuterUp_L:isSet(e[t(358)])?Number(e[t(358)]):0,browOuterUp_R:isSet(e[t(482)])?Number(e[t(482)]):0,cheekSquint_L:isSet(e[t(649)])?Number(e[t(649)]):0,cheekSquint_R:isSet(e[t(654)])?Number(e[t(654)]):0,eyeBlink_L:isSet(e[t(828)])?Number(e[t(828)]):0,eyeBlink_R:isSet(e.eyeBlink_R)?Number(e[t(601)]):0,eyeLookDown_L:isSet(e[t(548)])?Number(e.eyeLookDown_L):0,eyeLookDown_R:isSet(e[t(774)])?Number(e[t(774)]):0,eyeLookIn_L:isSet(e[t(698)])?Number(e.eyeLookIn_L):0,eyeLookIn_R:isSet(e[t(545)])?Number(e.eyeLookIn_R):0,eyeLookOut_L:isSet(e[t(357)])?Number(e[t(357)]):0,eyeLookOut_R:isSet(e[t(345)])?Number(e[t(345)]):0,eyeLookUp_L:isSet(e.eyeLookUp_L)?Number(e.eyeLookUp_L):0,eyeLookUp_R:isSet(e[t(907)])?Number(e.eyeLookUp_R):0,eyeSquint_L:isSet(e[t(759)])?Number(e[t(759)]):0,eyeSquint_R:isSet(e[t(506)])?Number(e.eyeSquint_R):0,eyeWide_L:isSet(e[t(765)])?Number(e.eyeWide_L):0,eyeWide_R:isSet(e[t(780)])?Number(e[t(780)]):0,jawLeft:isSet(e[t(826)])?Number(e[t(826)]):0,jawOpen:isSet(e[t(917)])?Number(e[t(917)]):0,jawRight:isSet(e[t(330)])?Number(e[t(330)]):0,mouthClose:isSet(e[t(333)])?Number(e[t(333)]):0,mouthDimple_L:isSet(e[t(336)])?Number(e[t(336)]):0,mouthDimple_R:isSet(e[t(741)])?Number(e[t(741)]):0,mouthFrown_L:isSet(e[t(291)])?Number(e[t(291)]):0,mouthFrown_R:isSet(e.mouthFrown_R)?Number(e[t(923)]):0,mouthFunnel:isSet(e[t(660)])?Number(e.mouthFunnel):0,mouthLeft:isSet(e.mouthLeft)?Number(e[t(788)]):0,mouthLowerDown_L:isSet(e[t(237)])?Number(e[t(237)]):0,mouthLowerDown_R:isSet(e[t(283)])?Number(e[t(283)]):0,mouthPress_L:isSet(e[t(533)])?Number(e.mouthPress_L):0,mouthPress_R:isSet(e[t(246)])?Number(e[t(246)]):0,mouthPucker:isSet(e[t(714)])?Number(e.mouthPucker):0,mouthRight:isSet(e[t(517)])?Number(e[t(517)]):0,mouthRollLower:isSet(e[t(767)])?Number(e.mouthRollLower):0,mouthRollUpper:isSet(e[t(905)])?Number(e[t(905)]):0,mouthShrugLower:isSet(e[t(461)])?Number(e[t(461)]):0,mouthShrugUpper:isSet(e.mouthShrugUpper)?Number(e[t(744)]):0,mouthSmile_L:isSet(e.mouthSmile_L)?Number(e[t(667)]):0,mouthSmile_R:isSet(e[t(276)])?Number(e.mouthSmile_R):0,mouthStretch_L:isSet(e[t(302)])?Number(e[t(302)]):0,mouthStretch_R:isSet(e[t(831)])?Number(e[t(831)]):0,mouthUpperUp_L:isSet(e[t(640)])?Number(e[t(640)]):0,mouthUpperUp_R:isSet(e[t(362)])?Number(e[t(362)]):0,noseSneer_L:isSet(e[t(619)])?Number(e[t(619)]):0,noseSneer_R:isSet(e[t(597)])?Number(e.noseSneer_R):0,cheekPuff:isSet(e[t(656)])?Number(e[t(656)]):0,jawForward:isSet(e[t(250)])?Number(e.jawForward):0,tongueOut:isSet(e[t(428)])?Number(e[t(428)]):0}},toJSON:function(e){var t=a1_0x2c401b,n={};return void 0!==e.browDown_L&&(n.browDown_L=e[t(713)]),void 0!==e[t(254)]&&(n.browDown_R=e[t(254)]),void 0!==e[t(257)]&&(n[t(257)]=e[t(257)]),void 0!==e[t(358)]&&(n[t(358)]=e[t(358)]),void 0!==e[t(482)]&&(n.browOuterUp_R=e[t(482)]),void 0!==e[t(649)]&&(n.cheekSquint_L=e[t(649)]),void 0!==e[t(654)]&&(n[t(654)]=e.cheekSquint_R),void 0!==e.eyeBlink_L&&(n[t(828)]=e[t(828)]),void 0!==e[t(601)]&&(n[t(601)]=e.eyeBlink_R),void 0!==e[t(548)]&&(n.eyeLookDown_L=e.eyeLookDown_L),void 0!==e[t(774)]&&(n[t(774)]=e[t(774)]),void 0!==e.eyeLookIn_L&&(n[t(698)]=e[t(698)]),void 0!==e[t(545)]&&(n[t(545)]=e[t(545)]),void 0!==e[t(357)]&&(n[t(357)]=e[t(357)]),void 0!==e[t(345)]&&(n[t(345)]=e[t(345)]),void 0!==e.eyeLookUp_L&&(n[t(242)]=e.eyeLookUp_L),void 0!==e[t(907)]&&(n[t(907)]=e[t(907)]),void 0!==e[t(759)]&&(n[t(759)]=e[t(759)]),void 0!==e.eyeSquint_R&&(n[t(506)]=e[t(506)]),void 0!==e[t(765)]&&(n[t(765)]=e.eyeWide_L),void 0!==e.eyeWide_R&&(n[t(780)]=e[t(780)]),void 0!==e[t(826)]&&(n[t(826)]=e[t(826)]),void 0!==e[t(917)]&&(n.jawOpen=e.jawOpen),void 0!==e.jawRight&&(n[t(330)]=e[t(330)]),void 0!==e[t(333)]&&(n.mouthClose=e.mouthClose),void 0!==e[t(336)]&&(n[t(336)]=e[t(336)]),void 0!==e[t(741)]&&(n[t(741)]=e[t(741)]),void 0!==e[t(291)]&&(n[t(291)]=e[t(291)]),void 0!==e.mouthFrown_R&&(n[t(923)]=e[t(923)]),void 0!==e[t(660)]&&(n[t(660)]=e[t(660)]),void 0!==e[t(788)]&&(n[t(788)]=e[t(788)]),void 0!==e[t(237)]&&(n[t(237)]=e[t(237)]),void 0!==e[t(283)]&&(n[t(283)]=e.mouthLowerDown_R),void 0!==e.mouthPress_L&&(n[t(533)]=e[t(533)]),void 0!==e[t(246)]&&(n[t(246)]=e[t(246)]),void 0!==e[t(714)]&&(n[t(714)]=e.mouthPucker),void 0!==e[t(517)]&&(n[t(517)]=e.mouthRight),void 0!==e.mouthRollLower&&(n.mouthRollLower=e.mouthRollLower),void 0!==e[t(905)]&&(n[t(905)]=e[t(905)]),void 0!==e.mouthShrugLower&&(n[t(461)]=e[t(461)]),void 0!==e[t(744)]&&(n[t(744)]=e.mouthShrugUpper),void 0!==e[t(667)]&&(n[t(667)]=e.mouthSmile_L),void 0!==e[t(276)]&&(n[t(276)]=e[t(276)]),void 0!==e.mouthStretch_L&&(n[t(302)]=e[t(302)]),void 0!==e[t(831)]&&(n[t(831)]=e[t(831)]),void 0!==e.mouthUpperUp_L&&(n[t(640)]=e[t(640)]),void 0!==e.mouthUpperUp_R&&(n[t(362)]=e[t(362)]),void 0!==e[t(619)]&&(n[t(619)]=e[t(619)]),void 0!==e[t(597)]&&(n[t(597)]=e[t(597)]),void 0!==e.cheekPuff&&(n[t(656)]=e.cheekPuff),void 0!==e[t(250)]&&(n[t(250)]=e.jawForward),void 0!==e[t(428)]&&(n[t(428)]=e.tongueOut),n},fromPartial:function(e){var t,n,r,a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w,k,C,S,T,E,A,M,I,N,R,D,O,L,F,P,z,B,U,V,W,G,H,j,q,K,X,Z,Y,J,$,Q=a1_0x2c401b,ee=createBaseBlendShapes();return ee[Q(713)]=null!==(t=e[Q(713)])&&void 0!==t?t:0,ee[Q(254)]=null!==(n=e[Q(254)])&&void 0!==n?n:0,ee[Q(257)]=null!==(r=e.browInnerUp)&&void 0!==r?r:0,ee[Q(358)]=null!==(a=e[Q(358)])&&void 0!==a?a:0,ee[Q(482)]=null!==(i=e[Q(482)])&&void 0!==i?i:0,ee[Q(649)]=null!==(o=e[Q(649)])&&void 0!==o?o:0,ee[Q(654)]=null!==(s=e.cheekSquint_R)&&void 0!==s?s:0,ee[Q(828)]=null!==(u=e.eyeBlink_L)&&void 0!==u?u:0,ee[Q(601)]=null!==(c=e[Q(601)])&&void 0!==c?c:0,ee[Q(548)]=null!==(l=e[Q(548)])&&void 0!==l?l:0,ee.eyeLookDown_R=null!==(h=e[Q(774)])&&void 0!==h?h:0,ee.eyeLookIn_L=null!==(f=e[Q(698)])&&void 0!==f?f:0,ee[Q(545)]=null!==(d=e[Q(545)])&&void 0!==d?d:0,ee[Q(357)]=null!==(p=e[Q(357)])&&void 0!==p?p:0,ee[Q(345)]=null!==(m=e[Q(345)])&&void 0!==m?m:0,ee.eyeLookUp_L=null!==(v=e[Q(242)])&&void 0!==v?v:0,ee[Q(907)]=null!==(g=e[Q(907)])&&void 0!==g?g:0,ee[Q(759)]=null!==(y=e[Q(759)])&&void 0!==y?y:0,ee[Q(506)]=null!==(_=e[Q(506)])&&void 0!==_?_:0,ee[Q(765)]=null!==(b=e[Q(765)])&&void 0!==b?b:0,ee[Q(780)]=null!==(x=e.eyeWide_R)&&void 0!==x?x:0,ee[Q(826)]=null!==(w=e[Q(826)])&&void 0!==w?w:0,ee.jawOpen=null!==(k=e.jawOpen)&&void 0!==k?k:0,ee[Q(330)]=null!==(C=e.jawRight)&&void 0!==C?C:0,ee.mouthClose=null!==(S=e[Q(333)])&&void 0!==S?S:0,ee[Q(336)]=null!==(T=e[Q(336)])&&void 0!==T?T:0,ee.mouthDimple_R=null!==(E=e[Q(741)])&&void 0!==E?E:0,ee.mouthFrown_L=null!==(A=e.mouthFrown_L)&&void 0!==A?A:0,ee[Q(923)]=null!==(M=e[Q(923)])&&void 0!==M?M:0,ee[Q(660)]=null!==(I=e[Q(660)])&&void 0!==I?I:0,ee[Q(788)]=null!==(N=e[Q(788)])&&void 0!==N?N:0,ee[Q(237)]=null!==(R=e[Q(237)])&&void 0!==R?R:0,ee.mouthLowerDown_R=null!==(D=e[Q(283)])&&void 0!==D?D:0,ee.mouthPress_L=null!==(O=e[Q(533)])&&void 0!==O?O:0,ee[Q(246)]=null!==(L=e[Q(246)])&&void 0!==L?L:0,ee[Q(714)]=null!==(F=e[Q(714)])&&void 0!==F?F:0,ee.mouthRight=null!==(P=e[Q(517)])&&void 0!==P?P:0,ee.mouthRollLower=null!==(z=e[Q(767)])&&void 0!==z?z:0,ee.mouthRollUpper=null!==(B=e[Q(905)])&&void 0!==B?B:0,ee[Q(461)]=null!==(U=e.mouthShrugLower)&&void 0!==U?U:0,ee.mouthShrugUpper=null!==(V=e.mouthShrugUpper)&&void 0!==V?V:0,ee.mouthSmile_L=null!==(W=e.mouthSmile_L)&&void 0!==W?W:0,ee[Q(276)]=null!==(G=e[Q(276)])&&void 0!==G?G:0,ee[Q(302)]=null!==(H=e[Q(302)])&&void 0!==H?H:0,ee[Q(831)]=null!==(j=e[Q(831)])&&void 0!==j?j:0,ee[Q(640)]=null!==(q=e.mouthUpperUp_L)&&void 0!==q?q:0,ee[Q(362)]=null!==(K=e[Q(362)])&&void 0!==K?K:0,ee[Q(619)]=null!==(X=e.noseSneer_L)&&void 0!==X?X:0,ee[Q(597)]=null!==(Z=e[Q(597)])&&void 0!==Z?Z:0,ee[Q(656)]=null!==(Y=e.cheekPuff)&&void 0!==Y?Y:0,ee[Q(250)]=null!==(J=e[Q(250)])&&void 0!==J?J:0,ee[Q(428)]=null!==($=e[Q(428)])&&void 0!==$?$:0,ee}};function createBaseRotation(){return{pitch:void 0,roll:void 0,yaw:void 0}}var Rotation={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:minimal$1[a1_0x2c401b(515)].Writer[a1_0x2c401b(644)](),n=a1_0x2c401b;return void 0!==e[n(547)]&&t.uint32(13).float(e[n(547)]),void 0!==e.roll&&t[n(350)](21).float(e[n(921)]),void 0!==e[n(288)]&&t[n(350)](29)[n(720)](e[n(288)]),t},decode:function(e,t){for(var n=a1_0x2c401b,r=e instanceof minimal$1.exports.Reader?e:new(minimal$1[n(515)][n(432)])(e),a=void 0===t?r[n(253)]:r[n(346)]+t,i=createBaseRotation();r[n(346)]<a;){var o=r[n(350)]();switch(o>>>3){case 1:i[n(547)]=r[n(720)]();break;case 2:i[n(921)]=r[n(720)]();break;case 3:i.yaw=r.float();break;default:r.skipType(7&o)}}return i},fromJSON:function(e){var t=a1_0x2c401b;return{pitch:isSet(e.pitch)?Number(e.pitch):void 0,roll:isSet(e[t(921)])?Number(e[t(921)]):void 0,yaw:isSet(e[t(288)])?Number(e[t(288)]):void 0}},toJSON:function(e){var t=a1_0x2c401b,n={};return void 0!==e[t(547)]&&(n[t(547)]=e[t(547)]),void 0!==e[t(921)]&&(n.roll=e[t(921)]),void 0!==e[t(288)]&&(n[t(288)]=e[t(288)]),n},fromPartial:function(e){var t,n,r,a=a1_0x2c401b,i=createBaseRotation();return i.pitch=null!==(t=e[a(547)])&&void 0!==t?t:void 0,i[a(921)]=null!==(n=e[a(921)])&&void 0!==n?n:void 0,i[a(288)]=null!==(r=e[a(288)])&&void 0!==r?r:void 0,i}};function createBaseTransform(){return{x:void 0,y:void 0,z:void 0}}var Transform={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:minimal$1[a1_0x2c401b(515)].Writer.create(),n=a1_0x2c401b;return void 0!==e.x&&t[n(350)](13)[n(720)](e.x),void 0!==e.y&&t[n(350)](21)[n(720)](e.y),void 0!==e.z&&t[n(350)](29)[n(720)](e.z),t},decode:function(e,t){for(var n=a1_0x2c401b,r=e instanceof minimal$1[n(515)][n(432)]?e:new(minimal$1.exports[n(432)])(e),a=void 0===t?r.len:r[n(346)]+t,i=createBaseTransform();r[n(346)]<a;){var o=r[n(350)]();switch(o>>>3){case 1:i.x=r[n(720)]();break;case 2:i.y=r.float();break;case 3:i.z=r[n(720)]();break;default:r.skipType(7&o)}}return i},fromJSON:function(e){return{x:isSet(e.x)?Number(e.x):void 0,y:isSet(e.y)?Number(e.y):void 0,z:isSet(e.z)?Number(e.z):void 0}},toJSON:function(e){var t={};return void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.z&&(t.z=e.z),t},fromPartial:function(e){var t,n,r,a=createBaseTransform();return a.x=null!==(t=e.x)&&void 0!==t?t:void 0,a.y=null!==(n=e.y)&&void 0!==n?n:void 0,a.z=null!==(r=e.z)&&void 0!==r?r:void 0,a}};function isSet(e){return null!=e}minimal$1[a1_0x2c401b(515)][a1_0x2c401b(850)][a1_0x2c401b(278)]!==_long&&(minimal$1[a1_0x2c401b(515)][a1_0x2c401b(850)].Long=_long,minimal$1[a1_0x2c401b(515)].configure());var AvatarPredictionCoder=function(e,t){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:e,value:function(e){var t=a1_0x2c401b;return AvatarPredictionMessage[t(819)](e)[t(457)]()}},{key:t,value:function(e){return AvatarPredictionMessage[a1_0x2c401b(672)](e)}}]),n}(a1_0x2c401b(819),a1_0x2c401b(672))},"B+jg":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},CgaS:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("MLWZ"),i=n("9rSQ"),o=n("UnBK"),s=n("SntB"),u=n("hIuj"),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=s(this.defaults,t)).method=t.method?t.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!a){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),i=Promise.resolve(t);h.length;)i=i.then(h.shift(),h.shift());return i}for(var f=t;r.length;){var d=r.shift(),p=r.shift();try{f=d(f)}catch(m){p(m);break}}try{i=o(f)}catch(m){return Promise.reject(m)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},D9hF:function(e,t,n){"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,"a",(function(){return r}))},DfZB:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},EJp0:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},EhIR:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},HSsa:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},HoZ9:function(e,t,n){"use strict";function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,"a",(function(){return r}))},HzFN:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},I05N:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},Ivzd:function(e,t,n){"use strict";var r=n("meep"),a=n("HoZ9"),i=Object(a.a)((function(e){return function(t){e(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t}})),o=n("D9hF");n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var s,u=function(){function e(t){_classCallCheck(this,e),this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return _createClass(e,[{key:"unsubscribe",value:function(){var e;if(!this.closed){this.closed=!0;var t=this._parentage;if(Array.isArray(t)){var n,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){n.value.remove(this)}}catch(f){a.e(f)}finally{a.f()}}else null==t||t.remove(this);var o=this.initialTeardown;if(Object(r.a)(o))try{o()}catch(d){e=d instanceof i?d.errors:[d]}var s=this._teardowns;if(s){this._teardowns=null;var u,c=_createForOfIteratorHelper(s);try{for(c.s();!(u=c.n()).done;){var l=u.value;try{h(l)}catch(f){e=null!=e?e:[],f instanceof i?e=[].concat(_toConsumableArray(e),_toConsumableArray(f.errors)):e.push(f)}}}catch(f){c.e(f)}finally{c.f()}}if(e)throw new i(e)}}},{key:"add",value:function(t){var n;if(t&&t!==this)if(this.closed)h(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}}},{key:"_hasParent",value:function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)}},{key:"_addParent",value:function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}},{key:"_removeParent",value:function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Object(o.a)(t,e)}},{key:"remove",value:function(t){var n=this._teardowns;n&&Object(o.a)(n,t),t instanceof e&&t._removeParent(this)}}]),e}();u.EMPTY=((s=new u).closed=!0,s);var c=u.EMPTY;function l(e){return e instanceof u||e&&"closed"in e&&Object(r.a)(e.remove)&&Object(r.a)(e.add)&&Object(r.a)(e.unsubscribe)}function h(e){Object(r.a)(e)?e():e.unsubscribe()}},JEQr:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("yK9s"),i=n("OH9c"),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?u=n("tQ2B"):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(u=n("tQ2B")),u),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=!(t&&t.silentJSONParsing)&&"json"===this.responseType;if(n||t&&t.forcedJSONParsing&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(n){if("SyntaxError"===a.name)throw i(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c},JNaD:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},LJTJ:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},LYNF:function(e,t,n){"use strict";var r=n("OH9c");e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},Lmem:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},MLWZ:function(e,t,n){"use strict";var r=n("xTJ+");function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},OH9c:function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},OTTw:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PkQR:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},QSgb:function(e,t,n){var r;!function(a){"use strict";var i,o,s,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",l="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},f=!0,d="[DecimalError] Invalid argument: ",p="[object Decimal]",m=Math.floor,v=Math.pow,g=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=c.length-1,w=l.length-1,k={toStringTag:p};function C(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(i+=L(n)),i+=r;(n=7-(r=(o=e[t])+"").length)&&(i+=L(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return i+o}function S(e,t,n){if(e!==~~e||e<t||e>n)throw Error(d+e)}function T(e,t,n,r){var a,i,o,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=7,a=0):(a=Math.ceil((t+1)/7),t%=7),i=v(10,7-t),s=e[a]%i|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[a+1]/i/100|0)==v(10,t-2)-1||(s==i/2||0==s)&&0==(e[a+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==i||!r&&n>3&&s+1==i/2)&&(e[a+1]/i/1e3|0)==v(10,t-3)-1,o}function E(e,t,n){for(var r,a,i=[0],o=0,s=e.length;o<s;){for(a=i.length;a--;)i[a]*=t;for(i[0]+=u.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),M(e)},k.ceil=function(){return M(new this.constructor(this),this.e+1,2)},k.clampedTo=k.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(d+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},k.comparedTo=k.cmp=function(e){var t,n,r,a,i=this,o=i.d,s=(e=new i.constructor(e)).d,u=i.s,c=e.s;if(!o||!s)return u&&c?u!==c?u:o===s?0:!o^u<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?u:s[0]?-c:0;if(u!==c)return u;if(i.e!==e.e)return i.e>e.e^u<0?1:-1;for(t=0,n=(r=o.length)<(a=s.length)?r:a;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^u<0?1:-1;return r===a?0:r>a^u<0?1:-1},k.cosine=k.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,a;if(t.isZero())return t;(r=t.d.length)<32?a=(1/j(4,n=Math.ceil(r/3))).toString():(n=16,a="2.3283064365386962890625e-10"),e.precision+=n,t=H(e,1,t.times(a),new e(1));for(var i=n;i--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,q(r,n)),r.precision=e,r.rounding=t,M(2==s||3==s?n.neg():n,e,t,!0)):new r(1):new r(NaN)},k.cubeRoot=k.cbrt=function(){var e,t,n,r,a,i,o,s,u,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(f=!1,(i=l.s*v(l.s*l,1/3))&&Math.abs(i)!=1/0?r=new h(i.toString()):(n=C(l.d),(i=((e=l.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=v(n,1/3),e=m((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),o=(e=h.precision)+3;;)if(c=(u=(s=r).times(s).times(s)).plus(l),r=A(c.plus(l).times(s),c.plus(u),o+2,1),C(s.d).slice(0,o)===(n=C(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(a||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(M(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!a&&(M(s,e+1,0),s.times(s).times(s).eq(l))){r=s;break}o+=4,a=1}return f=!0,M(r,e,h.rounding,t)},k.decimalPlaces=k.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-m(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},k.dividedBy=k.div=function(e){return A(this,new this.constructor(e))},k.dividedToIntegerBy=k.divToInt=function(e){var t=this.constructor;return M(A(this,new t(e),0,1,1),t.precision,t.rounding)},k.equals=k.eq=function(e){return 0===this.cmp(e)},k.floor=function(){return M(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(e){return this.cmp(e)>0},k.greaterThanOrEqualTo=k.gte=function(e){var t=this.cmp(e);return 1==t||0===t},k.hyperbolicCosine=k.cosh=function(){var e,t,n,r,a,i=this,o=i.constructor,s=new o(1);if(!i.isFinite())return new o(i.s?1/0:NaN);if(i.isZero())return s;r=o.rounding,o.precision=(n=o.precision)+Math.max(i.e,i.sd())+4,o.rounding=1,(a=i.d.length)<32?t=(1/j(4,e=Math.ceil(a/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=H(o,1,i.times(t),new o(1),!0);for(var u,c=e,l=new o(8);c--;)u=i.times(i),i=s.minus(u.times(l.minus(u.times(l))));return M(i,o.precision=n,o.rounding=r,!0)},k.hyperbolicSine=k.sinh=function(){var e,t,n,r,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(n=i.rounding,i.precision=(t=i.precision)+Math.max(a.e,a.sd())+4,i.rounding=1,(r=a.d.length)<3)a=H(i,2,a,a,!0);else{e=1.4*Math.sqrt(r),a=H(i,2,a=a.times(1/j(5,e=e>16?16:0|e)),a,!0);for(var o,s=new i(5),u=new i(16),c=new i(20);e--;)o=a.times(a),a=a.times(s.plus(o.times(u.times(o).plus(c))))}return i.precision=t,i.rounding=n,M(a,t,n,!0)},k.hyperbolicTangent=k.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+7,r.rounding=1,A(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},k.inverseCosine=k.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),a=n.precision,i=n.rounding;return-1!==r?0===r?t.isNeg()?D(n,a,i):new n(0):new n(NaN):t.isZero()?D(n,a+4,i).times(.5):(n.precision=a+6,n.rounding=1,t=t.asin(),e=D(n,a+4,i).times(.5),n.precision=a,n.rounding=i,e.minus(t))},k.inverseHyperbolicCosine=k.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.rounding,r.precision=(e=r.precision)+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},k.inverseHyperbolicSine=k.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var e,t,n,r,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(e=i.precision,t=i.rounding,r=a.sd(),Math.max(r,e)<2*-a.e-1?M(new i(a),e,t,!0):(i.precision=n=r-a.e,a=A(a.plus(1),new i(1).minus(a),n+e,1),i.precision=e+4,i.rounding=1,a=a.ln(),i.precision=e,i.rounding=t,a.times(.5))):new i(NaN)},k.inverseSine=k.asin=function(){var e,t,n,r,a=this,i=a.constructor;return a.isZero()?new i(a):(t=a.abs().cmp(1),n=i.precision,r=i.rounding,-1!==t?0===t?((e=D(i,n+4,r).times(.5)).s=a.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,a.times(2)))},k.inverseTangent=k.atan=function(){var e,t,n,r,a,i,o,s,u,c=this,l=c.constructor,h=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=w)return(o=D(l,h+4,d).times(.25)).s=c.s,o}else{if(!c.s)return new l(NaN);if(h+4<=w)return(o=D(l,h+4,d).times(.5)).s=c.s,o}for(l.precision=s=h+10,l.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(s/7),r=1,u=c.times(c),o=new l(c),a=c;-1!==e;)if(a=a.times(u),i=o.minus(a.div(r+=2)),a=a.times(u),void 0!==(o=i.plus(a.div(r+=2))).d[t])for(e=t;o.d[e]===i.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),f=!0,M(o,l.precision=h,l.rounding=d,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&m(this.e/7)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(e){return this.cmp(e)<0},k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1},k.logarithm=k.log=function(e){var t,n,r,a,i,o,s,u,c=this.constructor,l=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(a=n[0];a%10==0;)a/=10;i=1!==a}if(f=!1,o=U(this,s=l+5),r=t?R(c,s+10):U(e,s),T((u=A(o,r,s,1)).d,a=l,h))do{if(o=U(this,s+=10),r=t?R(c,s+10):U(e,s),u=A(o,r,s,1),!i){+C(u.d).slice(a+1,a+15)+1==1e14&&(u=M(u,l+1,0));break}}while(T(u.d,a+=10,h));return f=!0,M(u,l,h)},k.minus=k.sub=function(e){var t,n,r,a,i,o,s,u,c,l,h,d,p=this,v=p.constructor;if(e=new v(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new v(e.d||p.s!==e.s?p:NaN):e=new v(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(d=e.d,s=v.precision,u=v.rounding,!(c=p.d)[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new v(3===u?-0:0);e=new v(p)}return f?M(e,s,u):e}if(n=m(e.e/7),l=m(p.e/7),c=c.slice(),i=l-n){for((h=i<0)?(t=c,i=-i,o=d.length):(t=d,n=l,o=c.length),i>(r=Math.max(Math.ceil(s/7),o)+2)&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for((h=(r=c.length)<(o=d.length))&&(o=r),r=0;r<o;r++)if(c[r]!=d[r]){h=c[r]<d[r];break}i=0}for(h&&(t=c,c=d,d=t,e.s=-e.s),r=d.length-(o=c.length);r>0;--r)c[o++]=0;for(r=d.length;r>i;){if(c[--r]<d[r]){for(a=r;a&&0===c[--a];)c[a]=1e7-1;--c[a],c[r]+=1e7}c[r]-=d[r]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=N(c,n),f?M(e,s,u):e):new v(3===u?-0:0)},k.modulo=k.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?M(new r(n),r.precision,r.rounding):(f=!1,9==r.modulo?(t=A(n,e.abs(),0,3,1)).s*=e.s:t=A(n,e,0,r.modulo,1),t=t.times(e),f=!0,n.minus(t))},k.naturalExponential=k.exp=function(){return B(this)},k.naturalLogarithm=k.ln=function(){return U(this)},k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,M(e)},k.plus=k.add=function(e){var t,n,r,a,i,o,s,u,c,l,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(l=e.d,s=d.precision,u=d.rounding,!(c=h.d)[0]||!l[0])return l[0]||(e=new d(h)),f?M(e,s,u):e;if(i=m(h.e/7),r=m(e.e/7),c=c.slice(),a=i-r){for(a<0?(n=c,a=-a,o=l.length):(n=l,r=i,o=c.length),a>(o=(i=Math.ceil(s/7))>o?i+1:o+1)&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((o=c.length)-(a=l.length)<0&&(a=o,n=l,l=c,c=n),t=0;a;)t=(c[--a]=c[a]+l[a]+t)/1e7|0,c[a]%=1e7;for(t&&(c.unshift(t),++r),o=c.length;0==c[--o];)c.pop();return e.d=c,e.e=N(c,r),f?M(e,s,u):e},k.precision=k.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(d+e);return n.d?(t=O(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},k.round=function(){var e=this,t=e.constructor;return M(new t(e),e.e+1,t.rounding)},k.sine=k.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:H(e,2,t,t);n=1.4*Math.sqrt(r),t=H(e,2,t=t.times(1/j(5,n=n>16?16:0|n)),t);for(var a,i=new e(5),o=new e(16),s=new e(20);n--;)a=t.times(t),t=t.times(i.plus(a.times(o.times(a).minus(s))));return t}(r,q(r,n)),r.precision=e,r.rounding=t,M(s>2?n.neg():n,e,t,!0)):new r(NaN)},k.squareRoot=k.sqrt=function(){var e,t,n,r,a,i,o=this,s=o.d,u=o.e,c=o.s,l=o.constructor;if(1!==c||!s||!s[0])return new l(!c||c<0&&(!s||s[0])?NaN:s?o:1/0);for(f=!1,0==(c=Math.sqrt(+o))||c==1/0?(((t=C(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=m((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;)if(r=(i=r).plus(A(o,i,n+2,1)).times(.5),C(i.d).slice(0,n)===(t=C(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(M(r,u+1,1),e=!r.times(r).eq(o));break}if(!a&&(M(i,u+1,0),i.times(i).eq(o))){r=i;break}n+=4,a=1}return f=!0,M(r,u,l.rounding,e)},k.tangent=k.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+10,r.rounding=1,(n=n.sin()).s=1,n=A(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,M(2==s||4==s?n.neg():n,e,t,!0)):new r(NaN)},k.times=k.mul=function(e){var t,n,r,a,i,o,s,u,c,l=this,h=l.constructor,d=l.d,p=(e=new h(e)).d;if(e.s*=l.s,!(d&&d[0]&&p&&p[0]))return new h(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:d&&p?0*e.s:e.s/0);for(n=m(l.e/7)+m(e.e/7),(u=d.length)<(c=p.length)&&(i=d,d=p,p=i,o=u,u=c,c=o),i=[],r=o=u+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,a=u+r;a>r;)s=i[a]+p[r]*d[a-r-1]+t,i[a--]=s%1e7|0,t=s/1e7|0;i[a]=(i[a]+t)%1e7|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=N(i,n),f?M(e,h.precision,h.rounding):e},k.toBinary=function(e,t){return K(this,2,e,t)},k.toDecimalPlaces=k.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(S(e,0,1e9),void 0===t?t=r.rounding:S(t,0,8),M(n,e+n.e+1,t))},k.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=I(r,!0):(S(e,0,1e9),void 0===t?t=a.rounding:S(t,0,8),n=I(r=M(new a(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?n=I(a):(S(e,0,1e9),void 0===t?t=i.rounding:S(t,0,8),n=I(r=M(new i(a),e+a.e+1,t),!1,e+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n},k.toFraction=function(e){var t,n,r,a,i,o,s,u,c,l,h,p,m=this,g=m.d,y=m.constructor;if(!g)return new y(m);if(c=n=new y(1),r=u=new y(0),i=(t=new y(r)).e=O(g)-m.e-1,t.d[0]=v(10,(o=i%7)<0?7+o:o),null==e)e=i>0?t:c;else{if(!(s=new y(e)).isInt()||s.lt(c))throw Error(d+s);e=s.gt(t)?i>0?t:c:s}for(f=!1,s=new y(C(g)),l=y.precision,y.precision=i=7*g.length*2;h=A(s,t,0,1,1),1!=(a=n.plus(h.times(r))).cmp(e);)n=r,r=a,c=u.plus(h.times(a=c)),u=a,t=s.minus(h.times(a=t)),s=a;return a=A(e.minus(n),r,0,1,1),u=u.plus(a.times(c)),n=n.plus(a.times(r)),u.s=c.s=m.s,p=A(c,r,i,1).minus(m).abs().cmp(A(u,n,i,1).minus(m).abs())<1?[c,r]:[u,n],y.precision=l,f=!0,p},k.toHexadecimal=k.toHex=function(e,t){return K(this,16,e,t)},k.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:S(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(f=!1,n=A(n,e,0,t,1).times(e),f=!0,M(n)):(e.s=n.s,n=e),n},k.toNumber=function(){return+this},k.toOctal=function(e,t){return K(this,8,e,t)},k.toPower=k.pow=function(e){var t,n,r,a,i,o,s=this,u=s.constructor,c=+(e=new u(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new u(v(+s,c));if((s=new u(s)).eq(1))return s;if(r=u.precision,i=u.rounding,e.eq(1))return M(s,r,i);if((t=m(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return a=F(u,s,n,r),e.s<0?new u(1).div(a):M(a,r,i);if((o=s.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=v(+s,c))&&isFinite(n)?new u(n+"").e:m(c*(Math.log("0."+C(s.d))/Math.LN10+s.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(f=!1,u.rounding=s.s=1,n=Math.min(12,(t+"").length),(a=B(e.times(U(s,r+n)),r)).d&&T((a=M(a,r+5,1)).d,r,i)&&+C((a=M(B(e.times(U(s,(t=r+10)+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(a=M(a,r+1,0)),a.s=o,f=!0,u.rounding=i,M(a,r,i))},k.toPrecision=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=I(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(S(e,1,1e9),void 0===t?t=a.rounding:S(t,0,8),n=I(r=M(new a(r),e,t),e<=r.e||r.e<=a.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toSignificantDigits=k.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(S(e,1,1e9),void 0===t?t=n.rounding:S(t,0,8)),M(new n(this),e,t)},k.toString=function(){var e=this,t=e.constructor,n=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},k.truncated=k.trunc=function(){return M(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var e=this,t=e.constructor,n=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var A=function(){function e(e,t,n){var r,a=0,i=e.length;for(e=e.slice();i--;)e[i]=(r=e[i]*t+a)%n|0,a=r/n|0;return a&&e.unshift(a),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;a<n;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function n(e,t,n,r){for(var a=0;n--;)e[n]-=a,e[n]=(a=e[n]<t[n]?1:0)*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,i,s,u,c){var l,h,f,d,p,v,g,y,_,b,x,w,k,C,S,T,E,A,I,N,R=r.constructor,D=r.s==a.s?1:-1,O=r.d,L=a.d;if(!(O&&O[0]&&L&&L[0]))return new R(r.s&&a.s&&(O?!L||O[0]!=L[0]:L)?O&&0==O[0]||!L?0*D:D/0:NaN);for(c?(p=1,h=r.e-a.e):(c=1e7,h=m(r.e/(p=7))-m(a.e/p)),I=L.length,E=O.length,b=(_=new R(D)).d=[],f=0;L[f]==(O[f]||0);f++);if(L[f]>(O[f]||0)&&h--,null==i?(C=i=R.precision,s=R.rounding):C=u?i+(r.e-a.e)+1:i,C<0)b.push(1),v=!0;else{if(C=C/p+2|0,f=0,1==I){for(d=0,L=L[0],C++;(f<E||d)&&C--;f++)b[f]=(S=d*c+(O[f]||0))/L|0,d=S%L|0;v=d||f<E}else{for((d=c/(L[0]+1)|0)>1&&(L=e(L,d,c),O=e(O,d,c),I=L.length,E=O.length),T=I,w=(x=O.slice(0,I)).length;w<I;)x[w++]=0;(N=L.slice()).unshift(0),A=L[0],L[1]>=c/2&&++A;do{d=0,(l=t(L,x,I,w))<0?(k=x[0],I!=w&&(k=k*c+(x[1]||0)),(d=k/A|0)>1?(d>=c&&(d=c-1),1==(l=t(g=e(L,d,c),x,y=g.length,w=x.length))&&(d--,n(g,I<y?N:L,y,c))):(0==d&&(l=d=1),g=L.slice()),(y=g.length)<w&&g.unshift(0),n(x,g,w,c),-1==l&&(l=t(L,x,I,w=x.length))<1&&(d++,n(x,I<w?N:L,w,c)),w=x.length):0===l&&(d++,x=[0]),b[f++]=d,l&&x[0]?x[w++]=O[T]||0:(x=[O[T]],w=1)}while((T++<E||void 0!==x[0])&&C--);v=void 0!==x[0]}b[0]||b.shift()}if(1==p)_.e=h,o=v;else{for(f=1,d=b[0];d>=10;d/=10)f++;_.e=f+h*p-1,M(_,u?i+_.e+1:i,s,v)}return _}}();function M(e,t,n,r){var a,i,o,s,u,c,l,h,d,p=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(a=1,s=h[0];s>=10;s/=10)a++;if((i=t-a)<0)i+=7,u=(l=h[d=0])/v(10,a-(o=t)-1)%10|0;else if((d=Math.ceil((i+1)/7))>=(s=h.length)){if(!r)break e;for(;s++<=d;)h.push(0);l=u=0,a=1,o=(i%=7)-7+1}else{for(l=s=h[d],a=1;s>=10;s/=10)a++;u=(o=(i%=7)-7+a)<0?0:l/v(10,a-o-1)%10|0}if(r=r||t<0||void 0!==h[d+1]||(o<0?l:l%v(10,a-o-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(i>0?o>0?l/v(10,a-o):0:h[d-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(h[0]=v(10,(7-(t-=e.e+1)%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==i?(h.length=d,s=1,d--):(h.length=d+1,s=v(10,7-i),h[d]=o>0?(l/v(10,a-o)%v(10,o)|0)*s:0),c)for(;;){if(0==d){for(i=1,o=h[0];o>=10;o/=10)i++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;i!=s&&(e.e++,1e7==h[0]&&(h[0]=1));break}if(h[d]+=s,1e7!=h[d])break;h[d--]=0,s=1}for(i=h.length;0===h[--i];)h.pop()}return f&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function I(e,t,n){if(!e.isFinite())return V(e);var r,a=e.e,i=C(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+L(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):a<0?(i="0."+L(-a-1)+i,n&&(r=n-o)>0&&(i+=L(r))):a>=o?(i+=L(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+L(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=L(r))),i}function N(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function R(e,t,n){if(t>x)throw f=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return M(new e(c),t,1,!0)}function D(e,t,n){if(t>w)throw Error("[DecimalError] Precision limit exceeded");return M(new e(l),t,n,!0)}function O(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function L(e){for(var t="";e--;)t+="0";return t}function F(e,t,n,r){var a,i=new e(1),o=Math.ceil(r/7+4);for(f=!1;;){if(n%2&&X((i=i.times(t)).d,o)&&(a=!0),0===(n=m(n/2))){n=i.d.length-1,a&&0===i.d[n]&&++i.d[n];break}X((t=t.times(t)).d,o)}return f=!0,i}function P(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,a=new e(t[0]),i=0;++i<t.length;){if(!(r=new e(t[i])).s){a=r;break}a[n](r)&&(a=r)}return a}function B(e,t){var n,r,a,i,o,s,u,c=0,l=0,h=0,d=e.constructor,p=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,u=m):u=t,s=new d(.03125);e.e>-2;)e=e.times(s),h+=5;for(u+=r=Math.log(v(2,h))/Math.LN10*2+5|0,n=i=o=new d(1),d.precision=u;;){if(i=M(i.times(e),u,1),n=n.times(++l),C((s=o.plus(A(i,n,u,1))).d).slice(0,u)===C(o.d).slice(0,u)){for(a=h;a--;)o=M(o.times(o),u,1);if(null!=t)return d.precision=m,o;if(!(c<3&&T(o.d,u-r,p,c)))return M(o,d.precision=m,p,f=!0);d.precision=u+=10,n=i=s=new d(1),l=0,c++}o=s}}function U(e,t){var n,r,a,i,o,s,u,c,l,h,d,p=1,m=e,v=m.d,g=m.constructor,y=g.rounding,_=g.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==t?(f=!1,l=_):l=t,g.precision=l+=10,r=(n=C(v)).charAt(0),!(Math.abs(i=m.e)<15e14))return c=R(g,l+2,_).times(i+""),m=U(new g(r+"."+n.slice(1)),l-10).plus(c),g.precision=_,null==t?M(m,_,y,f=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=C((m=m.times(e)).d)).charAt(0),p++;for(i=m.e,r>1?(m=new g("0."+n),i++):m=new g(r+"."+n.slice(1)),h=m,u=o=m=A(m.minus(1),m.plus(1),l,1),d=M(m.times(m),l,1),a=3;;){if(o=M(o.times(d),l,1),C((c=u.plus(A(o,new g(a),l,1))).d).slice(0,l)===C(u.d).slice(0,l)){if(u=u.times(2),0!==i&&(u=u.plus(R(g,l+2,_).times(i+""))),u=A(u,new g(p),l,1),null!=t)return g.precision=_,u;if(!T(u.d,l-10,y,s))return M(u,g.precision=_,y,f=!0);g.precision=l+=10,c=o=m=A(h.minus(1),h.plus(1),l,1),d=M(m.times(m),l,1),a=s=1}u=c,a+=2}}function V(e){return String(e.s*e.s/0)}function W(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(a=t.length;48===t.charCodeAt(a-1);--a);if(t=t.slice(r,a)){if(a-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function G(e,t){var n,r,a,o,s,u,c,l,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),b.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(y.test(t))n=16,t=t.toLowerCase();else if(g.test(t))n=2;else{if(!_.test(t))throw Error(d+t);n=8}for((o=t.search(/p/i))>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),r=e.constructor,(s=o>=0)&&(o=(u=(t=t.replace(".","")).length)-o,a=F(r,new r(n),o,2*o)),o=h=(l=E(t,n,1e7)).length-1;0===l[o];--o)l.pop();return o<0?new r(0*e.s):(e.e=N(l,h),e.d=l,f=!1,s&&(e=A(e,a,4*u)),c&&(e=e.times(Math.abs(c)<54?v(2,c):i.pow(2,c))),f=!0,e)}function H(e,t,n,r,a){var i,o,s,u,c=e.precision,l=Math.ceil(c/7);for(f=!1,u=n.times(n),s=new e(r);;){if(o=A(s.times(u),new e(t++*t++),c,1),s=a?r.plus(o):r.minus(o),r=A(o.times(u),new e(t++*t++),c,1),void 0!==(o=s.plus(r)).d[l]){for(i=l;o.d[i]===s.d[i]&&i--;);if(-1==i)break}i=s,s=r,r=o,o=i}return f=!0,o.d.length=l+1,o}function j(e,t){for(var n=e;--t;)n*=e;return n}function q(e,t){var n,r=t.s<0,a=D(e,e.precision,1),i=a.times(.5);if((t=t.abs()).lte(i))return s=r?4:1,t;if((n=t.divToInt(a)).isZero())s=r?3:2;else{if((t=t.minus(n.times(a))).lte(i))return s=P(n)?r?2:3:r?4:1,t;s=P(n)?r?1:4:r?3:2}return t.minus(a).abs()}function K(e,t,n,r){var a,i,s,c,l,h,f,d,p,m=e.constructor,v=void 0!==n;if(v?(S(n,1,1e9),void 0===r?r=m.rounding:S(r,0,8)):(n=m.precision,r=m.rounding),e.isFinite()){for(v?(a=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):a=t,(s=(f=I(e)).indexOf("."))>=0&&(f=f.replace(".",""),(p=new m(1)).e=f.length-s,p.d=E(I(p),10,a),p.e=p.d.length),i=l=(d=E(f,10,a)).length;0==d[--l];)d.pop();if(d[0]){if(s<0?i--:((e=new m(e)).d=d,e.e=i,d=(e=A(e,p,n,r,0,a)).d,i=e.e,h=o),s=d[n],c=a/2,h=h||void 0!==d[n+1],h=r<4?(void 0!==s||h)&&(0===r||r===(e.s<0?3:2)):s>c||s===c&&(4===r||h||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,h)for(;++d[--n]>a-1;)d[n]=0,n||(++i,d.unshift(1));for(l=d.length;!d[l-1];--l);for(s=0,f="";s<l;s++)f+=u.charAt(d[s]);if(v){if(l>1)if(16==t||8==t){for(s=16==t?4:3,--l;l%s;l++)f+="0";for(l=(d=E(f,a,t)).length;!d[l-1];--l);for(s=1,f="1.";s<l;s++)f+=u.charAt(d[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)f="0"+f;f="0."+f}else if(++i>l)for(i-=l;i--;)f+="0";else i<l&&(f=f.slice(0,i)+"."+f.slice(i))}else f=v?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=V(e);return e.s<0?"-"+f:f}function X(e,t){if(e.length>t)return e.length=t,!0}function Z(e){return new this(e).abs()}function Y(e){return new this(e).acos()}function J(e){return new this(e).acosh()}function $(e,t){return new this(e).plus(t)}function Q(e){return new this(e).asin()}function ee(e){return new this(e).asinh()}function te(e){return new this(e).atan()}function ne(e){return new this(e).atanh()}function re(e,t){e=new this(e),t=new this(t);var n,r=this.precision,a=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?D(this,r,a):new this(0)).s=e.s:!e.d||t.isZero()?(n=D(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(A(e,t,i,1)),t=D(this,i,1),this.precision=r,this.rounding=a,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(A(e,t,i,1)):(n=D(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ae(e){return new this(e).cbrt()}function ie(e){return M(e=new this(e),e.e+1,2)}function oe(e,t,n){return new this(e).clamp(t,n)}function se(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t,n,r,a=!0===e.defaults,i=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],a&&(this[n]=h[n]),void 0!==(r=e[n])){if(!(m(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(d+n+": "+r);this[n]=r}if(n="crypto",a&&(this[n]=h[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(d+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function ue(e){return new this(e).cos()}function ce(e){return new this(e).cosh()}function le(e,t){return new this(e).div(t)}function he(e){return new this(e).exp()}function fe(e){return M(e=new this(e),e.e+1,3)}function de(){var e,t,n=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);n=t}return f=!0,n.sqrt()}function pe(e){return e instanceof i||e&&e.toStringTag===p||!1}function me(e){return new this(e).ln()}function ve(e,t){return new this(e).log(t)}function ge(e){return new this(e).log(2)}function ye(e){return new this(e).log(10)}function _e(){return z(this,arguments,"lt")}function be(){return z(this,arguments,"gt")}function xe(e,t){return new this(e).mod(t)}function we(e,t){return new this(e).mul(t)}function ke(e,t){return new this(e).pow(t)}function Ce(e){var t,n,r,a,i=0,o=new this(1),s=[];if(void 0===e?e=this.precision:S(e,1,1e9),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)(a=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:s[i++]=a%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);i<r;)(a=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(s.push(a%1e7),i+=4);i=r/4}else for(;i<r;)s[i++]=1e7*Math.random()|0;for(e%=7,(r=s[--i])&&e&&(a=v(10,7-e),s[i]=(r/a|0)*a);0===s[i];i--)s.pop();if(i<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,a=s[0];a>=10;a/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function Se(e){return M(e=new this(e),e.e+1,this.rounding)}function Te(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ee(e){return new this(e).sin()}function Ae(e){return new this(e).sinh()}function Me(e){return new this(e).sqrt()}function Ie(e,t){return new this(e).sub(t)}function Ne(){var e=0,t=arguments,n=new this(t[e]);for(f=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return f=!0,M(n,this.precision,this.rounding)}function Re(e){return new this(e).tan()}function De(e){return new this(e).tanh()}function Oe(e){return M(e=new this(e),e.e+1,1)}(i=function e(t){var n,r,a;function i(e){var t,n,r,a=this;if(!(a instanceof i))return new i(e);if(a.constructor=i,pe(e))return a.s=e.s,void(f?!e.d||e.e>i.maxE?(a.e=NaN,a.d=null):e.e<i.minE?(a.e=0,a.d=[0]):(a.e=e.e,a.d=e.d.slice()):(a.e=e.e,a.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return a.s=1/e<0?-1:1,a.e=0,void(a.d=[0]);if(e<0?(e=-e,a.s=-1):a.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(f?t>i.maxE?(a.e=NaN,a.d=null):t<i.minE?(a.e=0,a.d=[0]):(a.e=t,a.d=[e]):(a.e=t,a.d=[e]))}return 0*e!=0?(e||(a.s=NaN),a.e=NaN,void(a.d=null)):W(a,e.toString())}if("string"!==r)throw Error(d+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),a.s=-1):(43===n&&(e=e.slice(1)),a.s=1),b.test(e)?W(a,e):G(a,e)}if(i.prototype=k,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=se,i.clone=e,i.isDecimal=pe,i.abs=Z,i.acos=Y,i.acosh=J,i.add=$,i.asin=Q,i.asinh=ee,i.atan=te,i.atanh=ne,i.atan2=re,i.cbrt=ae,i.ceil=ie,i.clamp=oe,i.cos=ue,i.cosh=ce,i.div=le,i.exp=he,i.floor=fe,i.hypot=de,i.ln=me,i.log=ve,i.log10=ye,i.log2=ge,i.max=_e,i.min=be,i.mod=xe,i.mul=we,i.pow=ke,i.random=Ce,i.round=Se,i.sign=Te,i.sin=Ee,i.sinh=Ae,i.sqrt=Me,i.sub=Ie,i.sum=Ne,i.tan=Re,i.tanh=De,i.trunc=Oe,void 0===t&&(t={}),t&&!0!==t.defaults)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return i.config(t),i}(h)).prototype.constructor=i,i.default=i.Decimal=i,c=new i(c),l=new i(l),void 0===(r=(function(){return i}).call(t,n,t,e))||(e.exports=r)}()},"Rn+g":function(e,t,n){"use strict";var r=n("LYNF");e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},SntB:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function u(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,a=t(e);r.isUndefined(a)&&t!==u||(n[e]=a)})),n}},UnBK:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("xAGQ"),i=n("Lmem"),o=n("JEQr"),s=n("endd");function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},VdZX:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},XM5P:function(e,t){e.exports={version:"0.25.0"}},XwJu:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},YSVl:function(e,t,n){var r=n("EhIR"),a=n("uDiL"),i=n("pJ6O"),o=n("yuCN"),s=n("euyF"),u=n("ie1u"),c=n("pJ3+");c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},YWYm:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},d0Zt:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n=a[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=0==(n=s[127&i]^=r+(o=o+1640531527|0))?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,s[a]=(r^=r>>>15)^(n^=n>>>12);e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},djRN:function(e,t,n){"use strict";var r,a;void 0===(a="function"==typeof(r=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var a=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],i={name:"any",test:e},o=[],s=[],u={types:a,conversions:s,ignore:o};function c(e){var t=z(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return i;var n=z(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function l(e){return e===i?999:u.types.indexOf(e)}function h(e){var t=z(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function f(e){return e.map((function(e){var t=e.types.map(y);return(e.restParam?"...":"")+t.join("|")})).join(",")}function d(e){var t=L(e);return!!t&&t.restParam}function p(e){return e.types.some((function(e){return null!=e.conversion}))}function m(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e)}}var a=t.types.map((function(e){return c(e.name).test}));return function(e){for(var t=0;t<a.length;t++)if(a[t](e))return!0;return!1}}return e}function v(e,t){return t<e.params.length?e.params[t]:d(e.params)?L(e.params):null}function g(e,t,n){var r=v(e,t);return(r?n?r.types.filter(_):r.types:[]).map(y)}function y(e){return e.name}function _(e){return null==e.conversion}function b(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(B(e,(function(e){return g(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function x(e,t,n){var r,a,i,o=e||"unnamed",s=n;for(i=0;i<t.length;i++){var u=s.filter((function(e){var n=m(v(e,i));return(i<e.params.length||d(e.params))&&n(t[i])}));if(0===u.length){if((a=b(s,i)).length>0){var c=h(t[i]);return(r=new TypeError("Unexpected type of argument in function "+o+" (expected: "+a.join(" or ")+", actual: "+c+", index: "+i+")")).data={category:"wrongType",fn:o,index:i,actual:c,expected:a},r}}else s=u}var l=s.map((function(e){return d(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,l))return a=b(s,i),(r=new TypeError("Too few arguments in function "+o+" (expected: "+a.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:o,index:t.length,expected:a},r;var f=Math.max.apply(null,l);return t.length>f?((r=new TypeError("Too many arguments in function "+o+" (expected: "+f+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:o,index:t.length,expectedLength:f},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:t.map(h)},r)}function w(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function k(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function C(e,t){var n;return 0!=(n=e.restParam-t.restParam)?n:0!=(n=p(e)-p(t))?n:0!=(n=w(e)-w(t))?n:k(e)-k(t)}function S(e,t){var n,r,a=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(p)-t.params.some(p)))return r;for(n=0;n<a;n++)if(0!=(r=p(e.params[n])-p(t.params[n])))return r;for(n=0;n<a;n++)if(0!==(r=C(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function T(e){var t,n,r,a,i=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(i.push(c(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=i[0],r=o[0],function(e){return t(e)?r(e):e};case 2:return t=i[0],n=i[1],r=o[0],a=o[1],function(e){return t(e)?r(e):n(e)?a(e):e};default:return function(e){for(var t=0;t<o.length;t++)if(i[t](e))return o[t](e);return e}}}function E(e,t){return function e(n,r,a){if(r<n.length){var i,o=n[r],s=t?o.types.filter(_):o.types;if(o.restParam){var u=s.filter(_);i=u.length<s.length?[u,s]:[s]}else i=s.map((function(e){return[e]}));return B(i,(function(t){return e(n,r+1,a.concat([t]))}))}return[a.map((function(e,t){return{types:e,restParam:t===n.length-1&&d(n)}}))]}(e,0,[])}function A(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var a=[];Object.keys(r).map((function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(N).map((function(e,t,r){var a=function(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(N).filter(R).filter(I),a=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),i=r.map((function(e){var t=c(e);return{name:e,typeIndex:l(t),test:t.test,conversion:null,conversionIndex:-1}})),o=a.map((function(e){var n=c(e.from);return{name:e.from,typeIndex:l(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:i.concat(o),restParam:n}}(e,n);if(a.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return a}))),r.some(O)?null:{params:r,fn:t}}(e,r[e],u.conversions)})).filter(D).forEach((function(e){var t=z(a,(function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!P(g(e,r,!0),g(t,r,!0)))return!1;var a=e.params.length,i=t.params.length,o=d(e.params),s=d(t.params);return o?s?a===i:i>=a:s?a>=i:a===i}(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+f(t.params)+'" and "'+f(e.params)+'".');a.push(e)}));var i=B(a,(function(e){return(e?E(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(D);i.sort(S);var o=i[0]&&i[0].params.length<=2&&!d(i[0].params),s=i[1]&&i[1].params.length<=2&&!d(i[1].params),h=i[2]&&i[2].params.length<=2&&!d(i[2].params),v=i[3]&&i[3].params.length<=2&&!d(i[3].params),y=i[4]&&i[4].params.length<=2&&!d(i[4].params),_=i[5]&&i[5].params.length<=2&&!d(i[5].params),b=o&&s&&h&&v&&y&&_,x=i.map((function(e){return function(e){var t,n,r,a;if(d(e)){var i=(t=(a=e,a.slice(0,a.length-1)).map(m)).length,o=m(L(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=i;t<e.length;t++)if(!o(e[t]))return!1;return!0}(e)&&e.length>=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=m(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=m(e[0]),r=m(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(m),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}(e.params)})),w=o?m(i[0].params[0]):t,k=s?m(i[1].params[0]):t,C=h?m(i[2].params[0]):t,A=v?m(i[3].params[0]):t,M=y?m(i[4].params[0]):t,U=_?m(i[5].params[0]):t,V=o?m(i[0].params[1]):t,W=s?m(i[1].params[1]):t,G=h?m(i[2].params[1]):t,H=v?m(i[3].params[1]):t,j=y?m(i[4].params[1]):t,q=_?m(i[5].params[1]):t,K=i.map((function(e){return function(e,t){var n=t;if(e.some(p)){var r=d(e),a=e.map(T);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,i=0;i<n;i++)e[i]=a[i](arguments[i]);return r&&(e[n]=arguments[n].map(a[n])),t.apply(this,e)}}var i=n;if(d(e)){var o=e.length-1;i=function(){return n.apply(this,F(arguments,0,o).concat([F(arguments,o)]))}}return i}(e.params,e.fn)})),X=o?K[0]:n,Z=s?K[1]:n,Y=h?K[2]:n,J=v?K[3]:n,$=y?K[4]:n,Q=_?K[5]:n,ee=o?i[0].params.length:-1,te=s?i[1].params.length:-1,ne=h?i[2].params.length:-1,re=v?i[3].params.length:-1,ae=y?i[4].params.length:-1,ie=_?i[5].params.length:-1,oe=b?6:0,se=i.length,ue=function(){for(var t=oe;t<se;t++)if(x[t](arguments))return K[t].apply(this,arguments);return u.onMismatch(e,arguments,i)},ce=function e(t,n){return arguments.length===ee&&w(t)&&V(n)?X.apply(e,arguments):arguments.length===te&&k(t)&&W(n)?Z.apply(e,arguments):arguments.length===ne&&C(t)&&G(n)?Y.apply(e,arguments):arguments.length===re&&A(t)&&H(n)?J.apply(e,arguments):arguments.length===ae&&M(t)&&j(n)?$.apply(e,arguments):arguments.length===ie&&U(t)&&q(n)?Q.apply(e,arguments):ue.apply(e,arguments)};try{Object.defineProperty(ce,"name",{value:e})}catch(le){}return ce.signatures=function(e){var t={};return e.forEach((function(e){e.params.some(p)||E(e.params,!0).forEach((function(n){t[f(n)]=e.fn}))})),t}(i),ce}function M(e,t,n){throw x(e,t,n)}function I(e){return-1===u.ignore.indexOf(e)}function N(e){return e.trim()}function R(e){return!!e}function D(e){return null!==e}function O(e){return 0===e.types.length}function L(e){return e[e.length-1]}function F(e,t,n){return Array.prototype.slice.call(e,t,n)}function P(e,t){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}function z(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function B(e,t){return Array.prototype.concat.apply([],e.map(t))}function U(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var a=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw a.data={actual:r.name,expected:t},a}}return t}function V(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var a=0;a<e.length;a++){var i=e[a];if("object"==typeof i.signatures)for(var o in i.signatures)i.signatures.hasOwnProperty(o)&&(r(o,i.signatures[o]),n[o]=i.signatures[o]);else{if("string"!=typeof i.signature)throw(t=new TypeError("Function is no typed-function (index: "+a+")")).data={index:a},t;r(i.signature,i),n[i.signature]=i}}return n}return(u=A("typed",{"string, Object":A,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return A(U(t),e)},"...Function":function(e){return A(U(e),V(e))},"string, ...Function":function(e,t){return A(e,V(t))}})).create=r,u.types=a,u.conversions=s,u.ignore=o,u.onMismatch=M,u.throwMismatchError=M,u.createError=x,u.convert=function(e,t){var n=h(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var a=u.conversions[r];if(a.from===n&&a.to===t)return a.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var a=n.join(","),i=e.signatures[a];if(i)return i;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()})?r.apply(t,[]):r)||(e.exports=a)},"eQl+":function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),i={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function o(e){return"number"==typeof e}function s(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function u(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function c(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function l(e){return e&&!0===e.constructor.prototype.isUnit||!1}function h(e){return"string"==typeof e}var f=Array.isArray;function d(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function p(e){return Array.isArray(e)||d(e)}function m(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function v(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function g(e){return e&&!0===e.constructor.prototype.isRange||!1}function y(e){return e&&!0===e.constructor.prototype.isIndex||!1}function _(e){return"boolean"==typeof e}function b(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function x(e){return e&&!0===e.constructor.prototype.isHelp||!1}function w(e){return"function"==typeof e}function k(e){return e instanceof Date}function C(e){return e instanceof RegExp}function S(e){return!(!e||"object"!=typeof e||e.constructor!==Object||u(e)||c(e))}function T(e){return null===e}function E(e){return void 0===e}function A(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function M(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function N(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function O(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function V(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function W(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function G(e){return e&&!0===e.constructor.prototype.isChain||!1}function H(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":s(e)?"BigNumber":u(e)?"Complex":c(e)?"Fraction":d(e)?"Matrix":l(e)?"Unit":y(e)?"Index":g(e)?"Range":b(e)?"ResultSet":P(e)?e.type:G(e)?"Chain":x(e)?"Help":"Object":"function"===t?"Function":t}function j(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return j(e)}));if(e instanceof Date)return new Date(e.valueOf());if(s(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return function(e,t){var n={};for(var r in e)X(e,r)&&(n[r]=t(e[r]));return n}(e,j)}function q(e,t){for(var n in t)X(t,n)&&(e[n]=t[n]);return e}function K(e,t){var n,r,a;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,a=e.length;r<a;r++)if(!K(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t&&K(e[n],t[n])))return!1;for(n in t)if(!(n in e))return!1;return!0}return e===t}function X(e,t){return e&&Object.hasOwnProperty.call(e,t)}var Z=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(i)};a()(Z,i,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Y=n("QSgb"),J=n.n(Y);function $(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var Q=Math.sign||function(e){return e>0?1:e<0?-1:0};function ee(e,t,n){var r={2:"0b",8:"0o",16:"0x"}[t],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!$(n))throw new Error("size must be an integer");if(e>Math.pow(2,n-1)-1||e<-Math.pow(2,n-1))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!$(e))throw new Error("Value must be an integer");e<0&&(e+=Math.pow(2,n)),a="i".concat(n)}var i="";return e<0&&(e=-e,i="-"),"".concat(i).concat(r).concat(e.toString(t)).concat(a)}function te(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r,a="auto";if(t&&(t.notation&&(a=t.notation),o(t)?n=t:o(t.precision)&&(n=t.precision),t.wordSize&&"number"!=typeof(r=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(a){case"fixed":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ne(e),r="number"==typeof t?ae(n,n.exponent+1+t):n,a=r.coefficients,i=r.exponent+1,o=i+(t||0);return a.length<o&&(a=a.concat(ie(o-a.length))),i<0&&(a=ie(1-i).concat(a),i=1),i<a.length&&a.splice(i,0,0===i?"0.":"."),r.sign+a.join("")}(e,n);case"exponential":return re(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ae(ne(e),t),r=n.exponent,a=n.coefficients,i=r%3==0?r:r<0?r-3-r%3:r-r%3;if(o(t))for(;t>a.length||r-i+1>a.length;)a.push(0);else for(var s=Math.abs(r-i)-(a.length-1),u=0;u<s;u++)a.push(0);for(var c=Math.abs(r-i),l=1;c>0;)l++,c--;var h=a.slice(l).join(""),f=o(t)&&h.length||h.match(/[1-9]/)?"."+h:"",d=a.slice(0,l).join("")+f+"e"+(r>=0?"+":"")+i.toString();return n.sign+d}(e,n);case"bin":return ee(e,2,r);case"oct":return ee(e,8,r);case"hex":return ee(e,16,r);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,a=n&&void 0!==n.upperExp?n.upperExp:5,i=ne(e),o=t?ae(i,t):i;if(o.exponent<r||o.exponent>=a)return re(e,t);var s=o.coefficients,u=o.exponent;s.length<t&&(s=s.concat(ie(t-s.length))),s=s.concat(ie(u-s.length+1+(s.length<t?t-s.length:0)));var c=u>0?u:0;return c<(s=ie(-u).concat(s)).length-1&&s.splice(c+1,0,"."),o.sign+s.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+a+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ne(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],a=parseFloat(t[4]||"0"),i=r.indexOf(".");a+=-1!==i?i-1:r.length-1;var o=r.replace(".","").replace(/^0*/,(function(e){return a-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),a++),{sign:n,coefficients:o,exponent:a}}function re(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ne(e),r=t?ae(n,t):n,a=r.coefficients,i=r.exponent;a.length<t&&(a=a.concat(ie(t-a.length)));var o=a.shift();return r.sign+o+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function ae(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var a=t-1;for(r[a]++;10===r[a];)r.pop(),0===a&&(r.unshift(0),n.exponent++,a++),r[--a]++}return n}function ie(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}Math,Math,Math,Math,Math;var oe=Number.EPSILON||2220446049250313e-31;function se(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<oe||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}function ue(e,t,n){var r=new(0,e.constructor)(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!$(n))throw new Error("size must be an integer");if(e.greaterThan(r.pow(n-1).sub(1))||e.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(r.pow(n))),a="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(a);case 8:return"".concat(e.toOctal()).concat(a);case 16:return"".concat(e.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(t," not supported "))}}function ce(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function le(e,t){return"number"==typeof e?te(e,t):s(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r,a="auto";if(void 0!==t&&(t.notation&&(a=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision),t.wordSize&&"number"!=typeof(r=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(a){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return ce(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,a=e.mul(Math.pow(10,-r)),i=a.toPrecision(t);return-1!==i.indexOf("e")&&(i=a.toString()),i+"e"+(n>=0?"+":"")+r.toString()}(e,n);case"bin":return ue(e,2,r);case"oct":return ue(e,8,r);case"hex":return ue(e,16,r);case"auto":var i=t&&void 0!==t.lowerExp?t.lowerExp:-3,o=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var s=e.toSignificantDigits(n),u=s.e;return(u>=i&&u<o?s.toFixed():ce(e,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+a+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",a=t.length,i=0;i<a;i++)0!==i&&(r+=", "),r+=e(t[i],n);return r+"]"}return le(t,n)}(e,t):h(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((function(n){return'"'+n+'": '+le(e[n],t)})).join(", ")+"}":String(e)}function he(e,t,n){if(!(this instanceof he))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function fe(e,t,n){if(!(this instanceof fe))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function de(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function pe(e,t){if(0===t.length){if(Array.isArray(e))throw new he(e.length,0)}else!function e(t,n,r){var a,i=t.length;if(i!==n[r])throw new he(i,n[r]);if(r<n.length-1){var o=r+1;for(a=0;a<i;a++){if(!Array.isArray(t[a]))throw new he(n.length-1,n.length,"<");e(t[a],n,o)}}else for(a=0;a<i;a++)if(Array.isArray(t[a]))throw new he(n.length+1,n.length,">")}(e,t,0)}function me(e,t){if(!o(e)||!$(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new fe(e,t)}function ve(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!o(e)||!$(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+le(t)+")")})),function e(t,n,r,a){var i,o,s=n[r],u=Math.min(t.length,s);if(t.length=s,r<n.length-1){var c=r+1;for(i=0;i<u;i++)o=t[i],Array.isArray(o)||(t[i]=o=[o]),e(o,n,c,a);for(i=u;i<s;i++)t[i]=o=[],e(o,n,c,a)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=a}}(e,t,0,void 0!==n?n:0),e}function ge(e,t){var n=ye(e),r=e.slice(),a=e.indexOf(-1);if(e.indexOf(-1,a+1)>=0)throw new Error("More than one wildcard in sizes");if(a>=0){if(t%n!=0)throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);r[a]=-t/n}return r}function ye(e){return e.reduce((function(e,t){return e*t}),1)}function _e(e,t){for(var n=t||de(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=function e(t,n,r){var a,i;if(r<n){var o=r+1;for(a=0,i=t.length;a<i;a++)t[a]=e(t[a],n,o)}else for(;Array.isArray(t);)t=t[0];return t}(e,r,0),n.length=r),e}function be(e,t,n,r){var a=r||de(e);if(n)for(var i=0;i<n;i++)e=[e],a.unshift(1);for(e=function e(t,n,r){var a,i;if(Array.isArray(t)){var o=r+1;for(a=0,i=t.length;a<i;a++)t[a]=e(t[a],n,o)}else for(var s=r;s<n;s++)t=[t];return t}(e,t,0);a.length<t;)a.push(1);return e}function xe(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function we(e,t){for(var n,r=0,a=0;a<e.length;a++){var i=e[a],o=Array.isArray(i);if(0===a&&o&&(r=i.length),o&&i.length!==r)return;var s=o?we(i,t):t(i);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function ke(e,t,n,r){function a(r){var a=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r],i=e[a];void 0!==i&&(n[a]=i)}return n}(r,t.map(Ce));return function(e,t,n){if(!t.filter((function(e){return!function(e){return e&&"?"===e[0]}(e)})).every((function(e){return void 0!==n[e]}))){var r=t.filter((function(e){return void 0===n[e]}));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((function(e){return'"'.concat(e,'"')})).join(", "),"."))}}(e,t,r),n(a)}return a.isFactory=!0,a.fn=e,a.dependencies=t.slice().sort(),r&&(a.meta=r),a}function Ce(e){return e&&"?"===e[0]?e.slice(1):e}Math,Math,Math,Math,Math,Math,(he.prototype=new RangeError).constructor=RangeError,he.prototype.name="DimensionError",he.prototype.isDimensionError=!0,(fe.prototype=new RangeError).constructor=RangeError,fe.prototype.name="IndexError",fe.prototype.isIndexError=!0;var Se=ke("BigNumber",["?on","config"],(function(e){var t=e.on,n=e.config,r=J.a.clone({precision:n.precision,modulo:J.a.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0}),Te=n("7a9l"),Ee=n.n(Te),Ae=ke("Complex",[],(function(){return Ee.a.prototype.type="Complex",Ee.a.prototype.isComplex=!0,Ee.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ee.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ee.a.prototype.format=function(e){var t=this.im,n=this.re,r=te(this.re,e),a=te(this.im,e),i=o(e)?e:e?e.precision:null;if(null!==i){var s=Math.pow(10,-i);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":a+"i":t<0?-1===t?r+" - i":r+" - "+a.substring(1)+"i":1===t?r+" + i":r+" + "+a+"i"},Ee.a.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return Ee()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(o(n)){if(l(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),o(r))return new Ee.a({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ee.a.prototype.valueOf=Ee.a.prototype.toString,Ee.a.fromJSON=function(e){return new Ee.a(e)},Ee.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Ee.a}),{isClass:!0});function Me(e){var t=0,n=1,r=Object.create(null),a=Object.create(null),i=0,o=function(e){var o=a[e];if(o&&(delete r[o],delete a[e],--t,n===o)){if(!t)return i=0,void(n=1);for(;!hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(s){var u=a[s],c=++i;if(r[c]=s,a[s]=c,!u){if(++t<=e)return;return o(s=r[n]),s}if(delete r[u],n===u)for(;!hasOwnProperty.call(r,++n););},delete:o,clear:function(){t=i=0,n=1,r=Object.create(null),a=Object.create(null)}}}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasher,r=t.limit;return r=null==r?Number.POSITIVE_INFINITY:r,n=null==n?JSON.stringify:n,function t(){"object"!=typeof t.cache&&(t.cache={values:new Map,lru:Me(r||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var o=n(a);if(t.cache.values.has(o))return t.cache.lru.hit(o),t.cache.values.get(o);var s=e.apply(e,a);return t.cache.values.set(o,s),t.cache.values.delete(t.cache.lru.hit(o)),s}}Ie((function(e){return new e(1).exp()}),{hasher:Re}),Ie((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:Re});var Ne=Ie((function(e){return e.acos(-1)}),{hasher:Re});function Re(e){return e[0].precision}function De(e,t){return ke(e,["config","BigNumber"],(function(e){var n=e.config,r=e.BigNumber;return"BigNumber"===n.number?new r(t):t}))}Ie((function(e){return Ne(e).times(2)}),{hasher:Re}),Math,Math,Math,De("fineStructure",.0072973525693),De("weakMixingAngle",.2229),De("efimovFactor",22.7),De("sackurTetrode",-1.16487052358);var Oe=n("1h5C"),Le=n.n(Oe),Fe=ke("Fraction",[],(function(){return Le.a.prototype.type="Fraction",Le.a.prototype.isFraction=!0,Le.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Le.a.fromJSON=function(e){return new Le.a(e)},Le.a}),{isClass:!0}),Pe=ke("Matrix",[],(function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0}),ze=ke("DenseMatrix",["Matrix"],(function(e){var t=e.Matrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(d(e))"DenseMatrix"===e.type?(this._data=j(e._data),this._size=j(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&f(e.data)&&f(e.size))this._data=e.data,this._size=e.size,pe(this._data,this._size),this._datatype=t||e.datatype;else if(f(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var a=t[n];f(a)?t[n]=e(a):a&&!0===a.isMatrix&&(t[n]=e(a.valueOf()))}return t}(e),this._size=de(this._data),pe(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t){if(!y(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new he(r.length,e._size.length);for(var a=t.min(),i=t.max(),o=0,s=e._size.length;o<s;o++)me(a[o],e._size[o]),me(i[o],e._size[o]);return new n(function e(t,n,r,a){var i=a===r-1,o=n.dimension(a);return i?o.map((function(e){return me(e,t.length),t[e]})).valueOf():o.map((function(i){return me(i,t.length),e(t[i],n,r,a+1)})).valueOf()}(e._data,t,r.length,0),e._datatype)}function a(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var a,i=t.size(),o=t.isScalar();if(d(n)?(a=n.size(),n=n.valueOf()):a=de(n),o){if(0!==a.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(i.length<e._size.length)throw new he(i.length,e._size.length,"<");if(a.length<i.length){for(var s=0,c=0;1===i[s]&&1===a[s];)s++;for(;1===i[s];)c++,s++;n=be(n,i.length,c,a)}if(!K(i,a))throw new he(i,a,">");u(e,t.max().map((function(e){return e+1})),r),function e(t,n,r,a,i){var o=i===a-1;n.dimension(i).forEach(o?function(e,n){me(e),t[e]=r[n[0]]}:function(o,s){me(o),e(t[o],n,r[s[0]],a,i+1)})}(e._data,t,n,i.length,0)}return e}function i(e,t,n){if(0===t.length){for(var r=e._data;f(r);)r=r[0];return r}return e._size=t.slice(0),e._data=ve(e._data,e._size,n),e}function u(e,t,n){for(var r=e._size.slice(0),a=!1;r.length<t.length;)r.push(0),a=!0;for(var o=0,s=t.length;o<s;o++)t[o]>r[o]&&(r[o]=t[o],a=!0);a&&i(e,r,n)}return(n.prototype=new t).createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return we(this._data,H)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return a(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);for(var t=0;t<e.length;t++)me(e[t],this._size[t]);for(var n=this._data,r=0,a=e.length;r<a;r++){var i=e[r];me(i,n.length),n=n[i]}return n},n.prototype.set=function(e,t,n){if(!f(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new he(e.length,this._size.length,"<");var r,a,i;u(this,e.map((function(e){return e+1})),n);var o=this._data;for(r=0,a=e.length-1;r<a;r++)me(i=e[r],o.length),o=o[i];return me(i=e[e.length-1],o.length),o[i]=t,this},n.prototype.resize=function(e,t,n){if(!p(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((function(e){return Array.isArray(e)&&1===e.length?e[0]:e}));return i(n?this.clone():this,r,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=function(e,t){var n=xe(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new he(0,r,"!=");var a=ye(t=ge(t,r));if(r!==a)throw new he(a,r,"!=");try{return function(e,t){for(var n,r=e,a=t.length-1;a>0;a--){var i=t[a];n=[];for(var o=r.length/i,s=0;s<o;s++)n.push(r.slice(s*i,(s+1)*i));r=n}return r}(n,t)}catch(i){if(i instanceof he)throw new he(a,r,"!=");throw i}}(n._data,e);var r=n._size.reduce((function(e,t){return e*t}));return n._size=ge(e,r),n},n.prototype.clone=function(){return new n({data:j(this._data),size:j(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,r=function n(r,a){return f(r)?r.map((function(e,t){return n(e,a.concat(t))})):e(r,a,t)}(this._data,[]);return new n(r,void 0!==this._datatype?we(r,H):void 0)},n.prototype.forEach=function(e){var t=this;!function n(r,a){f(r)?r.forEach((function(e,t){n(e,a.concat(t))})):e(r,a,t)}(this._data,[])},n.prototype[Symbol.iterator]=_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!f(t)){a.next=9;break}r=0;case 2:if(!(r<t.length)){a.next=7;break}return a.delegateYield(e(t[r],n.concat(r)),"t0",4);case 4:r++,a.next=2;break;case 7:a.next=11;break;case 9:return a.next=11,{value:t,index:n};case 11:case"end":return a.stop()}}),e)}))(this._data,[]),"t0",1);case 1:case"end":return e.stop()}}),e,this)})),n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t,r=_createForOfIteratorHelper(this._data);try{for(r.s();!(t=r.n()).done;){var a=t.value;e.push(new n([a],this._datatype))}}catch(i){r.e(i)}finally{r.f()}return e},n.prototype.columns=function(){var e=this,t=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var a=this._data,i=function(r){var i=a.map((function(e){return[e[r]]}));t.push(new n(i,e._datatype))},o=0;o<r[1];o++)i(o);return t},n.prototype.toArray=function(){return j(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return le(this._data,e)},n.prototype.toString=function(){return le(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(s(e)&&(e=e.toNumber()),!o(e)||!$(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,a=Math.min(this._size[0]-r,this._size[1]-t),i=[],u=0;u<a;u++)i[u]=this._data[u+r][u+t];return new n({data:i,size:[a],datatype:this._datatype})},n.diagonal=function(e,t,r,a){if(!f(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(s(e)&&(e=e.toNumber()),!o(e)||!$(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(s(r)&&(r=r.toNumber()),!o(r)||!$(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var i,u=r>0?r:0,c=r<0?-r:0,l=e[0],h=e[1],p=Math.min(l-c,h-u);if(f(t)){if(t.length!==p)throw new Error("Invalid value array length");i=function(e){return t[e]}}else if(d(t)){var m=t.size();if(1!==m.length||m[0]!==p)throw new Error("Invalid matrix length");i=function(e){return t.get([e])}}else i=function(){return t};a||(a=s(i(0))?i(0).mul(0):0);var v=[];if(e.length>0){v=ve(v,e,a);for(var g=0;g<p;g++)v[g+c][g+u]=i(g)}return new n({data:v,size:[l,h]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(o(e)&&$(e)&&o(t)&&$(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return me(e,this._size[0]),me(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0}),Be=n("djRN"),Ue=n.n(Be);function Ve(e,t){return!(!e||"object"!=typeof e||!X(Ge,t)&&(t in Object.prototype||t in Function.prototype))}function We(e){return"object"==typeof e&&e&&e.constructor===Object}var Ge={length:!0,name:!0},He={toString:!0,valueOf:!0,toLocaleString:!0};function je(e){return!!e&&(e instanceof Map||e instanceof function(){function e(t){_classCallCheck(this,e),this.wrappedObject=t}return _createClass(e,[{key:"keys",value:function(){return Object.keys(this.wrappedObject)}},{key:"get",value:function(e){return function(e,t){if(We(e)&&Ve(e,t))return e[t];if("function"==typeof e[t]&&function(e,t){return!(null==e||"function"!=typeof e[t]||X(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!X(He,t)&&(t in Object.prototype||t in Function.prototype))}(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e)}},{key:"set",value:function(e,t){return function(e,t,n){if(We(e)&&Ve(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e,t),this}},{key:"has",value:function(e){return e in this.wrappedObject}}]),e}()||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}var qe=function(){return qe=Ue.a.create,Ue.a},Ke=ke("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var t=e.BigNumber,n=e.Complex,r=e.DenseMatrix,a=e.Fraction,i=qe();return i.types=[{name:"number",test:o},{name:"Complex",test:u},{name:"BigNumber",test:s},{name:"Fraction",test:c},{name:"Unit",test:l},{name:"string",test:h},{name:"Chain",test:G},{name:"Array",test:f},{name:"Matrix",test:d},{name:"DenseMatrix",test:m},{name:"SparseMatrix",test:v},{name:"Range",test:g},{name:"Index",test:y},{name:"boolean",test:_},{name:"ResultSet",test:b},{name:"Help",test:x},{name:"function",test:w},{name:"Date",test:k},{name:"RegExp",test:C},{name:"null",test:T},{name:"undefined",test:E},{name:"AccessorNode",test:A},{name:"ArrayNode",test:M},{name:"AssignmentNode",test:I},{name:"BlockNode",test:N},{name:"ConditionalNode",test:R},{name:"ConstantNode",test:D},{name:"FunctionNode",test:L},{name:"FunctionAssignmentNode",test:O},{name:"IndexNode",test:F},{name:"Node",test:P},{name:"ObjectNode",test:z},{name:"OperatorNode",test:B},{name:"ParenthesisNode",test:U},{name:"RangeNode",test:V},{name:"SymbolNode",test:W},{name:"Map",test:je},{name:"Object",test:S}],i.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||Xe(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Ze(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Ze(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Ze(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){a||Ye(e);var t=new a(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||Xe(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){a||Ye(e);try{return new a(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Ze(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Xe(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return a||Ye(e),new a(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],i}));function Xe(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Ze(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Ye(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function Je(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return Je(e,t,n)})):t(e)}var $e="number",Qe="number, number";function et(e){return Math.abs(e)}function tt(e,t){return e+t}function nt(e,t){return e*t}function rt(e){return-e}function at(e){return Q(e)}function it(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}et.signature=$e,tt.signature=Qe,nt.signature=Qe,rt.signature=$e,at.signature=$e,it.signature=Qe;var ot=ke("abs",["typed"],(function(e){return(0,e.typed)("abs",{number:et,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Je(e,this,!0)},Unit:function(e){return e.abs()}})})),st=ke("addScalar",["typed"],(function(e){return(0,e.typed)("addScalar",{"number, number":tt,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})})),ut=ke("atan",["typed"],(function(e){return(0,e.typed)("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()},"Array | Matrix":function(e){return Je(e,this,!0)}})})),ct=ke("bignumber",["typed","BigNumber"],(function(e){var t=e.typed,n=e.BigNumber;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var r=t[2],a=n(t[1]),i=new n(2).pow(Number(r));if(a.gt(i.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var o=new n(2).pow(Number(r)-1);return a.gte(o)?a.sub(i):a}return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return Je(e,this)}})})),lt=ke("complex",["typed","Complex"],(function(e){var t=e.typed,n=e.Complex;return t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return Je(e,this)}})})),ht=ke("conj",["typed"],(function(e){return(0,e.typed)("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Je(e,this)}})}));function ft(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var a=e.constructor.max(e.abs(),t.abs());return r.lte(a.times(n))}return!1}var dt=ke("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config;return t("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return se(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||ft(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return se(e.re,t.re,n)&&se(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})}));ke("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config;return t("equalScalar",{"number, number":function(e,t){return se(e,t,n.epsilon)}})})),Math.pow(2,53),ke("hex",["typed","format"],(function(e){var t=e.typed,n=e.format;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"hex",wordSize:t})}})}));var pt=ke("im",["typed"],(function(e){return(0,e.typed)("im",{number:function(e){return 0},BigNumber:function(e){return e.mul(0)},Fraction:function(e){return e.mul(0)},Complex:function(e){return e.im},"Array | Matrix":function(e){return Je(e,this)}})}));function mt(e){return 0===e}mt.signature="number";var vt=ke("isZero",["typed"],(function(e){return(0,e.typed)("isZero",{number:mt,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return this(e.value)},"Array | Matrix":function(e){return Je(e,this)}})})),gt=ke("multiplyScalar",["typed"],(function(e){return(0,e.typed)("multiplyScalar",{"number, number":nt,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})})),yt=ke("number",["typed"],(function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t,n,r=(n=(t=e).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:t,radix:{"0b":2,"0o":8,"0x":16}[n[1]],integerPart:n[2],fractionalPart:n[3]}:null;if(r)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++)n+=parseInt(e.fractionalPart[r],e.radix)/Math.pow(e.radix,r+1);var a=t+n;if(isNaN(a))throw new SyntaxError('String "'+e.input+'" is no valid number');return a}(r);var a=0,i=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);i&&(a=Number(i[2]),e=i[1]);var o=Number(e);if(isNaN(o))throw new SyntaxError('String "'+e+'" is no valid number');if(i){if(o>Math.pow(2,a)-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));o>=Math.pow(2,a-1)&&(o-=Math.pow(2,a))}return o},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Je(e,this)}});return t.fromJSON=function(e){return parseFloat(e.value)},t}));ke("oct",["typed","format"],(function(e){var t=e.typed,n=e.format;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"oct",wordSize:t})}})})),n("ikQK"),Date.now();var _t=ke("re",["typed"],(function(e){return(0,e.typed)("re",{number:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Complex:function(e){return e.re},"Array | Matrix":function(e){return Je(e,this)}})})),bt=ke("sign",["typed","BigNumber","Fraction","complex"],(function(e){var t=e.typed,n=e.BigNumber,r=e.complex,a=e.Fraction;return t("sign",{number:at,Complex:function(e){return 0===e.im?r(at(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},Fraction:function(e){return new a(e.s,1)},"Array | Matrix":function(e){return Je(e,this,!0)},Unit:function(e){return this(e.value)}})})),xt=ke("sin",["typed"],(function(e){return(0,e.typed)("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(e.value)},"Array | Matrix":function(e){return Je(e,this,!0)}})})),wt=ke("SparseMatrix",["typed","equalScalar","Matrix"],(function(e){var t=e.typed,n=e.equalScalar,r=e.Matrix;function a(e,t){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(d(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?j(t._values):void 0,e._index=j(t._index),e._ptr=j(t._ptr),e._size=j(t._size),e._datatype=n||t._datatype):i(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&f(e.index)&&f(e.ptr)&&f(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(f(e))i(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function i(e,r,a){e._values=[],e._index=[],e._ptr=[],e._datatype=a;var i=r.length,o=0,s=n,u=0;if(h(a)&&(s=t.find(n,[a,a])||n,u=t.convert(0,a)),i>0){var c=0;do{e._ptr.push(e._index.length);for(var l=0;l<i;l++){var d=r[l];if(f(d)){if(0===c&&o<d.length&&(o=d.length),c<d.length){var p=d[c];s(p,u)||(e._values.push(p),e._index.push(l))}}else 0===c&&o<1&&(o=1),s(d,u)||(e._values.push(d),e._index.push(l))}c++}while(c<o)}e._ptr.push(e._index.length),e._size=[i,o]}function u(e,t){if(!y(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,i,o,s=t.size();if(s.length!==e._size.length)throw new he(s.length,e._size.length);var u=t.min(),c=t.max();for(n=0,r=e._size.length;n<r;n++)me(u[n],e._size[n]),me(c[n],e._size[n]);var l=e._values,h=e._index,f=e._ptr,d=t.dimension(0),p=t.dimension(1),m=[],v=[];d.forEach((function(e,t){v[e]=t[0],m[e]=!0}));var g=l?[]:void 0,_=[],b=[];return p.forEach((function(e){for(b.push(_.length),i=f[e],o=f[e+1];i<o;i++)!0===m[n=h[i]]&&(_.push(v[n]),g&&g.push(l[i]))})),b.push(_.length),new a({values:g,index:_,ptr:b,size:s,datatype:e._datatype})}function c(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var a,i=t.size(),o=t.isScalar();if(d(n)?(a=n.size(),n=n.toArray()):a=de(n),o){if(0!==a.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==i.length&&2!==i.length)throw new he(i.length,e._size.length,"<");if(a.length<i.length){for(var s=0,u=0;1===i[s]&&1===a[s];)s++;for(;1===i[s];)u++,s++;n=be(n,i.length,u,a)}if(!K(i,a))throw new he(i,a,">");if(1===i.length)t.dimension(0).forEach((function(t,a){me(t),e.set([t,0],n[a[0]],r)}));else{var c=t.dimension(0),l=t.dimension(1);c.forEach((function(t,a){me(t),l.forEach((function(i,o){me(i),e.set([t,i],n[a[0]][o[0]],r)}))}))}}return e}function l(e,t,n,r){if(n-t==0)return n;for(var a=t;a<n;a++)if(r[a]===e)return a;return t}function m(e,t,n,r,a,i,o){a.splice(e,0,r),i.splice(e,0,t);for(var s=n+1;s<o.length;s++)o[s]++}function v(e,r,a,i){var o=i||0,s=n,u=0;h(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var c,l,f,d=!s(o,u),p=e._size[0],m=e._size[1];if(a>m){for(l=m;l<a;l++)if(e._ptr[l]=e._values.length,d)for(c=0;c<p;c++)e._values.push(o),e._index.push(c);e._ptr[a]=e._values.length}else a<m&&(e._ptr.splice(a+1,m-a),e._values.splice(e._ptr[a],e._values.length),e._index.splice(e._ptr[a],e._index.length));if(m=a,r>p){if(d){var v=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]+v,f=e._ptr[l+1]+v;var g=0;for(c=p;c<r;c++,g++)e._values.splice(f+g,0,o),e._index.splice(f+g,0,c),v++}e._ptr[m]=e._values.length}}else if(r<p){var y=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]-y;var _=e._ptr[l+1]-y;for(f=e._ptr[l];f<_;f++)(c=e._index[f])>r-1&&(e._values.splice(f,1),e._index.splice(f,1),y++)}e._ptr[l]=e._values.length}return e._size[0]=r,e._size[1]=a,e}function g(e,t,n,r,a){var i,o,s=r[0],u=r[1],c=[];for(i=0;i<s;i++)for(c[i]=[],o=0;o<u;o++)c[i][o]=0;for(o=0;o<u;o++)for(var l=n[o+1],h=n[o];h<l;h++)c[i=t[h]][o]=e?a?j(e[h]):e[h]:1;return c}return(a.prototype=new r).createSparseMatrix=function(e,t){return new a(e,t)},a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return we(this._values,H)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(e,t){return new a(e,t)},a.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},a.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,e);case 2:case 3:return c(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},a.prototype.get=function(e){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];me(t,this._size[0]),me(n,this._size[1]);var r=l(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},a.prototype.set=function(e,r,a){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new he(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var i=e[0],o=e[1],s=this._size[0],u=this._size[1],c=n,d=0;h(this._datatype)&&(c=t.find(n,[this._datatype,this._datatype])||n,d=t.convert(0,this._datatype)),(i>s-1||o>u-1)&&(v(this,Math.max(i+1,s),Math.max(o+1,u),a),s=this._size[0],u=this._size[1]),me(i,s),me(o,u);var p=l(i,this._ptr[o],this._ptr[o+1],this._index);return p<this._ptr[o+1]&&this._index[p]===i?c(r,d)?function(e,t,n,r,a){n.splice(e,1),r.splice(e,1);for(var i=t+1;i<a.length;i++)a[i]--}(p,o,this._values,this._index,this._ptr):this._values[p]=r:m(p,i,o,r,this._values,this._index,this._ptr),this},a.prototype.resize=function(e,t,n){if(!p(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((function(e){return Array.isArray(e)&&1===e.length?e[0]:e}));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(e){if(!o(e)||!$(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+le(r)+")")})),v(n?this.clone():this,r[0],r[1],t)},a.prototype.reshape=function(e,t){if(!f(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!o(t)||!$(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+le(e)+")")}));var n=this._size[0]*this._size[1];if(n!==(e=ge(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return r;for(var a=[],i=0;i<r._ptr.length;i++)for(var s=0;s<r._ptr[i+1]-r._ptr[i];s++)a.push(i);for(var u=r._values.slice(),c=r._index.slice(),h=0;h<r._index.length;h++){var d=c[h]*r._size[1]+a[h];a[h]=d%e[1],c[h]=Math.floor(d/e[1])}r._values.length=0,r._index.length=0,r._ptr.length=e[1]+1,r._size=e.slice();for(var p=0;p<r._ptr.length;p++)r._ptr[p]=0;for(var v=0;v<u.length;v++){var g=c[v],y=a[v],_=u[v];m(l(g,r._ptr[y],r._ptr[y+1],r._index),g,y,_,r._values,r._index,r._ptr)}return r},a.prototype.clone=function(){return new a({values:this._values?j(this._values):void 0,index:j(this._index),ptr:j(this._ptr),size:j(this._size),datatype:this._datatype})},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var i=this;return function(e,r,i,o,s,u,c){var l=[],f=[],d=[],p=n,m=0;h(e._datatype)&&(p=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var v=function(e,t,n){e=u(e,t,n),p(e,m)||(l.push(e),f.push(t))},g=0;g<=s;g++){d.push(l.length);var y=e._ptr[g],_=e._ptr[g+1];if(c)for(var b=y;b<_;b++){var x=e._index[b];x>=0&&x<=i&&v(e._values[b],x-0,g-0)}else{for(var w={},k=y;k<_;k++)w[e._index[k]]=e._values[k];for(var C=0;C<=i;C++)v(C in w?w[C]:0,C-0,g-0)}}return d.push(l.length),new a({values:l,index:f,ptr:d,size:[i-0+1,s-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],i)}),r)},a.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],a=0;a<r;a++){var i=this._ptr[a],o=this._ptr[a+1];if(t)for(var s=i;s<o;s++)e(this._values[s],[this._index[s],a],this);else{for(var u={},c=i;c<o;c++)u[this._index[c]]=this._values[c];for(var l=0;l<n;l++)e(l in u?u[l]:0,[l,a],this)}}},a.prototype[Symbol.iterator]=_regeneratorRuntime().mark((function e(){var t,n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._values){e.next=2;break}throw new Error("Cannot iterate a Pattern only matrix");case 2:t=this._size[1],n=0;case 3:if(!(n<t)){e.next=15;break}r=this._ptr[n+1],a=this._ptr[n];case 5:if(!(a<r)){e.next=12;break}return i=this._index[a],e.next=9,{value:this._values[a],index:[i,n]};case 9:a++,e.next=5;break;case 12:n++,e.next=3;break;case 15:case"end":return e.stop()}}),e,this)})),a.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)},a.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),a="Sparse Matrix ["+le(t,e)+" x "+le(n,e)+"] density: "+le(r,e)+"\n",i=0;i<n;i++)for(var o=this._ptr[i+1],s=this._ptr[i];s<o;s++)a+="\n    ("+le(this._index[s],e)+", "+le(i,e)+") ==> "+(this._values?le(this._values[s],e):"X");return a},a.prototype.toString=function(){return le(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(e){if(e){if(s(e)&&(e=e.toNumber()),!o(e)||!$(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[1],i=Math.min(this._size[0]-n,r-t),u=[],c=[],l=[];l[0]=0;for(var h=t;h<r&&u.length<i;h++)for(var f=this._ptr[h+1],d=this._ptr[h];d<f;d++){var p=this._index[d];if(p===h-t+n){u.push(this._values[d]),c[u.length-1]=p-n;break}}return l.push(u.length),new a({values:u,index:c,ptr:l,size:[i,1]})},a.fromJSON=function(e){return new a(e)},a.diagonal=function(e,r,i,u,c){if(!f(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(s(e)&&(e=e.toNumber()),!o(e)||!$(e)||e<1)throw new Error("Size values must be positive integers");return e})),i){if(s(i)&&(i=i.toNumber()),!o(i)||!$(i))throw new TypeError("The parameter k must be an integer number")}else i=0;var l=n,p=0;h(c)&&(l=t.find(n,[c,c])||n,p=t.convert(0,c));var m,v=i>0?i:0,g=i<0?-i:0,y=e[0],_=e[1],b=Math.min(y-g,_-v);if(f(r)){if(r.length!==b)throw new Error("Invalid value array length");m=function(e){return r[e]}}else if(d(r)){var x=r.size();if(1!==x.length||x[0]!==b)throw new Error("Invalid matrix length");m=function(e){return r.get([e])}}else m=function(){return r};for(var w=[],k=[],C=[],S=0;S<_;S++){C.push(w.length);var T=S-v;if(T>=0&&T<b){var E=m(T);l(E,p)||(k.push(T+g),w.push(E))}}return C.push(w.length),new a({values:w,index:k,ptr:C,size:[y,_]})},a.prototype.swapRows=function(e,t){if(!(o(e)&&$(e)&&o(t)&&$(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return me(e,this._size[0]),me(t,this._size[0]),a._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(e,t,n,r,a){for(var i=r[e+1],o=r[e];o<i;o++)a(n[o],t[o])},a._swapRows=function(e,t,n,r,a,i){for(var o=0;o<n;o++){var s=i[o],u=i[o+1],c=l(e,s,u,a),h=l(t,s,u,a);if(c<u&&h<u&&a[c]===e&&a[h]===t){if(r){var f=r[c];r[c]=r[h],r[h]=f}}else if(c<u&&a[c]===e&&(h>=u||a[h]!==t)){var d=r?r[c]:void 0;a.splice(h,0,t),r&&r.splice(h,0,d),a.splice(h<=c?c+1:c,1),r&&r.splice(h<=c?c+1:c,1)}else if(h<u&&a[h]===t&&(c>=u||a[c]!==e)){var p=r?r[h]:void 0;a.splice(c,0,e),r&&r.splice(c,0,p),a.splice(c<=h?h+1:h,1),r&&r.splice(c<=h?h+1:h,1)}}},a}),{isClass:!0});ke("bin",["typed","format"],(function(e){var t=e.typed,n=e.format;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"bin",wordSize:t})}})}));var kt=ke("cos",["typed"],(function(e){return(0,e.typed)("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(e.value)},"Array | Matrix":function(e){return Je(e,this)}})})),Ct=ke("sqrt",["config","typed","Complex"],(function(e){var t=e.config,n=e.typed,r=e.Complex;return n("sqrt",{number:a,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():a(e.toNumber())},"Array | Matrix":function(e){return Je(e,this,!0)},Unit:function(e){return e.pow(.5)}});function a(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}})),St=ke("unaryMinus",["typed"],(function(e){return(0,e.typed)("unaryMinus",{number:rt,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return Je(e,this,!0)}})})),Tt=ke("fraction",["typed","Fraction"],(function(e){var t=e.typed,n=e.Fraction;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return Je(e,this)}})})),Et=ke("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix,r=e.SparseMatrix;return t("matrix",{"":function(){return a([])},string:function(e){return a([],e)},"string, string":function(e,t){return a([],e,t)},Array:function(e){return a(e)},Matrix:function(e){return a(e,e.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(e,t,a){if("dense"===t||"default"===t||void 0===t)return new n(e,a);if("sparse"===t)return new r(e,a);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),At=ke("algorithm03",["typed"],(function(e){var t=e.typed;return function(e,n,r,a){var i=e._data,o=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,h=n._size,f=n._datatype;if(o.length!==h.length)throw new he(o.length,h.length);if(o[0]!==h[0]||o[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p=o[0],m=o[1],v=0,g=r;"string"==typeof s&&s===f&&(v=t.convert(0,d=s),g=t.find(r,[d,d]));for(var y=[],_=0;_<p;_++)y[_]=[];for(var b=[],x=[],w=0;w<m;w++){for(var k=w+1,C=l[w+1],S=l[w];S<C;S++){var T=c[S];b[T]=a?g(u[S],i[T][w]):g(i[T][w],u[S]),x[T]=k}for(var E=0;E<p;E++)y[E][w]=x[E]===k?b[E]:a?g(v,i[E][w]):g(i[E][w],v)}return e.createDenseMatrix({data:y,size:[p,m],datatype:d})}})),Mt=ke("algorithm05",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,a){var i=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,h=r._index,f=r._ptr,d=r._size,p=r._datatype;if(u.length!==d.length)throw new he(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,v=u[0],g=u[1],y=n,_=0,b=a;"string"==typeof c&&c===p&&(y=t.find(n,[m=c,m]),_=t.convert(0,m),b=t.find(a,[m,m]));var x,w,k,C,S=i&&l?[]:void 0,T=[],E=[],A=S?[]:void 0,M=S?[]:void 0,I=[],N=[];for(w=0;w<g;w++){E[w]=T.length;var R=w+1;for(k=s[w],C=s[w+1];k<C;k++)T.push(x=o[k]),I[x]=R,A&&(A[x]=i[k]);for(k=f[w],C=f[w+1];k<C;k++)I[x=h[k]]!==R&&T.push(x),N[x]=R,M&&(M[x]=l[k]);if(S)for(k=E[w];k<T.length;){var D=I[x=T[k]],O=N[x];if(D===R||O===R){var L=b(D===R?A[x]:_,O===R?M[x]:_);y(L,_)?T.splice(k,1):(S.push(L),k++)}}}return E[g]=T.length,e.createSparseMatrix({values:S,index:T,ptr:E,size:[v,g],datatype:m})}})),It=ke("algorithm11",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,a,i){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=c[0],d=c[1],p=n,m=0,v=a;"string"==typeof l&&(p=t.find(n,[h=l,h]),m=t.convert(0,h),r=t.convert(r,h),v=t.find(a,[h,h]));for(var g=[],y=[],_=[],b=0;b<d;b++){_[b]=y.length;for(var x=u[b+1],w=u[b];w<x;w++){var k=s[w],C=i?v(r,o[w]):v(o[w],r);p(C,m)||(y.push(k),g.push(C))}}return _[d]=y.length,e.createSparseMatrix({values:g,index:y,ptr:_,size:[f,d],datatype:h})}})),Nt=ke("algorithm12",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,a,i){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=c[0],d=c[1],p=a;"string"==typeof l&&(r=t.convert(r,h=l),p=t.find(a,[h,h]));for(var m=[],v=[],g=[],y=0;y<d;y++){for(var _=y+1,b=u[y+1],x=u[y];x<b;x++){var w=s[x];v[w]=o[x],g[w]=_}for(var k=0;k<f;k++)0===y&&(m[k]=[]),m[k][y]=g[k]===_?i?p(r,v[k]):p(v[k],r):i?p(r,0):p(0,r)}return new n({data:m,size:[f,d],datatype:h})}})),Rt=ke("algorithm13",["typed"],(function(e){var t=e.typed;return function(e,n,r){var a,i=e._data,o=e._size,s=e._datatype,u=n._data,c=n._size,l=n._datatype,h=[];if(o.length!==c.length)throw new he(o.length,c.length);for(var f=0;f<o.length;f++){if(o[f]!==c[f])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+c+")");h[f]=o[f]}var d=r;"string"==typeof s&&s===l&&(d=t.find(r,[a=s,a]));var p=h.length>0?function e(t,n,r,a,i,o){var s=[];if(n===r.length-1)for(var u=0;u<a;u++)s[u]=t(i[u],o[u]);else for(var c=0;c<a;c++)s[c]=e(t,n+1,r,r[n+1],i[c],o[c]);return s}(d,0,h,h[0],i,u):[];return e.createDenseMatrix({data:p,size:h,datatype:a})}})),Dt=ke("algorithm14",["typed"],(function(e){var t=e.typed;return function(e,n,r,a){var i,o=e._data,s=e._size,u=e._datatype,c=r;"string"==typeof u&&(n=t.convert(n,i=u),c=t.find(r,[i,i]));var l=s.length>0?function e(t,n,r,a,i,o,s){var u=[];if(n===r.length-1)for(var c=0;c<a;c++)u[c]=s?t(o,i[c]):t(i[c],o);else for(var l=0;l<a;l++)u[l]=e(t,n+1,r,r[n+1],i[l],o,s);return u}(c,0,s,s[0],o,n,a):[];return e.createDenseMatrix({data:l,size:j(s),datatype:i})}})),Ot=ke("algorithm01",["typed"],(function(e){var t=e.typed;return function(e,n,r,a){var i=e._data,o=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,h=n._size,f=n._datatype;if(o.length!==h.length)throw new he(o.length,h.length);if(o[0]!==h[0]||o[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p,m=o[0],v=o[1],g="string"==typeof s&&s===f?s:void 0,y=g?t.find(r,[g,g]):r,_=[];for(d=0;d<m;d++)_[d]=[];var b=[],x=[];for(p=0;p<v;p++){for(var w=p+1,k=l[p+1],C=l[p];C<k;C++)b[d=c[C]]=a?y(u[C],i[d][p]):y(i[d][p],u[C]),x[d]=w;for(d=0;d<m;d++)_[d][p]=x[d]===w?b[d]:i[d][p]}return e.createDenseMatrix({data:_,size:[m,v],datatype:g})}}));function Lt(){throw new Error('No "bignumber" implementation available')}function Ft(){throw new Error('No "fraction" implementation available')}function Pt(){throw new Error('No "matrix" implementation available')}var zt=ke("numeric",["number","?bignumber","?fraction"],(function(e){var t=e.number,n=e.bignumber,r=e.fraction,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:function(e){return t(e)},BigNumber:n?function(e){return n(e)}:Lt,Fraction:r?function(e){return r(e)}:Ft};return function(e,t){var n=H(e);if(!(n in a))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(a).join(", "));if(!(t in i))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(i).join(", "));return t===n?e:i[t](e)}})),Bt=ke("size",["typed","config","?matrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix;return t("size",{Matrix:function(e){return e.create(e.size())},Array:de,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([]):Pt()}})})),Ut=ke("algorithm07",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,a,i){var o=e._size,s=e._datatype,u=a._size,c=a._datatype;if(o.length!==u.length)throw new he(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var l,h,f,d=o[0],p=o[1],m=0,v=i;"string"==typeof s&&s===c&&(m=t.convert(0,l=s),v=t.find(i,[l,l]));var g=[];for(h=0;h<d;h++)g[h]=[];var y=[],_=[],b=[],x=[];for(f=0;f<p;f++){var w=f+1;for(r(e,f,b,y,w),r(a,f,x,_,w),h=0;h<d;h++)g[h][f]=v(b[h]===w?y[h]:m,x[h]===w?_[h]:m)}return new n({data:g,size:[d,p],datatype:l})};function r(e,t,n,r,a){for(var i=e._values,o=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var l=o[u];n[l]=a,r[l]=i[u]}}})),Vt=ke("smaller",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.DenseMatrix,i=At({typed:t}),o=Ut({typed:t,DenseMatrix:a}),s=Nt({typed:t,DenseMatrix:a}),u=Rt({typed:t}),c=Dt({typed:t});return t("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!se(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!ft(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})})),Wt=ke("algorithm10",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,a,i){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=c[0],d=c[1],p=a;"string"==typeof l&&(r=t.convert(r,h=l),p=t.find(a,[h,h]));for(var m=[],v=[],g=[],y=0;y<d;y++){for(var _=y+1,b=u[y+1],x=u[y];x<b;x++){var w=s[x];v[w]=o[x],g[w]=_}for(var k=0;k<f;k++)0===y&&(m[k]=[]),m[k][y]=g[k]===_?i?p(r,v[k]):p(v[k],r):r}return new n({data:m,size:[f,d],datatype:h})}})),Gt=ke("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,a=e.addScalar,i=e.unaryMinus,o=e.DenseMatrix,s=Ot({typed:t}),u=At({typed:t}),c=Mt({typed:t,equalScalar:r}),l=Wt({typed:t,DenseMatrix:o}),h=Rt({typed:t}),f=Dt({typed:t});return t("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Ht(e,t),c(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return Ht(e,t),u(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Ht(e,t),s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Ht(e,t),h(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return l(e,i(t),a)},"DenseMatrix, any":function(e,t){return f(e,t,this)},"any, SparseMatrix":function(e,t){return l(t,e,this,!0)},"any, DenseMatrix":function(e,t){return f(t,e,this,!0)},"Array, any":function(e,t){return f(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return f(n(t),e,this,!0).valueOf()}})}));function Ht(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new he(n.length,r.length)}var jt=ke("transpose",["typed","matrix"],(function(e){var t=e.typed,n=e.matrix;return t("transpose",{Array:function(e){return this(n(e)).valueOf()},Matrix:function(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],a=n[1];if(0===a)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+le(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,a=e._data,i=[],o=0;o<n;o++){r=i[o]=[];for(var s=0;s<t;s++)r[s]=j(a[s][o])}return e.createDenseMatrix({data:i,size:[n,t],datatype:e._datatype})}(e,r,a);break;case"sparse":t=function(e,t,n){for(var r,a,i,o=e._values,s=e._index,u=e._ptr,c=o?[]:void 0,l=[],h=[],f=[],d=0;d<t;d++)f[d]=0;for(r=0,a=s.length;r<a;r++)f[s[r]]++;for(var p=0,m=0;m<t;m++)h.push(p),p+=f[m],f[m]=h[m];for(h.push(p),i=0;i<n;i++)for(var v=u[i+1],g=u[i];g<v;g++){var y=f[s[g]]++;l[y]=i,o&&(c[y]=j(o[g]))}return e.createSparseMatrix({values:c,index:l,ptr:h,size:[n,t],datatype:e._datatype})}(e,r,a)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+le(this._size)+")")}return t},any:function(e){return j(e)}})})),qt=ke("zeros",["typed","config","matrix","BigNumber"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.BigNumber;return t("zeros",{"":function(){return"Array"===n.matrix?i([]):i([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return i(e,t)}return"Array"===n.matrix?i(e):i(e,"default")},Array:i,Matrix:function(e){var t=e.storage();return i(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return i(e.valueOf(),t)}});function i(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){s(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new a(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!$(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var i=r(t);return e.length>0?i.resize(e,n):i}var o=[];return e.length>0?ve(o,e,n):o}})),Kt=ke("ctranspose",["typed","transpose","conj"],(function(e){var t=e.typed,n=e.transpose,r=e.conj;return t("ctranspose",{any:function(e){return r(n(e))}})})),Xt=ke("diag",["typed","matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,a=e.SparseMatrix;return t("diag",{Array:function(e){return i(e,0,de(e),null)},"Array, number":function(e,t){return i(e,t,de(e),null)},"Array, BigNumber":function(e,t){return i(e,t.toNumber(),de(e),null)},"Array, string":function(e,t){return i(e,0,de(e),t)},"Array, number, string":function(e,t,n){return i(e,t,de(e),n)},"Array, BigNumber, string":function(e,t,n){return i(e,t.toNumber(),de(e),n)},Matrix:function(e){return i(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return i(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return i(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return i(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return i(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return i(e,t.toNumber(),e.size(),n)}});function i(e,t,i,o){if(!$(t))throw new TypeError("Second parameter in function diag must be an integer");var s=t>0?t:0,u=t<0?-t:0;switch(i.length){case 1:return function(e,t,n,i,o,s){var u=[i+o,i+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var c="sparse"===n?a.diagonal(u,e,t):r.diagonal(u,e,t);return null!==n?c:c.valueOf()}(e,t,o,i[0],u,s);case 2:return function(e,t,r,a,i,o){if(d(e)){var s=e.diagonal(t);return null!==r?r!==s.storage()?n(s,r):s:s.valueOf()}for(var u=Math.min(a[0]-i,a[1]-o),c=[],l=0;l<u;l++)c[l]=e[l+i][l+o];return null!==r?n(c):c}(e,t,o,i,u,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),Zt=ke("divideScalar",["typed","numeric"],(function(e){var t=e.typed,n=e.numeric;return t("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var r=e.clone(),a=n(1,H(t));return r.value=this(null===r.value?r._normalize(a):r.value,t),r},"number | Fraction | BigNumber, Unit":function(e,t){var r=t.clone();r=r.pow(-1);var a=n(1,H(e));return r.value=this(e,null===t.value?t._normalize(a):t.value),r},"Unit, Unit":function(e,t){return e.divide(t)}})})),Yt=ke("equal",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,a=e.DenseMatrix,i=At({typed:t}),o=Ut({typed:t,DenseMatrix:a}),s=Nt({typed:t,DenseMatrix:a}),u=Rt({typed:t}),c=Dt({typed:t});return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,r,!1)},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, SparseMatrix":function(e,t){return s(t,e,r,!0)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()}})})),Jt=(ke("equal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})})),ke("flatten",["typed","matrix"],(function(e){var t=e.typed,n=e.matrix;return t("flatten",{Array:function(e){return xe(j(e))},Matrix:function(e){var t=xe(j(e.toArray()));return n(t)}})}))),$t=ke("algorithm04",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,a){var i=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,h=r._index,f=r._ptr,d=r._size,p=r._datatype;if(u.length!==d.length)throw new he(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,v=u[0],g=u[1],y=n,_=0,b=a;"string"==typeof c&&c===p&&(y=t.find(n,[m=c,m]),_=t.convert(0,m),b=t.find(a,[m,m]));var x,w,k,C,S=i&&l?[]:void 0,T=[],E=[],A=i&&l?[]:void 0,M=i&&l?[]:void 0,I=[],N=[];for(w=0;w<g;w++){E[w]=T.length;var R=w+1;for(C=s[w+1],k=s[w];k<C;k++)T.push(x=o[k]),I[x]=R,A&&(A[x]=i[k]);for(C=f[w+1],k=f[w];k<C;k++)if(I[x=h[k]]===R){if(A){var D=b(A[x],l[k]);y(D,_)?I[x]=null:A[x]=D}}else T.push(x),N[x]=R,M&&(M[x]=l[k]);if(A&&M)for(k=E[w];k<T.length;)I[x=T[k]]===R?(S[k]=A[x],k++):N[x]===R?(S[k]=M[x],k++):T.splice(k,1)}return E[g]=T.length,e.createSparseMatrix({values:S,index:T,ptr:E,size:[v,g],datatype:m})}})),Qt=ke("ImmutableDenseMatrix",["smaller","DenseMatrix"],(function(e){var t=e.smaller,n=e.DenseMatrix;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!h(t))throw new Error("Invalid datatype: "+t);if(d(e)||f(e)){var a=new n(e,t);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(e&&f(e.data)&&f(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+H(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return(r.prototype=new n).type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return d(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:j(this._data),size:j(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},r}),{isClass:!0}),en=ke("Index",["ImmutableDenseMatrix"],(function(e){var t=e.ImmutableDenseMatrix;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,a=arguments.length;t<a;t++){var i=arguments[t];if(g(i))this._dimensions.push(i),this._isScalar=!1;else if(Array.isArray(i)||d(i)){var o=r(i.valueOf());this._dimensions.push(o);var s=o.size();1===s.length&&1===s[0]||(this._isScalar=!1)}else if("number"==typeof i)this._dimensions.push(r([i]));else{if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(i)}}}function r(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!$(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return n.prototype.type="Index",n.prototype.isIndex=!0,n.prototype.clone=function(){var e=new n;return e._dimensions=j(this._dimensions),e._isScalar=this._isScalar,e},n.create=function(e){var t=new n;return n.apply(t,e),t},n.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0]}return e},n.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max()}return e},n.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min()}return e},n.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},n.prototype.dimension=function(e){return this._dimensions[e]||null},n.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.valueOf=n.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray())}return e},n.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?JSON.stringify(r):r.toString())}return"["+e.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(e){return n.create(e.dimensions)},n}),{isClass:!0}),tn=ke("largerEq",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.DenseMatrix,i=At({typed:t}),o=Ut({typed:t,DenseMatrix:a}),s=Nt({typed:t,DenseMatrix:a}),u=Rt({typed:t}),c=Dt({typed:t});return t("largerEq",{"boolean, boolean":function(e,t){return e>=t},"number, number":function(e,t){return e>=t||se(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gte(t)||ft(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})}));function nn(e){var t=e.DenseMatrix;return function(e,n,r){var a=e.size();if(2!==a.length)throw new RangeError("Matrix must be two dimensional (size: "+le(a)+")");var i=a[0];if(i!==a[1])throw new RangeError("Matrix must be square (size: "+le(a)+")");var o=[];if(d(n)){var s=n.size(),u=n._data;if(1===s.length){if(s[0]!==i)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var c=0;c<i;c++)o[c]=[u[c]];return new t({data:o,size:[i,1],datatype:n._datatype})}if(2===s.length){if(s[0]!==i||1!==s[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(m(n)){if(r){o=[];for(var l=0;l<i;l++)o[l]=[u[l][0]];return new t({data:o,size:[i,1],datatype:n._datatype})}return n}if(v(n)){for(var h=0;h<i;h++)o[h]=[0];for(var p=n._values,g=n._index,y=n._ptr,_=y[1],b=y[0];b<_;b++)o[g[b]][0]=p[b];return new t({data:o,size:[i,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(f(n)){var x=de(n);if(1===x.length){if(x[0]!==i)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var w=0;w<i;w++)o[w]=[n[w]];return new t({data:o,size:[i,1]})}if(2===x.length){if(x[0]!==i||1!==x[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var k=0;k<i;k++)o[k]=[n[k][0]];return new t({data:o,size:[i,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var rn=ke("matrixFromColumns",["typed","matrix","flatten","size"],(function(e){var t=e.typed,n=e.matrix,r=e.flatten,a=e.size;return t("matrixFromColumns",{"...Array":function(e){return i(e)},"...Matrix":function(e){return n(i(e.map((function(e){return e.toArray()}))))}});function i(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=o(e[0]),n=[],a=0;a<t;a++)n[a]=[];var i,s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,c=o(u);if(c!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|c));for(var l=r(u),h=0;h<t;h++)n[h].push(l[h])}}catch(f){s.e(f)}finally{s.f()}return n}function o(e){var t=a(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}}));function an(e,t,n,r){if(!(this instanceof an))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}(an.prototype=new Error).constructor=Error,an.prototype.name="ArgumentsError",an.prototype.isArgumentsError=!0,n("lSNA");var on=ke("smallerEq",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.DenseMatrix,i=At({typed:t}),o=Ut({typed:t,DenseMatrix:a}),s=Nt({typed:t,DenseMatrix:a}),u=Rt({typed:t}),c=Dt({typed:t});return t("smallerEq",{"boolean, boolean":function(e,t){return e<=t},"number, number":function(e,t){return e<=t||se(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lte(t)||ft(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})})),sn=(ke("unequal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})})),ke("usolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,a=e.multiplyScalar,i=e.subtract,o=e.equalScalar,s=e.DenseMatrix,u=nn({DenseMatrix:s});return t("usolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=e._values,h=e._index,f=e._ptr,d=[],p=e._size[1]-1;p>=0;p--){var m=n[p][0]||0;if(o(m,0))d[p]=[0];else{for(var v=0,g=[],y=[],_=f[p],b=f[p+1]-1;b>=_;b--){var x=h[b];x===p?v=l[b]:x<p&&(g.push(l[b]),y.push(x))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var w=r(m,v),k=0,C=y.length;k<C;k++){var S=y[k];n[S]=[i(n[S][0],a(w,g[k]))]}d[p]=[w]}}return new s({data:d,size:[c,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return c(e,t)},"Array, Array | Matrix":function(e,t){return c(n(e),t).valueOf()}});function c(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=[],h=e._data,f=e._size[1]-1;f>=0;f--){var d=n[f][0]||0,p=void 0;if(o(d,0))p=0;else{var m=h[f][f];if(o(m,0))throw new Error("Linear system cannot be solved since matrix is singular");p=r(d,m);for(var v=f-1;v>=0;v--)n[v]=[i(n[v][0]||0,a(p,h[v][f]))]}l[f]=[p]}return new s({data:l,size:[c,1]})}}))),un=ke("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.addScalar,a=e.equalScalar,i=e.DenseMatrix,o=Ot({typed:t}),s=$t({typed:t,equalScalar:a}),u=Wt({typed:t,DenseMatrix:i}),c=Rt({typed:t}),l=Dt({typed:t});return t("add",q({"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,r)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,r,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,r,!0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,r)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"SparseMatrix, any":function(e,t){return u(e,t,r,!1)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"any, SparseMatrix":function(e,t){return u(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var r=this(e,t),a=0;a<n.length;a++)r=this(r,n[a]);return r}},r.signatures))}));n("6XX6");var cn=ke("dot",["typed","addScalar","multiplyScalar","conj","size"],(function(e){var t=e.typed,n=e.addScalar,r=e.multiplyScalar,a=e.conj,i=e.size;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,i){var u=o(e,i),c=d(e)?e._data:e,l=d(e)?e._datatype:void 0,h=d(i)?i._data:i,f=d(i)?i._datatype:void 0,p=2===s(e).length,m=2===s(i).length,v=n,g=r;if(l&&f&&l===f&&"string"==typeof l){var y=l;v=t.find(n,[y,y]),g=t.find(r,[y,y])}if(!p&&!m){for(var _=g(a(c[0]),h[0]),b=1;b<u;b++)_=v(_,g(a(c[b]),h[b]));return _}if(!p&&m){for(var x=g(a(c[0]),h[0][0]),w=1;w<u;w++)x=v(x,g(a(c[w]),h[w][0]));return x}if(p&&!m){for(var k=g(a(c[0][0]),h[0]),C=1;C<u;C++)k=v(k,g(a(c[C][0]),h[C]));return k}if(p&&m){for(var S=g(a(c[0][0]),h[0][0]),T=1;T<u;T++)S=v(S,g(a(c[T][0]),h[T][0]));return S}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);for(var a=e._index,i=e._values,s=t._index,u=t._values,c=0,l=n,h=r,f=0,d=0;f<a.length&&d<s.length;){var p=a[f],m=s[d];p<m?f++:p>m?d++:p===m&&(c=l(c,h(i[f],u[d])),f++,d++)}return c}});function o(e,t){var n,r,a=s(e),i=s(t);if(1===a.length)n=a[0];else{if(2!==a.length||1!==a[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+a.join(", ")+")");n=a[0]}if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");r=i[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(e){return d(e)?e.size():i(e)}})),ln=ke("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.BigNumber,i=e.DenseMatrix,o=e.SparseMatrix;return t("identity",{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return c(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return c(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return c(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return c(e,t,n)},Array:function(e){return u(e)},"Array, string":function(e,t){return u(e,t)},Matrix:function(e){return u(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return u(e.valueOf(),t)}});function u(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return c(e[0],e[0],t);case 2:return c(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function c(e,t,n){var r=s(e)||s(t)?a:null;if(s(e)&&(e=e.toNumber()),s(t)&&(t=t.toNumber()),!$(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!$(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var u=r?new a(1):1,c=r?new r(0):0,l=[e,t];if(n){if("sparse"===n)return o.diagonal(l,u,0,c);if("dense"===n)return i.diagonal(l,u,0,c);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var h=ve([],l,c),f=e<t?e:t,d=0;d<f;d++)h[d][d]=u;return h}})),hn=ke("larger",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.DenseMatrix,i=At({typed:t}),o=Ut({typed:t,DenseMatrix:a}),s=Nt({typed:t,DenseMatrix:a}),u=Rt({typed:t}),c=Dt({typed:t});return t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!se(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!ft(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,this,!0).valueOf()}})})),fn=ke("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(function(e){var t=e.typed,n=e.matrix,r=e.addScalar,a=e.multiplyScalar,i=e.equalScalar,o=e.dot,s=It({typed:t,equalScalar:i}),u=Dt({typed:t});function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var l=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var i,o=e._data,s=e._size,u=e._datatype,c=n._data,l=n._datatype,h=s[0],f=s[1],d=r,p=a;u&&l&&u===l&&"string"==typeof u&&(d=t.find(r,[i=u,i]),p=t.find(a,[i,i]));for(var m=[],v=0;v<h;v++){for(var g=o[v],y=p(g[0],c[0]),_=1;_<f;_++)y=d(y,p(g[_],c[_]));m[v]=y}return e.createDenseMatrix({data:m,size:[h],datatype:i})},"SparseMatrix, any":function(e,n){var o=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,h=n._data,f=n._datatype,d=e._size[0],p=n._size[0],m=[],v=[],g=[],y=r,_=a,b=i,x=0;c&&f&&c===f&&"string"==typeof c&&(y=t.find(r,[l=c,l]),_=t.find(a,[l,l]),b=t.find(i,[l,l]),x=t.convert(0,l));var w=[],k=[];g[0]=0;for(var C=0;C<p;C++){var S=h[C];if(!b(S,x))for(var T=u[C+1],E=u[C];E<T;E++){var A=s[E];k[A]?w[A]=y(w[A],_(S,o[E])):(k[A]=!0,v.push(A),w[A]=_(S,o[E]))}}for(var M=v.length,I=0;I<M;I++)m[I]=w[v[I]];return g[1]=v.length,e.createSparseMatrix({values:m,index:v,ptr:g,size:[d,1],datatype:l})}}),h=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var i,o=e._data,s=e._size,u=e._datatype,c=n._data,l=n._datatype,h=s[0],f=s[1],d=n._size[1],p=r,m=a;u&&l&&u===l&&"string"==typeof u&&(p=t.find(r,[i=u,i]),m=t.find(a,[i,i]));for(var v=[],g=0;g<h;g++){var y=o[g];v[g]=[];for(var _=0;_<d;_++){for(var b=m(y[0],c[0][_]),x=1;x<f;x++)b=p(b,m(y[x],c[x][_]));v[g][_]=b}}return e.createDenseMatrix({data:v,size:[h,d],datatype:i})},"DenseMatrix, SparseMatrix":function(e,n){var o=e._data,s=e._size,u=e._datatype,c=n._values,l=n._index,h=n._ptr,f=n._size,d=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,m=s[0],v=f[1],g=r,y=a,_=i,b=0;u&&d&&u===d&&"string"==typeof u&&(g=t.find(r,[p=u,p]),y=t.find(a,[p,p]),_=t.find(i,[p,p]),b=t.convert(0,p));for(var x=[],w=[],k=[],C=n.createSparseMatrix({values:x,index:w,ptr:k,size:[m,v],datatype:p}),S=0;S<v;S++){k[S]=w.length;var T=h[S],E=h[S+1];if(E>T)for(var A=0,M=0;M<m;M++){for(var I=M+1,N=void 0,R=T;R<E;R++){var D=l[R];A!==I?(N=y(o[M][D],c[R]),A=I):N=g(N,y(o[M][D],c[R]))}A!==I||_(N,b)||(w.push(M),x.push(N))}}return k[v]=w.length,C},"SparseMatrix, DenseMatrix":function(e,n){var o=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,h=n._data,f=n._datatype,d=e._size[0],p=n._size[0],m=n._size[1],v=r,g=a,y=i,_=0;c&&f&&c===f&&"string"==typeof c&&(v=t.find(r,[l=c,l]),g=t.find(a,[l,l]),y=t.find(i,[l,l]),_=t.convert(0,l));for(var b=[],x=[],w=[],k=e.createSparseMatrix({values:b,index:x,ptr:w,size:[d,m],datatype:l}),C=[],S=[],T=0;T<m;T++){w[T]=x.length;for(var E=T+1,A=0;A<p;A++){var M=h[A][T];if(!y(M,_))for(var I=u[A+1],N=u[A];N<I;N++){var R=s[N];S[R]!==E?(S[R]=E,x.push(R),C[R]=g(M,o[N])):C[R]=v(C[R],g(M,o[N]))}}for(var D=x.length,O=w[T];O<D;O++)b[O]=C[x[O]]}return w[m]=x.length,k},"SparseMatrix, SparseMatrix":function(e,n){var i,o=e._values,s=e._index,u=e._ptr,c=e._datatype,l=n._values,h=n._index,f=n._ptr,d=n._datatype,p=e._size[0],m=n._size[1],v=o&&l,g=r,y=a;c&&d&&c===d&&"string"==typeof c&&(g=t.find(r,[i=c,i]),y=t.find(a,[i,i]));for(var _,b,x,w,k,C,S=v?[]:void 0,T=[],E=[],A=e.createSparseMatrix({values:S,index:T,ptr:E,size:[p,m],datatype:i}),M=v?[]:void 0,I=[],N=0;N<m;N++){E[N]=T.length;var R=N+1;for(w=f[N+1],x=f[N];x<w;x++)if(C=h[x],v)for(b=u[C+1],_=u[C];_<b;_++)I[k=s[_]]!==R?(I[k]=R,T.push(k),M[k]=y(l[x],o[_])):M[k]=g(M[k],y(l[x],o[_]));else for(b=u[C+1],_=u[C];_<b;_++)I[k=s[_]]!==R&&(I[k]=R,T.push(k));if(v)for(var D=T.length,O=E[N];O<D;O++)S[O]=M[T[O]]}return E[m]=T.length,A}});return t("multiply",q({"Array, Array":function(e,t){c(de(e),de(t));var r=this(n(e),n(t));return d(r)?r.valueOf():r},"Matrix, Matrix":function(e,n){var i=e.size(),s=n.size();return c(i,s),1===i.length?1===s.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return o(e,t)}(e,n,i[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var i,o=e._data,s=e._datatype,u=n._data,c=n._datatype,l=e._size[0],h=n._size[1],f=r,d=a;s&&c&&s===c&&"string"==typeof s&&(f=t.find(r,[i=s,i]),d=t.find(a,[i,i]));for(var p=[],m=0;m<h;m++){for(var v=d(o[0],u[0][m]),g=1;g<l;g++)v=f(v,d(o[g],u[g][m]));p[m]=v}return e.createDenseMatrix({data:p,size:[h],datatype:i})}(e,n)}(e,n):1===s.length?l(e,n):h(e,n)},"Matrix, Array":function(e,t){return this(e,n(t))},"Array, Matrix":function(e,t){return this(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return s(e,t,a,!1)},"DenseMatrix, any":function(e,t){return u(e,t,a,!1)},"any, SparseMatrix":function(e,t){return s(t,e,a,!0)},"any, DenseMatrix":function(e,t){return u(t,e,a,!0)},"Array, any":function(e,t){return u(n(e),t,a,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,a,!0).valueOf()},"any, any":a,"any, any, ...any":function(e,t,n){for(var r=this(e,t),a=0;a<n.length;a++)r=this(r,n[a]);return r}},a.signatures))})),dn=ke("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],(function(e){var t=e.typed,n=e.config,r=e.identity,a=e.multiply,i=e.matrix,o=e.number,s=e.fraction,u=e.Complex;return t("pow",{"number, number":c,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){var r=e.pow(t);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(e.valueOf(),t.valueOf())},"Array, number":l,"Array, BigNumber":function(e,t){return l(e,t.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(e,t){return h(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function c(e,t){if(n.predictable&&!$(t)&&e<0)try{var r=s(t),a=o(r);if((t===a||Math.abs((t-a)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t)}catch(i){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:$(t)||e>=0||n.predictable?it(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0)}function l(e,t){if(!$(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var n=de(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var i=r(n[0]).valueOf(),o=e;t>=1;)1==(1&t)&&(i=a(o,i)),t>>=1,o=a(o,o);return i}function h(e,t){return i(l(e.valueOf(),t))}})),pn=ke("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],(function(e){var t=e.typed,n=e.matrix,r=e.zeros,i=e.identity,o=e.isZero,s=e.equal,u=e.sign,c=e.sqrt,l=e.conj,h=e.unaryMinus,f=e.addScalar,d=e.divideScalar,p=e.multiplyScalar,m=e.subtract,v=e.complex;return a()(t("qr",{DenseMatrix:function(e){return y(e)},SparseMatrix:function(e){return function(e){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=y(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:g});function g(e){var t,n,a,v=e._size[0],g=e._size[1],y=i([v],"dense"),_=y._data,b=e.clone(),x=b._data,w=r([v],"");for(a=0;a<Math.min(g,v);++a){var k=x[a][a],C=h(s(k,0)?1:u(k)),S=l(C),T=0;for(t=a;t<v;t++)T=f(T,p(x[t][a],l(x[t][a])));var E=p(C,c(T));if(!o(E)){var A=m(k,E);for(w[a]=1,t=a+1;t<v;t++)w[t]=d(x[t][a],A);var M=h(l(d(A,E))),I=void 0;for(n=a;n<g;n++){for(I=0,t=a;t<v;t++)I=f(I,p(l(w[t]),x[t][n]));for(I=p(I,M),t=a;t<v;t++)x[t][n]=p(m(x[t][n],p(w[t],I)),S)}for(t=0;t<v;t++){for(I=0,n=a;n<v;n++)I=f(I,p(_[t][n],w[n]));for(I=p(I,M),n=a;n<v;++n)_[t][n]=d(m(_[t][n],p(I,l(w[n]))),S)}}}return{Q:y,R:b,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function y(e){var t=g(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?v(0):0,a=0;a<n.length;++a)for(var i=0;i<a&&i<(n[0]||[]).length;++i)n[a][i]=r;return t}})),mn=ke("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(function(e){var t=e.typed,n=e.config,r=e.matrix,a=e.bignumber,i=e.smaller,o=e.smallerEq,s=e.larger,u=e.largerEq;return t("range",{string:l,"string, boolean":l,"number, number":function(e,t){return c(h(e,t,1))},"number, number, number":function(e,t,n){return c(h(e,t,n))},"number, number, boolean":function(e,t,n){return c(n?f(e,t,1):h(e,t,1))},"number, number, number, boolean":function(e,t,n,r){return c(r?f(e,t,n):h(e,t,n))},"BigNumber, BigNumber":function(e,t){return c(d(e,t,new(0,e.constructor)(1)))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return c(d(e,t,n))},"BigNumber, BigNumber, boolean":function(e,t,n){var r=e.constructor;return c(n?p(e,t,new r(1)):d(e,t,new r(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return c(r?p(e,t,n):d(e,t,n))}});function c(e){return"Matrix"===n.matrix?r?r(e):Pt():e}function l(e,t){var r=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===a&&Lt(),c((t?p:d)(a(r.start),a(r.end),a(r.step)))):c((t?f:h)(r.start,r.end,r.step))}function h(e,t,n){var r=[],a=e;if(n>0)for(;i(a,t);)r.push(a),a+=n;else if(n<0)for(;s(a,t);)r.push(a),a+=n;return r}function f(e,t,n){var r=[],a=e;if(n>0)for(;o(a,t);)r.push(a),a+=n;else if(n<0)for(;u(a,t);)r.push(a),a+=n;return r}function d(e,t,n){var r=a(0),o=[],u=e;if(n.gt(r))for(;i(u,t);)o.push(u),u=u.plus(n);else if(n.lt(r))for(;s(u,t);)o.push(u),u=u.plus(n);return o}function p(e,t,n){var r=a(0),i=[],s=e;if(n.gt(r))for(;o(s,t);)i.push(s),s=s.plus(n);else if(n.lt(r))for(;u(s,t);)i.push(s),s=s.plus(n);return i}})),vn=ke("usolveAll",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,a=e.multiplyScalar,i=e.subtract,o=e.equalScalar,s=e.DenseMatrix,u=nn({DenseMatrix:s});return t("usolveAll",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[u(e,t,!0)._data.map((function(e){return e[0]}))],c=e._size[0],l=e._values,h=e._index,f=e._ptr,d=e._size[1]-1;d>=0;d--)for(var p=n.length,m=0;m<p;m++){for(var v=n[m],g=[],y=[],_=f[d],b=0,x=f[d+1]-1;x>=_;x--){var w=h[x];w===d?b=l[x]:w<d&&(g.push(l[x]),y.push(w))}if(o(b,0))if(o(v[d],0)){if(0===m){var k=_toConsumableArray(v);k[d]=1;for(var C=0,S=y.length;C<S;C++){var T=y[C];k[T]=i(k[T],g[C])}n.push(k)}}else{if(0===m)return[];n.splice(m,1),m-=1,p-=1}else{v[d]=r(v[d],b);for(var E=0,A=y.length;E<A;E++){var M=y[E];v[M]=i(v[M],a(v[d],g[E]))}}}return n.map((function(e){return new s({data:e.map((function(e){return[e]})),size:[c,1]})}))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return c(e,t)},"Array, Array | Matrix":function(e,t){return c(n(e),t).map((function(e){return e.valueOf()}))}});function c(e,t){for(var n=[u(e,t,!0)._data.map((function(e){return e[0]}))],c=e._data,l=e._size[0],h=e._size[1]-1;h>=0;h--)for(var f=n.length,d=0;d<f;d++){var p=n[d];if(o(c[h][h],0))if(o(p[h],0)){if(0===d){var m=_toConsumableArray(p);m[h]=1;for(var v=h-1;v>=0;v--)m[v]=i(m[v],c[v][h]);n.push(m)}}else{if(0===d)return[];n.splice(d,1),d-=1,f-=1}else{p[h]=r(p[h],c[h][h]);for(var g=h-1;g>=0;g--)p[g]=i(p[g],a(p[h],c[g][h]))}}return n.map((function(e){return new s({data:e.map((function(e){return[e]})),size:[l,1]})}))}})),gn=ke("column",["typed","Index","matrix","range"],(function(e){var t=e.typed,n=e.Index,r=e.matrix,a=e.range;return t("column",{"Matrix, number":i,"Array, number":function(e,t){return i(r(j(e)),t).valueOf()}});function i(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");me(t,e.size()[1]);var r=a(0,e.size()[0]),i=new n(r,t);return e.subset(i)}})),yn=ke("cross",["typed","matrix","subtract","multiply"],(function(e){var t=e.typed,n=e.matrix,r=e.subtract,a=e.multiply;return t("cross",{"Matrix, Matrix":function(e,t){return n(i(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(i(e.toArray(),t))},"Array, Matrix":function(e,t){return n(i(e,t.toArray()))},"Array, Array":i});function i(e,t){var n=Math.max(de(e).length,de(t).length);e=_e(e),t=_e(t);var i=de(e),o=de(t);if(1!==i.length||1!==o.length||3!==i[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+i.join(", ")+"], B = ["+o.join(", ")+"])");var s=[r(a(e[1],t[2]),a(e[2],t[1])),r(a(e[2],t[0]),a(e[0],t[2])),r(a(e[0],t[1]),a(e[1],t[0]))];return n>1?[s]:s}})),_n=ke("FibonacciHeap",["smaller","larger"],(function(e){var t=e.smaller,n=e.larger,r=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function i(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var a=this._minimum;r.left=a,r.right=a.right,a.right=r,r.right.left=r,t(e,a.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return 0===this._size},a.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var a=this._minimum,i=e.degree,s=e.child;i>0;){var u=s.right;s.left.right=s.right,s.right.left=s.left,s.left=a,s.right=a.right,a.right=s,s.right.left=s,s.parent=null,s=u,i--}return e.left.right=e.right,e.right.left=e.left,a=e===e.right?null:function(e,a){var i,s=Math.floor(Math.log(a)*r)+1,u=new Array(s),c=0,l=e;if(l)for(c++,l=l.right;l!==e;)c++,l=l.right;for(;c>0;){for(var h=l.degree,f=l.right;i=u[h];){if(n(l.key,i.key)){var d=i;i=l,l=d}o(i,l),u[h]=null,h++}u[h]=l,l=f,c--}e=null;for(var p=0;p<s;p++)(i=u[p])&&(e?(i.left.right=i.right,i.right.left=i.left,i.left=e,i.right=e.right,e.right=i,i.right.left=i,t(i.key,e.key)&&(e=i)):e=i);return e}(a=e.right,this._size),this._size--,this._minimum=a,e},a.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=-1;var a=n.parent;return a&&t(n.key,a.key)&&(i(e,n,a),function e(t,n){var r=n.parent;r&&(n.mark?(i(t,n,r),e(r)):n.mark=!0)}(e,a)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var o=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return a}),{isClass:!0}),bn=ke("Spa",["addScalar","equalScalar","FibonacciHeap"],(function(e){var t=e.addScalar,n=e.equalScalar,r=e.FibonacciHeap;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},a.prototype.get=function(e){var t=this._values[e];return t?t.value:0},a.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},a.prototype.forEach=function(e,t,r){var a=this._heap,i=this._values,o=[],s=a.extractMinimum();for(s&&o.push(s);s&&s.key<=t;)s.key>=e&&(n(s.value,0)||r(s.key,s.value,this)),(s=a.extractMinimum())&&o.push(s);for(var u=0;u<o.length;u++){var c=o[u];i[(s=a.insert(c.key,c.value)).key]=s}},a.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var a=n.value;n.value=r.value,r.value=a}},a}),{isClass:!0}),xn=ke("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(function(e){var t=e.typed,n=e.matrix,r=e.abs,a=e.addScalar,i=e.divideScalar,o=e.multiplyScalar,s=e.subtract,u=e.larger,c=e.equalScalar,l=e.unaryMinus,h=e.DenseMatrix,f=e.SparseMatrix,d=e.Spa;return t("lup",{DenseMatrix:function(e){return p(e)},SparseMatrix:function(e){return function(e){var t,n,a,s=e._size[0],h=e._size[1],p=Math.min(s,h),m=e._values,v=e._index,g=e._ptr,y=[],_=[],b=[],x=[s,p],w=[],k=[],C=[],S=[p,h],T=[],E=[];for(t=0;t<s;t++)T[t]=t,E[t]=t;var A=function(){var e=new d;n<s&&(b.push(y.length),y.push(1),_.push(n)),C.push(w.length);var h=g[n+1];for(a=g[n];a<h;a++)e.set(T[t=v[a]],m[a]);n>0&&e.forEach(0,n-1,(function(t,n){f._forEachRow(t,y,_,b,(function(r,a){r>t&&e.accumulate(r,l(o(a,n)))}))}));var p,A,M,I,N=n,R=e.get(n),D=r(R);e.forEach(n+1,s-1,(function(e,t){var n=r(t);u(n,D)&&(N=e,D=n,R=t)})),n!==N&&(f._swapRows(n,N,x[1],y,_,b),f._swapRows(n,N,S[1],w,k,C),e.swap(n,N),I=E[A=N],T[M=E[p=n]]=A,T[I]=p,E[p]=I,E[A]=M),e.forEach(0,s-1,(function(e,t){e<=n?(w.push(t),k.push(e)):(t=i(t,R),c(t,0)||(y.push(t),_.push(e)))}))};for(n=0;n<h;n++)A();return C.push(w.length),b.push(y.length),{L:new f({values:y,index:_,ptr:b,size:x}),U:new f({values:w,index:k,ptr:C,size:S}),p:T,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=p(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function p(e){var t,n,l,f=e._size[0],d=e._size[1],p=Math.min(f,d),m=j(e._data),v=[],g=[f,p],y=[],_=[p,d],b=[];for(t=0;t<f;t++)b[t]=t;for(n=0;n<d;n++){if(n>0)for(t=0;t<f;t++){var x=Math.min(t,n),w=0;for(l=0;l<x;l++)w=a(w,o(m[t][l],m[l][n]));m[t][n]=s(m[t][n],w)}var k=n,C=0,S=0;for(t=n;t<f;t++){var T=m[t][n],E=r(T);u(E,C)&&(k=t,C=E,S=T)}if(n!==k&&(b[n]=[b[k],b[k]=b[n]][0],h._swapRows(n,k,m)),n<f)for(t=n+1;t<f;t++)c(m[t][n],0)||(m[t][n]=i(m[t][n],S))}for(n=0;n<d;n++)for(t=0;t<f;t++)0===n&&(t<d&&(y[t]=[]),v[t]=[]),t<n?(t<d&&(y[t][n]=m[t][n]),n<f&&(v[t][n]=0)):t!==n?(t<d&&(y[t][n]=0),n<f&&(v[t][n]=m[t][n])):(t<d&&(y[t][n]=m[t][n]),n<f&&(v[t][n]=1));var A=new h({data:v,size:g}),M=new h({data:y,size:_}),I=[];for(t=0,p=b.length;t<p;t++)I[b[t]]=t;return{L:A,U:M,p:I,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}})),wn=ke("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(function(e){var t=e.typed,n=e.matrix,r=e.subtract,a=e.multiply,i=e.unaryMinus,o=e.lup;return t("det",{any:function(e){return j(e)},"Array | Matrix":function(e){var t;switch((t=d(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return j(e);case 1:if(1===t[0])return j(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+le(t)+")");case 2:var s=t[0];if(s===t[1])return function(e,t,n){if(1===t)return j(e[0][0]);if(2===t)return r(a(e[0][0],e[1][1]),a(e[1][0],e[0][1]));for(var s=o(e),u=s.U[0][0],c=1;c<t;c++)u=a(u,s.U[c][c]);for(var l=0,h=0,f=[];;){for(;f[h];)h++;if(h>=t)break;for(var d=h,p=0;!f[s.p[d]];)f[s.p[d]]=!0,d=s.p[d],p++;p%2==0&&l++}return l%2==0?u:i(u)}(e.clone().valueOf(),s);throw new RangeError("Matrix must be square (size: "+le(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+le(t)+")")}}})})),kn=ke("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,a=e.addScalar,i=e.multiply,o=e.unaryMinus,s=e.det,u=e.identity,c=e.abs;return t("inv",{"Array | Matrix":function(e){var t=d(e)?e.size():de(e);switch(t.length){case 1:if(1===t[0])return d(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+le(t)+")");case 2:var a=t[0],i=t[1];if(a===i)return d(e)?n(l(e.valueOf(),a,i),e.storage()):l(e,a,i);throw new RangeError("Matrix must be square (size: "+le(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+le(t)+")")}},any:function(e){return r(1,e)}});function l(e,t,n){var l,h,f,d,p;if(1===t){if(0===(d=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,d)]]}if(2===t){var m=s(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(o(e[0][1]),m)],[r(o(e[1][0]),m),r(e[0][0],m)]]}var v=e.concat();for(l=0;l<t;l++)v[l]=v[l].concat();for(var g=u(t).valueOf(),y=0;y<n;y++){var _=c(v[y][y]),b=y;for(l=y+1;l<t;)c(v[l][y])>_&&(_=c(v[l][y]),b=l),l++;if(0===_)throw Error("Cannot calculate inverse, determinant is zero");(l=b)!==y&&(p=v[y],v[y]=v[l],v[l]=p,p=g[y],g[y]=g[l],g[l]=p);var x=v[y],w=g[y];for(l=0;l<t;l++){var k=v[l],C=g[l];if(l!==y){if(0!==k[y]){for(f=r(o(k[y]),x[y]),h=y;h<n;h++)k[h]=a(k[h],i(f,x[h]));for(h=0;h<n;h++)C[h]=a(C[h],i(f,w[h]))}}else{for(f=x[y],h=y;h<n;h++)k[h]=r(k[h],f);for(h=0;h<n;h++)C[h]=r(C[h],f)}}}return g}})),Cn=ke("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(function(e){var t=e.typed,n=e.matrix,r=e.multiply,a=e.equalScalar,i=e.divideScalar,o=e.inv,s=It({typed:t,equalScalar:a}),u=Dt({typed:t});return t("divide",q({"Array | Matrix, Array | Matrix":function(e,t){return r(e,o(t))},"DenseMatrix, any":function(e,t){return u(e,t,i,!1)},"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"Array, any":function(e,t){return u(n(e),t,i,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,o(t))}},i.signatures))})),Sn=ke("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],(function(e){var t=e.config,n=e.typed,r=e.matrix,a=e.addScalar,i=e.subtract,l=e.equal,h=e.abs,f=e.atan,d=e.cos,p=e.sin,m=e.multiplyScalar,v=e.divideScalar,g=e.inv,y=e.bignumber,_=e.multiply,b=e.add,x=e.larger,w=e.column,k=e.flatten,C=e.number,S=e.complex,T=e.sqrt,E=e.diag,A=e.qr,M=e.usolve,I=e.usolveAll,N=e.im,R=e.re,D=e.smaller,O=e.matrixFromColumns,L=e.dot,F=function(e){var t=e.config,n=e.addScalar,r=e.subtract,a=e.abs,i=e.atan,o=e.cos,s=e.sin,u=e.multiplyScalar,c=e.inv,l=e.bignumber,h=e.multiply,f=e.add;function d(e,n){for(var r,a=e.length,i=Math.abs(n/a),o=new Array(a),s=0;s<a;s++)o[s]=w(a,0),o[s][s]=1;for(var u=_(e);Math.abs(u[1])>=Math.abs(i);){var c=u[0][0],l=u[0][1];e=y(e,(h=e[c][c],f=e[l][l],d=e[c][l],r=Math.abs(f-h)<=t.epsilon?Math.PI/4:.5*Math.atan(2*d/(f-h))),c,l),o=m(o,r,c,l),u=_(e)}for(var h,f,d,p=w(a,0),v=0;v<a;v++)p[v]=e[v][v];return x(j(p),j(o))}function p(e,n){for(var o,s=e.length,f=a(n/s),d=new Array(s),p=0;p<s;p++)d[p]=w(s,0),d[p][p]=1;for(var m=b(e);a(m[1])>=a(f);){var y=m[0][0],_=m[0][1];e=g(e,(k=e[y][_],C=r(e[_][_],e[y][y]),o=a(C)<=t.epsilon?l(-1).acos().div(4):u(.5,i(h(2,k,c(C))))),y,_),d=v(d,o,y,_),m=b(e)}for(var k,C,S=w(s,0),T=0;T<s;T++)S[T]=e[T][T];return x(j(S),j(d))}function m(e,t,n,r){for(var a=e.length,i=Math.cos(t),o=Math.sin(t),s=w(a,0),u=w(a,0),c=0;c<a;c++)s[c]=i*e[c][n]-o*e[c][r],u[c]=o*e[c][n]+i*e[c][r];for(var l=0;l<a;l++)e[l][n]=s[l],e[l][r]=u[l];return e}function v(e,t,a,i){for(var c=e.length,h=o(t),f=s(t),d=w(c,l(0)),p=w(c,l(0)),m=0;m<c;m++)d[m]=r(u(h,e[m][a]),u(f,e[m][i])),p[m]=n(u(f,e[m][a]),u(h,e[m][i]));for(var v=0;v<c;v++)e[v][a]=d[v],e[v][i]=p[v];return e}function g(e,t,a,i){for(var c=e.length,d=l(o(t)),p=l(s(t)),m=u(d,d),v=u(p,p),g=w(c,l(0)),y=w(c,l(0)),_=h(l(2),d,p,e[a][i]),b=n(r(u(m,e[a][a]),_),u(v,e[i][i])),x=f(u(v,e[a][a]),_,u(m,e[i][i])),k=0;k<c;k++)g[k]=r(u(d,e[a][k]),u(p,e[i][k])),y[k]=n(u(p,e[a][k]),u(d,e[i][k]));e[a][a]=b,e[i][i]=x,e[a][i]=l(0),e[i][a]=l(0);for(var C=0;C<c;C++)C!==a&&C!==i&&(e[a][C]=g[C],e[C][a]=g[C],e[i][C]=y[C],e[C][i]=y[C]);return e}function y(e,t,n,r){for(var a=e.length,i=Math.cos(t),o=Math.sin(t),s=i*i,u=o*o,c=w(a,0),l=w(a,0),h=s*e[n][n]-2*i*o*e[n][r]+u*e[r][r],f=u*e[n][n]+2*i*o*e[n][r]+s*e[r][r],d=0;d<a;d++)c[d]=i*e[n][d]-o*e[r][d],l[d]=o*e[n][d]+i*e[r][d];e[n][n]=h,e[r][r]=f,e[n][r]=0,e[r][n]=0;for(var p=0;p<a;p++)p!==n&&p!==r&&(e[n][p]=c[p],e[p][n]=c[p],e[r][p]=l[p],e[p][r]=l[p]);return e}function _(e){for(var t=e.length,n=0,r=[0,1],a=0;a<t;a++)for(var i=a+1;i<t;i++)Math.abs(n)<Math.abs(e[a][i])&&(n=Math.abs(e[a][i]),r=[a,i]);return[r,n]}function b(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var o=i+1;o<t;o++)a(n)<a(e[i][o])&&(n=a(e[i][o]),r=[i,o]);return[r,n]}function x(e,t){for(var n=e.length,r=Array(n),i=Array(n),o=0;o<n;o++)i[o]=Array(n);for(var s=0;s<n;s++){for(var u=0,c=e[0],l=0;l<e.length;l++)a(e[l])<a(c)&&(c=e[u=l]);r[s]=e.splice(u,1)[0];for(var h=0;h<n;h++)i[h][s]=t[h][u],t[h].splice(u,1)}return{values:r,vectors:i}}function w(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.epsilon,a=arguments.length>3?arguments[3]:void 0;if("number"===a)return d(e,r);if("BigNumber"===a)return p(e,r);throw TypeError("Unsupported data type: "+a)}}({config:t,addScalar:a,subtract:i,column:w,flatten:k,equal:l,abs:h,atan:f,cos:d,sin:p,multiplyScalar:m,inv:g,bignumber:y,complex:S,multiply:_,add:b}),P=function(e){var t=e.addScalar,n=e.subtract,r=e.flatten,a=e.multiply,i=e.multiplyScalar,o=e.divideScalar,s=e.sqrt,u=e.abs,c=e.bignumber,l=e.diag,h=e.inv,f=e.qr,d=e.usolve,p=e.usolveAll,m=e.equal,v=e.complex,g=e.larger,y=e.smaller,_=e.matrixFromColumns,b=e.dot;function x(e,t,r,a,i,o,s,l){var h="BigNumber"===l,f="Complex"===l,d=h?c(0):f?v(0):0,p=h?c(1):f?v(1):1;if(y(u(r),s))return[[p,d],[d,p]];if(g(u(n(i,o)),s))return[[n(i,a),n(o,a)],[r,r]];var m=n(e,i),_=n(t,i),b=n(r,i),x=n(a,i);return y(u(_),s)?[[m,p],[b,d]]:[[_,d],[x,p]]}function w(e,t){for(var n=0;n<e.length;n++){var r;(r=e[n]).push.apply(r,_toConsumableArray(Array(t-e[n].length).fill(0)))}for(var a=e.length;a<t;a++)e.push(Array(t).fill(0)),e[a][a]=1;return e}function k(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return r;return-1}function C(e,t,n,r,a){for(var i,o="BigNumber"===a?c(1e3):1e3,s=0;i=S(t,n,a),i=d(e,i),!g(E(i),o);)if(++s>=5)return null;for(s=0;;){var u=d(e,i);if(y(E(T(i,[u])),r))break;if(++s>=10)return null;i=A(u)}return i}function S(e,t,n){var r="BigNumber"===n,a="Complex"===n,i=Array(e).fill(0).map((function(e){return 2*Math.random()-1}));return r&&(i=i.map((function(e){return c(e)}))),a&&(i=i.map((function(e){return v(e)}))),A(i=T(i,t),n)}function T(e,t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;e=n(e,a(o(b(s,e),b(s,s)),s))}}catch(u){i.e(u)}finally{i.f()}return e}function E(e){return u(s(b(e,e)))}function A(e,t){var n="Complex"===t,r="BigNumber"===t?c(1):n?v(1):1;return a(o(r,E(e)),e)}return function(e,d,b,S,T){void 0===T&&(T=!0);var E=function(e,n,r,a,s){var h,f="BigNumber"===a,d="Complex"===a,p=f?c(0):d?v(0):0,_=f?c(1):d?v(1):1,b=f?c(10):2,x=i(b,b);s&&(h=Array(n).fill(_));for(var w=!1;!w;){w=!0;for(var k=0;k<n;k++){for(var C=p,S=p,T=0;T<n;T++)if(k!==T){var E=u(e[k][T]);C=t(C,E),S=t(S,E)}if(!m(C,0)&&!m(S,0)){for(var A=_,M=C,I=o(S,b),N=i(S,b);y(M,I);)M=i(M,x),A=i(A,b);for(;g(M,N);)M=o(M,x),A=o(A,b);if(y(o(t(M,S),A),i(t(C,S),.95))){w=!1;for(var R=o(1,A),D=0;D<n;D++)k!==D&&(e[k][D]=i(e[k][D],A),e[D][k]=i(e[D][k],R));s&&(h[k]=i(h[k],A))}}}}return l(h)}(e,d,0,S,T);!function(e,r,a,s,l,h){var f="BigNumber"===s,d="Complex"===s,p=f?c(0):d?v(0):0;f&&(a=c(a));for(var m=0;m<r-2;m++){for(var g=0,_=p,b=m+1;b<r;b++){var x=e[b][m];y(u(_),u(x))&&(_=x,g=b)}if(!y(u(_),a)){if(g!==m+1){var w=e[g];e[g]=e[m+1],e[m+1]=w;for(var k=0;k<r;k++){var C=e[k][g];e[k][g]=e[k][m+1],e[k][m+1]=C}if(l){var S=h[g];h[g]=h[m+1],h[m+1]=S}}for(var T=m+2;T<r;T++){var E=o(e[T][m],_);if(0!==E){for(var A=0;A<r;A++)e[T][A]=n(e[T][A],i(E,e[m+1][A]));for(var M=0;M<r;M++)e[M][m+1]=t(e[M][m+1],i(E,e[M][T]));if(l)for(var I=0;I<r;I++)h[T][I]=n(h[T][I],i(E,h[m+1][I]))}}}}}(e,d,b,S,T,E);var A,M=function(e,r,o,h,d){var p="BigNumber"===h,m="Complex"===h,g=p?c(1):m?v(1):1;p&&(o=c(o));for(var _,b,k,C,S,T,E,A,M=j(e),I=[],N=r,R=[],D=d?l(Array(r).fill(g)):void 0,O=d?l(Array(N).fill(g)):void 0,L=0;L<=100;){L+=1;for(var F=0;F<N;F++)M[F][F]=n(M[F][F],0);var P=f(M),z=P.Q,B=P.R;M=a(B,z);for(var U=0;U<N;U++)M[U][U]=t(M[U][U],0);if(d&&(O=a(O,z)),1===N||y(u(M[N-1][N-2]),o)){L=0,I.push(M[N-1][N-1]),d&&(R.unshift([[1]]),w(O,r),D=a(D,O),N>1&&(O=l(Array(N-1).fill(g)))),N-=1,M.pop();for(var V=0;V<N;V++)M[V].pop()}else if(2===N||y(u(M[N-2][N-3]),o)){L=0;var W=(b=M[N-2][N-1],k=M[N-1][N-2],S=t(_=M[N-2][N-2],C=M[N-1][N-1]),T=n(i(_,C),i(b,k)),E=i(S,.5),A=i(s(n(i(S,S),i(4,T))),.5),[t(E,A),n(E,A)]);I.push.apply(I,W),d&&(R.unshift(x(M[N-2][N-2],M[N-2][N-1],M[N-1][N-2],M[N-1][N-1],W[0],W[1],o,h)),w(O,r),D=a(D,O),N>2&&(O=l(Array(N-2).fill(g)))),N-=2,M.pop(),M.pop();for(var G=0;G<N;G++)M[G].pop(),M[G].pop()}if(0===N)break}if(I.sort((function(e,t){return+n(u(e),u(t))})),L>100){var H=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+I.join(", "));throw H.values=I,H.vectors=[],H}return{values:I,C:d?a(D,function(e,t){for(var n=[],r=0;r<t;r++)n[r]=Array(t).fill(0);var a,i=0,o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.length,c=0;c<u;c++)for(var l=0;l<u;l++)n[i+c][i+l]=s[c][l];i+=u}}catch(H){o.e(H)}finally{o.f()}return n}(R,r)):void 0}}(e,d,b,S,T),I=M.values,N=M.C;return N=a(h(E),N),T&&(A=function(e,t,i,o,s,u){var f,d=h(i),g=a(d,e,i),y="BigNumber"===u,_="Complex"===u,b=y?c(0):_?v(0):0,x=y?c(1):_?v(1):1,w=[],S=[],T=_createForOfIteratorHelper(o);try{for(T.s();!(f=T.n()).done;){var E=f.value,A=k(w,E,m);-1===A?(w.push(E),S.push(1)):S[A]+=1}}catch(B){T.e(B)}finally{T.f()}for(var M=[],I=w.length,N=Array(t).fill(b),R=l(Array(t).fill(x)),D=[],O=0;O<I;O++){var L=w[O],F=n(g,a(L,R)),P=p(F,N);for((P=P.map((function(e){return a(i,e)}))).shift();P.length<S[O];){var z=C(F,t,P,s,u);if(null==z){D.push(L);break}P.push(z)}M.push.apply(M,_toConsumableArray(P.map((function(e){return r(e)}))))}if(0!==D.length){var B=new Error("Failed to find eigenvectors for the following eigenvalues: "+D.join(", "));throw B.values=o,B.vectors=M,B}return M}(e,d,N,I,b,S),A=_.apply(void 0,_toConsumableArray(A))),{values:I,vectors:A}}}({config:t,addScalar:a,subtract:i,multiply:_,multiplyScalar:m,flatten:k,divideScalar:v,sqrt:T,abs:h,bignumber:y,diag:E,qr:A,inv:g,usolve:M,usolveAll:I,equal:l,complex:S,larger:x,smaller:D,matrixFromColumns:O,dot:L});return n("eigs",{Array:function(e){return z(r(e))},"Array, number|BigNumber":function(e,t){return z(r(e),t)},Matrix:function(e){var t=z(e),n=t.values,a=t.vectors;return{values:r(n),vectors:r(a)}},"Matrix, number|BigNumber":function(e,t){var n=z(e,t),a=n.values,i=n.vectors;return{values:r(a),vectors:r(i)}}});function z(e,n){void 0===n&&(n=t.epsilon);var r=e.size();if(2!==r.length||r[0]!==r[1])throw new RangeError("Matrix must be square (size: "+le(r)+")");var a=e.toArray(),o=r[0];if(function(e,t,n){for(var r=0;r<t;r++)for(var a=0;a<t;a++)if(x(y(h(N(e[r][a]))),n))return!1;return!0}(a,o,n)&&(function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)e[n][r]=R(e[n][r])}(a,o),function(e,t,n){for(var r=0;r<t;r++)for(var a=r;a<t;a++)if(x(y(h(i(e[r][a],e[a][r]))),n))return!1;return!0}(a,o,n))){var s=B(e,a,o);return F(a,o,n,s)}var u=B(e,a,o);return P(a,o,n,u)}function B(e,t,n){var r=e.datatype();if("number"===r||"BigNumber"===r||"Complex"===r)return r;for(var a=!1,i=!1,l=!1,h=0;h<n;h++)for(var f=0;f<n;f++){var d=t[h][f];if(o(d)||c(d))a=!0;else if(s(d))i=!0;else{if(!u(d))throw TypeError("Unsupported type in Matrix: "+H(d));l=!0}}if(i&&l&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),l){for(var p=0;p<n;p++)for(var m=0;m<n;m++)t[p][m]=S(t[p][m]);return"Complex"}if(i){for(var v=0;v<n;v++)for(var g=0;g<n;g++)t[v][g]=y(t[v][g]);return"BigNumber"}if(a){for(var _=0;_<n;_++)for(var b=0;b<n;b++)t[_][b]=C(t[_][b]);return"number"}throw TypeError("Matrix contains unsupported types only.")}})),Tn=ke("norm",["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],(function(e){var t=e.typed,n=e.abs,r=e.add,a=e.pow,i=e.conj,o=e.sqrt,s=e.multiply,u=e.equalScalar,c=e.larger,l=e.smaller,h=e.matrix,f=e.ctranspose,d=e.eigs;return t("norm",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return p(h(e),2)},Matrix:function(e){return p(e,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(e){return this(e)},"Array, number | BigNumber | string":function(e,t){return p(h(e),t)},"Matrix, number | BigNumber | string":function(e,t){return p(e,t)}});function p(e,t){var h=e.size();if(1===h.length)return function(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var r=n(e);c(r,t)&&(t=r)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var r=n(e);t&&!l(r,t)||(t=r)}),!0),t||0}(e);if("fro"===t)return p(e,2);if("number"==typeof t&&!isNaN(t)){if(!u(t,0)){var i=0;return e.forEach((function(e){i=r(a(n(e),t),i)}),!0),a(i,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}(e,t);if(2===h.length){if(h[0]&&h[1])return function(e,t){if(1===t)return function(e){var t=[],a=0;return e.forEach((function(e,i){var o=i[1],s=r(t[o]||0,n(e));c(s,a)&&(a=s),t[o]=s}),!0),a}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],a=0;return e.forEach((function(e,i){var o=i[0],s=r(t[o]||0,n(e));c(s,a)&&(a=s),t[o]=s}),!0),a}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,n){t=r(t,s(e,i(e)))})),n(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=f(e),a=s(r,e),i=d(a).values.toArray();return n(o(i[i.length-1]))}(e);throw new Error("Unsupported parameter value "+t)}(e,t);throw new RangeError("Invalid matrix dimensions")}}}));n.d(t,"d",(function(){return $n})),n.d(t,"f",(function(){return nr})),n.d(t,"c",(function(){return vr})),n.d(t,"a",(function(){return Sr})),n.d(t,"b",(function(){return Er})),n.d(t,"e",(function(){return Ar}));var En=Se({config:Z}),An=Ae({}),Mn=Fe({}),In=Pe({}),Nn=ze({Matrix:In}),Rn=Ke({BigNumber:En,Complex:An,DenseMatrix:Nn,Fraction:Mn}),Dn=ot({typed:Rn}),On=st({typed:Rn}),Ln=ut({typed:Rn}),Fn=ct({BigNumber:En,typed:Rn}),Pn=lt({Complex:An,typed:Rn}),zn=ht({typed:Rn}),Bn=dt({config:Z,typed:Rn}),Un=pt({typed:Rn}),Vn=vt({typed:Rn}),Wn=gt({typed:Rn}),Gn=yt({typed:Rn}),Hn=_t({typed:Rn}),jn=bt({BigNumber:En,Fraction:Mn,complex:Pn,typed:Rn}),qn=xt({typed:Rn}),Kn=wt({Matrix:In,equalScalar:Bn,typed:Rn}),Xn=kt({typed:Rn}),Zn=Ct({Complex:An,config:Z,typed:Rn}),Yn=St({typed:Rn}),Jn=Tt({Fraction:Mn,typed:Rn}),$n=Et({DenseMatrix:Nn,Matrix:In,SparseMatrix:Kn,typed:Rn}),Qn=zt({bignumber:Fn,fraction:Jn,number:Gn}),er=Bt({matrix:$n,config:Z,typed:Rn}),tr=Vt({DenseMatrix:Nn,config:Z,matrix:$n,typed:Rn}),nr=Gt({DenseMatrix:Nn,addScalar:On,equalScalar:Bn,matrix:$n,typed:Rn,unaryMinus:Yn}),rr=jt({matrix:$n,typed:Rn}),ar=qt({BigNumber:En,config:Z,matrix:$n,typed:Rn}),ir=Kt({conj:zn,transpose:rr,typed:Rn}),or=Xt({DenseMatrix:Nn,SparseMatrix:Kn,matrix:$n,typed:Rn}),sr=Zt({numeric:Qn,typed:Rn}),ur=Yt({DenseMatrix:Nn,equalScalar:Bn,matrix:$n,typed:Rn}),cr=Jt({matrix:$n,typed:Rn}),lr=en({ImmutableDenseMatrix:Qt({DenseMatrix:Nn,smaller:tr})}),hr=tn({DenseMatrix:Nn,config:Z,matrix:$n,typed:Rn}),fr=rn({flatten:cr,matrix:$n,size:er,typed:Rn}),dr=on({DenseMatrix:Nn,config:Z,matrix:$n,typed:Rn}),pr=sn({DenseMatrix:Nn,divideScalar:sr,equalScalar:Bn,matrix:$n,multiplyScalar:Wn,subtract:nr,typed:Rn}),mr=un({DenseMatrix:Nn,SparseMatrix:Kn,addScalar:On,equalScalar:Bn,matrix:$n,typed:Rn}),vr=cn({addScalar:On,conj:zn,multiplyScalar:Wn,size:er,typed:Rn}),gr=ln({BigNumber:En,DenseMatrix:Nn,SparseMatrix:Kn,config:Z,matrix:$n,typed:Rn}),yr=hn({DenseMatrix:Nn,config:Z,matrix:$n,typed:Rn}),_r=fn({addScalar:On,dot:vr,equalScalar:Bn,matrix:$n,multiplyScalar:Wn,typed:Rn}),br=dn({Complex:An,config:Z,fraction:Jn,identity:gr,matrix:$n,multiply:_r,number:Gn,typed:Rn}),xr=pn({addScalar:On,complex:Pn,conj:zn,divideScalar:sr,equal:ur,identity:gr,isZero:Vn,matrix:$n,multiplyScalar:Wn,sign:jn,sqrt:Zn,subtract:nr,typed:Rn,unaryMinus:Yn,zeros:ar}),wr=mn({bignumber:Fn,matrix:$n,config:Z,larger:yr,largerEq:hr,smaller:tr,smallerEq:dr,typed:Rn}),kr=vn({DenseMatrix:Nn,divideScalar:sr,equalScalar:Bn,matrix:$n,multiplyScalar:Wn,subtract:nr,typed:Rn}),Cr=gn({Index:lr,matrix:$n,range:wr,typed:Rn}),Sr=yn({matrix:$n,multiply:_r,subtract:nr,typed:Rn}),Tr=kn({abs:Dn,addScalar:On,det:wn({lup:xn({DenseMatrix:Nn,Spa:bn({FibonacciHeap:_n({larger:yr,smaller:tr}),addScalar:On,equalScalar:Bn}),SparseMatrix:Kn,abs:Dn,addScalar:On,divideScalar:sr,equalScalar:Bn,larger:yr,matrix:$n,multiplyScalar:Wn,subtract:nr,typed:Rn,unaryMinus:Yn}),matrix:$n,multiply:_r,subtract:nr,typed:Rn,unaryMinus:Yn}),divideScalar:sr,identity:gr,matrix:$n,multiply:_r,typed:Rn,unaryMinus:Yn}),Er=Cn({divideScalar:sr,equalScalar:Bn,inv:Tr,matrix:$n,multiply:_r,typed:Rn}),Ar=Tn({abs:Dn,add:mr,conj:zn,ctranspose:ir,eigs:Sn({abs:Dn,add:mr,addScalar:On,atan:Ln,bignumber:Fn,column:Cr,complex:Pn,config:Z,cos:Xn,diag:or,divideScalar:sr,dot:vr,equal:ur,flatten:cr,im:Un,inv:Tr,larger:yr,matrix:$n,matrixFromColumns:fr,multiply:_r,multiplyScalar:Wn,number:Gn,qr:xr,re:Hn,sin:qn,smaller:tr,sqrt:Zn,subtract:nr,typed:Rn,usolve:pr,usolveAll:kr}),equalScalar:Bn,larger:yr,matrix:$n,multiply:_r,pow:br,smaller:tr,sqrt:Zn,typed:Rn})},eUH1:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},endd:function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},eqyj:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},euyF:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n=a[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=0==(n=s[127&i]^=r+(o=o+1640531527|0))?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,s[a]=(r^=r>>>15)^(n^=n>>>12);e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"f+t/":function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},g7np:function(e,t,n){"use strict";var r=n("2SVd"),a=n("5oMp");e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},hIuj:function(e,t,n){"use strict";var r=n("XM5P").version,a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(a(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var s=e[i],u=void 0===s||o(s,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},ie1u:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},ikQK:function(e,t,n){var r=n("3Mn4"),a=n("EJp0"),i=n("I05N"),o=n("HzFN"),s=n("d0Zt"),u=n("5o5E"),c=n("5fPn");c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},"jfS+":function(e,t,n){"use strict";var r=n("endd");function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},meep:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},oIJX:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},pDBr:function(e,t,n){var r=n("YWYm"),a=n("f+t/"),i=n("34t7"),o=n("PkQR"),s=n("5vwH"),u=n("oIJX"),c=n("9/Hw");c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},"pJ3+":function(e,t,n){var r;!function(a,i){var o,s=(0,eval)("this"),u=i.pow(256,6),c=i.pow(2,52),l=2*c;function h(e,t,n){var r=[],h=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(o){}return a.length?a:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,m(a)]}}():e,3),r),v=new f(r),g=function(){for(var e=v.g(6),t=u,n=0;e<c;)e=256*(e+n),t*=256,n=v.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(m(v.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&d(r,v),e.state=function(){return d(v,{})}),n?(i.random=e,t):e})(g,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,p(i.random(),a),e.exports){e.exports=h;try{o=n(4)}catch(v){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},pJ6O:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},pVnL:function(e,t){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},qAop:function(e,t,n){"use strict";var r=n("meep"),a=n("Ivzd"),i=null,o=null,s=void 0,u=!1,c=!1,l={setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=l.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,arguments)})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=l.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)})),delegate:void 0};function h(){}var f=d("C",void 0,void 0);function d(e,t,n){return{kind:e,value:t,error:n}}var p=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isStopped=!1,e?(r.destination=e,Object(a.c)(e)&&e.add(_assertThisInitialized(r))):r.destination=_,r}return _createClass(n,[{key:"next",value:function(e){this.isStopped?y(function(e){return d("N",e,void 0)}(e),this):this._next(e)}},{key:"error",value:function(e){this.isStopped?y(d("E",void 0,e),this):(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped?y(f,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get2(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){try{this.destination.error(e)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(e,t,n){return new m(e,t,n)}}]),n}(a.b),m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var o,s;if(_classCallCheck(this,n),o=t.call(this),Object(r.a)(e))s=e;else if(e){var u;s=e.next,a=e.error,i=e.complete,_assertThisInitialized(o)&&c?(u=Object.create(e)).unsubscribe=function(){return o.unsubscribe()}:u=e,s=null==s?void 0:s.bind(u),a=null==a?void 0:a.bind(u),i=null==i?void 0:i.bind(u)}return o.destination={next:s?v(s,_assertThisInitialized(o)):h,error:v(null!=a?a:g,_assertThisInitialized(o)),complete:i?v(i,_assertThisInitialized(o)):h},_possibleConstructorReturn(o)}return _createClass(n)}(p);function v(e,t){return function(){try{e.apply(void 0,arguments)}catch(n){if(u){if(!t._syncErrorHack_isSubscribing)throw n;t.__syncError=n}else!function(e){l.setTimeout((function(){if(!i)throw e;i(e)}))}(n)}}}function g(e){throw e}function y(e,t){var n=o;n&&l.setTimeout((function(){return n(e,t)}))}var _={closed:!0,next:h,error:g,complete:h},b="function"==typeof Symbol&&Symbol.observable||"@@observable";function x(e){return e}var w=function(){function e(t){_classCallCheck(this,e),t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var i,o=(i=e)&&i instanceof p||function(e){return e&&Object(r.a)(e.next)&&Object(r.a)(e.error)&&Object(r.a)(e.complete)}(i)&&Object(a.c)(i)?e:new m(e,t,n);if(u)this._deprecatedSyncErrorSubscribe(o);else{var s=this.operator,c=this.source;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}return o}},{key:"_deprecatedSyncErrorSubscribe",value:function(e){var t=e;t._syncErrorHack_isSubscribing=!0;var n=this.operator;if(n)e.add(n.call(e,this.source));else try{this._subscribe(e)}catch(a){t.__syncError=a}for(var r=t;r;){if("__syncError"in r)try{throw r.__syncError}finally{e.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){e.error(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=k(t))((function(t,r){var a;a=n.subscribe((function(t){try{e(t)}catch(n){r(n),null==a||a.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)}},{key:b,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length?(0===(r=t).length?x:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this):this;var r}},{key:"toPromise",value:function(e){var t=this;return new(e=k(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}();function k(e){var t;return null!==(t=null!=e?e:s)&&void 0!==t?t:Promise}w.create=function(e){return new w(e)};var C=n("HoZ9"),S=Object(C.a)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),T=n("D9hF");n.d(t,"a",(function(){return E}));var E=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:"lift",value:function(e){var t=new A(this,this);return t.operator=e,t}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new S}},{key:"next",value:function(e){if(this._throwIfClosed(),!this.isStopped){var t,n=_createForOfIteratorHelper(this.observers.slice());try{for(n.s();!(t=n.n()).done;){t.value.next(e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"error",value:function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}}},{key:"complete",value:function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){return this._throwIfClosed(),_get2(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}},{key:"_innerSubscribe",value:function(e){var t=this.hasError,n=this.isStopped,r=this.observers;return t||n?a.a:(r.push(e),new a.b((function(){return Object(T.a)(r,e)})))}},{key:"_checkFinalizedStatuses",value:function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()}},{key:"asObservable",value:function(){var e=new w;return e.source=this,e}}]),n}(w);E.create=function(e,t){return new A(e,t)};var A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).destination=e,a.source=r,a}return _createClass(n,[{key:"next",value:function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}},{key:"error",value:function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}},{key:"complete",value:function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}},{key:"_subscribe",value:function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:a.a}}]),n}(E)},tQ2B:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("Rn+g"),i=n("eqyj"),o=n("MLWZ"),s=n("g7np"),u=n("w0Vi"),c=n("OTTw"),l=n("LYNF"),h=n("JEQr"),f=n("endd");e.exports=function(e){return new Promise((function(t,n){var d,p=e.data,m=e.headers,v=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(p)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(_+":"+b)}var x=s(e.baseURL,e.url);function w(){if(y){var r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null;a((function(e){t(e),g()}),(function(e){n(e),g()}),{data:v&&"text"!==v&&"json"!==v?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y}),y=null}}if(y.open(e.method.toUpperCase(),o(x,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(w)},y.onabort=function(){y&&(n(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,(e.transitional||h.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||c(x))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;k&&(m[e.xsrfHeaderName]=k)}"setRequestHeader"in y&&r.forEach(m,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),v&&"json"!==v&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){y&&(n(!e||e&&e.type?new f("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),p||(p=null),y.send(p)}))}},uDiL:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},vDqi:function(e,t,n){e.exports=n("zuR4")},w0Vi:function(e,t,n){"use strict";var r=n("xTJ+"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},wptm:function(e,t,n){var r;!function(a,i){var o,s=this,u=i.pow(256,6),c=i.pow(2,52),l=2*c;function h(e,t,n){var r=[],h=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(o){}return a.length?a:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,m(a)]}}():e,3),r),v=new f(r),g=function(){for(var e=v.g(6),t=u,n=0;e<c;)e=256*(e+n),t*=256,n=v.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(m(v.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&d(r,v),e.state=function(){return d(v,{})}),n?(i.random=e,t):e})(g,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,p(i.random(),a),e.exports){e.exports=h;try{o=n(7)}catch(v){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},"ws/Y":function(e,t){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var a=r;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in a))break e;a=a[o]}(t=t(i=a[e=e[e.length-1]]))!=i&&null!=t&&n(a,e,{configurable:!0,writable:!0,value:t})}}function i(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function o(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=o(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}a("Symbol",(function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(r+(n||"")+"_"+a++,n)}})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<a.length;o++){var s=r[a[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return i(t(this))}})}return e}));var u,c="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;e:{var h={};try{h.__proto__={a:!0},l=h.a;break e}catch(ft){}l=!1}u=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=u;function d(e,t){if(e.prototype=c(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function p(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function v(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function g(e,t,n){return e.g=n,{value:t}}function y(e){this.g=new p,this.h=e}function _(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,v(e.g,o),b(e)}return e.g.i=null,r.call(e.g,i),b(e)}function b(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,v(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return m(e.g),e.g.i?t=_(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=b(e)),t},this.throw=function(t){return m(e.g),e.g.i?t=_(e,e.g.i.throw,t,e.g.o):(v(e.g,t),t=b(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.i;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),b(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e,t){return t=new x(new y(t)),f&&e.prototype&&f(t,e.prototype),t}p.prototype.o=function(e){this.h=e},p.prototype.return=function(e){this.j={return:e},this.g=this.s};var k="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};a("Object.assign",(function(e){return e||k})),a("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function a(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=r.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;i((function(){if(e.B()){var t=r.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t((function(e,t){a=e,i=t}));return this.J(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=a,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),i=r.next();!i.done;i=r.next())a(i.value).J(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?a([]):new t((function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,a(r.value).J(i(o.length-1),t),r=n.next()}while(!r.done)}))},t})),a("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),a("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}})),a("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),a("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){return!r&&n<e.length?{value:n++,done:!1}:(r=!0,{done:!0,value:void 0})}};return a[Symbol.iterator]=function(){return a},a}(this)}}));var C=this||self;function S(e,t){e=e.split(".");var n,r=C;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function T(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var E,A,M="undefined"!=typeof TextDecoder,I="undefined"!=typeof TextEncoder;function N(e){if(I)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128>i)r[n++]=i;else{if(2048>i)r[n++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&a<e.length){var o=e.charCodeAt(++a);if(56320<=o&&57343>=o){r[n++]=(i=1024*(i-55296)+o-56320+65536)>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128;continue}a--}if(t)throw Error("Found an unpaired surrogate");i=65533}r[n++]=i>>12|224,r[n++]=i>>6&63|128}r[n++]=63&i|128}}e=r.subarray(0,n)}return e}var R={},D=null;function O(e,t){void 0===t&&(t=0),L(),t=R[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],u=e[a+2],c=t[o>>2];n[i++]=c+(o=t[(3&o)<<4|s>>4])+(s=t[(15&s)<<2|u>>6])+(u=t[63&u])}switch(c=0,u=r,e.length-a){case 2:u=t[(15&(c=e[a+1]))<<2]||r;case 1:n[i]=t[(e=e[a])>>2]+t[(3&e)<<4|c>>4]+u+r}return n.join("")}function L(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));R[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===D[i]&&(D[i]=a)}}}}var F,P="function"==typeof Uint8Array.prototype.slice;function z(e,t,n){return t===n?F||(F=new Uint8Array(0)):P?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var B=0;function U(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=t,e&&V(this,e)}function V(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer?new Uint8Array(t):t.constructor===Array?new Uint8Array(t):t.constructor===String?function(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=D[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}L();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,(function(e){r[a++]=e})),r.subarray(0,a)}(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.l=0,e.j=e.h.length,e.g=e.l}function W(e){for(var t=128,n=0,r=0,a=0;4>a&&128<=t;a++)n|=(127&(t=e.h[e.g++]))<<7*a;if(128<=t&&(n|=(127&(t=e.h[e.g++]))<<28,r|=(127&t)>>4),128<=t)for(a=0;5>a&&128<=t;a++)r|=(127&(t=e.h[e.g++]))<<7*a+3;if(128>t)return e=n>>>0,(r=2147483648&(t=r>>>0))&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=4294967296*t+(e>>>0),r?-e:e;e.m=!0}U.prototype.reset=function(){this.g=this.l},U.prototype.i=function(){var e=this.h,t=e[this.g],n=127&t;return 128>t?(this.g+=1,n):(n|=(127&(t=e[this.g+1]))<<7,128>t?(this.g+=2,n):(n|=(127&(t=e[this.g+2]))<<14,128>t?(this.g+=3,n):(n|=(127&(t=e[this.g+3]))<<21,128>t?(this.g+=4,n):(n|=(15&(t=e[this.g+4]))<<28,128>t?(this.g+=5,n>>>0):(this.g+=5,128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&this.g++,n)))))},U.prototype.o=function(){var e=this.h[this.g],t=this.h[this.g+1],n=this.h[this.g+2],r=this.h[this.g+3];return this.g+=4,e=2*((n=(e<<0|t<<8|n<<16|r<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))};var G=[];function H(){this.g=new Uint8Array(64),this.h=0}function j(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function q(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,G.length?(n=G.pop(),t&&(n.v=t.v),e&&V(n,e),e=n):e=new U(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function K(e){var t=e.g;if((t=t.g==t.j)||(t=e.j)||(t=(t=e.g).m||0>t.g||t.g>t.j),t)return!1;e.m=e.g.g;var n=7&(t=e.g.i());return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function X(e,t,n){var r=e.g.j,a=e.g.i(),i=e.g.g+a;if(e.g.j=i,n(t,e),0!=(n=i-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.j=r,t}function Z(e){return e.g.o()}function Y(e){var t,n=e.g.i(),r=(e=e.g).g;if(e.g+=n,e=e.h,M)(t=E)||(t=E=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(r,r+n));else{n=r+n;for(var a,i,o,s=[],u=null;r<n;)128>(a=e[r++])?s.push(a):224>a?r>=n?s.push(65533):(i=e[r++],194>a||128!=(192&i)?(r--,s.push(65533)):s.push((31&a)<<6|63&i)):240>a?r>=n-1?s.push(65533):128!=(192&(i=e[r++]))||224===a&&160>i||237===a&&160<=i||128!=(192&(t=e[r++]))?(r--,s.push(65533)):s.push((15&a)<<12|(63&i)<<6|63&t):244>=a?r>=n-2?s.push(65533):128!=(192&(i=e[r++]))||0!=i-144+(a<<28)>>30||128!=(192&(t=e[r++]))||128!=(192&(o=e[r++]))?(r--,s.push(65533)):(a=(7&a)<<18|(63&i)<<12|(63&t)<<6|63&o,s.push(55296+((a-=65536)>>10&1023),56320+(1023&a))):s.push(65533),8192<=s.length&&(u=T(u,s),s.length=0);t=T(u,s)}return t}function J(e,t,n){var r=e.g.i();for(r=e.g.g+r;e.g.g<r;)n.push(t.call(e.g))}function $(e,t){2==e.h?J(e,U.prototype.o,t):t.push(Z(e))}function Q(){this.h=[],this.i=0,this.g=new H}function ee(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function te(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,r=n.length,a=0,i=0;i<r;i++){var o=n[i];0!==o.length&&(t.set(o,a),a+=o.length)}return 0!==(r=(n=e.g).h)&&(t.set(n.g.subarray(0,r),a),n.h=0),e.h=[t],t}function ne(e,t,n){if(null!=n){j(e.g,8*t+5),e=e.g;var r=n;0===(r=(n=0>r?1:0)?-r:r)?B=0<1/r?0:2147483648:isNaN(r)?B=2147483647:34028234663852886e22<r?B=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),B=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,B=(n<<31|t+127<<23|8388607&r)>>>0),e.push((n=B)>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}H.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},H.prototype.length=function(){return this.h},H.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,z(e,0,t)},q.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var re="function"==typeof Uint8Array;function ae(e,t,n){if(null!=e)return"object"==typeof e?re&&e instanceof Uint8Array?n(e):ie(e,t,n):t(e)}function ie(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),a=0;a<e.length;a++)r[a]=ae(e[a],t,n);return Array.isArray(e)&&e.W&&ce(r),r}for(a in r={},e)r[a]=ae(e[a],t,n);return r}function oe(e){return"number"==typeof e?isFinite(e)?e:String(e):e}var se,ue={W:{value:!0,configurable:!0}};function ce(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,ue),e}function le(e,t,n){var r=se;if(se=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=r?0:-1,this.m=this.g=null,this.h=e,e=(r=this.h.length)-1,!r||null===(r=this.h[e])||"object"!=typeof r||Array.isArray(r)||re&&r instanceof Uint8Array?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(r=this.h[e+=this.j])?ce(r):this.h[e]=he:(fe(this),(r=this.i[e])?ce(r):this.i[e]=he)}var he=Object.freeze(ce([]));function fe(e){var t=e.l+e.j;e.h[t]||(e.i=e.h[t]={})}function de(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.i?e.i[t]:void 0:e.h[t+e.j]}function pe(e,t){var n=void 0!==n&&n,r=de(e,t,n);return null==r&&(r=he),r===he&&ye(e,t,r=ce([]),n),r}function me(e){var t=pe(e,3);if(e.m||(e.m={}),!e.m[3]){for(var n=0;n<t.length;n++)t[n]=+t[n];e.m[3]=!0}return t}function ve(e,t,n){return null==(e=de(e,t))?n:e}function ge(e,t,n){return null==(e=null==(e=de(e,t))?e:+e)?void 0===n?0:n:e}function ye(e,t,n,r){void 0!==r&&r||t>=e.l?(fe(e),e.i[t]=n):e.h[t+e.j]=n}function _e(e,t,n){if(-1===n)return null;if(e.g||(e.g={}),!e.g[n]){var r=de(e,n,!1);r&&(e.g[n]=new t(r))}return e.g[n]}function be(e,t){e.g||(e.g={});var n=e.g[1];if(!n){var r=pe(e,1);n=[];for(var a=0;a<r.length;a++)n[a]=new t(r[a]);e.g[1]=n}return n}function xe(e,t,n){var r=void 0!==r&&r;e.g||(e.g={});var a=n?ke(n,!1):n;e.g[t]=n,ye(e,t,a,r)}function we(e,t,n,r){var a=be(e,n);t=t||new n,e=pe(e,1),null!=r?(a.splice(r,0,t),e.splice(r,0,ke(t,!1))):(a.push(t),e.push(ke(t,!1)))}function ke(e,t){if(e.g)for(var n in e.g){var r=e.g[n];if(Array.isArray(r))for(var a=0;a<r.length;a++)r[a]&&ke(r[a],t);else r&&ke(r,t)}return e.h}function Ce(e,t){if(e=e.o){ee(t,t.g.end());for(var n=0;n<e.length;n++)ee(t,e[n])}}function Se(e,t){if(4==t.h)return!1;var n=t.m;return function e(t){switch(t.h){case 0:if(0!=t.h)e(t);else{for(t=t.g;128&t.h[t.g];)t.g++;t.g++}break;case 1:1!=t.h?e(t):(t=t.g).g+=8;break;case 2:if(2!=t.h)e(t);else{var n=t.g.i();(t=t.g).g+=n}break;case 5:5!=t.h?e(t):(t=t.g).g+=4;break;case 3:for(n=t.l;;){if(!K(t)){t.j=!0;break}if(4==t.h){t.l!=n&&(t.j=!0);break}e(t)}break;default:t.j=!0}}(t),t.N||(t=z(t.g.h,n,t.g.g),(n=e.o)?n.push(t):e.o=[t]),!0}function Te(e){le.call(this,e,-1,Ae)}function Ee(e,t){for(;K(t);)switch(t.i){case 8:var n=t.g.i();ye(e,1,n);break;case 16:ye(e,2,n=t.g.i());break;case 29:case 26:$(t,e.getPackedDataList());break;case 32:ye(e,4,n=W(t.g));break;default:if(!Se(e,t))return e}return e}le.prototype.toJSON=function(){return ie(ke(this,!1),oe,O)},le.prototype.toString=function(){return ke(this,!1).toString()},d(Te,le),Te.prototype.getRows=function(){return de(this,1)},Te.prototype.getCols=function(){return de(this,2)},Te.prototype.getPackedDataList=function(){return me(this)},Te.prototype.getLayout=function(){return ve(this,4,0)};var Ae=[3];function Me(e,t){var n=void 0;return new(n||(n=Promise))((function(r,a){function i(e){try{s(t.next(e))}catch(n){a(n)}}function o(e){try{s(t.throw(e))}catch(n){a(n)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,o)}s((t=t.apply(e,void 0)).next())}))}function Ie(e){le.call(this,e)}function Ne(e,t){for(;K(t);)switch(t.i){case 8:var n=t.g.i();ye(e,1,n);break;case 21:ye(e,2,n=Z(t));break;case 26:ye(e,3,n=Y(t));break;case 34:ye(e,4,n=Y(t));break;default:if(!Se(e,t))return e}return e}function Re(e){le.call(this,e,-1,De)}d(Ie,le),d(Re,le),Re.prototype.addClassification=function(e,t){return we(this,e,Ie,t),this};var De=[1];function Oe(e){le.call(this,e)}function Le(e,t){for(;K(t);)switch(t.i){case 13:var n=Z(t);ye(e,1,n);break;case 21:ye(e,2,n=Z(t));break;case 29:ye(e,3,n=Z(t));break;case 37:ye(e,4,n=Z(t));break;case 45:ye(e,5,n=Z(t));break;default:if(!Se(e,t))return e}return e}function Fe(e){le.call(this,e,-1,ze)}function Pe(e){e:{var t=new Fe;for(e=new q(e);K(e);)switch(e.i){case 10:we(t,X(e,new Oe,Le),Oe,void 0);break;default:if(!Se(t,e))break e}}return t}d(Oe,le),d(Fe,le);var ze=[1];function Be(e){le.call(this,e)}function Ue(e){le.call(this,e,-1,We)}function Ve(e,t){for(;K(t);)switch(t.i){case 8:var n=W(t.g);ye(e,1,n);break;case 16:ye(e,2,n=W(t.g));break;case 29:case 26:$(t,e.getVertexBufferList());break;case 32:case 34:n=t;var r=e.getIndexBufferList();2==n.h?J(n,U.prototype.i,r):r.push(n.g.i());break;default:if(!Se(e,t))return e}return e}d(Be,le),d(Ue,le),Ue.prototype.getVertexType=function(){return ve(this,1,0)},Ue.prototype.getPrimitiveType=function(){return ve(this,2,0)},Ue.prototype.getVertexBufferList=function(){return me(this)},Ue.prototype.getIndexBufferList=function(){return pe(this,4)};var We=[3,4];function Ge(e){le.call(this,e)}function He(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function je(e){return be(e,Ie).map((function(e){return{index:ve(e,1,0),Y:ge(e,2),label:null!=de(e,3)?ve(e,3,""):void 0,displayName:null!=de(e,4)?ve(e,4,""):void 0}}))}function qe(e){return{x:ge(e,1),y:ge(e,2),z:ge(e,3),visibility:null!=de(e,4)?ge(e,4):void 0}}function Ke(e,t){this.h=e,this.g=t,this.l=0}function Xe(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=He(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=He(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.m=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:a},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Ze(e){this.g=e}d(Ge,le),Ge.prototype.getMesh=function(){return _e(this,Ue,1)},Ge.prototype.getPoseTransformMatrix=function(){return _e(this,Te,2)};var Ye=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Je(e,t){return t+e}function $e(e,t){window[e]=t}function Qe(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||Je,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=o(Object.keys(e.options))).next();!n.done;n=t.next()){var r=e.options[n=n.value].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function et(e,t){return Me(e,(function e(){var n,r,a=this;return w(e,(function(e){return t in a.F?e.return(a.F[t]):(n=a.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),a.F[t]=r,e.return(r))}))}))}function tt(e,t){for(var n=t.name||"$",r=[].concat(s(t.wants)),a=new e.h.StringList,i=o(t.wants),u=i.next();!u.done;u=i.next())a.push_back(u.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},s=0;s<t.wants.length;++s)i[r[s]]=a.get(s);var u=e.listeners[n];u&&(e.C=function(e,t,n){return Me(e,(function e(){var r,a,i,s,u,c,l,h,f,d,p,m,v=this;return w(e,(function(e){switch(e.g){case 1:if(!n)return e.return(t);for(r={},a=0,i=o(Object.keys(n)),s=i.next();!s.done;s=i.next())"string"!=typeof(u=n[s.value])&&"texture"===u.type&&void 0!==t[u.stream]&&++a;1<a&&(v.G=!1),c=o(Object.keys(n)),s=c.next();case 2:if(s.done){e.g=4;break}if("string"==typeof(h=n[l=s.value]))return p=r,m=l,g(e,function(e,t,n){return Me(e,(function e(){var r,a=this;return w(e,(function(e){return"number"==typeof n||n instanceof Uint8Array||n instanceof a.h.Uint8BlobList?e.return(n):n instanceof a.h.Texture2dDataOut?((r=a.s[t])||(r=new Ke(a.h,a.D),a.s[t]=r),e.return(Xe(r,n,a.G))):e.return(void 0)}))}))}(v,l,t[h]),14);if(f=t[h.stream],"detection_list"===h.type){if(f){for(var y=f.getRectList(),_=f.getLandmarksList(),b=f.getClassificationsList(),x=[],k=0;k<y.size();++k){var C=y.get(k);e:{var S=new Be;for(C=new q(C);K(C);)switch(C.i){case 13:var T=Z(C);ye(S,1,T);break;case 21:ye(S,2,T=Z(C));break;case 29:ye(S,3,T=Z(C));break;case 37:ye(S,4,T=Z(C));break;case 45:ye(S,5,T=Z(C));break;case 48:ye(S,6,T=W(C.g));break;default:if(!Se(S,C))break e}}S={Z:ge(S,1),$:ge(S,2),height:ge(S,3),width:ge(S,4),rotation:ge(S,5,0),X:ve(S,6,0)},C=be(Pe(_.get(k)),Oe).map(qe);var E=b.get(k);e:for(T=new Re,E=new q(E);K(E);)switch(E.i){case 10:T.addClassification(X(E,new Ie,Ne));break;default:if(!Se(T,E))break e}S={T:S,O:C,M:je(T)},x.push(S)}y=x}else y=[];r[l]=y,e.g=7;break}if("proto_list"===h.type){if(f){for(y=Array(f.size()),_=0;_<f.size();_++)y[_]=f.get(_);f.delete()}else y=[];r[l]=y,e.g=7;break}if(void 0===f){e.g=3;break}if("float_list"===h.type){r[l]=f,e.g=7;break}if("proto"===h.type){r[l]=f,e.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(d=v.s[l])||(d=new Ke(v.h,v.D),v.s[l]=d),g(e,Xe(d,f,v.G),13);case 13:r[l]=e.h;case 7:h.transform&&r[l]&&(r[l]=h.transform(r[l])),e.g=3;break;case 14:p[m]=e.h;case 3:s=c.next(),e.g=2;break;case 4:return e.return(r)}}))}))}(e,i,t.outs).then((function(n){n=u(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"==typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(a,i),a.delete()}function nt(e){var t=(e=function(e){e:{var t=new Ge;for(e=new q(e);K(e);)switch(e.i){case 10:var n=X(e,new Ue,Ve);xe(t,1,n);break;case 18:xe(t,2,n=X(e,new Te,Ee));break;default:if(!Se(t,e))break e}}return t}(e)).getMesh();if(!t)return e;var n=new Float32Array(t.getVertexBufferList());t.getVertexBufferList=function(){return n};var r=new Uint32Array(t.getIndexBufferList());return t.getIndexBufferList=function(){return r},e}(e=Qe.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},s=o(Object.keys(e)),u=s.next();!u.done;i={K:i.K,L:i.L},u=s.next()){var c=u.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(u=t[c])&&(u.onChange&&(i.K=u.onChange,i.L=e[c],r.push(function(e){return function(){return Me(n,(function t(){var n=this;return w(t,(function(t){if(1==t.g)return g(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}))}}(i))),u.graphOptionXref&&(c={valueNumber:1===u.type?e[c]:0,valueBoolean:0===u.type&&e[c],valueString:2===u.type?e[c]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),c),a.push(u))))}0===r.length&&0===a.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(a),this.u=(void 0===this.u?[]:this.u).concat(r))}},e.initialize=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){return 1==e.g?g(e,Me(t,(function e(){var t,n,r,a,i,o,u,c,l,h,f,d=this;return w(e,(function(e){switch(e.g){case 1:return t=d,d.R?(n=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(d,d.j),g(e,function(){return Me(this,(function e(){return w(e,(function(e){switch(e.g){case 1:return e.m=2,g(e,WebAssembly.instantiate(Ye),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}))}))}(),2)):e.return();case 2:if(r=e.h,"object"==typeof window)return $e("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),$e("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),o=n.filter((function(e){return void 0!==e.data})),u=n.filter((function(e){return void 0===e.data})),c=Promise.all(o.map((function(e){var n=et(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),l=Promise.all(u.map((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){return Me(t,(function e(){var t,n,r=this;return w(e,(function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,g(e,t(n),2);r.h=e.h,e.g=0}))}))})),h=Me(t,(function e(){var t=this;return w(e,(function(e){return t.g.graph&&t.g.graph.url?e=g(e,et(t,t.g.graph.url),0):(e.g=0,e=void 0),e}))})),g(e,Promise.all([l,c,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=n.filter((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,s(a)),g(e,createMediapipeSolutionsWasm(Module),6);case 6:d.h=e.h,d.l=new OffscreenCanvas(1,1),d.h.canvas=d.l,i=d.h.GL.createContext(d.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),d.h.GL.makeContextCurrent(i),e.g=4;break;case 7:if(d.l=document.createElement("canvas"),!(f=d.l.getContext("webgl2",{}))&&!(f=d.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();d.D=f,d.h.canvas=d.l,d.h.createContext(d.l,!0,!0,{});case 4:d.i=new d.h.SolutionWasm,d.R=!1,e.g=0}}))})),2):3!=e.g?g(e,Me(t,(function e(){var t,n,r,a,i,s,u=this;return w(e,(function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,g(e,et(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&u.i.loadGraph(e.h),t=o(Object.keys(u.B)),n=t.next();!n.done;n=t.next())u.i.overrideFile(r=n.value,u.B[r]);if(u.B={},u.g.listeners)for(a=o(u.g.listeners),i=a.next();!i.done;i=a.next())tt(u,i.value);s=u.j,u.j={},u.setOptions(s),e.g=0}))})),3):g(e,function(e){return Me(e,(function e(){var t,n,r,a,i,s=this;return w(e,(function(e){switch(e.g){case 1:if(!s.o)return e.return();if(!s.u){e.g=2;break}t=o(s.u),n=t.next();case 3:if(n.done){e.g=5;break}return g(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:s.u=void 0;case 2:if(s.A){for(r=new s.h.GraphOptionChangeRequestList,a=o(s.A),i=a.next();!i.done;i=a.next())r.push_back(i.value);s.i.changeOptions(r),r.delete(),s.A=void 0}s.o=!1,e.g=0}}))}))}(t),0)}))}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Me(this,(function n(){var r,a,i,s,u,c,l,h,f,d=this;return w(n,(function(n){switch(n.g){case 1:return d.g.inputs?(r=1e3*(null==t?performance.now():t),g(n,d.C,2)):n.return();case 2:return g(n,d.initialize(),3);case 3:for(a=new d.h.PacketDataList,i=o(Object.keys(e)),s=i.next();!s.done;s=i.next())if(c=d.g.inputs[u=s.value]){e:{var p=d,m=e[u];switch(c.type){case"video":var v=p.m[c.stream];if(v||(v=new Ke(p.h,p.D),p.m[c.stream]=v),0===(p=v).l&&(p.l=p.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var y=m.videoWidth;v=m.videoHeight}else"undefined"!=typeof HTMLImageElement&&m instanceof HTMLImageElement?(y=m.naturalWidth,v=m.naturalHeight):(y=m.width,v=m.height);v={glName:p.l,width:y,height:v},(y=p.g).canvas.width=v.width,y.canvas.height=v.height,y.activeTexture(y.TEXTURE0),p.h.bindTexture2d(p.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,m),p.h.bindTexture2d(0),p=v;break e;case"detections":for((v=p.m[c.stream])||(v=new Ze(p.h),p.m[c.stream]=v),(p=v).data||(p.data=new p.g.DetectionListData),p.data.reset(m.length),v=0;v<m.length;++v){var _=p.data,b=_.setBoundingBox,x=v,w=(y=m[v]).T,k=new Be;ye(k,1,w.Z),ye(k,2,w.$),ye(k,3,w.height),ye(k,4,w.width),ye(k,5,w.rotation),ye(k,6,w.X);var C=w=new Q;ne(C,1,de(k,1)),ne(C,2,de(k,2)),ne(C,3,de(k,3)),ne(C,4,de(k,4)),ne(C,5,de(k,5));var S=de(k,6);if(null!=S&&null!=S){j(C.g,48);var T=C.g,E=S;S=0>E;var A=(E=Math.abs(E))>>>0;for(E=Math.floor((E-A)/4294967296),E>>>=0,S&&(E=~E>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++E&&(E=0))),S=B=A,A=E;0<A||127<S;)T.push(127&S|128),S=(S>>>7|A<<25)>>>0,A>>>=7;T.push(S)}if(Ce(k,C),w=te(w),b.call(_,x,w),y.O)for(_=0;_<y.O.length;++_)C=!!(k=y.O[_]).visibility,x=(b=p.data).addNormalizedLandmark,w=v,k=Object.assign(Object.assign({},k),{visibility:C?k.visibility:0}),ye(C=new Oe,1,k.x),ye(C,2,k.y),ye(C,3,k.z),k.visibility&&ye(C,4,k.visibility),ne(T=k=new Q,1,de(C,1)),ne(T,2,de(C,2)),ne(T,3,de(C,3)),ne(T,4,de(C,4)),ne(T,5,de(C,5)),Ce(C,T),k=te(k),x.call(b,w,k);if(y.M)for(_=0;_<y.M.length;++_){if(x=(b=p.data).addClassification,w=v,k=y.M[_],ye(C=new Ie,2,k.Y),k.index&&ye(C,1,k.index),k.label&&ye(C,3,k.label),k.displayName&&ye(C,4,k.displayName),T=k=new Q,null!=(A=de(C,1))&&null!=A)if(j(T.g,8),S=T.g,0<=A)j(S,A);else{for(E=0;9>E;E++)S.push(127&A|128),A>>=7;S.push(1)}ne(T,2,de(C,2)),null!=(S=de(C,3))&&(S=N(S),j(T.g,26),j(T.g,S.length),ee(T,T.g.end()),ee(T,S)),null!=(S=de(C,4))&&(S=N(S),j(T.g,34),j(T.g,S.length),ee(T,T.g.end()),ee(T,S)),Ce(C,T),k=te(k),x.call(b,w,k)}}p=p.data;break e;default:p={}}}switch(l=p,h=c.stream,c.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},l),{stream:h,timestamp:r}));break;case"detections":(f=l).stream=h,f.timestamp=r,a.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return d.i.send(a),g(n,d.C,4);case 4:a.delete(),n.g=0}}))}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},S("Solution",Qe),S("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var rt={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(e){return e.map(nt)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(e){return e.map((function(e){return be(Pe(e),Oe).map(qe)}))}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},at=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],it=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],ot=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],st=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ut=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ct=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],lt=[].concat(s(at),s(it),s(ot),s(st),s(ut),s(ct));function ht(e){e=e||{},e=Object.assign(Object.assign({},rt),e),this.g=new Qe(e)}(e=ht.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Me(this,(function e(){var t=this;return w(e,(function(e){return g(e,t.g.initialize(),0)}))}))},e.reset=function(){this.g.reset()},e.send=function(e){return Me(this,(function t(){var n=this;return w(t,(function(t){return g(t,n.g.send(e),0)}))}))},e.setOptions=function(e){this.g.setOptions(e)},S("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),S("FaceMesh",ht),S("FACEMESH_LIPS",at),S("FACEMESH_LEFT_EYE",it),S("FACEMESH_LEFT_EYEBROW",ot),S("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),S("FACEMESH_RIGHT_EYE",st),S("FACEMESH_RIGHT_EYEBROW",ut),S("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),S("FACEMESH_FACE_OVAL",ct),S("FACEMESH_CONTOURS",lt),S("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),S("matrixDataToMatrix",(function(e){for(var t=e.getCols(),n=e.getRows(),r=e.getPackedDataList(),a=[],i=0;i<n;i++)a.push(Array(t));for(i=0;i<n;i++)for(var o=0;o<t;o++){var s=1===e.getLayout()?i*t+o:o*n+i;a[i][o]=r[s]}return a})),S("VERSION","0.4.1633559619")}).call(this)},xAGQ:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("JEQr");e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},"xTJ+":function(e,t,n){"use strict";var r=n("HSsa"),a=Object.prototype.toString;function i(e){return Array.isArray(e)}function o(e){return void 0===e}function s(e){return"[object ArrayBuffer]"===a.call(e)}function u(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===a.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===a.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===a.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function n(n,r){t[r]=c(t[r])&&c(n)?e(t[r],n):c(n)?e({},n):i(n)?n.slice():n}for(var r=0,a=arguments.length;r<a;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},yK9s:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},yuCN:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var a=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=e},get useDeprecatedSynchronousErrorHandling(){return a}};function o(e){setTimeout((function(){throw e}),0)}var s={closed:!0,next:function(e){},error:function(e){if(i.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,h=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),f=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(r(a))try{a.call(this)}catch(p){t=p instanceof h?d(p.errors):[p]}if(u(i))for(var s=-1,l=i.length;++s<l;){var f=i[s];if(c(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof h?t=t.concat(d(p.errors)):t.push(p)}}if(t)throw new h(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=n._parentOrParents;if(null===a)n._parentOrParents=this;else if(a instanceof e){if(a===this)return n;n._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return n;a.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function d(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;switch(_classCallCheck(this,n),(i=t.call(this)).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s;break;case 1:if(!e){i.destination=s;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new v(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new v(_assertThisInitialized(i),e,r,a)}return i}return _createClass(n,[{key:p,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get2(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var a=new n(e,t,r);return a.syncErrorThrowable=!1,a}}]),n}(f),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,o){var u,c;_classCallCheck(this,n),(u=t.call(this))._parentSubscriber=e;var l=_assertThisInitialized(u);return r(a)?c=a:a&&(c=a.next,i=a.error,o=a.complete,a!==s&&(r((l=Object.create(a)).unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=i,u._complete=o,u}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=i.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(m),g="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(e){return e}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b(t)}function b(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var x,w=((x=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,a=function(e,t,n){if(e){if(e instanceof m)return e;if(e[p])return e[p]()}return e||t||n?new m(e,t,n):new m(s)}(e,t,n);if(a.add(r?r.call(a,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),i.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){i.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,a=t.isStopped;if(n||a)return!1;e=r&&r instanceof m?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=k(t))((function(t,r){var a;a=n.subscribe((function(t){try{e(t)}catch(n){r(n),a&&a.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:g,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:b(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=k(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new x(e)},x);function k(e){if(e||(e=i.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var C,S=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),T=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).subject=e,a.subscriber=r,a.closed=!1,a}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(f),E=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return _createClass(n)}(m),A=((C=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:p,value:function(){return new E(this)}},{key:"lift",value:function(e){var t=new M(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new S;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].next(e)}},{key:"error",value:function(e){if(this.closed)throw new S;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new S;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new S;return _get2(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new S;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new T(this,e))}},{key:"asObservable",value:function(){var e=new w;return e.source=this,e}}]),n}(w)).create=function(e,t){return new M(e,t)},C),M=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).destination=e,a.source=r,a}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):f.EMPTY}}]),n}(A);function I(e){return e&&"function"==typeof e.schedule}var N=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this)).parent=e,i.outerValue=r,i.outerIndex=a,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(m),R=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var D="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",O=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function L(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var F=function(e){if(e&&"function"==typeof e[g])return r=e,function(e){var t=r[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(O(e))return R(e);if(L(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,o),e};if(e&&"function"==typeof e[D])return t=e,function(e){for(var n=t[D]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,a=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(a," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function P(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new N(e,n,r);if(!a.closed)return t instanceof w?t.subscribe(a):F(t)(a)}var z=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(m);function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new U(e,t))}}var U=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new V(e,this.project,this.thisArg))}}]),e}(),V=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.count=0,i.thisArg=a||_assertThisInitialized(i),i}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(m);function W(e,t){return new w((function(n){var r=new f,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function G(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new w((function(n){var r=new f;return r.add(t.schedule((function(){var a=e[g]();r.add(a.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(L(e))return function(e,t){return new w((function(n){var r=new f;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(O(e))return W(e,t);if(function(e){return e&&"function"==typeof e[D]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new w((function(n){var r,a=new f;return a.add((function(){r&&"function"==typeof r.return&&r.return()})),a.add(t.schedule((function(){r=e[D](),a.add(t.schedule((function(){if(!n.closed){var e,t;try{var a=r.next();e=a.value,t=a.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}})))}))),a}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof w?e:new w(F(e))}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(H((function(n,r){return G(e(n,r)).pipe(B((function(e,a){return t(n,e,r,a)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new j(e,n))})}var j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new q(e,this.project,this.concurrent))}}]),e}(),q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(a=t.call(this,e)).project=r,a.concurrent=i,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new N(this,t,n),a=this.destination;a.add(r);var i=P(this,e,void 0,void 0,r);i!==r&&a.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(z);function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return H(y,e)}function X(e,t){return t?W(e,t):new w(R(e))}function Z(){return function(e){return e.lift(new J(e))}}var Y,J=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new $(e,n),a=t.subscribe(r);return r.closed||(r.connection=n.connect()),a}}]),e}(),$=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).connectable=r,a}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(m),Q={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).source=e,a.subjectFactory=r,a._refCount=0,a._isComplete=!1,a}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new ee(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e}},{key:"refCount",value:function(){return Z()(this)}}]),n}(w).prototype)._subscribe},_isComplete:{value:Y._isComplete,writable:!0},getSubject:{value:Y.getSubject},connect:{value:Y.connect},refCount:{value:Y.refCount}},ee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).connectable=r,a}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get2(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get2(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(E);function te(){return new A}function ne(e){return{toString:e}.toString()}function re(e,t,n){return ne((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof a)return r.apply(this,t),this;var i=_construct(a,t);return o.annotation=i,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),e}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a}))}var ae=re("Inject",(function(e){return{token:e}})),ie=re("Optional"),oe=re("Self"),se=re("SkipSelf"),ue=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ce(e){for(var t in e)if(e[t]===ce)return t;throw Error("Could not find renamed property on target object.")}function le(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function de(e){return pe(e,e[ve])||pe(e,e[_e])}function pe(e,t){return t&&t.token===e?t:null}function me(e){return e&&(e.hasOwnProperty(ge)||e.hasOwnProperty(be))?e[ge]:null}var ve=ce({"\u0275prov":ce}),ge=ce({"\u0275inj":ce}),ye=ce({"\u0275provFallback":ce}),_e=ce({ngInjectableDef:ce}),be=ce({ngInjectorDef:ce});function xe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(xe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var ke=ce({__forward_ref__:ce});function Ce(e){return e.__forward_ref__=Ce,e.toString=function(){return xe(this())},e}function Se(e){return Te(e)?e():e}function Te(e){return"function"==typeof e&&e.hasOwnProperty(ke)&&e.__forward_ref__===Ce}var Ee,Ae="undefined"!=typeof globalThis&&globalThis,Me="undefined"!=typeof window&&window,Ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ne="undefined"!=typeof global&&global,Re=Ae||Ne||Me||Ie,De=ce({"\u0275cmp":ce}),Oe=ce({"\u0275dir":ce}),Le=ce({"\u0275pipe":ce}),Fe=ce({"\u0275mod":ce}),Pe=ce({"\u0275loc":ce}),ze=ce({"\u0275fac":ce}),Be=ce({__NG_ELEMENT_ID__:ce}),Ue=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Ve=new Ue("INJECTOR",-1),We={},Ge=/\n/gm,He=ce({provide:String,useValue:ce}),je=void 0;function qe(e){var t=je;return je=e,t}function Ke(e){var t=Ee;return Ee=e,t}function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;if(void 0===je)throw new Error("inject() must be called from an injection context");return null===je?Ye(e,void 0,t):je.get(e,t&ue.Optional?null:void 0,t)}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;return(Ee||Xe)(Se(e),t)}function Ye(e,t,n){var r=de(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ue.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(xe(e),"]"))}function Je(e){for(var t=[],n=0;n<e.length;n++){var r=Se(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var a=void 0,i=ue.Default,o=0;o<r.length;o++){var s=r[o];s instanceof ie||"Optional"===s.ngMetadataName||s===ie?i|=ue.Optional:s instanceof se||"SkipSelf"===s.ngMetadataName||s===se?i|=ue.SkipSelf:s instanceof oe||"Self"===s.ngMetadataName||s===oe?i|=ue.Self:a=s instanceof ae||s===ae?s.token:s}t.push(Ze(a,i))}else t.push(Ze(r))}return t}var $e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We;if(t===We){var n=new Error("NullInjectorError: No provider for ".concat(xe(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),Qe=_createClass((function e(){_classCallCheck(this,e)})),et=_createClass((function e(){_classCallCheck(this,e)}));function tt(e,t){e.forEach((function(e){return Array.isArray(e)?tt(e,t):t(e)}))}function nt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function rt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function at(e,t){var n=it(e,t);if(n>=0)return e[1|n]}function it(e,t){return function(e,t,n){for(var r=0,a=e.length>>1;a!==r;){var i=r+(a-r>>1),o=e[i<<1];if(t===o)return i<<1;o>t?a=i:r=i+1}return~(a<<1)}(e,t)}var ot=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),st=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ut={},ct=[],lt=0;function ht(e){return ne((function(){var t=e.type,n=t.prototype,r={},a={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ct,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||st.Emulated,id:"c",styles:e.styles||ct,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,s=e.pipes;return a.id+=lt++,a.inputs=vt(e.inputs,r),a.outputs=vt(e.outputs),o&&o.forEach((function(e){return e(a)})),a.directiveDefs=i?function(){return("function"==typeof i?i():i).map(ft)}:null,a.pipeDefs=s?function(){return("function"==typeof s?s():s).map(dt)}:null,a}))}function ft(e){return _t(e)||function(e){return e[Oe]||null}(e)}function dt(e){return function(e){return e[Le]||null}(e)}var pt={};function mt(e){var t={type:e.type,bootstrap:e.bootstrap||ct,declarations:e.declarations||ct,imports:e.imports||ct,exports:e.exports||ct,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ne((function(){pt[e.id]=e.type})),t}function vt(e,t){if(null==e)return ut;var n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],i=a;Array.isArray(a)&&(i=a[1],a=a[0]),n[a]=r,t&&(t[a]=i)}return n}var gt=ht;function yt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function _t(e){return e[De]||null}function bt(e,t){return e.hasOwnProperty(ze)?e[ze]:null}function xt(e,t){var n=e[Fe]||null;if(!n&&!0===t)throw new Error("Type ".concat(xe(e)," does not have '\u0275mod' property."));return n}function wt(e){return Array.isArray(e)&&"object"==typeof e[1]}function kt(e){return Array.isArray(e)&&!0===e[1]}function Ct(e){return 0!=(8&e.flags)}function St(e){return 2==(2&e.flags)}function Tt(e){return 1==(1&e.flags)}function Et(e){return null!==e.template}function At(e){return 0!=(512&e[2])}var Mt=void 0;function It(e){return!!e.listen}var Nt={createRenderer:function(e,t){return void 0!==Mt?Mt:"undefined"!=typeof document?document:void 0}};function Rt(e){for(;Array.isArray(e);)e=e[0];return e}function Dt(e,t){return Rt(t[e.index])}function Ot(e,t){return e.data[t+19]}function Lt(e,t){var n=t[e];return wt(n)?n:n[0]}function Ft(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Pt(e){return 4==(4&e[2])}function zt(e){return 128==(128&e[2])}function Bt(e,t){return null===e||null==t?null:e[t]}function Ut(e){e[18]=0}var Vt={lFrame:rn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Wt(){return Vt.bindingsEnabled}function Gt(){return Vt.lFrame.lView}function Ht(){return Vt.lFrame.tView}function jt(){return Vt.lFrame.previousOrParentTNode}function qt(e,t){Vt.lFrame.previousOrParentTNode=e,Vt.lFrame.isParent=t}function Kt(){return Vt.lFrame.isParent}function Xt(){return Vt.checkNoChangesMode}function Zt(e){Vt.checkNoChangesMode=e}function Yt(){return Vt.lFrame.bindingIndex++}function Jt(e,t){var n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function $t(){return Vt.lFrame.currentQueryIndex}function Qt(e){Vt.lFrame.currentQueryIndex=e}function en(e,t){var n=nn();Vt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function tn(e,t){var n=nn(),r=e[1];Vt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function nn(){var e=Vt.lFrame,t=null===e?null:e.child;return null===t?rn(e):t}function rn(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function an(){var e=Vt.lFrame;return Vt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var on=an;function sn(){var e=an();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function un(){return Vt.lFrame.selectedIndex}function cn(e){Vt.lFrame.selectedIndex=e}function ln(){var e=Vt.lFrame;return Ot(e.tView,e.selectedIndex)}function hn(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var a=e.data[n];a.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,a.afterContentInit),a.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,a.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a.afterContentChecked)),a.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,a.afterViewInit),a.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,a.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,a.afterViewChecked)),null!=a.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a.onDestroy)}}function fn(e,t,n){mn(e,t,3,n)}function dn(e,t,n,r){(3&e[2])===n&&mn(e,t,n,r)}function pn(e,t){var n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function mn(e,t,n,r){for(var a=null!=r?r:-1,i=0,o=void 0!==r?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(i=t[o],null!=r&&i>=r)break}else t[o]<0&&(e[18]+=65536),(i<a||-1==a)&&(vn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function vn(e,t,n,r){var a=n[r]<0,i=n[r+1],o=e[a?-n[r]:n[r]];a?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,i.call(o)):i.call(o)}var gn=_createClass((function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}));function yn(e,t,n){for(var r=It(e),a=0;a<n.length;){var i=n[a];if("number"==typeof i){if(0!==i)break;a++;var o=n[a++],s=n[a++],u=n[a++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var c=i,l=n[++a];bn(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),a++}}return a}function _n(e){return 3===e||4===e||6===e}function bn(e){return 64===e.charCodeAt(0)}function xn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var a=t[r];"number"==typeof a?n=a:0===n||wn(e,n,a,null,-1===n||2===n?t[++r]:null)}return e}function wn(e,t,n,r,a){var i=0,o=e.length;if(-1===t)o=-1;else for(;i<e.length;){var s=e[i++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=i-1;break}}}for(;i<e.length;){var u=e[i];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==a&&(e[i+1]=a));if(r===e[i+1])return void(e[i+2]=a)}i++,null!==r&&i++,null!==a&&i++}-1!==o&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==a&&e.splice(i++,0,a)}function kn(e){return-1!==e}function Cn(e){return 32767&e}function Sn(e){return e>>16}function Tn(e,t){for(var n=Sn(e),r=t;n>0;)r=r[15],n--;return r}function En(e){return"string"==typeof e?e:null==e?"":""+e}function An(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():En(e)}var Mn=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Re);function In(e){return e instanceof Function?e():e}var Nn=!0;function Rn(e){var t=Nn;return Nn=e,t}var Dn=0;function On(e,t){var n=Fn(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ln(r.data,e),Ln(t,null),Ln(r.blueprint,null));var a=Pn(e,t),i=e.injectorIndex;if(kn(a))for(var o=Cn(a),s=Tn(a,t),u=s[1].data,c=0;c<8;c++)t[i+c]=s[o+c]|u[o+c];return t[i+8]=a,i}function Ln(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Fn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Pn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function zn(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[Be]:n.charCodeAt(0)||0;null==r&&(r=n[Be]=Dn++);var a=255&r,i=1<<a,o=64&a,s=32&a,u=t.data;128&a?o?s?u[e+7]|=i:u[e+6]|=i:s?u[e+5]|=i:u[e+4]|=i:o?s?u[e+3]|=i:u[e+2]|=i:s?u[e+1]|=i:u[e]|=i}(e,t,n)}function Bn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue.Default,a=arguments.length>4?arguments[4]:void 0;if(null!==e){var i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[Be];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){en(t,e);try{var o=i();if(null!=o||r&ue.Optional)return o;throw new Error("No provider for ".concat(An(n),"!"))}finally{on()}}else if("number"==typeof i){if(-1===i)return new qn(e,t);var s=null,u=Fn(e,t),c=-1,l=r&ue.Host?t[16][6]:null;for((-1===u||r&ue.SkipSelf)&&(c=-1===u?Pn(e,t):t[u+8],jn(r,!1)?(s=t[1],u=Cn(c),t=Tn(c,t)):u=-1);-1!==u;){c=t[u+8];var h=t[1];if(Hn(i,u,h.data)){var f=Vn(u,t,n,s,r,l);if(f!==Un)return f}jn(r,t[1].data[u+8]===l)&&Hn(i,u,t)?(s=h,u=Cn(c),t=Tn(c,t)):u=-1}}}if(r&ue.Optional&&void 0===a&&(a=null),0==(r&(ue.Self|ue.Host))){var d=t[9],p=Ke(void 0);try{return d?d.get(n,a,r&ue.Optional):Ye(n,a,r&ue.Optional)}finally{Ke(p)}}if(r&ue.Optional)return a;throw new Error("NodeInjector: NOT_FOUND [".concat(An(n),"]"))}var Un={};function Vn(e,t,n,r,a,i){var o=t[1],s=o.data[e+8],u=Wn(s,o,n,null==r?St(s)&&Nn:r!=o&&3===s.type,a&ue.Host&&i===s);return null!==u?Gn(t,o,u,s):Un}function Wn(e,t,n,r,a){for(var i=e.providerIndexes,o=t.data,s=65535&i,u=e.directiveStart,c=i>>16,l=a?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(a){var d=o[u];if(d&&Et(d)&&d.type===n)return u}return null}function Gn(e,t,n,r){var a=e[n],i=t.data;if(a instanceof gn){var o=a;if(o.resolving)throw new Error("Circular dep for ".concat(An(i[n])));var s,u=Rn(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(s=Ke(o.injectImpl)),en(e,r);try{a=e[n]=o.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,a=t.onInit,i=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,a),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t)}finally{o.injectImpl&&Ke(s),Rn(u),o.resolving=!1,on()}}return a}function Hn(e,t,n){var r=64&e,a=32&e;return!!((128&e?r?a?n[t+7]:n[t+6]:a?n[t+5]:n[t+4]:r?a?n[t+3]:n[t+2]:a?n[t+1]:n[t])&1<<e)}function jn(e,t){return!(e&ue.Self||e&ue.Host&&t)}var qn=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(e,t){return Bn(this._tNode,this._lView,e,void 0,t)}}]),e}();function Kn(e){return ne((function(){var t=Object.getPrototypeOf(e.prototype).constructor,n=t[ze]||function e(t){var n=t;if(Te(t))return function(){var t=e(Se(n));return t?t():null};var r=bt(n);if(null===r){var a=me(n);r=a&&a.factory}return r||null}(t);return null!==n?n:function(e){return new e}}))}function Xn(e){return e.ngDebugContext}function Zn(e){return e.ngOriginalError}function Yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Jn=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Yn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Xn(e)?Xn(e):this._findContext(Zn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Zn(e);t&&Zn(t);)t=Zn(t);return t}}]),e}(),$n=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}();function Qn(e){return e instanceof $n?e.changingThisBreaksApplicationSecurity:e}var er=!0,tr=!1;function nr(){return tr=!0,er}var rr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ar=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ir=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function or(e){var t,n,r=(t=Gt())&&t[12];return r?r.sanitize(ir.URL,e)||"":function(e,t){var n=function(e){return e instanceof $n&&e.getTypeName()||null}(e);if(null!=n&&"URL"!==n){if("ResourceURL"===n)return!0;throw new Error("Required a safe ".concat("URL",", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return"URL"===n}(e)?Qn(e):(n=En(e),(n=String(n)).match(rr)||n.match(ar)?n:(nr()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(n," (see http://g.co/ng/security#xss)")),"unsafe:"+n))}function sr(e,t){e.__ngContext__=t}function ur(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function cr(){throw new Error("Cannot mix multi providers and regular providers")}function lr(e,t,n){for(var r=e.length;;){var a=e.indexOf(t,n);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){var i=t.length;if(a+i===r||e.charCodeAt(a+i)<=32)return a}n=a+1}}function hr(e,t,n){for(var r=0;r<e.length;){var a=e[r++];if(n&&"class"===a){if(-1!==lr((a=e[r]).toLowerCase(),t,0))return!0}else if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function fr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function dr(e,t,n){for(var r=4,a=e.attrs||[],i=function(e){for(var t=0;t<e.length;t++)if(_n(e[t]))return t;return e.length}(a),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!fr(e,u,n)||""===u&&1===t.length){if(pr(r))return!1;o=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!hr(e.attrs,c,n)){if(pr(r))return!1;o=!0}continue}var l=mr(8&r?"class":u,a,0==e.type&&"ng-template"!==e.tagName,n);if(-1===l){if(pr(r))return!1;o=!0;continue}if(""!==c){var h;h=l>i?"":a[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==lr(f,c,0)||2&r&&c!==h){if(pr(r))return!1;o=!0}}}}else{if(!o&&!pr(r)&&!pr(u))return!1;if(o&&pr(u))continue;o=!1,r=u|1&r}}return pr(r)||o}function pr(e){return 0==(1&e)}function mr(e,t,n,r){if(null===t)return-1;var a=0;if(r||!n){for(var i=!1;a<t.length;){var o=t[a];if(o===e)return a;if(3===o||6===o)i=!0;else{if(1===o||2===o){for(var s=t[++a];"string"==typeof s;)s=t[++a];continue}if(4===o)break;if(0===o){a+=4;continue}}a+=i?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function vr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(dr(e,t[r],n))return!0;return!1}function gr(e,t){return e?":not("+t.trim()+")":t}function yr(e){for(var t=e[0],n=1,r=2,a="",i=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];a+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?a+="."+o:4&r&&(a+=" "+o);else""===a||pr(o)||(t+=gr(i,a),a=""),r=o,i=i||!pr(r);n++}return""!==a&&(t+=gr(i,a)),t}var _r={};function br(e){var t=e[3];return kt(t)?t[3]:t}function xr(e){wr(Ht(),Gt(),un()+e,Xt())}function wr(e,t,n,r){if(!r)if(3==(3&t[2])){var a=e.preOrderCheckHooks;null!==a&&fn(t,a,n)}else{var i=e.preOrderHooks;null!==i&&dn(t,i,0,n)}cn(n)}function kr(e,t){return e<<17|t<<2}function Cr(e){return e>>17&32767}function Sr(e){return 2|e}function Tr(e){return(131068&e)>>2}function Er(e,t){return-131069&e|t<<2}function Ar(e){return 1|e}function Mr(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1];if(-1!==i){var o=e.data[i];Qt(a),o.contentQueries(2,t[i],i)}}}function Ir(e,t,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Nr(e,t,n,r,a,i,o,s,u,c){var l=t.blueprint.slice();return l[0]=a,l[2]=140|r,Ut(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=i,l[16]=2==t.type?e[16]:l,l}function Rr(e,t,n,r,a,i){var o=n+19,s=e.data[o]||function(e,t,n,r,a,i){var o=jt(),s=Kt(),u=s?o:o&&o.parent,c=e.data[n]=Br(0,u&&u!==t?u:null,r,n,a,i);return null===e.firstChild&&(e.firstChild=c),o&&(!s||null!=o.child||null===c.parent&&2!==o.type?s||(o.next=c):o.child=c),c}(e,t,o,r,a,i);return qt(s,!0),s}function Dr(e,t,n){tn(t,t[6]);try{var r=e.viewQuery;null!==r&&oa(1,r,n);var a=e.template;null!==a&&Fr(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Mr(e,t),e.staticViewQueries&&oa(2,e.viewQuery,n);var i=e.components;null!==i&&function(e,t){for(var n=0;n<t.length;n++)ta(e,t[n])}(t,i)}finally{t[2]&=-5,sn()}}function Or(e,t,n,r){var a=t[2];if(256!=(256&a)){tn(t,t[6]);var i=Xt();try{Ut(t),Vt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Fr(e,t,n,2,r);var o=3==(3&a);if(!i)if(o){var s=e.preOrderCheckHooks;null!==s&&fn(t,s,null)}else{var u=e.preOrderHooks;null!==u&&dn(t,u,0,null),pn(t,0)}if(function(e){for(var t=e[13];null!==t;){var n=void 0;if(kt(t)&&(n=t[2])>>1==-1){for(var r=9;r<t.length;r++){var a=t[r],i=a[1];zt(a)&&Or(i,a,i.template,a[8])}0!=(1&n)&&Qr(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&Mr(e,t),!i)if(o){var c=e.contentCheckHooks;null!==c&&fn(t,c)}else{var l=e.contentHooks;null!==l&&dn(t,l,1),pn(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,a=-1,i=0;i<n.length;i++){var o=n[i];"number"==typeof o?o<=0?(cn(0-o),a=r+=9+n[++i]):r+=o:(null!==o&&(Jt(r,a),o(2,t[a])),a++)}}finally{cn(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)ea(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&oa(2,f,r),!i)if(o){var d=e.viewCheckHooks;null!==d&&fn(t,d)}else{var p=e.viewHooks;null!==p&&dn(t,p,2),pn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73)}finally{sn()}}}function Lr(e,t,n,r){var a=t[10],i=!Xt(),o=Pt(t);try{i&&!o&&a.begin&&a.begin(),o&&Dr(e,t,r),Or(e,t,n,r)}finally{i&&!o&&a.end&&a.end()}}function Fr(e,t,n,r,a){var i=un();try{cn(-1),2&r&&t.length>19&&wr(e,t,0,Xt()),n(r,a)}finally{cn(i)}}function Pr(e){return e.tView||(e.tView=zr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function zr(e,t,n,r,a,i,o,s,u,c){var l=19+r,h=l+a,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:_r);return n}(l,h);return f[1]={type:e,id:t,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:c}}function Br(e,t,n,r,a,i){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:a,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ur(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,a):n[r]=[t,a]}return n}function Vr(e,t,n,r,a,i,o,s){var u,c,l=Dt(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(ha(e,n,u,r,a),St(t)&&function(e,t){var n=Lt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,a=null!=o?o(a,t.tagName||"",r):a,It(i)?i.setProperty(l,r,a):bn(r)||(l.setProperty?l.setProperty(r,a):l[r]=a))}function Wr(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Gr(e,t,n){for(var r=0;r<n;r++)t.push(_r),e.blueprint.push(_r),e.data.push(null)}function Hr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function jr(e,t,n){var r=19-t.index,a=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,a,n)}function qr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Kr(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Et(t)&&(n[""]=e)}}function Xr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Zr(e,t,n){e.data.push(n);var r=n.factory||(n.factory=bt(n.type)),a=new gn(r,Et(n),null);e.blueprint.push(a),t.push(a)}function Yr(e,t,n){var r=Dt(t,e),a=Pr(n),i=e[10],o=na(e,Nr(e,a,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n)));e[t.index]=o}function Jr(e,t,n,r,a,i){var o=i[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],h=o[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function $r(e,t){for(var n=null,r=0;r<t.length;){var a=t[r];if(0!==a)if(5!==a){if("number"==typeof a)break;e.hasOwnProperty(a)&&(null===n&&(n=[]),n.push(a,e[a],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Qr(e,t){for(var n=e[5],r=0;r<n.length;r++){var a=n[r],i=a[3][3][16];if(i!==t&&0==(16&i[2])){var o=a[1];Or(o,a,o.template,a[8])}}}function ea(e,t){var n=Lt(t,e);if(zt(n)&&80&n[2]){var r=n[1];Or(r,n,r.template,n[8])}}function ta(e,t){var n=Lt(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Dr(r,n,n[8])}function na(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ra(e){for(;e;){e[2]|=64;var t=br(e);if(At(e)&&!t)return e;e=t}return null}function aa(e,t,n){var r=t[10];r.begin&&r.begin();try{Or(e,t,e.template,n)}catch(a){throw la(t,a),a}finally{r.end&&r.end()}}function ia(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Ft(n),a=r[1];Lr(a,r,a.template,n)}}(e[8])}function oa(e,t,n){Qt(0),t(e,n)}var sa=Promise.resolve(null);function ua(e){return e[7]||(e[7]=[])}function ca(e){return e.cleanup||(e.cleanup=[])}function la(e,t){var n=e[9],r=n?n.get(Jn,null):null;r&&r.handleError(t)}function ha(e,t,n,r,a){for(var i=0;i<n.length;){var o=n[i++],s=n[i++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,a,r,s):u[s]=a}}function fa(e,t){var n=t[3];return-1===e.index?kt(n)?n:null:n}function da(e,t){var n=fa(e,t);return n?Ca(t[11],n[7]):null}function pa(e,t,n,r,a){if(null!=r){var i,o=!1;kt(r)?i=r:wt(r)&&(o=!0,r=r[0]);var s=Rt(r);0===e&&null!==n?null==a?wa(t,n,s):xa(t,n,s,a||null):1===e&&null!==n?xa(t,n,s,a||null):2===e?function(e,t,n){var r=Ca(e,t);r&&function(e,t,n,r){It(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=i&&function(e,t,n,r,a){var i=n[7];i!==Rt(n)&&pa(t,e,r,i,a);for(var o=9;o<n.length;o++){var s=n[o];Aa(s[1],s,e,t,r,i)}}(t,e,i,n,a)}}function ma(e,t,n,r){var a=da(e.node,t);a&&Aa(e,t,t[11],n?1:2,a,r)}function va(e,t){var n=e[5],r=n.indexOf(t);n.splice(r,1)}function ga(e,t){if(!(e.length<=9)){var n=9+t,r=e[n];if(r){var a=r[17];null!==a&&a!==e&&va(a,r),t>0&&(e[n-1][4]=r[4]);var i=rt(e,9+t);ma(r[1],r,!1,null);var o=i[5];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function ya(e,t){if(!(256&t[2])){var n=t[11];It(n)&&n.destroyNode&&Aa(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return ba(e[1],e);for(;t;){var n=null;if(wt(t))n=t[13];else{var r=t[9];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)wt(t)&&ba(t[1],t),t=_a(t,e);null===t&&(t=e),wt(t)&&ba(t[1],t),n=t&&t[4]}t=n}}(t)}}function _a(e,t){var n;return wt(e)&&(n=e[6])&&2===n.type?fa(n,e):e[3]===t?null:e[3]}function ba(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var a=t[n[r]];a instanceof gn||n[r+1].call(a)}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var i=n[a+1],o="function"==typeof i?i(t):Rt(t[i]),s=r[n[a+2]],u=n[a+3];"boolean"==typeof u?o.removeEventListener(n[a],s,u):u>=0?r[u]():r[-u].unsubscribe(),a+=2}else n[a].call(r[n[a+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&It(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&kt(t[3])){r!==t[3]&&va(r,t);var a=t[5];null!==a&&a.detachView(e)}}}function xa(e,t,n,r){It(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function wa(e,t,n){It(e)?e.appendChild(t,n):t.appendChild(n)}function ka(e,t,n,r){null!==r?xa(e,t,n,r):wa(e,t,n)}function Ca(e,t){return It(e)?e.parentNode(t):t.parentNode}function Sa(e,t,n,r){var a=function(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var a=n[6];return 2===a.type?da(a,n):n[0]}if(t&&5===t.type&&4&t.flags)return Dt(t,n).parentNode;if(2&r.flags){var i=e.data,o=i[i[r.index].directiveStart].encapsulation;if(o!==st.ShadowDom&&o!==st.Native)return null}return Dt(r,n)}(e,r,t);if(null!=a){var i=t[11],o=function(e,t){if(2===e.type){var n=fa(e,t);return null===n?null:Ta(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?Dt(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)ka(i,a,n[s],o);else ka(i,a,n,o)}}function Ta(e,t){var n=9+e+1;if(n<t.length){var r=t[n],a=r[1].firstChild;if(null!==a)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return Dt(n,t);if(0===r)return Ta(-1,t[n.index]);if(4===r||5===r){var a=n.child;if(null!==a)return e(t,a);var i=t[n.index];return kt(i)?Ta(-1,i):Rt(i)}var o=t[16],s=o[6],u=br(o),c=s.projection[n.projection];return null!=c?e(u,c):e(t,n.next)}return null}(r,a)}return t[7]}function Ea(e,t,n,r,a,i,o){for(;null!=n;){var s=r[n.index],u=n.type;o&&0===t&&(s&&sr(Rt(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Ea(e,t,n.child,r,a,i,!1),pa(t,e,a,s,i)):1===u?Ma(e,t,r,n,a,i):pa(t,e,a,s,i)),n=o?n.projectionNext:n.next}}function Aa(e,t,n,r,a,i){Ea(n,r,e.node.child,t,a,i,!1)}function Ma(e,t,n,r,a,i){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)pa(t,e,a,s[u],i);else Ea(e,t,s,o[3],a,i,!0)}function Ia(e,t,n){It(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Na(e,t,n){It(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var Ra,Da,Oa,La=function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}return _createClass(e,[{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,a){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var o=n[r.index];if(null!==o&&a.push(Rt(o)),kt(o))for(var s=9;s<o.length;s++){var u=o[s],c=u[1].firstChild;null!==c&&e(u[1],u,c,a)}var l=r.type;if(4===l||5===l)e(t,n,r.child,a);else if(1===l){var h=n[16],f=h[6],d=br(h),p=f.projection[r.projection];null!==p&&null!==d&&e(d[1],d,p,a,!0)}r=i?r.projectionNext:r.next}return a}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}ya(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r;t=this._lView[1],r=e,ua(n=this._lView).push(r),t.firstCreatePass&&ca(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){ra(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){aa(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Zt(!0);try{aa(e,t,n)}finally{Zt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Aa(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Fa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._view=e,r}return _createClass(n,[{key:"detectChanges",value:function(){ia(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Zt(!0);try{ia(e)}finally{Zt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(La);function Pa(e,t,n){return Ra||(Ra=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(e)),new Ra(Dt(t,n))}function za(e,t,n,r){return Da||(Da=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._declarationView=e,i._declarationTContainer=r,i.elementRef=a,i}return _createClass(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Nr(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(t)),Dr(t,n,e);var a=new La(n);return a._tViewNode=n[6],a}}]),n}(e)),0===n.type?new Da(r,n,Pa(t,n,r)):null}function Ba(e,t,n,r){var a;Oa||(Oa=function(e){_inherits(r,e);var n=_createSuper(r);function r(e,t,a){var i;return _classCallCheck(this,r),(i=n.call(this))._lContainer=e,i._hostTNode=t,i._hostView=a,i}return _createClass(r,[{key:"element",get:function(){return Pa(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new qn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=Pn(this._hostTNode,this._hostView),t=Tn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,a=n.parent;null!=a.parent&&r==a.parent.injectorIndex;)a=a.parent;return a}for(var i=Sn(e),o=t,s=t[6];i>1;)s=(o=o[15])[6],i--;return s}(e,this._hostView,this._hostTNode);return kn(e)&&null!=n?new qn(n,t):new qn(null,this._hostView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"length",get:function(){return this._lContainer.length-9}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,a){var i=n||this.parentInjector;if(!a&&null==e.ngModule&&i){var o=i.get(Qe,null);o&&(a=o)}var s=e.create(i,r,void 0,a);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),kt(n[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var i=n[3],o=new Oa(i,i[6],i[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,n,r){var a=9+r,i=n.length;r>0&&(n[a-1][4]=t),r<i-9?(t[4]=n[a],nt(n,9+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[5],r=t[3][3][16];16!=(16&r[2])&&t[16]!==r&&(e[2]|=1),null===n?e[5]=[t]:n.push(t)}(o,t);var s=t[5];null!==s&&s.insertView(e),t[2]|=128}(r,n,this._lContainer,s),ma(r,n,!0,Ta(s,this._lContainer)),e.attachToViewContainerRef(this),nt(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);(function(e,t){var n=ga(e,t);n&&ya(n[1],n)})(this._lContainer,t),rt(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=ga(this._lContainer,t);return n&&null!=rt(this._lContainer[8],t)?new La(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}}]),r}(e));var i=r[n.index];if(kt(i))(function(e,t){e[2]=-2})(a=i);else{var o;if(4===n.type)o=Rt(i);else if(o=r[11].createComment(""),At(r)){var s=r[11],u=Dt(n,r);xa(s,Ca(s,u),o,function(e,t){return It(e)?e.nextSibling(t):t.nextSibling}(s,u))}else Sa(r[1],r,o,n);r[n.index]=a=new Array(i,!0,-2,r,null,null,n,o,null),na(r,a)}return new Oa(a,n,r)}function Ua(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&St(e)){var r=Lt(e.index,t);return new La(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new La(t[16],t):null}(jt(),Gt(),e)}var Va=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.__NG_ELEMENT_ID__=function(){return Wa()},e}(),Wa=Ua,Ga=new Ue("Set Injector scope."),Ha={},ja={},qa=[],Ka=void 0;function Xa(){return void 0===Ka&&(Ka=new $e),Ka}function Za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Ya(e,n,t||Xa(),r)}var Ya=function(){function e(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&tt(n,(function(e){return a.processProvider(e,t,n)})),tt([t],(function(e){return a.processInjectorType(e,[],o)})),this.records.set(Ve,Qa(void 0,this));var s=this.records.get(Ga);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:xe(t))}return _createClass(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;this.assertNotDestroyed();var r,a=qe(this);try{if(!(n&ue.SkipSelf)){var i=this.records.get(e);if(void 0===i){var o=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Ue)&&de(e);i=o&&this.injectableDefInScope(o)?Qa(Ja(e),Ha):null,this.records.set(e,i)}if(null!=i)return this.hydrate(e,i)}return(n&ue.Self?Xa():this.parent).get(e,t=n&ue.Optional&&t===We?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(xe(e)),a)throw s;return function(e,t,n,r){var a=e.ngTempTokenPath;throw t.__source&&a.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var a=xe(t);if(Array.isArray(t))a=t.map(xe).join(" -> ");else if("object"==typeof t){var i=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):xe(s)))}a="{".concat(i.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(a,"]: ").concat(e.replace(Ge,"\n  "))}("\n"+e.message,a,"R3InjectorError",r),e.ngTokenPath=a,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{qe(a)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(xe(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=Se(e)))return!1;var a=me(e),i=null==a&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(a=me(i)),null==a)return!1;if(null!=a.imports&&!s){var u;n.push(o);try{tt(a.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,a=t.providers;tt(a,(function(e){return r.processProvider(e,n,a||qa)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o),this.records.set(o,Qa(a.factory,Ha));var h=a.providers;if(null!=h&&!s){var f=e;tt(h,(function(e){return r.processProvider(e,f,h)}))}return void 0!==i&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=ti(e=Se(e))?e:Se(e&&e.provide),a=function(e,t,n){return ei(e)?Qa(void 0,e.useValue):Qa($a(e,t,n),Ha)}(e,t,n);if(ti(e)||!0!==e.multi){var i=this.records.get(r);i&&void 0!==i.multi&&cr()}else{var o=this.records.get(r);o?void 0===o.multi&&cr():((o=Qa(void 0,Ha,!0)).factory=function(){return Je(o.multi)},this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,a)}},{key:"hydrate",value:function(e,t){var n;return t.value===ja?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(xe(e)):t.value===Ha&&(t.value=ja,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}]),e}();function Ja(e){var t=de(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;var r=me(e);if(null!==r)return r.factory;if(e instanceof Ue)throw new Error("Token ".concat(xe(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(xe(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[ve]||e[_e]||e[ye]&&e[ye]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in v10. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function $a(e,t,n){var r,a=void 0;if(ti(e)){var i=Se(e);return bt(i)||Ja(i)}if(ei(e))a=function(){return Se(e.useValue)};else if((r=e)&&r.useFactory)a=function(){return e.useFactory.apply(e,_toConsumableArray(Je(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))a=function(){return Ze(Se(e.useExisting))};else{var o=Se(e&&(e.useClass||e.provide));if(o||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(xe(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return bt(o)||Ja(o);a=function(){return _construct(o,_toConsumableArray(Je(e.deps)))}}return a}function Qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function ei(e){return null!==e&&"object"==typeof e&&He in e}function ti(e){return"function"==typeof e}var ni=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,a=Za(e,t,n,r);return a._resolveInjectorDefTypes(),a}({name:n},t,e,n)},ri=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?ni(e,t,""):ni(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=We,e.NULL=new $e,e.\u0275prov=he({token:e,providedIn:"any",factory:function(){return Ze(Ve)}}),e.__NG_ELEMENT_ID__=-1,e}(),ai=new Ue("AnalyzeForEntryComponents"),ii=new Map,oi=new Set;function si(e){return"string"==typeof e?e:e.text()}function ui(e,t){for(var n=e.styles,r=e.classes,a=0,i=0;i<t.length;i++){var o=t[i];"number"==typeof o?a=o:1==a?r=we(r,o):2==a&&(n=we(n,o+": "+t[++i]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}var ci=null;function li(){if(!ci){var e=Re.Symbol;if(e&&e.iterator)ci=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ci=r)}}return ci}function hi(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}var fi=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function di(e){return!!pi(e)&&(Array.isArray(e)||!(e instanceof Map)&&li()in e)}function pi(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function mi(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function vi(e,t,n,r){var a=Gt();return mi(a,Yt(),t)&&(Ht(),function(e,t,n,r,a,i){var o=Dt(e,t),s=t[11];if(null==r)It(s)?s.removeAttribute(o,n,i):o.removeAttribute(n);else{var u=null==a?En(r):a(r,e.tagName||"",n);It(s)?s.setAttribute(o,n,u,i):i?o.setAttributeNS(i,n,u):o.setAttribute(n,u)}}(ln(),a,e,t,n,r)),vi}function gi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default,n=Gt();return null==n?Ze(e,t):Bn(jt(),n,Se(e),t)}function yi(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,a=0;a<r;){var i=n[a];if(_n(i))break;if(0===i)a+=2;else if("number"==typeof i)for(a++;a<r&&"string"==typeof n[a];)a++;else{if(i===t)return n[a+1];a+=2}}return null}(jt(),e)}function _i(){throw new Error("invalid")}function bi(e,t,n){var r=Gt();return mi(r,Yt(),t)&&Vr(Ht(),ln(),r,e,t,r[11],n,!1),bi}function xi(e,t,n,r,a){var i=a?"class":"style";ha(e,n,t.inputs[i],i,r)}function wi(e,t,n,r){var a=Gt(),i=Ht(),o=19+e,s=a[11],u=a[o]=Ir(t,s,Vt.lFrame.currentNamespace),c=i.firstCreatePass?function(e,t,n,r,a,i,o){var s=t.consts,u=Bt(s,i),c=Rr(t,n[6],e,3,a,u);return function(e,t,n,r){if(Wt()){var a=function(e,t,n){var r=e.directiveRegistry,a=null;if(r)for(var i=0;i<r.length;i++){var o=r[i];vr(n,o.selectors,!1)&&(a||(a=[]),zn(On(n,t),e,o.type),Et(o)?(2&n.flags&&ur(n),qr(e,n),a.unshift(o)):a.push(o))}return a}(e,t,n),i=null===r?null:{"":-1};if(null!==a){var o=0;!0,Xr(n,e.data.length,a.length);for(var s=0;s<a.length;s++){var u=a[s];u.providersResolver&&u.providersResolver(u)}jr(e,n,a.length);for(var c=!1,l=!1,h=0;h<a.length;h++){var f=a[h];n.mergedAttrs=xn(n.mergedAttrs,f.hostAttrs),Zr(e,t,f),Kr(e.data.length-1,f,i),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128),!c&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),c=!0),l||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),l=!0),Wr(e,f),o+=f.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,a=t.attrs,i=[],o=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs;i.push(null!==a?$r(l,a):null),o=Ur(l,u,o),s=Ur(c.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=i,t.inputs=o,t.outputs=s}(e,n),Gr(e,t,o)}i&&function(e,t,n){if(t)for(var r=e.localNames=[],a=0;a<t.length;a+=2){var i=n[t[a+1]];if(null==i)throw new Error("Export of name '".concat(t[a+1],"' not found!"));r.push(t[a],i)}}(n,r,i)}n.mergedAttrs=xn(n.mergedAttrs,n.attrs)}(t,n,c,Bt(s,o)),null!==c.mergedAttrs&&ui(c,c.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,c),c}(e,i,a,0,t,n,r):i.data[o];qt(c,!0);var l=c.mergedAttrs;null!==l&&yn(s,u,l);var h=c.classes;null!==h&&Na(s,u,h);var f=c.styles;null!==f&&Ia(s,u,f),Sa(i,a,u,c),0===Vt.lFrame.elementDepthCount&&sr(u,a),Vt.lFrame.elementDepthCount++,Tt(c)&&(function(e,t,n){Wt()&&(function(e,t,n,r){var a=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||On(n,t),sr(r,t);for(var o=n.initialInputs,s=a;s<i;s++){var u=e.data[s],c=Et(u);c&&Yr(t,n,u);var l=Gn(t,e,s,n);sr(l,t),null!==o&&Jr(0,s-a,l,u,0,o),c&&(Lt(n.index,t)[8]=l)}}(e,t,n,Dt(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,a=n.directiveEnd,i=e.expandoInstructions,o=e.firstCreatePass,s=n.index-19;try{cn(s);for(var u=r;u<a;u++){var c=e.data[u],l=t[u];null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs?Hr(c,l):o&&i.push(null)}}finally{cn(-1)}}(e,t,n))}(i,a,c),function(e,t,n){if(Ct(t))for(var r=t.directiveEnd,a=t.directiveStart;a<r;a++){var i=e.data[a];i.contentQueries&&i.contentQueries(1,n[a],a)}}(i,c,a)),null!==r&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dt,r=t.localNames;if(null!==r)for(var a=t.index+1,i=0;i<r.length;i+=2){var o=r[i+1],s=-1===o?n(t,e):e[o];e[a++]=s}}(a,c)}function ki(){var e=jt();Kt()?Vt.lFrame.isParent=!1:qt(e=e.parent,!1);var t=e;Vt.lFrame.elementDepthCount--;var n=Ht();n.firstCreatePass&&(hn(n,e),Ct(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&xi(n,t,Gt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&xi(n,t,Gt(),t.styles,!1)}function Ci(e,t,n,r){wi(e,t,n,r),ki()}function Si(e){return!!e&&"function"==typeof e.then}function Ti(e){return!!e&&"function"==typeof e.subscribe}function Ei(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=Gt(),i=Ht(),o=jt();return function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Tt(r),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=ua(t),h=!0;if(3===r.type){var f=Dt(r,t),d=s?s(f):ut,p=d.target||f,m=l.length,v=s?function(e){return s(Rt(e[r.index])).target}:r.index;if(It(n)){var g=null;if(!s&&u&&(g=function(e,t,n,r){var a=e.cleanup;if(null!=a)for(var i=0;i<a.length-1;i+=2){var o=a[i];if(o===n&&a[i+1]===r){var s=t[7],u=a[i+2];return s.length>u?s[u]:null}"string"==typeof o&&(i+=2)}return null}(e,t,a,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=i,g.__ngLastListenerFn__=i,h=!1;else{i=Mi(r,t,i,!1);var y=n.listen(d.name||p,a,i);l.push(i,y),c&&c.push(a,v,m,m+1)}}else i=Mi(r,t,i,!0),p.addEventListener(a,i,o),l.push(i),c&&c.push(a,v,m,o)}var _,b=r.outputs;if(h&&null!==b&&(_=b[a])){var x=_.length;if(x)for(var w=0;w<x;w+=2){var k=t[_[w]][_[w+1]].subscribe(i),C=l.length;l.push(i,k),c&&c.push(a,r.index,C,-(C+1))}}}(i,a,a[11],o,e,t,n,r),Ei}function Ai(e,t,n){try{return!1!==t(n)}catch(r){return la(e,r),!1}}function Mi(e,t,n,r){return function a(i){if(i===Function)return n;var o=2&e.flags?Lt(e.index,t):t;0==(32&t[2])&&ra(o);for(var s=Ai(t,n,i),u=a.__ngNextListenerFn__;u;)s=Ai(t,u,i)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(i.preventDefault(),i.returnValue=!1),s}}var Ii=[];function Ni(e,t,n,r,a){for(var i=e[n+1],o=null===t,s=r?Cr(i):Tr(i),u=!1;0!==s&&(!1===u||o);){var c=e[s+1];Ri(e[s],t)&&(u=!0,e[s+1]=r?Ar(c):Sr(c)),s=r?Cr(c):Tr(c)}u&&(e[n+1]=r?Sr(i):Ar(i))}function Ri(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&it(e,t)>=0}function Di(e,t){return function(e,t,n,r){var a,i,o,s=Gt(),u=Ht(),c=(a=Vt.lFrame,i=a.bindingIndex,a.bindingIndex=a.bindingIndex+2,i);(u.firstUpdatePass&&function(e,t,n,r){var a=e.data;if(null===a[n+1]){var i=a[un()+19],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(i)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var a=function(e){var t=Vt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),i=t.residualClasses;if(null===a)0===t.classBindings&&(n=Li(n=Oi(null,e,t,n,!0),t.attrs,!0),i=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==a)if(n=Oi(a,e,t,n,!0),null===i){var s=function(e,t,n){var r=t.classBindings;if(0!==Tr(r))return e[Cr(r)]}(e,t);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[Cr(t.classBindings)]=r}(e,t,0,s=Li(s=Oi(null,e,t,s[1],!0),t.attrs,!0))}else i=function(e,t,n){for(var r=void 0,a=t.directiveEnd,i=1+t.directiveStylingLast;i<a;i++)r=Li(r,e[i].hostAttrs,!0);return Li(r,t.attrs,!0)}(e,t)}return void 0!==i&&(t.residualClasses=i),n}(a,i,t),function(e,t,n,r,a,i){var o=t.classBindings,s=Cr(o),u=Tr(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||it(h,c)>0)&&(l=!0)}else c=n;if(a)if(0!==u){var f=Cr(e[s+1]);e[r+1]=kr(f,s),0!==f&&(e[f+1]=Er(e[f+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=kr(s,0),0!==s&&(e[s+1]=Er(e[s+1],r)),s=r;else e[r+1]=kr(u,0),0===s?s=r:e[u+1]=Er(e[u+1],r),u=r;l&&(e[r+1]=Sr(e[r+1])),Ni(e,c,r,!0),Ni(e,c,r,!1),function(e,t,n,r,a){var i=e.residualClasses;null!=i&&"string"==typeof t&&it(i,t)>=0&&(n[r+1]=Ar(n[r+1]))}(t,c,e,r),o=kr(s,u),t.classBindings=o}(a,i,t,n,o)}}(u,e,c),t!==_r&&mi(s,c,t))&&(null==n&&(o=function(){var e=Vt.lFrame;return null===e?null:e.currentSanitizer}())&&(n=o),function(e,t,n,r,a,i,o,s){if(3===t.type){var u=e.data,c=u[s+1];Pi(1==(1&c)?Fi(u,t,n,a,Tr(c),!0):void 0)||(Pi(i)||2==(2&c)&&(i=Fi(u,null,n,a,s,!0)),function(e,t,n,r,a){var i=It(e);a?i?e.addClass(n,r):n.classList.add(r):i?e.removeClass(n,r):n.classList.remove(r)}(r,0,function(e,t){return Rt(t[e+19])}(un(),n),a,i))}}(u,u.data[un()+19],s,s[11],e,s[c+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=xe(Qn(e)))),e}(t,n),0,c))}(e,t,null),Di}function Oi(e,t,n,r,a){var i=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=Li(r,(i=t[s]).hostAttrs,a),i!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function Li(e,t,n){var r,a,i,o,s=n?1:2,u=-1;if(null!==t)for(var c=0;c<t.length;c++){var l=t[c];"number"==typeof l?u=l:u===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),r=e,a=l,i=!!n||t[++c],o=void 0,(o=it(r,a))>=0?r[1|o]=i:function(e,t,n,r){var a=e.length;if(a==t)e.push(n,r);else if(1===a)e.push(r,e[0]),e[0]=n;else{for(a--,e.push(e[a-1],e[a]);a>t;)e[a]=e[a-2],a--;e[t]=n,e[t+1]=r}}(r,o=~o,a,i))}return void 0===e?null:e}function Fi(e,t,n,r,a,i){for(var o=null===t,s=void 0;a>0;){var u=e[a],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[a+1];f===_r&&(f=h?Ii:void 0);var d=h?at(f,r):l===r?f:void 0;if(c&&!Pi(d)&&(d=at(u,r)),Pi(d)&&(s=d,o))return s;var p=e[a+1];a=o?Cr(p):Tr(p)}if(null!==t){var m=i?t.residualClasses:t.residualStyles;null!=m&&(s=at(m,r))}return s}function Pi(e){return void 0!==e}function zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Gt(),r=Ht(),a=e+19,i=r.firstCreatePass?Rr(r,n[6],e,3,null,null):r.data[a],o=n[a]=function(e,t){return It(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Sa(r,n,o,i),qt(i,!1)}function Bi(e,t,n){var r=Gt();return mi(r,Yt(),t)&&Vr(Ht(),ln(),r,e,t,r[11],n,!0),Bi}function Ui(e,t){var n=Ft(e)[1],r=n.data.length-1;hn(n,{directiveStart:r,directiveEnd:r+1})}function Vi(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var a=void 0;if(Et(e))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(n){r.push(a);var i=e;i.inputs=Wi(e.inputs),i.declaredInputs=Wi(e.declaredInputs),i.outputs=Wi(e.outputs);var o=a.hostBindings;o&&ji(e,o);var s=a.viewQuery,u=a.contentQueries;if(s&&Gi(e,s),u&&Hi(e,u),le(e.inputs,a.inputs),le(e.declaredInputs,a.declaredInputs),le(e.outputs,a.outputs),Et(a)&&a.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(a.data.animation)}i.afterContentChecked=i.afterContentChecked||a.afterContentChecked,i.afterContentInit=e.afterContentInit||a.afterContentInit,i.afterViewChecked=e.afterViewChecked||a.afterViewChecked,i.afterViewInit=e.afterViewInit||a.afterViewInit,i.doCheck=e.doCheck||a.doCheck,i.onDestroy=e.onDestroy||a.onDestroy,i.onInit=e.onInit||a.onInit}var l=a.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===Vi&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var a=e[r];a.hostVars=t+=a.hostVars,a.hostAttrs=xn(a.hostAttrs,n=xn(n,a.hostAttrs))}}(r)}function Wi(e){return e===ut?{}:e===ct?[]:e}function Gi(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Hi(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,a){t(e,r,a),n(e,r,a)}:t}function ji(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var qi=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Ki(e){e.type.prototype.ngOnChanges&&(e.setInput=Xi,e.onChanges=function(){var e=Zi(this),t=e&&e.current;if(t){var n=e.previous;if(n===ut)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function Xi(e,t,n,r){var a=Zi(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ut,current:null}),i=a.current||(a.current={}),o=a.previous,s=this.declaredInputs[n],u=o[s];i[s]=new qi(u&&u.currentValue,t,o===ut),e[r]=t}function Zi(e){return e.__ngSimpleChanges__||null}function Yi(e,t,n,r,a){if(e=Se(e),Array.isArray(e))for(var i=0;i<e.length;i++)Yi(e[i],t,n,r,a);else{var o=Ht(),s=Gt(),u=ti(e)?e:Se(e.provide),c=$a(e),l=jt(),h=65535&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>16;if(ti(e)||!e.multi){var p=new gn(c,a,gi),m=Qi(u,t,a?h:h+d,f);-1===m?(zn(On(l,s),o,u),Ji(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,a&&(l.providerIndexes+=65536),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{var v=Qi(u,t,h+d,f),g=Qi(u,t,h,h+d),y=v>=0&&n[v],_=g>=0&&n[g];if(a&&!_||!a&&!y){zn(On(l,s),o,u);var b=function(e,t,n,r,a){var i=new gn(e,n,gi);return i.multi=[],i.index=t,i.componentProviders=0,$i(i,a,r&&!n),i}(a?to:eo,n.length,a,r,c);!a&&_&&(n[g].providerFactory=b),Ji(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,a&&(l.providerIndexes+=65536),n.push(b),s.push(b)}else Ji(o,e,v>-1?v:g),$i(n[a?g:v],c,!a&&r);!a&&r&&_&&n[g].componentProviders++}}}function Ji(e,t,n){if(ti(t)||t.useClass){var r=(t.useClass||t).prototype.ngOnDestroy;r&&(e.destroyHooks||(e.destroyHooks=[])).push(n,r)}}function $i(e,t,n){e.multi.push(t),n&&e.componentProviders++}function Qi(e,t,n,r){for(var a=n;a<r;a++)if(t[a]===e)return a;return-1}function eo(e,t,n,r){return no(this.multi,[])}function to(e,t,n,r){var a,i=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=Gn(n,n[1],this.providerFactory.index,r);no(i,a=s.slice(0,o));for(var u=o;u<s.length;u++)a.push(s[u])}else no(i,a=[]);return a}function no(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Ht();if(r.firstCreatePass){var a=Et(e);Yi(n,r.data,r.blueprint,a,!0),Yi(t,r.data,r.blueprint,a,!1)}}(n,r?r(e):e,t)}}}Ki.ngInherit=!0;var ao=_createClass((function e(){_classCallCheck(this,e)})),io=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(xe(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),oo=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.NULL=new io,e}(),so=function(){var e=_createClass((function e(t){_classCallCheck(this,e),this.nativeElement=t}));return e.__NG_ELEMENT_ID__=function(){return uo(e)},e}(),uo=function(e){return Pa(e,jt(),Gt())},co=_createClass((function e(){_classCallCheck(this,e)})),lo=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),ho=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.__NG_ELEMENT_ID__=function(){return fo()},e}(),fo=function(){var e=Gt(),t=Lt(jt().index,e);return function(e){var t=e[11];if(It(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(wt(t)?t:e)},po=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return null}}),e}(),mo=new(_createClass((function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")})))("9.0.7"),vo=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return di(e)}},{key:"create",value:function(e){return new yo(e)}}]),e}(),go=function(e,t){return t},yo=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||go}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,a=null;t||n;){var i=!n||t&&t.currentIndex<wo(n,r,a)?t:n,o=wo(i,r,a),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{a||(a=[]);var u=o-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<a.length?a[l]:a[l]=0,f=h+l;c<=f&&f<u&&(a[l]=h+1)}a[i.previousIndex]=c-u}}o!==s&&e(i,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!di(e))throw new Error("Error trying to diff '".concat(xe(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,a,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],a=this._trackByFn(s,r),null!==i&&hi(i.trackById,a)?(o&&(i=this._verifyReinsertion(i,r,a,s)),hi(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,a,s),o=!0),i=i._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,a=e[li()]();!(r=a.next()).done;)t(r.value)}(e,(function(e){a=t._trackByFn(n,e),null!==i&&hi(i.trackById,a)?(o&&(i=t._verifyReinsertion(i,e,a,n)),hi(i.item,e)||t._addIdentityChange(i,e)):(i=t._mismatch(i,e,a,n),o=!0),i=i._next,n++})),this.length=n;return this._truncate(i),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var a;return null===e?a=this._itTail:(a=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(hi(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,a,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(hi(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,a,r)):e=this._addAfter(new _o(t,n),a,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?e=this._reinsertAfter(a,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,a=e._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new xo),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),_o=_createClass((function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null})),bo=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&hi(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),xo=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new bo,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function wo(e,t,n){var r=e.previousIndex;if(null===r)return r;var a=0;return n&&r<n.length&&(a=n[r]),r+t+a}var ko=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||pi(e)}},{key:"create",value:function(){return new Co}}]),e}(),Co=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||pi(e)))throw new Error("Error trying to diff '".concat(xe(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var a=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,a)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,a=n._next;return r&&(r._next=a),a&&(a._prev=r),n._next=null,n._prev=null,n}var i=new So(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){hi(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}}]),e}(),So=_createClass((function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null})),To=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new ie]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new vo])}}),e}(),Eo=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new se,new ie]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new ko])}}),e}(),Ao=[new ko],Mo=new To([new vo]),Io=new Eo(Ao),No=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.__NG_ELEMENT_ID__=function(){return Ro(e,so)},e}(),Ro=function(e,t){return za(e,t,jt(),Gt())},Do=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.__NG_ELEMENT_ID__=function(){return Oo(e,so)},e}(),Oo=function(e,t){return Ba(e,t,jt(),Gt())},Lo={},Fo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ngModule=e,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(e){var t=_t(e);return new Bo(t,this.ngModule)}}]),n}(oo);function Po(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var zo=new Ue("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Mn}}),Bo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).componentDef=e,a.ngModule=r,a.componentType=e.type,a.selector=e.selectors.map(yr).join(","),a.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],a.isBoundToModule=!!r,a}return _createClass(n,[{key:"inputs",get:function(){return Po(this.componentDef.inputs)}},{key:"outputs",get:function(){return Po(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var a,i,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,a){var i=e.get(n,Lo,a);return i!==Lo||r===Lo?i:t.get(n,r,a)}}}(e,r.injector):e,s=o.get(co,Nt),u=o.get(po,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(It(e))return e.selectRootElement(t,n===st.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Ir(l,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),p={components:[],scheduler:Mn,clean:sa,playerHandler:null,flags:0},m=zr(0,-1,null,1,0,null,null,null,null,null),v=Nr(null,m,p,f,null,null,s,c,u,o);tn(v,null);try{var g=function(e,t,n,r,a,i){var o=n[1];n[19]=e;var s=Rr(o,null,0,3,null,null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(ui(s,u),null!==e&&(yn(a,e,u),null!==s.classes&&Na(a,e,s.classes),null!==s.styles&&Ia(a,e,s.styles)));var c=r.createRenderer(e,t),l=Nr(n,Pr(t),null,t.onPush?64:16,n[19],s,r,c,void 0);return o.firstCreatePass&&(zn(On(s,n),o,t.type),qr(o,s),Xr(s,n.length,1)),na(n,l),n[19]=l}(h,this.componentDef,v,s,c);if(h)if(n)yn(c,h,["ng-version",mo.full]);else{var y=function(e){for(var t=[],n=[],r=1,a=2;r<e.length;){var i=e[r];if("string"==typeof i)2===a?""!==i&&t.push(i,e[++r]):8===a&&n.push(i);else{if(!pr(a))break;a=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),_=y.attrs,b=y.classes;_&&yn(c,h,_),b&&b.length>0&&Na(c,h,b.join(" "))}i=Ot(v[1],0),t&&(i.projection=t.map((function(e){return Array.from(e)}))),a=function(e,t,n,r,a){var i=n[1],o=function(e,t,n){var r=jt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),jr(e,r,1),Zr(e,t,n));var a=Gn(t,e,t.length-1,r);sr(a,t);var i=Dt(r,t);return i&&sr(i,t),a}(i,n,t);r.components.push(o),e[8]=o,a&&a.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,n.length-1);var s=jt();if(i.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){cn(s.index-19);var u=n[1];Wr(u,t),Gr(u,n,t.hostVars),Hr(t,o)}return o}(g,this.componentDef,v,p,[Ui]),Dr(m,v,null)}finally{sn()}var x=new Uo(this.componentType,a,Pa(so,i,v),v,i);return n&&!d||(x.hostView._tViewNode.child=i),x}}]),n}(ao),Uo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s,u,c,l;return _classCallCheck(this,n),(s=t.call(this)).location=a,s._rootLView=i,s._tNode=o,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new Fa(i),s.hostView._tViewNode=(u=i[1],c=i,null==(l=u.node)&&(u.node=l=Br(0,null,2,-1,null,null)),c[6]=l),s.componentType=e,s}return _createClass(n,[{key:"injector",get:function(){return new qn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}}]),n}(function(){return _createClass((function e(){_classCallCheck(this,e)}))}()),Vo=void 0,Wo=["en",[["a","p"],["AM","PM"],Vo],[["AM","PM"],Vo,Vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vo,"{1} 'at' {0}",Vo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Go={};function Ho(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=jo(t);if(n)return n;var r=t.split("-")[0];if(n=jo(r))return n;if("en"===r)return Wo;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function jo(e){return e in Go||(Go[e]=Re.ng&&Re.ng.common&&Re.ng.common.locales&&Re.ng.common.locales[e]),Go[e]}var qo=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function Ko(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined")+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var Xo=new Map,Zo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;_classCallCheck(this,n),(a=t.call(this))._parent=r,a._bootstrapComponents=[],a.injector=_assertThisInitialized(a),a.destroyCbs=[],a.componentFactoryResolver=new Fo(_assertThisInitialized(a));var i=xt(e),o=e[Pe]||null;return o&&Ko(o),a._bootstrapComponents=In(i.bootstrap),a._r3Injector=Za(e,r,[{provide:Qe,useValue:_assertThisInitialized(a)},{provide:oo,useValue:a.componentFactoryResolver}],xe(e)),a._r3Injector._resolveInjectorDefTypes(),a.instance=a.get(e),a}return _createClass(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ri.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;return e===ri||e===Qe||e===Ve?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Qe),Yo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).moduleType=e,null!==xt(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(xe(t)," vs ").concat(xe(t.name)))})(n,Xo.get(n),t),Xo.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return _createClass(n,[{key:"create",value:function(e){return new Zo(this.moduleType,e)}}]),n}(et),Jo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get2(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var a,i=function(e){return null},o=function(){return null};e&&"object"==typeof e?(a=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(i=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(a=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get2(_getPrototypeOf(n.prototype),"subscribe",this).call(this,a,i,o);return e instanceof f&&e.add(s),s}}]),n}(A);function $o(){return this._results[li()]()}var Qo=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new Jo,this.length=0;var t=li(),n=e.prototype;n[t]||(n[t]=$o)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var a=t[r];Array.isArray(a)?(n===t&&(n=t.slice(0,r)),e(a,n)):n!==t&&n.push(a)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),es=function(){function e(t){_classCallCheck(this,e),this.queryList=t,this.matches=null}return _createClass(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),ts=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,a=[],i=0;i<r;i++){var o=n.getByIndex(i);a.push(this.queries[o.indexInDeclarationView].clone())}return new e(a)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==ds(e,t).matches&&this.queries[t].setDirty()}}]),e}(),ns=_createClass((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.predicate=t,this.descendants=n,this.isStatic=r,this.read=a})),rs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var a=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(t,a);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),as=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _createClass(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,r=0;r<n.length;r++)this.matchTNodeWithReadOption(e,t,is(t,n[r]));else{var a=this.metadata.predicate;a===No?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wn(t,e,a,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===so||r===Do||r===No&&0===t.type)this.addMatch(t.index,-2);else{var a=Wn(t,e,r,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function is(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function os(e,t,n,r){return-1===n?function(e,t){return 3===e.type||4===e.type?Pa(so,e,t):0===e.type?za(No,so,e,t):null}(t,e):-2===n?function(e,t,n){return n===so?Pa(so,t,e):n===No?za(No,so,t,e):n===Do?Ba(Do,so,t,e):void 0}(e,t,r):Gn(e,e[1],n,t)}function ss(e,t,n,r){var a=t[5].queries[r];if(null===a.matches){for(var i=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var c=o[u];s.push(c<0?null:os(t,i[c],o[u+1],n.metadata.read))}a.matches=s}return a.matches}function us(e){var t=Gt(),n=Ht(),r=$t();Qt(r+1);var a=ds(n,r);if(e.dirty&&Pt(t)===a.metadata.isStatic){if(null===a.matches)e.reset([]);else{var i=a.crossesNgTemplate?function e(t,n,r,a){var i=t.queries.getByIndex(r),o=i.matches;if(null!==o)for(var s=ss(t,n,i,r),u=0;u<o.length;u+=2){var c=o[u];if(c>0)a.push(s[u/2]);else{for(var l=o[u+1],h=n[-c],f=9;f<h.length;f++){var d=h[f];d[17]===d[3]&&e(d[1],d,l,a)}if(null!==h[5])for(var p=h[5],m=0;m<p.length;m++){var v=p[m];e(v[1],v,l,a)}}}return a}(n,t,r,[]):ss(n,t,a,r);e.reset(i),e.notifyOnChanges()}return!0}return!1}function cs(e,t,n,r){!function(e,t,n,r,a,i,o,s){e.firstCreatePass&&(fs(e,new ns(n,r,!1,a),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,s)),hs(e,t)}(Ht(),Gt(),t,n,r,0,jt(),e)}function ls(){return e=Gt(),t=$t(),e[5].queries[t].queryList;var e,t}function hs(e,t){var n=new Qo;!function(e,t,n,r){var a=ua(t);a.push(n),e.firstCreatePass&&ca(e).push(r,a.length-1)}(e,t,n,n.destroy),null===t[5]&&(t[5]=new ts),t[5].queries.push(new es(n))}function fs(e,t,n){null===e.queries&&(e.queries=new rs),e.queries.track(new as(t,n))}function ds(e,t){return e.queries.getByIndex(t)}var ps=new Ue("Application Initializer"),ms=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var a=this.appInits[r]();Si(a)&&t.push(a)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(ps,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),vs=new Ue("AppId"),gs={provide:vs,useFactory:function(){return"".concat(ys()).concat(ys()).concat(ys())},deps:[]};function ys(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var _s=new Ue("Platform Initializer"),bs=new Ue("Platform ID"),xs=new Ue("appBootstrapListener"),ws=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),ks=new Ue("LocaleId"),Cs=new Ue("DefaultCurrencyCode"),Ss=_createClass((function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n})),Ts=function(e){return new Yo(e)},Es=Ts,As=function(e){return Promise.resolve(Ts(e))},Ms=function(e){var t=Ts(e),n=In(xt(e).declarations).reduce((function(e,t){var n=_t(t);return n&&e.push(new Bo(n)),e}),[]);return new Ss(t,n)},Is=Ms,Ns=function(e){return Promise.resolve(Ms(e))},Rs=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Es,this.compileModuleAsync=As,this.compileModuleAndAllComponentsSync=Is,this.compileModuleAndAllComponentsAsync=Ns}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Ds=new Ue("compilerOptions"),Os=Promise.resolve(0);function Ls(e){"undefined"==typeof Zone?Os.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Fs=function(){function e(t){var n,r,a=t.enableLongStackTrace,i=void 0!==a&&a,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Re.requestAnimationFrame,t=Re.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Re,(function(){e.lastRequestAnimationFrameId=-1,Us(e),Bs(e)})),Us(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,a,i,o,s){try{return Vs(n),e.invokeTask(a,i,o,s)}finally{r&&"eventTask"===i.type&&r(),Ws(n)}},onInvoke:function(e,t,r,a,i,o,s){try{return Vs(n),e.invoke(r,a,i,o,s)}finally{Ws(n)}},onHasTask:function(e,t,r,a){e.hasTask(r,a),t===r&&("microTask"==a.change?(n._hasPendingMicrotasks=a.microTask,Us(n),Bs(n)):"macroTask"==a.change&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:function(e,t,r,a){return e.handleError(r,a),n.runOutsideAngular((function(){return n.onError.emit(a)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var a=this._inner,i=a.scheduleEventTask("NgZoneEvent: "+r,e,zs,Ps,Ps);try{return a.runTask(i,t,n)}finally{a.cancelTask(i)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function Ps(){}var zs={};function Bs(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function Us(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Vs(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ws(e){e._nesting--,Bs(e)}var Gs,Hs=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),js=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Fs.assertNotInAngularZone(),Ls((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Ls((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,a=-1;t&&t>0&&(a=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==a})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(Fs))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),qs=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,Ks.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ks.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Ks=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Xs=function(e,t,n){var r=new Yo(n);if(0===ii.size)return Promise.resolve(r);var a,i,o=(a=e.get(Ds,[]).concat(t).map((function(e){return e.providers})),i=[],a.forEach((function(e){return e&&i.push.apply(i,_toConsumableArray(e))})),i);if(0===o.length)return Promise.resolve(r);var s=function(){var e=Re.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),u=ri.create({providers:o}).get(s.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(u.get(e))}(e);n.set(e,t=r.then(si))}return t}return ii.forEach((function(e,n){var a=[];e.templateUrl&&a.push(r(e.templateUrl).then((function(t){e.template=t})));var i=e.styleUrls,o=e.styles||(e.styles=[]),s=e.styles.length;i&&i.forEach((function(t,n){o.push(""),a.push(r(t).then((function(r){o[s+n]=r,i.splice(i.indexOf(t),1),0==i.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(a).then((function(){return function(e){oi.delete(e)}(n)}));t.push(u)})),ii=new Map,Promise.all(t).then((function(){}))}().then((function(){return r}))},Zs=new Ue("AllowMultipleToken"),Ys=_createClass((function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n}));function Js(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),a=new Ue(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=$s();if(!i||i.injector.get(Zs,!1))if(e)e(n.concat(t).concat({provide:a,useValue:!0}));else{var o=n.concat(t).concat({provide:a,useValue:!0},{provide:Ga,useValue:"platform"});!function(e){if(Gs&&!Gs.destroyed&&!Gs.injector.get(Zs,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Gs=e.get(Qs);var t=e.get(_s,null);t&&t.forEach((function(e){return e()}))}(ri.create({providers:o,name:r}))}return function(e){var t=$s();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function $s(){return Gs&&!Gs.destroyed?Gs:null}var Qs=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,a=this,i=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new Hs:("zone.js"===n?void 0:n)||new Fs({enableLongStackTrace:nr(),shouldCoalesceEventChangeDetection:r})),o=[{provide:Fs,useValue:i}];return i.run((function(){var t=ri.create({providers:o,parent:a.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(Jn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return ru(a._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var i=((o=n.injector.get(ms)).runInitializers(),o.donePromise.then((function(){return Ko(n.injector.get(ks,"en-US")||"en-US"),a._moduleDoBootstrap(n),n})));return Si(i)?i.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):i}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var o}(r,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=eu({},n);return Xs(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(nu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(xe(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(ri))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function eu(e,t){return Array.isArray(t)?t.reduce(eu,e):Object.assign(Object.assign({},e),t)}var tu,nu=((tu=function(){function e(t,n,r,a,i,o){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=a,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=nr(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new w((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new w((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){Fs.assertNotInAngularZone(),Ls((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Fs.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,a=null,i=t[t.length-1];return I(i)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===a&&1===t.length&&t[0]instanceof w?t[0]:K(r)(X(t,a))}(u,c.pipe((function(e){return Z()((t=te,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,Q);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof ao?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var a=n.isBoundToModule?void 0:this._injector.get(Qe),i=n.create(ri.NULL,[],t||n.selector,a);i.onDestroy((function(){r._unloadComponent(i)}));var o=i.injector.get(js,null);return o&&i.injector.get(qs).registerApplication(i.location.nativeElement,o),this._loadComponent(i),nr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(i){n.e(i)}finally{n.f()}if(this._enforceNoNewChanges){var r,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(r=a.n()).done;)r.value.checkNoChanges()}catch(i){a.e(i)}finally{a.f()}}}catch(o){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(o)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;ru(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xs,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),ru(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||tu)(Ze(Fs),Ze(ws),Ze(ri),Ze(Jn),Ze(oo),Ze(ms))},tu.\u0275prov=he({token:tu,factory:tu.\u0275fac}),tu);function ru(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var au=_createClass((function e(){_classCallCheck(this,e)})),iu=_createClass((function e(){_classCallCheck(this,e)})),ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},su=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||ou}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),a=r[0],i=r[1];return void 0===i&&(i="default"),n("zn8P")(a).then((function(e){return e[i]})).then((function(e){return uu(e,a,i)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],a=t[1],i="NgFactory";return void 0===a&&(a="default",i=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[a+i]})).then((function(e){return uu(e,r,a)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(Rs),Ze(iu,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function uu(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var cu=Js(null,"core",[{provide:bs,useValue:"unknown"},{provide:Qs,deps:[ri]},{provide:qs,deps:[]},{provide:ws,deps:[]}]),lu=[{provide:nu,useClass:nu,deps:[Fs,ws,ri,Jn,oo,ms]},{provide:zo,deps:[Fs],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:ms,useClass:ms,deps:[[new ie,ps]]},{provide:Rs,useClass:Rs,deps:[]},gs,{provide:To,useFactory:function(){return Mo},deps:[]},{provide:Eo,useFactory:function(){return Io},deps:[]},{provide:ks,useFactory:function(e){return Ko(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ae(ks),new ie,new se]]},{provide:Cs,useValue:"USD"}],hu=function(){var e=_createClass((function e(t){_classCallCheck(this,e)}));return e.\u0275mod=mt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Ze(nu))},providers:lu}),e}(),fu=null;function du(){return fu}var pu,mu=new Ue("DocumentToken"),vu=((pu=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||pu)},pu.\u0275prov=he({factory:gu,token:pu,providedIn:"platform"}),pu);function gu(){return Ze(bu)}var yu,_u=new Ue("Location Initialized"),bu=((yu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=du().getLocation(),this._history=du().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return du().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){du().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){du().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){xu()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){xu()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(vu)).\u0275fac=function(e){return new(e||yu)(Ze(mu))},yu.\u0275prov=he({factory:wu,token:yu,providedIn:"platform"}),yu);function xu(){return!!window.history.pushState}function wu(){return new bu(Ze(mu))}function ku(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Cu(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Su(e){return e&&"?"!==e[0]?"?"+e:e}var Tu,Eu=((Tu=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||Tu)},Tu.\u0275prov=he({factory:Au,token:Tu,providedIn:"root"}),Tu);function Au(e){var t=Ze(mu).location;return new Du(Ze(vu),t&&t.origin||"")}var Mu,Iu,Nu,Ru=new Ue("appBaseHref"),Du=((Nu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this))._platformLocation=e,null==r&&(r=a._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return a._baseHref=r,_possibleConstructorReturn(a)}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return ku(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Su(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Su(r));this._platformLocation.pushState(e,t,a)}},{key:"replaceState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Su(r));this._platformLocation.replaceState(e,t,a)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Eu)).\u0275fac=function(e){return new(e||Nu)(Ze(vu),Ze(Ru,8))},Nu.\u0275prov=he({token:Nu,factory:Nu.\u0275fac}),Nu),Ou=((Iu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._platformLocation=e,a._baseHref="",null!=r&&(a._baseHref=r),a}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=ku(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Su(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,t,a)}},{key:"replaceState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Su(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,a)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Eu)).\u0275fac=function(e){return new(e||Iu)(Ze(vu),Ze(Ru,8))},Iu.\u0275prov=he({token:Iu,factory:Iu.\u0275fac}),Iu),Lu=((Mu=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new Jo,this._urlChangeListeners=[],this._platformStrategy=t;var a=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Cu(Pu(a)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Su(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Pu(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Su(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Su(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||Mu)(Ze(Eu),Ze(vu))},Mu.normalizeQueryParams=Su,Mu.joinWithSlash=ku,Mu.stripTrailingSlash=Cu,Mu.\u0275prov=he({factory:Fu,token:Mu,providedIn:"root"}),Mu);function Fu(){return new Lu(Ze(Eu),Ze(vu))}function Pu(e){return e.replace(/\/index.html$/,"")}var zu={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Bu=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),Uu=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Vu=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),Wu=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),Gu=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),Hu=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function ju(e,t){return Ju(Ho(e)[qo.DateFormat],t)}function qu(e,t){return Ju(Ho(e)[qo.TimeFormat],t)}function Ku(e,t){return Ju(Ho(e)[qo.DateTimeFormat],t)}function Xu(e,t){var n=Ho(e),r=n[qo.NumberSymbols][t];if(void 0===r){if(t===Hu.CurrencyDecimal)return n[qo.NumberSymbols][Hu.Decimal];if(t===Hu.CurrencyGroup)return n[qo.NumberSymbols][Hu.Group]}return r}function Zu(e,t){return Ho(e)[qo.NumberFormats][t]}function Yu(e){if(!e[qo.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[qo.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function Ju(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function $u(e){var t=_slicedToArray(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}var Qu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ec={},tc=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,nc=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),rc=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),ac=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function ic(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function oc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i="";(e<0||a&&e<=0)&&(a?e=1-e:(e=-e,i=n));for(var o=String(e);o.length<t;)o="0"+o;return r&&(o=o.substr(o.length-t)),i+o}function sc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(i,o){var s,u=function(e,t){switch(e){case rc.FullYear:return t.getFullYear();case rc.Month:return t.getMonth();case rc.Date:return t.getDate();case rc.Hours:return t.getHours();case rc.Minutes:return t.getMinutes();case rc.Seconds:return t.getSeconds();case rc.FractionalSeconds:return t.getMilliseconds();case rc.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}(e,i);if((n>0||u>-n)&&(u+=n),e===rc.Hours)0===u&&-12===n&&(u=12);else if(e===rc.FractionalSeconds)return s=t,oc(u,3).substr(0,s);var c=Xu(o,Hu.MinusSign);return oc(u,t,c,r,a)}}function uc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vu.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,i){return function(e,t,n,r,a,i){switch(n){case ac.Months:return function(e,t,n){var r=Ho(e),a=Ju([r[qo.MonthsFormat],r[qo.MonthsStandalone]],t);return Ju(a,n)}(t,a,r)[e.getMonth()];case ac.Days:return function(e,t,n){var r=Ho(e),a=Ju([r[qo.DaysFormat],r[qo.DaysStandalone]],t);return Ju(a,n)}(t,a,r)[e.getDay()];case ac.DayPeriods:var o=e.getHours(),s=e.getMinutes();if(i){var u,c=function(e){var t=Ho(e);return Yu(t),(t[qo.ExtraData][2]||[]).map((function(e){return"string"==typeof e?$u(e):[$u(e[0]),$u(e[1])]}))}(t),l=function(e,t,n){var r=Ho(e);Yu(r);var a=Ju([r[qo.ExtraData][0],r[qo.ExtraData][1]],t)||[];return Ju(a,n)||[]}(t,a,r);if(c.forEach((function(e,t){if(Array.isArray(e)){var n=e[0],r=n.hours,a=n.minutes,i=e[1],c=i.hours,h=i.minutes;o>=r&&s>=a&&(o<c||o===c&&s<h)&&(u=l[t])}else{var f=e.hours,d=e.minutes;f===o&&d===s&&(u=l[t])}})),u)return u}return function(e,t,n){var r=Ho(e),a=Ju([r[qo.DayPeriodsFormat],r[qo.DayPeriodsStandalone]],t);return Ju(a,n)}(t,a,r)[o<12?0:1];case ac.Eras:return function(e,t){return Ju(Ho(e)[qo.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(n))}}(a,i,e,t,n,r)}}function cc(e){return function(t,n,r){var a=-1*r,i=Xu(n,Hu.MinusSign),o=a>0?Math.floor(a/60):Math.ceil(a/60);switch(e){case nc.Short:return(a>=0?"+":"")+oc(o,2,i)+oc(Math.abs(a%60),2,i);case nc.ShortGMT:return"GMT"+(a>=0?"+":"")+oc(o,1,i);case nc.Long:return"GMT"+(a>=0?"+":"")+oc(o,2,i)+":"+oc(Math.abs(a%60),2,i);case nc.Extended:return 0===r?"Z":(a>=0?"+":"")+oc(o,2,i)+":"+oc(Math.abs(a%60),2,i);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}function lc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var a,i,o,s;if(t){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();a=1+Math.floor((c+u)/7)}else{var l=(i=n.getFullYear(),o=new Date(i,0,1).getDay(),new Date(i,0,1+(o<=4?4:11)-o)),h=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-l.getTime();a=1+Math.round(h/6048e5)}return oc(a,e,Xu(r,Hu.MinusSign))}}var hc={};function fc(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function dc(e){return e instanceof Date&&!isNaN(e.valueOf())}var pc=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function mc(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(e)){var c=function(e){var t,n,r,a,i,o=Math.abs(e)+"",s=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(i=o.length))t=[0],n=1;else{for(i--;"0"===o.charAt(i);)i--;for(n-=r,t=[],a=0;r<=i;r++,a++)t[a]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),s=n-1,n=1),{digits:t,exponent:s,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var l=t.minInt,h=t.minFrac,f=t.maxFrac;if(i){var d=i.match(pc);if(null===d)throw new Error("".concat(i," is not a valid digit info"));var p=d[1],m=d[3],v=d[5];null!=p&&(l=gc(p)),null!=m&&(h=gc(m)),null!=v?f=gc(v):null!=m&&h>f&&(f=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var r=e.digits,a=r.length-e.integerLen,i=Math.min(Math.max(t,a),n),o=i+e.integerLen,s=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(var u=o;u<r.length;u++)r[u]=0}else{a=Math.max(0,a),e.integerLen=1,r.length=Math.max(1,o=i+1),r[0]=0;for(var c=1;c<o;c++)r[c]=0}if(s>=5)if(o-1<0){for(var l=0;l>o;l--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;a<Math.max(0,i);a++)r.push(0);var h=0!==i,f=t+e.integerLen,d=r.reduceRight((function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),t>=10?1:0}),0);d&&(r.unshift(d),e.integerLen++)}(c,h,f);var g=c.digits,y=c.integerLen,_=c.exponent,b=[];for(u=g.every((function(e){return!e}));y<l;y++)g.unshift(0);for(;y<0;y++)g.unshift(0);y>0?b=g.splice(y,g.length):(b=g,g=[0]);var x=[];for(g.length>=t.lgSize&&x.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)x.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&x.unshift(g.join("")),s=x.join(Xu(n,r)),b.length&&(s+=Xu(n,a)+b.join("")),_&&(s+=Xu(n,Hu.Exponential)+"+"+_)}else s=Xu(n,Hu.Infinity);return s=e<0&&!u?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}function vc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),a=r[0],i=r[1],o=-1!==a.indexOf(".")?a.split("."):[a.substring(0,a.lastIndexOf("0")+1),a.substring(a.lastIndexOf("0")+1)],s=o[0],u=o[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,i){var f=a.length-n.posPre.length-n.posSuf.length,d=i.indexOf("#");n.negPre=i.substr(0,d).replace(/'/g,""),n.negSuf=i.substr(d+f).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function gc(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var yc=_createClass((function e(){_classCallCheck(this,e)}));function _c(e,t,n,r){var a="=".concat(e);if(t.indexOf(a)>-1)return a;if(a=n.getPluralCategory(e,r),t.indexOf(a)>-1)return a;if(t.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'.concat(e,'"'))}var bc,xc,wc,kc,Cc,Sc=((wc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).locale=e,r}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return Ho(e)[qo.PluralCase]}(t||this.locale)(e)){case Uu.Zero:return"zero";case Uu.One:return"one";case Uu.Two:return"two";case Uu.Few:return"few";case Uu.Many:return"many";default:return"other"}}}]),n}(yc)).\u0275fac=function(e){return new(e||wc)(Ze(ks))},wc.\u0275prov=he({token:wc,factory:wc.\u0275fac}),wc),Tc=((xc=function(){function e(t,n,r,a){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(di(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(xe(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}()).\u0275fac=function(e){return new(e||xc)(gi(To),gi(Eo),gi(so),gi(ho))},xc.\u0275dir=gt({type:xc,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),xc),Ec=((bc=function(){function e(t){_classCallCheck(this,e),this._viewContainerRef=t,this._componentRef=null,this._moduleRef=null}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(e.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=t.get(Qe);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var r=(this._moduleRef?this._moduleRef.componentFactoryResolver:t.get(oo)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(r,this._viewContainerRef.length,t,this.ngComponentOutletContent)}}},{key:"ngOnDestroy",value:function(){this._moduleRef&&this._moduleRef.destroy()}}]),e}()).\u0275fac=function(e){return new(e||bc)(gi(Do))},bc.\u0275dir=gt({type:bc,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},features:[Ki]}),bc),Ac=function(){function e(t,n,r,a){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=a}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),Mc=((kc=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){nr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". ")+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,a){if(null==e.previousIndex){var i=t._viewContainer.createEmbeddedView(t._template,new Ac(null,t._ngForOf,-1,-1),null===a?void 0:a),o=new Ic(e,i);n.push(o)}else if(null==a)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,a);var u=new Ic(e,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var a=0,i=this._viewContainer.length;a<i;a++){var o=this._viewContainer.get(a);o.context.index=a,o.context.count=i,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||kc)(gi(Do),gi(No),gi(To))},kc.\u0275dir=gt({type:kc,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),kc),Ic=_createClass((function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n})),Nc=((Cc=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new Rc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Dc("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Dc("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Cc)(gi(Do),gi(No))},Cc.\u0275dir=gt({type:Cc,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Cc),Rc=_createClass((function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null}));function Dc(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(xe(t),"'."))}var Oc,Lc,Fc,Pc,zc,Bc,Uc,Vc=function(){function e(t,n){_classCallCheck(this,e),this._viewContainerRef=t,this._templateRef=n,this._created=!1}return _createClass(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),Wc=((Uc=function(){function e(){_classCallCheck(this,e),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(e,[{key:"ngSwitch",set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}},{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}},{key:"_matchCase",value:function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}},{key:"_updateDefaultCases",value:function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}]),e}()).\u0275fac=function(e){return new(e||Uc)},Uc.\u0275dir=gt({type:Uc,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Uc),Gc=((Bc=function(){function e(t,n,r){_classCallCheck(this,e),this.ngSwitch=r,r._addCase(),this._view=new Vc(t,n)}return _createClass(e,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),e}()).\u0275fac=function(e){return new(e||Bc)(gi(Do),gi(No),gi(Wc,1))},Bc.\u0275dir=gt({type:Bc,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Bc),Hc=((zc=_createClass((function e(t,n,r){_classCallCheck(this,e),r._addDefault(new Vc(t,n))}))).\u0275fac=function(e){return new(e||zc)(gi(Do),gi(No),gi(Wc,1))},zc.\u0275dir=gt({type:zc,selectors:[["","ngSwitchDefault",""]]}),zc),jc=((Pc=function(){function e(t){_classCallCheck(this,e),this._localization=t,this._caseViews={}}return _createClass(e,[{key:"ngPlural",set:function(e){this._switchValue=e,this._updateView()}},{key:"addCase",value:function(e,t){this._caseViews[e]=t}},{key:"_updateView",value:function(){this._clearViews();var e=Object.keys(this._caseViews),t=_c(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])}},{key:"_clearViews",value:function(){this._activeView&&this._activeView.destroy()}},{key:"_activateView",value:function(e){e&&(this._activeView=e,this._activeView.create())}}]),e}()).\u0275fac=function(e){return new(e||Pc)(gi(yc))},Pc.\u0275dir=gt({type:Pc,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"}}),Pc),qc=((Fc=_createClass((function e(t,n,r,a){_classCallCheck(this,e),this.value=t;var i=!isNaN(Number(t));a.addCase(i?"=".concat(t):t,new Vc(r,n))}))).\u0275fac=function(e){return new(e||Fc)(yi("ngPluralCase"),gi(No),gi(Do),gi(jc,1))},Fc.\u0275dir=gt({type:Fc,selectors:[["","ngPluralCase",""]]}),Fc),Kc=((Lc=function(){function e(t,n,r){_classCallCheck(this,e),this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return _createClass(e,[{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,t){var n=_slicedToArray(e.split("."),2),r=n[0],a=n[1];null!=(t=null!=t&&a?"".concat(t).concat(a):t)?this._renderer.setStyle(this._ngEl.nativeElement,r,t):this._renderer.removeStyle(this._ngEl.nativeElement,r)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem((function(e){return t._setStyle(e.key,null)})),e.forEachAddedItem((function(e){return t._setStyle(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._setStyle(e.key,e.currentValue)}))}}]),e}()).\u0275fac=function(e){return new(e||Lc)(gi(so),gi(Eo),gi(ho))},Lc.\u0275dir=gt({type:Lc,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Lc),Xc=((Oc=function(){function e(t){_classCallCheck(this,e),this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(this._shouldRecreateView(e)){var t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}},{key:"_hasContextShapeChanged",value:function(e){var t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){var r,a=_createForOfIteratorHelper(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(-1===t.indexOf(i))return!0}}catch(o){a.e(o)}finally{a.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}}]),e}()).\u0275fac=function(e){return new(e||Oc)(gi(Do))},Oc.\u0275dir=gt({type:Oc,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ki]}),Oc);function Zc(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(xe(e),"'"))}var Yc,Jc,$c,Qc,el,tl,nl,rl,al,il=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),ol=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.then(t,(function(e){throw e}))}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),sl=new il,ul=((Jc=function(){function e(t){_classCallCheck(this,e),this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):hi(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,fi.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,(function(n){return t._updateLatestValue(e,n)}))}},{key:"_selectStrategy",value:function(t){if(Si(t))return ol;if(Ti(t))return sl;throw Zc(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}()).\u0275fac=function(e){return new(e||Jc)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue.Default,t=Ua(!0);if(null!=t||e&ue.Optional)return t;throw new Error("No provider for ChangeDetectorRef!")}())},Jc.\u0275pipe=yt({name:"async",type:Jc,pure:!1}),Jc),cl=((Yc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(t){if(!t)return t;if("string"!=typeof t)throw Zc(e,t);return t.toLowerCase()}}]),e}()).\u0275fac=function(e){return new(e||Yc)},Yc.\u0275pipe=yt({name:"lowercase",type:Yc,pure:!0}),Yc),ll=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,hl=((el=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(t){if(!t)return t;if("string"!=typeof t)throw Zc(e,t);return t.replace(ll,(function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()}))}}]),e}()).\u0275fac=function(e){return new(e||el)},el.\u0275pipe=yt({name:"titlecase",type:el,pure:!0}),el),fl=((Qc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(t){if(!t)return t;if("string"!=typeof t)throw Zc(e,t);return t.toUpperCase()}}]),e}()).\u0275fac=function(e){return new(e||Qc)},Qc.\u0275pipe=yt({name:"uppercase",type:Qc,pure:!0}),Qc),dl=(($c=function(){function e(t){_classCallCheck(this,e),this.locale=t}return _createClass(e,[{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(null==t||""===t||t!=t)return null;try{return function(e,t,n,r){var a=function(e){if(dc(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=_slicedToArray(e.split("-").map((function(e){return+e})),3),a=r[0],i=r[1],o=r[2];return new Date(a,i-1,o)}if(t=e.match(Qu))return function(e){var t=new Date(0),n=0,r=0,a=e[8]?t.setUTCFullYear:t.setFullYear,i=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),a.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var o=Number(e[4]||0)-n,s=Number(e[5]||0)-r,u=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return i.call(t,o,s,u,c),t}(t)}var s=new Date(e);if(!dc(s))throw new Error('Unable to convert "'.concat(e,'" into a date'));return s}(e);t=function e(t,n){var r=function(e){return Ho(e)[qo.LocaleId]}(t);if(ec[r]=ec[r]||{},ec[r][n])return ec[r][n];var a="";switch(n){case"shortDate":a=ju(t,Gu.Short);break;case"mediumDate":a=ju(t,Gu.Medium);break;case"longDate":a=ju(t,Gu.Long);break;case"fullDate":a=ju(t,Gu.Full);break;case"shortTime":a=qu(t,Gu.Short);break;case"mediumTime":a=qu(t,Gu.Medium);break;case"longTime":a=qu(t,Gu.Long);break;case"fullTime":a=qu(t,Gu.Full);break;case"short":var i=e(t,"shortTime"),o=e(t,"shortDate");a=ic(Ku(t,Gu.Short),[i,o]);break;case"medium":var s=e(t,"mediumTime"),u=e(t,"mediumDate");a=ic(Ku(t,Gu.Medium),[s,u]);break;case"long":var c=e(t,"longTime"),l=e(t,"longDate");a=ic(Ku(t,Gu.Long),[c,l]);break;case"full":var h=e(t,"fullTime"),f=e(t,"fullDate");a=ic(Ku(t,Gu.Full),[h,f])}return a&&(ec[r][n]=a),a}(n,t)||t;for(var i,o=[];t;){if(!(i=tc.exec(t))){o.push(t);break}var s=(o=o.concat(i.slice(1))).pop();if(!s)break;t=s}var u=a.getTimezoneOffset();r&&(u=fc(r,u),a=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(fc(t,r)-r))}(a,r));var c="";return o.forEach((function(e){var t=function(e){if(hc[e])return hc[e];var t;switch(e){case"G":case"GG":case"GGG":t=uc(ac.Eras,Wu.Abbreviated);break;case"GGGG":t=uc(ac.Eras,Wu.Wide);break;case"GGGGG":t=uc(ac.Eras,Wu.Narrow);break;case"y":t=sc(rc.FullYear,1,0,!1,!0);break;case"yy":t=sc(rc.FullYear,2,0,!0,!0);break;case"yyy":t=sc(rc.FullYear,3,0,!1,!0);break;case"yyyy":t=sc(rc.FullYear,4,0,!1,!0);break;case"M":case"L":t=sc(rc.Month,1,1);break;case"MM":case"LL":t=sc(rc.Month,2,1);break;case"MMM":t=uc(ac.Months,Wu.Abbreviated);break;case"MMMM":t=uc(ac.Months,Wu.Wide);break;case"MMMMM":t=uc(ac.Months,Wu.Narrow);break;case"LLL":t=uc(ac.Months,Wu.Abbreviated,Vu.Standalone);break;case"LLLL":t=uc(ac.Months,Wu.Wide,Vu.Standalone);break;case"LLLLL":t=uc(ac.Months,Wu.Narrow,Vu.Standalone);break;case"w":t=lc(1);break;case"ww":t=lc(2);break;case"W":t=lc(1,!0);break;case"d":t=sc(rc.Date,1);break;case"dd":t=sc(rc.Date,2);break;case"E":case"EE":case"EEE":t=uc(ac.Days,Wu.Abbreviated);break;case"EEEE":t=uc(ac.Days,Wu.Wide);break;case"EEEEE":t=uc(ac.Days,Wu.Narrow);break;case"EEEEEE":t=uc(ac.Days,Wu.Short);break;case"a":case"aa":case"aaa":t=uc(ac.DayPeriods,Wu.Abbreviated);break;case"aaaa":t=uc(ac.DayPeriods,Wu.Wide);break;case"aaaaa":t=uc(ac.DayPeriods,Wu.Narrow);break;case"b":case"bb":case"bbb":t=uc(ac.DayPeriods,Wu.Abbreviated,Vu.Standalone,!0);break;case"bbbb":t=uc(ac.DayPeriods,Wu.Wide,Vu.Standalone,!0);break;case"bbbbb":t=uc(ac.DayPeriods,Wu.Narrow,Vu.Standalone,!0);break;case"B":case"BB":case"BBB":t=uc(ac.DayPeriods,Wu.Abbreviated,Vu.Format,!0);break;case"BBBB":t=uc(ac.DayPeriods,Wu.Wide,Vu.Format,!0);break;case"BBBBB":t=uc(ac.DayPeriods,Wu.Narrow,Vu.Format,!0);break;case"h":t=sc(rc.Hours,1,-12);break;case"hh":t=sc(rc.Hours,2,-12);break;case"H":t=sc(rc.Hours,1);break;case"HH":t=sc(rc.Hours,2);break;case"m":t=sc(rc.Minutes,1);break;case"mm":t=sc(rc.Minutes,2);break;case"s":t=sc(rc.Seconds,1);break;case"ss":t=sc(rc.Seconds,2);break;case"S":t=sc(rc.FractionalSeconds,1);break;case"SS":t=sc(rc.FractionalSeconds,2);break;case"SSS":t=sc(rc.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=cc(nc.Short);break;case"ZZZZZ":t=cc(nc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=cc(nc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=cc(nc.Long);break;default:return null}return hc[e]=t,t}(e);c+=t?t(a,n,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),c}(t,n,a||this.locale,r)}catch(i){throw Zc(e,i.message)}}}]),e}()).\u0275fac=function(e){return new(e||$c)(gi(ks))},$c.\u0275pipe=yt({name:"date",type:$c,pure:!0}),$c),pl=/#/g,ml=((al=function(){function e(t){_classCallCheck(this,e),this._localization=t}return _createClass(e,[{key:"transform",value:function(t,n,r){if(null==t)return"";if("object"!=typeof n||null===n)throw Zc(e,n);return n[_c(t,Object.keys(n),this._localization,r)].replace(pl,t.toString())}}]),e}()).\u0275fac=function(e){return new(e||al)(gi(yc))},al.\u0275pipe=yt({name:"i18nPlural",type:al,pure:!0}),al),vl=((rl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(t,n){if(null==t)return"";if("object"!=typeof n||"string"!=typeof t)throw Zc(e,n);return n.hasOwnProperty(t)?n[t]:n.hasOwnProperty("other")?n.other:""}}]),e}()).\u0275fac=function(e){return new(e||rl)},rl.\u0275pipe=yt({name:"i18nSelect",type:rl,pure:!0}),rl),gl=((nl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return JSON.stringify(e,null,2)}}]),e}()).\u0275fac=function(e){return new(e||nl)},nl.\u0275pipe=yt({name:"json",type:nl,pure:!1}),nl),yl=((tl=function(){function e(t){_classCallCheck(this,e),this.differs=t,this.keyValues=[]}return _createClass(e,[{key:"transform",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_l;if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var r=this.differ.diff(e);return r&&(this.keyValues=[],r.forEachItem((function(e){t.keyValues.push({key:e.key,value:e.currentValue})})),this.keyValues.sort(n)),this.keyValues}}]),e}()).\u0275fac=function(e){return new(e||tl)(gi(Eo))},tl.\u0275pipe=yt({name:"keyvalue",type:tl,pure:!1}),tl);function _l(e,t){var n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;var a=String(n),i=String(r);return a==i?0:a<i?-1:1}var bl,xl,wl,kl=((wl=function(){function e(t){_classCallCheck(this,e),this._locale=t}return _createClass(e,[{key:"transform",value:function(t,n,r){if(Tl(t))return null;r=r||this._locale;try{return function(e,t,n){return mc(e,vc(Zu(t,Bu.Decimal),Xu(t,Hu.MinusSign)),t,Hu.Group,Hu.Decimal,n)}(El(t),r,n)}catch(a){throw Zc(e,a.message)}}}]),e}()).\u0275fac=function(e){return new(e||wl)(gi(ks))},wl.\u0275pipe=yt({name:"number",type:wl,pure:!0}),wl),Cl=((xl=function(){function e(t){_classCallCheck(this,e),this._locale=t}return _createClass(e,[{key:"transform",value:function(t,n,r){if(Tl(t))return null;r=r||this._locale;try{return function(e,t,n){return mc(e,vc(Zu(t,Bu.Percent),Xu(t,Hu.MinusSign)),t,Hu.Group,Hu.Decimal,n,!0).replace(new RegExp("%","g"),Xu(t,Hu.PercentSign))}(El(t),r,n)}catch(a){throw Zc(e,a.message)}}}]),e}()).\u0275fac=function(e){return new(e||xl)(gi(ks))},xl.\u0275pipe=yt({name:"percent",type:xl,pure:!0}),xl),Sl=((bl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";_classCallCheck(this,e),this._locale=t,this._defaultCurrencyCode=n}return _createClass(e,[{key:"transform",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"symbol",a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(Tl(t))return null;i=i||this._locale,"boolean"==typeof r&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),r=r?"symbol":"code");var o=n||this._defaultCurrencyCode;"code"!==r&&(o="symbol"===r||"symbol-narrow"===r?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=function(e){return Ho(e)[qo.Currencies]}(n)[e]||zu[e]||[],a=r[1];return"narrow"===t&&"string"==typeof a?a:r[0]||e}(o,"symbol"===r?"wide":"narrow",i):r);try{return function(e,t,n,r,a){var i=vc(Zu(t,Bu.Currency),Xu(t,Hu.MinusSign));return i.minFrac=function(e){var t,n=zu[e];return n&&(t=n[2]),"number"==typeof t?t:2}(r),i.maxFrac=i.minFrac,mc(e,i,t,Hu.CurrencyGroup,Hu.CurrencyDecimal,a).replace("\xa4",n).replace("\xa4","").trim()}(El(t),i,o,n,a)}catch(s){throw Zc(e,s.message)}}}]),e}()).\u0275fac=function(e){return new(e||bl)(gi(ks),gi(Cs))},bl.\u0275pipe=yt({name:"currency",type:bl,pure:!0}),bl);function Tl(e){return null==e||""===e||e!=e}function El(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error("".concat(e," is not a number"));return e}var Al,Ml,Il,Nl,Rl,Dl,Ol,Ll=((Il=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(t,n,r){if(null==t)return t;if(!this.supports(t))throw Zc(e,t);return t.slice(n,r)}},{key:"supports",value:function(e){return"string"==typeof e||Array.isArray(e)}}]),e}()).\u0275fac=function(e){return new(e||Il)},Il.\u0275pipe=yt({name:"slice",type:Il,pure:!1}),Il),Fl=((Ml=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:Ml}),Ml.\u0275inj=fe({factory:function(e){return new(e||Ml)},providers:[{provide:yc,useClass:Sc}]}),Ml),Pl=((Al=_createClass((function e(){_classCallCheck(this,e)}))).\u0275prov=he({token:Al,providedIn:"root",factory:function(){return new zl(Ze(mu),window,Ze(Jn))}}),Al),zl=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),Bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=Ul||(Ul=document.querySelector("base"))?Ul.getAttribute("href"):null;return null==n?null:(t=n,Nl||(Nl=document.createElement("a")),Nl.setAttribute("href",t),"/"===Nl.pathname.charAt(0)?Nl.pathname:"/"+Nl.pathname)}},{key:"resetBaseElement",value:function(){Ul=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.indexOf("="),o=_slicedToArray(-1==i?[a,""]:[a.slice(0,i),a.slice(i+1)],2),s=o[0],u=o[1];if(s.trim()===t)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,fu||(fu=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return _createClass((function e(){_classCallCheck(this,e)}))}())),Ul=null,Vl=new Ue("TRANSITION_ID"),Wl=[{provide:ps,useFactory:function(e,t,n){return function(){n.get(ms).donePromise.then((function(){var n=du();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Vl,mu,ri],multi:!0}],Gl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Re.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Re.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Re.getAllAngularRootElements=function(){return e.getAllRootElements()},Re.frameworkStabilizers||(Re.frameworkStabilizers=[]),Re.frameworkStabilizers.push((function(e){var t=Re.getAllAngularTestabilities(),n=t.length,r=!1,a=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(a)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?du().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,Ks=t}}]),e}(),Hl=new Ue("EventManagerPlugins"),jl=((Rl=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var a=n[r];if(a.supports(e))return this._eventNameToPlugin.set(e,a),a}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Rl)(Ze(Hl),Ze(Fs))},Rl.\u0275prov=he({token:Rl,factory:Rl.\u0275fac}),Rl),ql=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=du().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Kl=((Ol=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||Ol)},Ol.\u0275prov=he({token:Ol,factory:Ol.\u0275fac}),Ol),Xl=((Dl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return du().remove(e)}))}}]),n}(Kl)).\u0275fac=function(e){return new(e||Dl)(Ze(mu))},Dl.\u0275prov=he({token:Dl,factory:Dl.\u0275fac}),Dl),Zl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yl=/%COMP%/g;function Jl(e,t,n){for(var r=0;r<t.length;r++){var a=t[r];Array.isArray(a)?Jl(e,a,n):(a=a.replace(Yl,e),n.push(a))}return n}function $l(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Ql,eh,th,nh,rh=((Ql=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ah(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case st.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ih(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case st.Native:case st.ShadowDom:return new oh(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Jl(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ql)(Ze(jl),Ze(Xl),Ze(vs))},Ql.\u0275prov=he({token:Ql,factory:Ql.\u0275fac}),Ql),ah=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Zl[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var a=Zl[r];a?e.setAttributeNS(a,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Zl[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&lo.DashCase?e.style.setProperty(t,n,r&lo.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&lo.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$l(n)):this.eventManager.addEventListener(e,t,$l(n))}}]),e}(),ih=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;_classCallCheck(this,n),(o=t.call(this,e)).component=a;var s,u=Jl(i+"-"+a.id,a.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(Yl,i+"-"+a.id),o.hostAttr=(s=i+"-"+a.id,"_nghost-%COMP%".replace(Yl,s)),o}return _createClass(n,[{key:"applyToHost",value:function(e){_get2(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get2(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get2(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(ah),oh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;_classCallCheck(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=a,o.component=i,o.shadowRoot=i.encapsulation===st.ShadowDom?a.attachShadow({mode:"open"}):a.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Jl(i.id,i.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],o.shadowRoot.appendChild(c)}return o}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get2(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get2(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ah),sh=((eh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(ql)).\u0275fac=function(e){return new(e||eh)(Ze(mu))},eh.\u0275prov=he({token:eh,factory:eh.\u0275fac}),eh),uh=["alt","control","meta","shift"],ch={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hh={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},fh=((th=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var a=n.parseEventName(t),i=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return du().onAndCancel(e,a.domEventName,i)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var a=n._normalizeKey(t.pop()),i="";if(uh.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")})),i+=a,0!=t.length||0===a.length)return null;var o={};return o.domEventName=r,o.fullKey=i,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&lh.hasOwnProperty(t)&&(t=lh[t]))}return ch[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),uh.forEach((function(r){r!=n&&(0,hh[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(a){n.getEventFullKey(a)===e&&r.runGuarded((function(){return t(a)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(ql)).\u0275fac=function(e){return new(e||th)(Ze(mu))},th.\u0275prov=he({token:th,factory:th.\u0275fac}),th),dh=Js(cu,"browser",[{provide:bs,useValue:"browser"},{provide:_s,useValue:function(){Bl.makeCurrent(),Gl.init()},multi:!0},{provide:mu,useFactory:function(){return function(e){Mt=e}(document),document},deps:[]}]),ph=[[],{provide:Ga,useValue:"root"},{provide:Jn,useFactory:function(){return new Jn},deps:[]},{provide:Hl,useClass:sh,multi:!0,deps:[mu,Fs,bs]},{provide:Hl,useClass:fh,multi:!0,deps:[mu]},[],{provide:rh,useClass:rh,deps:[jl,Xl,vs]},{provide:co,useExisting:rh},{provide:Kl,useExisting:Xl},{provide:Xl,useClass:Xl,deps:[mu]},{provide:js,useClass:js,deps:[Fs]},{provide:jl,useClass:jl,deps:[Hl,Fs]},[]],mh=((nh=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:vs,useValue:t.appId},{provide:Vl,useExisting:vs},Wl]}}}]),e}()).\u0275mod=mt({type:nh}),nh.\u0275inj=fe({factory:function(e){return new(e||nh)(Ze(nh,12))},providers:ph,imports:[Fl,hu]}),nh);function vh(e,t){return new w((function(n){var r=e.length;if(0!==r)for(var a=new Array(r),i=0,o=0,s=function(s){var u=G(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),a[s]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&c||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=a[n],e}),{}):a),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}"undefined"!=typeof window&&window;var gh,yh,_h,bh,xh=new Ue("NgValueAccessor"),wh={provide:xh,useExisting:Ce((function(){return kh})),multi:!0},kh=((gh=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||gh)(gi(ho),gi(so))},gh.\u0275dir=gt({type:gh,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[ro([wh])]}),gh),Ch={provide:xh,useExisting:Ce((function(){return Th})),multi:!0},Sh=new Ue("CompositionEventMode"),Th=((bh=function(){function e(t,n,r){var a;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(a=du()?du().getUserAgent():"",!/android (\d+)/.test(a.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||bh)(gi(ho),gi(so),gi(Sh,8))},bh.\u0275dir=gt({type:bh,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ei("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[ro([Ch])]}),bh),Eh=((_h=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}()).\u0275fac=function(e){return new(e||_h)},_h.\u0275dir=gt({type:_h}),_h),Ah=((yh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Eh)).\u0275fac=function(e){return Mh(e||yh)},yh.\u0275dir=gt({type:yh,features:[Vi]}),yh),Mh=Kn(Ah);function Ih(){throw new Error("unimplemented")}var Nh,Rh,Dh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _createClass(n,[{key:"validator",get:function(){return Ih()}},{key:"asyncValidator",get:function(){return Ih()}}]),n}(Eh),Oh=function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),Lh=((Rh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(Oh)).\u0275fac=function(e){return new(e||Rh)(gi(Dh,2))},Rh.\u0275dir=gt({type:Rh,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Di("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Vi]}),Rh),Fh=((Nh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(Oh)).\u0275fac=function(e){return new(e||Nh)(gi(Ah,2))},Nh.\u0275dir=gt({type:Nh,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Di("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Vi]}),Nh);function Ph(e){return null==e||0===e.length}var zh=new Ue("NgValidators"),Bh=new Ue("NgAsyncValidators"),Uh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Vh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(Ph(t.value)||Ph(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(Ph(t.value)||Ph(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return Ph(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return Ph(e.value)?null:Uh.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(Ph(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Ph(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(Wh);return 0==t.length?null:function(e){return Hh(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(Wh);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(u(r))return vh(r,null);if(c(r)&&Object.getPrototypeOf(r)===Object.prototype){var a=Object.keys(r);return vh(a.map((function(e){return r[e]})),a)}}if("function"==typeof t[t.length-1]){var i=t.pop();return vh(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(B((function(e){return i.apply(void 0,_toConsumableArray(e))})))}return vh(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(Gh)).pipe(B(Hh))}}}]),e}();function Wh(e){return null!=e}function Gh(e){var t=Si(e)?G(e):e;if(!Ti(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Hh(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function jh(e){return e.validate?function(t){return e.validate(t)}:e}function qh(e){return e.validate?function(t){return e.validate(t)}:e}var Kh,Xh,Zh,Yh,Jh={provide:xh,useExisting:Ce((function(){return $h})),multi:!0},$h=((Kh=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Kh)(gi(ho),gi(so))},Kh.\u0275dir=gt({type:Kh,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[ro([Jh])]}),Kh),Qh={provide:xh,useExisting:Ce((function(){return tf})),multi:!0},ef=((Zh=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||Zh)},Zh.\u0275prov=he({token:Zh,factory:Zh.\u0275fac}),Zh),tf=((Xh=function(){function e(t,n,r,a){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=a,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Dh),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||Xh)(gi(ho),gi(so),gi(ef),gi(ri))},Xh.\u0275dir=gt({type:Xh,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ro([Qh])]}),Xh),nf={provide:xh,useExisting:Ce((function(){return rf})),multi:!0},rf=((Yh=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Yh)(gi(ho),gi(so))},Yh.\u0275dir=gt({type:Yh,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[ro([nf])]}),Yh),af='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',of='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',sf='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',uf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(af))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(of,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(sf))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(af))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(of))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(e){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(e,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===e?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),e}(),cf={provide:xh,useExisting:Ce((function(){return df})),multi:!0};function lf(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var hf,ff,df=((ff=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=hi}return _createClass(e,[{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=lf(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),e}()).\u0275fac=function(e){return new(e||ff)(gi(ho),gi(so))},ff.\u0275dir=gt({type:ff,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ro([cf])]}),ff),pf=((hf=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return _createClass(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(lf(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}()).\u0275fac=function(e){return new(e||hf)(gi(so),gi(ho),gi(df,9))},hf.\u0275dir=gt({type:hf,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),hf),mf={provide:xh,useExisting:Ce((function(){return _f})),multi:!0};function vf(e,t){return null==e?"".concat(t):("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var gf,yf,_f=((yf=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=hi}return _createClass(e,[{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var a=n.selectedOptions,i=0;i<a.length;i++){var o=a.item(i),s=t._getOptionValue(o.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),e}()).\u0275fac=function(e){return new(e||yf)(gi(ho),gi(so))},yf.\u0275dir=gt({type:yf,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ei("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ro([mf])]}),yf),bf=((gf=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return _createClass(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(vf(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(vf(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}()).\u0275fac=function(e){return new(e||gf)(gi(so),gi(ho),gi(_f,9))},gf.\u0275dir=gt({type:gf,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),gf);function xf(e,t){return[].concat(_toConsumableArray(t.path),[e])}function wf(e,t){e||Tf(t,"Cannot find control with"),t.valueAccessor||Tf(t,"No value accessor for form control with"),e.validator=Vh.compose([e.validator,t.validator]),e.asyncValidator=Vh.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&kf(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&kf(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function kf(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Cf(e,t){null==e&&Tf(t,"Cannot find control with"),e.validator=Vh.compose([e.validator,t.validator]),e.asyncValidator=Vh.composeAsync([e.asyncValidator,t.asyncValidator])}function Sf(e){return Tf(e,"There is no FormControl instance attached to form control element with")}function Tf(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function Ef(e){return null!=e?Vh.compose(e.map(jh)):null}function Af(e){return null!=e?Vh.composeAsync(e.map(qh)):null}function Mf(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!hi(t,n.currentValue)}var If=[kh,rf,$h,df,_f,tf];function Nf(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function Rf(e,t){if(!t)return null;Array.isArray(t)||Tf(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,a=void 0;return t.forEach((function(t){var i;t.constructor===Th?n=t:(i=t,If.some((function(e){return i.constructor===e}))?(r&&Tf(e,"More than one built-in value accessor matches form control with"),r=t):(a&&Tf(e,"More than one custom value accessor matches form control with"),a=t))})),a||r||n||(Tf(e,"No valid value accessor for form control with"),null)}function Df(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function Of(e,t,n,r){nr()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(uf.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}function Lf(e){var t=Pf(e)?e.validators:e;return Array.isArray(t)?Ef(t):t||null}function Ff(e,t){var n=Pf(t)?t.asyncValidators:e;return Array.isArray(n)?Af(n):n||null}function Pf(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var zf,Bf,Uf,Vf,Wf,Gf,Hf,jf,qf,Kf=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this.validator=Lf(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=Ff(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Gh(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof Zf?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Yf&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new Jo,this.statusChanges=new Jo}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){Pf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}]),e}(),Xf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this,Lf(a),Ff(i,a)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(a),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _createClass(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(Kf),Zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,Lf(r),Ff(a,r))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _createClass(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof Xf?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,a){n=n||t.contains(a)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Kf),Yf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,Lf(r),Ff(a,r))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _createClass(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof Xf?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=_createForOfIteratorHelper(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Kf),Jf={provide:Ah,useExisting:Ce((function(){return Qf}))},$f=Promise.resolve(null),Qf=((Bf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).submitted=!1,a._directives=[],a.ngSubmit=new Jo,a.form=new Zf({},Ef(e),Af(r)),a}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;$f.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),wf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;$f.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),Df(t._directives,e)}))}},{key:"addFormGroup",value:function(e){var t=this;$f.then((function(){var n=t._findContainer(e.path),r=new Zf({});Cf(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;$f.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;$f.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Nf(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}(Ah)).\u0275fac=function(e){return new(e||Bf)(gi(zh,10),gi(Bh,10))},Bf.\u0275dir=gt({type:Bf,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Ei("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ro([Jf]),Vi]}),Bf),ed=((zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return xf(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ef(this._validators)}},{key:"asyncValidator",get:function(){return Af(this._asyncValidators)}},{key:"_checkParentType",value:function(){}}]),n}(Ah)).\u0275fac=function(e){return td(e||zf)},zf.\u0275dir=gt({type:zf,features:[Vi]}),zf),td=Kn(ed),nd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(af,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(of,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(sf))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(of,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(sf))}}]),e}(),rd={provide:Ah,useExisting:Ce((function(){return ad}))},ad=((Uf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._parent=e,i._validators=r,i._asyncValidators=a,i}return _createClass(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof Qf||nd.modelGroupParentException()}}]),n}(ed)).\u0275fac=function(e){return new(e||Uf)(gi(Ah,5),gi(zh,10),gi(Bh,10))},Uf.\u0275dir=gt({type:Uf,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[ro([rd]),Vi]}),Uf),id={provide:Dh,useExisting:Ce((function(){return sd}))},od=Promise.resolve(null),sd=((Wf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this)).control=new Xf,o._registered=!1,o.update=new Jo,o._parent=e,o._rawValidators=r||[],o._rawAsyncValidators=a||[],o.valueAccessor=Rf(_assertThisInitialized(o),i),o}return _createClass(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Mf(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?xf(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ef(this._rawValidators)}},{key:"asyncValidator",get:function(){return Af(this._rawAsyncValidators)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){wf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof ad)&&this._parent instanceof ed?nd.formGroupNameException():this._parent instanceof ad||this._parent instanceof Qf||nd.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||nd.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;od.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;od.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}}]),n}(Dh)).\u0275fac=function(e){return new(e||Wf)(gi(Ah,9),gi(zh,10),gi(Bh,10),gi(xh,10))},Wf.\u0275dir=gt({type:Wf,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ro([id]),Vi,Ki]}),Wf),ud=((Vf=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||Vf)},Vf.\u0275dir=gt({type:Vf,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Vf),cd=new Ue("NgModelWithFormControlWarning"),ld={provide:Dh,useExisting:Ce((function(){return hd}))},hd=((Gf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this))._ngModelWarningConfig=i,o.update=new Jo,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=r||[],o.valueAccessor=Rf(_assertThisInitialized(o),a),o}return _createClass(n,[{key:"isDisabled",set:function(e){uf.disabledAttrWarning()}},{key:"ngOnChanges",value:function(e){this._isControlChanged(e)&&(wf(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Mf(e,this.viewModel)&&(Of("formControl",n,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return Ef(this._rawValidators)}},{key:"asyncValidator",get:function(){return Af(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_isControlChanged",value:function(e){return e.hasOwnProperty("form")}}]),n}(Dh)).\u0275fac=function(e){return new(e||Gf)(gi(zh,10),gi(Bh,10),gi(xh,10),gi(cd,8))},Gf.\u0275dir=gt({type:Gf,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ro([ld]),Vi,Ki]}),Gf._ngModelWarningSentOnce=!1,Gf),fd={provide:Ah,useExisting:Ce((function(){return dd}))},dd=((Hf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._validators=e,a._asyncValidators=r,a.submitted=!1,a.directives=[],a.form=null,a.ngSubmit=new Jo,a}return _createClass(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return wf(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){Df(this.directives,e)}},{key:"addFormGroup",value:function(e){var t=this.form.get(e.path);Cf(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(e){}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){var t=this.form.get(e.path);Cf(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(e){}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Nf(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange((function(){return Sf(t)})),t.valueAccessor.registerOnTouched((function(){return Sf(t)})),t._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),t._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),e&&e._clearChangeFns()}(t.control,t),n&&wf(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var e=Ef(this._validators);this.form.validator=Vh.compose([this.form.validator,e]);var t=Af(this._asyncValidators);this.form.asyncValidator=Vh.composeAsync([this.form.asyncValidator,t])}},{key:"_checkFormPresent",value:function(){this.form||uf.missingFormException()}}]),n}(Ah)).\u0275fac=function(e){return new(e||Hf)(gi(zh,10),gi(Bh,10))},Hf.\u0275dir=gt({type:Hf,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Ei("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ro([fd]),Vi,Ki]}),Hf),pd={provide:Ah,useExisting:Ce((function(){return md}))},md=((jf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._parent=e,i._validators=r,i._asyncValidators=a,i}return _createClass(n,[{key:"_checkParentType",value:function(){yd(this._parent)&&uf.groupParentException()}}]),n}(ed)).\u0275fac=function(e){return new(e||jf)(gi(Ah,13),gi(zh,10),gi(Bh,10))},jf.\u0275dir=gt({type:jf,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[ro([pd]),Vi]}),jf),vd={provide:Ah,useExisting:Ce((function(){return gd}))},gd=((qf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._parent=e,i._validators=r,i._asyncValidators=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return xf(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"validator",get:function(){return Ef(this._validators)}},{key:"asyncValidator",get:function(){return Af(this._asyncValidators)}},{key:"_checkParentType",value:function(){yd(this._parent)&&uf.arrayParentException()}}]),n}(Ah)).\u0275fac=function(e){return new(e||qf)(gi(Ah,13),gi(zh,10),gi(Bh,10))},qf.\u0275dir=gt({type:qf,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[ro([vd]),Vi]}),qf);function yd(e){return!(e instanceof md||e instanceof dd||e instanceof gd)}var _d,bd,xd,wd,kd,Cd,Sd,Td,Ed,Ad,Md,Id={provide:Dh,useExisting:Ce((function(){return Nd}))},Nd=((_d=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this))._ngModelWarningConfig=o,s._added=!1,s.update=new Jo,s._ngModelWarningSent=!1,s._parent=e,s._rawValidators=r||[],s._rawAsyncValidators=a||[],s.valueAccessor=Rf(_assertThisInitialized(s),i),s}return _createClass(n,[{key:"isDisabled",set:function(e){uf.disabledAttrWarning()}},{key:"ngOnChanges",value:function(e){this._added||this._setUpControl(),Mf(e,this.viewModel)&&(Of("formControlName",n,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"path",get:function(){return xf(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ef(this._rawValidators)}},{key:"asyncValidator",get:function(){return Af(this._rawAsyncValidators)}},{key:"_checkParentType",value:function(){!(this._parent instanceof md)&&this._parent instanceof ed?uf.ngModelGroupException():this._parent instanceof md||this._parent instanceof dd||this._parent instanceof gd||uf.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(Dh)).\u0275fac=function(e){return new(e||_d)(gi(Ah,13),gi(zh,10),gi(Bh,10),gi(xh,10),gi(cd,8))},_d.\u0275dir=gt({type:_d,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ro([Id]),Vi,Ki]}),_d._ngModelWarningSentOnce=!1,_d),Rd={provide:zh,useExisting:Ce((function(){return Od})),multi:!0},Dd={provide:zh,useExisting:Ce((function(){return Ld})),multi:!0},Od=((xd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&"false"!=="".concat(e),this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this.required?Vh.required(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}()).\u0275fac=function(e){return new(e||xd)},xd.\u0275dir=gt({type:xd,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&vi("required",t.required?"":null)},inputs:{required:"required"},features:[ro([Rd])]}),xd),Ld=((bd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"validate",value:function(e){return this.required?Vh.requiredTrue(e):null}}]),n}(Od)).\u0275fac=function(e){return Fd(e||bd)},bd.\u0275dir=gt({type:bd,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&vi("required",t.required?"":null)},features:[ro([Dd]),Vi]}),bd),Fd=Kn(Ld),Pd={provide:zh,useExisting:Ce((function(){return zd})),multi:!0},zd=((wd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"email",set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this._enabled?Vh.email(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}()).\u0275fac=function(e){return new(e||wd)},wd.\u0275dir=gt({type:wd,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[ro([Pd])]}),wd),Bd={provide:zh,useExisting:Ce((function(){return Ud})),multi:!0},Ud=((kd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Vh.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),e}()).\u0275fac=function(e){return new(e||kd)},kd.\u0275dir=gt({type:kd,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&vi("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[ro([Bd]),Ki]}),kd),Vd={provide:zh,useExisting:Ce((function(){return Wd})),multi:!0},Wd=((Cd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null!=this.maxlength?this._validator(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Vh.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}]),e}()).\u0275fac=function(e){return new(e||Cd)},Cd.\u0275dir=gt({type:Cd,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&vi("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[ro([Vd]),Ki]}),Cd),Gd={provide:zh,useExisting:Ce((function(){return Hd})),multi:!0},Hd=((Md=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Vh.pattern(this.pattern)}}]),e}()).\u0275fac=function(e){return new(e||Md)},Md.\u0275dir=gt({type:Md,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&vi("pattern",t.pattern?t.pattern:null)},inputs:{pattern:"pattern"},features:[ro([Gd]),Ki]}),Md),jd=((Ad=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:Ad}),Ad.\u0275inj=fe({factory:function(e){return new(e||Ad)}}),Ad),qd=((Ed=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"group",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(e),r=null,a=null,i=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,a=null!=t.asyncValidators?t.asyncValidators:null,i=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,a=null!=t.asyncValidator?t.asyncValidator:null)),new Zf(n,{asyncValidators:a,updateOn:i,validators:r})}},{key:"control",value:function(e,t,n){return new Xf(e,t,n)}},{key:"array",value:function(e,t,n){var r=this,a=e.map((function(e){return r._createControl(e)}));return new Yf(a,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){n[r]=t._createControl(e[r])})),n}},{key:"_createControl",value:function(e){return e instanceof Xf||e instanceof Zf||e instanceof Yf?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}()).\u0275fac=function(e){return new(e||Ed)},Ed.\u0275prov=he({token:Ed,factory:Ed.\u0275fac}),Ed),Kd=((Td=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:Td}),Td.\u0275inj=fe({factory:function(e){return new(e||Td)},providers:[ef],imports:[jd]}),Td),Xd=((Sd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:cd,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}()).\u0275mod=mt({type:Sd}),Sd.\u0275inj=fe({factory:function(e){return new(e||Sd)},providers:[qd,ef],imports:[jd]}),Sd);function Zd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return I(r)?(t.pop(),W(t,r)):X(t)}var Yd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._value=e,r}return _createClass(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}},{key:"next",value:function(e){_get2(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=e)}}]),n}(A),Jd=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),$d={},Qd=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ep(e,this.resultSelector))}}]),e}(),ep=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).resultSelector=r,a.active=0,a.values=[],a.observables=[],a}return _createClass(n,[{key:"_next",value:function(e){this.values.push($d),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(P(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,a){var i=this.values,o=this.toRespond?i[n]===$d?--this.toRespond:this.toRespond:0;i[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(z),tp=new w((function(e){return e.complete()}));function np(e){return e?function(e){return new w((function(t){return e.schedule((function(){return t.complete()}))}))}(e):tp}function rp(e){return new w((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?G(n):np()).subscribe(t)}))}function ap(){return K(1)}function ip(e,t){return function(n){return n.lift(new op(e,t))}}var op=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new sp(e,this.predicate,this.thisArg))}}]),e}(),sp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).predicate=r,i.thisArg=a,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(m),up=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function cp(e){return function(t){return 0===e?np():t.lift(new lp(e))}}var lp=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new up}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new hp(e,this.total))}}]),e}(),hp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).total=r,a.ring=new Array,a.count=0,a}return _createClass(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,a=0;a<n;a++){var i=t++%n;e.next(r[i])}e.complete()}}]),n}(m);function fp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mp;return function(t){return t.lift(new dp(e))}}var dp=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new pp(e,this.errorFactory))}}]),e}(),pp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).errorFactory=r,a.hasValue=!1,a}return _createClass(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(m);function mp(){return new Jd}function vp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new gp(e))}}var gp=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new yp(e,this.defaultValue))}}]),e}(),yp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).defaultValue=r,a.isEmpty=!0,a}return _createClass(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(m);function _p(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ip((function(t,n){return e(t,n,r)})):y,cp(1),n?vp(t):fp((function(){return new Jd})))}}function bp(e){return function(t){var n=new xp(e),r=t.lift(n);return n.caught=r}}var xp=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new wp(e,this.selector,this.caught))}}]),e}(),wp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).selector=r,i.caught=a,i}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(i){return void _get2(_getPrototypeOf(n.prototype),"error",this).call(this,i)}this._unsubscribeAndRecycle();var r=new N(this,void 0,void 0);this.add(r);var a=P(this,t,void 0,void 0,r);a!==r&&this.add(a)}}}]),n}(z);function kp(e){return function(t){return 0===e?np():t.lift(new Cp(e))}}var Cp=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new up}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Sp(e,this.total))}}]),e}(),Sp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).total=r,a.count=0,a}return _createClass(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(m);function Tp(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ip((function(t,n){return e(t,n,r)})):y,kp(1),n?vp(t):fp((function(){return new Jd})))}}var Ep=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ap(e,this.predicate,this.thisArg,this.source))}}]),e}(),Ap=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=a,o.source=i,o.index=0,o.thisArg=a||_assertThisInitialized(o),o}return _createClass(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(m);function Mp(e,t){return"function"==typeof t?function(n){return n.pipe(Mp((function(n,r){return G(e(n,r)).pipe(B((function(e,a){return t(n,e,r,a)})))})))}:function(t){return t.lift(new Ip(e))}}var Ip=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Np(e,this.project))}}]),e}(),Np=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).project=r,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var a=new N(this,t,n),i=this.destination;i.add(a),this.innerSubscription=P(this,e,void 0,void 0,a),this.innerSubscription!==a&&i.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get2(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get2(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}}]),n}(z);function Rp(){return ap()(Zd.apply(void 0,arguments))}function Dp(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Op(e,t,n))}}var Op=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Lp(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Lp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).accumulator=r,o._seed=a,o.hasSeed=i,o.index=0,o}return _createClass(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(m);function Fp(e,t){return H(e,t,1)}function Pp(){}function zp(e,t,n){return function(r){return r.lift(new Up(e,t,n))}}var Bp,Up=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Vp(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),Vp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,e))._tapNext=Pp,s._tapError=Pp,s._tapComplete=Pp,s._tapError=i||Pp,s._tapComplete=o||Pp,r(a)?(s._context=_assertThisInitialized(s),s._tapNext=a):a&&(s._context=a,s._tapNext=a.next||Pp,s._tapError=a.error||Pp,s._tapComplete=a.complete||Pp),s}return _createClass(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(m),Wp=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Gp(e,this.callback))}}]),e}(),Gp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).add(new f(r)),a}return _createClass(n)}(m),Hp=_createClass((function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n})),jp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(a=t.call(this,e,r)).navigationTrigger=i,a.restoredState=o,a}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Hp),qp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).urlAfterRedirects=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Hp),Kp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).reason=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Hp),Xp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).error=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Hp),Zp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Hp),Yp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Hp),Jp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=a,s.state=i,s.shouldActivate=o,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Hp),$p=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Hp),Qp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Hp),em=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),tm=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),nm=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),rm=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),am=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),im=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),om=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),sm=((Bp=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||Bp)},Bp.\u0275cmp=ht({type:Bp,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Ci(0,"router-outlet")},directives:function(){return[yg]},encapsulation:2}),Bp),um=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function cm(e){return new um(e)}function lm(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function hm(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var a={},i=0;i<r.length;i++){var o=r[i],s=e[i];if(o.startsWith(":"))a[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}var fm=_createClass((function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n}));function dm(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];pm(r,mm(t,r))}}function pm(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&dm(e.children,t)}function mm(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function vm(e){var t=e.children&&e.children.map(vm),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=sm),n}function gm(e,t){var n,r=Object.keys(e),a=Object.keys(t);if(!r||!a||r.length!=a.length)return!1;for(var i=0;i<r.length;i++)if(!ym(e[n=r[i]],t[n]))return!1;return!0}function ym(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function _m(e){return Array.prototype.concat.apply([],e)}function bm(e){return e.length>0?e[e.length-1]:null}function xm(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function wm(e){return Ti(e)?e:Si(e)?G(Promise.resolve(e)):Zd(e)}function km(e,t,n){return n?function(e,t){return gm(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Em(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return ym(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,a){if(n.segments.length>a.length)return!!Em(n.segments.slice(0,a.length),a)&&!r.hasChildren();if(n.segments.length===a.length){if(!Em(n.segments,a))return!1;for(var i in r.children){if(!n.children[i])return!1;if(!e(n.children[i],r.children[i]))return!1}return!0}var o=a.slice(0,n.segments.length),s=a.slice(n.segments.length);return!!Em(n.segments,o)&&!!n.children.primary&&t(n.children.primary,r,s)}(t,n,n.segments)}(e.root,t.root)}var Cm=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=cm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Nm.serialize(this)}}]),e}(),Sm=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,xm(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Rm(this)}}]),e}(),Tm=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=cm(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return zm(this)}}]),e}();function Em(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function Am(e,t){var n=[];return xm(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),xm(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var Mm=_createClass((function e(){_classCallCheck(this,e)})),Im=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new Gm(e);return new Cm(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"".concat("/".concat(function e(t,n){if(!t.hasChildren())return Rm(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",a=[];return xm(t.children,(function(t,n){"primary"!==n&&a.push("".concat(n,":").concat(e(t,!1)))})),a.length>0?"".concat(r,"(").concat(a.join("//"),")"):r}var i=Am(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(Rm(t),"/(").concat(i.join("//"),")")}(e.root,!0)),(n=e.queryParams,r=Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(t){return"".concat(Om(e),"=").concat(Om(t))})).join("&"):"".concat(Om(e),"=").concat(Om(t))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Nm=new Im;function Rm(e){return e.segments.map((function(e){return zm(e)})).join("/")}function Dm(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Om(e){return Dm(e).replace(/%3B/gi,";")}function Lm(e){return Dm(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fm(e){return decodeURIComponent(e)}function Pm(e){return Fm(e.replace(/\+/g,"%20"))}function zm(e){return"".concat(Lm(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(Lm(e),"=").concat(Lm(t[e]))})).join("")));var t}var Bm=/^[^\/()?;=#]+/;function Um(e){var t=e.match(Bm);return t?t[0]:""}var Vm=/^[^=?&#]+/,Wm=/^[^?&#]+/,Gm=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sm([],{}):new Sm([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Sm(e,t)),n}},{key:"parseSegment",value:function(){var e=Um(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Tm(Fm(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Um(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Um(this.remaining);r&&(n=r,this.capture(n))}e[Fm(t)]=Fm(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Vm);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Wm);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var a=Pm(t),i=Pm(n);if(e.hasOwnProperty(a)){var o=e[a];Array.isArray(o)||(o=[o],e[a]=o),o.push(i)}else e[a]=i}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Um(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var a=void 0;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):e&&(a="primary");var i=this.parseChildren();t[a]=1===Object.keys(i).length?i.primary:new Sm([],i),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Hm=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=jm(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=jm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=qm(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return qm(e,this._root).map((function(e){return e.value}))}}]),e}();function jm(e,t){if(e===t.value)return t;var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var a=jm(e,n.value);if(a)return a}}catch(i){r.e(i)}finally{r.f()}return null}function qm(e,t){if(e===t.value)return[t];var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var a=qm(e,n.value);if(a.length)return a.unshift(t),a}}catch(i){r.e(i)}finally{r.f()}return[]}var Km=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Xm(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Zm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).snapshot=r,tv(_assertThisInitialized(a),e),a}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Hm);function Ym(e,t){var n=function(e,t){var n=new Qm([],{},{},"",{},"primary",t,null,e.root,-1,{});return new ev("",new Km(n,[]))}(e,t),r=new Yd([new Tm("",{})]),a=new Yd({}),i=new Yd({}),o=new Yd({}),s=new Yd(""),u=new Jm(r,a,o,s,i,"primary",t,n.root);return u.snapshot=n.root,new Zm(new Km(u,[]),n)}var Jm=function(){function e(t,n,r,a,i,o,s,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=u}return _createClass(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(B((function(e){return cm(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B((function(e){return cm(e)})))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function $m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var a=n[r],i=n[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(i.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Qm=function(){function e(t,n,r,a,i,o,s,u,c,l,h){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=i,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=cm(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=cm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),ev=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,r)).url=e,tv(_assertThisInitialized(a),r),a}return _createClass(n,[{key:"toString",value:function(){return nv(this._root)}}]),n}(Hm);function tv(e,t){t.value._routerState=e,t.children.forEach((function(t){return tv(e,t)}))}function nv(e){var t=e.children.length>0?" { ".concat(e.children.map(nv).join(", ")," } "):"";return"".concat(e.value).concat(t)}function rv(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,gm(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),gm(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!gm(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),gm(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function av(e,t){var n,r;return gm(e.params,t.params)&&Em(n=e.url,r=t.url)&&n.every((function(e,t){return gm(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||av(e.parent,t.parent))}function iv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function ov(e,t,n,r,a){var i={};return r&&xm(r,(function(e,t){i[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new Cm(n.root===e?t:function e(t,n,r){var a={};return xm(t.children,(function(t,i){a[i]=t===n?r:e(t,n,r)})),new Sm(t.segments,a)}(n.root,e,t),i,a)}var sv=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&iv(r[0]))throw new Error("Root segment cannot have matrix parameters");var a=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(a&&a!==bm(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),uv=_createClass((function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r}));function cv(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function lv(e,t,n){if(e||(e=new Sm([],{})),0===e.segments.length&&e.hasChildren())return hv(e,t,n);var r=function(e,t,n){for(var r=0,a=t,i={match:!1,pathIndex:0,commandIndex:0};a<e.segments.length;){if(r>=n.length)return i;var o=e.segments[a],s=cv(n[r]),u=r<n.length-1?n[r+1]:null;if(a>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!mv(s,u,o))return i;r+=2}else{if(!mv(s,{},o))return i;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(e,t,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var i=new Sm(e.segments.slice(0,r.pathIndex),{});return i.children.primary=new Sm(e.segments.slice(r.pathIndex),e.children),hv(i,0,a)}return r.match&&0===a.length?new Sm(e.segments,{}):r.match&&!e.hasChildren()?fv(e,t,n):r.match?hv(e,0,a):fv(e,t,n)}function hv(e,t,n){if(0===n.length)return new Sm(e.segments,{});var r=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),a={};return xm(r,(function(n,r){null!==n&&(a[r]=lv(e.children[r],t,n))})),xm(e.children,(function(e,t){void 0===r[t]&&(a[t]=e)})),new Sm(e.segments,a)}function fv(e,t,n){for(var r=e.segments.slice(0,t),a=0;a<n.length;){if("object"==typeof n[a]&&void 0!==n[a].outlets){var i=dv(n[a].outlets);return new Sm(r,i)}if(0===a&&iv(n[0]))r.push(new Tm(e.segments[t].path,n[0])),a++;else{var o=cv(n[a]),s=a<n.length-1?n[a+1]:null;o&&s&&iv(s)?(r.push(new Tm(o,pv(s))),a+=2):(r.push(new Tm(o,{})),a++)}}return new Sm(r,{})}function dv(e){var t={};return xm(e,(function(e,n){null!==e&&(t[n]=fv(new Sm([],{}),0,e))})),t}function pv(e){var t={};return xm(e,(function(e,n){return t[n]="".concat(e)})),t}function mv(e,t,n){return e==n.path&&gm(t,n.parameters)}var vv=function(){function e(t,n,r,a){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=a}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),rv(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,a=Xm(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,a[t],n),delete a[t]})),xm(a,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,a=t?t.value:null;if(r===a)if(r.component){var i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else a&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:a})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var a=Xm(e),i=e.value.component?r.children:t;xm(a,(function(e,t){return n.deactivateRouteAndItsChildren(e,i)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,a=Xm(t);e.children.forEach((function(e){r.activateRoutes(e,a[e.value.outlet],n),r.forwardEvent(new im(e.value.snapshot))})),e.children.length&&this.forwardEvent(new rm(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,a=t?t.value:null;if(rv(r),r===a)if(r.component){var i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),gv(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function gv(e){rv(e.value),e.children.forEach(gv)}function yv(e){return"function"==typeof e}function _v(e){return e instanceof Cm}var bv=_createClass((function e(t){_classCallCheck(this,e),this.segmentGroup=t||null})),xv=_createClass((function e(t){_classCallCheck(this,e),this.urlTree=t}));function wv(e){return new w((function(t){return t.error(new bv(e))}))}function kv(e){return new w((function(t){return t.error(new xv(e))}))}function Cv(e){return new w((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var Sv=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=a,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Qe)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(B((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(bp((function(t){if(t instanceof xv)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof bv)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(B((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(bp((function(e){if(e instanceof bv)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new Sm([],{primary:e}):e;return new Cm(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B((function(e){return new Sm([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,a){if(0===Object.keys(n).length)return Zd({});var i=[],o=[],s={};return xm(n,(function(n,a){var u,c,l=(u=a,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(B((function(e){return s[a]=e})));"primary"===a?i.push(l):o.push(l)})),Zd.apply(null,i.concat(o)).pipe(ap(),_p(),B((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,a,i){var o=this;return Zd.apply(void 0,_toConsumableArray(n)).pipe(B((function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,a,i).pipe(bp((function(e){if(e instanceof bv)return Zd(null);throw e})))})),ap(),Tp((function(e){return!!e})),bp((function(e,n){if(e instanceof Jd||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,r,a))return Zd(new Sm([],{}));throw new bv(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,a,i,o){return Mv(r)!==i?wv(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,a,i):wv(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,a,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,a,i)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var a=this,i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?kv(i):this.lineralizeSegments(n,i).pipe(H((function(n){var i=new Sm(n,{});return a.expandSegment(e,i,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,a,i){var o=this,s=Tv(t,r,a),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return wv(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?kv(f):this.lineralizeSegments(r,f).pipe(H((function(r){return o.expandSegment(e,t,n,r.concat(a.slice(l)),i,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var a=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(B((function(e){return n._loadedConfig=e,new Sm(r,{})}))):Zd(new Sm(r,{}));var i=Tv(t,n,r),o=i.matched,s=i.consumedSegments,u=i.lastChild;if(!o)return wv(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(H((function(e){var n=e.module,r=e.routes,i=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return Av(e,t,n)&&"primary"!==Mv(n)}))}(e,n,r)?{segmentGroup:Ev(new Sm(t,function(e,t){var n={};n.primary=t;var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;""===i.path&&"primary"!==Mv(i)&&(n[Mv(i)]=new Sm([],{}))}}catch(o){a.e(o)}finally{a.f()}return n}(r,new Sm(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return Av(e,t,n)}))}(e,n,r)?{segmentGroup:Ev(new Sm(e.segments,function(e,t,n,r){var a,i={},o=_createForOfIteratorHelper(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;Av(e,t,s)&&!r[Mv(s)]&&(i[Mv(s)]=new Sm([],{}))}}catch(u){o.e(u)}finally{o.f()}return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,c,r),o=i.segmentGroup,u=i.slicedSegments;return 0===u.length&&o.hasChildren()?a.expandChildren(n,r,o).pipe(B((function(e){return new Sm(s,e)}))):0===r.length&&0===u.length?Zd(new Sm(s,{})):a.expandSegment(n,o,r,u,"primary",!0).pipe(B((function(e){return new Sm(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Zd(new fm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Zd(t._loadedConfig):function(e,t,n){var r,a=t.canLoad;return a&&0!==a.length?G(a).pipe(B((function(r){var a,i=e.get(r);if(function(e){return e&&yv(e.canLoad)}(i))a=i.canLoad(t,n);else{if(!yv(i))throw new Error("Invalid CanLoad guard");a=i(t,n)}return wm(a)}))).pipe(ap(),(r=function(e){return!0===e},function(e){return e.lift(new Ep(r,void 0,e))})):Zd(!0)}(e.injector,t,n).pipe(H((function(n){return n?r.configLoader.load(e.injector,t).pipe(B((function(e){return t._loadedConfig=e,e}))):function(e){return new w((function(t){return t.error(lm("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Zd(new fm([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Zd(n);if(r.numberOfChildren>1||!r.children.primary)return Cv(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var a=this.createSegmentGroup(e,t.root,n,r);return new Cm(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return xm(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var a=e.substring(1);n[r]=t[a]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var a=this,i=this.createSegments(e,t.segments,n,r),o={};return xm(t.children,(function(t,i){o[i]=a.createSegmentGroup(e,t,n,r)})),new Sm(i,o)}},{key:"createSegments",value:function(e,t,n,r){var a=this;return t.map((function(t){return t.path.startsWith(":")?a.findPosParam(e,t,r):a.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.path===e.path)return t.splice(r),i;r++}}catch(o){a.e(o)}finally{a.f()}return e}}]),e}();function Tv(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||hm)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ev(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Sm(e.segments.concat(t.segments),t.children)}return e}function Av(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Mv(e){return e.outlet||"primary"}var Iv=_createClass((function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]})),Nv=_createClass((function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n}));function Rv(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Dv(e,t,n){var r=Xm(e),a=e.value;xm(r,(function(e,r){Dv(e,a.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new Nv(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}var Ov=Symbol("INITIAL_VALUE");function Lv(){return Mp((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,a=null;return I(t[t.length-1])&&(a=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),X(t,a).lift(new Qd(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(kp(1),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return I(r)?(t.pop(),function(e){return Rp(t,e,r)}):function(e){return Rp(t,e)}}(Ov))})))).pipe(Dp((function(e,t){var n=!1;return t.reduce((function(e,r,a){if(e!==Ov)return e;if(r===Ov&&(n=!0),!n){if(!1===r)return r;if(a===t.length-1||_v(r))return r}return e}),e)}),Ov),ip((function(e){return e!==Ov})),B((function(e){return _v(e)?e:!0===e})),kp(1))}))}function Fv(e,t){return null!==e&&t&&t(new am(e)),Zd(!0)}function Pv(e,t){return null!==e&&t&&t(new nm(e)),Zd(!0)}function zv(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Zd(r.map((function(r){return rp((function(){var a,i=Rv(r,t,n);if(function(e){return e&&yv(e.canActivate)}(i))a=wm(i.canActivate(t,e));else{if(!yv(i))throw new Error("Invalid CanActivate guard");a=wm(i(t,e))}return a.pipe(Tp())}))}))).pipe(Lv()):Zd(!0)}function Bv(e,t,n){var r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return rp((function(){return Zd(t.guards.map((function(a){var i,o=Rv(a,t.node,n);if(function(e){return e&&yv(e.canActivateChild)}(o))i=wm(o.canActivateChild(r,e));else{if(!yv(o))throw new Error("Invalid CanActivateChild guard");i=wm(o(r,e))}return i.pipe(Tp())}))).pipe(Lv())}))}));return Zd(a).pipe(Lv())}var Uv=_createClass((function e(){_classCallCheck(this,e)})),Vv=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return _createClass(e,[{key:"recognize",value:function(){try{var e=Hv(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Qm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Km(n,t),a=new ev(this.url,r);return this.inheritParamsAndData(a._root),Zd(a)}catch(i){return new w((function(e){return e.error(i)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=$m(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,a=Am(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},a.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),a=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(a,"'."))}n[e.value.outlet]=e.value})),a.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),a}},{key:"processSegment",value:function(e,t,n,r){var a,i=_createForOfIteratorHelper(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(s){if(!(s instanceof Uv))throw s}}}catch(u){i.e(u)}finally{i.f()}if(this.noLeftoversInUrl(t,n,r))return[];throw new Uv}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new Uv;if((e.outlet||"primary")!==r)throw new Uv;var a,i=[],o=[];if("**"===e.path){var s=n.length>0?bm(n).parameters:{};a=new Qm(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kv(e),r,e.component,e,Wv(t),Gv(t)+n.length,Xv(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Uv;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||hm)(n,e,t);if(!r)throw new Uv;var a={};xm(r.posParams,(function(e,t){a[t]=e.path}));var i=r.consumed.length>0?Object.assign(Object.assign({},a),r.consumed[r.consumed.length-1].parameters):a;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(t,e,n);i=u.consumedSegments,o=n.slice(u.lastChild),a=new Qm(i,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kv(e),r,e.component,e,Wv(t),Gv(t)+i.length,Xv(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Hv(t,i,o,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new Km(a,d)]}if(0===c.length&&0===f.length)return[new Km(a,[])];var p=this.processSegment(c,h,f,"primary");return[new Km(a,p)]}}]),e}();function Wv(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Gv(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Hv(e,t,n,r,a){if(n.length>0&&function(e,t,n){return n.some((function(n){return jv(e,t,n)&&"primary"!==qv(n)}))}(e,n,r)){var i=new Sm(t,function(e,t,n,r){var a={};a.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(""===s.path&&"primary"!==qv(s)){var u=new Sm([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,a[qv(s)]=u}}}catch(c){o.e(c)}finally{o.f()}return a}(e,t,r,new Sm(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return jv(e,t,n)}))}(e,n,r)){var o=new Sm(e.segments,function(e,t,n,r,a,i){var o,s={},u=_createForOfIteratorHelper(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(jv(e,n,c)&&!a[qv(c)]){var l=new Sm([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===i?e.segments.length:t.length,s[qv(c)]=l}}}catch(h){u.e(h)}finally{u.f()}return Object.assign(Object.assign({},a),s)}(e,t,n,r,e.children,a));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var s=new Sm(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function jv(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function qv(e){return e.outlet||"primary"}function Kv(e){return e.data||{}}function Xv(e){return e.resolve||{}}function Zv(e,t,n,r){var a=Rv(e,t,r);return wm(a.resolve?a.resolve(t,n):a(t,n))}function Yv(e){return function(t){return t.pipe(Mp((function(t){var n=e(t);return n?G(n).pipe(B((function(){return t}))):G([t])})))}}var Jv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),$v=new Ue("ROUTES"),Qv=function(){function e(t,n,r,a){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=a}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var a=r.create(e);return new fm(_m(a.injector.get($v)).map(vm),a)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?G(this.loader.load(e)):wm(e()).pipe(H((function(e){return e instanceof et?Zd(e):G(t.compiler.compileModuleAsync(e))})))}}]),e}(),eg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function tg(e){throw e}function ng(e,t,n){return t.parse("/")}function rg(e,t){return Zd(null)}var ag,ig,og,sg=((og=function(){function e(t,n,r,a,i,o,s,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new A,this.errorHandler=tg,this.malformedUriErrorHandler=ng,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rg,afterPreactivation:rg},this.urlHandlingStrategy=new eg,this.routeReuseStrategy=new Jv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Qe),this.console=i.get(ws);var l=i.get(Fs);this.isNgZoneEnabled=l instanceof Fs,this.resetConfig(u),this.currentUrlTree=new Cm(new Sm([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qv(o,s,(function(e){return c.triggerEvent(new em(e))}),(function(e){return c.triggerEvent(new tm(e))})),this.routerState=Ym(this.currentUrlTree,this.rootComponentType),this.transitions=new Yd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(ip((function(e){return 0!==e.id})),B((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Mp((function(e){var r,a,i,o,s=!1,u=!1;return Zd(e).pipe(zp((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Mp((function(e){var r,a,i,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Zd(e).pipe(Mp((function(e){var r=t.transitions.getValue();return n.next(new jp(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?tp:[e]})),Mp((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,a=t.configLoader,i=t.urlSerializer,o=t.config,function(e){return e.pipe(Mp((function(e){return function(e,t,n,r,a){return new Sv(e,t,n,r,a).apply()}(r,a,i,e.extractedUrl,o).pipe(B((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),zp((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,a,i){return function(r){return r.pipe(H((function(r){return function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Vv(e,t,n,r,a,i).recognize()}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),a,i).pipe(B((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),zp((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),zp((function(e){var r=new Zp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,f=e.extras,d=new jp(u,t.serializeUrl(c),l,h);n.next(d);var p=Ym(c,t.rootComponentType).snapshot;return Zd(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),tp})),Yv((function(e){var n=e.targetSnapshot,r=e.id,a=e.extractedUrl,i=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:a,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!u})})),zp((function(e){var n=new Yp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),B((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,a=t.rootContexts,i=n._root,function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Xm(n);return t.children.forEach((function(t){!function(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,s=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Em(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Em(e.url,t.url)||!gm(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!av(e,t)||!gm(e.queryParams,t.queryParams);case"paramsChange":default:return!av(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Iv(a)):(o.data=s.data,o._resolvedData=s._resolvedData),e(t,n,o.component?u?u.children:null:r,a,i),c&&i.canDeactivateChecks.push(new Nv(u&&u.outlet&&u.outlet.component||null,s))}else s&&Dv(n,u,i),i.canActivateChecks.push(new Iv(a)),e(t,null,o.component?u?u.children:null:r,a,i)}(t,o[t.value.outlet],r,a.concat([t.value]),i),delete o[t.value.outlet]})),xm(o,(function(e,t){return Dv(e,r.getContext(t),i)})),i}(i,r?r._root:null,a,[i.value]))});var n,r,a,i})),function(e,t){return function(n){return n.pipe(H((function(n){var r=n.targetSnapshot,a=n.currentSnapshot,i=n.guards,o=i.canActivateChecks,s=i.canDeactivateChecks;return 0===s.length&&0===o.length?Zd(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return G(e).pipe(H((function(e){return function(e,t,n,r,a){var i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?Zd(i.map((function(i){var o,s=Rv(i,t,a);if(function(e){return e&&yv(e.canDeactivate)}(s))o=wm(s.canDeactivate(e,t,n,r));else{if(!yv(s))throw new Error("Invalid CanDeactivate guard");o=wm(s(e,t,n,r))}return o.pipe(Tp())}))).pipe(Lv()):Zd(!0)}(e.component,e.route,n,t,r)})),Tp((function(e){return!0!==e}),!0))}(s,r,a,e).pipe(H((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return G(t).pipe(Fp((function(t){return G([Pv(t.route.parent,r),Fv(t.route,r),Bv(e,t.path,n),zv(e,t.route,n)]).pipe(ap(),Tp((function(e){return!0!==e}),!0))})),Tp((function(e){return!0!==e}),!0))}(r,o,e,t):Zd(n)})),B((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),zp((function(e){if(_v(e.guardsResult)){var n=lm('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),zp((function(e){var n=new Jp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),ip((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Kp(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),Yv((function(e){if(e.guards.canActivateChecks.length)return Zd(e).pipe(zp((function(e){var n=new $p(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(H((function(e){var t=e.targetSnapshot,a=e.guards.canActivateChecks;return a.length?G(a).pipe(Fp((function(e){return function(e,t,n,r){return function(e,t,n,r){var a=Object.keys(e);if(0===a.length)return Zd({});if(1===a.length){var i=a[0];return Zv(e[i],t,n,r).pipe(B((function(e){return _defineProperty({},i,e)})))}var o={};return G(a).pipe(H((function(a){return Zv(e[a],t,n,r).pipe(B((function(e){return o[a]=e,e})))}))).pipe(_p(),B((function(){return o})))}(e._resolve,e,t,r).pipe(B((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),$m(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return _(Dp(e,t),cp(1),vp(t))(n)}:function(t){return _(Dp((function(t,n,r){return e(t,n,r+1)})),cp(1))(t)}}((function(e,t){return e})),B((function(t){return e}))):Zd(e)})))}),zp((function(e){var n=new Qp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),Yv((function(e){var n=e.targetSnapshot,r=e.id,a=e.extractedUrl,i=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:a,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!u})})),B((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var a=r.value;a._futureSnapshot=n.value;var i=function(t,n,r){return n.children.map((function(n){var a,i=_createForOfIteratorHelper(r.children);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t.shouldReuseRoute(o.value.snapshot,n.value))return e(t,n,o)}}catch(s){i.e(s)}finally{i.f()}return e(t,n)}))}(t,n,r);return new Km(a,i)}var o=t.retrieve(n.value);if(o){var s=o.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,s),s}var u,c=new Jm(new Yd((u=n.value).url),new Yd(u.params),new Yd(u.queryParams),new Yd(u.fragment),new Yd(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return e(t,n)}));return new Km(c,l)}(e,t._root,n?n._root:void 0);return new Zm(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})})),zp((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(a=t.rootContexts,i=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},B((function(e){return new vv(i,e.targetRouterState,e.currentRouterState,o).activate(a),e}))),zp({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){t.resetUrlToCurrentUrlTree();var r=new Kp(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new Wp(r))}),bp((function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var a=_v(r.url);a||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var i=new Kp(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(i),a?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Xp(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var s;return tp})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",a=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,a,{replaceUrl:!0})}),0)})))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){dm(e),this.config=e.map(vm),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,a=t.fragment,i=t.preserveQueryParams,o=t.queryParamsHandling,s=t.preserveFragment;nr()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:a,l=null;if(o)switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=i?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,a){if(0===n.length)return ov(t.root,t.root,t,r,a);var i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new sv(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,a){if("object"==typeof r&&null!=r){if(r.outlets){var i={};return xm(r.outlets,(function(e,t){i[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:i}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===a?(r.split("/").forEach((function(r,a){0==a&&"."===r||(0==a&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new sv(n,t,r)}(n);if(i.toRoot())return ov(t.root,new Sm([],{}),t,r,a);var o=function(e,t,n){if(e.isAbsolute)return new uv(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new uv(n.snapshot._urlSegment,!0,0);var r=iv(e.commands[0])?0:1;return function(e,t,n){for(var r=e,a=t,i=n;i>a;){if(i-=a,!(r=r.parent))throw new Error("Invalid number of '../'");a=r.segments.length}return new uv(r,!1,a-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(i,t,e),s=o.processChildren?hv(o.segmentGroup,o.index,i.commands):lv(o.segmentGroup,o.index,i.commands);return ov(o.segmentGroup,s,t,r,a)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};nr()&&this.isNgZoneEnabled&&!Fs.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=_v(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(_v(e))return km(this.currentUrlTree,e,t);var n=this.parseUrl(e);return km(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new qp(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,a){var i,o,s,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);a?(i=a.resolve,o=a.reject,s=a.promise):s=new Promise((function(e,t){i=e,o=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:i,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var a=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(a)||t?this.location.replaceState(a,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(a,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),e}()).\u0275fac=function(e){_i()},og.\u0275dir=gt({type:og}),og),ug=((ig=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.router=t,this.route=n,this.commands=[],null==r&&a.setAttribute(i.nativeElement,"tabindex","0")}return _createClass(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){nr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}},{key:"onClick",value:function(){var e={skipLocationChange:lg(this.skipLocationChange),replaceUrl:lg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:lg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:lg(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||ig)(gi(sg),gi(Jm),yi("tabindex"),gi(ho),gi(so))},ig.\u0275dir=gt({type:ig,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&Ei("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),ig),cg=((ag=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof qp&&a.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){nr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:lg(this.skipLocationChange),replaceUrl:lg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:lg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:lg(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||ag)(gi(sg),gi(Jm),gi(Eu))},ag.\u0275dir=gt({type:ag,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Ei("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(Bi("href",t.href,or),vi("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ki]}),ag);function lg(e){return""===e||!!e}var hg,fg,dg,pg,mg=((hg=function(){function e(t,n,r,a,i){var o=this;_classCallCheck(this,e),this.router=t,this.element=n,this.renderer=r,this.link=a,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe((function(e){e instanceof qp&&o.update()}))}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.links.changes.subscribe((function(t){return e.update()})),this.linksWithHrefs.changes.subscribe((function(t){return e.update()})),this.update()}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter((function(e){return!!e}))}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.classes.forEach((function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(e){var t=this;return function(n){return e.isActive(n.urlTree,t.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}]),e}()).\u0275fac=function(e){return new(e||hg)(gi(sg),gi(so),gi(ho),gi(ug,8),gi(cg,8))},hg.\u0275dir=gt({type:hg,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;1&e&&(cs(n,ug,!0),cs(n,cg,!0)),2&e&&(us(r=ls())&&(t.links=r),us(r=ls())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Ki]}),hg),vg=_createClass((function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new gg,this.attachRef=null})),gg=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new vg,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),yg=((fg=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Jo,this.deactivateEvents=new Jo,this.name=a||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,a=new _g(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,a),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}()).\u0275fac=function(e){return new(e||fg)(gi(gg),gi(Do),gi(oo),yi("name"),gi(Va))},fg.\u0275dir=gt({type:fg,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),fg),_g=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Jm?this.route:e===gg?this.childContexts:this.parent.get(e,t)}}]),e}(),bg=_createClass((function e(){_classCallCheck(this,e)})),xg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return Zd(null)}}]),e}(),wg=((pg=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.router=t,this.injector=a,this.preloadingStrategy=i,this.loader=new Qv(n,r,(function(e){return t.triggerEvent(new em(e))}),(function(e){return t.triggerEvent(new tm(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(ip((function(e){return e instanceof qp})),Fp((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(Qe);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.loadChildren&&!i.canLoad&&i._loadedConfig){var o=i._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else i.loadChildren&&!i.canLoad?r.push(this.preloadConfig(e,i)):i.children&&r.push(this.processRoutes(e,i.children))}}catch(s){a.e(s)}finally{a.f()}return G(r).pipe(K(),B((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(H((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||pg)(Ze(sg),Ze(au),Ze(Rs),Ze(ri),Ze(bg))},pg.\u0275prov=he({token:pg,factory:pg.\u0275fac}),pg),kg=((dg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof jp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qp&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof om&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new om(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){_i()},dg.\u0275dir=gt({type:dg}),dg),Cg=new Ue("ROUTER_CONFIGURATION"),Sg=new Ue("ROUTER_FORROOT_GUARD"),Tg=[Lu,{provide:Mm,useClass:Im},{provide:sg,useFactory:function(e,t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new sg(null,e,t,n,r,a,i,_m(o));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),s.errorHandler&&(l.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(l.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=du();l.events.subscribe((function(e){h.logGroup("Router Event: ".concat(e.constructor.name)),h.log(e.toString()),h.log(e),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(l.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(l.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(l.relativeLinkResolution=s.relativeLinkResolution),l},deps:[Mm,gg,Lu,ri,au,Rs,$v,Cg,[function(){return _createClass((function e(){_classCallCheck(this,e)}))}(),new ie],[function(){return _createClass((function e(){_classCallCheck(this,e)}))}(),new ie]]},gg,{provide:Jm,useFactory:function(e){return e.routerState.root},deps:[sg]},{provide:au,useClass:su},wg,xg,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(bp((function(){return Zd(null)})))}}]),e}(),{provide:Cg,useValue:{enableTracing:!1}}];function Eg(){return new Ys("Router",sg)}var Ag,Mg=((Ag=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Tg,Dg(t),{provide:Sg,useFactory:Rg,deps:[[sg,new ie,new se]]},{provide:Cg,useValue:n||{}},{provide:Eu,useFactory:Ng,deps:[vu,[new ae(Ru),new ie],Cg]},{provide:kg,useFactory:Ig,deps:[sg,Pl,Cg]},{provide:bg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:xg},{provide:Ys,multi:!0,useFactory:Eg},[Lg,{provide:ps,multi:!0,useFactory:Fg,deps:[Lg]},{provide:Vg,useFactory:Pg,deps:[Lg]},{provide:xs,multi:!0,useExisting:Vg}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Dg(t)]}}}]),e}()).\u0275mod=mt({type:Ag}),Ag.\u0275inj=fe({factory:function(e){return new(e||Ag)(Ze(Sg,8),Ze(sg,8))}}),Ag);function Ig(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new kg(e,t,n)}function Ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Ou(e,t):new Du(e,t)}function Rg(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Dg(e){return[{provide:ai,multi:!0,useValue:e},{provide:$v,multi:!0,useValue:e}]}var Og,Lg=((Og=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new A}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(_u,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(sg),a=e.injector.get(Cg);if(e.isLegacyDisabled(a)||e.isLegacyEnabled(a))t(!0);else if("disabled"===a.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==a.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(a.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?Zd(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Cg),n=this.injector.get(wg),r=this.injector.get(kg),a=this.injector.get(sg),i=this.injector.get(nu);e===i.components[0]&&(this.isLegacyEnabled(t)?a.initialNavigation():this.isLegacyDisabled(t)&&a.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),a.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||Og)(Ze(ri))},Og.\u0275prov=he({token:Og,factory:Og.\u0275fac}),Og);function Fg(e){return e.appInitializer.bind(e)}function Pg(e){return e.bootstrapListener.bind(e)}var zg,Bg,Ug,Vg=new Ue("Router Initializer"),Wg=[],Gg=((zg=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:zg}),zg.\u0275inj=fe({factory:function(e){return new(e||zg)},imports:[[Mg.forRoot(Wg)],Mg]}),zg),Hg=function(){function e(t){var n=t.url,r=t.tracker,a=t.enableRotate,i=void 0!==a&&a,o=t.enableZoom,s=void 0!==o&&o,u=t.loading,c=void 0===u||u;_classCallCheck(this,e),this.update({url:n,tracker:r,enableRotate:i,enableZoom:s,loading:c})}return _createClass(e,[{key:"update",value:function(e){var t=e.url,n=e.tracker,r=e.enableRotate,a=e.enableZoom,i=e.loading;this.url=t,this.tracker=n,this.enableRotate=r,this.enableZoom=a,this.loading=i}}]),e}(),jg=((Ug=function(){function e(){_classCallCheck(this,e),this.men=new Hg({url:"https://github.com/gitchaell/ngx-profile-avatar/blob/main/.github/images/men.avatar.glb?raw=true",tracker:"cursor"}),this.women=new Hg({url:"https://github.com/gitchaell/ngx-profile-avatar/blob/main/.github/images/women.avatar.glb?raw=true",tracker:"cursor"})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onUpdateMen",value:function(e){this.men.update(e)}},{key:"onUpdateWomen",value:function(e){this.women.update(e)}}]),e}()).\u0275fac=function(e){return new(e||Ug)},Ug.\u0275cmp=ht({type:Ug,selectors:[["app-root"]],decls:4,vars:4,consts:[[1,"men-avatar",3,"data"],[1,"men-form",3,"data","submit"],[1,"women-avatar",3,"data"],[1,"women-form",3,"data","submit"]],template:function(e,t){1&e&&(Ci(0,"app-avatar-visor",0),wi(1,"app-avatar-form",1),Ei("submit",(function(e){return t.onUpdateMen(e)})),ki(),Ci(2,"app-avatar-visor",2),wi(3,"app-avatar-form",3),Ei("submit",(function(e){return t.onUpdateWomen(e)})),ki()),2&e&&(bi("data",t.men),xr(1),bi("data",t.men),xr(1),bi("data",t.women),xr(1),bi("data",t.women))},styles:['[_nghost-%COMP%] {\n      display: grid;\n      grid-template-columns: 50vw 50vw;\n      grid-template-rows: 1fr auto;\n      grid-template-areas:\n      "men-avatar women-avatar"\n      "men-form women-form";\n      width: 100%;\n      height: 100vh;\n    }\n\n    .men-avatar[_ngcontent-%COMP%] { grid-area: men-avatar; }\n    .women-avatar[_ngcontent-%COMP%] { grid-area: women-avatar; }\n    .women-form[_ngcontent-%COMP%] { grid-area: women-form; }\n    .men-form[_ngcontent-%COMP%] { grid-area: men-form; }\n\n    @media only screen and (max-width: 600px) {\n      [_nghost-%COMP%] {\n        grid-template-columns: 100vw;\n        grid-template-rows: 65vh auto 65vh auto;\n        grid-template-areas:\n          "men-avatar"\n          "men-form"\n          "women-avatar"\n          "women-form";\n        height: auto;\n      }\n    }']}),Ug),qg=((Bg=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||Bg)},Bg.\u0275cmp=ht({type:Bg,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"animate-spin","spinner"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","var(--blue-600)"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","var(--gray-600)"]],template:function(e,t){1&e&&(Vt.lFrame.currentNamespace="http://www.w3.org/2000/svg",wi(0,"svg",0),Ci(1,"path",1),Ci(2,"path",2),ki())},styles:[".animate-spin[_ngcontent-%COMP%] {\n      animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n      100% {\n        transform: rotate(1turn);\n      }\n    }\n\n    svg.spinner[_ngcontent-%COMP%] {\n      width: 32px;\n    }"],changeDetection:0}),Bg),Kg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,a=n.length;r<a;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Xg=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Zg=1234567,Yg=Math.PI/180,Jg=180/Math.PI;function $g(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Xg[255&e]+Xg[e>>8&255]+Xg[e>>16&255]+Xg[e>>24&255]+"-"+Xg[255&t]+Xg[t>>8&255]+"-"+Xg[t>>16&15|64]+Xg[t>>24&255]+"-"+Xg[63&n|128]+Xg[n>>8&255]+"-"+Xg[n>>16&255]+Xg[n>>24&255]+Xg[255&r]+Xg[r>>8&255]+Xg[r>>16&255]+Xg[r>>24&255]).toLowerCase()}function Qg(e,t,n){return Math.max(t,Math.min(n,e))}function ey(e,t){return(e%t+t)%t}function ty(e,t,n){return(1-n)*e+n*t}function ny(e){return 0==(e&e-1)&&0!==e}function ry(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ay(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var iy=Object.freeze({__proto__:null,DEG2RAD:Yg,RAD2DEG:Jg,generateUUID:$g,clamp:Qg,euclideanModulo:ey,mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ty,damp:function(e,t,n,r){return ty(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(ey(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Zg=e);var t=Zg+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Yg},radToDeg:function(e){return e*Jg},isPowerOfTwo:ny,ceilPowerOfTwo:ry,floorPowerOfTwo:ay,setQuaternionFromProperEuler:function(e,t,n,r,a){var i=Math.cos,o=Math.sin,s=i(n/2),u=o(n/2),c=i((t+r)/2),l=o((t+r)/2),h=i((t-r)/2),f=o((t-r)/2),d=i((r-t)/2),p=o((r-t)/2);switch(a){case"XYX":e.set(s*l,u*h,u*f,s*c);break;case"YZY":e.set(u*f,s*l,u*h,s*c);break;case"ZXZ":e.set(u*h,u*f,s*l,s*c);break;case"XZX":e.set(s*l,u*p,u*d,s*c);break;case"YXY":e.set(u*d,s*l,u*p,s*c);break;case"ZYZ":e.set(u*p,u*d,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),oy=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return _createClass(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),sy=function(){function e(){_classCallCheck(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return _createClass(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=a,c[5]=s,c[6]=n,c[7]=i,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return a[0]=i*p+o*g+s*b,a[3]=i*m+o*y+s*x,a[6]=i*v+o*_+s*w,a[1]=u*p+c*g+l*b,a[4]=u*m+c*y+l*x,a[7]=u*v+c*_+l*w,a[2]=h*p+f*g+d*b,a[5]=h*m+f*y+d*x,a[8]=h*v+f*_+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*i*c-t*o*u-n*a*c+n*o*s+r*a*u-r*i*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=c*i-o*u,h=o*s-c*a,f=u*a-i*s,d=t*l+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(o*n-r*i)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*a-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(i*t-n*a)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,a,i,o){var s=Math.cos(a),u=Math.sin(a);return this.set(n*s,n*u,-n*(s*i+u*o)+i+e,-r*u,r*s,-r*(-u*i+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],i=r[3],o=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*a+n*s,r[3]=t*i+n*u,r[6]=t*o+n*c,r[1]=-n*a+t*s,r[4]=-n*i+t*u,r[7]=-n*o+t*c,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function uy(e){for(var t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}function cy(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ly(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function hy(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var fy={srgb:{"srgb-linear":ly},"srgb-linear":{srgb:hy}},dy={legacyMode:!0,get workingColorSpace(){return"srgb-linear"},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(fy[t]&&void 0!==fy[t][n]){var r=fy[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},py={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},my={r:0,g:0,b:0},vy={h:0,s:0,l:0},gy={h:0,s:0,l:0};function yy(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function _y(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var by,xy=function(e){function t(e,n,r){return _classCallCheck(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return _createClass(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb";return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,dy.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"srgb-linear";return this.r=e,this.g=t,this.b=n,dy.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"srgb-linear";if(e=ey(e,1),t=Qg(t,0,1),n=Qg(n,0,1),0===t)this.r=this.g=this.b=n;else{var a=n<=.5?n*(1+t):n+t-n*t,i=2*n-a;this.r=yy(i,a,e+1/3),this.g=yy(i,a,e),this.b=yy(i,a,e-1/3)}return dy.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb";function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var a,i=t[2];switch(t[1]){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,dy.toWorkingColorSpace(this,n),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,dy.toWorkingColorSpace(this,n),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var o=parseFloat(a[1])/360,s=parseInt(a[2],10)/100,u=parseInt(a[3],10)/100;return r(a[4]),this.setHSL(o,s,u,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,dy.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,dy.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb",n=py[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ly(e.r),this.g=ly(e.g),this.b=ly(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=hy(e.r),this.g=hy(e.g),this.b=hy(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"srgb";return dy.fromWorkingColorSpace(_y(this,my),e),Qg(255*my.r,0,255)<<16^Qg(255*my.g,0,255)<<8^Qg(255*my.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"srgb";return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb-linear";dy.fromWorkingColorSpace(_y(this,my),t);var n,r,a=my.r,i=my.g,o=my.b,s=Math.max(a,i,o),u=Math.min(a,i,o),c=(u+s)/2;if(u===s)n=0,r=0;else{var l=s-u;switch(r=c<=.5?l/(s+u):l/(2-s-u),s){case a:n=(i-o)/l+(i<o?6:0);break;case i:n=(o-a)/l+2;break;case o:n=(a-i)/l+4}n/=6}return e.h=n,e.s=r,e.l=c,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb-linear";return dy.fromWorkingColorSpace(_y(this,my),t),e.r=my.r,e.g=my.g,e.b=my.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"srgb";return dy.fromWorkingColorSpace(_y(this,my),e),"srgb"!==e?"color(".concat(e," ").concat(my.r," ").concat(my.g," ").concat(my.b,")"):"rgb(".concat(255*my.r|0,",").concat(255*my.g|0,",").concat(255*my.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(vy),vy.h+=e,vy.s+=t,vy.l+=n,this.setHSL(vy.h,vy.s,vy.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(vy),e.getHSL(gy);var n=ty(vy.h,gy.h,t),r=ty(vy.s,gy.s,t),a=ty(vy.l,gy.l,t);return this.setHSL(n,r,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();xy.NAMES=py;var wy=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===by&&(by=cy("canvas")),by.width=e.width,by.height=e.height;var n=by.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=by}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=cy("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),a=r.data,i=0;i<a.length;i++)a[i]=255*ly(a[i]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o[s]=o instanceof Uint8Array||o instanceof Uint8ClampedArray?Math.floor(255*ly(o[s]/255)):ly(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),ky=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,e),this.isSource=!0,this.uuid=$g(),this.data=t,this.version=0}return _createClass(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var a;if(Array.isArray(r)){a=[];for(var i=0,o=r.length;i<o;i++)a.push(Cy(r[i].isDataTexture?r[i].image:r[i]))}else a=Cy(r);n.url=a}return t||(e.images[this.uuid]=n),n}}]),e}();function Cy(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?wy.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Sy=0,Ty=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return _classCallCheck(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:Sy++}),e.uuid=$g(),e.name="",e.source=new ky(r),e.mipmaps=[],e.mapping=a,e.wrapS=i,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=c,e.internalFormat=null,e.type=l,e.offset=new oy(0,0),e.repeat=new oy(1,1),e.center=new oy(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new sy,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return _createClass(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Kg);Ty.DEFAULT_IMAGE=null,Ty.DEFAULT_MAPPING=300;var Ey=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=a}return _createClass(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,a,i=e.elements,o=i[0],s=i[4],u=i[8],c=i[1],l=i[5],h=i[9],f=i[2],d=i[6],p=i[10];if(Math.abs(s-c)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(l+1)/2,g=(p+1)/2,y=(s+c)/4,_=(u+f)/4,b=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,a=.707106781):(r=y/(n=Math.sqrt(m)),a=_/n):v>g?v<.01?(n=.707106781,r=0,a=.707106781):(n=y/(r=Math.sqrt(v)),a=b/r):g<.01?(n=.707106781,r=.707106781,a=0):(n=_/(a=Math.sqrt(g)),r=b/a),this.set(n,r,a,t),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(c-s)/x,this.w=Math.acos((o+l+p-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),Ay=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,n),(a=t.call(this)).isWebGLRenderTarget=!0,a.width=e,a.height=r,a.depth=1,a.scissor=new Ey(0,0,e,r),a.scissorTest=!1,a.viewport=new Ey(0,0,e,r),a.texture=new Ty({width:e,height:r,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.isRenderTargetTexture=!0,a.texture.flipY=!1,a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a.samples=void 0!==i.samples?i.samples:0,a}return _createClass(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new ky(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Kg),My=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _createClass(n)}(Ty),Iy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _createClass(n)}(Ty),Ny=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=a}return _createClass(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,i=e._order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(a/2),h=s(n/2),f=s(r/2),d=s(a/2);switch(i){case"XYZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"YXZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"ZXY":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"ZYX":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"YZX":this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d;break;case"XZY":this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(a-u)*f,this._z=(i-r)*f}else if(n>o&&n>l){var d=2*Math.sqrt(1+n-o-l);this._w=(c-s)/d,this._x=.25*d,this._y=(r+i)/d,this._z=(a+u)/d}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(a-u)/p,this._x=(r+i)/p,this._y=.25*p,this._z=(s+c)/p}else{var m=2*Math.sqrt(1+l-n-o);this._w=(i-r)/m,this._x=(a+u)/m,this._y=(s+c)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Qg(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,a=e._z,i=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+i*o+r*u-a*s,this._y=r*c+i*s+a*o-n*u,this._z=a*c+i*u+n*s-r*o,this._w=i*c-n*o-r*s-a*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,a=this._z,i=this._w,o=i*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*i+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-t)*l)/c,f=Math.sin(t*l)/c;return this._w=i*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=a*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(a),n*Math.cos(a),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,a,i,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=a[i+0],f=a[i+1],d=a[i+2],p=a[i+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(l!==p||s!==h||u!==f||c!==d){var m=1-o,v=s*h+u*f+c*d+l*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(s=s*m+h*x,u=u*m+f*x,c=c*m+d*x,l=l*m+p*x,m===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,a,i){var o=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=a[i],h=a[i+1],f=a[i+2],d=a[i+3];return e[t]=o*d+c*l+s*f-u*h,e[t+1]=s*d+c*h+u*l-o*f,e[t+2]=u*d+c*f+o*h-s*l,e[t+3]=c*d-o*l-s*h-u*f,e}}]),t}(),Ry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return _createClass(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Oy.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Oy.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,u=s*t+i*r-o*n,c=s*n+o*t-a*r,l=s*r+a*n-i*t,h=-a*t-i*n-o*r;return this.x=u*s+h*-a+c*-o-l*-i,this.y=c*s+h*-i+l*-a-u*-o,this.z=l*s+h*-o+u*-i-c*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Dy.copy(this).projectOnVector(e),this.sub(Dy)}},{key:"reflect",value:function(e){return this.sub(Dy.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Qg(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Dy=new Ry,Oy=new Ny,Ly=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ry(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ry(-1/0,-1/0,-1/0);_classCallCheck(this,e),this.isBox3=!0,this.min=t,this.max=n}return _createClass(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>a&&(a=c),l>i&&(i=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>a&&(a=c),l>i&&(i=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Py.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,a=0,i=r.count;a<i;a++)Py.fromBufferAttribute(r,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Py);else null===n.boundingBox&&n.computeBoundingBox(),zy.copy(n.boundingBox),zy.applyMatrix4(e.matrixWorld),this.union(zy);for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Py),Py.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(jy),qy.subVectors(this.max,jy),By.subVectors(e.a,jy),Uy.subVectors(e.b,jy),Vy.subVectors(e.c,jy),Wy.subVectors(Uy,By),Gy.subVectors(Vy,Uy),Hy.subVectors(By,Vy);var t=[0,-Wy.z,Wy.y,0,-Gy.z,Gy.y,0,-Hy.z,Hy.y,Wy.z,0,-Wy.x,Gy.z,0,-Gy.x,Hy.z,0,-Hy.x,-Wy.y,Wy.x,0,-Gy.y,Gy.x,0,-Hy.y,Hy.x,0];return!!Zy(t,By,Uy,Vy,qy)&&(!!Zy(t=[1,0,0,0,1,0,0,0,1],By,Uy,Vy,qy)&&(Ky.crossVectors(Wy,Gy),Zy(t=[Ky.x,Ky.y,Ky.z],By,Uy,Vy,qy)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Py.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Py).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()?this:(Fy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fy),this)}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Fy=[new Ry,new Ry,new Ry,new Ry,new Ry,new Ry,new Ry,new Ry],Py=new Ry,zy=new Ly,By=new Ry,Uy=new Ry,Vy=new Ry,Wy=new Ry,Gy=new Ry,Hy=new Ry,jy=new Ry,qy=new Ry,Ky=new Ry,Xy=new Ry;function Zy(e,t,n,r,a){for(var i=0,o=e.length-3;i<=o;i+=3){Xy.fromArray(e,i);var s=a.x*Math.abs(Xy.x)+a.y*Math.abs(Xy.y)+a.z*Math.abs(Xy.z),u=t.dot(Xy),c=n.dot(Xy),l=r.dot(Xy);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}var Yy=new Ly,Jy=new Ry,$y=new Ry,Qy=new Ry,e_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ry,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,e),this.center=t,this.radius=n}return _createClass(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Yy.setFromPoints(e).getCenter(n);for(var r=0,a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Qy.subVectors(e,this.center);var t=Qy.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Qy.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?$y.set(0,0,1).multiplyScalar(e.radius):$y.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Jy.copy(e.center).add($y)),this.expandByPoint(Jy.copy(e.center).sub($y)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),t_=new Ry,n_=new Ry,r_=new Ry,a_=new Ry,i_=new Ry,o_=new Ry,s_=new Ry,u_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ry,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ry(0,0,-1);_classCallCheck(this,e),this.origin=t,this.direction=n}return _createClass(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,t_)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=t_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(t_.copy(this.direction).multiplyScalar(t).add(this.origin),t_.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){n_.copy(e).add(t).multiplyScalar(.5),r_.copy(t).sub(e).normalize(),a_.copy(this.origin).sub(n_);var a,i,o,s,u=.5*e.distanceTo(t),c=-this.direction.dot(r_),l=a_.dot(this.direction),h=-a_.dot(r_),f=a_.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(i=c*l-h,s=u*d,(a=c*h-l)>=0)if(i>=-s)if(i<=s){var p=1/d;o=(a*=p)*(a+c*(i*=p)+2*l)+i*(c*a+i+2*h)+f}else i=u,o=-(a=Math.max(0,-(c*i+l)))*a+i*(i+2*h)+f;else i=-u,o=-(a=Math.max(0,-(c*i+l)))*a+i*(i+2*h)+f;else i<=-s?o=-(a=Math.max(0,-(-c*u+l)))*a+(i=a>0?-u:Math.min(Math.max(-u,-h),u))*(i+2*h)+f:i<=s?(a=0,o=(i=Math.min(Math.max(-u,-h),u))*(i+2*h)+f):o=-(a=Math.max(0,-(c*u+l)))*a+(i=a>0?u:Math.min(Math.max(-u,-h),u))*(i+2*h)+f;else i=c>0?-u:u,o=-(a=Math.max(0,-(c*i+l)))*a+i*(i+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),r&&r.copy(r_).multiplyScalar(i).add(n_),o}},{key:"intersectSphere",value:function(e,t){t_.subVectors(e.center,this.origin);var n=t_.dot(this.direction),r=t_.dot(t_)-n*n,a=e.radius*e.radius;if(r>a)return null;var i=Math.sqrt(a-r),o=n-i,s=n+i;return o<0&&s<0?null:this.at(o<0?s:o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,a,i,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(a=(e.min.y-h.y)*c,i=(e.max.y-h.y)*c):(a=(e.max.y-h.y)*c,i=(e.min.y-h.y)*c),n>i||a>r?null:((a>n||n!=n)&&(n=a),(i<r||r!=r)&&(r=i),l>=0?(o=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(o=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,t_)}},{key:"intersectTriangle",value:function(e,t,n,r,a){i_.subVectors(t,e),o_.subVectors(n,e),s_.crossVectors(i_,o_);var i,o=this.direction.dot(s_);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}a_.subVectors(this.origin,e);var s=i*this.direction.dot(o_.crossVectors(a_,o_));if(s<0)return null;var u=i*this.direction.dot(i_.cross(a_));if(u<0)return null;if(s+u>o)return null;var c=-i*a_.dot(s_);return c<0?null:this.at(c/o,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),c_=function(){function e(){_classCallCheck(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return _createClass(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,u,c,l,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=a,v[5]=i,v[9]=o,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/l_.setFromMatrixColumn(e,0).length(),a=1/l_.setFromMatrixColumn(e,1).length(),i=1/l_.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(a),l=Math.sin(a);if("XYZ"===e.order){var h=i*c,f=i*l,d=o*c,p=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=i*s}else if("YXZ"===e.order){var m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m+y*o,t[4]=g*o-v,t[8]=i*u,t[1]=i*l,t[5]=i*c,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=i*s}else if("ZXY"===e.order){var _=s*c,b=s*l,x=u*c,w=u*l;t[0]=_-w*o,t[4]=-i*l,t[8]=x+b*o,t[1]=b+x*o,t[5]=i*c,t[9]=w-_*o,t[2]=-i*u,t[6]=o,t[10]=i*s}else if("ZYX"===e.order){var k=i*c,C=i*l,S=o*c,T=o*l;t[0]=s*c,t[4]=S*u-C,t[8]=k*u+T,t[1]=s*l,t[5]=T*u+k,t[9]=C*u-S,t[2]=-u,t[6]=o*s,t[10]=i*s}else if("YZX"===e.order){var E=i*s,A=i*u,M=o*s,I=o*u;t[0]=s*c,t[4]=I-E*l,t[8]=M*l+A,t[1]=l,t[5]=i*c,t[9]=-o*c,t[2]=-u*c,t[6]=A*l+M,t[10]=E-I*l}else if("XZY"===e.order){var N=i*s,R=i*u,D=o*s,O=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=N*l+O,t[5]=i*c,t[9]=R*l-D,t[2]=D*l-R,t[6]=o*c,t[10]=O*l+N}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(f_,e,d_)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return v_.subVectors(e,t),0===v_.lengthSq()&&(v_.z=1),v_.normalize(),p_.crossVectors(n,v_),0===p_.lengthSq()&&(1===Math.abs(n.z)?v_.x+=1e-4:v_.z+=1e-4,v_.normalize(),p_.crossVectors(n,v_)),p_.normalize(),m_.crossVectors(v_,p_),r[0]=p_.x,r[4]=m_.x,r[8]=v_.x,r[1]=p_.y,r[5]=m_.y,r[9]=v_.y,r[2]=p_.z,r[6]=m_.z,r[10]=v_.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],k=r[8],C=r[12],S=r[1],T=r[5],E=r[9],A=r[13],M=r[2],I=r[6],N=r[10],R=r[14],D=r[3],O=r[7],L=r[11],F=r[15];return a[0]=i*x+o*S+s*M+u*D,a[4]=i*w+o*T+s*I+u*O,a[8]=i*k+o*E+s*N+u*L,a[12]=i*C+o*A+s*R+u*F,a[1]=c*x+l*S+h*M+f*D,a[5]=c*w+l*T+h*I+f*O,a[9]=c*k+l*E+h*N+f*L,a[13]=c*C+l*A+h*R+f*F,a[2]=d*x+p*S+m*M+v*D,a[6]=d*w+p*T+m*I+v*O,a[10]=d*k+p*E+m*N+v*L,a[14]=d*C+p*A+m*R+v*F,a[3]=g*x+y*S+_*M+b*D,a[7]=g*w+y*T+_*I+b*O,a[11]=g*k+y*E+_*N+b*L,a[15]=g*C+y*A+_*R+b*F,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+a*s*l-r*u*l-a*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+a*i*h-r*i*f+r*u*c-a*s*c)+e[11]*(+t*u*l-t*o*f-a*i*l+n*i*f+a*o*c-n*u*c)+e[15]*(-r*o*c-t*s*l+t*o*h+r*i*l-n*i*h+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],v=e[15],g=l*m*u-p*h*u+p*s*f-o*m*f-l*s*v+o*h*v,y=d*h*u-c*m*u-d*s*f+i*m*f+c*s*v-i*h*v,_=c*p*u-d*l*u+d*o*f-i*p*f-c*o*v+i*l*v,b=d*l*s-c*p*s-d*o*h+i*p*h+c*o*m-i*l*m,x=t*g+n*y+r*_+a*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*h*a-l*m*a-p*r*f+n*m*f+l*r*v-n*h*v)*w,e[2]=(o*m*a-p*s*a+p*r*u-n*m*u-o*r*v+n*s*v)*w,e[3]=(l*s*a-o*h*a-l*r*u+n*h*u+o*r*f-n*s*f)*w,e[4]=y*w,e[5]=(c*m*a-d*h*a+d*r*f-t*m*f-c*r*v+t*h*v)*w,e[6]=(d*s*a-i*m*a-d*r*u+t*m*u+i*r*v-t*s*v)*w,e[7]=(i*h*a-c*s*a+c*r*u-t*h*u-i*r*f+t*s*f)*w,e[8]=_*w,e[9]=(d*l*a-c*p*a-d*n*f+t*p*f+c*n*v-t*l*v)*w,e[10]=(i*p*a-d*o*a+d*n*u-t*p*u-i*n*v+t*o*v)*w,e[11]=(c*o*a-i*l*a-c*n*u+t*l*u+i*n*f-t*o*f)*w,e[12]=b*w,e[13]=(c*p*r-d*l*r+d*n*h-t*p*h-c*n*m+t*l*m)*w,e[14]=(d*o*r-i*p*r-d*n*s+t*p*s+i*n*m-t*o*m)*w,e[15]=(i*l*r-c*o*r+c*n*s-t*l*s-i*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,o=e.y,s=e.z,u=a*i,c=a*o;return this.set(u*i+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*i,0,u*s-r*o,c*s+r*i,a*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,a=t._x,i=t._y,o=t._z,s=t._w,u=a+a,c=i+i,l=o+o,h=a*u,f=a*c,d=a*l,p=i*c,m=i*l,v=o*l,g=s*u,y=s*c,_=s*l,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*b,r[1]=(f+_)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(f-_)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,a=l_.set(r[0],r[1],r[2]).length(),i=l_.set(r[4],r[5],r[6]).length(),o=l_.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],h_.copy(this);var s=1/a,u=1/i,c=1/o;return h_.elements[0]*=s,h_.elements[1]*=s,h_.elements[2]*=s,h_.elements[4]*=u,h_.elements[5]*=u,h_.elements[6]*=u,h_.elements[8]*=c,h_.elements[9]*=c,h_.elements[10]*=c,t.setFromRotationMatrix(h_),n.x=a,n.y=i,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,a,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*a/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),l=-(i+a)/(i-a),h=-2*i*a/(i-a);return o[0]=2*a/(t-e),o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=s,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,a,i){var o=this.elements,s=1/(t-e),u=1/(n-r),c=1/(i-a),l=(t+e)*s,h=(n+r)*u,f=(i+a)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),l_=new Ry,h_=new c_,f_=new Ry(0,0,0),d_=new Ry(1,1,1),p_=new Ry,m_=new Ry,v_=new Ry,g_=new c_,y_=new Ny,__=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;_classCallCheck(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=a}return _createClass(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,a=r[0],i=r[4],o=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Qg(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Qg(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,a),this._z=0);break;case"ZXY":this._x=Math.asin(Qg(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-i,u)):(this._y=0,this._z=Math.atan2(s,a));break;case"ZYX":this._y=Math.asin(-Qg(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-i,u));break;case"YZX":this._z=Math.asin(Qg(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Qg(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return g_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(g_,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return y_.setFromEuler(this),this.setFromQuaternion(y_,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();__.DefaultOrder="XYZ",__.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var b_=function(){function e(){_classCallCheck(this,e),this.mask=1}return _createClass(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!=(this.mask&(1<<e|0))}}]),e}(),x_=0,w_=new Ry,k_=new Ny,C_=new c_,S_=new Ry,T_=new Ry,E_=new Ry,A_=new Ny,M_=new Ry(1,0,0),I_=new Ry(0,1,0),N_=new Ry(0,0,1),R_={type:"added"},D_={type:"removed"},O_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:x_++}),e.uuid=$g(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Ry,a=new __,i=new Ny,o=new Ry(1,1,1);return a._onChange((function(){i.setFromEuler(a,!1)})),i._onChange((function(){a.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(_assertThisInitialized(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new c_},normalMatrix:{value:new sy}}),e.matrix=new c_,e.matrixWorld=new c_,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new b_,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return _createClass(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return k_.setFromAxisAngle(e,t),this.quaternion.multiply(k_),this}},{key:"rotateOnWorldAxis",value:function(e,t){return k_.setFromAxisAngle(e,t),this.quaternion.premultiply(k_),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(M_,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(I_,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(N_,e)}},{key:"translateOnAxis",value:function(e,t){return w_.copy(e).applyQuaternion(this.quaternion),this.position.add(w_.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(M_,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(I_,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(N_,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(C_.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?S_.copy(e):S_.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),T_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?C_.lookAt(T_,S_,this.up):C_.lookAt(S_,T_,this.up),this.quaternion.setFromRotationMatrix(C_),r&&(C_.extractRotation(r.matrixWorld),k_.setFromRotationMatrix(C_),this.quaternion.premultiply(k_.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(R_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(D_)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(D_)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),C_.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),C_.multiply(e.parent.matrixWorld)),e.applyMatrix4(C_),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(T_,e,E_),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(T_,A_,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var o=i.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++)a(e.shapes,o[s]);else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],l=0,h=this.material.length;l<h;l++)c.push(a(e.materials,this.material[l]));r.material=c}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var d=0;d<this.animations.length;d++)r.animations.push(a(e.animations,this.animations[d]))}if(t){var p=w(e.geometries),m=w(e.materials),v=w(e.textures),g=w(e.images),y=w(e.shapes),_=w(e.skeletons),b=w(e.animations),x=w(e.nodes);p.length>0&&(n.geometries=p),m.length>0&&(n.materials=m),v.length>0&&(n.textures=v),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),_.length>0&&(n.skeletons=_),b.length>0&&(n.animations=b),x.length>0&&(n.nodes=x)}return n.object=r,n;function w(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}]),n}(Kg);O_.DefaultUp=new Ry(0,1,0),O_.DefaultMatrixAutoUpdate=!0;var L_=new Ry,F_=new Ry,P_=new Ry,z_=new Ry,B_=new Ry,U_=new Ry,V_=new Ry,W_=new Ry,G_=new Ry,H_=new Ry,j_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ry,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ry,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ry;_classCallCheck(this,e),this.a=t,this.b=n,this.c=r}return _createClass(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return L_.subVectors(this.c,this.b),F_.subVectors(this.a,this.b),.5*L_.cross(F_).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,a,i){return e.getUV(t,this.a,this.b,this.c,n,r,a,i)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,a=this.a,i=this.b,o=this.c;B_.subVectors(i,a),U_.subVectors(o,a),W_.subVectors(e,a);var s=B_.dot(W_),u=U_.dot(W_);if(s<=0&&u<=0)return t.copy(a);G_.subVectors(e,i);var c=B_.dot(G_),l=U_.dot(G_);if(c>=0&&l<=c)return t.copy(i);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(a).addScaledVector(B_,n);H_.subVectors(e,o);var f=B_.dot(H_),d=U_.dot(H_);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(a).addScaledVector(U_,r);var m=c*d-f*l;if(m<=0&&l-c>=0&&f-d>=0)return V_.subVectors(o,i),r=(l-c)/(l-c+(f-d)),t.copy(i).addScaledVector(V_,r);var v=1/(m+p+h);return n=p*v,r=h*v,t.copy(a).addScaledVector(B_,n).addScaledVector(U_,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),L_.subVectors(e,t),r.cross(L_);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,a){L_.subVectors(r,t),F_.subVectors(n,t),P_.subVectors(e,t);var i=L_.dot(L_),o=L_.dot(F_),s=L_.dot(P_),u=F_.dot(F_),c=F_.dot(P_),l=i*u-o*o;if(0===l)return a.set(-2,-1,-1);var h=1/l,f=(u*s-o*c)*h,d=(i*c-o*s)*h;return a.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,z_),z_.x>=0&&z_.y>=0&&z_.x+z_.y<=1}},{key:"getUV",value:function(e,t,n,r,a,i,o,s){return this.getBarycoord(e,t,n,r,z_),s.set(0,0),s.addScaledVector(a,z_.x),s.addScaledVector(i,z_.y),s.addScaledVector(o,z_.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return L_.subVectors(n,t),F_.subVectors(e,t),L_.cross(F_).dot(r)<0}}]),e}(),q_=0,K_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:q_++}),e.uuid=$g(),e.name="",e.type="Material",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=100,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _createClass(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=r(e.textures),i=r(e.images);a.length>0&&(n.textures=a),i.length>0&&(n.images=i)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Kg),X_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new xy(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(K_),Z_=new Ry,Y_=new oy,J_=function(){function e(t,n,r){if(_classCallCheck(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return _createClass(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new xy),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new oy),t[n++]=i.x,t[n++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Ry),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Ey),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Y_.fromBufferAttribute(this,t),Y_.applyMatrix3(e),this.setXY(t,Y_.x,Y_.y);else if(3===this.itemSize)for(var r=0,a=this.count;r<a;r++)Z_.fromBufferAttribute(this,r),Z_.applyMatrix3(e),this.setXYZ(r,Z_.x,Z_.y,Z_.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Z_.fromBufferAttribute(this,t),Z_.applyMatrix4(e),this.setXYZ(t,Z_.x,Z_.y,Z_.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Z_.fromBufferAttribute(this,t),Z_.applyNormalMatrix(e),this.setXYZ(t,Z_.x,Z_.y,Z_.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Z_.fromBufferAttribute(this,t),Z_.transformDirection(e),this.setXYZ(t,Z_.x,Z_.y,Z_.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}(),$_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){return _classCallCheck(this,n),t.call(this,new Uint16Array(e),r,a)}return _createClass(n)}(J_),Q_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){return _classCallCheck(this,n),t.call(this,new Uint32Array(e),r,a)}return _createClass(n)}(J_),eb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){return _classCallCheck(this,n),t.call(this,new Float32Array(e),r,a)}return _createClass(n)}(J_),tb=0,nb=new c_,rb=new O_,ab=new Ry,ib=new Ly,ob=new Ly,sb=new Ry,ub=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:tb++}),e.uuid=$g(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _createClass(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return this.index=Array.isArray(e)?new(uy(e)?Q_:$_)(e,1):e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new sy).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return nb.makeRotationFromQuaternion(e),this.applyMatrix4(nb),this}},{key:"rotateX",value:function(e){return nb.makeRotationX(e),this.applyMatrix4(nb),this}},{key:"rotateY",value:function(e){return nb.makeRotationY(e),this.applyMatrix4(nb),this}},{key:"rotateZ",value:function(e){return nb.makeRotationZ(e),this.applyMatrix4(nb),this}},{key:"translate",value:function(e,t,n){return nb.makeTranslation(e,t,n),this.applyMatrix4(nb),this}},{key:"scale",value:function(e,t,n){return nb.makeScale(e,t,n),this.applyMatrix4(nb),this}},{key:"lookAt",value:function(e){return rb.lookAt(e),rb.updateMatrix(),this.applyMatrix4(rb.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ab).negate(),this.translate(ab.x,ab.y,ab.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new eb(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ly);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ry(-1/0,-1/0,-1/0),new Ry(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++)ib.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(sb.addVectors(this.boundingBox.min,ib.min),this.boundingBox.expandByPoint(sb),sb.addVectors(this.boundingBox.max,ib.max),this.boundingBox.expandByPoint(sb)):(this.boundingBox.expandByPoint(ib.min),this.boundingBox.expandByPoint(ib.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new e_);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ry,1/0);if(e){var n=this.boundingSphere.center;if(ib.setFromBufferAttribute(e),t)for(var r=0,a=t.length;r<a;r++)ob.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(sb.addVectors(ib.min,ob.min),ib.expandByPoint(sb),sb.addVectors(ib.max,ob.max),ib.expandByPoint(sb)):(ib.expandByPoint(ob.min),ib.expandByPoint(ob.max));ib.getCenter(n);for(var i=0,o=0,s=e.count;o<s;o++)sb.fromBufferAttribute(e,o),i=Math.max(i,n.distanceToSquared(sb));if(t)for(var u=0,c=t.length;u<c;u++)for(var l=t[u],h=this.morphTargetsRelative,f=0,d=l.count;f<d;f++)sb.fromBufferAttribute(l,f),h&&(ab.fromBufferAttribute(e,f),sb.add(ab)),i=Math.max(i,n.distanceToSquared(sb));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,a=t.normal.array,i=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new J_(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,u=[],c=[],l=0;l<o;l++)u[l]=new Ry,c[l]=new Ry;var h=new Ry,f=new Ry,d=new Ry,p=new oy,m=new oy,v=new oy,g=new Ry,y=new Ry,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var b=0,x=_.length;b<x;++b)for(var w=_[b],k=w.start,C=k,S=k+w.count;C<S;C+=3)F(n[C+0],n[C+1],n[C+2]);for(var T=new Ry,E=new Ry,A=new Ry,M=new Ry,I=0,N=_.length;I<N;++I)for(var R=_[I],D=R.start,O=D,L=D+R.count;O<L;O+=3)P(n[O+0]),P(n[O+1]),P(n[O+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function F(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(i,2*e),m.fromArray(i,2*t),v.fromArray(i,2*n),f.sub(h),d.sub(h),m.sub(p),v.sub(p);var a=1/(m.x*v.y-v.x*m.y);isFinite(a)&&(g.copy(f).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(a),y.copy(d).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(a),u[e].add(g),u[t].add(g),u[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}function P(e){A.fromArray(a,3*e),M.copy(A);var t=u[e];T.copy(t),T.sub(A.multiplyScalar(A.dot(t))).normalize(),E.crossVectors(M,t);var n=E.dot(c[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new J_(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,a=n.count;r<a;r++)n.setXYZ(r,0,0,0);var i=new Ry,o=new Ry,s=new Ry,u=new Ry,c=new Ry,l=new Ry,h=new Ry,f=new Ry;if(e)for(var d=0,p=e.count;d<p;d+=3){var m=e.getX(d+0),v=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(i,o),h.cross(f),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,v),l.fromBufferAttribute(n,g),u.add(h),c.add(h),l.add(h),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(v,c.x,c.y,c.z),n.setXYZ(g,l.x,l.y,l.z)}else for(var y=0,_=t.count;y<_;y+=3)i.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(i,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r].array,i=e.attributes[r],o=i.array,s=i.itemSize*t,u=Math.min(o.length,a.length-s),c=0,l=s;c<u;c++,l++)a[l]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)sb.fromBufferAttribute(e,t),sb.normalize(),e.setXYZ(t,sb.x,sb.y,sb.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r),o=0,s=0,u=0,c=t.length;u<c;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var l=0;l<r;l++)i[s++]=n[o++]}return new J_(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,a=this.attributes;for(var i in a){var o=e(a[i],r);t.setAttribute(i,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],h=0,f=l.length;h<f;h++){var d=e(l[h],r);c.push(d)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,m=0,v=p.length;m<v;m++){var g=p[m];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(var i in a)e.data.attributes[i]=a[i].toJSON(e.data);var o={},s=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],l=[],h=0,f=c.length;h<f;h++)l.push(c[h].toJSON(e.data));l.length>0&&(o[u]=l,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var a in r)this.setAttribute(a,r[a].clone(t));var i=e.morphAttributes;for(var o in i){for(var s=[],u=i[o],c=0,l=u.length;c<l;c++)s.push(u[c].clone(t));this.morphAttributes[o]=s}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,d=h.length;f<d;f++){var p=h[f];this.addGroup(p.start,p.count,p.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var v=e.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Kg),cb=new c_,lb=new u_,hb=new e_,fb=new Ry,db=new Ry,pb=new Ry,mb=new Ry,vb=new Ry,gb=new Ry,yb=new Ry,_b=new Ry,bb=new Ry,xb=new oy,wb=new oy,kb=new oy,Cb=new Ry,Sb=new Ry,Tb=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ub,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X_;return _classCallCheck(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var i=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=r}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),hb.copy(n.boundingSphere),hb.applyMatrix4(a),!1!==e.ray.intersectsSphere(hb)&&(cb.copy(a).invert(),lb.copy(e.ray).applyMatrix4(cb),null===n.boundingBox||!1!==lb.intersectsBox(n.boundingBox)))){var i,o=n.index,s=n.attributes.position,u=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,h=n.attributes.uv2,f=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(r))for(var p=0,m=f.length;p<m;p++)for(var v=f[p],g=r[v.materialIndex],y=Math.max(v.start,d.start),_=Math.min(o.count,Math.min(v.start+v.count,d.start+d.count));y<_;y+=3){var b=o.getX(y),x=o.getX(y+1),w=o.getX(y+2);(i=Eb(this,g,e,lb,s,u,c,l,h,b,x,w))&&(i.faceIndex=Math.floor(y/3),i.face.materialIndex=v.materialIndex,t.push(i))}else for(var k=Math.max(0,d.start),C=Math.min(o.count,d.start+d.count);k<C;k+=3){var S=o.getX(k),T=o.getX(k+1),E=o.getX(k+2);(i=Eb(this,r,e,lb,s,u,c,l,h,S,T,E))&&(i.faceIndex=Math.floor(k/3),t.push(i))}else if(void 0!==s)if(Array.isArray(r))for(var A=0,M=f.length;A<M;A++)for(var I=f[A],N=r[I.materialIndex],R=Math.max(I.start,d.start),D=Math.min(s.count,Math.min(I.start+I.count,d.start+d.count));R<D;R+=3)(i=Eb(this,N,e,lb,s,u,c,l,h,R,R+1,R+2))&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=I.materialIndex,t.push(i));else for(var O=Math.max(0,d.start),L=Math.min(s.count,d.start+d.count);O<L;O+=3)(i=Eb(this,r,e,lb,s,u,c,l,h,O,O+1,O+2))&&(i.faceIndex=Math.floor(O/3),t.push(i))}}}]),n}(O_);function Eb(e,t,n,r,a,i,o,s,u,c,l,h){fb.fromBufferAttribute(a,c),db.fromBufferAttribute(a,l),pb.fromBufferAttribute(a,h);var f=e.morphTargetInfluences;if(i&&f){yb.set(0,0,0),_b.set(0,0,0),bb.set(0,0,0);for(var d=0,p=i.length;d<p;d++){var m=f[d],v=i[d];0!==m&&(mb.fromBufferAttribute(v,c),vb.fromBufferAttribute(v,l),gb.fromBufferAttribute(v,h),o?(yb.addScaledVector(mb,m),_b.addScaledVector(vb,m),bb.addScaledVector(gb,m)):(yb.addScaledVector(mb.sub(fb),m),_b.addScaledVector(vb.sub(db),m),bb.addScaledVector(gb.sub(pb),m)))}fb.add(yb),db.add(_b),pb.add(bb)}e.isSkinnedMesh&&(e.boneTransform(c,fb),e.boneTransform(l,db),e.boneTransform(h,pb));var g=function(e,t,n,r,a,i,o,s){if(null===(1===t.side?r.intersectTriangle(o,i,a,!0,s):r.intersectTriangle(a,i,o,2!==t.side,s)))return null;Sb.copy(s),Sb.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Sb);return u<n.near||u>n.far?null:{distance:u,point:Sb.clone(),object:e}}(e,t,n,r,fb,db,pb,Cb);if(g){s&&(xb.fromBufferAttribute(s,c),wb.fromBufferAttribute(s,l),kb.fromBufferAttribute(s,h),g.uv=j_.getUV(Cb,fb,db,pb,xb,wb,kb,new oy)),u&&(xb.fromBufferAttribute(u,c),wb.fromBufferAttribute(u,l),kb.fromBufferAttribute(u,h),g.uv2=j_.getUV(Cb,fb,db,pb,xb,wb,kb,new oy));var y={a:c,b:l,c:h,normal:new Ry,materialIndex:0};j_.getNormal(fb,db,pb,y.normal),g.face=y}return g}var Ab=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:a,depth:i,widthSegments:o,heightSegments:s,depthSegments:u};var c=_assertThisInitialized(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var l=[],h=[],f=[],d=[],p=0,m=0;function v(e,t,n,r,a,i,o,s,u,v,g){for(var y=i/u,_=o/v,b=i/2,x=o/2,w=s/2,k=u+1,C=v+1,S=0,T=0,E=new Ry,A=0;A<C;A++)for(var M=A*_-x,I=0;I<k;I++)E[e]=(I*y-b)*r,E[t]=M*a,E[n]=w,h.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,f.push(E.x,E.y,E.z),d.push(I/u),d.push(1-A/v),S+=1;for(var N=0;N<v;N++)for(var R=0;R<u;R++){var D=p+R+k*(N+1),O=p+(R+1)+k*(N+1),L=p+(R+1)+k*N;l.push(p+R+k*N,D,L),l.push(D,O,L),T+=6}c.addGroup(m,T,g),m+=T,p+=S}return v("z","y","x",-1,-1,i,a,r,u,s,0),v("z","y","x",1,-1,i,a,-r,u,s,1),v("x","z","y",1,1,r,i,a,o,u,2),v("x","z","y",1,-1,r,i,-a,o,u,3),v("x","y","z",1,-1,r,a,i,o,s,4),v("x","y","z",-1,-1,r,a,-i,o,s,5),e.setIndex(l),e.setAttribute("position",new eb(h,3)),e.setAttribute("normal",new eb(f,3)),e.setAttribute("uv",new eb(d,2)),e}return _createClass(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(ub);function Mb(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];t[n][r]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.clone():Array.isArray(a)?a.slice():a}return t}function Ib(e){for(var t={},n=0;n<e.length;n++){var r=Mb(e[n]);for(var a in r)t[a]=r[a]}return t}var Nb={clone:Mb,merge:Ib},Rb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mb(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[r].value;t.uniforms[r]=a&&a.isTexture?{type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}]),n}(K_),Db=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new c_,e.projectionMatrix=new c_,e.projectionMatrixInverse=new c_,e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){_get2(_getPrototypeOf(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){_get2(_getPrototypeOf(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(O_),Ob=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=i,e.far=o,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Jg*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Yg*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Jg*Math.atan(Math.tan(.5*Yg*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Yg*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,i=this.view;if(null!==this.view&&this.view.enabled){var o=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/o,t-=i.offsetY*n/s,r*=i.width/o,n*=i.height/s}var u=this.filmOffset;0!==u&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Db),Lb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;if(_classCallCheck(this,n),(i=t.call(this)).type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return _possibleConstructorReturn(i,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));i.renderTarget=a;var o=new Ob(90,1,e,r);o.layers=i.layers,o.up.set(0,-1,0),o.lookAt(new Ry(1,0,0)),i.add(o);var s=new Ob(90,1,e,r);s.layers=i.layers,s.up.set(0,-1,0),s.lookAt(new Ry(-1,0,0)),i.add(s);var u=new Ob(90,1,e,r);u.layers=i.layers,u.up.set(0,0,1),u.lookAt(new Ry(0,1,0)),i.add(u);var c=new Ob(90,1,e,r);c.layers=i.layers,c.up.set(0,0,-1),c.lookAt(new Ry(0,-1,0)),i.add(c);var l=new Ob(90,1,e,r);l.layers=i.layers,l.up.set(0,-1,0),l.lookAt(new Ry(0,0,1)),i.add(l);var h=new Ob(90,1,e,r);return h.layers=i.layers,h.up.set(0,-1,0),h.lookAt(new Ry(0,0,-1)),i.add(h),_possibleConstructorReturn(i)}return _createClass(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=_slicedToArray(this.children,6),a=r[0],i=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=e.getRenderTarget(),h=e.toneMapping,f=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(l),e.toneMapping=h,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(O_),Fb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,c,l,h){var f;return _classCallCheck(this,n),(f=t.call(this,e=void 0!==e?e:[],r=void 0!==r?r:301,a,i,o,s,u,c,l,h)).isCubeTexture=!0,f.flipY=!1,f}return _createClass(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Ty),Pb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),(r=t.call(this,e,e,a)).isWebGLCubeRenderTarget=!0;var i={width:e,height:e,depth:1};return r.texture=new Fb([i,i,i,i,i,i],a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,r.texture.minFilter=void 0!==a.minFilter?a.minFilter:1006,r}return _createClass(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new Ab(5,5,5),r=new Rb({name:"CubemapFromEquirect",uniforms:Mb({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});r.uniforms.tEquirect.value=t;var a=new Tb(n,r),i=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new Lb(1,10,this).update(e,a),t.minFilter=i,a.geometry.dispose(),a.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var a=e.getRenderTarget(),i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}]),n}(Ay),zb=new Ry,Bb=new Ry,Ub=new sy,Vb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ry(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return _createClass(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=zb.subVectors(n,t).cross(Bb.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(zb),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Ub.getNormalMatrix(e),r=this.coplanarPoint(zb).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Wb=new e_,Gb=new Ry,Hb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vb,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vb,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vb,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Vb,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Vb,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Vb;_classCallCheck(this,e),this.planes=[t,n,r,a,i,o]}return _createClass(e,[{key:"set",value:function(e,t,n,r,a,i){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(i),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,l-s,p-h,y-m).normalize(),t[1].setComponents(o+r,l+s,p+h,y+m).normalize(),t[2].setComponents(o+a,l+u,p+f,y+v).normalize(),t[3].setComponents(o-a,l-u,p-f,y-v).normalize(),t[4].setComponents(o-i,l-c,p-d,y-g).normalize(),t[5].setComponents(o+i,l+c,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Wb.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Wb)}},{key:"intersectsSprite",value:function(e){return Wb.center.set(0,0,0),Wb.radius=.7071067811865476,Wb.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wb)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++)if(t[a].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Gb.x=r.normal.x>0?e.max.x:e.min.x,Gb.y=r.normal.y>0?e.max.y:e.min.y,Gb.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Gb)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function jb(){var e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function qb(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,a){if(t.isGLBufferAttribute){var i=r.get(t);(!i||i.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var a,i=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,a)):o.version<t.version&&(function(t,r,a){var i=r.array,o=r.updateRange;e.bindBuffer(a,t),-1===o.count?e.bufferSubData(a,0,i):(n?e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,a),o.version=t.version)}}}}var Kb=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:a,widthSegments:i,heightSegments:o};for(var s=r/2,u=a/2,c=Math.floor(i),l=Math.floor(o),h=c+1,f=l+1,d=r/c,p=a/l,m=[],v=[],g=[],y=[],_=0;_<f;_++)for(var b=_*p-u,x=0;x<h;x++)v.push(x*d-s,-b,0),g.push(0,0,1),y.push(x/c),y.push(1-_/l);for(var w=0;w<l;w++)for(var k=0;k<c;k++){var C=k+h*(w+1),S=k+1+h*(w+1),T=k+1+h*w;m.push(k+h*w,C,T),m.push(C,S,T)}return e.setIndex(m),e.setAttribute("position",new eb(v,3)),e.setAttribute("normal",new eb(g,3)),e.setAttribute("uv",new eb(y,2)),e}return _createClass(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(ub),Xb={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Zb={common:{diffuse:{value:new xy(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new sy},uv2Transform:{value:new sy},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new oy(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xy(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xy(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new sy}},sprite:{diffuse:{value:new xy(16777215)},opacity:{value:1},center:{value:new oy(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new sy}}},Yb={basic:{uniforms:Ib([Zb.common,Zb.specularmap,Zb.envmap,Zb.aomap,Zb.lightmap,Zb.fog]),vertexShader:Xb.meshbasic_vert,fragmentShader:Xb.meshbasic_frag},lambert:{uniforms:Ib([Zb.common,Zb.specularmap,Zb.envmap,Zb.aomap,Zb.lightmap,Zb.emissivemap,Zb.fog,Zb.lights,{emissive:{value:new xy(0)}}]),vertexShader:Xb.meshlambert_vert,fragmentShader:Xb.meshlambert_frag},phong:{uniforms:Ib([Zb.common,Zb.specularmap,Zb.envmap,Zb.aomap,Zb.lightmap,Zb.emissivemap,Zb.bumpmap,Zb.normalmap,Zb.displacementmap,Zb.fog,Zb.lights,{emissive:{value:new xy(0)},specular:{value:new xy(1118481)},shininess:{value:30}}]),vertexShader:Xb.meshphong_vert,fragmentShader:Xb.meshphong_frag},standard:{uniforms:Ib([Zb.common,Zb.envmap,Zb.aomap,Zb.lightmap,Zb.emissivemap,Zb.bumpmap,Zb.normalmap,Zb.displacementmap,Zb.roughnessmap,Zb.metalnessmap,Zb.fog,Zb.lights,{emissive:{value:new xy(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xb.meshphysical_vert,fragmentShader:Xb.meshphysical_frag},toon:{uniforms:Ib([Zb.common,Zb.aomap,Zb.lightmap,Zb.emissivemap,Zb.bumpmap,Zb.normalmap,Zb.displacementmap,Zb.gradientmap,Zb.fog,Zb.lights,{emissive:{value:new xy(0)}}]),vertexShader:Xb.meshtoon_vert,fragmentShader:Xb.meshtoon_frag},matcap:{uniforms:Ib([Zb.common,Zb.bumpmap,Zb.normalmap,Zb.displacementmap,Zb.fog,{matcap:{value:null}}]),vertexShader:Xb.meshmatcap_vert,fragmentShader:Xb.meshmatcap_frag},points:{uniforms:Ib([Zb.points,Zb.fog]),vertexShader:Xb.points_vert,fragmentShader:Xb.points_frag},dashed:{uniforms:Ib([Zb.common,Zb.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xb.linedashed_vert,fragmentShader:Xb.linedashed_frag},depth:{uniforms:Ib([Zb.common,Zb.displacementmap]),vertexShader:Xb.depth_vert,fragmentShader:Xb.depth_frag},normal:{uniforms:Ib([Zb.common,Zb.bumpmap,Zb.normalmap,Zb.displacementmap,{opacity:{value:1}}]),vertexShader:Xb.meshnormal_vert,fragmentShader:Xb.meshnormal_frag},sprite:{uniforms:Ib([Zb.sprite,Zb.fog]),vertexShader:Xb.sprite_vert,fragmentShader:Xb.sprite_frag},background:{uniforms:{uvTransform:{value:new sy},t2D:{value:null}},vertexShader:Xb.background_vert,fragmentShader:Xb.background_frag},cube:{uniforms:Ib([Zb.envmap,{opacity:{value:1}}]),vertexShader:Xb.cube_vert,fragmentShader:Xb.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xb.equirect_vert,fragmentShader:Xb.equirect_frag},distanceRGBA:{uniforms:Ib([Zb.common,Zb.displacementmap,{referencePosition:{value:new Ry},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xb.distanceRGBA_vert,fragmentShader:Xb.distanceRGBA_frag},shadow:{uniforms:Ib([Zb.lights,Zb.fog,{color:{value:new xy(0)},opacity:{value:1}}]),vertexShader:Xb.shadow_vert,fragmentShader:Xb.shadow_frag}};function Jb(e,t,n,r,a,i){var o,s,u=new xy(0),c=!0===a?0:1,l=null,h=0,f=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),d(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){d(u,c=e)},render:function(n,a){var i=!1,p=!0===a.isScene?a.background:null;p&&p.isTexture&&(p=t.get(p));var m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(p=null),null===p?d(u,c):p&&p.isColor&&(d(p,1),i=!0),(e.autoClear||i)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===s&&((s=new Tb(new Ab(1,1,1),new Rb({name:"BackgroundCubeMaterial",uniforms:Mb(Yb.cube.uniforms),vertexShader:Yb.cube.vertexShader,fragmentShader:Yb.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l===p&&h===p.version&&f===e.toneMapping||(s.material.needsUpdate=!0,l=p,h=p.version,f=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===o&&((o=new Tb(new Kb(2,2),new Rb({name:"BackgroundMaterial",uniforms:Mb(Yb.background.uniforms),vertexShader:Yb.background.vertexShader,fragmentShader:Yb.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&h===p.version&&f===e.toneMapping||(o.material.needsUpdate=!0,l=p,h=p.version,f=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function $b(e,t,n,r){var a=e.getParameter(34921),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,s={},u=d(null),c=u,l=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function f(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],r=[],i=0;i<a;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=c.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function m(e){v(e,0)}function v(n,a){var i=c.enabledAttributes,o=c.attributeDivisors;c.newAttributes[n]=1,0===i[n]&&(e.enableVertexAttribArray(n),i[n]=1),o[n]!==a&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),o[n]=a)}function g(){for(var t=c.newAttributes,n=c.enabledAttributes,r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,a,i,o,s){!0!==r.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,i,o,s):e.vertexAttribIPointer(t,n,a,o,s)}function _(){b(),l=!0,c!==u&&h((c=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(a,u,f,_,b){var x=!1;if(o){var w=function(t,n,a){var o=!0===a.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var c=u[n.id];void 0===c&&(c={},u[n.id]=c);var l=c[o];return void 0===l&&(l=d(r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),c[o]=l),l}(_,f,u);c!==w&&h((c=w).object),(x=function(e,t,n,r){var a=c.attributes,i=t.attributes,o=0,s=n.getAttributes();for(var u in s)if(s[u].location>=0){var l=a[u],h=i[u];if(void 0===h&&("instanceMatrix"===u&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(h=e.instanceColor)),void 0===l)return!0;if(l.attribute!==h)return!0;if(h&&l.data!==h.data)return!0;o++}return c.attributesNum!==o||c.index!==r}(a,_,f,b))&&function(e,t,n,r){var a={},i=t.attributes,o=0,s=n.getAttributes();for(var u in s)if(s[u].location>=0){var l=i[u];void 0===l&&("instanceMatrix"===u&&e.instanceMatrix&&(l=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(l=e.instanceColor));var h={};h.attribute=l,l&&l.data&&(h.data=l.data),a[u]=h,o++}c.attributes=a,c.attributesNum=o,c.index=r}(a,_,f,b)}else{var k=!0===u.wireframe;c.geometry===_.id&&c.program===f.id&&c.wireframe===k||(c.geometry=_.id,c.program=f.id,c.wireframe=k,x=!0)}null!==b&&n.update(b,34963),(x||l)&&(l=!1,function(a,i,o,s){if(!1!==r.isWebGL2||!a.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){p();var u=s.attributes,c=o.getAttributes(),l=i.defaultAttributeValues;for(var h in c){var f=c[h];if(f.location>=0){var d=u[h];if(void 0===d&&("instanceMatrix"===h&&a.instanceMatrix&&(d=a.instanceMatrix),"instanceColor"===h&&a.instanceColor&&(d=a.instanceColor)),void 0!==d){var _=d.normalized,b=d.itemSize,x=n.get(d);if(void 0===x)continue;var w=x.buffer,k=x.type,C=x.bytesPerElement;if(d.isInterleavedBufferAttribute){var S=d.data,T=S.stride,E=d.offset;if(S.isInstancedInterleavedBuffer){for(var A=0;A<f.locationSize;A++)v(f.location+A,S.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=S.meshPerAttribute*S.count)}else for(var M=0;M<f.locationSize;M++)m(f.location+M);e.bindBuffer(34962,w);for(var I=0;I<f.locationSize;I++)y(f.location+I,b/f.locationSize,k,_,T*C,(E+b/f.locationSize*I)*C)}else{if(d.isInstancedBufferAttribute){for(var N=0;N<f.locationSize;N++)v(f.location+N,d.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var R=0;R<f.locationSize;R++)m(f.location+R);e.bindBuffer(34962,w);for(var D=0;D<f.locationSize;D++)y(f.location+D,b/f.locationSize,k,_,b*C,b/f.locationSize*D*C)}}else if(void 0!==l){var O=l[h];if(void 0!==O)switch(O.length){case 2:e.vertexAttrib2fv(f.location,O);break;case 3:e.vertexAttrib3fv(f.location,O);break;case 4:e.vertexAttrib4fv(f.location,O);break;default:e.vertexAttrib1fv(f.location,O)}}}}g()}}(a,u,f,_),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){for(var e in _(),s){var t=s[e];for(var n in t){var r=t[n];for(var a in r)f(r[a].object),delete r[a];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var a in r)f(r[a].object),delete r[a];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var a in r)f(r[a].object),delete r[a];delete n[e.id]}}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}function Qb(e,t,n,r){var a,i=r.isWebGL2;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,c;if(i)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](a,r,o,s),n.update(o,a,s)}}}function ex(e,t,n){var r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var i="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=i||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=h>0,_=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:i?e.getParameter(36183):0}}function tx(e){var t=this,n=null,r=0,a=!1,i=!1,o=new Vb,s=new sy,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,a){var i=null!==e?e.length:0,c=null;if(0!==i){if(c=u.value,!0!==a||null===c){var l=r+4*i,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,d=r;f!==i;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(c,d),c[d+3]=o.constant}u.value=c,u.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var o=0!==e.length||t||0!==r||a;return a=t,n=l(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,c()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!a||null===h||0===h.length||i&&!d)i?l(null):c();else{var m=i?0:r,v=4*m,g=p.clippingState||null;u.value=g,g=l(h,o,v,s);for(var y=0;y!==v;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=m}}}function nx(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping;if(303===i||304===i){if(t.has(a))return n(t.get(a).texture,a.mapping);var o=a.image;if(o&&o.height>0){var s=new Pb(o.height/2);return s.fromEquirectangularTexture(e,a),t.set(a,s),a.addEventListener("dispose",r),n(s.texture,a.mapping)}return null}}return a},dispose:function(){t=new WeakMap}}}Yb.physical={uniforms:Ib([Yb.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new oy(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new xy(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new oy},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new xy(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new xy(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Xb.meshphysical_vert,fragmentShader:Xb.meshphysical_frag};var rx=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=a,e.top=i,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,i=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i=(a+=u*this.view.offsetX)+u*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(a,i,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Db),ax=[.125,.215,.35,.446,.526,.582],ix=new rx,ox=new xy,sx=null,ux=(1+Math.sqrt(5))/2,cx=1/ux,lx=[new Ry(1,1,1),new Ry(-1,1,1),new Ry(1,1,-1),new Ry(-1,1,-1),new Ry(0,ux,cx),new Ry(0,ux,-cx),new Ry(cx,0,ux),new Ry(-cx,0,ux),new Ry(ux,cx,0),new Ry(-ux,cx,0)],hx=function(){function e(t){_classCallCheck(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return _createClass(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;sx=this._renderer.getRenderTarget(),this._setSize(256);var a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=mx(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=px(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(sx),e.scissorTest=!1,dx(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),sx=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},r=fx(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){var a;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fx(e,t,n);var i=this._lodMax;a=function(e){for(var t=[],n=[],r=[],a=e,i=e-4+1+ax.length,o=0;o<i;o++){var s=Math.pow(2,a);n.push(s);var u=1/s;o>e-4?u=ax[o-e+4-1]:0===o&&(u=0),r.push(u);for(var c=1/(s-2),l=-c,h=1+c,f=[l,l,h,l,h,h,l,l,h,h,l,h],d=new Float32Array(108),p=new Float32Array(72),m=new Float32Array(36),v=0;v<6;v++){var g=v%3*2/3-1,y=v>2?0:-1;d.set([g,y,0,g+2/3,y,0,g+2/3,y+1,0,g,y,0,g+2/3,y+1,0,g,y+1,0],18*v),p.set(f,12*v),m.set([v,v,v,v,v,v],6*v)}var _=new ub;_.setAttribute("position",new J_(d,3)),_.setAttribute("uv",new J_(p,2)),_.setAttribute("faceIndex",new J_(m,1)),t.push(_),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i),this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(20),a=new Ry(0,1,0);return new Rb({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new Tb(this._lodPlanes[0],e);this._renderer.compile(t,ix)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var a=new Ob(90,1,t,n),i=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,c=s.toneMapping;s.getClearColor(ox),s.toneMapping=0,s.autoClear=!1;var l=new X_({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Tb(new Ab,l),f=!1,d=e.background;d?d.isColor&&(l.color.copy(d),e.background=null,f=!0):(l.color.copy(ox),f=!0);for(var p=0;p<6;p++){var m=p%3;0===m?(a.up.set(0,i[p],0),a.lookAt(o[p],0,0)):1===m?(a.up.set(0,0,i[p]),a.lookAt(0,o[p],0)):(a.up.set(0,i[p],0),a.lookAt(0,0,o[p]));var v=this._cubeSize;dx(r,m*v,p>2?v:0,v,v),s.setRenderTarget(r),f&&s.render(h,a),s.render(e,a)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=mx()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=px());var a=r?this._cubemapMaterial:this._equirectMaterial,i=new Tb(this._lodPlanes[0],a);a.uniforms.envMap.value=e;var o=this._cubeSize;dx(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(i,ix)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,a,lx[(r-1)%lx.length])}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,a){var i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",a),this._halfBlur(i,e,n,n,r,"longitudinal",a)}},{key:"_halfBlur",value:function(e,t,n,r,a,i,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new Tb(this._lodPlanes[r],u),l=u.uniforms,h=this._sizeLods[n]-1,f=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,d=a/f,p=isFinite(a)?1+Math.floor(3*d):20;p>20&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to 20"));for(var m=[],v=0,g=0;g<20;++g){var y=g/d,_=Math.exp(-y*y/2);m.push(_),0===g?v+=_:g<p&&(v+=2*_)}for(var b=0;b<m.length;b++)m[b]=m[b]/v;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=m,l.latitudinal.value="latitudinal"===i,o&&(l.poleAxis.value=o);var x=this._lodMax;l.dTheta.value=f,l.mipInt.value=x-n;var w=this._sizeLods[r];dx(t,3*w*(r>x-4?r-x+4:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(c,ix)}}]),e}();function fx(e,t,n){var r=new Ay(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function dx(e,t,n,r,a){e.viewport.set(t,n,r,a),e.scissor.set(t,n,r,a)}function px(){return new Rb({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mx(){return new Rb({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function vx(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){var i=a.mapping,o=303===i||304===i,s=301===i||302===i;if(o||s){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;var u=t.get(a);return null===n&&(n=new hx(e)),u=o?n.fromEquirectangular(a,u):n.fromCubemap(a,u),t.set(a,u),u.texture}if(t.has(a))return t.get(a).texture;var c=a.image;if(o&&c&&c.height>0||s&&c&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(c)){null===n&&(n=new hx(e));var l=o?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,l),a.addEventListener("dispose",r),l.texture}return null}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gx(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function yx(e,t,n,r){var a={},i=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete a[s.id];var c=i.get(s);c&&(t.remove(c),i.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,a=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],h=s[u+1],f=s[u+2];n.push(l,h,h,f,f,l)}}else{o=a.version;for(var d=0,p=a.array.length/3-1;d<p;d+=3){var m=d+0,v=d+1,g=d+2;n.push(m,v,v,g,g,m)}}var y=new(uy(n)?Q_:$_)(n,1);y.version=o;var _=i.get(e);_&&t.remove(_),i.set(e,y)}return{get:function(e,t){return!0===a[t.id]?t:(t.addEventListener("dispose",o),a[t.id]=!0,n.memory.geometries++,t)},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return i.get(e)}}}function _x(e,t,n,r){var a,i,o,s=r.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,i,t*o),n.update(r,a,1)},this.renderInstances=function(r,u,c){if(0!==c){var l,h;if(s)l=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](a,u,i,r*o,c),n.update(u,a,c)}}}function bx(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function xx(e,t){return e[0]-t[0]}function wx(e,t){return Math.abs(t[1])-Math.abs(e[1])}function kx(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Cx(e,t,n){for(var r={},a=new Float32Array(8),i=new WeakMap,o=new Ey,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,c,l,h){var f=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0,m=i.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();var v=void 0!==c.morphAttributes.position,g=void 0!==c.morphAttributes.normal,y=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],x=c.morphAttributes.color||[],w=0;!0===v&&(w=1),!0===g&&(w=2),!0===y&&(w=3);var k=c.attributes.position.count*w,C=1;k>t.maxTextureSize&&(C=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);var S=new Float32Array(k*C*4*p),T=new My(S,k,C,p);T.type=1015,T.needsUpdate=!0;for(var E=4*w,A=0;A<p;A++)for(var M=_[A],I=b[A],N=x[A],R=k*C*4*A,D=0;D<M.count;D++){var O=D*E;!0===v&&(o.fromBufferAttribute(M,D),!0===M.normalized&&kx(o,M),S[R+O+0]=o.x,S[R+O+1]=o.y,S[R+O+2]=o.z,S[R+O+3]=0),!0===g&&(o.fromBufferAttribute(I,D),!0===I.normalized&&kx(o,I),S[R+O+4]=o.x,S[R+O+5]=o.y,S[R+O+6]=o.z,S[R+O+7]=0),!0===y&&(o.fromBufferAttribute(N,D),!0===N.normalized&&kx(o,N),S[R+O+8]=o.x,S[R+O+9]=o.y,S[R+O+10]=o.z,S[R+O+11]=4===N.itemSize?o.w:1)}m={count:p,texture:T,size:new oy(k,C)},i.set(c,m),c.addEventListener("dispose",(function e(){T.dispose(),i.delete(c),c.removeEventListener("dispose",e)}))}for(var L=0,F=0;F<f.length;F++)L+=f[F];var P=c.morphTargetsRelative?1:1-L;h.getUniforms().setValue(e,"morphTargetBaseInfluence",P),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{var z=void 0===f?0:f.length,B=r[c.id];if(void 0===B||B.length!==z){B=[];for(var U=0;U<z;U++)B[U]=[U,0];r[c.id]=B}for(var V=0;V<z;V++){var W=B[V];W[0]=V,W[1]=f[V]}B.sort(wx);for(var G=0;G<8;G++)G<z&&B[G][1]?(s[G][0]=B[G][0],s[G][1]=B[G][1]):(s[G][0]=Number.MAX_SAFE_INTEGER,s[G][1]=0);s.sort(xx);for(var H=c.morphAttributes.position,j=c.morphAttributes.normal,q=0,K=0;K<8;K++){var X=s[K],Z=X[0],Y=X[1];Z!==Number.MAX_SAFE_INTEGER&&Y?(H&&c.getAttribute("morphTarget"+K)!==H[Z]&&c.setAttribute("morphTarget"+K,H[Z]),j&&c.getAttribute("morphNormal"+K)!==j[Z]&&c.setAttribute("morphNormal"+K,j[Z]),a[K]=Y,q+=Y):(H&&!0===c.hasAttribute("morphTarget"+K)&&c.deleteAttribute("morphTarget"+K),j&&!0===c.hasAttribute("morphNormal"+K)&&c.deleteAttribute("morphNormal"+K),a[K]=0)}var J=c.morphTargetsRelative?1:1-q;h.getUniforms().setValue(e,"morphTargetBaseInfluence",J),h.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function Sx(e,t,n,r){var a=new WeakMap;function i(e){var t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=t.get(e,e.geometry);return a.get(s)!==o&&(t.update(s),a.set(s,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){a=new WeakMap}}}var Tx=new Ty,Ex=new My,Ax=new Iy,Mx=new Fb,Ix=[],Nx=[],Rx=new Float32Array(16),Dx=new Float32Array(9),Ox=new Float32Array(4);function Lx(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,i=Ix[a];if(void 0===i&&(i=new Float32Array(a),Ix[a]=i),0!==t){r.toArray(i,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(i,s)}return i}function Fx(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Px(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function zx(e,t){var n=Nx[t];void 0===n&&(n=new Int32Array(t),Nx[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Bx(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ux(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fx(n,t))return;e.uniform2fv(this.addr,t),Px(n,t)}}function Vx(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Fx(n,t))return;e.uniform3fv(this.addr,t),Px(n,t)}}function Wx(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fx(n,t))return;e.uniform4fv(this.addr,t),Px(n,t)}}function Gx(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fx(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Px(n,t)}else{if(Fx(n,r))return;Ox.set(r),e.uniformMatrix2fv(this.addr,!1,Ox),Px(n,r)}}function Hx(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fx(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Px(n,t)}else{if(Fx(n,r))return;Dx.set(r),e.uniformMatrix3fv(this.addr,!1,Dx),Px(n,r)}}function jx(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fx(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Px(n,t)}else{if(Fx(n,r))return;Rx.set(r),e.uniformMatrix4fv(this.addr,!1,Rx),Px(n,r)}}function qx(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Kx(e,t){var n=this.cache;Fx(n,t)||(e.uniform2iv(this.addr,t),Px(n,t))}function Xx(e,t){var n=this.cache;Fx(n,t)||(e.uniform3iv(this.addr,t),Px(n,t))}function Zx(e,t){var n=this.cache;Fx(n,t)||(e.uniform4iv(this.addr,t),Px(n,t))}function Yx(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Jx(e,t){var n=this.cache;Fx(n,t)||(e.uniform2uiv(this.addr,t),Px(n,t))}function $x(e,t){var n=this.cache;Fx(n,t)||(e.uniform3uiv(this.addr,t),Px(n,t))}function Qx(e,t){var n=this.cache;Fx(n,t)||(e.uniform4uiv(this.addr,t),Px(n,t))}function ew(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2D(t||Tx,a)}function tw(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||Ax,a)}function nw(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(t||Mx,a)}function rw(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||Ex,a)}function aw(e,t){e.uniform1fv(this.addr,t)}function iw(e,t){var n=Lx(t,this.size,2);e.uniform2fv(this.addr,n)}function ow(e,t){var n=Lx(t,this.size,3);e.uniform3fv(this.addr,n)}function sw(e,t){var n=Lx(t,this.size,4);e.uniform4fv(this.addr,n)}function uw(e,t){var n=Lx(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cw(e,t){var n=Lx(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function lw(e,t){var n=Lx(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function hw(e,t){e.uniform1iv(this.addr,t)}function fw(e,t){e.uniform2iv(this.addr,t)}function dw(e,t){e.uniform3iv(this.addr,t)}function pw(e,t){e.uniform4iv(this.addr,t)}function mw(e,t){e.uniform1uiv(this.addr,t)}function vw(e,t){e.uniform2uiv(this.addr,t)}function gw(e,t){e.uniform3uiv(this.addr,t)}function yw(e,t){e.uniform4uiv(this.addr,t)}function _w(e,t,n){var r=t.length,a=zx(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture2D(t[i]||Tx,a[i])}function bw(e,t,n){var r=t.length,a=zx(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture3D(t[i]||Ax,a[i])}function xw(e,t,n){var r=t.length,a=zx(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTextureCube(t[i]||Mx,a[i])}function ww(e,t,n){var r=t.length,a=zx(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.setTexture2DArray(t[i]||Ex,a[i])}var kw=_createClass((function e(t,n,r){_classCallCheck(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Bx;case 35664:return Ux;case 35665:return Vx;case 35666:return Wx;case 35674:return Gx;case 35675:return Hx;case 35676:return jx;case 5124:case 35670:return qx;case 35667:case 35671:return Kx;case 35668:case 35672:return Xx;case 35669:case 35673:return Zx;case 5125:return Yx;case 36294:return Jx;case 36295:return $x;case 36296:return Qx;case 35678:case 36198:case 36298:case 36306:case 35682:return ew;case 35679:case 36299:case 36307:return tw;case 35680:case 36300:case 36308:case 36293:return nw;case 36289:case 36303:case 36311:case 36292:return rw}}(n.type)})),Cw=_createClass((function e(t,n,r){_classCallCheck(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return aw;case 35664:return iw;case 35665:return ow;case 35666:return sw;case 35674:return uw;case 35675:return cw;case 35676:return lw;case 5124:case 35670:return hw;case 35667:case 35671:return fw;case 35668:case 35672:return dw;case 35669:case 35673:return pw;case 5125:return mw;case 36294:return vw;case 36295:return gw;case 36296:return yw;case 35678:case 36198:case 36298:case 36306:case 35682:return _w;case 35679:case 36299:case 36307:return bw;case 35680:case 36300:case 36308:case 36293:return xw;case 36289:case 36303:case 36311:case 36292:return ww}}(n.type)})),Sw=function(){function e(t){_classCallCheck(this,e),this.id=t,this.seq=[],this.map={}}return _createClass(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,a=0,i=r.length;a!==i;++a){var o=r[a];o.setValue(e,t[o.id],n)}}}]),e}(),Tw=/(\w+)(\])?(\[|\.)?/g;function Ew(e,t){e.seq.push(t),e.map[t.id]=t}function Aw(e,t,n){var r=e.name,a=r.length;for(Tw.lastIndex=0;;){var i=Tw.exec(r),o=Tw.lastIndex,s=i[1],u=i[3];if("]"===i[2]&&(s|=0),void 0===u||"["===u&&o+2===a){Ew(n,void 0===u?new kw(s,e,t):new Cw(s,e,t));break}var c=n.map[s];void 0===c&&Ew(n,c=new Sw(s)),n=c}}var Mw=function(){function e(t,n){_classCallCheck(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),a=0;a<r;++a){var i=t.getActiveUniform(n,a);Aw(i,t.getUniformLocation(n,i.name),this)}}return _createClass(e,[{key:"setValue",value:function(e,t,n,r){var a=this.map[t];void 0!==a&&a.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var a=0,i=t.length;a!==i;++a){var o=t[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var i=e[r];i.id in t&&n.push(i)}return n}}]),e}();function Iw(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var Nw=0;function Rw(e,t,n){var r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();if(r&&""===a)return"";var i=/ERROR: 0:(\d+)/.exec(a);if(i){var o=parseInt(i[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],a=Math.max(t-6,0),i=Math.min(t+6,n.length),o=a;o<i;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return a}function Dw(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ow(e){return""!==e}function Lw(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Fw(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Pw=/^[ \t]*#include +<([\w\d./]+)>/gm;function zw(e){return e.replace(Pw,Bw)}function Bw(e,t){var n=Xb[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return zw(n)}var Uw=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Vw=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ww(e){return e.replace(Vw,Hw).replace(Uw,Gw)}function Gw(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Hw(0,t,n,r)}function Hw(e,t,n,r){for(var a="",i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function jw(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function qw(e,t,n,r){var a,i,o,s,u,c=e.getContext(),l=n.defines,h=n.vertexShader,f=n.fragmentShader,d=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),p=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),m=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:t="ENVMAP_MODE_REFRACTION"}return t}(n),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),g=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),y=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ow).join("\n")}(n),_=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),b=c.createProgram(),x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[_].filter(Ow).join("\n")).length>0&&(a+="\n"),(i=[y,_].filter(Ow).join("\n")).length>0&&(i+="\n")):(a=[jw(n),"#define SHADER_NAME "+n.shaderName,_,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ow).join("\n"),i=[y,jw(n),"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",n.envMap?"#define "+v:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Xb.tonemapping_pars_fragment:"",0!==n.toneMapping?Dw("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Xb.encodings_pars_fragment,(o="linearToOutputTexel",s=n.outputEncoding,u=function(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(s),"vec4 "+o+"( vec4 value ) { return LinearTo"+u[0]+u[1]+"; }"),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ow).join("\n")),h=Fw(h=Lw(h=zw(h),n),n),f=Fw(f=Lw(f=zw(f),n),n),h=Ww(h),f=Ww(f),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,i=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);var w,k,C=x+i+f,S=Iw(c,35633,x+a+h),T=Iw(c,35632,C);if(c.attachShader(b,S),c.attachShader(b,T),void 0!==n.index0AttributeName?c.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&c.bindAttribLocation(b,0,"position"),c.linkProgram(b),e.debug.checkShaderErrors){var E=c.getProgramInfoLog(b).trim(),A=c.getShaderInfoLog(S).trim(),M=c.getShaderInfoLog(T).trim(),I=!0,N=!0;if(!1===c.getProgramParameter(b,35714)){I=!1;var R=Rw(c,S,"vertex"),D=Rw(c,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+E+"\n"+R+"\n"+D)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==A&&""!==M||(N=!1);N&&(this.diagnostics={runnable:I,programLog:E,vertexShader:{log:A,prefix:a},fragmentShader:{log:M,prefix:i}})}return c.deleteShader(S),c.deleteShader(T),this.getUniforms=function(){return void 0===w&&(w=new Mw(c,b)),w},this.getAttributes=function(){return void 0===k&&(k=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),a=0;a<r;a++){var i=e.getActiveAttrib(t,a),o=i.name,s=1;35674===i.type&&(s=2),35675===i.type&&(s=3),35676===i.type&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(c,b)),k},this.destroy=function(){r.releaseStatesOfProgram(this),c.deleteProgram(b),this.program=void 0},this.name=n.shaderName,this.id=Nw++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=S,this.fragmentShader=T,this}var Kw=0,Xw=function(){function e(){_classCallCheck(this,e),this.shaderCache=new Map,this.materialCache=new Map}return _createClass(e,[{key:"update",value:function(e){var t=e.fragmentShader,n=this._getShaderStage(e.vertexShader),r=this._getShaderStage(t),a=this._getShaderCacheForMaterial(e);return!1===a.has(n)&&(a.add(n),n.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=_createForOfIteratorHelper(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(a){n.e(a)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache;if(!1===t.has(e)){var n=new Zw(e);t.set(e,n)}return t.get(e)}}]),e}(),Zw=_createClass((function e(t){_classCallCheck(this,e),this.id=Kw++,this.code=t,this.usedTimes=0}));function Yw(e,t,n,r,a,i,o){var s=new b_,u=new Xw,c=[],l=a.isWebGL2,h=a.logarithmicDepthBuffer,f=a.vertexTextures,d=a.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(i,s,c,m,v){var g=m.fog,y=v.geometry,_=(i.isMeshStandardMaterial?n:t).get(i.envMap||(i.isMeshStandardMaterial?m.environment:null)),b=_&&306===_.mapping?_.image.height:null,x=p[i.type];null!==i.precision&&((d=a.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead."));var w,k,C,S,T=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,E=void 0!==T?T.length:0,A=0;if(void 0!==y.morphAttributes.position&&(A=1),void 0!==y.morphAttributes.normal&&(A=2),void 0!==y.morphAttributes.color&&(A=3),x){var M=Yb[x];w=M.vertexShader,k=M.fragmentShader}else w=i.vertexShader,k=i.fragmentShader,u.update(i),C=u.getVertexShaderID(i),S=u.getFragmentShaderID(i);var I=e.getRenderTarget(),N=i.clearcoat>0,R=i.iridescence>0;return{isWebGL2:l,shaderID:x,shaderName:i.type,vertexShader:w,fragmentShader:k,defines:i.defines,customVertexShaderID:C,customFragmentShaderID:S,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:f,outputEncoding:null===I?e.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:3e3,map:!!i.map,matcap:!!i.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:b,lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,decodeVideoTexture:!!i.map&&!0===i.map.isVideoTexture&&3001===i.map.encoding,clearcoat:N,clearcoatMap:N&&!!i.clearcoatMap,clearcoatRoughnessMap:N&&!!i.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!i.clearcoatNormalMap,iridescence:R,iridescenceMap:R&&!!i.iridescenceMap,iridescenceThicknessMap:R&&!!i.iridescenceThicknessMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,specularIntensityMap:!!i.specularIntensityMap,specularColorMap:!!i.specularColorMap,opaque:!1===i.transparent&&1===i.blending,alphaMap:!!i.alphaMap,alphaTest:i.alphaTest>0,gradientMap:!!i.gradientMap,sheen:i.sheen>0,sheenColorMap:!!i.sheenColorMap,sheenRoughnessMap:!!i.sheenRoughnessMap,transmission:i.transmission>0,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:!!i.normalMap&&!!y.attributes.tangent,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.iridescenceMap||i.iridescenceThicknessMap||i.displacementMap||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularColorMap||i.sheenColorMap||i.sheenRoughnessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.iridescenceMap||i.iridescenceThicknessMap||i.transmission>0||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularColorMap||i.sheen>0||i.sheenColorMap||i.sheenRoughnessMap||!i.displacementMap),fog:!!g,useFog:!0===i.fog,fogExp2:g&&g.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:E,morphTextureStride:A,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,useDepthPacking:!!i.depthPacking,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),t.fog&&s.enable(33),e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0),t.flatShading&&s.enable(1),t.logarithmicDepthBuffer&&s.enable(2),t.skinning&&s.enable(3),t.morphTargets&&s.enable(4),t.morphNormals&&s.enable(5),t.morphColors&&s.enable(6),t.premultipliedAlpha&&s.enable(7),t.shadowMapEnabled&&s.enable(8),t.physicallyCorrectLights&&s.enable(9),t.doubleSided&&s.enable(10),t.flipSided&&s.enable(11),t.useDepthPacking&&s.enable(12),t.dithering&&s.enable(13),t.specularIntensityMap&&s.enable(14),t.specularColorMap&&s.enable(15),t.transmission&&s.enable(16),t.transmissionMap&&s.enable(17),t.thicknessMap&&s.enable(18),t.sheen&&s.enable(19),t.sheenColorMap&&s.enable(20),t.sheenRoughnessMap&&s.enable(21),t.decodeVideoTexture&&s.enable(22),t.opaque&&s.enable(23),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t=p[e.type];return t?Nb.clone(Yb[t].uniforms):e.uniforms},acquireProgram:function(t,n){for(var r,a=0,o=c.length;a<o;a++){var s=c[a];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new qw(e,n,t,i),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:c,dispose:function(){u.dispose()}}}function Jw(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function $w(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Qw(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ek(){var e=[],t=0,n=[],r=[],a=[];function i(n,r,a,i,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:a,groupOrder:i,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=a,u.groupOrder=i,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:a,init:function(){t=0,n.length=0,r.length=0,a.length=0},push:function(e,t,o,s,u,c){var l=i(e,t,o,s,u,c);o.transmission>0?r.push(l):!0===o.transparent?a.push(l):n.push(l)},unshift:function(e,t,o,s,u,c){var l=i(e,t,o,s,u,c);o.transmission>0?r.unshift(l):!0===o.transparent?a.unshift(l):n.unshift(l)},finish:function(){for(var n=t,r=e.length;n<r;n++){var a=e[n];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.group=null}},sort:function(e,t){n.length>1&&n.sort(e||$w),r.length>1&&r.sort(t||Qw),a.length>1&&a.sort(t||Qw)}}}function tk(){var e=new WeakMap;return{get:function(t,n){var r;return!1===e.has(t)?(r=new ek,e.set(t,[r])):n>=e.get(t).length?(r=new ek,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function nk(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ry,color:new xy};break;case"SpotLight":n={position:new Ry,direction:new Ry,color:new xy,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ry,color:new xy,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ry,skyColor:new xy,groundColor:new xy};break;case"RectAreaLight":n={color:new xy,position:new Ry,halfWidth:new Ry,halfHeight:new Ry}}return e[t.id]=n,n}}}var rk=0;function ak(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ik(e,t){for(var n,r=new nk,a=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oy};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oy,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)i.probe.push(new Ry);var s=new Ry,u=new c_,c=new c_;return{setup:function(n,o){for(var s=0,u=0,c=0,l=0;l<9;l++)i.probe[l].set(0,0,0);var h=0,f=0,d=0,p=0,m=0,v=0,g=0,y=0;n.sort(ak);for(var _=!0!==o?Math.PI:1,b=0,x=n.length;b<x;b++){var w=n[b],k=w.color,C=w.intensity,S=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)s+=k.r*C*_,u+=k.g*C*_,c+=k.b*C*_;else if(w.isLightProbe)for(var E=0;E<9;E++)i.probe[E].addScaledVector(w.sh.coefficients[E],C);else if(w.isDirectionalLight){var A=r.get(w);if(A.color.copy(w.color).multiplyScalar(w.intensity*_),w.castShadow){var M=w.shadow,I=a.get(w);I.shadowBias=M.bias,I.shadowNormalBias=M.normalBias,I.shadowRadius=M.radius,I.shadowMapSize=M.mapSize,i.directionalShadow[h]=I,i.directionalShadowMap[h]=T,i.directionalShadowMatrix[h]=w.shadow.matrix,v++}i.directional[h]=A,h++}else if(w.isSpotLight){var N=r.get(w);if(N.position.setFromMatrixPosition(w.matrixWorld),N.color.copy(k).multiplyScalar(C*_),N.distance=S,N.coneCos=Math.cos(w.angle),N.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),N.decay=w.decay,w.castShadow){var R=w.shadow,D=a.get(w);D.shadowBias=R.bias,D.shadowNormalBias=R.normalBias,D.shadowRadius=R.radius,D.shadowMapSize=R.mapSize,i.spotShadow[d]=D,i.spotShadowMap[d]=T,i.spotShadowMatrix[d]=w.shadow.matrix,y++}i.spot[d]=N,d++}else if(w.isRectAreaLight){var O=r.get(w);O.color.copy(k).multiplyScalar(C),O.halfWidth.set(.5*w.width,0,0),O.halfHeight.set(0,.5*w.height,0),i.rectArea[p]=O,p++}else if(w.isPointLight){var L=r.get(w);if(L.color.copy(w.color).multiplyScalar(w.intensity*_),L.distance=w.distance,L.decay=w.decay,w.castShadow){var F=w.shadow,P=a.get(w);P.shadowBias=F.bias,P.shadowNormalBias=F.normalBias,P.shadowRadius=F.radius,P.shadowMapSize=F.mapSize,P.shadowCameraNear=F.camera.near,P.shadowCameraFar=F.camera.far,i.pointShadow[f]=P,i.pointShadowMap[f]=T,i.pointShadowMatrix[f]=w.shadow.matrix,g++}i.point[f]=L,f++}else if(w.isHemisphereLight){var z=r.get(w);z.skyColor.copy(w.color).multiplyScalar(C*_),z.groundColor.copy(w.groundColor).multiplyScalar(C*_),i.hemi[m]=z,m++}}p>0&&(t.isWebGL2?(i.rectAreaLTC1=Zb.LTC_FLOAT_1,i.rectAreaLTC2=Zb.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Zb.LTC_FLOAT_1,i.rectAreaLTC2=Zb.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Zb.LTC_HALF_1,i.rectAreaLTC2=Zb.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=c;var B=i.hash;B.directionalLength===h&&B.pointLength===f&&B.spotLength===d&&B.rectAreaLength===p&&B.hemiLength===m&&B.numDirectionalShadows===v&&B.numPointShadows===g&&B.numSpotShadows===y||(i.directional.length=h,i.spot.length=d,i.rectArea.length=p,i.point.length=f,i.hemi.length=m,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,B.directionalLength=h,B.pointLength=f,B.spotLength=d,B.rectAreaLength=p,B.hemiLength=m,B.numDirectionalShadows=v,B.numPointShadows=g,B.numSpotShadows=y,i.version=rk++)},setupView:function(e,t){for(var n=0,r=0,a=0,o=0,l=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var m=i.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),n++}else if(p.isSpotLight){var v=i.spot[a];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),c.identity(),u.copy(p.matrixWorld),u.premultiply(h),c.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(c),g.halfHeight.applyMatrix4(c),o++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var _=i.hemi[l];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),l++}}},state:i}}function ok(e,t){var n=new ik(e,t),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){a.push(e)}}}function sk(e,t){var n=new WeakMap;return{get:function(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(a=new ok(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new ok(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}var uk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(K_),ck=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new Ry,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(K_);function lk(e,t,n){var r=new Hb,a=new oy,i=new oy,o=new Ey,s=new uk({depthPacking:3201}),u=new ck,c={},l=n.maxTextureSize,h={0:1,1:0,2:2},f=new Rb({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new oy},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new ub;p.setAttribute("position",new J_(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Tb(p,f),v=this;function g(n,r){var i=t.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ay(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,m,null)}function y(t,n,r,a,i,o){var l=null,f=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(l=void 0!==f?f:!0===r.isPointLight?u:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var d=l.uuid,p=n.uuid,m=c[d];void 0===m&&(m={},c[d]=m);var v=m[p];void 0===v&&(v=l.clone(),m[p]=v),l=v}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],l.alphaMap=n.alphaMap,l.alphaTest=n.alphaTest,l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.displacementMap=n.displacementMap,l.displacementScale=n.displacementScale,l.displacementBias=n.displacementBias,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=i),l}function _(n,a,i,o,s){if(!1!==n.visible){if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,h=0,f=l.length;h<f;h++){var d=l[h],p=c[d.materialIndex];if(p&&p.visible){var m=y(n,p,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,m,n,d)}}else if(c.visible){var v=y(n,c,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,v,n,null)}}for(var g=n.children,b=0,x=g.length;b<x;b++)_(g[b],a,i,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var m=t[d],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){a.copy(y.mapSize);var b=y.getFrameExtents();a.multiply(b),i.copy(y.mapSize),(a.x>l||a.y>l)&&(a.x>l&&(i.x=Math.floor(l/b.x),a.x=i.x*b.x,y.mapSize.x=i.x),a.y>l&&(i.y=Math.floor(l/b.y),a.y=i.y*b.y,y.mapSize.y=i.y)),null===y.map&&(y.map=new Ay(a.x,a.y,3!==this.type?{minFilter:1003,magFilter:1003}:{}),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var x=y.getViewportCount(),w=0;w<x;w++){var k=y.getViewport(w);o.set(i.x*k.x,i.y*k.y,i.x*k.z,i.y*k.w),f.viewport(o),y.updateMatrices(m,w),r=y.getFrustum(),_(n,s,y.camera,m,this.type)}!0!==y.isPointLightShadow&&3===this.type&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function hk(e,t,n){var r=n.isWebGL2,a=new function(){var t=!1,n=new Ey,r=null,a=new Ey(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(e){e?z(2929):B(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},o=new function(){var t=!1,n=null,r=null,a=null,i=null,o=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?z(2960):B(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&a===n&&i===o||(e.stencilFunc(t,n,o),r=t,a=n,i=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,o=null,s=null,u=null,c=null}}},s={},u={},c=new WeakMap,l=[],h=null,f=!1,d=null,p=null,m=null,v=null,g=null,y=null,_=null,b=!1,x=null,w=null,k=null,C=null,S=null,T=e.getParameter(35661),E=!1,A=0,M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(M)[1]),E=A>=1):-1!==M.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),E=A>=2);var I=null,N={},R=e.getParameter(3088),D=e.getParameter(2978),O=(new Ey).fromArray(R),L=(new Ey).fromArray(D);function F(t,n,r){var a=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,a);return i}var P={};function z(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function B(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}P[3553]=F(3553,3553,1),P[34067]=F(34067,34069,6),a.setClear(0,0,0,1),i.setClear(1),o.setClear(0),z(2929),i.setFunc(3),H(!1),j(1),z(2884),G(0);var U={100:32774,101:32778,102:32779};if(r)U[103]=32775,U[104]=32776;else{var V=t.get("EXT_blend_minmax");null!==V&&(U[103]=V.MIN_EXT,U[104]=V.MAX_EXT)}var W={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function G(t,n,r,a,i,o,s,u){if(0!==t){if(!1===f&&(z(3042),f=!0),5===t)i=i||n,o=o||r,s=s||a,n===p&&i===g||(e.blendEquationSeparate(U[n],U[i]),p=n,g=i),r===m&&a===v&&o===y&&s===_||(e.blendFuncSeparate(W[r],W[a],W[o],W[s]),m=r,v=a,y=o,_=s),d=t,b=null;else if(t!==d||u!==b){if(100===p&&100===g||(e.blendEquation(32774),p=100,g=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,v=null,y=null,_=null,d=t,b=u}}else!0===f&&(B(3042),f=!1)}function H(t){x!==t&&(e.frontFace(t?2304:2305),x=t)}function j(t){0!==t?(z(2884),t!==w&&e.cullFace(1===t?1029:2===t?1028:1032)):B(2884),w=t}function q(t,n,r){t?(z(32823),C===n&&S===r||(e.polygonOffset(n,r),C=n,S=r)):B(32823)}function K(t){void 0===t&&(t=33984+T-1),I!==t&&(e.activeTexture(t),I=t)}return{buffers:{color:a,depth:i,stencil:o},enable:z,disable:B,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(r,a){var i=l,o=!1;if(r)if(i=c.get(a),void 0===i&&(i=[],c.set(a,i)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(i.length!==s.length||36064!==i[0]){for(var u=0,h=s.length;u<h;u++)i[u]=36064+u;i.length=s.length,o=!0}}else 36064!==i[0]&&(i[0]=36064,o=!0);else 1029!==i[0]&&(i[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(i):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(i))},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(e,t){2===e.side?B(2884):z(2884);var n=1===e.side;t&&(n=!n),H(n),1===e.blending&&!1===e.transparent?G(0):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;o.setTest(r),r&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?z(32926):B(32926)},setFlipSided:H,setCullFace:j,setLineWidth:function(t){t!==k&&(E&&e.lineWidth(t),k=t)},setPolygonOffset:q,setScissorTest:function(e){e?z(3089):B(3089)},activeTexture:K,bindTexture:function(t,n){null===I&&K();var r=N[I];void 0===r&&(r={type:void 0,texture:void 0},N[I]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||P[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=N[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},I=null,N={},u={},c=new WeakMap,l=[],h=null,f=!1,d=null,p=null,m=null,v=null,g=null,y=null,_=null,b=!1,x=null,w=null,k=null,C=null,S=null,O.set(0,0,e.canvas.width,e.canvas.height),L.set(0,0,e.canvas.width,e.canvas.height),a.reset(),i.reset(),o.reset()}}}function fk(e,t,n,r,a,i,o){var s,u=a.isWebGL2,c=a.maxTextures,l=a.maxCubemapSize,h=a.maxTextureSize,f=a.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,v=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function y(e,t){return g?new OffscreenCanvas(e,t):cy("canvas")}function _(e,t,n,r){var a=1;if((e.width>r||e.height>r)&&(a=r/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var i=t?ay:Math.floor,o=i(a*e.width),u=i(a*e.height);void 0===s&&(s=y(o,u));var c=n?y(o,u):s;return c.width=o,c.height=u,c.getContext("2d").drawImage(e,0,0,o,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+u+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return ny(e.width)&&ny(e.height)}function x(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function w(t){e.generateMipmap(t)}function k(n,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===a&&(s=33326),5131===a&&(s=33325),5121===a&&(s=33321)),33319===r&&(5126===a&&(s=33328),5131===a&&(s=33327),5121===a&&(s=33323)),6408===r&&(5126===a&&(s=34836),5131===a&&(s=34842),5121===a&&(s=3001===i&&!1===o?35907:32856),32819===a&&(s=32854),32820===a&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function C(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){return 1003===e||1004===e||1005===e?9728:9729}function T(e){var t=e.target;t.removeEventListener("dispose",T),function(e){var t=r.get(e);if(void 0!==t.__webglInit){var n=e.source,a=v.get(n);if(a){var i=a[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&A(e),0===Object.keys(a).length&&v.delete(n)}r.remove(e)}}(t),t.isVideoTexture&&m.delete(t)}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=t.texture,a=r.get(t),i=r.get(n);if(void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer)for(var u=0;u<a.__webglColorRenderbuffer.length;u++)a.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(a.__webglColorRenderbuffer[u]);a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var c=0,l=n.length;c<l;c++){var h=r.get(n[c]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),r.remove(n[c])}r.remove(n),r.remove(t)}(n)}function A(t){var n=r.get(t);e.deleteTexture(n.__webglTexture),delete v.get(t.source)[n.__cacheKey],o.memory.textures--}var M=0;function I(e,t){var a=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){var i=e.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void L(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}var N={1e3:10497,1001:33071,1002:33648},R={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function D(n,i,o){if(o?(e.texParameteri(n,10242,N[i.wrapS]),e.texParameteri(n,10243,N[i.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,N[i.wrapR]),e.texParameteri(n,10240,R[i.magFilter]),e.texParameteri(n,10241,R[i.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===i.wrapS&&1001===i.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(i.magFilter)),e.texParameteri(n,10241,S(i.minFilter)),1003!==i.minFilter&&1006!==i.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(1015===i.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&1016===i.type&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function O(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));var a=n.source,i=v.get(a);void 0===i&&(i={},v.set(a,i));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===i[s]&&(i[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),i[s].usedTimes++;var u=i[t.__cacheKey];void 0!==u&&(i[t.__cacheKey].usedTimes--,0===u.usedTimes&&A(n)),t.__cacheKey=s,t.__webglTexture=i[s].texture}return r}function L(t,r,a){var o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);var s=O(t,r),c=r.source;if(n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),c.version!==c.__currentVersion||!0===s){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var l,f=function(e){return!u&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===b(r.image),d=_(r.image,f,!1,h),p=b(d=V(r,d))||u,m=i.convert(r.format,r.encoding),v=i.convert(r.type),g=k(r.internalFormat,m,v,r.encoding,r.isVideoTexture);D(o,r,p);var y=r.mipmaps,S=u&&!0!==r.isVideoTexture,T=void 0===c.__currentVersion||!0===s,E=C(r,d,p);if(r.isDepthTexture)g=6402,u?g=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===g&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1014,v=i.convert(r.type)),1027===r.format&&6402===g&&(g=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,v=i.convert(r.type))),T&&(S?n.texStorage2D(3553,1,g,d.width,d.height):n.texImage2D(3553,0,g,d.width,d.height,0,m,v,null));else if(r.isDataTexture)if(y.length>0&&p){S&&T&&n.texStorage2D(3553,E,g,y[0].width,y[0].height);for(var A=0,M=y.length;A<M;A++)l=y[A],S?n.texSubImage2D(3553,A,0,0,l.width,l.height,m,v,l.data):n.texImage2D(3553,A,g,l.width,l.height,0,m,v,l.data);r.generateMipmaps=!1}else S?(T&&n.texStorage2D(3553,E,g,d.width,d.height),n.texSubImage2D(3553,0,0,0,d.width,d.height,m,v,d.data)):n.texImage2D(3553,0,g,d.width,d.height,0,m,v,d.data);else if(r.isCompressedTexture){S&&T&&n.texStorage2D(3553,E,g,y[0].width,y[0].height);for(var I=0,N=y.length;I<N;I++)l=y[I],1023!==r.format?null!==m?S?n.compressedTexSubImage2D(3553,I,0,0,l.width,l.height,m,l.data):n.compressedTexImage2D(3553,I,g,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(3553,I,0,0,l.width,l.height,m,v,l.data):n.texImage2D(3553,I,g,l.width,l.height,0,m,v,l.data)}else if(r.isDataArrayTexture)S?(T&&n.texStorage3D(35866,E,g,d.width,d.height,d.depth),n.texSubImage3D(35866,0,0,0,0,d.width,d.height,d.depth,m,v,d.data)):n.texImage3D(35866,0,g,d.width,d.height,d.depth,0,m,v,d.data);else if(r.isData3DTexture)S?(T&&n.texStorage3D(32879,E,g,d.width,d.height,d.depth),n.texSubImage3D(32879,0,0,0,0,d.width,d.height,d.depth,m,v,d.data)):n.texImage3D(32879,0,g,d.width,d.height,d.depth,0,m,v,d.data);else if(r.isFramebufferTexture){if(T)if(S)n.texStorage2D(3553,E,g,d.width,d.height);else for(var R=d.width,L=d.height,F=0;F<E;F++)n.texImage2D(3553,F,g,R,L,0,m,v,null),R>>=1,L>>=1}else if(y.length>0&&p){S&&T&&n.texStorage2D(3553,E,g,y[0].width,y[0].height);for(var P=0,z=y.length;P<z;P++)l=y[P],S?n.texSubImage2D(3553,P,0,0,m,v,l):n.texImage2D(3553,P,g,m,v,l);r.generateMipmaps=!1}else S?(T&&n.texStorage2D(3553,E,g,d.width,d.height),n.texSubImage2D(3553,0,0,0,m,v,d)):n.texImage2D(3553,0,g,m,v,d);x(r,p)&&w(o),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function F(t,a,o,s,u){var c=i.convert(o.format,o.encoding),l=i.convert(o.type),h=k(o.internalFormat,c,l,o.encoding);r.get(a).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,a.width,a.height,a.depth,0,c,l,null):n.texImage2D(u,0,h,a.width,a.height,0,c,l,null)),n.bindFramebuffer(36160,t),U(a)?d.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(o).__webglTexture,0,B(a)):e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function P(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(r||U(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(1015===o.type?a=36012:1014===o.type&&(a=33190));var s=B(n);U(n)?d.renderbufferStorageMultisampleEXT(36161,s,a,n.width,n.height):e.renderbufferStorageMultisample(36161,s,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=B(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var c=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],l=0;l<c.length;l++){var h=c[l],f=i.convert(h.format,h.encoding),p=i.convert(h.type),m=k(h.internalFormat,f,p,h.encoding),v=B(n);r&&!1===U(n)?e.renderbufferStorageMultisample(36161,v,m,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(36161,v,m,n.width,n.height):e.renderbufferStorage(36161,m,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){var a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),I(a.depthTexture,0);var i=r.get(a.depthTexture).__webglTexture,o=B(a);if(1026===a.depthTexture.format)U(a)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,i,0,o):e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==a.depthTexture.format)throw new Error("Unknown depthTexture format");U(a)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,i,0,o):e.framebufferTexture2D(36160,33306,3553,i,0)}}(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,a.__webglFramebuffer[o]),a.__webglDepthbuffer[o]=e.createRenderbuffer(),P(a.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),P(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function B(e){return Math.min(f,e.samples)}function U(e){var n=r.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,n){var r=e.encoding,a=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||1035===e.format?n:(3e3!==r&&(3001===r?!1===u?!0===t.has("EXT_sRGB")&&1023===a?(e.format=1035,e.minFilter=1006,e.generateMipmaps=!1):n=wy.sRGBToLinear(n):1023===a&&1009===i||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n)}this.allocateTextureUnit=function(){var e=M;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=I,this.setTexture2DArray=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?L(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?L(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=function(t,a){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,a){if(6===r.image.length){var o=O(t,r),s=r.source;if(n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===o){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var c=r.isCompressedTexture||r.image[0].isCompressedTexture,h=r.image[0]&&r.image[0].isDataTexture,f=[],d=0;d<6;d++)f[d]=c||h?h?r.image[d].image:r.image[d]:_(r.image[d],!1,!0,l),f[d]=V(r,f[d]);var p,m=f[0],v=b(m)||u,g=i.convert(r.format,r.encoding),y=i.convert(r.type),S=k(r.internalFormat,g,y,r.encoding),T=u&&!0!==r.isVideoTexture,E=void 0===s.__currentVersion||!0===o,A=C(r,m,v);if(D(34067,r,v),c){T&&E&&n.texStorage2D(34067,A,S,m.width,m.height);for(var M=0;M<6;M++){p=f[M].mipmaps;for(var I=0;I<p.length;I++){var N=p[I];1023!==r.format?null!==g?T?n.compressedTexSubImage2D(34069+M,I,0,0,N.width,N.height,g,N.data):n.compressedTexImage2D(34069+M,I,S,N.width,N.height,0,N.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?n.texSubImage2D(34069+M,I,0,0,N.width,N.height,g,y,N.data):n.texImage2D(34069+M,I,S,N.width,N.height,0,g,y,N.data)}}}else{p=r.mipmaps,T&&E&&(p.length>0&&A++,n.texStorage2D(34067,A,S,f[0].width,f[0].height));for(var R=0;R<6;R++)if(h){T?n.texSubImage2D(34069+R,0,0,0,f[R].width,f[R].height,g,y,f[R].data):n.texImage2D(34069+R,0,S,f[R].width,f[R].height,0,g,y,f[R].data);for(var L=0;L<p.length;L++){var F=p[L].image[R].image;T?n.texSubImage2D(34069+R,L+1,0,0,F.width,F.height,g,y,F.data):n.texImage2D(34069+R,L+1,S,F.width,F.height,0,g,y,F.data)}}else{T?n.texSubImage2D(34069+R,0,0,0,g,y,f[R]):n.texImage2D(34069+R,0,S,g,y,f[R]);for(var P=0;P<p.length;P++){var z=p[P];T?n.texSubImage2D(34069+R,P+1,0,0,g,y,z.image[R]):n.texImage2D(34069+R,P+1,S,g,y,z.image[R])}}}x(r,v)&&w(34067),s.__currentVersion=s.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}}(o,t,a):(n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,n){var a=r.get(e);void 0!==t&&F(a.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){var s=t.texture,c=r.get(t),l=r.get(s);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=b(t)||u;if(h){c.__webglFramebuffer=[];for(var p=0;p<6;p++)c.__webglFramebuffer[p]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),f)if(a.drawBuffers)for(var m=t.texture,v=0,g=m.length;v<g;v++){var y=r.get(m[v]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===U(t)){var _=f?s:[s];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(var C=0;C<_.length;C++){var S=_[C];c.__webglColorRenderbuffer[C]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[C]);var T=i.convert(S.format,S.encoding),A=i.convert(S.type),M=k(S.internalFormat,T,A,S.encoding),I=B(t);e.renderbufferStorageMultisample(36161,I,M,t.width,t.height),e.framebufferRenderbuffer(36160,36064+C,36161,c.__webglColorRenderbuffer[C])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),P(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,l.__webglTexture),D(34067,s,d);for(var N=0;N<6;N++)F(c.__webglFramebuffer[N],t,s,36064,34069+N);x(s,d)&&w(34067),n.unbindTexture()}else if(f){for(var R=t.texture,O=0,L=R.length;O<L;O++){var V=R[O],W=r.get(V);n.bindTexture(3553,W.__webglTexture),D(3553,V,d),F(c.__webglFramebuffer,t,V,36064+O,3553),x(V,d)&&w(3553)}n.unbindTexture()}else{var G=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?G=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(G,l.__webglTexture),D(G,s,d),F(c.__webglFramebuffer,t,s,36064,G),x(s,d)&&w(G),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){for(var t=b(e)||u,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],i=0,o=a.length;i<o;i++){var s=a[i];if(x(s,t)){var c=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(c,l),w(c),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===U(t)){var a=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],i=t.width,o=t.height,s=16384,c=[],l=t.stencilBuffer?33306:36096,h=r.get(t),f=!0===t.isWebGLMultipleRenderTargets;if(f)for(var d=0;d<a.length;d++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+d,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+d,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var m=0;m<a.length;m++){c.push(36064+m),t.depthBuffer&&c.push(l);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),f&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[m]),!0===v&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),f){var g=r.get(a[m]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,g,0)}e.blitFramebuffer(0,0,i,o,0,0,i,o,s,9728),p&&e.invalidateFramebuffer(36008,c)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),f)for(var y=0;y<a.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var _=r.get(a[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,_,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=F,this.useMultisampledRTT=U}function dk(e,t,n){var r=n.isWebGL2;return{convert:function(n){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(1009===n)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(1014===n)return 5125;if(1015===n)return 5126;if(1016===n)return r?5131:null!==(a=t.get("OES_texture_half_float"))?a.HALF_FLOAT_OES:null;if(1021===n)return 6406;if(1023===n)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(1026===n)return 6402;if(1027===n)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===n)return null!==(a=t.get("EXT_sRGB"))?a.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(33776===n||33777===n||33778===n||33779===n)if(3001===i){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===n)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===n)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return null!==(a=t.get("WEBGL_compressed_texture_etc1"))?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(37492===n)return 3001===i?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return 3001===i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(36492===n)return 3001===i?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===n?r?34042:null!==(a=t.get("WEBGL_depth_texture"))?a.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var pk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return _createClass(n)}(Ob),mk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return _createClass(n)}(O_),vk={type:"move"},gk=function(){function e(){_classCallCheck(this,e),this._targetRay=null,this._grip=null,this._hand=null}return _createClass(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new mk,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new mk,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ry,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ry),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new mk,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ry,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ry),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,i=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){i=!0;var c,l=_createForOfIteratorHelper(e.hand.values());try{for(l.s();!(c=l.n()).done;){var h=c.value,f=t.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var d=new mk;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[h.jointName]=d,u.add(d)}var p=u.joints[h.jointName];null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(v){l.e(v)}finally{l.f()}var m=u.joints["index-finger-tip"].position.distanceTo(u.joints["thumb-tip"].position);u.inputState.pinching&&m>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(null!==(a=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),a.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(a.linearVelocity)):s.hasLinearVelocity=!1,a.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(a.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==a&&(r=a),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(vk)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==a),null!==u&&(u.visible=null!==i),this}}]),e}(),yk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,c,l,h){var f;if(_classCallCheck(this,n),1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&1026===h&&(a=1014),void 0===a&&1027===h&&(a=1020),(f=t.call(this,null,i,o,s,u,c,h,a,l)).isDepthTexture=!0,f.image={width:e,height:r},f.magFilter=void 0!==u?u:1003,f.minFilter=void 0!==c?c:1003,f.flipY=!1,f.generateMipmaps=!1,f}return _createClass(n)}(Ty),_k=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;_classCallCheck(this,n);var i=_assertThisInitialized(a=t.call(this)),o=null,s=1,u=null,c="local-floor",l=null,h=null,f=null,d=null,p=null,m=null,v=r.getContextAttributes(),g=null,y=null,_=[],b=[],x=new Ob;x.layers.enable(1),x.viewport=new Ey;var w=new Ob;w.layers.enable(2),w.viewport=new Ey;var k=[x,w],C=new pk;C.layers.enable(1),C.layers.enable(2);var S=null,T=null;function E(e){var t=b.indexOf(e.inputSource);if(-1!==t){var n=_[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function A(){o.removeEventListener("select",E),o.removeEventListener("selectstart",E),o.removeEventListener("selectend",E),o.removeEventListener("squeeze",E),o.removeEventListener("squeezestart",E),o.removeEventListener("squeezeend",E),o.removeEventListener("end",A),o.removeEventListener("inputsourceschange",M);for(var t=0;t<_.length;t++){var n=b[t];null!==n&&(b[t]=null,_[t].disconnect(n))}S=null,T=null,e.setRenderTarget(g),p=null,d=null,f=null,o=null,y=null,O.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function M(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=b.indexOf(n);r>=0&&(b[r]=null,_[r].dispatchEvent({type:"disconnected",data:n}))}for(var a=0;a<e.added.length;a++){var i=e.added[a],o=b.indexOf(i);if(-1===o){for(var s=0;s<_.length;s++){if(s>=b.length){b.push(i),o=s;break}if(null===b[s]){b[s]=i,o=s;break}}if(-1===o)break}var u=_[o];u&&u.dispatchEvent({type:"connected",data:i})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=_[e];return void 0===t&&(t=new gk,_[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=_[e];return void 0===t&&(t=new gk,_[e]=t),t.getGripSpace()},a.getHand=function(e){var t=_[e];return void 0===t&&(t=new gk,_[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){c=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return l||u},a.setReferenceSpace=function(e){l=e},a.getBaseLayer=function(){return null!==d?d:p},a.getBinding=function(){return f},a.getFrame=function(){return m},a.getSession=function(){return o},a.setSession=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var a,h,m,_;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=32;break}if(g=e.getRenderTarget(),o.addEventListener("select",E),o.addEventListener("selectstart",E),o.addEventListener("selectend",E),o.addEventListener("squeeze",E),o.addEventListener("squeezestart",E),o.addEventListener("squeezeend",E),o.addEventListener("end",A),o.addEventListener("inputsourceschange",M),t.t0=!0!==v.xrCompatible,!t.t0){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:if(void 0!==o.renderState.layers&&!1!==e.capabilities.isWebGL2){t.next=18;break}p=new XRWebGLLayer(o,r,{antialias:void 0!==o.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s}),o.updateRenderState({baseLayer:p}),y=new Ay(p.framebufferWidth,p.framebufferHeight,{format:1023,type:1009,encoding:e.outputEncoding}),t.next=22;break;case 18:a=null,h=null,m=null,v.depth&&(m=v.stencil?35056:33190,a=v.stencil?1027:1026,h=v.stencil?1020:1014),_={colorFormat:32856,depthFormat:m,scaleFactor:s},f=new XRWebGLBinding(o,r),d=f.createProjectionLayer(_),o.updateRenderState({layers:[d]}),y=new Ay(d.textureWidth,d.textureHeight,{format:1023,type:1009,depthTexture:new yk(d.textureWidth,d.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,a),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=d.ignoreDepthValues;case 22:return y.isXRRenderTarget=!0,this.setFoveation(1),l=null,t.next=27,o.requestReferenceSpace(c);case 27:u=t.sent,O.setContext(o),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 32:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var I=new Ry,N=new Ry;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==o){C.near=w.near=x.near=e.near,C.far=w.far=x.far=e.far,S===C.near&&T===C.far||(o.updateRenderState({depthNear:C.near,depthFar:C.far}),S=C.near,T=C.far);var t=e.parent,n=C.cameras;R(C,t);for(var r=0;r<n.length;r++)R(n[r],t);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),e.position.copy(C.position),e.quaternion.copy(C.quaternion),e.scale.copy(C.scale),e.matrix.copy(C.matrix),e.matrixWorld.copy(C.matrixWorld);for(var a=e.children,i=0,s=a.length;i<s;i++)a[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);var r=I.distanceTo(N),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),u=(a[9]+1)/a[5],c=(a[9]-1)/a[5],l=(a[8]-1)/a[0],h=(i[8]+1)/i[0],f=o*l,d=o*h,p=r/(-l+h),m=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var v=o+p,g=s+p;e.projectionMatrix.makePerspective(f-m,d+(r-m),u*s/g*v,c*s/g*v,v,g)}(C,x,w):C.projectionMatrix.copy(x.projectionMatrix)}},a.getCamera=function(){return C},a.getFoveation=function(){return null!==d?d.fixedFoveation:null!==p?p.fixedFoveation:void 0},a.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};var D=null,O=new jb;return O.setAnimationLoop((function(t,n){if(h=n.getViewerPose(l||u),m=n,null!==h){var r=h.views;null!==p&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));var a=!1;r.length!==C.cameras.length&&(C.cameras.length=0,a=!0);for(var i=0;i<r.length;i++){var o=r[i],s=null;if(null!==p)s=p.getViewport(o);else{var c=f.getViewSubImage(d,o);s=c.viewport,0===i&&(e.setRenderTargetTextures(y,c.colorTexture,d.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(y))}var v=k[i];void 0===v&&((v=new Ob).layers.enable(i),v.viewport=new Ey,k[i]=v),v.matrix.fromArray(o.transform.matrix),v.projectionMatrix.fromArray(o.projectionMatrix),v.viewport.set(s.x,s.y,s.width,s.height),0===i&&C.matrix.copy(v.matrix),!0===a&&C.cameras.push(v)}}for(var g=0;g<_.length;g++){var x=b[g],w=_[g];null!==x&&void 0!==w&&w.update(x,n,l||u)}D&&D(t,n),m=null})),a.setAnimationLoop=function(e){D=e},a.dispose=function(){},a}return _createClass(n)}(Kg);function bk(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var a,i,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?i=r.aoMap:r.lightMap&&(i=r.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uv2Transform.value.copy(i.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,a,i,o){r.isMeshBasicMaterial?n(e,r):r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var a;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?a=t.map:t.alphaMap&&(a=t.alphaMap),void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,r,a,i):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n,r=void 0!==e.canvas?e.canvas:((t=cy("canvas")).style.display="block",t),a=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;n=null!==a?a.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var f=null,d=null,p=[],m=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var v=this,g=!1,y=0,_=0,b=null,x=-1,w=null,k=new Ey,C=new Ey,S=null,T=r.width,E=r.height,A=1,M=null,I=null,N=new Ey(0,0,T,E),R=new Ey(0,0,T,E),D=!1,O=new Hb,L=!1,F=!1,P=null,z=new c_,B=new oy,U=new Ry,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return null===b?A:1}var G,H,j,q,K,X,Z,Y,J,$,Q,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,he,fe=a;function de(e,t){for(var n=0;n<e.length;n++){var a=r.getContext(e[n],t);if(null!==a)return a}return null}try{var pe={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:h};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r142"),r.addEventListener("webglcontextlost",ye,!1),r.addEventListener("webglcontextrestored",_e,!1),r.addEventListener("webglcontextcreationerror",be,!1),null===fe){var me=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&me.shift(),null===(fe=de(me,pe)))throw de(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===fe.getShaderPrecisionFormat&&(fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ne){throw console.error("THREE.WebGLRenderer: "+Ne.message),Ne}function ve(){G=new gx(fe),H=new ex(fe,G,e),G.init(H),le=new dk(fe,G,H),j=new hk(fe,G,H),q=new bx,K=new Jw,X=new fk(fe,G,j,K,H,le,q),Z=new nx(v),Y=new vx(v),J=new qb(fe,H),he=new $b(fe,G,J,H),$=new yx(fe,J,q,he),Q=new Sx(fe,$,J,q),se=new Cx(fe,H,X),ae=new tx(K),ee=new Yw(v,Z,Y,G,H,he,ae),te=new bk(v,K),ne=new tk,re=new sk(G,H),oe=new Jb(v,Z,j,Q,n,u),ie=new lk(v,Q,H),ue=new Qb(fe,G,q,H),ce=new _x(fe,G,q,H),q.programs=ee.programs,v.capabilities=H,v.extensions=G,v.properties=K,v.renderLists=ne,v.shadowMap=ie,v.state=j,v.info=q}ve();var ge=new _k(v,fe);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;var e=q.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,a=ie.type;ve(),q.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=a}function be(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){var t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){ee.releaseProgram(e)})),e.isShaderMaterial&&ee.releaseShaderCache(e))})(e),K.remove(e)}(t)}this.xr=ge,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){var e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(T,E,!1))},this.getSize=function(e){return e.set(T,E)},this.setSize=function(e,t,n){ge.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,E=t,r.width=Math.floor(e*A),r.height=Math.floor(t*A),!1!==n&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(T*A,E*A).floor()},this.setDrawingBufferSize=function(e,t,n){T=e,E=t,A=n,r.width=Math.floor(e*n),r.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(k)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),j.viewport(k.copy(N).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),j.scissor(C.copy(R).multiplyScalar(A).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){j.setScissorTest(D=e)},this.setOpaqueSort=function(e){M=e},this.setTransparentSort=function(e){I=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),fe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",ye,!1),r.removeEventListener("webglcontextrestored",_e,!1),r.removeEventListener("webglcontextcreationerror",be,!1),ne.dispose(),re.dispose(),K.dispose(),Z.dispose(),Y.dispose(),Q.dispose(),he.dispose(),ee.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",ke),ge.removeEventListener("sessionend",Ce),P&&(P.dispose(),P=null),Se.stop()},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=V);var o=a.isMesh&&a.matrixWorld.determinant()<0,s=function(e,t,n,r,a){!0!==t.isScene&&(t=V),X.resetTextureUnits();var i=t.fog,o=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:3e3,s=(r.isMeshStandardMaterial?Y:Z).get(r.envMap||(r.isMeshStandardMaterial?t.environment:null)),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,l=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?v.toneMapping:0,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,y=K.get(r),_=d.state.lights;!0!==L||!0!==F&&e===w||ae.setState(r,e,e===w&&r.id===x);var k=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==_.state.version?k=!0:y.outputEncoding!==o?k=!0:a.isInstancedMesh&&!1===y.instancing?k=!0:a.isInstancedMesh||!0!==y.instancing?a.isSkinnedMesh&&!1===y.skinning?k=!0:a.isSkinnedMesh||!0!==y.skinning?y.envMap!==s?k=!0:!0===r.fog&&y.fog!==i?k=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ae.numPlanes&&y.numIntersection===ae.numIntersection?y.vertexAlphas!==u?k=!0:y.vertexTangents!==c?k=!0:y.morphTargets!==l?k=!0:y.morphNormals!==h?k=!0:y.morphColors!==f?k=!0:y.toneMapping!==p?k=!0:!0===H.isWebGL2&&y.morphTargetsCount!==g&&(k=!0):k=!0:k=!0:k=!0:(k=!0,y.__version=r.version);var C=y.currentProgram;!0===k&&(C=Me(r,t,a));var S=!1,T=!1,M=!1,I=C.getUniforms(),N=y.uniforms;if(j.useProgram(C.program)&&(S=!0,T=!0,M=!0),r.id!==x&&(x=r.id,T=!0),S||w!==e){if(I.setValue(fe,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&I.setValue(fe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,T=!0,M=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var R=I.map.cameraPosition;void 0!==R&&R.setValue(fe,U.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(fe,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||a.isSkinnedMesh)&&I.setValue(fe,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){I.setOptional(fe,a,"bindMatrix"),I.setOptional(fe,a,"bindMatrixInverse");var D=a.skeleton;D&&(H.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),I.setValue(fe,"boneTexture",D.boneTexture,X),I.setValue(fe,"boneTextureSize",D.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var O,z,B=n.morphAttributes;return(void 0!==B.position||void 0!==B.normal||void 0!==B.color&&!0===H.isWebGL2)&&se.update(a,n,r,C),(T||y.receiveShadow!==a.receiveShadow)&&(y.receiveShadow=a.receiveShadow,I.setValue(fe,"receiveShadow",a.receiveShadow)),T&&(I.setValue(fe,"toneMappingExposure",v.toneMappingExposure),y.needsLights&&((O=N).ambientLightColor.needsUpdate=z=M,O.lightProbe.needsUpdate=z,O.directionalLights.needsUpdate=z,O.directionalLightShadows.needsUpdate=z,O.pointLights.needsUpdate=z,O.pointLightShadows.needsUpdate=z,O.spotLights.needsUpdate=z,O.spotLightShadows.needsUpdate=z,O.rectAreaLights.needsUpdate=z,O.hemisphereLights.needsUpdate=z),i&&!0===r.fog&&te.refreshFogUniforms(N,i),te.refreshMaterialUniforms(N,r,A,E,P),Mw.upload(fe,y.uniformsList,N,X)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Mw.upload(fe,y.uniformsList,N,X),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&I.setValue(fe,"center",a.center),I.setValue(fe,"modelViewMatrix",a.modelViewMatrix),I.setValue(fe,"normalMatrix",a.normalMatrix),I.setValue(fe,"modelMatrix",a.matrixWorld),C}(e,t,n,r,a);j.setMaterial(r,o);var u=n.index,c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var l,h=1;!0===r.wireframe&&(u=$.getWireframeAttribute(n),h=2),he.setup(a,r,s,n,u);var f=ue;null!==u&&(l=J.get(u),(f=ce).setIndex(l));var p=null!==u?u.count:c.count,m=n.drawRange.start*h,g=n.drawRange.count*h,y=null!==i?i.start*h:0,_=null!==i?i.count*h:1/0,k=Math.max(m,y),C=Math.min(p,m+g,y+_)-1,S=Math.max(0,C-k+1);if(0!==S){if(a.isMesh)!0===r.wireframe?(j.setLineWidth(r.wireframeLinewidth*W()),f.setMode(1)):f.setMode(4);else if(a.isLine){var T=r.linewidth;void 0===T&&(T=1),j.setLineWidth(T*W()),f.setMode(a.isLineSegments?1:a.isLineLoop?2:3)}else a.isPoints?f.setMode(0):a.isSprite&&f.setMode(4);if(a.isInstancedMesh)f.renderInstances(k,S,a.count);else if(n.isInstancedBufferGeometry){var M=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(k,S,M)}else f.render(k,S)}},this.compile=function(e,t){(d=re.get(e)).init(),m.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Me(n[r],e,t);else Me(n,e,t)})),m.pop(),d=null};var we=null;function ke(){Se.stop()}function Ce(){Se.start()}var Se=new jb;function Te(e,t,n,r){var a=e.opaque,i=e.transmissive,o=e.transparent;d.setupLightsView(n),i.length>0&&function(e,t,n){var r=H.isWebGL2;null===P&&(P=new Ay(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:r&&!0===s?4:0})),v.getDrawingBufferSize(B),r?P.setSize(B.x,B.y):P.setSize(ay(B.x),ay(B.y));var a=v.getRenderTarget();v.setRenderTarget(P),v.clear();var i=v.toneMapping;v.toneMapping=0,Ee(e,t,n),v.toneMapping=i,X.updateMultisampleRenderTarget(P),X.updateRenderTargetMipmap(P),v.setRenderTarget(a)}(a,t,n),r&&j.viewport(k.copy(r)),a.length>0&&Ee(a,t,n),i.length>0&&Ee(i,t,n),o.length>0&&Ee(o,t,n),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1)}function Ee(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,a=0,i=e.length;a<i;a++){var o=e[a],s=o.object,u=o.geometry,c=null===r?o.material:r,l=o.group;s.layers.test(n.layers)&&Ae(s,t,n,u,c,l)}}function Ae(e,t,n,r,a,i){e.onBeforeRender(v,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(v,t,n,r,e,i),!0===a.transparent&&2===a.side?(a.side=1,a.needsUpdate=!0,v.renderBufferDirect(n,t,r,a,e,i),a.side=0,a.needsUpdate=!0,v.renderBufferDirect(n,t,r,a,e,i),a.side=2):v.renderBufferDirect(n,t,r,a,e,i),e.onAfterRender(v,t,n,r,a,i)}function Me(e,t,n){!0!==t.isScene&&(t=V);var r=K.get(e),a=d.state.lights,i=a.state.version,o=ee.getParameters(e,a.state,d.state.shadowsArray,t,n),s=ee.getProgramCacheKey(o),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:Z).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",xe),u=new Map,r.programs=u);var c=u.get(s);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===i)return Ie(e,o),c}else o.uniforms=ee.getUniforms(e),e.onBuild(n,o,v),e.onBeforeCompile(o,v),c=ee.acquireProgram(o,s),u.set(s,c),r.uniforms=o.uniforms;var l=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(l.clippingPlanes=ae.uniform),Ie(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=i,r.needsLights&&(l.ambientLightColor.value=a.state.ambient,l.lightProbe.value=a.state.probe,l.directionalLights.value=a.state.directional,l.directionalLightShadows.value=a.state.directionalShadow,l.spotLights.value=a.state.spot,l.spotLightShadows.value=a.state.spotShadow,l.rectAreaLights.value=a.state.rectArea,l.ltc_1.value=a.state.rectAreaLTC1,l.ltc_2.value=a.state.rectAreaLTC2,l.pointLights.value=a.state.point,l.pointLightShadows.value=a.state.pointShadow,l.hemisphereLights.value=a.state.hemi,l.directionalShadowMap.value=a.state.directionalShadowMap,l.directionalShadowMatrix.value=a.state.directionalShadowMatrix,l.spotShadowMap.value=a.state.spotShadowMap,l.spotShadowMatrix.value=a.state.spotShadowMatrix,l.pointShadowMap.value=a.state.pointShadowMap,l.pointShadowMatrix.value=a.state.pointShadowMatrix);var h=c.getUniforms(),f=Mw.seqWithValue(h.seq,l);return r.currentProgram=c,r.uniformsList=f,c}function Ie(e,t){var n=K.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Se.setAnimationLoop((function(e){we&&we(e)})),"undefined"!=typeof self&&Se.setContext(self),this.setAnimationLoop=function(e){we=e,ge.setAnimationLoop(e),null===e?Se.stop():Se.start()},ge.addEventListener("sessionstart",ke),ge.addEventListener("sessionend",Ce),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==g){if(!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(d=re.get(e,m.length)).init(),m.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(z),F=this.localClippingEnabled,L=ae.init(this.clippingPlanes,F,t),(f=ne.get(e,p.length)).init(),p.push(f),function e(t,n,r,a){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||O.intersectsSprite(t)){a&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);var i=Q.update(t),o=t.material;o.visible&&f.push(t,i,o,r,U.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==q.render.frame&&(t.skeleton.update(),t.skeleton.frame=q.render.frame),!t.frustumCulled||O.intersectsObject(t))){a&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);var s=Q.update(t),u=t.material;if(Array.isArray(u))for(var c=s.groups,l=0,h=c.length;l<h;l++){var p=c[l],m=u[p.materialIndex];m&&m.visible&&f.push(t,s,m,r,U.z,p)}else u.visible&&f.push(t,s,u,r,U.z,null)}for(var v=t.children,g=0,y=v.length;g<y;g++)e(v[g],n,r,a)}}(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(M,I),!0===L&&ae.beginShadows(),ie.render(d.state.shadowsArray,e,t),!0===L&&ae.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(f,e),d.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var n=t.cameras,r=0,a=n.length;r<a;r++){var i=n[r];Te(f,e,i,i.viewport)}else Te(f,e,t);null!==b&&(X.updateMultisampleRenderTarget(b),X.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),he.resetDefaultState(),x=-1,w=null,m.pop(),d=m.length>0?m[m.length-1]:null,p.pop(),f=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;var r=K.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,y=t,_=n;var r=!0;if(e){var a=K.get(e);void 0!==a.__useDefaultFramebuffer?(j.bindFramebuffer(36160,null),r=!1):void 0===a.__webglFramebuffer?X.setupRenderTarget(e):a.__hasExternalTextures&&X.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture)}var i=null,o=!1,s=!1;if(e){var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture)&&(s=!0);var c=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=c[t],o=!0):i=H.isWebGL2&&e.samples>0&&!1===X.useMultisampledRTT(e)?K.get(e).__webglMultisampledFramebuffer:c,k.copy(e.viewport),C.copy(e.scissor),S=e.scissorTest}else k.copy(N).multiplyScalar(A).floor(),C.copy(R).multiplyScalar(A).floor(),S=D;if(j.bindFramebuffer(36160,i)&&H.drawBuffers&&r&&j.drawBuffers(e,i),j.viewport(k),j.scissor(C),j.setScissorTest(S),o){var l=K.get(e.texture);fe.framebufferTexture2D(36160,36064,34069+t,l.__webglTexture,n)}else if(s){var h=K.get(e.texture);fe.framebufferTextureLayer(36160,36064,h.__webglTexture,n||0,t||0)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,a,i,o){if(e&&e.isWebGLRenderTarget){var s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){j.bindFramebuffer(36160,s);try{var u=e.texture,c=u.format,l=u.type;if(1023!==c&&le.convert(c)!==fe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=1016===l&&(G.has("EXT_color_buffer_half_float")||H.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(1009===l||le.convert(l)===fe.getParameter(35738)||1015===l&&(H.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&fe.readPixels(t,n,r,a,le.convert(c),le.convert(l),i)}finally{var f=null!==b?K.get(b).__webglFramebuffer:null;j.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),a=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r);X.setTexture2D(t,0),fe.copyTexSubImage2D(3553,n,0,0,e.x,e.y,a,i),j.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,i=t.image.height,o=le.convert(n.format),s=le.convert(n.type);X.setTexture2D(n,0),fe.pixelStorei(37440,n.flipY),fe.pixelStorei(37441,n.premultiplyAlpha),fe.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?fe.texSubImage2D(3553,r,e.x,e.y,a,i,o,s,t.image.data):t.isCompressedTexture?fe.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):fe.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&fe.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var i,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,c=le.convert(r.format),l=le.convert(r.type);if(r.isData3DTexture)X.setTexture3D(r,0),i=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),i=35866}fe.pixelStorei(37440,r.flipY),fe.pixelStorei(37441,r.premultiplyAlpha),fe.pixelStorei(3317,r.unpackAlignment);var h=fe.getParameter(3314),f=fe.getParameter(32878),d=fe.getParameter(3316),p=fe.getParameter(3315),m=fe.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;fe.pixelStorei(3314,g.width),fe.pixelStorei(32878,g.height),fe.pixelStorei(3316,e.min.x),fe.pixelStorei(3315,e.min.y),fe.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?fe.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fe.compressedTexSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,g.data)):fe.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,l,g),fe.pixelStorei(3314,h),fe.pixelStorei(32878,f),fe.pixelStorei(3316,d),fe.pixelStorei(3315,p),fe.pixelStorei(32877,m),0===a&&r.generateMipmaps&&fe.generateMipmap(i),j.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?X.setTextureCube(e,0):e.isData3DTexture?X.setTexture3D(e,0):e.isDataArrayTexture?X.setTexture2DArray(e,0):X.setTexture2D(e,0),j.unbindTexture()},this.resetState=function(){y=0,_=0,b=null,j.reset(),he.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)})(xk).prototype.isWebGL1Renderer=!0;var wk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_assertThisInitialized(e)})),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(O_),kk=function(){function e(t,n){_classCallCheck(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=$g()}return _createClass(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=$g()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=$g()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Ck=new Ry,Sk=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===a}return _createClass(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Ck.fromBufferAttribute(this,t),Ck.applyMatrix4(e),this.setXYZ(t,Ck.x,Ck.y,Ck.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ck.fromBufferAttribute(this,t),Ck.applyNormalMatrix(e),this.setXYZ(t,Ck.x,Ck.y,Ck.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ck.fromBufferAttribute(this,t),Ck.transformDirection(e),this.setXYZ(t,Ck.x,Ck.y,Ck.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,i=0;i<this.itemSize;i++)n.push(this.data.array[a+i]);return new J_(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[r+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Tk=new Ry,Ek=new Ey,Ak=new Ey,Mk=new Ry,Ik=new c_,Nk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).isSkinnedMesh=!0,a.type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new c_,a.bindMatrixInverse=new c_,a}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Ey,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){_get2(_getPrototypeOf(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Ek.fromBufferAttribute(r.attributes.skinIndex,e),Ak.fromBufferAttribute(r.attributes.skinWeight,e),Tk.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var i=Ak.getComponent(a);if(0!==i){var o=Ek.getComponent(a);Ik.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Mk.copy(Tk).applyMatrix4(Ik),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Tb),Rk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return _createClass(n)}(O_),Dk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return _classCallCheck(this,n),(e=t.call(this,null,u,c,l,h,f,o,s,d,p)).isDataTexture=!0,e.image={data:r,width:a,height:i},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _createClass(n)}(Ty),Ok=new c_,Lk=new c_,Fk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,e),this.uuid=$g(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new c_)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new c_;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,a=this.bones.length;r<a;r++){var i=this.bones[r];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,a=0,i=e.length;a<i;a++)Ok.multiplyMatrices(e[a]?e[a].matrixWorld:Lk,t[a]),Ok.toArray(n,16*a);null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=ry(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Dk(t,e,e,1023,1015);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var a=e.bones[n],i=t[a];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),i=new Rk),this.bones.push(i),this.boneInverses.push((new c_).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,a=t.length;r<a;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}]),e}(),Pk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new xy(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(K_),zk=new Ry,Bk=new Ry,Uk=new c_,Vk=new u_,Wk=new e_,Gk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ub,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Pk;return _classCallCheck(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,a=t.count;r<a;r++)zk.fromBufferAttribute(t,r-1),Bk.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=zk.distanceTo(Bk);e.setAttribute("lineDistance",new eb(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Wk.copy(n.boundingSphere),Wk.applyMatrix4(r),Wk.radius+=a,!1!==e.ray.intersectsSphere(Wk)){Uk.copy(r).invert(),Vk.copy(e.ray).applyMatrix4(Uk);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Ry,c=new Ry,l=new Ry,h=new Ry,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(var m=Math.max(0,i.start),v=Math.min(d.count,i.start+i.count)-1;m<v;m+=f){var g=d.getX(m),y=d.getX(m+1);if(u.fromBufferAttribute(p,g),c.fromBufferAttribute(p,y),!(Vk.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,i.start),x=Math.min(p.count,i.start+i.count)-1;b<x;b+=f)if(u.fromBufferAttribute(p,b),c.fromBufferAttribute(p,b+1),!(Vk.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var i=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=r}}}}}]),n}(O_),Hk=new Ry,jk=new Ry,qk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).isLineSegments=!0,a.type="LineSegments",a}return _createClass(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,a=t.count;r<a;r+=2)Hk.fromBufferAttribute(t,r),jk.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Hk.distanceTo(jk);e.setAttribute("lineDistance",new eb(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Gk),Kk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).isLineLoop=!0,a.type="LineLoop",a}return _createClass(n)}(Gk),Xk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new xy(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(K_),Zk=new c_,Yk=new u_,Jk=new e_,$k=new Ry,Qk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ub,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xk;return _classCallCheck(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return _createClass(n,[{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jk.copy(n.boundingSphere),Jk.applyMatrix4(r),Jk.radius+=a,!1!==e.ray.intersectsSphere(Jk)){Zk.copy(r).invert(),Yk.copy(e.ray).applyMatrix4(Zk);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=n.index,c=n.attributes.position;if(null!==u)for(var l=Math.max(0,i.start),h=Math.min(u.count,i.start+i.count);l<h;l++){var f=u.getX(l);$k.fromBufferAttribute(c,f),eC($k,f,s,r,e,t,this)}else for(var d=Math.max(0,i.start),p=Math.min(c.count,i.start+i.count);d<p;d++)$k.fromBufferAttribute(c,d),eC($k,d,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var i=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=r}}}}}]),n}(O_);function eC(e,t,n,r,a,i,o){var s=Yk.distanceSqToPoint(e);if(s<n){var u=new Ry;Yk.closestPointToPoint(e,u),u.applyMatrix4(r);var c=a.ray.origin.distanceTo(u);if(c<a.near||c>a.far)return;i.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}var tC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new xy(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new xy(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new oy(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(K_),nC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new oy(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(_assertThisInitialized(r),"reflectivity",{get:function(){return Qg(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new xy(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new xy(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new xy(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return _createClass(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=_toConsumableArray(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(tC),rC={arraySlice:function(e,t,n){return rC.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),i=0,o=0;o!==r;++i)for(var s=n[i]*t,u=0;u!==t;++u)a[o++]=e[s+u];return a},flattenJSON:function(e,t,n,r){for(var a=1,i=e[0];void 0!==i&&void 0===i[r];)i=e[a++];if(void 0!==i){var o=i[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=i[r])&&(t.push(i.time),n.push.apply(n,o)),i=e[a++]}while(void 0!==i);else if(void 0!==o.toArray)do{void 0!==(o=i[r])&&(t.push(i.time),o.toArray(n,n.length)),i=e[a++]}while(void 0!==i);else do{void 0!==(o=i[r])&&(t.push(i.time),n.push(o)),i=e[a++]}while(void 0!==i)}},subclip:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,i=e.clone();i.name=t;for(var o=[],s=0;s<i.tracks.length;++s){for(var u=i.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*a;if(!(d<n||d>=r)){l.push(u.times[f]);for(var p=0;p<c;++p)h.push(u.values[f*c+p])}}0!==l.length&&(u.times=rC.convertArray(l,u.times.constructor),u.values=rC.convertArray(h,u.values.constructor),o.push(u))}i.tracks=o;for(var m=1/0,v=0;v<i.tracks.length;++v)m>i.tracks[v].times[0]&&(m=i.tracks[v].times[0]);for(var g=0;g<i.tracks.length;++g)i.tracks[g].shift(-1*m);return i.resetDuration(),i},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var a=n.tracks.length,i=t/r,o=function(t){var r=n.tracks[t],a=r.ValueTypeName;if("bool"===a||"string"===a)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===a}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=0,l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var h=r.times.length-1,f=void 0;if(i<=r.times[0])f=rC.arraySlice(r.values,s,u-s);else if(i>=r.times[h]){var d=h*u+s;f=rC.arraySlice(r.values,d,d+u-s)}else{var p=r.createInterpolant(),m=s,v=u-s;p.evaluate(i),f=rC.arraySlice(p.resultBuffer,m,v)}"quaternion"===a&&(new Ny).fromArray(f).normalize().conjugate().toArray(f);for(var g=o.times.length,y=0;y<g;++y){var _=y*l+c;if("quaternion"===a)Ny.multiplyQuaternionsFlat(o.values,_,f,0,o.values,_);else for(var b=l-2*c,x=0;x<b;++x)o.values[_+x]-=f[x]}},s=0;s<a;++s)o(s);return e.blendMode=2501,e}},aC=function(){function e(t,n,r,a){_classCallCheck(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return _createClass(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(a=r,e<(r=t[++n]))break t}i=t.length;break n}if(e>=a)break e;var s=t[1];e<s&&(n=2,a=s);for(var u=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=a,e>=(a=t[--n-1]))break t}i=n,n=0}for(;n<i;){var c=n+i>>>1;e<t[c]?i=c:n=c+1}if(r=t[n],void 0===(a=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,i=0;i!==r;++i)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),iC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,a,i))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:2400,endingEnd:2400},o}return _createClass(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,a=e-2,i=e+1,o=r[a],s=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:a=e,o=2*t-n;break;case 2402:o=t+r[a=r.length-2]-r[a+1];break;default:a=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:i=e,s=2*n-t;break;case 2402:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=a*c,this._offsetNext=i*c}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,_=f*m-f*p,b=0;b!==o;++b)a[b]=v*i[c+b]+g*i[u+b]+y*i[s+b]+_*i[l+b];return a}}]),n}(aC),oC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){return _classCallCheck(this,n),t.call(this,e,r,a,i)}return _createClass(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(r-t),l=1-c,h=0;h!==o;++h)a[h]=i[u+h]*l+i[s+h]*c;return a}}]),n}(aC),sC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){return _classCallCheck(this,n),t.call(this,e,r,a,i)}return _createClass(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(aC),uC=function(){function e(t,n,r,a){if(_classCallCheck(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=rC.convertArray(n,this.TimeBufferType),this.values=rC.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return _createClass(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new sC(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new oC(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new iC(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,a=0,i=r-1;a!==r&&n[a]<e;)++a;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==a||i!==r){a>=i&&(a=(i=Math.max(i,1))-1);var o=this.getValueSize();this.times=rC.arraySlice(n,a,i),this.values=rC.arraySlice(this.values,a*o,i*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==a;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,i),e=!1;break}i=s}if(void 0!==r&&rC.isTypedArray(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=rC.arraySlice(this.times),t=rC.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),a=e.length-1,i=1,o=1;o<a;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var c=o*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=t[c+f];if(d!==t[l+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var p=o*n,m=i*n,v=0;v!==n;++v)t[m+v]=t[p+v]}++i}}if(a>0){e[i]=e[a];for(var g=a*n,y=i*n,_=0;_!==n;++_)t[y+_]=t[g+_];++i}return i!==e.length?(this.times=rC.arraySlice(e,0,i),this.values=rC.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=rC.arraySlice(this.times,0),t=rC.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:rC.convertArray(e.times,Array),values:rC.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();uC.prototype.TimeBufferType=Float32Array,uC.prototype.ValueBufferType=Float32Array,uC.prototype.DefaultInterpolation=2301;var cC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(uC);cC.prototype.ValueTypeName="bool",cC.prototype.ValueBufferType=Array,cC.prototype.DefaultInterpolation=2300,cC.prototype.InterpolantFactoryMethodLinear=void 0,cC.prototype.InterpolantFactoryMethodSmooth=void 0;var lC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(uC);lC.prototype.ValueTypeName="color";var hC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(uC);hC.prototype.ValueTypeName="number";var fC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){return _classCallCheck(this,n),t.call(this,e,r,a,i)}return _createClass(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,c=u+o;u!==c;u+=4)Ny.slerpFlat(a,0,i,u-o,i,u,s);return a}}]),n}(aC),dC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new fC(this.times,this.values,this.getValueSize(),e)}}]),n}(uC);dC.prototype.ValueTypeName="quaternion",dC.prototype.DefaultInterpolation=2301,dC.prototype.InterpolantFactoryMethodSmooth=void 0;var pC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(uC);pC.prototype.ValueTypeName="string",pC.prototype.ValueBufferType=Array,pC.prototype.DefaultInterpolation=2300,pC.prototype.InterpolantFactoryMethodLinear=void 0,pC.prototype.InterpolantFactoryMethodSmooth=void 0;var mC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(uC);mC.prototype.ValueTypeName="vector";var vC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;_classCallCheck(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=$g(),this.duration<0&&this.resetDuration()}return _createClass(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,i=n.length;a!==i;++a)t.push(gC(n[a]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,i=n.length;a!==i;++a)t.push(uC.toJSON(n[a]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var a=t.length,i=[],o=0;o<a;o++){var s=[],u=[];s.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);var c=rC.getKeyframeOrder(s);s=rC.sortedArray(s,1,c),u=rC.sortedArray(u,1,c),r||0!==s[0]||(s.push(a),u.push(u[0])),i.push(new hC(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,i)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var s=e[i],u=s.name.match(a);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var i=[],o=[];rC.flattenJSON(n,i,o,r),0!==i.length&&a.push(new e(t,i,o))}},r=[],a=e.name||"default",i=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var h={},f=void 0;for(f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)h[l[f].morphTargets[d]]=-1;for(var p in h){for(var m=[],v=[],g=0;g!==l[f].morphTargets.length;++g){var y=l[f];m.push(y.time),v.push(y.morphTarget===p?1:0)}r.push(new hC(".morphTargetInfluence["+p+"]",m,v))}s=h.length*i}else{var _=".bones["+t[c].name+"]";n(mC,_+".position",l,"pos",r),n(dC,_+".quaternion",l,"rot",r),n(mC,_+".scale",l,"scl",r)}}return 0===r.length?null:new this(a,s,r,o)}}]),e}();function gC(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hC;case"vector":case"vector2":case"vector3":case"vector4":return mC;case"color":return lC;case"quaternion":return dC;case"bool":case"boolean":return cC;case"string":return pC}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];rC.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var yC={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},_C=new(function(){return _createClass((function e(t,n,r){_classCallCheck(this,e);var a=this,i=!1,o=0,s=0,u=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===i&&void 0!==a.onStart&&a.onStart(e,o,s),i=!0},this.itemEnd=function(e){o++,void 0!==a.onProgress&&a.onProgress(e,o,s),o===s&&(i=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],a=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}}))}()),bC=function(){function e(t){_classCallCheck(this,e),this.manager=void 0!==t?t:_C,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _createClass(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),xC={},wC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"load",value:function(e,t,n,r){var a=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=yC.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;if(void 0===xC[e]){xC[e]=[],xC[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=xC[e],r=t.body.getReader(),a=t.headers.get("Content-Length"),i=a?parseInt(a):0,o=0!==i,s=0,u=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var a=r.done,u=r.value;if(a)e.close();else{s+=u.byteLength;for(var c=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:i}),l=0,h=n.length;l<h;l++){var f=n[l];f.onProgress&&f.onProgress(c)}e.enqueue(u),t()}}))}()}});return new Response(u)}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){yC.add(e,t);var n=xC[e];delete xC[e];for(var r=0,a=n.length;r<a;r++){var i=n[r];i.onLoad&&i.onLoad(t)}})).catch((function(t){var n=xC[e];if(void 0===n)throw a.manager.itemError(e),t;delete xC[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e)})).finally((function(){a.manager.itemEnd(e)})),this.manager.itemStart(e)}else xC[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(bC),kC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=yC.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o=cy("img");function s(){c(),yC.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(t){c(),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}]),n}(bC),CC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"load",value:function(e,t,n,r){var a=new Ty,i=new kC(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)}),n,r),a}}]),n}(bC),SC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new xy(e),r.intensity=a,r}return _createClass(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=_get2(_getPrototypeOf(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(O_),TC=new c_,EC=new Ry,AC=new Ry,MC=function(){function e(t){_classCallCheck(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new oy(512,512),this.map=null,this.mapPass=null,this.matrix=new c_,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hb,this._frameExtents=new oy(1,1),this._viewportCount=1,this._viewports=[new Ey(0,0,1,1)]}return _createClass(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;EC.setFromMatrixPosition(e.matrixWorld),t.position.copy(EC),AC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(AC),t.updateMatrixWorld(),TC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),IC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,new Ob(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return _createClass(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Jg*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&a===t.aspect&&i===t.far||(t.fov=r,t.aspect=a,t.far=i,t.updateProjectionMatrix()),_get2(_getPrototypeOf(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(MC),NC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return _classCallCheck(this,n),(a=t.call(this,e,r)).isSpotLight=!0,a.type="SpotLight",a.position.copy(O_.DefaultUp),a.updateMatrix(),a.target=new O_,a.distance=i,a.angle=o,a.penumbra=s,a.decay=u,a.shadow=new IC,a}return _createClass(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(SC),RC=new c_,DC=new Ry,OC=new Ry,LC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,new Ob(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new oy(4,2),e._viewportCount=6,e._viewports=[new Ey(2,1,1,1),new Ey(0,1,1,1),new Ey(3,1,1,1),new Ey(1,1,1,1),new Ey(3,0,1,1),new Ey(1,0,1,1)],e._cubeDirections=[new Ry(1,0,0),new Ry(-1,0,0),new Ry(0,0,1),new Ry(0,0,-1),new Ry(0,1,0),new Ry(0,-1,0)],e._cubeUps=[new Ry(0,1,0),new Ry(0,1,0),new Ry(0,1,0),new Ry(0,1,0),new Ry(0,0,1),new Ry(0,0,-1)],e}return _createClass(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),DC.setFromMatrixPosition(e.matrixWorld),n.position.copy(DC),OC.copy(n.position),OC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(OC),n.updateMatrixWorld(),r.makeTranslation(-DC.x,-DC.y,-DC.z),RC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RC)}}]),n}(MC),FC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,n),(a=t.call(this,e,r)).isPointLight=!0,a.type="PointLight",a.distance=i,a.decay=o,a.shadow=new LC,a}return _createClass(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(SC),PC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,new rx(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return _createClass(n)}(MC),zC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).isDirectionalLight=!0,a.type="DirectionalLight",a.position.copy(O_.DefaultUp),a.updateMatrix(),a.target=new O_,a.shadow=new PC,a}return _createClass(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(SC),BC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).isAmbientLight=!0,a.type="AmbientLight",a}return _createClass(n)}(SC),UC=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(a){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),VC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return _createClass(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=yC.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){yC.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}(bC),WC=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _createClass(e,[{key:"start",value:function(){this.startTime=GC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=GC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function GC(){return("undefined"==typeof performance?Date:performance).now()}var HC=function(){function e(t,n,r){var a,i,o;switch(_classCallCheck(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":a=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return _createClass(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,i=this.cumulativeWeight;if(0===i){for(var o=0;o!==r;++o)n[a+o]=n[o];i=t}else i+=t,this._mixBufferRegion(n,a,0,t/i,r);this.cumulativeWeight=i}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-a,t),i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.buffer,t=this.valueSize,n=t*this._origIndex;this.binding.getValue(e,n);for(var r=t,a=n;r!==a;++r)e[r]=e[n+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,a){if(r>=.5)for(var i=0;i!==a;++i)e[t+i]=e[n+i]}},{key:"_slerp",value:function(e,t,n,r){Ny.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,a){var i=this._workIndex*a;Ny.multiplyQuaternionsFlat(e,i,e,t,e,n),Ny.slerpFlat(e,t,e,t,e,i,r)}},{key:"_lerp",value:function(e,t,n,r,a){for(var i=1-r,o=0;o!==a;++o){var s=t+o;e[s]=e[s]*i+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,a){for(var i=0;i!==a;++i){var o=t+i;e[o]=e[o]+e[n+i]*r}}}]),e}(),jC=new RegExp("[\\[\\]\\.:\\/]","g"),qC="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",KC=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",qC)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),XC=["material","materials","bones"],ZC=function(){function e(t,n,r){_classCallCheck(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _createClass(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,a=n.propertyName,i=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[a];if(void 0!==u){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+a+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(jC,"")}},{key:"parseTrackName",value:function(e){var t=KC.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var a=n.nodeName.substring(r+1);-1!==XC.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.name===t||a.uuid===t)return a;var i=e(a.children);if(i)return i}return null}(e.children);if(r)return r}return null}}]),e}();ZC.Composite=function(){function e(t,n,r){_classCallCheck(this,e);var a=r||ZC.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return _createClass(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),ZC.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ZC.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ZC.prototype.GetterByBindingType=[ZC.prototype._getValue_direct,ZC.prototype._getValue_array,ZC.prototype._getValue_arrayElement,ZC.prototype._getValue_toArray],ZC.prototype.SetterByBindingTypeAndVersioning=[[ZC.prototype._setValue_direct,ZC.prototype._setValue_direct_setNeedsUpdate,ZC.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ZC.prototype._setValue_array,ZC.prototype._setValue_array_setNeedsUpdate,ZC.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ZC.prototype._setValue_arrayElement,ZC.prototype._setValue_arrayElement_setNeedsUpdate,ZC.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ZC.prototype._setValue_fromArray,ZC.prototype._setValue_fromArray_setNeedsUpdate,ZC.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var YC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;_classCallCheck(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=a;for(var i=n.tracks,o=i.length,s=new Array(o),u={endingStart:2400,endingEnd:2400},c=0;c!==o;++c){var l=i[c].createInterpolant(null);s[c]=l,l.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return _createClass(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,i=r/a;e.warp(1,a/r,t),this.warp(i,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,a=r.time,i=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=a,s[1]=a+n,u[0]=e/i,u[1]=t/i,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var a=this._startTime;if(null!==a){var i=(e-a)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);break;case 2500:default:for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),c[f].accumulate(r,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,i=2202===n;if(0===e)return-1===a?r:i&&1==(1&a)?t-r:r;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);var s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,i)}else this._setEndings(!1,!1,i);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(i&&1==(1&a))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,a=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var o=i.parameterPositions,s=i.sampleValues;return o[0]=a,s[0]=t,o[1]=a+e,s[1]=n,this}}]),e}(),JC=new Float32Array(1),$C=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return _createClass(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,i=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==a;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)++d.referenceCount,i[l]=d;else{if(void 0!==(d=i[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new HC(ZC.create(n,f,t&&t._propertyBindings[l].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),i[l]=d}o[l].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,i=0,o=a.length;i!==o;++i){var s=a[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,a=this._actionsByClip,i=a[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=i;else{var o=i.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,i=this._actionsByClip,o=i[a],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete i[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,a=this._bindings,i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,i=this._bindingsByRootAndName,o=i[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[a],0===Object.keys(o).length&&delete i[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new oC(new Float32Array(2),new Float32Array(2),1,JC)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,a=r.uuid,i="string"==typeof e?vC.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==i?i.blendMode:2500),void 0!==s){var c=s.actionByRoot[a];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===i&&(i=u._clip)}if(null===i)return null;var l=new YC(this,i,t,n);return this._bindAction(l,u),this._addInactiveAction(l,o,a),l}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,a="string"==typeof e?vC.findByName(n,e):e,i=this._actionsByClip[a?a.uuid:e];return void 0!==i&&i.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,a=Math.sign(e),i=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,a,i);for(var s=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)s[c].apply(i);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(void 0!==a){for(var i=a.knownActions,o=0,s=i.length;o!==s;++o){var u=i[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var i=this._bindingsByRootAndName[t];if(void 0!==i)for(var o in i){var s=i[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Kg),QC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,e),this.radius=t,this.phi=n,this.theta=r,this}return _createClass(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Qg(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");var eS=n("9wtq"),tS={type:"change"},nS={type:"start"},rS={type:"end"},aS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i,o,s,u,c,l;_classCallCheck(this,n),a=t.call(this),void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.object=e,a.domElement=r,a.domElement.style.touchAction="none",a.enabled=!0,a.target=new Ry,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.05,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.panSpeed=1,a.screenSpacePanning=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},a.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},a.touches={ONE:0,TWO:2},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a._domElementKeyEvents=null,a.getPolarAngle=function(){return m.phi},a.getAzimuthalAngle=function(){return m.theta},a.getDistance=function(){return this.object.position.distanceTo(this.target)},a.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),this._domElementKeyEvents=e},a.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},a.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(tS),h.update(),d=f.NONE},a.update=(i=new Ry,o=(new Ny).setFromUnitVectors(e.up,new Ry(0,1,0)),s=o.clone().invert(),u=new Ry,c=new Ny,l=2*Math.PI,function(){var e=h.object.position;i.copy(e).sub(h.target),i.applyQuaternion(o),m.setFromVector3(i),h.autoRotate&&d===f.NONE&&R(2*Math.PI/60/60*h.autoRotateSpeed),h.enableDamping?(m.theta+=v.theta*h.dampingFactor,m.phi+=v.phi*h.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);var t=h.minAzimuthAngle,n=h.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=l:t>Math.PI&&(t-=l),n<-Math.PI?n+=l:n>Math.PI&&(n-=l),m.theta=t<=n?Math.max(t,Math.min(n,m.theta)):m.theta>(t+n)/2?Math.max(t,m.theta):Math.min(n,m.theta)),m.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(h.minDistance,Math.min(h.maxDistance,m.radius)),!0===h.enableDamping?h.target.addScaledVector(y,h.dampingFactor):h.target.add(y),i.setFromSpherical(m),i.applyQuaternion(s),e.copy(h.target).add(i),h.object.lookAt(h.target),!0===h.enableDamping?(v.theta*=1-h.dampingFactor,v.phi*=1-h.dampingFactor,y.multiplyScalar(1-h.dampingFactor)):(v.set(0,0,0),y.set(0,0,0)),g=1,!!(_||u.distanceToSquared(h.object.position)>p||8*(1-c.dot(h.object.quaternion))>p)&&(h.dispatchEvent(tS),u.copy(h.object.position),c.copy(h.object.quaternion),_=!1,!0)}),a.dispose=function(){h.domElement.removeEventListener("contextmenu",ee),h.domElement.removeEventListener("pointerdown",X),h.domElement.removeEventListener("pointercancel",J),h.domElement.removeEventListener("wheel",$),h.domElement.removeEventListener("pointermove",Z),h.domElement.removeEventListener("pointerup",Y),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",Q)};var h=_assertThisInitialized(a),f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,p=1e-6,m=new QC,v=new QC,g=1,y=new Ry,_=!1,b=new oy,x=new oy,w=new oy,k=new oy,C=new oy,S=new oy,T=new oy,E=new oy,A=new oy,M=[],I={};function N(){return Math.pow(.95,h.zoomSpeed)}function R(e){v.theta-=e}function D(e){v.phi-=e}var O,L=(O=new Ry,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),y.add(O)}),F=function(){var e=new Ry;return function(t,n){!0===h.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(h.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),P=function(){var e=new Ry;return function(t,n){var r=h.domElement;if(h.object.isPerspectiveCamera){e.copy(h.object.position).sub(h.target);var a=e.length();a*=Math.tan(h.object.fov/2*Math.PI/180),L(2*t*a/r.clientHeight,h.object.matrix),F(2*n*a/r.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(L(t*(h.object.right-h.object.left)/h.object.zoom/r.clientWidth,h.object.matrix),F(n*(h.object.top-h.object.bottom)/h.object.zoom/r.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function z(e){h.object.isPerspectiveCamera?g/=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*e)),h.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function B(e){h.object.isPerspectiveCamera?g*=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/e)),h.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function U(e){b.set(e.clientX,e.clientY)}function V(e){k.set(e.clientX,e.clientY)}function W(){1===M.length?b.set(M[0].pageX,M[0].pageY):b.set(.5*(M[0].pageX+M[1].pageX),.5*(M[0].pageY+M[1].pageY))}function G(){1===M.length?k.set(M[0].pageX,M[0].pageY):k.set(.5*(M[0].pageX+M[1].pageX),.5*(M[0].pageY+M[1].pageY))}function H(){var e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);T.set(0,n)}function j(e){if(1==M.length)x.set(e.pageX,e.pageY);else{var t=re(e);x.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}w.subVectors(x,b).multiplyScalar(h.rotateSpeed);var n=h.domElement;R(2*Math.PI*w.x/n.clientHeight),D(2*Math.PI*w.y/n.clientHeight),b.copy(x)}function q(e){if(1===M.length)C.set(e.pageX,e.pageY);else{var t=re(e);C.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}S.subVectors(C,k).multiplyScalar(h.panSpeed),P(S.x,S.y),k.copy(C)}function K(e){var t=re(e),n=e.pageX-t.x,r=e.pageY-t.y,a=Math.sqrt(n*n+r*r);E.set(0,a),A.set(0,Math.pow(E.y/T.y,h.zoomSpeed)),z(A.y),T.copy(E)}function X(e){!1!==h.enabled&&(0===M.length&&(h.domElement.setPointerCapture(e.pointerId),h.domElement.addEventListener("pointermove",Z),h.domElement.addEventListener("pointerup",Y)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(ne(e),M.length){case 1:switch(h.touches.ONE){case 0:if(!1===h.enableRotate)return;W(),d=f.TOUCH_ROTATE;break;case 1:if(!1===h.enablePan)return;G(),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(h.touches.TWO){case 2:if(!1===h.enableZoom&&!1===h.enablePan)return;h.enableZoom&&H(),h.enablePan&&G(),d=f.TOUCH_DOLLY_PAN;break;case 3:if(!1===h.enableZoom&&!1===h.enableRotate)return;h.enableZoom&&H(),h.enableRotate&&W(),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&h.dispatchEvent(nS)}(e):function(e){var t;switch(e.button){case 0:t=h.mouseButtons.LEFT;break;case 1:t=h.mouseButtons.MIDDLE;break;case 2:t=h.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===h.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),d=f.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===h.enablePan)return;V(e),d=f.PAN}else{if(!1===h.enableRotate)return;U(e),d=f.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===h.enableRotate)return;U(e),d=f.ROTATE}else{if(!1===h.enablePan)return;V(e),d=f.PAN}break;default:d=f.NONE}d!==f.NONE&&h.dispatchEvent(nS)}(e))}function Z(e){!1!==h.enabled&&("touch"===e.pointerType?function(e){switch(ne(e),d){case f.TOUCH_ROTATE:if(!1===h.enableRotate)return;j(e),h.update();break;case f.TOUCH_PAN:if(!1===h.enablePan)return;q(e),h.update();break;case f.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;!function(e){h.enableZoom&&K(e),h.enablePan&&q(e)}(e),h.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;!function(e){h.enableZoom&&K(e),h.enableRotate&&j(e)}(e),h.update();break;default:d=f.NONE}}(e):function(e){if(!1!==h.enabled)switch(d){case f.ROTATE:if(!1===h.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,b).multiplyScalar(h.rotateSpeed);var t=h.domElement;R(2*Math.PI*w.x/t.clientHeight),D(2*Math.PI*w.y/t.clientHeight),b.copy(x),h.update()}(e);break;case f.DOLLY:if(!1===h.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),A.subVectors(E,T),A.y>0?z(N()):A.y<0&&B(N()),T.copy(E),h.update()}(e);break;case f.PAN:if(!1===h.enablePan)return;!function(e){C.set(e.clientX,e.clientY),S.subVectors(C,k).multiplyScalar(h.panSpeed),P(S.x,S.y),k.copy(C),h.update()}(e)}}(e))}function Y(e){te(e),0===M.length&&(h.domElement.releasePointerCapture(e.pointerId),h.domElement.removeEventListener("pointermove",Z),h.domElement.removeEventListener("pointerup",Y)),h.dispatchEvent(rS),d=f.NONE}function J(e){te(e)}function $(e){!1!==h.enabled&&!1!==h.enableZoom&&d===f.NONE&&(e.preventDefault(),h.dispatchEvent(nS),function(e){e.deltaY<0?B(N()):e.deltaY>0&&z(N()),h.update()}(e),h.dispatchEvent(rS))}function Q(e){!1!==h.enabled&&!1!==h.enablePan&&function(e){var t=!1;switch(e.code){case h.keys.UP:P(0,h.keyPanSpeed),t=!0;break;case h.keys.BOTTOM:P(0,-h.keyPanSpeed),t=!0;break;case h.keys.LEFT:P(h.keyPanSpeed,0),t=!0;break;case h.keys.RIGHT:P(-h.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),h.update())}(e)}function ee(e){!1!==h.enabled&&e.preventDefault()}function te(e){delete I[e.pointerId];for(var t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function ne(e){var t=I[e.pointerId];void 0===t&&(t=new oy,I[e.pointerId]=t),t.set(e.pageX,e.pageY)}function re(e){return I[(e.pointerId===M[0].pointerId?M[1]:M[0]).pointerId]}return h.domElement.addEventListener("contextmenu",ee),h.domElement.addEventListener("pointerdown",X),h.domElement.addEventListener("pointercancel",J),h.domElement.addEventListener("wheel",$,{passive:!1}),a.update(),a}return _createClass(n)}(Kg),iS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new hS(e)})),r.register((function(e){return new yS(e)})),r.register((function(e){return new _S(e)})),r.register((function(e){return new dS(e)})),r.register((function(e){return new pS(e)})),r.register((function(e){return new mS(e)})),r.register((function(e){return new vS(e)})),r.register((function(e){return new lS(e)})),r.register((function(e){return new gS(e)})),r.register((function(e){return new fS(e)})),r.register((function(e){return new uS(e)})),r.register((function(e){return new bS(e)})),r}return _createClass(n,[{key:"load",value:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:UC.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new wC(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var a,i={},o={};if("string"==typeof e)a=e;else if(UC.decodeText(new Uint8Array(e,0,4))===xS){try{i[sS.KHR_BINARY_GLTF]=new wS(e)}catch(p){return void(r&&r(p))}a=i[sS.KHR_BINARY_GLTF].content}else a=UC.decodeText(new Uint8Array(e));var s=JSON.parse(a);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new GS(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var c=0;c<this.pluginCallbacks.length;c++){var l=this.pluginCallbacks[c](u);o[l.name]=l,i[l.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case sS.KHR_MATERIALS_UNLIT:i[f]=new cS;break;case sS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[f]=new TS;break;case sS.KHR_DRACO_MESH_COMPRESSION:i[f]=new kS(s,this.dracoLoader);break;case sS.KHR_TEXTURE_TRANSFORM:i[f]=new CS;break;case sS.KHR_MESH_QUANTIZATION:i[f]=new ES;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(i),u.setPlugins(o),u.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.parse(e,t,r,a)}))}}]),n}(bC);function oS(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var sS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},uS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return _createClass(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e],s=new xy(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(a=new zC(s)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new FC(s)).distance=u;break;case"spot":(a=new NC(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return n._getNodeRef(t.cache,a,e)}))}}]),e}(),cS=function(){function e(){_classCallCheck(this,e),this.name=sS.KHR_MATERIALS_UNLIT}return _createClass(e,[{key:"getMaterialType",value:function(){return X_}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new xy(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture,3001))}return Promise.all(r)}}]),e}(),lS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_EMISSIVE_STRENGTH}return _createClass(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),hS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_CLEARCOAT}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new oy(o,o)}return Promise.all(a)}}]),e}(),fS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_IRIDESCENCE}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.iridescenceFactor&&(t.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&a.push(n.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(t.iridescenceIOR=i.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&a.push(n.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(a)}}]),e}(),dS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_SHEEN}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[];t.sheenColor=new xy(0,0,0),t.sheenRoughness=0,t.sheen=1;var i=r.extensions[this.name];return void 0!==i.sheenColorFactor&&t.sheenColor.fromArray(i.sheenColorFactor),void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",i.sheenColorTexture,3001)),void 0!==i.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(a)}}]),e}(),pS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_TRANSMISSION}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}]),e}(),mS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_VOLUME}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||0;var o=i.attenuationColor||[1,1,1];return t.attenuationColor=new xy(o[0],o[1],o[2]),Promise.all(a)}}]),e}(),vS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_IOR}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),gS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_MATERIALS_SPECULAR}return _createClass(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?nC:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));var o=i.specularColorFactor||[1,1,1];return t.specularColor=new xy(o[0],o[1],o[2]),void 0!==i.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",i.specularColorTexture,3001)),Promise.all(a)}}]),e}(),yS=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.KHR_TEXTURE_BASISU}return _createClass(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,i)}}]),e}(),_S=function(){function e(t){_classCallCheck(this,e),this.parser=t,this.name=sS.EXT_TEXTURE_WEBP,this.isSupported=null}return _createClass(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;var i=a.extensions[t],o=r.images[i.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,i.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),bS=function(){function e(t){_classCallCheck(this,e),this.name=sS.EXT_MESHOPT_COMPRESSION,this.parser=t}return _createClass(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,i.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,a=r.count,o=r.byteStride,s=new ArrayBuffer(a*o),u=new Uint8Array(e[0],t,n);return i.decodeGltfBuffer(new Uint8Array(s),a,o,u,r.mode,r.filter),s}))}return null}}]),e}(),xS="glTF",wS=_createClass((function e(t){_classCallCheck(this,e),this.name=sS.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:UC.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==xS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,a=new DataView(t,12),i=0;i<r;){var o=a.getUint32(i,!0);i+=4;var s=a.getUint32(i,!0);if(i+=4,1313821514===s){var u=new Uint8Array(t,12+i,o);this.content=UC.decodeText(u)}else if(5130562===s){var c=12+i;this.body=t.slice(c,c+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),kS=function(){function e(t,n){if(_classCallCheck(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=sS.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return _createClass(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},s={},u={};for(var c in i){var l=LS[c]||c.toLowerCase();o[l]=i[c]}for(var h in e.attributes){var f=LS[h]||h.toLowerCase();if(void 0!==i[h]){var d=n.accessors[e.attributes[h]];u[f]=NS[d.componentType],s[f]=!0===d.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),o,u)}))}))}}]),e}(),CS=function(){function e(){_classCallCheck(this,e),this.name=sS.KHR_TEXTURE_TRANSFORM}return _createClass(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale?e:(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e)}}]),e}(),SS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),c={specular:{value:(new xy).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=c,r.onBeforeCompile=function(e){for(var t in c)e.uniforms[t]=c[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",u)},Object.defineProperties(_assertThisInitialized(r),{specular:{get:function(){return c.specular.value},set:function(e){c.specular.value=e}},specularMap:{get:function(){return c.specularMap.value},set:function(e){c.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return c.glossiness.value},set:function(e){c.glossiness.value=e}},glossinessMap:{get:function(){return c.glossinessMap.value},set:function(e){c.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return _createClass(n,[{key:"copy",value:function(e){return _get2(_getPrototypeOf(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(tC),TS=function(){function e(){_classCallCheck(this,e),this.name=sS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}return _createClass(e,[{key:"getMaterialType",value:function(){return SS}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new xy(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture,3001)),e.emissive=new xy(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new xy(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o,3001))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new SS(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}]),e}(),ES=_createClass((function e(){_classCallCheck(this,e),this.name=sS.KHR_MESH_QUANTIZATION})),AS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){return _classCallCheck(this,n),t.call(this,e,r,a,i)}return _createClass(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,c=r-t,l=(n-t)/c,h=l*l,f=h*l,d=e*u,p=d-u,m=-2*f+3*h,v=f-h,g=1-m,y=v-h+l,_=0;_!==o;_++)a[_]=g*i[p+_+o]+y*(i[p+_+s]*c)+m*i[d+_+o]+v*(i[d+_]*c);return a}}]),n}(aC),MS=new Ny,IS=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"interpolate_",value:function(e,t,r,a){var i=_get2(_getPrototypeOf(n.prototype),"interpolate_",this).call(this,e,t,r,a);return MS.fromArray(i).normalize().toArray(i),i}}]),n}(AS),NS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},RS={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},DS={33071:1001,33648:1002,10497:1e3},OS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},LS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},FS={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},PS={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300};function zS(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function BS(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function US(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var i=0,o=a.length;i<o;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function VS(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function WS(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var GS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new oS,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=navigator.userAgent.indexOf("Firefox")>-1,i=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader="undefined"==typeof createImageBitmap||r||a&&i<98?new CC(this.options.manager):new VC(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new wC(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return _createClass(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};zS(a,i,r),BS(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var i=t[r].joints,o=0,s=i.length;o<s;o++)e[i[o]].isBone=!0;for(var u=0,c=e.length;u<c;u++){var l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var i,o=_createForOfIteratorHelper(t.children.entries());try{for(o.s();!(i=o.n()).done;){var s=_slicedToArray(i.value,2),u=s[0];e(s[1],n.children[u])}}catch(c){o.e(c)}finally{o.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[sS.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,a){n.load(UC.resolveURL(t.uri,r.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteOffset||0;return e.slice(n,n+(t.byteLength||0))}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return a.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,o=e[0],s=OS[r.type],u=NS[r.componentType],c=u.BYTES_PER_ELEMENT,l=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(h&&h!==c*s){var d=Math.floor(l/h),p="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+d+":"+r.count,m=t.cache.get(p);m||(a=new u(o,d*h,r.count*h/c),m=new kk(a,h/c),t.cache.add(p,m)),i=new Sk(m,s,l%h/c,f)}else a=null===o?new u(r.count*s):new u(o,l,r.count*s),i=new J_(a,s,f);if(void 0!==r.sparse){var v=r.sparse.values.byteOffset||0,g=new(0,NS[r.sparse.indices.componentType])(e[1],r.sparse.indices.byteOffset||0,r.sparse.count*OS.SCALAR),y=new u(e[2],v,r.sparse.count*s);null!==o&&(i=new J_(i.array.slice(),i.itemSize,i.normalized));for(var _=0,b=g.length;_<b;_++){var x=g[_];if(i.setX(x,y[_*s]),s>=2&&i.setY(x,y[_*s+1]),s>=3&&i.setZ(x,y[_*s+2]),s>=4&&i.setW(x,y[_*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))}},{key:"loadTexture",value:function(e){var t=this.json,n=t.textures[e].source,r=t.images[n],a=this.textureLoader;if(r.uri){var i=this.options.manager.getHandler(r.uri);null!==i&&(a=i)}return this.loadTextureImage(e,n,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,a=this.json,i=a.textures[e],o=a.images[t],s=(o.uri||o.bufferView)+":"+i.sampler;if(this.textureCache[s])return this.textureCache[s];var u=this.loadImageSource(t,n).then((function(t){t.flipY=!1,i.name&&(t.name=i.name);var n=(a.samplers||{})[i.sampler]||{};return t.magFilter=RS[n.magFilter]||1006,t.minFilter=RS[n.minFilter]||1008,t.wrapS=DS[n.wrapS]||1e3,t.wrapT=DS[n.wrapT]||1e3,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=u,u}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var a=n.images[e],i=self.URL||self.webkitURL,o=a.uri||"",s=!1;if(void 0!==a.bufferView)o=this.getDependency("bufferView",a.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:a.mimeType});return o=i.createObjectURL(t)}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(o).then((function(e){return new Promise((function(n,a){var i=n;!0===t.isImageBitmapLoader&&(i=function(e){var t=new Ty(e);t.needsUpdate=!0,n(t)}),t.load(UC.resolveURL(e,r.path),i,void 0,a)}))})).then((function(e){var t;return!0===s&&i.revokeObjectURL(o),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=u,u}},{key:"assignTexture",value:function(e,t,n,r){var a=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),a.extensions[sS.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[sS.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=a.associations.get(i);i=a.extensions[sS.KHR_TEXTURE_TRANSFORM].extendTexture(i,o),a.associations.set(i,s)}}return void 0!==r&&(i.encoding=r),e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Xk,K_.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,c=this.cache.get(u);c||(c=new Pk,K_.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(u,c)),n=c}if(r||a||i){var l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),r&&(l+="derivative-tangents:"),a&&(l+="vertex-colors:"),i&&(l+="flat-shading:");var h=this.cache.get(l);h||(h=n.clone(),a&&(h.vertexColors=!0),i&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(l,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return tC}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.extensions,a=this.json.materials[e],i={},o=a.extensions||{},s=[];if(o[sS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=r[sS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),s.push(u.extendParams(i,a,n))}else if(o[sS.KHR_MATERIALS_UNLIT]){var c=r[sS.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),s.push(c.extendParams(i,a,n))}else{var l=a.pbrMetallicRoughness||{};if(i.color=new xy(1,1,1),i.opacity=1,Array.isArray(l.baseColorFactor)){var h=l.baseColorFactor;i.color.fromArray(h),i.opacity=h[3]}void 0!==l.baseColorTexture&&s.push(n.assignTexture(i,"map",l.baseColorTexture,3001)),i.metalness=void 0!==l.metallicFactor?l.metallicFactor:1,i.roughness=void 0!==l.roughnessFactor?l.roughnessFactor:1,void 0!==l.metallicRoughnessTexture&&(s.push(n.assignTexture(i,"metalnessMap",l.metallicRoughnessTexture)),s.push(n.assignTexture(i,"roughnessMap",l.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)}))))}!0===a.doubleSided&&(i.side=2);var f=a.alphaMode||"OPAQUE";if("BLEND"===f?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,"MASK"===f&&(i.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==X_&&(s.push(n.assignTexture(i,"normalMap",a.normalTexture)),i.normalScale=new oy(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;i.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==X_&&(s.push(n.assignTexture(i,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(i.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==X_&&(i.emissive=(new xy).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==X_&&s.push(n.assignTexture(i,"emissiveMap",a.emissiveTexture,3001)),Promise.all(s).then((function(){var o;return o=t===SS?r[sS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new t(i),a.name&&(o.name=a.name),BS(o,a),n.associations.set(o,{materials:e}),a.extensions&&zS(r,o,a),o}))}},{key:"createUniqueName",value:function(e){for(var t=ZC.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[sS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return jS(n,e,t)}))}for(var i,o,s=[],u=0,c=e.length;u<c;u++){var l=e[u],h=(o=void 0,(o=(i=l).extensions&&i.extensions[sS.KHR_DRACO_MESH_COMPRESSION])?"draco:"+o.bufferView+":"+o.indices+":"+VS(o.attributes):i.indices+":"+VS(i.attributes)+":"+i.mode),f=r[h];if(f)s.push(f.promise);else{var d;d=l.extensions&&l.extensions[sS.KHR_DRACO_MESH_COMPRESSION]?a(l):jS(new ub,l,t),r[h]={primitive:l,promise:d},s.push(d)}}return Promise.all(s)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.extensions,a=this.json.meshes[e],i=a.primitives,o=[],s=0,u=i.length;s<u;s++){var c=void 0===i[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new tC({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),t.DefaultMaterial):this.getDependency("material",i[s].material);o.push(c)}return o.push(n.loadGeometries(i)),Promise.all(o).then((function(t){for(var o=t.slice(0,t.length-1),s=t[t.length-1],u=[],c=0,l=s.length;c<l;c++){var h=s[c],f=i[c],d=void 0,p=o[c];if(4===f.mode||5===f.mode||6===f.mode||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new Nk(h,p):new Tb(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),5===f.mode?d.geometry=qS(d.geometry,1):6===f.mode&&(d.geometry=qS(d.geometry,2));else if(1===f.mode)d=new qk(h,p);else if(3===f.mode)d=new Gk(h,p);else if(2===f.mode)d=new Kk(h,p);else{if(0!==f.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new Qk(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&US(d,a),d.name=n.createUniqueName(a.name||"mesh_"+e),BS(d,a),f.extensions&&zS(r,d,f),n.assignFinalMaterial(d),u.push(d)}for(var m=0,v=u.length;m<v;m++)n.associations.set(u[m],{meshes:e,primitives:m});if(1===u.length)return u[0];var g=new mk;n.associations.set(g,{meshes:e});for(var y=0,_=u.length;y<_;y++)g.add(u[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Ob(iy.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new rx(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),BS(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],o=[],s=0,u=t.channels.length;s<u;s++){var c=t.channels[s],l=t.samplers[c.sampler],h=c.target,f=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",void 0!==h.node?h.node:h.id)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",d)),i.push(l),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(o)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],u=[],c=function(e,t){var n=r[e],c=a[e],l=i[e],h=o[e],f=s[e];if(void 0===n)return"continue";var d=void 0;switch(n.updateMatrix(),n.matrixAutoUpdate=!0,FS[f.path]){case FS.weights:d=hC;break;case FS.rotation:d=dC;break;case FS.position:case FS.scale:default:d=mC}var p=n.name?n.name:n.uuid,m=void 0!==h.interpolation?PS[h.interpolation]:2301,v=[];FS[f.path]===FS.weights?n.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(p);var g=l.array;if(l.normalized){for(var y=WS(g.constructor),_=new Float32Array(g.length),b=0,x=g.length;b<x;b++)_[b]=g[b]*y;g=_}for(var w=0,k=v.length;w<k;w++){var C=new d(v[w]+"."+FS[f.path],c.array,g,m);"CUBICSPLINE"===h.interpolation&&(C.createInterpolant=function(e){return new(this instanceof dC?IS:AS)(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(C)}},l=0,h=r.length;l<h;l++)c(l);return new vC(t.name?t.name:"animation_"+e,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this,n=this.json.nodes[e];return void 0===n.mesh?null:t.getDependency("mesh",n.mesh).then((function(e){var r=t._getNodeRef(t.meshCache,n.mesh,e);return void 0!==n.weights&&r.traverse((function(e){if(e.isMesh)for(var t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),r}))}},{key:"loadNode",value:function(e){var t,n,r=this.extensions,a=this,i=this.json.nodes[e],o=i.name?a.createUniqueName(i.name):"";return(t=[],n=a._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)})),n&&t.push(n),void 0!==i.camera&&t.push(a.getDependency("camera",i.camera).then((function(e){return a._getNodeRef(a.cameraCache,i.camera,e)}))),a._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)).then((function(t){var n;if((n=!0===i.isBone?new Rk:t.length>1?new mk:1===t.length?t[0]:new O_)!==t[0])for(var s=0,u=t.length;s<u;s++)n.add(t[s]);if(i.name&&(n.userData.name=i.name,n.name=o),BS(n,i),i.extensions&&zS(r,n,i),void 0!==i.matrix){var c=new c_;c.fromArray(i.matrix),n.applyMatrix4(c)}else void 0!==i.translation&&n.position.fromArray(i.translation),void 0!==i.rotation&&n.quaternion.fromArray(i.rotation),void 0!==i.scale&&n.scale.fromArray(i.scale);return a.associations.has(n)||a.associations.set(n,{}),a.associations.get(n).nodes=e,n}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,i=new mk;r.name&&(i.name=a.createUniqueName(r.name)),BS(i,r),r.extensions&&zS(n,i,r);for(var o=r.nodes||[],s=[],u=0,c=o.length;u<c;u++)s.push(HS(o[u],i,t,a));return Promise.all(s).then((function(){return a.associations=function(e){var t,n=new Map,r=_createForOfIteratorHelper(a.associations);try{for(r.s();!(t=r.n()).done;){var i=_slicedToArray(t.value,2),o=i[0],s=i[1];(o instanceof K_||o instanceof Ty)&&n.set(o,s)}}catch(u){r.e(u)}finally{r.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function HS(e,t,n,r){var a=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,o=n.length;i<o;i++){var s=n[i];if(s){r.push(s);var u=new c_;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*i),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new Fk(r,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var i=[];if(a.children)for(var o=a.children,s=0,u=o.length;s<u;s++)i.push(HS(o[s],e,n,r));return Promise.all(i)}))}function jS(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=LS[o]||o.toLowerCase();s in e.attributes||a.push(i(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(u)}return BS(e,t),function(e,t,n){var r=t.attributes,a=new Ly;if(void 0!==r.POSITION){var i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(a.set(new Ry(o[0],o[1],o[2]),new Ry(s[0],s[1],s[2])),i.normalized){var u=WS(NS[i.componentType]);a.min.multiplyScalar(u),a.max.multiplyScalar(u)}var c=t.targets;if(void 0!==c){for(var l=new Ry,h=new Ry,f=0,d=c.length;f<d;f++){var p=c[f];if(void 0!==p.POSITION){var m=n.json.accessors[p.POSITION],v=m.min,g=m.max;if(void 0!==v&&void 0!==g){if(h.setX(Math.max(Math.abs(v[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(v[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(v[2]),Math.abs(g[2]))),m.normalized){var y=WS(NS[m.componentType]);h.multiplyScalar(y)}l.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(l)}e.boundingBox=a;var _=new e_;a.getCenter(_.center),_.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=_}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,a=!1,i=!1,o=0,s=t.length;o<s;o++){var u=t[o];if(void 0!==u.POSITION&&(r=!0),void 0!==u.NORMAL&&(a=!0),void 0!==u.COLOR_0&&(i=!0),r&&a&&i)break}if(!r&&!a&&!i)return Promise.resolve(e);for(var c=[],l=[],h=[],f=0,d=t.length;f<d;f++){var p=t[f];if(r){var m=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;c.push(m)}if(a){var v=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;l.push(v)}if(i){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(c),Promise.all(l),Promise.all(h)]).then((function(t){var n=t[1],o=t[2];return r&&(e.morphAttributes.position=t[0]),a&&(e.morphAttributes.normal=n),i&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function qS(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var c=0;c<o;c++)c%2==0?(s.push(n.getX(c)),s.push(n.getX(c+1)),s.push(n.getX(c+2))):(s.push(n.getX(c+2)),s.push(n.getX(c+1)),s.push(n.getX(c)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(s),l}var KS,XS,ZS,YS,JS,$S,QS,eT,tT=function(e){var t=e.value,n=e.low1,r=e.low2,a=e.high1;return r+(e.high2-r)*(t-n)/(a-n)},nT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).canvas=e,r.onMouseMove=function(e){e.preventDefault();var t=e.clientX,n=e.clientY;r.lastCursorPosition=new oy(t,n),r.cursorPosition=r.getCursorPosition(),r.cursorRotation=r.getCursorRotation()},r.onScroll=function(){r.cursorPosition=r.getCursorPosition(),r.cursorRotation=r.getCursorRotation()},r.lastCursorPosition=r.getCenterPositionPx(),r.cursorPosition=r.getCursorPosition(),r}return _createClass(n,[{key:"start",value:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("scroll",this.onScroll)}},{key:"stop",value:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("scroll",this.onScroll)}},{key:"getCursorPosition",value:function(){var e=this.lastCursorPosition,t=e.x,n=e.y,r=window,a=r.scrollX,i=r.scrollY,o=r.innerWidth,s=r.innerHeight,u=new oy((t+a)/o*2-1,-(n+i)/s*2+1);return this.dispatchEvent({type:"cursorPosition",data:u}),u}},{key:"getCursorRotation",value:function(){if(this.cursorPosition&&this.canvas){var e=this.getCenterPosition(),t=new oy;t.subVectors(this.cursorPosition,e);var n=t.clampScalar(-.65,.65),r=n.x,a=n.y,i=new Ry(-a,r,0);return this.dispatchEvent({type:"cursorRotation",data:i}),t}}},{key:"getCenterPosition",value:function(){var e=this.getCenterPositionPx(),t=tT({value:e.x,low1:0,low2:-1,high1:window.innerWidth,high2:1}),n=-tT({value:e.y,low1:0,low2:-1,high1:window.innerHeight,high2:1});return new oy(t,n)}},{key:"getCenterPositionPx",value:function(){var e=this.canvas,t=e.width,n=e.height,r=this.canvas.getBoundingClientRect(),a=r.left,i=r.top,o=window,s=o.pageXOffset,u=o.pageYOffset;return new oy(a+s+t/2,i+u+n/2)}}]),n}(Kg),rT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).loading=e,r}return _createClass(n,[{key:"start",value:function(){var e=this,t=new ProgressEvent("progress");navigator.mediaDevices.getUserMedia({audio:!1,video:{width:{ideal:640},height:{ideal:360},facingMode:"user"}}).then((function(r){e.loading.emit(Object.assign({loaded:0,total:100},t)),e.predictor=new eS.a({apiToken:"110546ae-627f-48d4-9cf8-fd8850e0ac7f",shouldMirrorOutput:!0}),e.loading.emit(Object.assign({loaded:50,total:100},t)),window.localStream=r,e.predictor.start({stream:r}).then((function(){e.loading.emit(Object.assign({loaded:100,total:100},t)),e.subscription=e.predictor.dataStream.subscribe((function(t){_get2(_getPrototypeOf(n.prototype),"dispatchEvent",e).call(e,{type:"faceDetection",data:t})}))})).catch(console.error)})).catch(console.error)}},{key:"stop",value:function(){var e,t,n,r;null===(e=this.predictor)||void 0===e||e.stop(),null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(r=null===(n=window.localStream)||void 0===n?void 0:n.getVideoTracks()[0])||void 0===r||r.stop()}}]),n}(Kg),aT=function(e){var t=e.value,n=e.inMin,r=e.inMax,a=e.outMin,i=e.outMax;return((t=function(e){var t=e.value,n=e.min,r=e.max;return Math.min(Math.max(t,n),r)}({value:t,min:n,max:r}))-n)*(i-a)/(r-n)+a},iT=function(e){var t=e.start,n=e.end,r=e.time,a=void 0===r?.05:r;return t*(1-a)+n*a},oT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).scene=e,a.camera=r,a.eyeLeftRotation=new Ry(-1.5489931179359278,5.002408635515016e-7,3.141592528749793),a.eyeRightRotation=new Ry(-1.548993618155872,2.618223344326663e-7,3.1415925287497273),a.rad=Math.PI/180,a.eyeRotationOffsetX=90*a.rad,a.targetPos=new oy(0,0),a.currentPos=new oy(0,0),a.setCurrentPos=function(){var e=a.cursorPosition,t=e.x,n=e.y;Math.abs(a.camera.rotation.z)<.2?(a.targetPos.x=aT({value:n,inMin:-1,inMax:1,outMin:5*a.rad,outMax:-5*a.rad}),a.targetPos.y=aT({value:t,inMin:-1,inMax:1,outMin:-10*a.rad,outMax:10*a.rad})):a.targetPos.set(0,0),a.currentPos.x=iT({start:a.currentPos.x,end:a.targetPos.x}),a.currentPos.y=iT({start:a.currentPos.y,end:a.targetPos.y})},a.setHeadRotation=function(){var e=a.cursorRotation,t=e.x,n=e.y;a.head.rotation.set(t,n,0)},a.setNeckRotation=function(){a.neck.rotation.x=a.currentPos.x+.1,a.neck.rotation.y=a.currentPos.y},a.setEyeRotation=function(){a.eye.right.rotation.x=a.currentPos.x-a.eyeRotationOffsetX,a.eye.left.rotation.x=a.currentPos.x-a.eyeRotationOffsetX,a.eye.right.rotation.z=3*a.currentPos.y+Math.PI,a.eye.left.rotation.z=3*a.currentPos.y+Math.PI},a.resetEyeRotation=function(){a.eye.left.rotation.setFromVector3(a.eyeLeftRotation),a.eye.right.rotation.setFromVector3(a.eyeRightRotation)},a.proxy=new Proxy(a.scene,{get:function(e,t){return t in e?e[t]:e.getObjectByName(t)}}),a.root=a.proxy.Wolf3D_Avatar||a.proxy.Wolf3D_Head,a.head=a.proxy.Head,a.neck=a.proxy.Neck,a.hand={},a.hand.right=a.proxy.RightHand,a.hand.right.visible=!1,a.hand.right.scale.set(0,0,0),a.hand.left=a.proxy.LeftHand,a.hand.left.visible=!1,a.hand.left.scale.set(0,0,0),a.eye={},a.eye.right=a.proxy.RightEye,a.eye.left=a.proxy.LeftEye,a.position.set(0,0,0),a.mixer=new $C(a.proxy),a.mixer.timeScale=.5,a.add(a.proxy),a}return _createClass(n,[{key:"setCursorRotation",value:function(e){this.cursorRotation=e}},{key:"setCursorPosition",value:function(e){this.cursorPosition=e}},{key:"setFaceExpressions",value:function(e){this.faceExpressions=e}},{key:"setFaceRotation",value:function(e){this.faceRotation=e}},{key:"setFaceTransform",value:function(e){this.faceTransform=e}},{key:"update",value:function(e,t){"cursor"===t&&this.trackCursor(),"face"===t&&this.trackFace(),this.mixer.update(e)}},{key:"trackCursor",value:function(){this.cursorPosition&&this.cursorRotation&&(this.setCurrentPos(),this.setHeadRotation(),this.setNeckRotation(),this.setEyeRotation())}},{key:"trackFace",value:function(){var e=this;if(this.faceExpressions&&this.faceRotation&&this.faceTransform){this.resetEyeRotation(),Object.entries(this.faceExpressions).forEach((function(t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=eS.b.toARKitConvention(r);e.root.morphTargetInfluences[e.root.morphTargetDictionary[i]]=a}));var t=this.faceRotation,n=t.pitch,r=t.yaw,a=t.roll;this.head.rotation.set(-n,r,a);var i=this.faceTransform,o=i.x,s=i.y;this.position.set(o,.5*s,0)}}}]),n}(O_),sT=function(){function e(t,n,r,a){var i=this;return _classCallCheck(this,e),this.world=t,this.camera=n,this.renderer=r,this.onCursorPosition=function(e){var t=e.data;return i.avatar.setCursorRotation(t)},this.onCursorRotation=function(e){var t=e.data;return i.avatar.setCursorPosition(t)},this.onFaceDetection=function(e){var t=e.data;i.avatar.setFaceExpressions(t.blendShapes),i.avatar.setFaceRotation(t.rotation),i.avatar.setFaceTransform(t.transform)},this.avatar=new oT(this.world.scene,this.camera),this.cursorTracker=new nT(this.renderer.domElement),this.cursorTracker.stop(),this.cursorTracker.removeEventListener("cursorRotation",this.onCursorPosition),this.cursorTracker.removeEventListener("cursorPosition",this.onCursorRotation),this.faceTracker=new rT(a),this.faceTracker.stop(),this.faceTracker.removeEventListener("faceDetection",this.onFaceDetection),this}return _createClass(e,[{key:"withCursorTracking",value:function(){return this.cursorTracker.start(),this.cursorTracker.addEventListener("cursorRotation",this.onCursorPosition),this.cursorTracker.addEventListener("cursorPosition",this.onCursorRotation),this}},{key:"withFaceTracking",value:function(){return this.faceTracker.start(),this.faceTracker.addEventListener("faceDetection",this.onFaceDetection),this}},{key:"build",value:function(){return this.avatar}}]),e}(),uT=function(){function e(t,n,r){return _classCallCheck(this,e),this.renderer=t,this.world=n,this.camera=r,this}return _createClass(e,[{key:"buildAvatar",value:function(e,t){var n=new sT(this.world,this.camera,this.renderer,t);return"cursor"===e&&n.withCursorTracking(),"face"===e&&n.withFaceTracking(),n.build()}}]),e}(),cT=function(){function e(t){var n=t.aspect;return _classCallCheck(this,e),this.camera=new Ob(50,n,.1,1e3),this.camera.position.set(0,.6,.7),this.camera.updateProjectionMatrix(),this}return _createClass(e,[{key:"build",value:function(){return this.camera}}]),e}(),lT=function(){function e(t){return _classCallCheck(this,e),this.canvas=t,this}return _createClass(e,[{key:"buildCamera",value:function(){return new cT(this.canvas).build()}}]),e}(),hT=function(){function e(t,n){_classCallCheck(this,e),this.canvas=t,this.wrapper=n}return _createClass(e,[{key:"parse",value:function(e){return window.parseFloat(e.replace("px",""))}},{key:"width",get:function(){var e=window.getComputedStyle(this.wrapper).width;return this.parse(e)}},{key:"height",get:function(){var e=window.getComputedStyle(this.wrapper).height;return this.parse(e)}},{key:"aspect",get:function(){return this.width/this.height}}]),e}(),fT=function(){function e(t,n,r){var a=r.enableRotate,i=r.enableZoom;return _classCallCheck(this,e),this.controls=new aS(t,n.domElement),this.controls.enablePan=!0,this.controls.enableRotate=a,this.controls.enableZoom=i,this.controls.target.set(0,.6,0),this.controls.update(),this}return _createClass(e,[{key:"build",value:function(){return this.controls}}]),e}(),dT=function(){function e(t,n){return _classCallCheck(this,e),this.camera=t,this.renderer=n,this}return _createClass(e,[{key:"buildControl",value:function(e){return new fT(this.camera,this.renderer,e).build()}}]),e}(),pT=function(){function e(t){var n=t.canvas,r=t.width,a=t.height;return _classCallCheck(this,e),this.renderer=new xk({canvas:n,alpha:!0,antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=3001,this.renderer.setClearColor(16777215,0),this.renderer.setSize(r,a,!0),this}return _createClass(e,[{key:"build",value:function(){return this.renderer}}]),e}(),mT=function(){function e(t){return _classCallCheck(this,e),this.canvas=t,this}return _createClass(e,[{key:"buildRenderer",value:function(){return new pT(this.canvas).build()}}]),e}(),vT=function(){function e(){return _classCallCheck(this,e),this.loader=new iS,this}return _createClass(e,[{key:"clean",value:function(){this.world=null}},{key:"resolve",value:function(e,t){return n=this,a=_regeneratorRuntime().mark((function n(){var r=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(this.world?function(e){return e(r.world)}:function(n,a){r.loader.load(e,(function(e){r.world=e,n(e)}),(function(e){return t.emit(e)}),(function(e){return a(e)}))}));case 1:case"end":return n.stop()}}),n,this)})),new((r=void 0)||(r=Promise))((function(e,t){function i(e){try{s(a.next(e))}catch(n){t(n)}}function o(e){try{s(a.throw(e))}catch(n){t(n)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}s((a=a.apply(n,[])).next())}));var n,r,a}}]),e}(),gT=function(){function e(){return _classCallCheck(this,e),this.scene=new wk,this}return _createClass(e,[{key:"withAmbientLight",value:function(){return this.ambientLight=new BC(2236962),this.ambientLight.intensity=5,this.scene.add(this.ambientLight),this}},{key:"withBackLight",value:function(){return this.backLight=new zC(16777215),this.backLight.position.set(-4.187,.839,-5.601),this.backLight.intensity=4,this.scene.add(this.backLight),this}},{key:"withFillLight",value:function(){return this.fillLight=new zC(16777215),this.fillLight.position.set(2.78,.942,2.727),this.fillLight.intensity=2,this.scene.add(this.fillLight),this}},{key:"withKeyLight",value:function(){return this.keyLight=new NC(16777215),this.keyLight.position.set(-2.268,2.076,5),this.keyLight.intensity=12,this.scene.add(this.keyLight),this}},{key:"withAvatar",value:function(e){return this.scene.add(e),this.backLight&&(this.backLight.target=e.head),this.keyLight&&(this.keyLight.target=e.head),this.fillLight&&(this.fillLight.target=e.head),this}},{key:"build",value:function(){return this.scene}}]),e}(),yT=function(){function e(t){return _classCallCheck(this,e),this.avatar=t,this}return _createClass(e,[{key:"buildScene",value:function(){return(new gT).withAmbientLight().withBackLight().withFillLight().withKeyLight().withAvatar(this.avatar).build()}}]),e}(),_T=["canvas"],bT=((JS=function(){function e(){_classCallCheck(this,e),this._enableRotate=!0,this._enableZoom=!0,this.loading=new Jo,this.GLTFResolver=new vT}return _createClass(e,[{key:"tracker",get:function(){return this._tracker},set:function(e){this._tracker=e,this.main()}},{key:"url",get:function(){return this._url},set:function(e){this._url=e,this.GLTFResolver.clean(),this.main()}},{key:"enableRotate",get:function(){return this._enableRotate},set:function(e){this._enableRotate=e,this.main()}},{key:"enableZoom",get:function(){return this._enableZoom},set:function(e){this._enableZoom=e,this.main()}},{key:"canvas",get:function(){var e;return null===(e=this.canvasRef)||void 0===e?void 0:e.nativeElement}},{key:"wrapper",get:function(){var e;return null===(e=this.canvas)||void 0===e?void 0:e.parentElement}},{key:"main",value:function(){var e=this;this.canvas&&this.wrapper&&(this.wrapper.style.opacity="0"),this.GLTFResolver.resolve(this.url,this.loading).then((function(t){var n=new hT(e.canvas,e.wrapper),r=new mT(n).buildRenderer(),a=new lT(n).buildCamera(),i=new uT(r,t,a).buildAvatar(e.tracker,e.loading),o=new yT(i).buildScene(),s=new dT(a,r).buildControl({enableRotate:e.enableRotate,enableZoom:e.enableZoom}),u=new WC;e.wrapper.appendChild(r.domElement),e.canvas&&e.wrapper&&(e.wrapper.style.opacity="1");var c=e;!function e(){window.requestAnimationFrame(e),r.clear(),r.render(o,a),o.traverse((function(e){var t,n,r;return null===(r=null===(t=e)||void 0===t?void 0:(n=t).update)||void 0===r?void 0:r.call(n,u.getDelta(),c.tracker)}))}(),window.addEventListener("resize",(function(){a.aspect=n.aspect,a.updateProjectionMatrix(),s.update(),r.setSize(n.width,n.height,!0)}))})).catch(console.error)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.main()}}]),e}()).\u0275fac=function(e){return new(e||JS)},JS.\u0275cmp=ht({type:JS,selectors:[["ngx-profile-avatar"]],viewQuery:function(e,t){var n,r;1&e&&(r=_T,function(e,t,n,r,a,i){e.firstCreatePass&&fs(e,new ns(n,!0,!1,void 0),-1),hs(e,t)}(Ht(),Gt(),r)),2&e&&us(n=ls())&&(t.canvasRef=n.first)},inputs:{tracker:"tracker",url:"url",enableRotate:"enableRotate",enableZoom:"enableZoom"},outputs:{loading:"loading"},decls:2,vars:0,consts:[["canvas",""]],template:function(e,t){1&e&&Ci(0,"canvas",null,0)},styles:["[_nghost-%COMP%] {\n        opacity: 0;\n        transition: opacity 1s;\n    }"],changeDetection:0}),JS),xT=((YS=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:YS}),YS.\u0275inj=fe({factory:function(e){return new(e||YS)},imports:[[Fl]]}),YS),wT=((ZS=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){}},{key:"onLoading",value:function(e){var t=e.loaded,n=e.total;Math.round(t/n*100)>=100&&(this.data.loading=!1)}}]),e}()).\u0275fac=function(e){return new(e||ZS)},ZS.\u0275cmp=ht({type:ZS,selectors:[["app-avatar-visor"]],inputs:{data:"data"},features:[Ki],decls:4,vars:6,consts:[[1,"avatar-container"],[1,"avatar",3,"url","tracker","enableRotate","enableZoom","loading"],[1,"spinner-container"]],template:function(e,t){1&e&&(wi(0,"div",0),wi(1,"ngx-profile-avatar",1),Ei("loading",(function(e){return t.onLoading(e)})),ki(),wi(2,"div",2),Ci(3,"app-spinner"),ki(),ki()),2&e&&(xr(1),bi("url",t.data.url)("tracker",t.data.tracker)("enableRotate",t.data.enableRotate)("enableZoom",t.data.enableZoom),xr(1),Di("hide",!t.data.loading))},directives:[bT,qg],styles:["div.avatar-container[_ngcontent-%COMP%] {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      border-right: 1px solid var(--gray-600);\n    }\n\n    .avatar[_ngcontent-%COMP%] {\n      display: flex;\n      flex-grow: 1;\n      width: 100%;\n      height: 100%;\n    }\n\n    div.spinner-container[_ngcontent-%COMP%] {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      visibility: visible;\n      visibility: visible;\n      transition: visibility 1s ease;\n    }\n\n    div.hide[_ngcontent-%COMP%] {\n      visibility: hidden;\n    }"]}),ZS),kT=((XS=function(){function e(){_classCallCheck(this,e),this.change=new Jo}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=new Zf({url:new Xf(this.data.url,[Vh.required]),tracker:new Xf(this.data.tracker,[Vh.required]),enableRotate:new Xf(this.data.enableRotate,[Vh.required]),enableZoom:new Xf(this.data.enableZoom,[Vh.required])})}},{key:"onSubmit",value:function(){this.formGroup.valid||alert("Error. Please, complete form"),this.formGroup.get("enableRotate").setValue("true"===this.formGroup.get("enableRotate").value),this.formGroup.get("enableZoom").setValue("true"===this.formGroup.get("enableZoom").value),this.change.emit(Object.assign(Object.assign({},this.formGroup.value),{loading:this.formGroup.get("url").value!==this.data.url}))}}]),e}()).\u0275fac=function(e){return new(e||XS)},XS.\u0275cmp=ht({type:XS,selectors:[["app-avatar-form"]],inputs:{data:"data"},outputs:{change:"change"},decls:34,vars:1,consts:[[3,"formGroup","ngSubmit"],[1,"form-item"],["for","url",1,"form-label"],["type","url","id","url","formControlName","url","placeholder","Enter your 3d avatar URL generated from ReadyPlayerMe","required","true",1,"form-control"],["for","tracker",1,"form-label"],["id","tracker","formControlName","tracker","required","true",1,"form-control"],["value","cursor"],["value","face"],["for","rotation",1,"form-label"],["id","rotation","formControlName","enableRotate","required","true",1,"form-control"],["value","true"],["value","false"],["for","zoom",1,"form-label"],["id","zoom","formControlName","enableZoom","required","true",1,"form-control"],["type","submit",1,"button"]],template:function(e,t){1&e&&(wi(0,"form",0),Ei("ngSubmit",(function(){return t.onSubmit()})),wi(1,"div"),wi(2,"div",1),wi(3,"label",2),zi(4," URL "),ki(),Ci(5,"input",3),ki(),ki(),wi(6,"div"),wi(7,"div",1),wi(8,"label",4),zi(9,"Tracker"),ki(),wi(10,"select",5),wi(11,"option",6),zi(12,"Cursor"),ki(),wi(13,"option",7),zi(14,"Face"),ki(),ki(),ki(),wi(15,"div",1),wi(16,"label",8),zi(17,"Rotation"),ki(),wi(18,"select",9),wi(19,"option",10),zi(20,"Enable"),ki(),wi(21,"option",11),zi(22,"Disable"),ki(),ki(),ki(),wi(23,"div",1),wi(24,"label",12),zi(25,"Zoom"),ki(),wi(26,"select",13),wi(27,"option",10),zi(28,"Enable"),ki(),wi(29,"option",11),zi(30,"Disable"),ki(),ki(),ki(),ki(),wi(31,"div"),wi(32,"button",14),zi(33,"Apply"),ki(),ki(),ki()),2&e&&bi("formGroup",t.formGroup)},directives:[ud,Fh,dd,Th,Lh,Nd,Od,df,pf,bf],styles:["[_nghost-%COMP%] {\n      padding: 1rem 2rem;\n      border-right: 1px solid var(--gray-600);\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(1) {\n        display: flex;\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(2) {\n      display: flex;\n      gap: 1rem;\n    }\n\n    form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(3) {\n      display: flex;\n      justify-content: end;\n    }\n\n    @media only screen and (max-width: 600px) {\n\n      form[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:nth-child(2) {\n        display: flex;\n        flex-direction: column;\n      }\n    }"]}),XS),CT=((KS=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=mt({type:KS,bootstrap:[jg]}),KS.\u0275inj=fe({factory:function(e){return new(e||KS)},providers:[],imports:[[mh,Fl,Gg,Kd,Xd,xT]]}),KS);$S=[Tc,Ec,Mc,Nc,Xc,Kc,Wc,Gc,Hc,jc,qc,yg,ug,cg,mg,sm,ud,pf,bf,Th,$h,rf,kh,df,_f,tf,Lh,Fh,Od,Ud,Wd,Hd,Ld,zd,sd,ad,Qf,hd,dd,Nd,md,gd,bT,jg,qg,wT,kT],QS=[ul,fl,cl,gl,Ll,kl,Cl,hl,Sl,dl,ml,vl,yl],(eT=jg.\u0275cmp).directiveDefs=function(){return $S.map(ft)},eT.pipeDefs=function(){return QS.map(dt)},function(){if(tr)throw new Error("Cannot enable prod mode after platform setup.");er=!1}(),dh().bootstrapModule(CT).catch((function(e){return console.error(e)}))},zhpf:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shuffle",(function(){return q})),n.d(r,"shuffleCombo",(function(){return K})),n.d(r,"clamp",(function(){return X})),n.d(r,"nearestLargerEven",(function(){return Z})),n.d(r,"sum",(function(){return Y})),n.d(r,"randUniform",(function(){return J})),n.d(r,"distSquared",(function(){return $})),n.d(r,"assert",(function(){return Q})),n.d(r,"assertShapesMatch",(function(){return ee})),n.d(r,"assertNonNull",(function(){return te})),n.d(r,"flatten",(function(){return ne})),n.d(r,"sizeFromShape",(function(){return re})),n.d(r,"isScalarShape",(function(){return ae})),n.d(r,"arraysEqual",(function(){return ie})),n.d(r,"isInt",(function(){return oe})),n.d(r,"tanh",(function(){return se})),n.d(r,"sizeToSquarishShape",(function(){return ue})),n.d(r,"createShuffledIndices",(function(){return ce})),n.d(r,"rightPad",(function(){return le})),n.d(r,"repeatedTry",(function(){return he})),n.d(r,"inferFromImplicitShape",(function(){return fe})),n.d(r,"parseAxisParam",(function(){return de})),n.d(r,"squeezeShape",(function(){return pe})),n.d(r,"getTypedArrayFromDType",(function(){return me})),n.d(r,"getArrayFromDType",(function(){return ve})),n.d(r,"checkConversionForErrors",(function(){return ge})),n.d(r,"isValidDtype",(function(){return ye})),n.d(r,"hasEncodingLoss",(function(){return _e})),n.d(r,"isTypedArray",(function(){return be})),n.d(r,"bytesPerElement",(function(){return xe})),n.d(r,"bytesFromStringArray",(function(){return we})),n.d(r,"isString",(function(){return ke})),n.d(r,"isBoolean",(function(){return Ce})),n.d(r,"isNumber",(function(){return Se})),n.d(r,"inferDtype",(function(){return Te})),n.d(r,"isFunction",(function(){return Ee})),n.d(r,"nearestDivisor",(function(){return Ae})),n.d(r,"computeStrides",(function(){return Me})),n.d(r,"toNestedArray",(function(){return Ie})),n.d(r,"makeOnesTypedArray",(function(){return Ne})),n.d(r,"makeZerosTypedArray",(function(){return Re})),n.d(r,"makeZerosNestedTypedArray",(function(){return De})),n.d(r,"assertNonNegativeIntegerDimensions",(function(){return Oe})),n.d(r,"locToIndex",(function(){return Le})),n.d(r,"indexToLoc",(function(){return Fe})),n.d(r,"isPromise",(function(){return Pe})),n.d(r,"createScalarValue",(function(){return lt})),n.d(r,"toTypedArray",(function(){return ht})),n.d(r,"now",(function(){return ft})),n.d(r,"fetch",(function(){return dt})),n.d(r,"encodeString",(function(){return pt})),n.d(r,"decodeString",(function(){return mt}));var a={};n.r(a),n.d(a,"makeTypesMatch",(function(){return Lt})),n.d(a,"assertTypesMatch",(function(){return Ft})),n.d(a,"isTensorInList",(function(){return Pt})),n.d(a,"getTensorsInContainer",(function(){return zt}));var i={};n.r(i),n.d(i,"isMobile",(function(){return jt})),n.d(i,"isBrowser",(function(){return qt}));var o={};n.r(o),n.d(o,"copyModel",(function(){return Gn})),n.d(o,"listModels",(function(){return Bn})),n.d(o,"moveModel",(function(){return jn})),n.d(o,"removeModel",(function(){return Vn})),n.d(o,"browserFiles",(function(){return nr})),n.d(o,"browserHTTPRequest",(function(){return dr})),n.d(o,"concatenateArrayBuffers",(function(){return ln})),n.d(o,"decodeWeights",(function(){return on})),n.d(o,"encodeWeights",(function(){return rn})),n.d(o,"fromMemory",(function(){return vr})),n.d(o,"getLoadHandlers",(function(){return yn})),n.d(o,"getModelArtifactsInfoForJSON",(function(){return fn})),n.d(o,"getSaveHandlers",(function(){return gn})),n.d(o,"http",(function(){return fr})),n.d(o,"isHTTPScheme",(function(){return lr})),n.d(o,"loadWeights",(function(){return or})),n.d(o,"registerLoadRouter",(function(){return vn})),n.d(o,"registerSaveRouter",(function(){return mn})),n.d(o,"weightsLoaderFactory",(function(){return ur})),n.d(o,"withSaveHandler",(function(){return gr}));var s={};n.r(s),n.d(s,"confusionMatrix",(function(){return wr}));var u={};n.r(u),n.d(u,"toPixels",(function(){return Cr})),n.d(u,"fromPixels",(function(){return Tr}));var c={};n.r(c),n.d(c,"prepareAndValidate",(function(){return Er}));var l={};n.r(l),n.d(l,"validateUpdateShape",(function(){return Ar})),n.d(l,"validateInput",(function(){return Mr})),n.d(l,"calculateShapes",(function(){return Ir}));var h={};n.r(h),n.d(h,"assertParamsValid",(function(){return Nr})),n.d(h,"maskToAxes",(function(){return Rr})),n.d(h,"computeOutShape",(function(){return Dr})),n.d(h,"stridesWithElidedDims",(function(){return Or})),n.d(h,"getNormalizedAxes",(function(){return Pr})),n.d(h,"startIndicesWithElidedDims",(function(){return zr})),n.d(h,"stopIndicesWithElidedDims",(function(){return Br})),n.d(h,"stridesForAxis",(function(){return Ur})),n.d(h,"startForAxis",(function(){return Vr})),n.d(h,"stopForAxis",(function(){return Wr})),n.d(h,"isSliceContinous",(function(){return Gr})),n.d(h,"computeFlatOffset",(function(){return Hr})),n.d(h,"parseSliceParams",(function(){return jr})),n.d(h,"sliceInfo",(function(){return qr}));var f={};n.r(f),n.d(f,"Serializable",(function(){return Kr})),n.d(f,"SerializationMap",(function(){return Xr})),n.d(f,"registerClass",(function(){return Zr}));var d={};n.r(d),n.d(d,"TEST_EPSILON_FLOAT16",(function(){return Yr})),n.d(d,"expectArraysClose",(function(){return Jr})),n.d(d,"testEpsilon",(function(){return $r})),n.d(d,"expectPromiseToFail",(function(){return ea})),n.d(d,"expectArraysEqual",(function(){return ta})),n.d(d,"expectNumbersClose",(function(){return na})),n.d(d,"expectValuesInRange",(function(){return aa})),n.d(d,"expectArrayBuffersEqual",(function(){return ia})),n.d(d,"encodeStrings",(function(){return oa}));var p={};n.r(p),n.d(p,"conv2d",(function(){return ju})),n.d(p,"depthwiseConv2d",(function(){return Xu})),n.d(p,"matMul",(function(){return Zu}));var m={};n.r(m),n.d(m,"segOpComputeOptimalWindowSize",(function(){return _l})),n.d(m,"computeOutShape",(function(){return bl})),n.d(m,"collectGatherOpShapeInfo",(function(){return xl}));var v={};n.r(v),n.d(v,"slice_util",(function(){return h})),n.d(v,"upcastType",(function(){return Dt})),n.d(v,"segment_util",(function(){return m})),n.d(v,"fromUint8ToStringArray",(function(){return wl})),n.d(v,"fromStringArrayToUint8",(function(){return kl})),n.d(v,"axesAreInnerMostDims",(function(){return jo})),n.d(v,"combineLocations",(function(){return qo})),n.d(v,"computeOutAndReduceShapes",(function(){return Ko})),n.d(v,"expandShapeToKeepDim",(function(){return Xo})),n.d(v,"assertAxesAreInnerMostDims",(function(){return Zo})),n.d(v,"getAxesPermutation",(function(){return Yo})),n.d(v,"getUndoAxesPermutation",(function(){return Jo})),n.d(v,"getInnerMostAxes",(function(){return $o})),n.d(v,"getBroadcastDims",(function(){return Ja})),n.d(v,"getReductionAxes",(function(){return $a})),n.d(v,"assertAndGetBroadcastShape",(function(){return Qa})),n.d(v,"assertParamsConsistent",(function(){return Hc})),n.d(v,"computeOutShape",(function(){return jc})),n.d(v,"computeDilation2DInfo",(function(){return gi})),n.d(v,"computePool2DInfo",(function(){return yi})),n.d(v,"computePool3DInfo",(function(){return _i})),n.d(v,"computeConv2DInfo",(function(){return bi})),n.d(v,"computeConv3DInfo",(function(){return xi})),n.d(v,"computeDefaultPad",(function(){return wi})),n.d(v,"tupleValuesAreOne",(function(){return Ei})),n.d(v,"eitherStridesOrDilationsAreOne",(function(){return Ai})),n.d(v,"convertConv2DDataFormat",(function(){return Mi})),n.d(v,"getFusedDyActivation",(function(){return Vu})),n.d(v,"getFusedBiasGradient",(function(){return Wu})),n.d(v,"applyActivation",(function(){return Gu})),n.d(v,"shouldFuse",(function(){return Hu})),n.d(v,"PARALLELIZE_THRESHOLD",(function(){return qc})),n.d(v,"computeOptimalWindowSize",(function(){return Kc})),n.d(v,"getImageCenter",(function(){return Xc})),n.d(v,"getReshaped",(function(){return Zc})),n.d(v,"getPermuted",(function(){return Yc})),n.d(v,"getReshapedPermuted",(function(){return Jc})),n.d(v,"getSliceBeginCoords",(function(){return $c})),n.d(v,"getSliceSize",(function(){return Qc})),n.d(v,"prepareAndValidate",(function(){return Er})),n.d(v,"validateUpdateShape",(function(){return Ar})),n.d(v,"validateInput",(function(){return Mr})),n.d(v,"calculateShapes",(function(){return Ir})),n.d(v,"SELU_SCALEALPHA",(function(){return el})),n.d(v,"SELU_SCALE",(function(){return tl})),n.d(v,"ERF_P",(function(){return nl})),n.d(v,"ERF_A1",(function(){return rl})),n.d(v,"ERF_A2",(function(){return al})),n.d(v,"ERF_A3",(function(){return il})),n.d(v,"ERF_A4",(function(){return ol})),n.d(v,"ERF_A5",(function(){return sl})),n.d(v,"warn",(function(){return ul})),n.d(v,"log",(function(){return cl})),n.d(v,"mergeRealAndImagArrays",(function(){return ll})),n.d(v,"splitRealAndImagArrays",(function(){return hl})),n.d(v,"complexWithEvenIndex",(function(){return fl})),n.d(v,"complexWithOddIndex",(function(){return dl})),n.d(v,"getComplexWithIndex",(function(){return pl})),n.d(v,"assignToTypedArray",(function(){return ml})),n.d(v,"exponents",(function(){return vl})),n.d(v,"exponent",(function(){return gl})),n.d(v,"prepareSplitSize",(function(){return yl}));var g={};n.r(g),n.d(g,"nonMaxSuppressionV3Impl",(function(){return sc})),n.d(g,"nonMaxSuppressionV4Impl",(function(){return uc})),n.d(g,"nonMaxSuppressionV5Impl",(function(){return cc})),n.d(g,"whereImpl",(function(){return Au}));var y={};n.r(y),n.d(y,"maxNorm",(function(){return mf})),n.d(y,"unitNorm",(function(){return vf})),n.d(y,"nonNeg",(function(){return gf})),n.d(y,"minMaxNorm",(function(){return yf}));var _={};n.r(_),n.d(_,"zeros",(function(){return kd})),n.d(_,"ones",(function(){return Cd})),n.d(_,"constant",(function(){return Sd})),n.d(_,"randomUniform",(function(){return Td})),n.d(_,"randomNormal",(function(){return Ed})),n.d(_,"truncatedNormal",(function(){return Ad})),n.d(_,"identity",(function(){return Md})),n.d(_,"varianceScaling",(function(){return Id})),n.d(_,"glorotUniform",(function(){return Nd})),n.d(_,"glorotNormal",(function(){return Rd})),n.d(_,"heNormal",(function(){return Dd})),n.d(_,"heUniform",(function(){return Od})),n.d(_,"leCunNormal",(function(){return Ld})),n.d(_,"leCunUniform",(function(){return Fd})),n.d(_,"orthogonal",(function(){return Pd}));var b={};n.r(b),n.d(b,"inputLayer",(function(){return Cg})),n.d(b,"elu",(function(){return Sg})),n.d(b,"reLU",(function(){return Tg})),n.d(b,"leakyReLU",(function(){return Eg})),n.d(b,"prelu",(function(){return Ag})),n.d(b,"softmax",(function(){return Mg})),n.d(b,"thresholdedReLU",(function(){return Ig})),n.d(b,"conv1d",(function(){return Ng})),n.d(b,"conv2d",(function(){return Rg})),n.d(b,"conv2dTranspose",(function(){return Dg})),n.d(b,"conv3d",(function(){return Og})),n.d(b,"separableConv2d",(function(){return Lg})),n.d(b,"cropping2D",(function(){return Fg})),n.d(b,"upSampling2d",(function(){return Pg})),n.d(b,"depthwiseConv2d",(function(){return zg})),n.d(b,"activation",(function(){return Bg})),n.d(b,"dense",(function(){return Ug})),n.d(b,"dropout",(function(){return Vg})),n.d(b,"spatialDropout1d",(function(){return Wg})),n.d(b,"flatten",(function(){return Gg})),n.d(b,"repeatVector",(function(){return Hg})),n.d(b,"reshape",(function(){return jg})),n.d(b,"permute",(function(){return qg})),n.d(b,"embedding",(function(){return Kg})),n.d(b,"add",(function(){return Xg})),n.d(b,"average",(function(){return Zg})),n.d(b,"concatenate",(function(){return Yg})),n.d(b,"maximum",(function(){return Jg})),n.d(b,"minimum",(function(){return $g})),n.d(b,"multiply",(function(){return Qg})),n.d(b,"dot",(function(){return ey})),n.d(b,"batchNormalization",(function(){return ty})),n.d(b,"layerNormalization",(function(){return ny})),n.d(b,"zeroPadding2d",(function(){return ry})),n.d(b,"averagePooling1d",(function(){return ay})),n.d(b,"avgPool1d",(function(){return iy})),n.d(b,"avgPooling1d",(function(){return oy})),n.d(b,"averagePooling2d",(function(){return sy})),n.d(b,"avgPool2d",(function(){return uy})),n.d(b,"avgPooling2d",(function(){return cy})),n.d(b,"averagePooling3d",(function(){return ly})),n.d(b,"avgPool3d",(function(){return hy})),n.d(b,"avgPooling3d",(function(){return fy})),n.d(b,"globalAveragePooling1d",(function(){return dy})),n.d(b,"globalAveragePooling2d",(function(){return py})),n.d(b,"globalMaxPooling1d",(function(){return my})),n.d(b,"globalMaxPooling2d",(function(){return vy})),n.d(b,"maxPooling1d",(function(){return gy})),n.d(b,"maxPooling2d",(function(){return yy})),n.d(b,"maxPooling3d",(function(){return _y})),n.d(b,"gru",(function(){return by})),n.d(b,"gruCell",(function(){return xy})),n.d(b,"lstm",(function(){return wy})),n.d(b,"lstmCell",(function(){return ky})),n.d(b,"simpleRNN",(function(){return Cy})),n.d(b,"simpleRNNCell",(function(){return Sy})),n.d(b,"convLstm2d",(function(){return Ty})),n.d(b,"convLstm2dCell",(function(){return Ey})),n.d(b,"rnn",(function(){return Ay})),n.d(b,"stackedRNNCells",(function(){return My})),n.d(b,"bidirectional",(function(){return Iy})),n.d(b,"timeDistributed",(function(){return Ny})),n.d(b,"globalMaxPool1d",(function(){return Ry})),n.d(b,"globalMaxPool2d",(function(){return Dy})),n.d(b,"maxPool1d",(function(){return Oy})),n.d(b,"maxPool2d",(function(){return Ly})),n.d(b,"Layer",(function(){return np})),n.d(b,"RNN",(function(){return _v})),n.d(b,"RNNCell",(function(){return bv})),n.d(b,"input",(function(){return wm})),n.d(b,"gaussianNoise",(function(){return Fy})),n.d(b,"gaussianDropout",(function(){return Py})),n.d(b,"alphaDropout",(function(){return zy})),n.d(b,"masking",(function(){return By}));var x={};n.r(x),n.d(x,"binaryAccuracy",(function(){return Uy})),n.d(x,"binaryCrossentropy",(function(){return Vy})),n.d(x,"sparseCategoricalAccuracy",(function(){return Wy})),n.d(x,"categoricalAccuracy",(function(){return Gy})),n.d(x,"categoricalCrossentropy",(function(){return Hy})),n.d(x,"precision",(function(){return jy})),n.d(x,"recall",(function(){return qy})),n.d(x,"cosineProximity",(function(){return Ky})),n.d(x,"meanAbsoluteError",(function(){return Xy})),n.d(x,"meanAbsolutePercentageError",(function(){return Zy})),n.d(x,"MAPE",(function(){return Yy})),n.d(x,"mape",(function(){return Jy})),n.d(x,"meanSquaredError",(function(){return $y})),n.d(x,"MSE",(function(){return Qy})),n.d(x,"mse",(function(){return e_}));var w={};n.r(w),n.d(w,"modelFromJSON",(function(){return vm}));var k={};n.r(k),n.d(k,"l1l2",(function(){return t_})),n.d(k,"l1",(function(){return n_})),n.d(k,"l2",(function(){return r_}));var C={};n.r(C),n.d(C,"json",(function(){return w_}));var S={};n.r(S),n.d(S,"json",(function(){return k_}));var T={};n.r(T),n.d(T,"json",(function(){return C_}));var E={};n.r(E),n.d(E,"json",(function(){return S_}));var A={};n.r(A),n.d(A,"json",(function(){return T_}));var M={};n.r(M),n.d(M,"json",(function(){return E_}));var I={};n.r(I),n.d(I,"json",(function(){return A_}));var N={};n.r(N),n.d(N,"json",(function(){return M_}));var R={};n.r(R),n.d(R,"json",(function(){return I_}));var D={};n.r(D),n.d(D,"json",(function(){return N_}));var O={};n.r(O),n.d(O,"json",(function(){return R_}));var L={};n.r(L),n.d(L,"json",(function(){return D_}));var F={};n.r(F),n.d(F,"json",(function(){return O_}));var P={};n.r(P),n.d(P,"json",(function(){return L_}));var z={};n.r(z),n.d(z,"json",(function(){return F_}));var B={};n.r(B),n.d(B,"json",(function(){return P_}));var U={};n.r(U),n.d(U,"json",(function(){return z_}));var V={};n.r(V),n.d(V,"array",(function(){return tx})),n.d(V,"Dataset",(function(){return Qb})),n.d(V,"zip",(function(){return nx})),n.d(V,"CSVDataset",(function(){return lx})),n.d(V,"TextLineDataset",(function(){return ax})),n.d(V,"csv",(function(){return Cx})),n.d(V,"func",(function(){return Sx})),n.d(V,"generator",(function(){return Tx})),n.d(V,"microphone",(function(){return Mx})),n.d(V,"webcam",(function(){return Ex})),n.d(V,"FileDataSource",(function(){return wx})),n.d(V,"URLDataSource",(function(){return kx})),n.d(V,"version_data",(function(){return Nx}));var W={};n.r(W),n.d(W,"simpleAbsImpl",(function(){return vw})),n.d(W,"addImpl",(function(){return sw})),n.d(W,"bincountImpl",(function(){return jw})),n.d(W,"bincountReduceImpl",(function(){return qw})),n.d(W,"ceilImpl",(function(){return Zw})),n.d(W,"concatImpl",(function(){return Qw})),n.d(W,"expImpl",(function(){return Pk})),n.d(W,"expm1Impl",(function(){return Wk})),n.d(W,"floorImpl",(function(){return oC})),n.d(W,"gatherV2Impl",(function(){return fC})),n.d(W,"greaterImpl",(function(){return pC})),n.d(W,"lessImpl",(function(){return xC})),n.d(W,"linSpaceImpl",(function(){return CC})),n.d(W,"logImpl",(function(){return TC})),n.d(W,"maxImpl",(function(){return LC})),n.d(W,"maximumImpl",(function(){return zC})),n.d(W,"minimumImpl",(function(){return ZC})),n.d(W,"multiplyImpl",(function(){return Hk})),n.d(W,"negImpl",(function(){return iS})),n.d(W,"notEqualImpl",(function(){return dS})),n.d(W,"prodImpl",(function(){return SS})),n.d(W,"rangeImpl",(function(){return ES})),n.d(W,"rsqrtImpl",(function(){return PS})),n.d(W,"sliceImpl",(function(){return Vw})),n.d(W,"squaredDifferenceImpl",(function(){return rT})),n.d(W,"stridedSliceImpl",(function(){return oT})),n.d(W,"subImpl",(function(){return Yk})),n.d(W,"tileImpl",(function(){return hT})),n.d(W,"topKImpl",(function(){return fT})),n.d(W,"transposeImpl",(function(){return xw})),n.d(W,"uniqueImpl",(function(){return dT}));var G=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return _createClass(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),H=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"refCount",value:function(e){return j("refCount")}},{key:"incRef",value:function(e){return j("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return j("time")}},{key:"read",value:function(e){return j("read")}},{key:"readSync",value:function(e){return j("readSync")}},{key:"numDataIds",value:function(){return j("numDataIds")}},{key:"disposeData",value:function(e,t){return j("disposeData")}},{key:"write",value:function(e,t,n){return j("write")}},{key:"move",value:function(e,t,n,r,a){return j("move")}},{key:"memory",value:function(){return j("memory")}},{key:"floatPrecision",value:function(){return j("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return j("dispose")}}]),e}();function j(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function q(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function K(e,t){if(e.length!==t.length)throw Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n,r,a=e.length,i=0;a>0;)i=Math.random()*a|0,n=e[--a],r=t[a],e[a]=e[i],t[a]=t[i],e[i]=n,t[i]=r}function X(e,t,n){return Math.max(e,Math.min(t,n))}function Z(e){return e%2==0?e:e+1}function Y(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function J(e,t){var n=Math.random();return t*n+(1-n)*e}function $(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Q(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Q(ie(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function te(e){Q(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||be(e)&&!n)for(var r=0;r<e.length;++r)ne(e[r],t,n);else t.push(e);return t}function re(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function ae(e){return 0===e.length}function ie(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function oe(e){return e%1==0}function se(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function ue(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ce(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return q(t),t}function le(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function fe(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function de(e,t){var n=t.length;return Q((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Q(e.every((function(e){return oe(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function pe(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:de(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function me(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function ve(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function ge(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function ye(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function _e(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function be(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function xe(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function we(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function ke(e){return"string"==typeof e||e instanceof String}function Ce(e){return"boolean"==typeof e}function Se(e){return"number"==typeof e}function Te(e){return Array.isArray(e)?Te(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Se(e)?"float32":ke(e)?"string":Ce(e)?"bool":"float32"}function Ee(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ae(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Me(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Ie(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return function e(t,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[t+o];else for(var s=n[0],u=n.slice(1),c=u.reduce((function(e,t){return e*t})),l=0;l<s;l++)a[l]=e(t+l*c,u,r);return a}(0,e,t)}function Ne(e,t){for(var n=Re(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Re(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function De(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Ie(e,new Float32Array(n));if("int32"===t)return Ie(e,new Int32Array(n));if("bool"===t)return Ie(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Oe(e){e.forEach((function(t){Q(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function Le(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Fe(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Pe(e){return e&&e.then&&"function"==typeof e.then}var ze=function(){function e(t){_classCallCheck(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}var t;return _createClass(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=4;break}e.t0=this.flags[t],e.next=8;break;case 4:return e.next=6,this.evaluateFlag(t);case 6:this.flags[t]=e.sent,e.t0=this.flags[t];case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Pe(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,r[0],r[1]),r.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=_slicedToArray(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function Be(){return Ve}var Ue,Ve=null;function We(){if(null==Ue){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ue=e}return Ue}function Ge(e,t){var n,r=(null==(n=We())._tfGlobals&&(n._tfGlobals=new Map),n._tfGlobals);if(r.has(e))return r.get(e);var a=t();return r.set(e,a),r.get(e)}var He="Cos",je="Erf",qe="Exp",Ke="Log",Xe="Mod",Ze="Pow",Ye="Sin",Je="Sub",$e="Tan",Qe=Ge("kernelRegistry",(function(){return new Map})),et=Ge("gradRegistry",(function(){return new Map}));function tt(e,t){var n=ct(e,t);return Qe.get(n)}function nt(e){return et.get(e)}function rt(e){for(var t=Qe.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=_slicedToArray(i,2),s=o[0],u=o[1];_slicedToArray(s.split("_"),1)[0]===e&&n.push(u)}return n}function at(e){var t=e.kernelName,n=e.backendName,r=ct(t,n);Qe.has(r)&&console.warn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Qe.set(r,e)}function it(e){var t=e.kernelName;et.has(t)&&Be().getBool("DEBUG")&&console.warn("Overriding the gradient for '".concat(t,"'")),et.set(t,e)}function ot(e,t){var n=ct(e,t);if(!Qe.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));Qe.delete(n)}function st(e){if(!et.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));et.delete(e)}function ut(e,t){rt(e).forEach((function(e){at(Object.assign({},e,{backendName:t}))}))}function ct(e,t){return"".concat(t,"_").concat(e)}function lt(e,t){return"string"===t?pt(e):ht([e],t)}function ht(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ne(e)),Be().getBool("DEBUG")&&ge(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function ft(){return Be().platform.now()}function dt(e,t){return Be().platform.fetch(e,t)}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Be().platform.encode(e,t)}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Be().platform.decode(e,t)}var vt=function(){function e(t,n){_classCallCheck(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new gt)}return _createClass(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=ft();if(this.backendTimer.timerAvailable()?a=this.backendTimer.time(i):(i(),r.map((function(e){return e.dataSync()})),a=Promise.resolve({kernelMs:ft()-o})),Be().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var s=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},u=0;u<r.length;u++)s(u);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var gt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?le("".concat(r,"ms"),9):r.error,s=le(e,25),u=t.rank,c=t.size,l=le(t.shape.toString(),14),h="";for(var f in a){var d=a[f];if(null!=d){var p=d.shape||t.shape,m=p.length;h+="".concat(f,": ").concat(m,"D ").concat(m>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function yt(e,t,n){return le(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):ke(e)?"'".concat(e,"'"):"bool"===n?_t(e):parseFloat(e.toFixed(7)).toString(),t)}function _t(e){return 0===e?"false":"true"}function bt(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var xt=function(){function e(t,n,r){var a=this;if(_classCallCheck(this,e),this.dtype=n,this.shape=t.slice(),this.size=re(t),null!=r){var i=r.length;Q(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ve(n,this.size),this.strides=Me(t)}return _createClass(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Q(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r])throw new Error("Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape));r++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return wt().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),wt=null,kt=null,Ct=function(){function e(t,n,r,a){_classCallCheck(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=re(t),this.strides=Me(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return _createClass(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",kt.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return kt.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Ie(this.shape,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return Ie(this.shape,this.dataSync())}},{key:"data",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=wt().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return mt(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=wt().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return mt(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,wt().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(wt().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return kt.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),kt.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n,r){var a=Me(t),i=function(e,t,n,r){var a=re(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?bt(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,h=0;h<i;h++)o[h]=Math.max(o[h],yt(u[l+h],0,n).length);return o}(e,t,n,a),o=t.length,s=function e(t,n,r,a,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[yt(bt(t)[0],0,r)]:"bool"===r?[_t(t[0])]:[t[0].toString()];if(1===c){if(u>20){var l=Array.from(t.slice(0,3*s)),h=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(l=bt(l),h=bt(h)),["["+l.map((function(e,t){return yt(e,i[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return yt(e,i[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?bt(t):Array.from(t)).map((function(e,t){return yt(e,i[t],r)})).join(", ")+"]"]}var f=n.slice(1),d=a.slice(1),p=a[0]*s,m=[];if(u>20){for(var v=0;v<3;v++){var g=v*p;m.push.apply(m,_toConsumableArray(e(t.slice(g,g+p),f,r,d,i,!1)))}m.push("...");for(var y=u-3;y<u;y++){var _=y*p;m.push.apply(m,_toConsumableArray(e(t.slice(_,_+p),f,r,d,i,y===u-1)))}}else for(var b=0;b<u;b++){var x=b*p;m.push.apply(m,_toConsumableArray(e(t.slice(x,x+p),f,r,d,i,b===u-1)))}var w=2===c?",":"";m[0]="["+m[0]+w;for(var k=1;k<m.length-1;k++)m[k]=" "+m[k]+w;for(var C=",\n",S=2;S<c;S++)C+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":C),m}(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),kt.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),wt().makeVariable(this,e,t,n)}}]),e}();function St(){return Ge("Tensor",(function(){return Ct}))}Object.defineProperty(Ct,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),St();var Tt,Et,At,Mt,It,Nt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return _createClass(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!ie(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));wt().disposeTensor(this),this.dataId=e.dataId,wt().incRef(this,null)}},{key:"dispose",value:function(){wt().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Ct);Object.defineProperty(Nt,Symbol.hasInstance,{value:function(e){return e instanceof Ct&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Tt||(Tt={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Et||(Et={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(At||(At={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Mt||(Mt={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(It||(It={}));var Rt={float32:Mt,int32:Et,bool:At,complex64:It};function Dt(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Rt[e][t]}function Ot(e){return Dt(e,"int32")}function Lt(e,t){if(e.dtype===t.dtype)return[e,t];var n=Dt(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Ft(e,t){Q(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function Pt(e,t){return t.some((function(t){return t.id===e.id}))}function zt(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Ct)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,i=t;for(var o in i){var s=i[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}function Bt(e){return null!=e.kernelName}var Ut=function(){function e(){_classCallCheck(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return _createClass(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Vt=function(){function e(t){_classCallCheck(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ut}var t,n,r,a;return _createClass(e,[{key:"ready",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new vt(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;rt(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;rt(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof H||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return!(a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message),1))}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Gt.runKernel("Identity",{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],(function(e){return{x:function(){return Gt.runKernel("Cast",{x:e},{dtype:"float32"})}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==tt(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=r-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var c=Bt(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Bt(e)){var l=e.kernelName,h=e.inputs,f=e.attrs,d=tt(l,this.backendName);Q(null!=d,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=d.kernelFunc({inputs:h,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(l,h,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var v,g=e.inputs,y=e.attrs,_=Bt(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(c,g,t,_,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=nt(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Q(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;var a=e;"string"===(n=n||"float32")&&ke(e[0])&&(a=e.map((function(e){return pt(e)})));var i=r.write(a,t,n),o=new Ct(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=we(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new Ct(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new Nt(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*xe(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Nt||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*xe(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,_toConsumableArray(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=_createForOfIteratorHelper(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((i=a.n()).done){e.next=23;break}return o=i.value,e.next=17,o.kernelTimeMs;case 17:return o.kernelTimeMs=e.sent,e.next=20,o.extraInfo;case 20:o.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=nt(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Re(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=zt(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Q(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Q(i instanceof Ct,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],h=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var d={};d[n.id]=!0;for(var p={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(d[v.outputs[y].id]){for(var _ in g)d[g[_].id]=!0,p[v.id]=!0;break}for(var b=[],x=0;x<e.length;x++){var w=e[x];if(a[w.id]&&p[w.id]){var k={};for(var C in w.inputs){var S=w.inputs[C];r[S.id]&&(k[C]=S)}var T=Object.assign({},w);T.inputs=k,T.outputs=w.outputs,b.push(T)}}return b}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,a,s={};s[i.id]=null==n?(e=i.shape,a=Ne(re(e),"float32"),Gt.makeTensor(a,e,"float32")):n,function(e,t,n,a){for(var i=function(n){var i=t[n],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];o.push(null!=n?n:null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var n=function(e){return r.tidy(e)}((function(){return s[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var o=i.inputs[t];if(!ie(n.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(n.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=n;else{var u=e[o.id];e[o.id]=a(u,n),u.dispose()}};for(var c in i.inputs)u(c)},o=t.length-1;o>=0;o--)i(o)}(s,o,0,Ht);var u=t.map((function(e){return s[e.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=_createForOfIteratorHelper(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:u}}))}},{key:"customGrad",value:function(e){var t=this;return Q(Ee(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Q(r.every((function(e){return e instanceof Ct})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc({forwardFunc:function(t,n){return Q((i=e.apply(void 0,r.concat([n]))).value instanceof Ct,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Q(Ee(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Q(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Q(a.every((function(e){return e instanceof Ct})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o},inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=ft()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ut,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Wt(){var e=We();if(null==e._tfengine){var t=new ze(e);e._tfengine=new Vt(t)}return Ve=e._tfengine.ENV,wt=function(){return e._tfengine},e._tfengine}Vt.nextTensorId=0,Vt.nextVariableId=0;var Gt=Wt();function Ht(e,t){return Gt.runKernel("Add",{a:e,b:t})}function jt(){if("undefined"!=typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function qt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Kt=Be();function Xt(e,t){var n=e;if(be(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||be(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Be().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||be(t)){Q(n.length>0,(function(){return"Element arr[".concat(r.join("]["),"] should be a primitive, ")+"but is an array of ".concat(t.length," elements")})),Q(t.length===n[0],(function(){return"Element arr[".concat(r.join("]["),"] should have ").concat(n[0]," ")+"elements, but has ".concat(t.length," elements")}));for(var a=n.slice(1),i=0;i<t.length;++i)e(t[i],a,r.concat(i))}else Q(0===n.length,(function(){return"Element arr[".concat(r.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(n[0]," elements")}))}(e,r,[]),r}function Zt(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Yt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Ct)return Zt(r,e.dtype,t,n),e;var a=Te(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Zt(r,a,t,n),null==e||!be(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(null==e?"null":e.constructor.name,"'"));var i=Xt(e,a);be(e)||Array.isArray(e)||(e=[e]);var o="string"!==a?ht(e,a):ne(e,[],!0);return Gt.makeTensor(o,i,a)}function Jt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return Yt(e,"".concat(t,"[").concat(a,"]"),n,r)}))}function $t(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){Gt.startScope(n);try{var e=r.apply(void 0,arguments);return Pe(e)&&console.error("Cannot return a Promise inside of tidy."),Gt.endScope(e),e}catch(t){throw Gt.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}Kt.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Kt.registerFlag("IS_BROWSER",(function(){return qt()})),Kt.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Kt.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Kt.registerFlag("PROD",(function(){return!1})),Kt.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Kt.getBool("DEBUG")})),Kt.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Kt.registerFlag("IS_TEST",(function(){return!1})),Kt.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}));var Qt=$t({complex_:function(e,t){var n=Yt(e,"real","complex"),r=Yt(t,"imag","complex");return ee(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex()."),Gt.runKernel("Complex",{real:n,imag:r})}});function en(e,t,n,r){if(null==r&&(r=Te(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!be(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Oe(t);var a=re(t),i=re(n);Q(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==re(t.slice(o));Q(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return be(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ht(e,r):ne(e,[],!0),Gt.makeTensor(e,t,r)}function tn(e,t,n){return en(e,t,Xt(e,n),n)}var nn={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function rn(e,t){return an.apply(this,arguments)}function an(){return(an=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.t0=sn,e.next=6,Promise.all(a);case 6:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.t3=r,e.abrupt("return",{data:e.t2,specs:e.t3});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(e,t){var n,r,a={},i=0,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,h=re(l),f=void 0;if("quantization"in s){var d=s.quantization;if("uint8"===d.dtype||"uint16"===d.dtype){if(!("min"in d&&"scale"in d))throw new Error("Weight ".concat(s.name," with quantization ").concat(d.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==d.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(d.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(d.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=nn[d.dtype],m=e.slice(i,i+h*p),v="uint8"===d.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===d.dtype||"uint16"===d.dtype){f=new Float32Array(v.length);for(var g=0;g<v.length;g++)f[g]=v[g]*d.scale+d.min}else{if("float16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type float32.");void 0===n&&(n=dn()),f=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==d.dtype&&"uint16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type int32.");f=new Int32Array(v.length);for(var y=0;y<v.length;y++)f[y]=Math.round(v[y]*d.scale+d.min)}i+=h*p}else if("string"===c){var _=re(s.shape);f=[];for(var b=0;b<_;b++){var x=new Uint32Array(e.slice(i,i+4))[0];i+=4;var w=new Uint8Array(e.slice(i,i+x));f.push(w),i+=x}}else{var k=nn[c],C=e.slice(i,i+h*k);if("float32"===c)f=new Float32Array(C);else if("int32"===c)f=new Int32Array(C);else if("bool"===c)f=new Uint8Array(C);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(C);for(var S=new Float32Array(f.length/2),T=new Float32Array(f.length/2),E=0;E<S.length;E++)S[E]=f[2*E],T[E]=f[2*E+1];var A=tn(S,l,"float32"),M=tn(T,l,"float32");a[u]=Qt(A,M),A.dispose(),M.dispose()}i+=h*k}"complex64"!==c&&(a[u]=tn(f,l,c))}}catch(I){o.e(I)}finally{o.f()}return a}function sn(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var un="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function cn(e){return un?Buffer.byteLength(e):new Blob([e]).size}function ln(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function hn(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function fn(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:cn(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:cn(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function dn(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o];i[o]=e[n[s>>10]+(1023&s)]+t[s>>10]}return new Float32Array(a)}}var pn=function(){function e(){_classCallCheck(this,e),this.saveRouters=[],this.loadRouters=[]}return _createClass(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),mn=function(e){return pn.registerSaveRouter(e)},vn=function(e){return pn.registerLoadRouter(e)},gn=function(e){return pn.getSaveHandlers(e)},yn=function(e,t){return pn.getLoadHandlers(e,t)};function _n(){if(!Be().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function bn(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var xn=function(){function e(t){if(_classCallCheck(this,e),this.indexedDB=_n(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return _createClass(e,[{key:"save",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return bn(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction("models_store","readonly"),s=o.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=fn(t),l=i.transaction("model_info_store","readwrite"),h=l.objectStore("model_info_store"),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(h=l.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();xn.URL_SCHEME="indexeddb://";var wn=function(e){return Be().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xn.URL_SCHEME)?(t=e.slice(xn.URL_SCHEME.length),new xn(t)):null;var t};pn.registerSaveRouter(wn),pn.registerLoadRouter(wn);var kn=function(){function e(){_classCallCheck(this,e),this.indexedDB=_n()}var t,n;return _createClass(e,[{key:"listModels",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return bn(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),i=a.objectStore("model_info_store").getAll();i.onsuccess=function(){var t,n={},r=_createForOfIteratorHelper(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(xn.URL_SCHEME)?n.slice(xn.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return bn(a)},a.onsuccess=function(){var r,i=a.result,o=i.transaction("model_info_store","readwrite"),s=o.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),n(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(r=i.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),n(u.error)}},u.onerror=function(e){return i.close(),n(u.error)},o.oncomplete=function(){null==r?i.close():r.oncomplete=function(){return i.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),Cn="tensorflowjs_models",Sn="info",Tn="model_topology",En="weight_specs",An="weight_data",Mn="model_metadata";function In(e){return{info:[Cn,e,Sn].join("/"),topology:[Cn,e,Tn].join("/"),weightSpecs:[Cn,e,En].join("/"),weightData:[Cn,e,An].join("/"),modelMetadata:[Cn,e,Mn].join("/")}}function Nn(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var Rn=function(){function e(t){if(_classCallCheck(this,e),!Be().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=In(this.modelPath)}var t,n;return _createClass(e,[{key:"save",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=fn(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(un)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},e.abrupt("return",(null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 12:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(un){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();Rn.URL_SCHEME="localstorage://";var Dn=function(e){return Be().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Rn.URL_SCHEME)?(t=e.slice(Rn.URL_SCHEME.length),new Rn(t)):null;var t};pn.registerSaveRouter(Dn),pn.registerLoadRouter(Dn);var On=function(){function e(){_classCallCheck(this,e),Q(Be().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Q("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return _createClass(e,[{key:"listModels",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Cn+"/",r="/"+Sn,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(t[Nn(i)]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=In(t=(n=t).startsWith(Rn.URL_SCHEME)?n.slice(Rn.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Ln=function(){function e(){_classCallCheck(this,e),this.managers={}}return _createClass(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Q(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),Q(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Q(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Fn(e){if(-1===e.indexOf("://"))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Ln.getSchemes().join(",")));return{scheme:e.split("://")[0],path:e.split("://")[1]}}function Pn(e,t){return zn.apply(this,arguments)}function zn(){return(zn=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],Q(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Q((a=pn.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Q(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],Q((o=pn.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Q(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=Fn(t).scheme,c=Fn(t).path,l=u===Fn(t).scheme,e.next=12,i.load();case 12:if(h=e.sent,e.t0=r&&l,!e.t0){e.next=17;break}return e.next=17,Ln.getManager(u).removeModel(c);case 17:return e.next=19,s.save(h);case 19:if(f=e.sent,e.t1=r&&!l,!e.t1){e.next=24;break}return e.next=24,Ln.getManager(u).removeModel(c);case 24:return e.abrupt("return",f.modelArtifactsInfo);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(){return Un.apply(this,arguments)}function Un(){return(Un=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ln.getSchemes(),n={},r=_createForOfIteratorHelper(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=8,Ln.getManager(i).listModels();case 8:for(s in o=e.sent)n[i+"://"+s]=o[s];case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function Vn(e){return Wn.apply(this,arguments)}function Wn(){return(Wn=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fn(t),e.abrupt("return",Ln.getManager(n.scheme).removeModel(n.path));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(e,t){return Hn.apply(this,arguments)}function Hn(){return(Hn=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pn(t,n,!1));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(e,t){return qn.apply(this,arguments)}function qn(){return(qn=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pn(t,n,!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kn,Xn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Be().get("IS_BROWSER")){Be().setPlatform("browser",new Xn);try{Ln.registerManager(Rn.URL_SCHEME,new On)}catch(CD){}try{Ln.registerManager(xn.URL_SCHEME,new kn)}catch(CD){}}function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Oe(e),new xt(e,t,n)}Be().get("IS_NODE")&&Be().setPlatform("node",new(function(){function e(){_classCallCheck(this,e),this.util=n(2),this.textEncoder=new this.util.TextEncoder}return _createClass(e,[{key:"fetch",value:function(e,t){return null!=Be().global.fetch?Be().global.fetch(e,t):(null==Kn&&(Kn=n(1)),Kn(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}()));var Yn=$t({cast_:function(e,t){var n=Yt(e,"x","cast");if(!ye(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Gt.runKernel("Cast",{x:n},{dtype:t})}}),Jn=$t({clone_:function(e){var t=Yt(e,"x","clone","string_or_numeric");return Gt.runKernel("Identity",{x:t})}});function $n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}function Qn(e){return new Promise((function(e){return setTimeout(e)})).then(e)}Wt(),kt={buffer:Zn,cast:Yn,clone:Jn,print:$n};var er=function(){function e(t){if(_classCallCheck(this,e),!Be().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}var t;return _createClass(e,[{key:"save",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=5;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 5:return r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]},null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,e.next=12,Qn((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 12:if(null==t.weightData){e.next=18;break}return(o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=n,e.next=18,Qn((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:return e.abrupt("return",{modelArtifactsInfo:fn(t)});case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();er.URL_SCHEME="downloads://";var tr=function(){function e(t){if(_classCallCheck(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.files=t}var t;return _createClass(e,[{key:"load",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&e({modelTopology:s});var u=o.weightsManifest;if(null!=u){var c;try{c=r.checkManifestAndWeightFiles(u,n)}catch(CD){return void a(CD)}var l=[],h=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){h.push(e),f.push(null)})),l.push.apply(l,_toConsumableArray(e.weights))})),u.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=h.indexOf(t);if(f[a]=r,-1===f.indexOf(null)){var i={modelTopology:s,weightSpecs:l,weightData:ln(f),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),e(i)}},n.onerror=function(e){return a("Failed to weights data from file of path '".concat(t,"'."))},n.readAsArrayBuffer(c[t])}))}))}else a(new Error("weightManifest field is missing from file ".concat(t.name)))}else a(new Error("modelTopology field is missing from file ".concat(t.name)))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"checkManifestAndWeightFiles",value:function(e,t){var n,r=[],a=t.map((function(e){return hn(e.name)})),i={},o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(e){var n=hn(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[e]=t[a.indexOf(n)]}))}}catch(CD){o.e(CD)}finally{o.f()}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(t.length,")."));return i}}]),e}();function nr(e){return new tr(e)}function rr(e,t,n,r){!function(e){Q(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Q(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Q(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Q(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function ar(e,t){return ir.apply(this,arguments)}function ir(){return(ir=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Be().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),null!=n.onProgress){e.next=9;break}return e.next=6,Promise.all(a);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,rr(a,n.onProgress,0,.5);case 11:e.t0=e.sent;case 12:if(i=e.t0.map((function(e){return e.arrayBuffer()})),null!=n.onProgress){e.next=19;break}return e.next=16,Promise.all(i);case 16:e.t1=e.sent,e.next=22;break;case 19:return e.next=21,rr(i,n.onProgress,.5,1);case 21:e.t1=e.sent;case 22:return e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){return sr.apply(this,arguments)}function sr(){return(sr=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",ur((function(e){return ar(e,{requestInit:a})}))(t,n,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e){return function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var r,a,i,o,s,u,c,l,h,f,d,p,m=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r=nn["quantization"in e?e.quantization.dtype:e.dtype]*re(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:r})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=r}))})),s.every((function(e){return e}))){t.next=6;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 6:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),h=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;h.push(t)}))})),t.next=10,e(h);case 10:return f=t.sent,d={},p=0,t.abrupt("return",(l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=on(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),d));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}pn.registerSaveRouter((function(e){return Be().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(er.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new er(e)}(e.slice(er.URL_SCHEME.length)):null}));var cr=function(){function e(t,n){if(_classCallCheck(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Q("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Be().platform.fetch,Q(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Q(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}var t,n,r;return _createClass(e,[{key:"save",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]},null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(a=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:fn(t),responses:[a]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"load",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,s,u,c,l,h,f,d,p,m,v;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,c=n.signature,l=n.userDefinedMetadata,null!=a||null!=i){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 18:if(null==i){e.next=25;break}return e.next=21,this.loadWeights(i);case 21:d=e.sent,p=_slicedToArray(d,2),h=p[0],f=p[1];case 25:return m={modelTopology:a,weightSpecs:h,weightData:f,generatedBy:o,convertedBy:s,format:u},null!=c&&(m.signature=c),null!=l&&(m.userDefinedMetadata=l),v=n.modelInitializer,e.abrupt("return",(v&&(m.modelInitializer=v),m));case 29:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return n.apply(this,arguments)})},{key:"loadWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,x=void 0,w=void 0,x=(b=n).lastIndexOf("/"),w=b.lastIndexOf("?"),r=[b.substring(0,x)+"/",w>x?b.substring(w):""],a=_slicedToArray(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=_createForOfIteratorHelper(t);try{for(c.s();!(l=c.n()).done;)h=l.value,u.push.apply(u,_toConsumableArray(h.weights))}catch(CD){c.e(CD)}finally{c.f()}f=[],d=[],p=_createForOfIteratorHelper(t);try{for(p.s();!(m=p.n()).done;){v=m.value,g=_createForOfIteratorHelper(v.paths);try{for(g.s();!(y=g.n()).done;)_=y.value,null!=this.weightUrlConverter?d.push(this.weightUrlConverter(_)):f.push(s+_+o)}catch(CD){g.e(CD)}finally{g.f()}}}catch(CD){p.e(CD)}finally{p.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=16;break}return e.t1=f.push,e.t2=f,e.t3=_toConsumableArray,e.next=13,Promise.all(d);case 13:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 16:return e.t6=u,e.t7=ln,e.next=20,ar(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 20:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.abrupt("return",[e.t6,e.t9]);case 23:case"end":return e.stop()}var b,x,w}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function lr(e){return null!=e.match(cr.URL_SCHEME_REGEX)}cr.URL_SCHEME_REGEX=/^https?:\/\//;var hr=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return lr(e)})):lr(e))?fr(e,t):null};function fr(e,t){return new cr(e,t)}function dr(e,t){return fr(e,t)}pn.registerSaveRouter(hr),pn.registerLoadRouter(hr);var pr=function(){function e(t){_classCallCheck(this,e),this.modelArtifacts=t}var t;return _createClass(e,[{key:"load",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),mr=function(){function e(t){_classCallCheck(this,e),this.saveHandler=t}var t;return _createClass(e,[{key:"save",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function vr(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new pr(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pr({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pr({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function gr(e){return new mr(e)}var yr,_r=$t({matMul_:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Yt(e,"a","matMul"),o=Yt(t,"b","matMul");return i=(n=_slicedToArray(Lt(i,o),2))[0],o=n[1],Gt.runKernel("BatchMatMul",{a:i,b:o},{transposeA:r,transposeB:a})}}),br=$t({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=Yt(e,"indices","oneHot","int32");return Gt.runKernel("OneHot",{indices:a},{depth:t,onValue:n,offValue:r})}}),xr=$t({transpose_:function(e,t){var n=Yt(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Q(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Q(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1?n.clone():Gt.runKernel("Transpose",{x:n},{perm:t})}}),wr=$t({confusionMatrix_:function(e,t,n){var r=Yt(e,"labels","confusionMatrix"),a=Yt(t,"predictions","confusionMatrix");Q(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),Q(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),Q(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),Q(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),Q(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=br(Yn(r,"int32"),n),o=br(Yn(a,"int32"),n),s=xr(i),u=_r(s,o);return Yn(u,"int32")}});function kr(e,t,n){if(te(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Xt(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return en(e,t,r,n)}function Cr(e,t){return Sr.apply(this,arguments)}function Sr(){return(Sr=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yt(t,"img","toPixels"),t instanceof Ct||(r=Yn(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=_slicedToArray(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=7;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 7:if("float32"===r.dtype||"int32"===r.dtype){e.next=9;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 9:return e.next=11,r.data();case 11:l=e.sent,h="float32"===r.dtype?255:1,f=new Uint8ClampedArray(u*s*4),d=0;case 15:if(!(d<s*u)){e.next=36;break}p=[0,0,0,255],m=0;case 18:if(!(m<c)){e.next=31;break}if(v=l[d*c+m],"float32"!==r.dtype){e.next=25;break}if(!(v<0||v>1)){e.next=23;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 23:e.next=27;break;case 25:if("int32"!==r.dtype||!(v<0||v>255)){e.next=27;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 27:1===c?(p[0]=v*h,p[1]=v*h,p[2]=v*h):p[m]=v*h;case 28:m++,e.next=18;break;case 31:f[(g=4*d)+0]=Math.round(p[0]),f[g+1]=Math.round(p[1]),f[g+2]=Math.round(p[2]),f[g+3]=Math.round(p[3]);case 33:++d,e.next=15;break;case 36:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),_=new ImageData(f,u,s),y.putImageData(_,0,0)),e.abrupt("return",(r!==t&&r.dispose(),f));case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tr=$t({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=tt("FromPixels",Gt.backendName))return Gt.runKernel("FromPixels",{pixels:e},{numChannels:t});var c,l,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],f=_slicedToArray(h,2),d=f[0],p=f[1];if(o?c=e.getContext("2d").getImageData(0,0,d,p).data:r||n?c=e.data:(i||a||s)&&(null==yr&&(yr=document.createElement("canvas").getContext("2d")),yr.canvas.width=d,yr.canvas.height=p,yr.drawImage(e,0,0,d,p),c=yr.getImageData(0,0,d,p).data),4===t)l=new Int32Array(c);else{var m=d*p;l=new Int32Array(m*t);for(var v=0;v<m;v++)for(var g=0;g<t;++g)l[v*t+g]=c[4*v+g]}return kr(l,[p,d,t],"int32")}});function Er(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===re(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,h=i;h<n;++h)l*=u[h],c.push(u[h]);var f=[].concat(_toConsumableArray(Me(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}function Ar(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Mr(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Ar(n,t,e)}function Ir(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:re(t.shape)/u,sliceSize:o,strides:[].concat(_toConsumableArray(Me(n.slice(0,a))),[1]),outputSize:re(n)}}function Nr(e,t,n){var r=e.shape.length;Q(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Q(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Q(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Rr(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Dr(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Or(e,t,n,r){for(var a=_toConsumableArray(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Lr(e,t,n){return n<=e?n:n-(t-1)}function Fr(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Pr(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),h=new Array(c),f=new Array(c);if(t.length&&n>0){var d=t[0],p=n+1;l=zr(o,d,p,r,e),h=Br(s,d,p,a,e),f=Or(i,d,p,e)}else for(var m=0;m<c;m++)l[m]=Vr(o,r,i,e,m,u),h[m]=Wr(s,a,i,e,m,u),f[m]=Ur(i,m,u);return{begin:l,end:h,strides:f}}function zr(e,t,n,r,a){for(var i=_toConsumableArray(a),o=Fr(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=Lr(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function Br(e,t,n,r,a){for(var i=_toConsumableArray(a),o=Fr(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=Lr(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var h=a[l];i[l]<0&&(i[l]+=h),i[l]=X(0,i[l],a[l])}return i}function Ur(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Vr(e,t,n,r,a,i){var o=t[a];(e&1<<a||i&1<<a||null==o)&&(o=(n[a]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),o=X(0,o,s-1)}function Wr(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?X(0,o,u):X(-1,o,u-1)}function Gr(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Hr(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function jr(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat(_toConsumableArray(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Q(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat(_toConsumableArray(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Q(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function qr(e,t,n,r,a,i,o,s,u){var c=t.slice(),l=n.slice(),h=r;null==r&&(h=new Array(c.length));var f=Rr(o);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var d=e.length-c.length,p=Rr(s),m=e.slice();p.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var v=Pr(m,f,d,c,l,h,a,i,o),g=v.begin,y=v.end,_=v.strides;c=g,l=y,h=_;var b=Rr(u);b.forEach((function(e){l[e]=c[e]+1,h[e]=1}));var x=Dr(c,l,h),w=x.filter((function(e,t){return-1===b.indexOf(t)}));return{nonStrided:h.every((function(e){return 1===e})),$begin:c,$end:l,$strides:h,size:x,newShape:m,outShape:w}}var Kr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Xr=function(){function e(){_classCallCheck(this,e),this.classNameMap={}}return _createClass(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Zr(e){Q(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Q("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Q(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Xr.register(e)}var Yr=.1;function Jr(e,t,n){return null==n&&(n=$r()),Qr(e,t,(function(e,t){return ra(e,t,n)}))}function $r(){return 32===Gt.backend.floatPrecision()?.001:Yr}function Qr(e,t,n){var r=!0;if((be(e)||be(t))&&(r=!1),be(e)&&be(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=Xt(e),s=Xt(t);if(!ie(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=be(e)?e:ne(e),c=be(t)?t:ne(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var h=u[l],f=c[l];if(!n(h,f))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(h,", expected[").concat(l,"] = ").concat(f,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}}function ea(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function ta(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return ke(e)||ke(e[0])||ke(t)||ke(t[0])?Qr(e,n,(function(e,t){return e==t})):Qr(e,t,(function(e,t){return ra(e,t,0)}))}function na(e,t,n){if(null==n&&(n=$r()),!ra(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function ra(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function aa(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function ia(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function oa(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?oa(n):e[t]=pt(n)}return e}function sa(){Be().set("PROD",!0)}function ua(){Be().set("DEBUG",!0)}function ca(){Be().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function la(e){Be().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ha(){Gt.disposeVariables()}function fa(){return Gt}function da(){return Gt.memory()}function pa(e){return Gt.profile(e)}function ma(e,t){return Gt.tidy(e,t)}function va(e){zt(e).forEach((function(e){return e.dispose()}))}function ga(e){return Gt.keep(e)}function ya(e){return Gt.time(e)}function _a(e){return Gt.setBackend(e)}function ba(){return Gt.ready()}function xa(){return Gt.backendName}function wa(e){Gt.removeBackend(e)}function ka(e){return Gt.findBackend(e)}function Ca(e){return Gt.findBackendFactory(e)}function Sa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Gt.registerBackend(e,t,n)}function Ta(){return Gt.backend}function Ea(e,t){Be().setPlatform(e,t)}var Aa=$t({add_:function(e,t){var n,r=Yt(e,"a","add"),a=Yt(t,"b","add");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel("Add",{a:r,b:a})}}),Ma=$t({floorDiv_:function(e,t){var n,r=Yt(e,"a","floorDiv"),a=Yt(t,"b","floorDiv");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel("FloorDiv",{a:r,b:a})}}),Ia=$t({div_:function(e,t){var n,r=Yt(e,"a","div"),a=Yt(t,"b","div");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype?Ma(r,a):Gt.runKernel("RealDiv",{a:r,b:a},{})}}),Na=$t({mul_:function(e,t){var n,r=Yt(e,"a","mul"),a=Yt(t,"b","mul");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel("Multiply",{a:r,b:a})}}),Ra=$t({sqrt_:function(e){var t=Yt(e,"x","sqrt");return Gt.runKernel("Sqrt",{x:t})}}),Da=$t({square_:function(e){var t=Yt(e,"x","square");return Gt.runKernel("Square",{x:t},{})}}),Oa=$t({zerosLike_:function(e){var t=Yt(e,"x","zerosLike");return Gt.runKernel("ZerosLike",{x:t})}});function La(e){return Q(Ee(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Yt(t,"x","tf.grad","string_or_numeric"),a=null!=n?Yt(n,"dy","tf.grad"):null;return Gt.tidy((function(){var t=Gt.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&ee(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Va(i),i[0]}))}}function Fa(e){return Q(Ee(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){Q(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=Jt(t,"args","tf.grads","string_or_numeric"),a=null!=n?Yt(n,"dy","tf.grads"):null;return Gt.tidy((function(){var t=Gt.gradients((function(){return e.apply(void 0,_toConsumableArray(r))}),r,a),n=t.value,i=t.grads;return null!=a&&ee(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Va(i),i}))}}function Pa(e){return Q(Ee(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){Q(t instanceof Ct,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),Q(null==n||n instanceof Ct,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=Gt.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return Va(a),{grad:a[0],value:i}}}function za(e){return Q(Ee(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){Q(Array.isArray(t)&&t.every((function(e){return e instanceof Ct})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),Q(null==n||n instanceof Ct,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=Gt.gradients((function(){return e.apply(void 0,_toConsumableArray(t))}),t,n);return null!=n&&ee(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Va(r.grads),r}}function Ba(e,t){Q(Ee(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Q(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Nt})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Gt.registeredVariables)t.push(Gt.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;Q((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=Gt.gradients(e,t,null,!0),s=o.value,u=o.grads;Q(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Q(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function Ua(e){return Gt.customGrad(e)}function Va(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function Wa(e,t){if((be(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&be(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return en(e,[],[],t)}var Ga=function(e){_inherits(o,e);var t,n,r,a,i=_createSuper(o);function o(){return _classCallCheck(this,o),i.apply(this,arguments)}return _createClass(o,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return va(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return Ba(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&va(this.iterations_)}},{key:"saveIterations",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Wa(this.iterations_,"int32")}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getWeights",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"setWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"extractIterations",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(Kr);Object.defineProperty(Ga,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Ha=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,a),(n=r.call(this)).learningRate=e,n.rho=t,n.epsilon=i,n.accumulatedGrads=[],n.accumulatedUpdates=[],null==i&&(n.epsilon=Gt.backend.epsilon()),n}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Gt.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:ma((function(){return Oa(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:ma((function(){return Oa(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;ma((function(){var e=Aa(Na(o,t.rho),Na(Da(i),1-t.rho)),n=Na(Ia(Ra(Aa(s,t.epsilon)),Ra(Aa(o,t.epsilon))),i),r=Aa(Na(s,t.rho),Na(Da(n),1-t.rho));o.assign(e),s.assign(r);var u=Aa(Na(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(va(this.accumulatedGrads.map((function(e){return e.variable}))),va(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedGrads),_toConsumableArray(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:e.t0=(t=e.sent).length,n=e.t0/2,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),a}(Ga);function ja(e,t,n){return Gt.runKernel("Fill",{},{shape:e,value:t,dtype:n})}Ha.className="Adadelta",Zr(Ha);var qa=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return _classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.initialAccumulatorValue=n,t.accumulatedGrads=[],t}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Gt.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:ma((function(){return ja(a.shape,t.initialAccumulatorValue).variable(!1)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;ma((function(){var e=Aa(o,Da(i));o.assign(e);var n=Aa(Na(Ia(i,Ra(Aa(e,Gt.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&va(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),a}(Ga);qa.className="Adagrad",Zr(qa);var Ka=$t({pow_:function(e,t){var n,r=Yt(e,"base","pow"),a=Yt(t,"exp","pow");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel(Ze,{a:r,b:a})}}),Xa=$t({sub_:function(e,t){var n,r=Yt(e,"a","sub"),a=Yt(t,"b","sub");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel(Je,{a:r,b:a})}}),Za=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],ma((function(){i.accBeta1=Wa(t).variable(),i.accBeta2=Wa(n).variable()})),null==o&&(i.epsilon=Gt.backend.epsilon()),i}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ma((function(){var r=Xa(1,t.accBeta1),a=Xa(1,t.accBeta2);n.forEach((function(n,i){var o=Gt.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:ma((function(){return Oa(o).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:ma((function(){return Oa(o).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=Aa(Na(u,t.beta1),Na(s,1-t.beta1)),h=Aa(Na(c,t.beta2),Na(Da(s),1-t.beta2)),f=Ia(l,r),d=Ia(h,a);u.assign(l),c.assign(h);var p=Aa(Na(Ia(f,Aa(Ra(d),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(Na(t.accBeta1,t.beta1)),t.accBeta2.assign(Na(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&va(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&va(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedFirstMoment),_toConsumableArray(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,ma((function(){r.accBeta1.assign(Ka(r.beta1,r.iterations_+1)),r.accBeta2.assign(Ka(r.beta2,r.iterations_+1))})),n=t.length/2,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),a}(Ga);Za.className="Adam",Zr(Za);var Ya=$t({abs_:function(e){var t=Yt(e,"x","abs");return Gt.runKernel("complex64"===t.dtype?"ComplexAbs":"Abs",{x:t})}});function Ja(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function $a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function Qa(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,"."));n.unshift(i)}}return n}var ei=$t({maximum_:function(e,t){var n,r=Yt(e,"a","maximum"),a=Yt(t,"b","maximum");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=Yn(r,"int32"),a=Yn(a,"int32")),Qa(r.shape,a.shape),Gt.runKernel("Maximum",{a:r,b:a})}}),ti=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return _classCallCheck(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],ma((function(){i.iteration=Wa(0).variable(),i.accBeta1=Wa(t).variable()})),null==o&&(i.epsilon=Gt.backend.epsilon()),i}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ma((function(){var r=Xa(1,t.accBeta1),a=Ia(-t.learningRate,Aa(Na(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Gt.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Oa(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Oa(o).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=Aa(Na(u,t.beta1),Na(s,1-t.beta1)),h=Na(c,t.beta2),f=Ya(s),d=ei(h,f);u.assign(l),c.assign(d);var p=Aa(Na(Ia(a,r),Ia(l,Aa(d,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(Aa(t.iteration,1)),t.accBeta1.assign(Na(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&va(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&va(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),a}(Ga);ti.className="Adamax",Zr(ti);var ni=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.setLearningRate(e),t}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Gt.registeredVariables[n];ma((function(){var e=Aa(Na(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ga(Wa(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(e.t0=(t=e.sent).length,0===e.t0){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),a}(Ga);ni.className="SGD",Zr(ni);var ri=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,a),(n=r.call(this,e)).learningRate=e,n.momentum=t,n.useNesterov=i,n.accumulations=[],n.m=Wa(n.momentum),n}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Gt.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:ma((function(){return Oa(a).variable(!1)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&ma((function(){var e,n=Aa(Na(t.m,i),o);e=Aa(Na(t.c,t.useNesterov?Aa(o,Na(n,t.m)):n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&va(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),a}(ni);ri.className="Momentum",Zr(ri);var ai=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.decay=n,t.momentum=i,t.epsilon=o,t.accumulatedMeanSquares=[],t.accumulatedMoments=[],t.accumulatedMeanGrads=[],t.centered=s,null==o&&(t.epsilon=Gt.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return _possibleConstructorReturn(t)}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Gt.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:ma((function(){return Oa(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:ma((function(){return Oa(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:ma((function(){return Oa(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;ma((function(){var e=Aa(Na(o,t.decay),Na(Da(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=Aa(Na(n,t.decay),Na(i,1-t.decay)),c=Ia(Na(i,t.learningRate),Ra(Xa(e,Aa(Da(u),t.epsilon)))),l=Aa(Na(s,t.momentum),c);o.assign(e),n.assign(u),s.assign(l);var h=Xa(a,l);a.assign(h)}else{var f=Aa(Na(o,t.decay),Na(Da(i),1-t.decay)),d=Aa(Na(s,t.momentum),Ia(Na(i,t.learningRate),Ra(Aa(f,t.epsilon))));o.assign(f),s.assign(d);var p=Xa(a,d);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&va(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&va(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&va(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedMeanSquares),_toConsumableArray(this.accumulatedMoments)),this.centered&&t.push.apply(t,_toConsumableArray(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),a}(Ga);ai.className="RMSProp",Zr(ai);var ii=$t({acos_:function(e){var t=Yt(e,"x","acos");return Gt.runKernel("Acos",{x:t})}}),oi=$t({acosh_:function(e){var t=Yt(e,"x","acosh");return Gt.runKernel("Acosh",{x:t})}}),si=$t({addN_:function(e){Q(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Q(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Yt(e,"tensors".concat(t),"addN")})),n=t[0];return t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!ie(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})),Gt.runKernel("AddN",t)}}),ui=$t({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","all","bool");return Gt.runKernel("All",{x:r},{axis:t,keepDims:n})}}),ci=$t({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","any","bool");return Gt.runKernel("Any",{x:r},{axis:t,keepDims:n})}}),li=$t({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","argMax");return Gt.runKernel("ArgMax",{x:n},{axis:t})}}),hi=$t({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","argMin");return Gt.runKernel("ArgMin",{x:n},{axis:t})}}),fi=$t({asin_:function(e){var t=Yt(e,"x","asin");return Gt.runKernel("Asin",{x:t})}}),di=$t({asinh_:function(e){var t=Yt(e,"x","asinh");return Gt.runKernel("Asinh",{x:t})}}),pi=$t({atan_:function(e){var t=Yt(e,"x","atan");return Gt.runKernel("Atan",{x:t})}}),mi=$t({atan2_:function(e,t){var n,r=Yt(e,"a","atan2"),a=Yt(t,"b","atan2");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel("Atan2",{a:r,b:a})}}),vi=$t({atanh_:function(e){var t=Yt(e,"x","atanh");return Gt.runKernel("Atanh",{x:t})}});function gi(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0;return bi(e,[].concat(_toConsumableArray(t),[e[3]]),n,i,r,null,null,Mi(a))}function yi(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=ki(t),c=_slicedToArray(u,2),l=c[0],h=c[1];if("channelsLast"===s)o=[l,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,h,e[1],e[1]]}return bi(e,o,n,r,a,i,!1,s)}function _i(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=Ci(t),l=_slicedToArray(c,3),h=l[0],f=l[1],d=l[2];if("NDHWC"===u)s="channelsLast",o=[h,f,d,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[h,f,d,e[1],e[1]]}return xi(e,o,n,r,a,!1,s,i)}function bi(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,h=-1;if("channelsLast"===s){var f=_slicedToArray(e,4);u=f[0],c=f[1],l=f[2],h=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var d=_slicedToArray(e,4);u=d[0],h=d[1],c=d[2],l=d[3]}var p,m=_slicedToArray(t,4),v=m[0],g=m[1],y=m[3],_=ki(n),b=_slicedToArray(_,2),x=b[0],w=b[1],k=ki(r),C=_slicedToArray(k,2),S=C[0],T=C[1],E=Si(v,S),A=Si(g,T),M=function(e,t,n,r,a,i,o,s,u){var c,l,h;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=wi(e,t,n));var i=e[1];return[Ti((e[0]-t+2*r)/n+1,a),Ti((i-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],h=f[1]}else if("same"===e){l=Math.ceil(t/r),h=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(h-1)*a+o-n),m=Math.floor(d/2),v=d-m,g=Math.floor(p/2);c={top:m,bottom:v,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],_="channelsLast"===u?e[1][1]:e[2][1],b="channelsLast"===u?e[2][0]:e[3][0],x="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:_,left:b,right:x,type:0===y&&0===_&&0===b&&0===x?"VALID":"EXPLICIT"},l=Ti((t-i+y+_)/r+1,s),h=Ti((n-o+b+x)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:h}}(a,c,l,x,w,E,A,i,s),I=M.padInfo,N=M.outHeight,R=M.outWidth,D=o?y*h:y;return"channelsFirst"===s?p=[u,D,N,R]:"channelsLast"===s&&(p=[u,N,R,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:h,outHeight:N,outWidth:R,outChannels:D,padInfo:I,strideHeight:x,strideWidth:w,filterHeight:v,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationHeight:S,dilationWidth:T,inShape:e,outShape:p,filterShape:t}}function xi(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,h=-1,f=-1;if("channelsLast"===o){var d=_slicedToArray(e,5);u=d[0],c=d[1],l=d[2],h=d[3],f=d[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=_slicedToArray(e,5);u=p[0],f=p[1],c=p[2],l=p[3],h=p[4]}var m,v=_slicedToArray(t,5),g=v[0],y=v[1],_=v[2],b=v[4],x=Ci(n),w=_slicedToArray(x,3),k=w[0],C=w[1],S=w[2],T=Ci(r),E=_slicedToArray(T,3),A=E[0],M=E[1],I=E[2],N=Si(g,A),R=Si(y,M),D=Si(_,I),O=function(e,t,n,r,a,i,o,s,u,c,l){var h,f,d,p;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=wi(e,t,r));var o=e[1],s=e[2];return[Ti((e[0]-t+2*a)/r+1,i),Ti((o-t+2*a)/r+1,i),Ti((s-t+2*a)/r+1,i),1]}([t,n,r,1],s,0,a,e,l);f=m[0],d=m[1],p=m[2]}else if("same"===e){var v=((f=Math.ceil(t/a))-1)*a+s-t,g=((d=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,_=Math.floor(v/2),b=v-_,x=Math.floor(g/2),w=g-x,k=Math.floor(y/2);h={top:x,bottom:w,left:k,right:y-k,front:_,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}(a,c,l,h,k,C,S,N,R,D,s),L=O.padInfo,F=O.outDepth,P=O.outHeight,z=O.outWidth,B=i?b*f:b;return"channelsFirst"===o?m=[u,B,F,P,z]:"channelsLast"===o&&(m=[u,F,P,z,B]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:h,inChannels:f,outDepth:F,outHeight:P,outWidth:z,outChannels:B,padInfo:L,strideDepth:k,strideHeight:C,strideWidth:S,filterDepth:g,filterHeight:y,filterWidth:_,effectiveFilterDepth:N,effectiveFilterHeight:R,effectiveFilterWidth:D,dilationDepth:A,dilationHeight:M,dilationWidth:I,inShape:e,outShape:m,filterShape:t}}function wi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Si(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function ki(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ci(e){return"number"==typeof e?[e,e,e]:e}function Si(e,t){return t<=1?e:e+(e-1)*(t-1)}function Ti(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Ei(e){var t=_slicedToArray(ki(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Ai(e,t){return Ei(e)||Ei(t)}function Mi(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}var Ii=$t({reshape_:function(e,t){var n=Yt(e,"x","reshape","string_or_numeric");return Gt.runKernel("Reshape",{x:n},{shape:t})}}),Ni=$t({avgPool_:function(e,t,n,r,a){var i=Yt(e,"x","avgPool","float32");Q(Ai(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '1'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Ii(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Q(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),null!=a&&Q(oe(r),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u=Gt.runKernel("AvgPool",{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return u=Yn(u,i.dtype),s?Ii(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Ri=$t({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Yt(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Q(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Q("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),null!=a&&Q(oe(r),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c=Gt.runKernel("AvgPool3D",{x:s},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i});return c=Yn(c,s.dtype),u?Ii(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Di=$t({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Q(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Jt(e,"tensors","concat","string_or_numeric");return"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length?Jn(n[0]):Gt.runKernel("Concat",n,{axis:t})}}),Oi=$t({sigmoid_:function(e){var t=Yt(e,"x","sigmoid");return Gt.runKernel("Sigmoid",{x:t})}}),Li=$t({slice_:function(e,t,n){var r=Yt(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return Gt.runKernel("Slice",{x:r},{begin:t,size:n})}}),Fi=$t({tanh_:function(e){var t=Yt(e,"x","tanh");return Gt.runKernel("Tanh",{x:t})}}),Pi=$t({basicLSTMCell_:function(e,t,n,r,a,i){var o=Yt(e,"forgetBias","basicLSTMCell"),s=Yt(t,"lstmKernel","basicLSTMCell"),u=Yt(n,"lstmBias","basicLSTMCell"),c=Yt(r,"data","basicLSTMCell"),l=Yt(a,"c","basicLSTMCell"),h=Yt(i,"h","basicLSTMCell"),f=Di([c,h],1),d=_r(f,s),p=Aa(d,u),m=p.shape[1]/4,v=[p.shape[0],m],g=Li(p,[0,0],v),y=Li(p,[0,m],v),_=Li(p,[0,2*m],v),b=Li(p,[0,3*m],v),x=Aa(Na(Oi(g),Fi(y)),Na(l,Oi(Aa(o,_))));return[x,Na(Fi(x),Oi(b))]}}),zi=$t({batchToSpaceND_:function(e,t,n){var r=Yt(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return Q(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Q(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Q(r.shape[0]%a==0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)})),Gt.runKernel("BatchToSpaceND",{x:r},{blockShape:t,crops:n})}}),Bi=$t({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Yt(e,"x","batchNorm"),c=Yt(t,"mean","batchNorm"),l=Yt(n,"variance","batchNorm");null!=a&&(o=Yt(a,"scale","batchNorm")),null!=r&&(s=Yt(r,"offset","batchNorm")),Q(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Q(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Q(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var h=function(e){return 0===e.rank||1===e.rank?Ii(e,[1,1,1,e.size]):2===e.rank?Ii(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Ii(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),f=Gt.runKernel("FusedBatchNorm",{x:h,scale:o,offset:s,mean:c,variance:l},{varianceEpsilon:i});return Ii(f,u.shape)}}),Ui=$t({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Yt(e,"x","batchNorm"),c=Yt(t,"mean","batchNorm"),l=Yt(n,"variance","batchNorm");return null!=a&&(o=Yt(a,"scale","batchNorm")),null!=r&&(s=Yt(r,"offset","batchNorm")),Q(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Q(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),Q(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Q(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Q(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bi(u,c,l,s,o,i)}}),Vi=$t({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Yt(e,"x","batchNorm"),c=Yt(t,"mean","batchNorm"),l=Yt(n,"variance","batchNorm");return null!=a&&(o=Yt(a,"scale","batchNorm")),null!=r&&(s=Yt(r,"offset","batchNorm")),Q(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Q(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),Q(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Q(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Q(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bi(u,c,l,s,o,i)}}),Wi=$t({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Yt(e,"x","batchNorm"),c=Yt(t,"mean","batchNorm"),l=Yt(n,"variance","batchNorm");return null!=a&&(o=Yt(a,"scale","batchNorm")),null!=r&&(s=Yt(r,"offset","batchNorm")),Q(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Q(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),Q(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Q(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Q(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bi(u,c,l,s,o,i)}}),Gi=$t({bincount_:function(e,t,n){var r=Yt(e,"x","bincount"),a=Yt(t,"weights","bincount");return Q("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Q(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Q(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")})),Gt.runKernel("Bincount",{x:r,weights:a},{size:n})}}),Hi=$t({broadcastTo_:function(e,t){var n=Yt(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Ii(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));return 0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length?Jn(n):Gt.runKernel("Tile",{x:n},{reps:o})}}),ji=$t({ceil_:function(e){var t=Yt(e,"x","ceil");return Gt.runKernel("Ceil",{x:t})}}),qi=$t({clipByValue_:function(e,t,n){var r=Yt(e,"x","clipByValue");return Q(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),Gt.runKernel("ClipByValue",{x:r},{clipValueMin:t,clipValueMax:n})}}),Ki=$t({concat1d_:function(e){return Di(e,0)}}),Xi=$t({concat2d_:function(e,t){return Di(e,t)}}),Zi=$t({concat3d_:function(e,t){return Di(e,t)}}),Yi=$t({concat4d_:function(e,t){return Di(e,t)}}),Ji=$t({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Yt(e,"x","conv2d"),u=Yt(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=Ii(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Q(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),Q(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),null!=o&&Q(oe(r),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var h="NHWC"===a?c.shape[3]:c.shape[1];Q(h===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Q(Ai(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var f=Gt.runKernel("Conv2D",{x:c,filter:u},{strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o});return l?Ii(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),$i=$t({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Yt(e,"x","conv1d"),u=Yt(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Ii(s,[1,s.shape[0],s.shape[1]])),Q(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),Q(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),null!=o&&Q(oe(r),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")})),Q(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Q(Ai(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Q("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var h=Ii(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=Ii(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d=Ji(f,h,[1,n],r,"NHWC",[1,i],o);return Ii(d,l?[d.shape[2],d.shape[3]]:[d.shape[0],d.shape[2],d.shape[3]])}}),Qi=$t({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Q(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Q(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Q(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Q(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],h="NHWC"===i?u.shape[3]:u.shape[1];Q(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Q(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=o&&Q(oe(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")}));var f=Gt.runKernel("Conv2DBackpropInput",{dy:u,filter:n},{strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s});return c?Ii(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),eo=$t({conv2dTranspose_:function(e,t,n,r,a,i){var o=Yt(e,"x","conv2dTranspose"),s=Yt(t,"filter","conv2dTranspose");return Qi(n,o,s,r,a,"NHWC",i)}}),to=$t({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Yt(e,"x","conv3d"),s=Yt(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Q(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Q(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Q(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Q(Ai(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Q("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l=Gt.runKernel("Conv3D",{x:u,filter:s},{strides:n,pad:r,dataFormat:a,dilations:i});return c?Ii(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}}),no=$t({conv3DBackpropInput_:function(e,t,n,r,a){Q(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];Q(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Q(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Q(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Q(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Q(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l=Gt.runKernel("Conv3DBackpropInputV2",{dy:o,filter:n},{pad:a,strides:r,inputShape:i});return s?Ii(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}}),ro=$t({conv3dTranspose_:function(e,t,n,r,a){var i=Yt(e,"x","conv3dTranspose"),o=Yt(t,"filter","conv3dTranspose");return no(n,i,o,r,a)}}),ao=$t({cos_:function(e){var t=Yt(e,"x","cos");return Gt.runKernel(He,{x:t})}}),io=$t({cosh_:function(e){var t=Yt(e,"x","cosh");return Gt.runKernel("Cosh",{x:t})}}),oo=$t({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Yt(e,"x","cumsum");return Gt.runKernel("Cumsum",{x:a},{axis:t,exclusive:n,reverse:r})}}),so=$t({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Yt(e,"x","denseBincount"),i=Yt(t,"weights","denseBincount");return Q("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),Q(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),Q(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Q(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")})),Gt.runKernel("DenseBincount",{x:a,weights:i},{size:n,binaryOutput:r})}}),uo=$t({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Yt(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return Q(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Q(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Q(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)})),Gt.runKernel("DepthToSpace",{x:r},{blockSize:t,dataFormat:n})}}),co=$t({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Yt(e,"x","depthwiseConv2d"),u=Yt(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=Ii(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Q(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Q(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Q(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),null!=o&&Q(oe(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var h=Gt.runKernel("DepthwiseConv2dNative",{x:c,filter:u},{strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o});return l?Ii(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),lo=$t({diag_:function(e){var t=Yt(e,"x","diag");return Gt.runKernel("Diag",{x:t})}}),ho=$t({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Yt(e,"x","dilation2d"),s=Yt(t,"filter","dilation2d");Q(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),Q(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Q("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l=Gt.runKernel("Dilation2D",{x:u,filter:s},{strides:n,pad:r,dilations:a});return c?Ii(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),fo=$t({equal_:function(e,t){var n,r=Yt(e,"a","equal"),a=Yt(t,"b","equal");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("Equal",{a:r,b:a})}}),po=$t({where_:function(e,t,n){var r=Yt(t,"a","where"),a=Yt(n,"b","where"),i=Yt(e,"condition","where","bool"),o=Qa(r.shape,a.shape),s=Hi(r,o),u=Hi(a,o);return 1===i.rank&&Q(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==i.rank&&ee(i.shape,u.shape,"Error in where: "),Gt.runKernel("Select",{condition:i,t:s,e:u})}}),mo=$t({divNoNan_:function(e,t){var n=Yt(e,"a","div"),r=Yt(t,"b","div"),a=_slicedToArray(Lt(n,r),2);n=a[0],r=a[1];var i=Ia(n,r),o=Oa(i),s=fo(r,o);return po(s,o,i)}}),vo=$t({dot_:function(e,t){var n=Yt(e,"t1","dot"),r=Yt(t,"t2","dot");Q(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Q(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Ii(n,[1,-1]),s=Ii(r,[-1,1]),u=_r(o,s);return Ii(u,[])}if(1===n.rank&&2===r.rank){var c=Ii(n,[1,-1]),l=Ii(r,[r.shape[0],r.shape[1]]),h=_r(c,l);return Ii(h,[h.size])}if(2===n.rank&&1===r.rank){var f=Ii(r,[-1,1]),d=_r(n,f);return Ii(d,[d.size])}var p=Ii(r,[r.shape[0],r.shape[1]]);return _r(n,p)}}),go=$t({elu_:function(e){var t=Yt(e,"x","elu");return Gt.runKernel("Elu",{x:t})}}),yo=$t({erf_:function(e){var t=Yt(e,"x","erf");return Q("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Yn(t,"float32")),Gt.runKernel(je,{x:t})}}),_o=$t({exp_:function(e){var t=Yt(e,"x","exp");return Gt.runKernel(qe,{x:t})}}),bo=$t({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","expandDims","string_or_numeric");return Q(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"})),Gt.runKernel("ExpandDims",{input:n},{dim:t})}}),xo=$t({expm1_:function(e){var t=Yt(e,"x","expm1");return Gt.runKernel("Expm1",{x:t})}}),wo=$t({tile_:function(e,t){var n=Yt(e,"x","tile","string_or_numeric");return Q(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")})),Gt.runKernel("Tile",{x:n},{reps:t})}}),ko=$t({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Zn([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Ii(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return wo(bo(s,0),[n[0],1,1]);if(2===n.length)return wo(bo(bo(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return wo(bo(bo(bo(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),Co=$t({floor_:function(e){var t=Yt(e,"x","floor");return Gt.runKernel("Floor",{x:t})}}),So=$t({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Yt(e,"x","gather"),i=Yt(t,"indices","gather","int32");return Gt.runKernel("GatherV2",{x:a,indices:i},{axis:n,batchDims:r})}}),To=$t({greater_:function(e,t){var n,r=Yt(e,"a","greater"),a=Yt(t,"b","greater");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("Greater",{a:r,b:a})}}),Eo=$t({greaterEqual_:function(e,t){var n,r=Yt(e,"a","greaterEqual"),a=Yt(t,"b","greaterEqual");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("GreaterEqual",{a:r,b:a})}}),Ao=$t({imag_:function(e){var t=Yt(e,"input","imag");return Gt.runKernel("Imag",{input:t})}}),Mo=$t({isFinite_:function(e){var t=Yt(e,"x","isFinite");return Gt.runKernel("IsFinite",{x:t})}}),Io=$t({isInf_:function(e){var t=Yt(e,"x","isInf");return Gt.runKernel("IsInf",{x:t})}}),No=$t({isNaN_:function(e){var t=Yt(e,"x","isNaN");return Gt.runKernel("IsNan",{x:t})}}),Ro=$t({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Yt(e,"x","leakyRelu");return Gt.runKernel("LeakyRelu",{x:n},{alpha:t})}}),Do=$t({less_:function(e,t){var n,r=Yt(e,"a","less"),a=Yt(t,"b","less");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("Less",{a:r,b:a})}}),Oo=$t({lessEqual_:function(e,t){var n,r=Yt(e,"a","lessEqual"),a=Yt(t,"b","lessEqual");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("LessEqual",{a:r,b:a})}});function Lo(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Gt.runKernel("LinSpace",{},{start:e,stop:t,num:n})}var Fo=$t({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Yt(e,"x","localResponseNormalization");Q(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Q(oe(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Ii(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u=Gt.runKernel("LRN",{x:o},{depthRadius:t,bias:n,alpha:r,beta:a});return s?Ii(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Po=$t({log_:function(e){var t=Yt(e,"x","log");return Gt.runKernel(Ke,{x:t})}}),zo=$t({log1p_:function(e){var t=Yt(e,"x","log1p");return Gt.runKernel("Log1p",{x:t})}}),Bo=$t({neg_:function(e){var t=Yt(e,"x","neg");return Gt.runKernel("Neg",{x:t})}}),Uo=$t({softplus_:function(e){var t=Yt(e,"x","softplus");return Gt.runKernel("Softplus",{x:t})}}),Vo=$t({logSigmoid_:function(e){var t=Yt(e,"x","logSigmoid");return Ua((function(e){return{value:Bo(Uo(Bo(e))),gradFunc:function(t){return Na(t,Oi(Bo(e)))}}}))(t)}}),Wo=$t({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","max");return Gt.runKernel("Max",{x:r},{reductionIndices:t,keepDims:n})}}),Go=$t({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","sum");return"bool"===r.dtype&&(r=Yn(r,"int32")),Gt.runKernel("Sum",{x:r},{axis:t,keepDims:n})}}),Ho=$t({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Yt(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));return Ua((function(e,n){var r=Wo(e,t,!0),a=Xa(e,r),i=Xa(Yn(a,"float32"),Po(Go(_o(a),t,!0)));return n([i]),{value:i,gradFunc:function(e,n){var r=_slicedToArray(n,1)[0],a=_o(r);return Xa(e,Na(Go(e,t,!0),a))}}}))(n)}});function jo(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function qo(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function Ko(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function Xo(e,t){return qo(e,t.map((function(e){return 1})),t)}function Zo(e,t,n){Q(jo(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Yo(e,t){if(jo(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Jo(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function $o(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Qo=$t({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","logSumExp"),a=de(t,r.shape),i=Wo(r,a,!0),o=Xa(r,i),s=_o(o),u=Go(s,a),c=Po(u),l=Aa(Ii(i,c.shape),c);if(n){var h=Xo(l.shape,a);return Ii(l,h)}return l}}),es=$t({logicalAnd_:function(e,t){var n=Yt(e,"a","logicalAnd","bool"),r=Yt(t,"b","logicalAnd","bool");return Qa(n.shape,r.shape),Gt.runKernel("LogicalAnd",{a:n,b:r})}}),ts=$t({logicalNot_:function(e){var t=Yt(e,"x","logicalNot","bool");return Gt.runKernel("LogicalNot",{x:t})}}),ns=$t({logicalOr_:function(e,t){var n=Yt(e,"a","logicalOr","bool"),r=Yt(t,"b","logicalOr","bool");return Qa(n.shape,r.shape),Gt.runKernel("LogicalOr",{a:n,b:r})}}),rs=$t({logicalXor_:function(e,t){var n=Yt(e,"a","logicalXor","bool"),r=Yt(t,"b","logicalXor","bool");return Qa(n.shape,r.shape),es(ns(e,t),ts(es(e,t)))}}),as=$t({maxPool_:function(e,t,n,r,a){var i=Yt(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Ii(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Q(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),Q(Ai(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '1'")})),null!=a&&Q(oe(r),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u=Gt.runKernel("MaxPool",{x:o},{filterSize:t,strides:n,pad:r,dimRoundingMode:a});return s?Ii(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),is=$t({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Yt(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Q(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Q("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),null!=a&&Q(oe(r),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c=Gt.runKernel("MaxPool3D",{x:s},{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i});return u?Ii(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),os=$t({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Yt(e,"x","maxPoolWithArgmax"),o=Gt.runKernel("MaxPoolWithArgmax",{x:i},{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:o[0],indexes:o[1]}}}),ss=$t({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","mean");return Gt.runKernel("Mean",{x:r},{axis:t,keepDims:n})}}),us=$t({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","min");return Gt.runKernel("Min",{x:r},{axis:t,keepDims:n})}}),cs=$t({minimum_:function(e,t){var n,r=Yt(e,"a","minimum"),a=Yt(t,"b","minimum");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=Yn(r,"int32"),a=Yn(a,"int32")),Qa(r.shape,a.shape),Gt.runKernel("Minimum",{a:r,b:a})}}),ls=$t({mirrorPad_:function(e,t,n){Q("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Yt(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Q(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){Q(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Q(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);return Gt.runKernel("MirrorPad",{x:r},{paddings:t,mode:n})}}),hs=$t({mod_:function(e,t){var n,r=Yt(e,"a","mod"),a=Yt(t,"b","mod");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Gt.runKernel(Xe,{a:r,b:a})}}),fs=$t({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=de(t,(e=Yt(e,"x","moments")).shape),a=ss(e,r,n),i=a.shape;n||(i=Xo(a.shape,r));var o=Da(Xa(Yn(e,"float32"),Ii(a,i)));return{mean:a,variance:ss(o,r,n)}}}),ds=$t({multiRNNCell_:function(e,t,n,r){for(var a=Yt(t,"data","multiRNNCell"),i=Jt(n,"c","multiRNNCell"),o=Jt(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var h=[],f=[],d=0;d<u.length;d+=2)h.push(u[d]),f.push(u[d+1]);return[h,f]}}),ps=$t({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Yt(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?Ii(a,[1,-1]):a,u=Gt.runKernel("Multinomial",{logits:s},{numSamples:t,seed:n,normalized:r});return 1===o?Ii(u,[u.size]):u}}),ms=$t({notEqual_:function(e,t){var n,r=Yt(e,"a","notEqual"),a=Yt(t,"b","notEqual");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("NotEqual",{a:r,b:a})}});function vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=vs(e,"float32"),r=vs(e,"float32");return Qt(n,r)}var a=Re(re(e),t);return Gt.makeTensor(a,e,t)}function gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=gs(e,"float32"),r=vs(e,"float32");return Qt(n,r)}var a=Ne(re(e),t);return Gt.makeTensor(a,e,t)}var ys=$t({onesLike_:function(e){var t=Yt(e,"x","onesLike");return Gt.runKernel("OnesLike",{x:t})}}),_s=$t({outerProduct_:function(e,t){var n=Yt(e,"v1","outerProduct"),r=Yt(t,"v2","outerProduct");Q(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Ii(n,[-1,1]),i=Ii(r,[1,-1]);return _r(a,i)}}),bs=$t({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Yt(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Gt.runKernel("PadV2",{x:r},{paddings:t,constantValue:n})}}),xs=$t({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Q(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),bs(e,[t],n)}}),ws=$t({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Q(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bs(e,t,n)}}),ks=$t({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Q(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bs(e,t,n)}}),Cs=$t({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Q(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bs(e,t,n)}}),Ss=$t({spaceToBatchND_:function(e,t,n){var r=Yt(e,"x","spaceToBatchND");return Q(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Q(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Q(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())})),Gt.runKernel("SpaceToBatchND",{x:r},{blockShape:t,paddings:n})}}),Ts=$t({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=Yt(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Q(Ai(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,l=yi(s.shape,t,i,a,r),h=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([l.filterHeight,l.filterWidth],h):[[0,0],[0,0]];var f=1===h[0]&&1===h[1],d=_slicedToArray(function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([l.inHeight,l.inWidth],h,c),2),p=d[0],m=d[1],v=f?r:"valid",g=f?s:Ss(s,h,p),y=("avg"===n?function(){return Ni(g,t,i,v)}:function(){return as(g,t,i,v)})(),_=f?y:zi(y,h,m);return u?Ii(_,[_.shape[1],_.shape[2],_.shape[3]]):_}}),Es=$t({prelu_:function(e,t){var n=Yt(e,"x","prelu"),r=Yt(t,"alpha","prelu");return Gt.runKernel("Prelu",{x:n,alpha:r})}}),As=$t({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Yt(e,"x","prod");return"bool"===r.dtype&&(r=Yn(r,"int32")),Gt.runKernel("Prod",{x:r},{axis:t,keepDims:n})}}),Ms=$t({rand_:function(e,t,n){var r=re(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Gt.makeTensor(a,e,n)}}),Is=n("pDBr"),Ns=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Is.alea(o.toString())}return _createClass(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Rs=function(){function e(t,n,r,a){_classCallCheck(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Is.alea(i.toString()),this.randn=new Ns(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return _createClass(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i*=1/this.beta*this.d,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Ds=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(_classCallCheck(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Is.alea(i)}return _createClass(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}(),Os=$t({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Rs(t,n,r,a),o=Zn(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Ls=$t({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ns(t,n,r,!1,a),o=Zn(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Fs=$t({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=Zn(e,r),o=new Ds(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function Ps(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");return Gt.runKernel("Range",{},{start:e,stop:t,step:n,dtype:r})}var zs=$t({real_:function(e){var t=Yt(e,"input","real");return Gt.runKernel("Real",{input:t})}}),Bs=$t({reciprocal_:function(e){var t=Yt(e,"x","reciprocal");return Gt.runKernel("Reciprocal",{x:t})}}),Us=$t({relu_:function(e){var t=Yt(e,"x","relu");return Gt.runKernel("Relu",{x:t})}}),Vs=$t({relu6_:function(e){var t=Yt(e,"x","relu6");return Gt.runKernel("Relu6",{x:t})}}),Ws=$t({reverse_:function(e,t){var n=Yt(e,"x","reverse");return Gt.runKernel("Reverse",{x:n},{dims:t})}}),Gs=$t({reverse1d_:function(e){var t=Yt(e,"x","reverse");return Q(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Ws(t,0)}}),Hs=$t({reverse2d_:function(e,t){var n=Yt(e,"x","reverse");return Q(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Ws(n,t)}}),js=$t({reverse3d_:function(e,t){var n=Yt(e,"x","reverse");return Q(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Ws(n,t)}}),qs=$t({reverse4d_:function(e,t){var n=Yt(e,"x","reverse");return Q(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Ws(n,t)}}),Ks=$t({round_:function(e){var t=Yt(e,"x","round");return Gt.runKernel("Round",{x:t})}}),Xs=$t({rsqrt_:function(e){var t=Yt(e,"x","rsqrt");return Gt.runKernel("Rsqrt",{x:t})}}),Zs=$t({selu_:function(e){var t=Yt(e,"x","selu");return Gt.runKernel("Selu",{x:t})}}),Ys=$t({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Yt(e,"x","separableConv2d"),u=Yt(t,"depthwiseFilter","separableConv2d"),c=Yt(n,"pointwiseFilter","separableConv2d"),l=s,h=!1;if(3===s.rank&&(h=!0,l=Ii(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Q(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Q(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Q(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Q(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),Q(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],d=u.shape[3];Q(c.shape[2]===f*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*d,", ")+"but got ".concat(c.shape[2],".")}));var p=co(l,u,r,a,o,i),m=Ji(p,c,1,"valid",o);return h?Ii(m,[m.shape[1],m.shape[2],m.shape[3]]):m}}),Js=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yt(t,"x","setdiff1d"),a=Yt(n,"y","setdiff1d"),Q(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Q(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Q(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return i=e.sent,e.next=7,a.data();case 7:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new xt([u],r.dtype),h=new xt([u],"int32"),f=0,d=0;f<i.length;f++)s.has(i[f])||(l.values[d]=i[f],h.values[d]=f,d++);return e.abrupt("return",[l.toTensor(),h.toTensor()]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$s=$t({sign_:function(e){var t=Yt(e,"x","sign");return Gt.runKernel("Sign",{x:t})}}),Qs=$t({sin_:function(e){var t=Yt(e,"x","sin");return Gt.runKernel(Ye,{x:t})}}),eu=$t({sinh_:function(e){var t=Yt(e,"x","sinh");return Gt.runKernel("Sinh",{x:t})}}),tu=$t({slice1d_:function(e,t,n){var r=Yt(e,"x","slice1d");return Q(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Li(r,[t],[n])}}),nu=$t({slice2d_:function(e,t,n){var r=Yt(e,"x","slice2d");return Q(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Li(r,t,n)}}),ru=$t({slice3d_:function(e,t,n){var r=Yt(e,"x","slice3d");return Q(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Li(r,t,n)}}),au=$t({slice4d_:function(e,t,n){var r=Yt(e,"x","slice4d");return Q(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Li(r,t,n)}}),iu=$t({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Yt(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));return Gt.runKernel("Softmax",{logits:n},{dim:t})}}),ou=$t({fft_:function(e){return Q("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")})),Gt.runKernel("FFT",{input:e})}}),su=$t({ifft_:function(e){return Q("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")})),Gt.runKernel("IFFT",{input:e})}}),uu=$t({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Ii(e,[r,n]);t=su(a)}else{var i=[r,2*(n-1)],o=Ii(zs(e),[r,n]),s=Ii(Ao(e),[r,n]),u=Ws(Li(o,[0,1],[r,n-2]),1),c=Na(Ws(Li(s,[0,1],[r,n-2]),1),Wa(-1)),l=Di([o,u],1),h=Di([s,c],1),f=Ii(Qt(l,h),[i[0],i[1]]);t=su(f)}if(t=zs(t),3===e.rank&&0!==e.shape[0]){var d=t,p=e.shape[0];t=Ii(t,[p,t.shape[0]/p,t.shape[1]]),d.dispose()}return t}}),cu=$t({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Yt(e,"x","split");return Gt.runKernel("SplitV",{x:r},{numOrSizeSplits:t,axis:n})}}),lu=$t({rfft_:function(e,t){Q("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Li(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Di([e,vs(s)],e.shape.length-1),r=t}else n=e;var u=Oa(n),c=Ii(Qt(n,u),[a,r]),l=ou(c),h=Math.floor(r/2)+1,f=zs(l),d=Ao(l),p=cu(f,[h,r-h],f.shape.length-1),m=cu(d,[h,r-h],d.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=h,Ii(Qt(p[0],m[0]),v)}}),hu=$t({squaredDifference_:function(e,t){var n,r=Yt(e,"a","squaredDifference"),a=Yt(t,"b","squaredDifference");return r=(n=_slicedToArray(Lt(r,a),2))[0],a=n[1],Qa(r.shape,a.shape),Gt.runKernel("SquaredDifference",{a:r,b:a},{})}}),fu=$t({squeeze_:function(e,t){var n=Yt(e,"x","squeeze");return Ii(n,pe(n.shape,t).newShape)}}),du=$t({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Jt(e,"tensors","stack","string_or_numeric");return Q(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Q(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"})),Gt.runKernel("Pack",n,{axis:t})}}),pu=$t({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","step");return Gt.runKernel("Step",{x:n},{alpha:t})}}),mu=$t({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=Yt(e,"x","stridedSlice");return Gt.runKernel("StridedSlice",{x:c},{begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u})}}),vu=$t({tan_:function(e){var t=Yt(e,"x","tan");return Gt.runKernel($e,{x:t})}});function gu(e,t){te(e);var n=Xt(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return en(e,null,n,t)}function yu(e,t,n){if(te(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Xt(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return en(e,t,r,n)}function _u(e,t,n){if(te(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Xt(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return en(e,t,r,n)}function bu(e,t,n){if(te(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Xt(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return en(e,t,r,n)}function xu(e,t,n){if(te(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Xt(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return en(e,t=t||r,r,n)}var wu=$t({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Yt(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=Gt.runKernel("TopK",i,o),u=_slicedToArray(s,2),c=u[0],l=u[1];return{values:c,indices:l}}}),ku=$t({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Ns(t,n,r,!0,a),o=Zn(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Cu=$t({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","unique","string_or_numeric");Q(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Gt.runKernel("Unique",r,a),o=_slicedToArray(i,2),s=o[0],u=o[1];return{values:s,indices:u}}}),Su=$t({unsortedSegmentSum_:function(e,t,n){var r=Yt(e,"x","unsortedSegmentSum"),a=Yt(t,"segmentIds","unsortedSegmentSum","int32");return Q(oe(n),(function(){return"numSegments must be of dtype int"})),Gt.runKernel("UnsortedSegmentSum",{x:r,segmentIds:a},{numSegments:n})}}),Tu=$t({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Yt(e,"x","unstack","string_or_numeric");return Q(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")})),Gt.runKernel("Unpack",{value:n},{axis:t})}});function Eu(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Gt.makeVariable(e,t,n,r)}function Au(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Zn(e,"int32"),i=Zn([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]);i.values.set(s,o*e.length)}return i.toTensor()}var Mu=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yt(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=Au(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Iu=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Yt(t,"tensor","boolMask"),i=Yt(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,Q(s>0,(function(){return"mask cannot be scalar"})),ee(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return h=u.slice(0,o).concat([c],u.slice(o+s)),f=Ii(a,h),d=Ii(i,[-1]),e.next=9,Mu(d);case 9:return p=e.sent,m=fu(p,[1]),v=So(f,m,o),e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),d.dispose(),p.dispose(),v));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Nu=$t({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t.rank)return Ya(t);if(1!==t.rank&&null===r)return e(Ii(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return Go(Ya(t),r);if(n===1/0)return Wo(Ya(t),r);if(n===-1/0)return us(Ya(t),r);if("euclidean"===n||2===n)return Ra(Go(Ka(Ya(t),Wa(2,"int32")),r));throw new Error("Error in norm: invalid ord value: ".concat(n))}if(Array.isArray(r)&&2===r.length){if(1===n)return Wo(Go(Ya(t),r[0]),r[1]-1);if(n===1/0)return Wo(Go(Ya(t),r[1]),r[0]);if(n===-1/0)return us(Go(Ya(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return Ra(Go(Da(t),r));throw new Error("Error in norm: invalid ord value: ".concat(n))}throw new Error("Error in norm: invalid axis: ".concat(r))}(e=Yt(e,"x","norm"),t,n),i=a.shape;if(r){var o=de(n,e.shape);i=Xo(a.shape,o)}return Ii(a,i)}}),Ru=$t({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Yt(e,"v","movingAverage"),o=Yt(t,"x","movingAverage"),s=Yt(n,"decay","movingAverage");Ft(i,o),Q(ie(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Wa(1),c=Xa(u,s),l=Na(Xa(o,i),c);if(a){Q(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=Yt(r,"step","movingAverage");l=Ia(l,Xa(u,Ka(s,h)))}return Aa(i,l)}}),Du=$t({scatterND_:function(e,t,n){var r=Yt(e,"indices","scatterND","int32"),a=Yt(t,"updates","scatterND");return Mr(a,r,n),Gt.runKernel("ScatterNd",{indices:r,updates:a},{shape:n})}}),Ou=$t({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Yt(e,"sparseIndices","sparseToDense","int32"),i=Yt(t,"sparseValues","sparseToDense"),o=Yt(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));if(0!==t.rank&&(1!==t.rank||t.size!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),Gt.runKernel("SparseToDense",{sparseIndices:a,sparseValues:i,defaultValue:o},{outputShape:n})}}),Lu=$t({gatherND_:function(e,t){var n=Yt(t,"indices","gatherND","int32"),r=Yt(e,"x","gatherND");return Gt.runKernel("GatherNd",{params:r,indices:n})}}),Fu=$t({dropout_:function(e,t,n,r){var a=Yt(e,"x","dropout");if(Q("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Q(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Ct?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(ie(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(a,n),o=1-t,s=Ia(Co(Aa(Fs(i,0,1,"float32",r),o)),o);return Na(a,s)}});function Pu(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function zu(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return gu(a,"float32")}var Bu=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p,m,v,g,y=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Yt(t,"predictions","inTopK"),i=Yt(n,"targets","inTopK"),Q(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Q(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),ee(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Q(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=7,a.data();case 7:return s=e.sent,e.next=10,i.data();case 10:u=e.sent,c=s.length/o,l=o,h=me("bool",c),f=0;case 15:if(!(f<c)){e.next=30;break}for(d=f*l,p=s.subarray(d,d+l),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});m.sort((function(e,t){return t.value-e.value})),h[f]=0,g=0;case 20:if(!(g<r)){e.next=27;break}if(m[g].index!==u[f]){e.next=24;break}return h[f]=1,e.abrupt("break",27);case 24:g++,e.next=20;break;case 27:f++,e.next=15;break;case 30:return e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),tn(h,i.shape,"bool")));case 31:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Uu=$t({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ii(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Q(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Q(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Q(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];return Q(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),Q(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=o&&Q(oe(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")})),Gt.runKernel("Conv2DBackpropFilter",{x:s,dy:u},{strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n})}});function Vu(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Na(e,pu(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Wu(e,t){var n=t,r=$a(e.shape,t.shape);return r.length>0&&(n=Go(n,r)),Ii(n,e.shape)}function Gu(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Us(e);if("elu"===t)return go(e);if("relu6"===t)return Vs(e);if("prelu"===t)return Es(e,n);if("leakyrelu"===t)return Ro(e,r);throw new Error("Unknown fused activation ".concat(t,"."))}var Hu=function(e,t){return!(e>0)||"linear"===t},ju=$t({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===Hu(Gt.state.gradientDepth,f=f||"linear")){var m=Ji(t,n,r,a,o,u,c);return null!=l&&(m=Aa(m,l)),Gu(m,f,d,p)}var v=Yt(t,"x","conv2d"),g=Yt(n,"filter","conv2d"),y=v,_=!1;3===v.rank&&(_=!0,y=Ii(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Q(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),Q(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),null!=c&&Q(oe(a),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(a,".")})),Q(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),Q(Ai(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),Q("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var b,x,w=bi(y.shape,g.shape,r,u,a,c);null!=l&&(b=_slicedToArray(Lt(b=Yt(l,"bias","fused conv2d"),v),1)[0],Qa(w.outShape,b.shape)),null!=d&&(x=Yt(d,"prelu weights","fused conv2d"));var k=function(e,t){var n=_slicedToArray(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=Vu(e,s,f);Q(Ei(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[Qi(o.shape,l,i,r,a),Uu(o,l,i.shape,r,a)];if(null!=c){var d=Wu(c,l);h.push(d)}return h},C={x:y,filter:g,bias:b,preluActivationWeights:x},S={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};return null==l?Ua((function(e,t,n){var r=Gt.runKernel("FusedConv2D",C,S);return n([t,e,r]),_&&(r=Ii(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:k}}))(y,g):Ua((function(e,t,n,r){var a=Gt.runKernel("FusedConv2D",C,S);return r([t,e,a,n]),_&&(a=Ii(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:k}}))(y,g,b)}}),qu=$t({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ii(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;return 3===u.rank&&(u=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Gt.runKernel("DepthwiseConv2dNativeBackpropFilter",{x:s,dy:u},{strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n})}}),Ku=$t({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c=Gt.runKernel("DepthwiseConv2dNativeBackpropInput",{dy:s,filter:n},{strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e});return u?Ii(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),Xu=$t({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,u=e.dilations,c=void 0===u?[1,1]:u,l=e.dimRoundingMode,h=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights,m=e.leakyreluAlpha;if(!1===Hu(Gt.state.gradientDepth,d)){var v=co(n,r,a,i,s,c,l);return null!=h&&(v=Aa(v,h)),Gu(v,d,p,m)}var g=Yt(n,"x","depthwiseConv2d"),y=Yt(r,"filter","depthwiseConv2d"),_=g,b=!1;3===g.rank&&(b=!0,_=Ii(g,[1,g.shape[0],g.shape[1],g.shape[2]])),Q(4===_.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(_.rank,".")})),Q(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),Q(_.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(_.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==c&&(c=[1,1]),Q(Ai(a,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(c,"'")})),null!=l&&Q(oe(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(l," but got pad ").concat(i,".")}));var x,w,k=bi(_.shape,y.shape,a,c,i,l,!0);null!=h&&(t=_slicedToArray(Lt(x=Yt(h,"bias","fused conv2d"),g),1),x=t[0],Qa(k.outShape,x.shape)),null!=p&&(w=Yt(p,"prelu weights","fused depthwiseConv2d"));var C=function(e,t){Q(Ei(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(c,"'")}));var n=_slicedToArray(t,4),r=n[0],o=n[1],s=n[2],u=n[3],h=Vu(e,s,d),f=Ku(o.shape,h,r,a,i,c,l),p=qu(o,h,r.shape,a,i,c,l);return null!=u?[f,p,Wu(x,h)]:[f,p]},S={x:_,filter:y,bias:x,preluActivationWeights:w},T={strides:a,pad:i,dataFormat:s,dilations:c,dimRoundingMode:l,activation:d,leakyreluAlpha:m};return null==h?Ua((function(e,t,n){var r=Gt.runKernel("FusedDepthwiseConv2D",S,T);return n([t,e,r]),b&&(r=Ii(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(_,y):Ua((function(e,t,n,r){var a=Gt.runKernel("FusedDepthwiseConv2D",S,T);return r([t,e,a,n]),b&&(a=Ii(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(_,y,x)}}),Zu=$t({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,h=e.leakyreluAlpha;if(!1===Hu(Gt.state.gradientDepth,c)){var f=_r(t,n,a,o);return null!=s&&(f=Aa(f,s)),Gu(f,c,l,h)}var d=Yt(t,"a","fused matMul"),p=Yt(n,"b","fused matMul"),m=_slicedToArray(Lt(d,p),2);d=m[0],p=m[1];var v=a?d.shape[d.rank-2]:d.shape[d.rank-1],g=o?p.shape[p.rank-1]:p.shape[p.rank-2],y=a?d.shape[d.rank-1]:d.shape[d.rank-2],_=o?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),x=p.shape.slice(0,-2),w=re(b),k=re(x);Q(d.rank>=2&&p.rank>=2&&d.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(d.rank," and ").concat(p.rank,".")})),Q(ie(b,x),(function(){return"Error in fused matMul: outer dimensions (".concat(b,") and (")+"".concat(x,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," must match.")})),Q(v===g,(function(){return"Error in fused matMul: inner shapes (".concat(v,") and (")+"".concat(g,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var C,S,T=d.shape.slice(0,-2).concat([y,_]),E=Ii(d,a?[w,v,y]:[w,y,v]),A=Ii(p,o?[k,_,g]:[k,g,_]);null!=s&&(C=_slicedToArray(Lt(C=Yt(s,"bias","fused matMul"),d),1)[0],Qa(T,C.shape)),null!=l&&(S=Yt(l,"prelu weights","fused matMul"));var M=function(e,t){var n,r,i=_slicedToArray(t,4),u=i[0],l=i[1],h=i[2],f=i[3],d=Vu(Ii(e,h.shape),h,c);return a||o?!a&&o?(n=_r(d,l,!1,!1),r=_r(d,u,!0,!1)):a&&!o?(n=_r(l,d,!1,!0),r=_r(u,d,!1,!1)):(n=_r(l,d,!0,!0),r=_r(d,u,!0,!0)):(n=_r(d,l,!1,!0),r=_r(u,d,!0,!1)),null!=s?[n,r,Wu(f,d)]:[n,r]},I={a:E,b:A,bias:C,preluActivationWeights:S},N={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:h};return null==s?Ua((function(e,t,n){var r=Gt.runKernel("_FusedMatMul",I,N);return n([e,t,r]),{value:Ii(r,T),gradFunc:M}}))(E,A):Ua((function(e,t,n,r){var a=Gt.runKernel("_FusedMatMul",I,N);return r([e,t,a,n]),{value:Ii(a,T),gradFunc:M}}))(E,A,C)}}),Yu=$t({hammingWindow_:function(e){return zu(e,.54,.46)}}),Ju=$t({hannWindow_:function(e){return zu(e,.5,.5)}}),$u=$t({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Li(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Di([Li(e,i,t-s),ja([s],a)]);o.push(u),i+=n}return 0===o.length?yu([],[0,t]):Ii(Di(o),[o.length,t])}}),Qu=$t({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ju;null==r&&(r=Pu(t));for(var i=$u(e,t,n),o=Na(i,a(t)),s=[],u=0;u<i.shape[0];u++)s.push(lu(Li(o,[u,0],[1,t]),r));return Di(s)}}),ec=$t({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Yt(e,"image","cropAndResize"),s=Yt(t,"boxes","cropAndResize","float32"),u=Yt(n,"boxInd","cropAndResize","int32"),c=s.shape[0];return Q(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Q(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Q(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Q(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Q(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Q("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)})),Gt.runKernel("CropAndResize",{image:o,boxes:s,boxInd:u},{method:a,extrapolationValue:i,cropSize:r})}}),tc=$t({flipLeftRight_:function(e){var t=Yt(e,"image","flipLeftRight","float32");return Q(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")})),Gt.runKernel("FlipLeftRight",{image:t},{})}}),nc=$t({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Yt(e,"image","rotateWithOffset","float32");return Q(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")})),Gt.runKernel("RotateWithOffset",{image:a},{radians:t,fillValue:n,center:r})}});function rc(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Q(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Q(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Q(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Q(1===t.rank,(function(){return"scores must be a 1D tensor"})),Q(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Q(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var ac=$t({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Yt(e,"boxes","nonMaxSuppression"),o=Yt(t,"scores","nonMaxSuppression"),s=rc(i,o,n,r,a);return Gt.runKernel("NonMaxSuppressionV3",{boxes:i,scores:o},{maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold})}});function ic(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||oc)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function oc(e,t){return e>t?1:e<t?-1:0}function sc(e,t,n,r,a){return lc(e,t,n,r,a,0)}function uc(e,t,n,r,a,i){return lc(e,t,n,r,a,0,!1,i,!0)}function cc(e,t,n,r,a,i){return lc(e,t,n,r,a,i,!0)}function lc(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(dc);for(var h=i>0?-.5/i:0,f=[],d=[];f.length<n&&c.length>0;){var p=c.pop(),m=p.score,v=p.boxIndex,g=p.suppressBeginIndex;if(m<a)break;for(var y=!1,_=f.length-1;_>=g;--_){var b=hc(e,v,f[_]);if(b>=r){y=!0;break}if(p.score=p.score*fc(r,h,b),p.score<=a)break}p.suppressBeginIndex=f.length,y||(p.score===m?(f.push(v),d.push(p.score)):p.score>a&&ic(c,p,dc))}var x=f.length,w=n-x;s&&w>0&&(f.push.apply(f,_toConsumableArray(new Array(w).fill(0))),d.push.apply(d,_toConsumableArray(new Array(w).fill(0))));var k={selectedIndices:f};return o&&(k.selectedScores=d),u&&(k.validOutputs=x),k}function hc(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),g=Math.min(s,h),y=Math.min(u,f),_=Math.max(g-m,0)*Math.max(y-v,0);return _/(d+p-_)}function fc(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function dc(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var pc=$t({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Yt(e,"boxes","nonMaxSuppression"),s=Yt(t,"scores","nonMaxSuppression"),u=rc(o,s,n,r,a,i),c=Gt.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},{maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma});return{selectedIndices:c[0],selectedScores:c[1]}}}),mc=$t({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Yt(e,"boxes","nonMaxSuppression"),s=Yt(t,"scores","nonMaxSuppression"),u=rc(o,s,n,r,a,null),c=Gt.runKernel("NonMaxSuppressionV4",{boxes:o,scores:s},{maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:i});return{selectedIndices:c[0],validOutputs:c[1]}}}),vc=$t({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Yt(e,"images","resizeBilinear");Q(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Q(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Q(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ii(a,[1,a.shape[0],a.shape[1],a.shape[2]]));_toArray2(t);var s=Gt.runKernel("ResizeBilinear",{images:i},{alignCorners:n,halfPixelCenters:r,size:t});return o?Ii(s,[s.shape[1],s.shape[2],s.shape[3]]):s}}),gc=$t({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Yt(e,"images","resizeNearestNeighbor");Q(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Q(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Q("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Q(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ii(a,[1,a.shape[0],a.shape[1],a.shape[2]]));_toArray2(t);var s=Gt.runKernel("ResizeNearestNeighbor",{images:i},{alignCorners:n,halfPixelCenters:r,size:t});return o?Ii(s,[s.shape[1],s.shape[2],s.shape[3]]):s}}),yc=$t({bandPart_:function(e,t,n){Q(t%1==0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Q(n%1==0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Yt(e,"a","bandPart");Q(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=_slicedToArray(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=Ii(Ps(0,o,1,"int32"),[-1,1]),c=Ps(0,s,1,"int32"),l=Xa(u,c),h=es(Oo(l,Wa(+t,"int32")),Eo(l,Wa(-n,"int32"))),f=vs([o,s],r.dtype);return Ii(du(Tu(Ii(r,[-1,o,s])).map((function(e){return po(h,e,f)}))),a)}}),_c=$t({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Q(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Q(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=cu(e,e.shape[0],0).map((function(e){return fu(e,[0])}))),Q(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Gt.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Na(Go(Na(n[a],t)),n[a]);t=Xa(t,i)}return Ia(t,Nu(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?du(n,0):n}});function bc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Gt.tidy((function(){Q(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=ko(n),i=Jn(e),o=yu([[1]],[1,1]),s=Jn(o),u=n>=r?r:n,c=function(e){var t,u=i,c=s,l=a;t=_slicedToArray(Gt.tidy((function(){var t=Li(i,[e,e],[n-e,1]),u=Nu(t),c=Li(i,[e,e],[1,1]),l=po(To(c,0),yu([[-1]]),yu([[1]])),h=Xa(c,Na(l,u)),f=Ia(t,h);s=1===f.shape[0]?Jn(o):Di([o,Li(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var d=Bo(Ia(_r(l,h),u)),p=Li(i,[e,0],[n-e,r]),m=Na(d,s),v=xr(s);if(0===e)i=Xa(p,_r(m,_r(v,p)));else{var g=Xa(p,_r(m,_r(v,p)));i=Di([Li(i,[0,0],[e,r]),g],0)}var y=xr(m),_=Li(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Xa(_,_r(_r(_,s),y));else{var b=Xa(_,_r(_r(_,s),y));a=Di([Li(a,[0,0],[n,e]),b],1)}return[s,i,a]})),3),s=t[0],i=t[1],a=t[2],va([u,c,l])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Li(a,[0,0],[n,r]),i=Li(i,[0,0],[r,r])),[a,i]}))}var xc,wc=$t({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Q(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return bc(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Tu(Ii(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=_slicedToArray(bc(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)})),[Ii(du(a,0),e.shape),Ii(du(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(xc||(xc={}));var kc,Cc,Sc,Tc=$t({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xc.SUM_BY_NONZERO_WEIGHTS,r=Yt(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Yt(t,"weights","computeWeightedLoss"));var i=null==a?r:Na(r,a);if(n===xc.NONE)return i;if(n===xc.SUM)return Go(i);if(n===xc.MEAN){if(null==a)return ss(i);var o=r.size/a.size,s=Ia(Go(i),Go(a));return o>1?Ia(s,Wa(o)):s}if(n===xc.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Ia(Go(i),Wa(r.size));var u=Na(a,gs(r.shape)),c=Yn(Go(ms(u,Wa(0))),"float32");return Ia(Go(i),c)}throw Error("Unknown reduction: ".concat(n))}}),Ec=$t({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xc.SUM_BY_NONZERO_WEIGHTS,a=Yt(e,"labels","absoluteDifference"),i=Yt(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Yt(n,"weights","absoluteDifference")),ee(a.shape,i.shape,"Error in absoluteDifference: ");var s=Ya(Xa(a,i));return Tc(s,o,r)}}),Ac=$t({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xc.SUM_BY_NONZERO_WEIGHTS,i=Yt(e,"labels","cosineDistance"),o=Yt(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Yt(r,"weights","cosineDistance")),ee(i.shape,o.shape,"Error in cosineDistance: ");var u=Wa(1),c=Xa(u,Go(Na(i,o),n,!0));return Tc(c,s,a)}}),Mc=$t({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xc.SUM_BY_NONZERO_WEIGHTS,a=Yt(e,"labels","hingeLoss"),i=Yt(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Yt(n,"weights","hingeLoss")),ee(a.shape,i.shape,"Error in hingeLoss: ");var s=Wa(1);a=Xa(Na(Wa(2),a),s);var u=Us(Xa(s,Na(a,i)));return Tc(u,o,r)}}),Ic=$t({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xc.SUM_BY_NONZERO_WEIGHTS,i=Yt(e,"labels","huberLoss"),o=Yt(t,"predictions","huberLoss"),s=null;null!=n&&(s=Yt(n,"weights","huberLoss")),ee(i.shape,o.shape,"Error in huberLoss: ");var u=Wa(r),c=Ya(Xa(o,i)),l=cs(c,u),h=Xa(c,l),f=Aa(Na(Wa(.5),Da(l)),Na(u,h));return Tc(f,s,a)}}),Nc=$t({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xc.SUM_BY_NONZERO_WEIGHTS,i=Yt(e,"labels","logLoss"),o=Yt(t,"predictions","logLoss"),s=null;null!=n&&(s=Yt(n,"weights","logLoss")),ee(i.shape,o.shape,"Error in logLoss: ");var u=Wa(1),c=Wa(r),l=Bo(Na(i,Po(Aa(o,c)))),h=Na(Xa(u,i),Po(Aa(Xa(u,o),c))),f=Xa(l,h);return Tc(f,s,a)}}),Rc=$t({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xc.SUM_BY_NONZERO_WEIGHTS,a=Yt(e,"labels","meanSquaredError"),i=Yt(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Yt(n,"weights","meanSquaredError")),ee(a.shape,i.shape,"Error in meanSquaredError: ");var s=hu(a,i);return Tc(s,o,r)}}),Dc=$t({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xc.SUM_BY_NONZERO_WEIGHTS,i=Yt(e,"multiClassLabels","sigmoidCrossEntropy"),o=Yt(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Yt(n,"weights","sigmoidCrossEntropy")),ee(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Wa(r),c=Wa(1),l=Wa(.5);i=Aa(Na(i,Xa(c,u)),Na(l,u))}var h=function(e,t){var n=Yt(e,"labels","sigmoidCrossEntropyWithLogits"),r=Yt(t,"logits","sigmoidCrossEntropyWithLogits");ee(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Us(r),i=Na(r,n),o=zo(_o(Bo(Ya(r))));return Aa(Xa(a,i),o)}(i,o);return Tc(h,s,a)}}),Oc=$t({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xc.SUM_BY_NONZERO_WEIGHTS,i=Yt(e,"onehotLabels","softmaxCrossEntropy"),o=Yt(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Yt(n,"weights","softmaxCrossEntropy")),ee(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Wa(r),c=Wa(1),l=Wa(i.shape[1]);i=Aa(Na(i,Xa(c,u)),Ia(u,l))}var h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));return Ua((function(e,t,r){var a=Qo(t,[n],!0),i=Xa(Yn(t,"float32"),a);r([e,i]);var o=Bo(Na(i,e));return{value:Go(o,[n]),gradFunc:function(e,t){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=Xo(e.shape,[n]);return[Na(Ii(e,o),Xa(Yn(a,"float32"),_o(i))),Na(Ii(e,o),Xa(_o(i),Yn(a,"float32")))]}}}))(e,t)}(i,o);return Tc(h,s,a)}}),Lc={fft:ou,ifft:su,rfft:lu,irfft:uu},Fc={hammingWindow:Yu,hannWindow:Ju,frame:$u,stft:Qu},Pc={flipLeftRight:tc,resizeNearestNeighbor:gc,resizeBilinear:vc,rotateWithOffset:nc,cropAndResize:ec,nonMaxSuppression:ac,nonMaxSuppressionAsync:(Sc=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Yt(t,"boxes","nonMaxSuppressionAsync"),s=Yt(n,"scores","nonMaxSuppressionAsync"),u=rc(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=6,Promise.all([o.data(),s.data()]);case 6:return c=e.sent,l=c[0],h=c[1],f=sc(l,h,r,a,i),d=f.selectedIndices,e.abrupt("return",(o!==t&&o.dispose(),s!==n&&s.dispose(),gu(d,"int32")));case 12:case"end":return e.stop()}}),e)}))),function(e,t,n){return Sc.apply(this,arguments)}),nonMaxSuppressionWithScore:pc,nonMaxSuppressionWithScoreAsync:(Cc=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=Yt(t,"boxes","nonMaxSuppressionAsync"),u=Yt(n,"scores","nonMaxSuppressionAsync"),c=rc(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return l=e.sent,h=l[0],f=l[1],d=cc(h,f,r,a,i,o),p=d.selectedIndices,m=d.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:gu(p,"int32"),selectedScores:gu(m)}));case 14:case"end":return e.stop()}}),e)}))),function(e,t,n){return Cc.apply(this,arguments)}),nonMaxSuppressionPadded:mc,nonMaxSuppressionPaddedAsync:(kc=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>3&&void 0!==b[3]?b[3]:.5,i=b.length>4&&void 0!==b[4]?b[4]:Number.NEGATIVE_INFINITY,o=b.length>5&&void 0!==b[5]&&b[5],s=Yt(t,"boxes","nonMaxSuppressionAsync"),u=Yt(n,"scores","nonMaxSuppressionAsync"),c=rc(s,u,r,a,i,null),l=c.maxOutputSize,h=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return d=e.sent,p=_slicedToArray(d,2),m=p[0],v=p[1],g=uc(m,v,l,h,f,o),y=g.selectedIndices,_=g.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:gu(y,"int32"),validOutputs:Wa(_,"int32")}));case 19:case"end":return e.stop()}}),e)}))),function(e,t,n){return kc.apply(this,arguments)})},zc={bandPart:yc,gramSchmidt:_c,qr:wc},Bc={absoluteDifference:Ec,computeWeightedLoss:Tc,cosineDistance:Ac,hingeLoss:Mc,huberLoss:Ic,logLoss:Nc,meanSquaredError:Rc,sigmoidCrossEntropy:Dc,softmaxCrossEntropy:Oc},Uc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"sgd",value:function(e){return new ni(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new ri(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new ai(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Za(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Ha(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new ti(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new qa(e,t)}}]),e}(),Vc={sgd:Uc.sgd,momentum:Uc.momentum,adadelta:Uc.adadelta,adagrad:Uc.adagrad,rmsprop:Uc.rmsprop,adamax:Uc.adamax,adam:Uc.adam},Wc="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function Gc(){return new Promise((function(e){return Wc((function(){return e()}))}))}function Hc(e,t){var n=e[0].length;e.forEach((function(e,t){Q(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Q(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Q(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function jc(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var qc=30;function Kc(e){return e<=qc?e:Ae(e,Math.floor(Math.sqrt(e)))}function Xc(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Zc(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Yc(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Jc(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];a.push(r?e[0]/n:e[0]*n);for(var i=1;i<e.length;++i)a.push(i<=t.length?r?t[i-1]*e[i]:e[i]/t[i-1]:e[i]);return a}function $c(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Qc(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var el=1.7580993408473768,tl=1.0507009873554805,nl=.3275911,rl=.254829592,al=-.284496736,il=1.421413741,ol=-1.453152027,sl=1.061405429;function ul(){var e;Be().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}function cl(){var e;Be().getBool("IS_TEST")||(e=console).log.apply(e,arguments)}function ll(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function hl(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function fl(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function dl(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function pl(e,t){return{real:e[2*t],imag:e[2*t+1]}}function ml(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function vl(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function gl(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)Q(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{Q(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-i}Q(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function _l(e,t){var n,r=!1;for(e<=qc?(n=e,r=!0):n=Ae(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ae(e,n+1);return n}function bl(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)r.push(i!==t?e[i]:n);return r}function xl(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,h=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var d=r;d<n;d++)u.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),h*=e.shape[m];return{batchSize:c,sliceSize:h,outerSize:l,dimSize:s,outputShape:u}}function wl(e){try{return e.map((function(e){return mt(e)}))}catch(CD){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(CD))}}function kl(e){return e.map((function(e){return pt(e)}))}var Cl={kernelName:"Abs",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,pu(Yn(n,"float32"),-1))}}}},Sl={kernelName:"Acos",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){var t=Da(Yn(n,"float32")),r=Ra(Xa(Wa(1),t));return Bo(Ia(e,r))}}}},Tl={kernelName:"Acosh",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){var t=Ra(Xa(Da(Yn(n,"float32")),1));return Ia(e,t)}}}},El={kernelName:"Add",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=e,n=$a(r.shape,i);return n.length>0&&(t=Go(t,n)),Ii(t,r.shape)},b:function(){var t=e,n=$a(a.shape,i);return n.length>0&&(t=Go(t,n)),Ii(t,a.shape)}}}},Al={kernelName:"ArgMax",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Oa(n)}}}},Ml={kernelName:"ArgMin",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Oa(n)}}}},Il={kernelName:"Asin",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Ra(Xa(Wa(1),Da(Yn(n,"float32")))))}}}},Nl={kernelName:"Asinh",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){var t=Ra(Aa(Wa(1),Da(Yn(n,"float32"))));return Ia(e,t)}}}},Rl={kernelName:"Atan2",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=Aa(Da(r),Da(a)),n=Na(e,Ia(a,t)),o=$a(r.shape,i);return o.length>0&&(n=Go(n,o)),Ii(n,r.shape)},b:function(){var t=Aa(Da(r),Da(a)),n=Bo(Na(e,Ia(r,t))),o=$a(a.shape,i);return o.length>0&&(n=Go(n,o)),Ii(n,a.shape)}}}},Dl={kernelName:"Atan",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Aa(Da(Yn(n,"float32")),1))}}}},Ol={kernelName:"Atanh",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Xa(Wa(1),Da(Yn(n,"float32"))))}}}},Ll=$t({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Yt(e,"dy","avgPool3dGrad"),s=Yt(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Ii(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Q(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),Q(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),null!=i&&Q(oe(a),(function(){return"Error in avgPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var h=Gt.runKernel("AvgPool3DGrad",{dy:u,input:c},{filterSize:n,strides:r,pad:a,dimRoundingMode:i});return l?Ii(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Fl={kernelName:"AvgPool3D",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return Ll(e,r,a,i,o,s)}}}},Pl=$t({avgPoolGrad_:function(e,t,n,r,a){var i=Yt(e,"dy","avgPoolGrad"),o=Yt(t,"input","avgPoolGrad");Q(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=Ii(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Ii(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Q(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Q(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l=Gt.runKernel("AvgPoolGrad",{dy:u,input:s},{filterSize:n,strides:r,pad:a});return c?Ii(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),zl={kernelName:"AvgPool",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return Pl(e,r,a,i,o)}}}},Bl={kernelName:"BatchMatMul",inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return _r(e,i,!1,!1)},b:function(){return _r(e,a,!0,!1)}}:o&&!s?{a:function(){return _r(i,e,!1,!0)},b:function(){return _r(a,e,!1,!1)}}:{a:function(){return _r(i,e,!0,!0)},b:function(){return _r(e,a,!0,!0)}}:{a:function(){return _r(e,i,!1,!0)},b:function(){return _r(a,e,!0,!1)}}}},Ul={kernelName:"BatchToSpaceND",gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Ss(e,r,a)}}}},Vl={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n.inputShape,a=n.shape,i=Array.from(a),o=r.length-1;o>=0;o--)if(r[o]===a[o])i[o]=1;else if(1!==r[o])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(a,"]."));for(var s=[],u=0;u<i.length;u++)i[u]>1&&s.push(u);return{x:function(){return Go(e,s,!0)}}}},Wl={kernelName:"Ceil",gradFunc:function(e){return{x:function(){return Oa(e)}}}},Gl={kernelName:"ClipByValue",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return po(es(Eo(r,a),Oo(r,i)),e,Oa(e))}}}},Hl={kernelName:"ComplexAbs",inputsToSave:["x"],gradFunc:Cl.gradFunc},jl={kernelName:"Concat",saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=de(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return cu(e,i,a).map((function(e){return function(){return e}}))}},ql={kernelName:"Conv2D",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return Q(Ei(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Qi(a.shape,e,i,s,u,c)},filter:function(){return Uu(a,e,i.shape,s,u,c)}}}},Kl={kernelName:"Conv2DBackpropInput",inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return Ji(e,i,o,s,u,1,c)},filter:function(){return Uu(e,a,i.shape,o,s,u,c)}}}},Xl=$t({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Ii(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;return 4===o.rank&&(o=Ii(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Q(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),Q(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),Q(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Q(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Q(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")})),Gt.runKernel("Conv3DBackpropFilterV2",{x:i,dy:o},{strides:r,pad:a,filterShape:n})}}),Zl={kernelName:"Conv3D",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Q(Ei(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=_slicedToArray(t,2),s=o[0],u=o[1];return{x:function(){return no(s.shape,e,u,a,i)},filter:function(){return Xl(s,e,u.shape,a,i)}}}},Yl={kernelName:He,inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(Bo(Qs(Yn(n,"float32"))),e)}}}},Jl={kernelName:"Cosh",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(eu(Yn(n,"float32")),e)}}}},$l={kernelName:"Cumsum",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Yo([a],r.rank),n=oo(e,a,i,!o);return null!=t&&(n=xr(n,t)),n}}}},Ql={kernelName:"DepthwiseConv2dNative",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;Q(Ei(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=_slicedToArray(t,2),c=u[0],l=u[1];return Q(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),Q(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),Q(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),Q(Ai(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),null!=o&&Q(oe(i),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(i,".")})),{x:function(){return Ku(c.shape,e,l,a,i,r,o)},filter:function(){return qu(c,e,l.shape,a,i,r,o)}}}},eh={kernelName:"Dilation2D",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return Gt.runKernel("Dilation2DBackpropInput",o,n)},filter:function(){return Gt.runKernel("Dilation2DBackpropFilter",s,n)}}}},th={kernelName:"Elu",outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:_slicedToArray(t,1)[0]};return{x:function(){return Gt.runKernel("EluGrad",n)}}}},nh={kernelName:je,inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0],r=Na(_o(Bo(Da(n))),2/Math.sqrt(Math.PI));return{x:function(){return Na(e,r)}}}},rh={kernelName:qe,outputsToSave:[!0],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,n)}}}},ah={kernelName:"ExpandDims",inputsToSave:["input"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{input:function(){return Ii(e,n.shape)}}}},ih={kernelName:"Expm1",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,_o(n))}}}},oh={kernelName:"Floor",gradFunc:function(e){return{x:function(){return Oa(e)}}}},sh={kernelName:"FloorDiv",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=Ia(e,Yn(a,"float32")),n=$a(r.shape,i);return n.length>0?Ii(Go(t,n),r.shape):t},b:function(){var t=Na(e,Yn(r,"float32")),n=$a(a.shape,i);n.length>0&&(t=Ii(Go(t,n),a.shape));var o=Da(a);return Bo(Ia(t,Yn(o,"float32")))}}}},uh={kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=_slicedToArray(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?Wa(1):u,l=$a(o.shape,i.shape),h=[];if(1===o.rank){for(var f=0;f<i.shape.length-1;++f)h.push(i.shape[f]);h.push(1)}var d=Xa(i,o),p=Na(e,c),m=Xs(Aa(s,Wa(r))),v=Na(Na(Na(m,m),m),Wa(-.5));return{x:function(){return Ii(Na(Na(e,1===o.rank?wo(Ii(m,[1,1,1,o.shape[0]]),h):m),c),i.shape)},mean:function(){var e=Na(Na(m,Wa(-1)),p);return 1===o.rank&&(e=Go(e,l)),Ii(e,o.shape)},variance:function(){var e=Na(Na(v,d),p);return 1===o.rank&&(e=Go(e,l)),Ii(e,o.shape)},scale:function(){var t=Na(d,m),n=Na(e,t);return 1===o.rank&&(n=Go(n,l)),Ii(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Go(t,l)),Ii(t,o.shape)}}}},ch={kernelName:"GatherV2",inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.axis,s=de(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,h=lh(0,u),f=lh(u+1,u+1+l),d=hh([r,[n],c]),p=Ii(e,d),m=Ii(i,[n]),v=hh([[u],h,f]),g=xr(p,v),y=Su(g,m,a.shape[s]),_=Jo(v);return y=xr(y,_)},indices:function(){return i}}}};function lh(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function hh(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var fh={kernelName:"GreaterEqual",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return Oa(r)},b:function(){return Oa(a)}}}},dh={kernelName:"Identity",gradFunc:function(e){return{x:function(){return Yn(e,"float32")}}}},ph={kernelName:"IsFinite",gradFunc:function(e){return{x:function(){return Oa(e)}}}},mh={kernelName:"IsInf",gradFunc:function(e){return{x:function(){return Oa(e)}}}},vh={kernelName:"IsNan",gradFunc:function(e){return{x:function(){return Oa(e)}}}},gh={kernelName:"LeakyRelu",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.alpha,i=To(r,0);return{x:function(){return po(i,e,Na(e,a))}}}},yh={kernelName:"Log1p",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Aa(n,1))}}}},_h={kernelName:Ke,inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Yn(n,"float32"))}}}},bh={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.axis;return{logits:function(){var t=_o(r);return Xa(e,Na(Go(e,a,!0),t))}}}},xh=$t({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5;return Gt.runKernel("LRNGrad",{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:i,beta:o})}}),wh={kernelName:"LRN",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return xh(a,i,e,o,s,u,c)}}}};function kh(e,t,n,r){return t.rank<n.rank&&(t=Ii(t,Xo(t.shape,r))),e.rank<n.rank&&(e=Ii(e,Xo(e.shape,r))),{x:function(){return Na(e,Yn(fo(n,t),e.dtype))}}}for(var Ch,Sh={kernelName:"Max",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=kh(e,t[1],a,de(r,a.shape));return{x:function(){return i.x()}}}},Th={kernelName:"Maximum",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return Na(e,Yn(Eo(r,a),"float32"))},b:function(){return Na(e,Yn(Do(r,a),"float32"))}}}},Eh=$t({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Yt(e,"dy","maxPool3dGrad"),u=Yt(t,"input","maxPool3dGrad"),c=Yt(n,"output","maxPool3dGrad"),l=s,h=u,f=c,d=!1;4===u.rank&&(d=!0,l=Ii(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=Ii(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=Ii(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Q(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),Q(5===h.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")})),Q(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(f.rank,".")})),null!=o&&Q(oe(i),(function(){return"Error in maxPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(o," but got pad ").concat(i,".")}));var p=Gt.runKernel("MaxPool3DGrad",{dy:l,input:h,output:f},{filterSize:r,strides:a,pad:i,dimRoundingMode:o});return d?Ii(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Ah={kernelName:"MaxPool3D",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return Eh(e,a,i,o,s,u,c)}}}},Mh=$t({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Yt(e,"dy","maxPoolGrad"),u=Yt(t,"input","maxPoolGrad"),c=Yt(n,"output","maxPoolGrad");return Q(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),Q(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),Q(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),null!=o&&Q(oe(i),(function(){return"Error in maxPoolGrad: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(i,".")})),Gt.runKernel("MaxPoolGrad",{dy:s,input:u,output:c},{filterSize:r,strides:a,pad:i,dimRoundingMode:o})}}),Ih={kernelName:"PadV2",inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Li(e,a,r.shape)}}}},Nh={kernelName:"SpaceToBatchND",gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return zi(e,r,a)}}}},Rh={kernelName:"SplitV",gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Di(e,r)}}}},Dh=0,Oh=[Cl,Sl,Tl,El,{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Al,Ml,Il,Nl,Rl,Dl,Ol,Fl,zl,Bl,Ul,Vl,{kernelName:"Cast",gradFunc:function(e){return{x:function(){return e.clone()}}}},Wl,Gl,Hl,jl,Kl,ql,Zl,Yl,Jl,$l,Ql,eh,{kernelName:"RealDiv",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=Ia(e,Yn(a,"float32")),n=$a(r.shape,i);return n.length>0?Ii(Go(t,n),r.shape):t},b:function(){var t=Na(e,Yn(r,"float32")),n=$a(a.shape,i);n.length>0&&(t=Ii(Go(t,n),a.shape));var o=Da(a);return Bo(Ia(t,Yn(o,"float32")))}}}},th,nh,rh,ah,ih,sh,oh,uh,ch,fh,dh,ph,mh,vh,gh,yh,_h,bh,wh,Sh,Sh,Th,Ah,{kernelName:"MaxPool",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return Mh(e,a,i,o,s,u)}}}},{kernelName:"Mean",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=de(n.axis,r.shape),i=re(Ko(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Ii(e,t);return Ia(Na(n,gs(r.shape,"float32")),i)}}}},{kernelName:"Min",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=_slicedToArray(t,2),i=a[0],o=kh(e,a[1],i,de(r,i.shape));return{x:function(){return o.x()}}}},{kernelName:"Minimum",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return Na(e,Yn(Oo(r,a),"float32"))},b:function(){return Na(e,Yn(To(r,a),"float32"))}}}},{kernelName:"MirrorPad",inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Li(e,a,r.shape)}}}},{kernelName:Xe,inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=$a(r.shape,i);return t.length>0?Ii(Go(e,t),r.shape):e},b:function(){var t=Na(e,Bo(Co(Ia(r,a)))),n=$a(a.shape,i);return n.length>0?Ii(Go(t,n),a.shape):t}}}},{kernelName:"Multiply",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=Na(e,Yn(a,"float32")),n=$a(r.shape,i);return n.length>0?Ii(Go(t,n),r.shape):t},b:function(){var t=Na(e,Yn(r,"float32")),n=$a(a.shape,i);return n.length>0?Ii(Go(t,n),a.shape):t}}}},{kernelName:"Neg",gradFunc:function(e){return{x:function(){return Bo(e)}}}},{kernelName:"OneHot",inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return vs(n.shape,"float32")}}}},{kernelName:"OnesLike",gradFunc:function(e){return{x:function(){return Oa(e)}}}},{kernelName:"Pack",saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Tu(e,r).map((function(e){return function(){return e}}))}},Ih,Ih,{kernelName:Ze,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=_slicedToArray(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=Qa(o.shape,s.shape);return{a:function(){var t=Yn(s,"float32"),n=Na(e,Na(t,Ka(o,Xa(t,Wa(1))))),r=$a(o.shape,u);return r.length>0&&(n=Go(n,r)),Ii(n,o.shape)},b:function(){var t=To(o,0),n=po(t,Po(o),Oa(o)),r=Na(e,Na(i,n)),a=$a(s.shape,u);return a.length>0&&(r=Go(r,a)),Ii(r,s.shape)}}}},{kernelName:"Prelu",inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=To(r,0);return{x:function(){return po(i,e,Na(e,a))},alpha:function(){var t=po(i,Oa(e),Na(e,r)),n=$a(a.shape,e.shape);return n.length>0&&(t=Go(t,n)),Ii(t,a.shape)}}}},{kernelName:"Reciprocal",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Bo(Da(n)))}}}},{kernelName:"Relu6",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0],r=Na(Oo(n,6),pu(n));return{x:function(){return Na(e,Yn(r,"float32"))}}}},{kernelName:"Relu",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,Yn(pu(n),"float32"))}}}},{kernelName:"Reshape",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ii(e,n.shape)}}}},{kernelName:"ResizeBilinear",inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:_slicedToArray(t,1)[0]};return{images:function(){return Gt.runKernel("ResizeBilinearGrad",r,n)}}}},{kernelName:"ResizeNearestNeighbor",inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:_slicedToArray(t,1)[0]};return{images:function(){return Gt.runKernel("ResizeNearestNeighborGrad",r,n)}}}},{kernelName:"Reverse",gradFunc:function(e,t,n){var r=de(n.dims,e.shape);return{x:function(){return Ws(e,r)}}}},{kernelName:"Round",gradFunc:function(e){return{x:function(){return Oa(e)}}}},{kernelName:"Rsqrt",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Bo(Ia(e,Na(Ka(n,1.5),2)))}}}},{kernelName:"Select",inputsToSave:["condition"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{condition:function(){return Yn(Oa(n),"float32")},t:function(){return Na(e,Yn(n,e.dtype))},e:function(){return Na(e,Yn(ts(n),e.dtype))}}}},{kernelName:"Selu",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){var t=To(n,Wa(0)),r=Wa(el),a=Wa(tl),i=Na(e,a),o=Na(Na(e,r),_o(Yn(n,"float32")));return po(t,i,o)}}}},{kernelName:"Sigmoid",outputsToSave:[!0],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,Na(n,Xa(Wa(1),n)))}}}},{kernelName:"Sign",gradFunc:function(e){return{x:function(){return Oa(e)}}}},{kernelName:Ye,inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(ao(Yn(n,"float32")),e)}}}},{kernelName:"Sinh",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(io(Yn(n,"float32")),e)}}}},{kernelName:"Slice",inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=_slicedToArray(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=_slicedToArray(jr(r,a,i),2),u=s[0],c=s[1],l=[],h=0;h<e.rank;h++)l.push([u[h],o[h]-u[h]-c[h]]);return{x:function(){return bs(e,l)}}}},{kernelName:"Softmax",outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.dim,i=Na(e,r);return{logits:function(){return Xa(i,Na(Go(i,[a],!0),r))}}}},{kernelName:"Softplus",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,Oi(n))}}}},Nh,Nh,Rh,Rh,{kernelName:"Sqrt",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Na(Ra(Yn(n,"float32")),2))}}}},{kernelName:"SquaredDifference",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Wa(2);return{a:function(){return Na(e,Na(i,Xa(r,a)))},b:function(){return Na(e,Na(i,Xa(a,r)))}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(e,Na(Yn(n,"float32"),2))}}}},{kernelName:"Step",gradFunc:function(e){return{x:function(){return Oa(e)}}}},{kernelName:Je,inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Qa(r.shape,a.shape);return{a:function(){var t=e,n=$a(r.shape,i);return n.length>0&&(t=Go(t,n)),Ii(t,r.shape)},b:function(){var t=e,n=$a(a.shape,i);return n.length>0&&(t=Go(t,n)),Ii(Bo(t),a.shape)}}}},{kernelName:"Sum",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=r.shape.slice();de(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Ii(e,a),o=Na(i,gs(r.shape,"float32"));return{x:function(){return o}}}},{kernelName:$e,inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Ia(e,Da(ao(n)))}}}},{kernelName:"Tanh",outputsToSave:[!0],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Na(Xa(Wa(1),Da(n)),e)}}}},{kernelName:"Tile",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.reps;return{x:function(){var t=Oa(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Aa(t,Li(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Aa(t,Li(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=Aa(t,Li(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var h=0;h<a[1];++h)for(var f=0;f<a[2];++f)for(var d=0;d<a[3];++d)t=Aa(t,Li(e,[l*r.shape[0],h*r.shape[1],f*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:function(e,t,n){var r=Jo(n.perm);return{x:function(){return xr(e,r)}}}},{kernelName:"Unpack",gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return du(e,r)}}}},{kernelName:"UnsortedSegmentSum",inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return function(e,t){for(var n=ei(t,Oa(t)),r=So(e,n),a=Eo(t,Wa(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=bo(a,o+1);a=es(a,gs(r.shape,"bool"));var s=Oa(r);return po(a,r,s)}(e,n)}}}},{kernelName:"ZerosLike",gradFunc:function(e){return{x:function(){return Oa(e)}}}}];Dh<Oh.length;Dh++){it(Oh[Dh])}function Lh(){return null==Ch&&(Ch=Ta().epsilon()),Ch}St().prototype.abs=function(){return this.throwIfDisposed(),Ya(this)},St().prototype.acos=function(){return this.throwIfDisposed(),ii(this)},St().prototype.acosh=function(){return this.throwIfDisposed(),oi(this)},St().prototype.add=function(e){return this.throwIfDisposed(),Aa(this,e)},St().prototype.all=function(e,t){return this.throwIfDisposed(),ui(this,e,t)},St().prototype.any=function(e,t){return this.throwIfDisposed(),ci(this,e,t)},St().prototype.argMax=function(e){return this.throwIfDisposed(),li(this,e)},St().prototype.argMin=function(e){return this.throwIfDisposed(),hi(this,e)},St().prototype.asScalar=function(){return this.throwIfDisposed(),Q(1===this.size,(function(){return"The array must have only 1 element."})),Ii(this,[])},St().prototype.asType=function(e){return this.throwIfDisposed(),Yn(this,e)},St().prototype.as1D=function(){return this.throwIfDisposed(),Ii(this,[this.size])},St().prototype.as2D=function(e,t){return this.throwIfDisposed(),Ii(this,[e,t])},St().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Ii(this,[e,t,n])},St().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Ii(this,[e,t,n,r])},St().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Ii(this,[e,t,n,r,a])},St().prototype.asin=function(){return this.throwIfDisposed(),fi(this)},St().prototype.asinh=function(){return this.throwIfDisposed(),di(this)},St().prototype.atan=function(){return this.throwIfDisposed(),pi(this)},St().prototype.atan2=function(e){return this.throwIfDisposed(),mi(this,e)},St().prototype.atanh=function(){return this.throwIfDisposed(),vi(this)},St().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ni(this,e,t,n,r)},St().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),zi(this,e,t)},St().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Bi(this,e,t,n,r,a)},St().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Hi(this,e)},St().prototype.cast=function(e){return this.throwIfDisposed(),Yn(this,e)},St().prototype.ceil=function(){return this.throwIfDisposed(),ji(this)},St().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),qi(this,e,t)},St().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ct&&(e=[e]),Di([this].concat(_toConsumableArray(e)),t)},St().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),$i(this,e,t,n,r,a,i)},St().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),eo(this,e,t,n,r,a)},St().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ji(this,e,t,n,r,a,i)},St().prototype.cos=function(){return this.throwIfDisposed(),ao(this)},St().prototype.cosh=function(){return this.throwIfDisposed(),io(this)},St().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),oo(this,e,t,n)},St().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),uo(this,e,t)},St().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),co(this,e,t,n,r,a,i)},St().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),ho(this,e,t,n,r,a)},St().prototype.divNoNan=function(e){return this.throwIfDisposed(),mo(this,e)},St().prototype.div=function(e){return this.throwIfDisposed(),Ia(this,e)},St().prototype.dot=function(e){return this.throwIfDisposed(),vo(this,e)},St().prototype.elu=function(){return this.throwIfDisposed(),go(this)},St().prototype.equal=function(e){return this.throwIfDisposed(),fo(this,e)},St().prototype.erf=function(){return this.throwIfDisposed(),yo(this)},St().prototype.exp=function(){return this.throwIfDisposed(),_o(this)},St().prototype.expandDims=function(e){return this.throwIfDisposed(),bo(this,e)},St().prototype.expm1=function(){return this.throwIfDisposed(),xo(this)},St().prototype.fft=function(){return this.throwIfDisposed(),ou(this)},St().prototype.flatten=function(){return this.throwIfDisposed(),Ii(this,[this.size])},St().prototype.floor=function(){return this.throwIfDisposed(),Co(this)},St().prototype.floorDiv=function(e){return this.throwIfDisposed(),Ma(this,e)},St().prototype.gather=function(e,t){return this.throwIfDisposed(),So(this,e,t)},St().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Eo(this,e)},St().prototype.greater=function(e){return this.throwIfDisposed(),To(this,e)},St().prototype.ifft=function(){return this.throwIfDisposed(),su(this)},St().prototype.irfft=function(){return this.throwIfDisposed(),uu(this)},St().prototype.isFinite=function(){return this.throwIfDisposed(),Mo(this)},St().prototype.isInf=function(){return this.throwIfDisposed(),Io(this)},St().prototype.isNaN=function(){return this.throwIfDisposed(),No(this)},St().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Ro(this,e)},St().prototype.lessEqual=function(e){return this.throwIfDisposed(),Oo(this,e)},St().prototype.less=function(e){return this.throwIfDisposed(),Do(this,e)},St().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Fo(this,e,t,n,r)},St().prototype.logSigmoid=function(){return this.throwIfDisposed(),Vo(this)},St().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Ho(this,e)},St().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Qo(this,e,t)},St().prototype.log=function(){return this.throwIfDisposed(),Po(this)},St().prototype.log1p=function(){return this.throwIfDisposed(),zo(this)},St().prototype.logicalAnd=function(e){return this.throwIfDisposed(),es(this,e)},St().prototype.logicalNot=function(){return this.throwIfDisposed(),ts(this)},St().prototype.logicalOr=function(e){return this.throwIfDisposed(),ns(this,e)},St().prototype.logicalXor=function(e){return this.throwIfDisposed(),rs(this,e)},St().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),_r(this,e,t,n)},St().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),as(this,e,t,n,r)},St().prototype.max=function(e,t){return this.throwIfDisposed(),Wo(this,e,t)},St().prototype.maximum=function(e){return this.throwIfDisposed(),ei(this,e)},St().prototype.mean=function(e,t){return this.throwIfDisposed(),ss(this,e,t)},St().prototype.min=function(e,t){return this.throwIfDisposed(),us(this,e,t)},St().prototype.minimum=function(e){return this.throwIfDisposed(),cs(this,e)},St().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),ls(this,e,t)},St().prototype.mod=function(e){return this.throwIfDisposed(),hs(this,e)},St().prototype.mul=function(e){return this.throwIfDisposed(),Na(this,e)},St().prototype.neg=function(){return this.throwIfDisposed(),Bo(this)},St().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Nu(this,e,t,n)},St().prototype.notEqual=function(e){return this.throwIfDisposed(),ms(this,e)},St().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),br(this,e,t,n)},St().prototype.onesLike=function(){return this.throwIfDisposed(),ys(this)},St().prototype.pad=function(e,t){return this.throwIfDisposed(),bs(this,e,t)},St().prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Ts(this,e,t,n,r,a)},St().prototype.pow=function(e){return this.throwIfDisposed(),Ka(this,e)},St().prototype.prelu=function(e){return this.throwIfDisposed(),Es(this,e)},St().prototype.prod=function(e,t){return this.throwIfDisposed(),As(this,e,t)},St().prototype.reciprocal=function(){return this.throwIfDisposed(),Bs(this)},St().prototype.relu=function(){return this.throwIfDisposed(),Us(this)},St().prototype.relu6=function(){return this.throwIfDisposed(),Vs(this)},St().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Ii(this,e.shape)},St().prototype.reshape=function(e){return this.throwIfDisposed(),Ii(this,e)},St().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),vc(this,e,t,n)},St().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),gc(this,e,t,n)},St().prototype.reverse=function(e){return this.throwIfDisposed(),Ws(this,e)},St().prototype.rfft=function(){return this.throwIfDisposed(),lu(this)},St().prototype.round=function(){return this.throwIfDisposed(),Ks(this)},St().prototype.rsqrt=function(){return this.throwIfDisposed(),Xs(this)},St().prototype.selu=function(){return this.throwIfDisposed(),Zs(this)},St().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ys(this,e,t,n,r,a,i)},St().prototype.sigmoid=function(){return this.throwIfDisposed(),Oi(this)},St().prototype.sign=function(){return this.throwIfDisposed(),$s(this)},St().prototype.sin=function(){return this.throwIfDisposed(),Qs(this)},St().prototype.sinh=function(){return this.throwIfDisposed(),eu(this)},St().prototype.slice=function(e,t){return this.throwIfDisposed(),Li(this,e,t)},St().prototype.softmax=function(e){return this.throwIfDisposed(),iu(this,e)},St().prototype.softplus=function(){return this.throwIfDisposed(),Uo(this)},St().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ss(this,e,t)},St().prototype.split=function(e,t){return this.throwIfDisposed(),cu(this,e,t)},St().prototype.sqrt=function(){return this.throwIfDisposed(),Ra(this)},St().prototype.square=function(){return this.throwIfDisposed(),Da(this)},St().prototype.squaredDifference=function(e){return this.throwIfDisposed(),hu(this,e)},St().prototype.squeeze=function(e){return this.throwIfDisposed(),fu(this,e)},St().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Ct?[this,e]:[this].concat(_toConsumableArray(e));return du(n,t)},St().prototype.step=function(e){return this.throwIfDisposed(),pu(this,e)},St().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),mu(this,e,t,n,r,a,i,o,s)},St().prototype.sub=function(e){return this.throwIfDisposed(),Xa(this,e)},St().prototype.sum=function(e,t){return this.throwIfDisposed(),Go(this,e,t)},St().prototype.tan=function(){return this.throwIfDisposed(),vu(this)},St().prototype.tanh=function(){return this.throwIfDisposed(),Fi(this)},St().prototype.tile=function(e){return this.throwIfDisposed(),wo(this,e)},St().prototype.toBool=function(){return this.throwIfDisposed(),Yn(this,"bool")},St().prototype.toFloat=function(){return this.throwIfDisposed(),Yn(this,"float32")},St().prototype.toInt=function(){return this.throwIfDisposed(),Yn(this,"int32")},St().prototype.topk=function(e,t){return this.throwIfDisposed(),wu(this,e,t)},St().prototype.transpose=function(e){return this.throwIfDisposed(),xr(this,e)},St().prototype.unique=function(e){return this.throwIfDisposed(),Cu(this,e)},St().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Su(this,e,t)},St().prototype.unstack=function(e){return this.throwIfDisposed(),Tu(this,e)},St().prototype.where=function(e,t){return this.throwIfDisposed(),po(e,this,t)},St().prototype.zerosLike=function(){return this.throwIfDisposed(),Oa(this)};var Fh=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return _createClass(n)}(),Ph=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return _createClass(n)}(),zh=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return _createClass(n)}(),Bh=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return _createClass(n)}(),Uh=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return _createClass(n)}();function Vh(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Wh(e,t){if(!e)throw new Uh(t)}function Gh(e,t){var n,r=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(CD){a.e(CD)}finally{a.f()}return r}function Hh(e){return 1===e.length?e[0]:e}function jh(e){return Array.isArray(e)?e:[e]}function qh(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Kh(e){return e.length<=1?e:-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}Error;var Xh={};function Zh(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Yh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in Xh)i=Xh[o];else if(null==(i=t[o]))throw new zh("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s,u,c,l=e;if(null==l.className||null==l.config)throw new zh("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(l),".\n")+"'className' and 'config' must set.");var h,f,d=l.className;if(d in n?(h=(s=_slicedToArray(n[d],2))[0],f=s[1]):d in Xh?(h=(u=_slicedToArray(Xh.className,2))[0],f=u[1]):d in t&&(h=(c=_slicedToArray(t[d],2))[0],f=c[1]),null==h)throw new zh("Unknown ".concat(r,": ").concat(d,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=f){for(var p={},m=0,v=Object.keys(Xh);m<v.length;m++){var g=v[m];p[g]=Xh[g]}for(var y=0,_=Object.keys(n);y<_.length;y++){var b=_[y];p[b]=n[b]}l.config.customObjects=p;for(var x=Object.assign({},Xh),w=0,k=Object.keys(n);w<k.length;w++){var C=k[w];Xh[C]=n[C]}!function e(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach((function(t){return e(t)}));else for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n],i=t[a];null!=i&&"object"==typeof i&&(Array.isArray(i)||"ndarray"!==i.type||"number"!=typeof i.value?e(i):t[a]=i.value)}}(l.config);var S=f(h,l.config,n,a);return Xh=Object.assign({},x),S}for(var T=Object.assign({},Xh),E=0,A=Object.keys(n);E<A.length;E++){var M=A[E];Xh[M]=n[M]}var I=new h(l.config);return Xh=Object.assign({},T),I}function Jh(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function $h(e){if(null==e)return e;var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(CD){r.e(CD)}finally{r.f()}return n}function Qh(e){if(null==e)throw new zh("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ef(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new zh("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function tf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Wh(n>=0),Wh(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function nf(e,t){Array.isArray(e)?(r.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return nf(e,"element ".concat(n+1," of ").concat(t))}))):r.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(function e(t){return null===t?"null":Array.isArray(t)?"["+t.map((function(t){return e(t)})).join(",")+"]":"string"==typeof t?'"'.concat(t,'"'):"".concat(t)}(e),".")}))}function rf(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function af(e,t){return ma((function(){return Ra(Go(Na(e,e),t,!0))}))}var of=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getConfig",value:function(){return{}}}]),n}(f.Serializable),sf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return ma((function(){var n=af(e,t.axis),r=qi(n,0,t.maxValue);return Na(e,Ia(r,Aa(Lh(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(of);sf.className="MaxNorm",f.registerClass(sf);var uf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return ma((function(){return Ia(e,Aa(Lh(),af(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(of);uf.className="UnitNorm",f.registerClass(uf);var cf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Us(e)}}]),n}(of);cf.className="NonNeg",f.registerClass(cf);var lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return ma((function(){var n=af(e,t.axis),r=Aa(Na(t.rate,qi(n,t.minValue,t.maxValue)),Na(1-t.rate,n));return Na(e,Ia(r,Aa(Lh(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(of);lf.className="MinMaxNorm",f.registerClass(lf);var hf={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ff(e){return Zh(e)}function df(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yh(e,f.SerializationMap.getMap().classNameMap,t,"constraint")}function pf(e){return null==e?null:"string"==typeof e?df({className:e in hf?hf[e]:e,config:{}}):e instanceof of?e:df(e)}function mf(e){return new sf(e)}function vf(e){return new uf(e)}function gf(){return new cf}function yf(e){return new lf(e)}var _f=["channelsFirst","channelsLast"],bf=["nearest","bilinear"],xf=["valid","same","causal"],wf=["max","avg"],kf=["sum","mul","concat","ave"],Cf=new Map;function Sf(e){ef(_f,"DataFormat",e)}function Tf(e){ef(xf,"PaddingMode",e)}function Ef(e){ef(wf,"PoolMode",e)}var Af=[];function Mf(e,t){Af.push(e);try{var n=t();return Af.pop(),n}catch(r){throw Af.pop(),r}}function If(e){if(!Df(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Af.length?"":Af.join("/")+"/")+e}function Nf(e){if(!Df(e))throw new Error("Not a valid tensor name: '"+e+"'");Cf.has(e)||Cf.set(e,0);var t=Cf.get(e);if(Cf.set(e,Cf.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Cf.set(n,1),n}return e}var Rf=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Df(e){return!!e.match(Rf)}function Of(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function Lf(e){return gu(e=Array.isArray(e)?new Float32Array(e):e)}function Ff(e){return us(Lf(e)).dataSync()[0]}function Pf(e){return Wo(Lf(e)).dataSync()[0]}function zf(e,t){if(t<e)throw new zh("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function Bf(e,t){return e.asType(t)}function Uf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function Vf(e,t,n){return ma((function(){switch(e.rank){case 1:return tu(e,t,n);case 2:return nu(e,[t,0],[n,e.shape[1]]);case 3:return ru(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return au(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Li(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Li(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new zh("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Wf(e,t,n){return ma((function(){switch(e.rank){case 1:return tu(e,t,n);case 2:return nu(e,[0,t],[e.shape[0],n]);case 3:return ru(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return au(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new zh("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Gf(e,t,n,r){return ma((function(){switch(e.rank){case 1:return tu(e,t,n);case 2:switch(r){case 1:return Vf(e,t,n);case 2:return Wf(e,t,n);default:throw new zh("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Vf(e,t,n);case 2:return ru(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Wf(e,t,n);default:throw new zh("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Vf(e,t,n);case 2:return au(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return au(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Wf(e,t,n);default:throw new zh("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new zh("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Hf(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Di(e,n)}function jf(e,t){switch(e.rank){case 1:return Ki([e,t]);case 2:return Xi([e,t],0);case 3:return Zi([e,t],0);case 4:return Yi([e,t],0);default:throw new zh("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function qf(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new zh("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return wo(e,t)}function Kf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Ls(e,t,n,r,a)}function Xf(e,t,n,r){if(e.rank<2||t.rank<2)throw new Bh("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Bh("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank)return p.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Jf(e.rank,r,"channelsLast"):null,activation:n});var a=e.shape.slice(),i=a.pop();e=e.reshape([-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat(_toConsumableArray(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(l).reshape([u,-1]);var h=[].concat(_toConsumableArray(a),_toConsumableArray(c));return p.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Jf(e.rank,r,"channelsLast"):null,activation:n}).reshape(h)}function Zf(e,t,n){return ma((function(){return t=Array.isArray(t)?gu(t,"int32"):t.toInt(),So(e,t,n)}))}function Yf(e){return Na(e,e)}function Jf(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new zh("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return t;throw new zh("Unsupported input rank by biasAdd: ".concat(t.rank))}function $f(e,t,n){return ma((function(){return null==n&&(n="channelsLast"),Sf(n),e.add(Jf(e.rank,t,n))}))}function Qf(e,t,n,r){return ma((function(){return Fu(e,t,n,r)}))}function ed(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var td=["fanIn","fanOut","fanAvg"],nd=["normal","uniform","truncatedNormal"],rd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(f.Serializable),ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){return vs(e,t)}}]),n}(rd);ad.className="Zeros",f.registerClass(ad);var id=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){return gs(e,t)}}]),n}(rd);id.className="Ones",f.registerClass(id);var od=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),r=t.call(this),"object"!=typeof e)throw new zh("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new zh("config must have value set but got ".concat(e));return r.value=e.value,_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return ma((function(){return Na(Wa(n.value),gs(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(rd);od.className="Constant",f.registerClass(od);var sd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){return Fs(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(rd);sd.className="RandomUniform",f.registerClass(sd);var ud=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bh("randomNormal does not support dType ".concat(t,"."));return Kf(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(rd);ud.className="RandomNormal",f.registerClass(ud);var cd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bh("truncatedNormal does not support dType ".concat(t,"."));return ku(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(rd);cd.className="TruncatedNormal",f.registerClass(cd);var ld=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return ma((function(){if(2!==e.length||e[0]!==e[1])throw new zh("Identity matrix initializer can only be used for 2D square matrices.");return Na(n.gain,ko(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(rd);ld.className="Identity",f.registerClass(ld);var hd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a;if(_classCallCheck(this,n),r=t.call(this),e.scale<0)throw new zh("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,ef(td,"FanMode",r.mode),r.distribution=null==e.distribution?"normal":e.distribution,a=r.distribution,ef(nd,"Distribution",a),r.seed=e.seed,_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Sf(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=Of(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=Of(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=Of(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,a):Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Bh("".concat(this.getClassName()," does not support dType ").concat(t,"."));return ku(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Fs(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(rd);hd.className="VarianceScaling",f.registerClass(hd);var fd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);fd.className="GlorotUniform",f.registerClass(fd);var dd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);dd.className="GlorotNormal",f.registerClass(dd);var pd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);pd.className="HeNormal",f.registerClass(pd);var md=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);md.className="HeUniform",f.registerClass(md);var vd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);vd.className="LeCunNormal",f.registerClass(vd);var gd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return hd.className}}]),n}(hd);gd.className="LeCunNormal",f.registerClass(gd);var yd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new Bh("Random seed is not implemented for Orthogonal Initializer yet.");return _possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return ma((function(){if(e.length<2)throw new Bh("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=Kf(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=zc.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),Na(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(rd);yd.className="Orthogonal",f.registerClass(yd);var _d={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function bd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yh(e,f.SerializationMap.getMap().classNameMap,t,"initializer")}function xd(e){return Zh(e)}function wd(e){if("string"==typeof e){var t=e in _d?_d[e]:e;if("GlorotNormal"===t)return new dd;if("GlorotUniform"===t)return new fd;if("HeNormal"===t)return new pd;if("HeUniform"===t)return new md;if("LeCunNormal"===t)return new vd;if("LeCunUniform"===t)return new gd;var n={};return n.className=t,n.config={},bd(n)}return e instanceof rd?e:bd(e)}function kd(){return new ad}function Cd(){return new id}function Sd(e){return new od(e)}function Td(e){return new sd(e)}function Ed(e){return new ud(e)}function Ad(e){return new cd(e)}function Md(e){return new ld(e)}function Id(e){return new hd(e)}function Nd(e){return new fd(e)}function Rd(e){return new dd(e)}function Dd(e){return new pd(e)}function Od(e){return new md(e)}function Ld(e){return new vd(e)}function Fd(e){return new gd(e)}function Pd(e){return new yd(e)}var zd=0;function Bd(){return zd++}var Ud={};function Vd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Ud||(Ud[e]=0),Ud[e]+=1,e+Ud[e].toString()}function Wd(e){return Array.isArray(e)&&Array.isArray(e[0])}function Gd(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Hd(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new zh("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function jd(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new zh("Expected exactly 1 Shape; got ".concat(e.length))}return e}function qd(e){var t,n=0,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=0===a.shape.length?1:a.shape.reduce((function(e,t){return e*t}))}}catch(CD){r.e(CD)}finally{r.f()}return n}var Kd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variable",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;_classCallCheck(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Bd(),this.originalName=If(r=null==r?"Variable":r),this.name=Nf(this.originalName),this.trainable_=a,this.constraint=i,this.val=Eu(t,this.trainable_,this.name,this.dtype)}return _createClass(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Xd(e){return e.map((function(e){return e.read()}))}function Zd(e){e.forEach((function(e){e[0].write(e[1])}))}var Yd,Jd=_createClass((function e(t){_classCallCheck(this,e),this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),$d=_createClass((function e(t,n,r,a,i,o,s){_classCallCheck(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=Bd(),null!=o&&(this.originalName=If(o),this.name=Nf(this.originalName)),this.rank=n.length})),Qd=0,ep=function(){function e(t,n){_classCallCheck(this,e),this.callArgs=n,this.id=Qd++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=_createForOfIteratorHelper(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(CD){a.e(CD)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return _createClass(e,[{key:"getConfig",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(null!=r?r.name:null)}}catch(CD){n.e(CD)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),tp=0,np=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=tp++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=qh(i)+"_"+Vd(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return e.initialWeights=null!=r.weights?r.weights:null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return _createClass(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Ph("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new zh("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return Hh(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return Hh(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Fh("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Fh("Layer ".concat(this.name)+" is not connected, no input to return.");return Hh(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Fh("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Fh("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Hh(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=jh(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=jh(this.inputSpec);if(e.length!==t.length)throw new zh("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new zh("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new zh("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new zh("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new zh("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new zh("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var h=0;h<a.shape.length;++h){var f=a.shape[h],d=r.shape[h];if(null!=f&&null!=d&&f!==d)throw new zh("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=jh(e),i=!0,o=_createForOfIteratorHelper(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof $d)){i=!1;break}}}catch(CD){o.e(CD)}finally{o.f()}var s,u=!0,c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof $d){u=!1;break}}}catch(CD){c.e(CD)}finally{c.f()}if(i===u)throw new zh("Arguments to apply() must be all SymbolicTensors or all Tensors");return Mf(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=_createForOfIteratorHelper(jh(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(CD){o.e(CD)}finally{o.f()}n.build(Hh(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),h=[],f=_createForOfIteratorHelper(jh(l));try{for(f.s();!(c=f.n()).done;){var d=c.value;-1!==a.indexOf(d)&&(d=d.clone()),h.push(d)}}catch(CD){f.e(CD)}finally{f.f()}if(l=Hh(h),null!=n.activityRegularizer)throw new Bh("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var p,m=function(e){var t,n=[],r=_createForOfIteratorHelper(e=jh(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(CD){r.e(CD)}finally{r.f()}return Hh(n)}(e),v=n.computeOutputShape(m);if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),p=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new $d("float32",r,n,jh(e),t,n.name,a)})):new $d("float32",v,n,jh(e),t,n.name),n.addInboundNode(e,p,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new Bh("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Fh("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=_createForOfIteratorHelper(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(CD){n.e(CD)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Fh("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Ph("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return qd(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Xd(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;ma((function(){var n=t.weights;if(n.length!==e.length)throw new zh('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var a=[],i=Xd(n),o=0;o<i.length;++o){var s=i[o],u=n[o],c=e[o];if(!r.arraysEqual(s.shape,c.shape))throw new zh("Layer weight shape ".concat(s.shape," ")+"not compatible with provided weight shape ".concat(c.shape));a.push([u,c])}Zd(a)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new zh("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=wd("zeros"));var s=r.apply(t,n),u=new Kd(s,n,e,i,o);return s.dispose(),null!=a&&this.addLoss((function(){return a.apply(u.read())})),null==i&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=jh(e),null!=this._losses&&(t=this.losses).push.apply(t,_toConsumableArray(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=jh(e);t=jh(t),n=jh(n),r=jh(r),a=Gd(a),i=Gd(i);var u,c=[],l=[],h=[],f=_createForOfIteratorHelper(s);try{for(f.s();!(u=f.n()).done;){var d=u.value;c.push(d.sourceLayer),l.push(d.nodeIndex),h.push(d.tensorIndex)}}catch(CD){f.e(CD)}finally{f.f()}new ep({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(f.Serializable),rp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Vd("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new zh("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new zh("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new zh("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new $d(r.dtype,r.batchInputShape,_assertThisInitialized(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new ep({outboundLayer:_assertThisInitialized(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){throw new zh("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(np);function ap(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new zh("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new rp({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function ip(e){return op.apply(this,arguments)}function op(){return(op=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,s,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=10;break}return e.next=7,Promise.all(n);case 7:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];va(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sp(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}rp.className="InputLayer",f.registerClass(rp),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Yd||(Yd={}));var up=function(){function e(){_classCallCheck(this,e),this.validationData=null}var t,n,r,a,i,o;return _createClass(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"onEpochEnd",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"setModel",value:function(e){}}]),e}(),cp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}var t,n,r,a,i,o;return _createClass(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=_createForOfIteratorHelper(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(CD){n.e(CD)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=_createForOfIteratorHelper(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(CD){n.e(CD)}finally{n.f()}}},{key:"onEpochBegin",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return o.apply(this,arguments)})},{key:"onEpochEnd",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=_createForOfIteratorHelper(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=_createForOfIteratorHelper(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return t.apply(this,arguments)})}]),e}(),lp=function(e){_inherits(i,e);var t,n,r,a=_createSuper(i);function i(){return _classCallCheck(this,i),a.call(this)}return _createClass(i,[{key:"onEpochBegin",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onBatchEnd",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=ma((function(){return Aa(o.totals[e],Na(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onEpochEnd",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){r=_createForOfIteratorHelper(this.params.metrics);try{for(i=function(){var e=a.value;null!=o.totals[e]&&("number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:ma((function(){var t=Na(Ia(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),ga(n[e])})))},r.s();!(a=r.n()).done;)i()}catch(CD){r.e(CD)}finally{r.f()}}case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),i}(up),hp=function(e){_inherits(i,e);var t,n,r,a=_createSuper(i);function i(){return _classCallCheck(this,i),a.apply(this,arguments)}return _createClass(i,[{key:"onTrainBegin",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onEpochEnd",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"syncData",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,s,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(t.push(i[o].data()),n.push(a),r.push(o));return e.next=4,Promise.all(t);case 4:for(s=e.sent,u=0;u<s.length;++u)this.history[n[u]][r[u]].dispose(),this.history[n[u]][r[u]]=s[u][0];case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(up),fp=function(e){_inherits(l,e);var t,n,a,i,o,s,u,c=_createSuper(l);function l(e,t){var n,a,i,o,s;if(_classCallCheck(this,l),(n=c.call(this)).currentEpoch=0,n.yieldEvery=t||"auto","auto"===n.yieldEvery&&(n.yieldEvery=125),"never"===n.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return r.isNumber(n.yieldEvery)&&(n.maybeWait=(a=n.maybeWait.bind(_assertThisInitialized(n)),i=n.yieldEvery,s=r.now(),function(){var e=r.now();return e-s<i?o:(s=e,o=a.apply(void 0,arguments))})),n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n.yield=e.onYield,_possibleConstructorReturn(n)}return _createClass(l,[{key:"maybeWait",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.yield,!e.t0){e.next=6;break}return e.next=5,ip(r);case 5:a.push(this.yield(t,n,r));case 6:return a.push(Gc()),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"onEpochBegin",value:(s=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,e.t0=null!=this.epochBegin,!e.t0){e.next=7;break}return e.next=5,ip(n);case 5:return e.next=7,this.epochBegin(t,n);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"onEpochEnd",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.epochEnd,!e.t0){e.next=6;break}return e.next=5,ip(n);case 5:r.push(this.epochEnd(t,n));case 6:return"epoch"===this.yieldEvery&&r.push(Gc()),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"onBatchBegin",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.batchBegin,!e.t0){e.next=6;break}return e.next=4,ip(n);case 4:return e.next=6,this.batchBegin(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchEnd",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.batchEnd,!e.t0){e.next=6;break}return e.next=5,ip(n);case 5:a.push(this.batchEnd(t,n));case 6:return"batch"===this.yieldEvery?a.push(Gc()):r.isNumber(this.yieldEvery)&&a.push(this.maybeWait(this.currentEpoch,t,n)),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainBegin,!e.t0){e.next=6;break}return e.next=4,ip(t);case 4:return e.next=6,this.trainBegin(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainEnd,!e.t0){e.next=6;break}return e.next=4,ip(t);case 4:return e.next=6,this.trainEnd(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),l}(up);function dp(e,t){return null==e&&(e={}),e instanceof up?[e]:Array.isArray(e)&&e[0]instanceof up?e:jh(e).map((function(e){return new fp(e,t)}))}var pp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerCallbackConstructor",value:function(t,n){r.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new zh("Duplicate callback constructor.")}))}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,_toConsumableArray(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function mp(e,t,n,r,a,i,o,s,u){var c=new hp,l=[new lp].concat(_toConsumableArray(pp.createCallbacks(t)));null!=e&&l.push.apply(l,_toConsumableArray(e)),l.push(c);var h=new cp(l);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:h,history:c}}function vp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Yh(e,f.SerializationMap.getMap().classNameMap,t,"layer",n)}function gp(e,t){return ma((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=Go(Yf(e),t,!0),r=ja(n.shape,Lh()),a=Ra(ei(n,r));return Ia(e,a)}))}function yp(e,t){return ma((function(){return ss(Yf(Xa(t,e)),-1)}))}function _p(e,t){return ma((function(){return ss(Ya(Xa(t,e)),-1)}))}function bp(e,t){return ma((function(){var n=Xa(e,t),r=qi(Ya(e),Lh(),Number.MAX_VALUE),a=Ya(Ia(n,r));return Na(100,ss(a,-1))}))}function xp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ma((function(){if(n)t=iu(t);else{var r=Go(t,t.shape.length-1,!0);t=Ia(t,r)}return t=qi(t,Lh(),1-Lh()),Bo(Go(Na(e.toFloat(),Po(t)),t.shape.length-1))}))}function wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ma((function(){var r,a,i=Co((r=e,a=[Of(r.shape)],r.reshape(a))).toInt(),o=(t=qi(t,Lh(),1-Lh())).shape;return xp(br(i,o[o.length-1]).reshape(o),t,n)}))}function kp(e,t){return ma((function(){var n;return n=qi(t,Lh(),1-Lh()),n=Po(Ia(n,Xa(1,n))),ss(function(e,t){if(!r.arraysEqual(e.shape,t.shape))throw new zh("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return ma((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function Cp(e,t){return ma((function(){var n=gp(e,-1),r=gp(t,-1),a=Na(n,r);return Bo(Go(a,-1))}))}pp.constructors={};var Sp={meanSquaredError:yp,meanAbsoluteError:_p,meanAbsolutePercentageError:bp,meanSquaredLogarithmicError:function(e,t){return ma((function(){var n=qi(t,Lh(),Number.MAX_VALUE),r=Po(Aa(1,n)),a=qi(e,Lh(),Number.MAX_VALUE),i=Po(Aa(1,a));return ss(Yf(Xa(r,i)),-1)}))},squaredHinge:function(e,t){return ma((function(){var n=ei(0,Xa(1,Na(e,t)));return ss(Yf(n),-1)}))},hinge:function(e,t){return ma((function(){var n=ei(0,Xa(1,Na(e,t)));return ss(n,-1)}))},categoricalHinge:function(e,t){return ma((function(){var n=Go(Na(e,t),-1),r=Wo(Na(Xa(1,e),t),-1);return ei(0,Aa(1,Xa(r,n)))}))},logcosh:function(e,t){return ma((function(){var n=Math.log(2),r=Xa(t,e),a=Xa(Aa(r,Uo(Na(-2,r))),n);return ss(a,-1)}))},categoricalCrossentropy:xp,sparseCategoricalCrossentropy:wp,binaryCrossentropy:kp,kullbackLeiblerDivergence:function(e,t){return ma((function(){var n=qi(e,Lh(),1),r=qi(t,Lh(),1);return Go(Na(e,Po(Ia(n,r))),-1)}))},poisson:function(e,t){return ma((function(){var n=Po(Aa(Lh(),t));return ss(Xa(t,Na(e,n)),-1)}))},cosineProximity:Cp};function Tp(e){if("string"==typeof e){if(e in Sp)return Sp[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new zh(t)}return e}function Ep(e,t){return ma((function(){var n=Na(.5,ys(t)),r=Bf(To(t,n),e.dtype);return ss(fo(e,r),-1)}))}function Ap(e,t){return ma((function(){return Bf(fo(li(e,-1),li(t,-1)),"float32")}))}function Mp(e,t){return ma((function(){return es(e.equal(1),t.equal(1)).sum().cast("float32")}))}function Ip(e,t){return ma((function(){var n=Mp(e,t),r=function(e,t){return ma((function(){return es(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),a=n.add(r);return po(To(a,0),n.div(a),0).cast("float32")}))}function Np(e,t){return kp(e,t)}function Rp(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),fo(e,t).asType("float32")}var Dp=xp,Op=wp,Lp={binaryAccuracy:Ep,categoricalAccuracy:Ap,precision:Ip,categoricalCrossentropy:Dp,sparseCategoricalCrossentropy:Op,mse:yp,MSE:yp,mae:_p,MAE:_p,mape:bp,MAPE:bp,cosine:Cp};function Fp(e){if("string"==typeof e&&e in Lp)return Lp[e];if("string"!=typeof e&&null!=e)return e;throw new zh("Unknown metric ".concat(e))}function Pp(e){if(Wh(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(Sp);n<r.length;n++){var a=r[n];if(Sp[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Lp);i<o.length;i++){var s=o[i];if(Lp[s]===e){t=s;break}}return void 0!==t?t:e.name}function zp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];if("string"!=typeof a)return!1;if(!e(t[a]))return!1}return!0}if(Array.isArray(t)){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){if(!e(i.value))return!1}}catch(CD){o.e(CD)}finally{o.f()}return!0}return!1}var s=typeof t;return"string"===s||"number"===s||"boolean"===s}(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.")}}function Bp(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Up(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(CD){r="multiple"}Bp(["".concat(e.name," (").concat(e.getClassName(),")"),r,e.countParams().toString()],t,n)}function Vp(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(CD){a="multiple"}var i,o=[],s=_createForOfIteratorHelper(e.inboundNodes);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var c=0;c<u.inboundLayers.length;++c)o.push("".concat(u.inboundLayers[c].name,"[").concat(u.nodeIndices[c],"][").concat(u.tensorIndices[c],"]"))}}catch(CD){s.e(CD)}finally{s.f()}var l=e.name,h=e.getClassName(),f=0===o.length?"":o[0];Bp(["".concat(l," (").concat(h,")"),a,e.countParams().toString(),f],t,r);for(var d=1;d<o.length;++d)Bp(["","","",o[d]],t,r)}function Wp(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function Gp(e,t){if(null===e)return null;if("string"==typeof e)return Kh(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Wp(t,a,i)?n.push(i):n.push(Gp(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"==typeof l)o[c]=l;else{var h=Kh(c);o[h]=Gp(l,h)}}return o}var Hp=function(){function e(t){if(_classCallCheck(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(CD){a.e(CD)}finally{a.f()}}}return _createClass(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new zh("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Yn(t,e.dtype)}catch(CD){throw new zh("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof $d){if(null==this.id2Value[e.id])throw new zh("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new zh("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof $d){if(null==this.id2Value[e.id])throw new zh("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new zh("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&va(this.id2Mask)}}]),e}(),jp={},qp={};function Kp(e,t,n,a){var i,o=null!=n&&n.training,s=Array.isArray(e),u=s?e:[e],c=u.map((function(e){return e.name})),l=[],h=t.names(),f=_createForOfIteratorHelper(c);try{for(f.s();!(i=f.n()).done;){var d=i.value;-1!==h.indexOf(d)?l.push(t.getValue(d)):l.push(null)}}catch(CD){f.e(CD)}finally{f.f()}null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);var p,m,v=c.join(",")+"|"+t.names().join(",");if(null==jp[v]){var g=function(e,t){r.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],a={};if(1===e.length){var i=Zp(e[0],t);n=i.sorted,a=i.recipientMap}else{var o,s=new Set,u=_createForOfIteratorHelper(e);try{for(u.s();!(o=u.n()).done;){var c,l=Zp(o.value,t),h=l.sorted,f=l.recipientMap,d=_createForOfIteratorHelper(h);try{for(d.s();!(c=d.n()).done;){var p=c.value;s.has(p.name)||(n.push(p),s.add(p.name))}}catch(CD){d.e(CD)}finally{d.f()}var m=function(e){null==a[e]&&(a[e]=new Set),f[e].forEach((function(t){return a[e].add(t)}))};for(var v in f)m(v)}}catch(CD){u.e(CD)}finally{u.f()}}return{sorted:n,recipientCounts:Xp(a)}}(u,t);p=g.sorted,m=g.recipientCounts,jp[v]=p,qp[v]=m}p=jp[v],m={},o||Object.assign(m,qp[v]);for(var y=new Hp(t),_=0;_<p.length;++_){if(null!=a){var b=da().numTensors;b>a.maxNumTensors&&(a.maxNumTensors=b),b<a.minNumTensors&&(a.minNumTensors=b)}var x=p[_],w=x.sourceLayer;if(!(w instanceof rp)){var k,C=[],S=[],T=[],E=!1,A=_createForOfIteratorHelper(x.inputs);try{for(A.s();!(k=A.n()).done;){var M=k.value,I=y.getValue(M),N=y.getMask(M);C.push(I),S.push(N),null!=N&&(E=!0),o||(m[M.name]--,0!==m[M.name]||t.hasKey(M)||-1!==c.indexOf(M.name)||I.isDisposed||!0===M.sourceLayer.stateful||T.push(I))}}catch(CD){A.e(CD)}finally{A.f()}E&&((n=n||{}).mask=S[0]);var R=jh(w.apply(C,n)),D=null;w.supportsMasking&&(D=w.computeMask(C,S));for(var O=Yp(x),L=Array.isArray(O)?O:[O],F=0;F<L.length;++F){y.hasKey(L[F])||y.add(L[F],R[F],Array.isArray(D)?D[0]:D);var P=c.indexOf(L[F].name);-1!==P&&(l[P]=R[F])}o||va(T)}}return y.disposeMasks(),s?l:l[0]}function Xp(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Zp(e,t){var n,r=new Set,a=[],i={},o=_createForOfIteratorHelper(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(CD){o.e(CD)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var h=c[c.length-1]===u.length-1;if(0===l.inputs.length||h)u.pop(),a.push(l),r.add(l.name),h&&c.pop();else{c.push(u.length-1);var f,d=_createForOfIteratorHelper(l.inputs);try{for(d.s();!(f=d.n()).done;){var p=f.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||u.push(p)}}catch(CD){d.e(CD)}finally{d.f()}}}}return{sorted:a,recipientMap:i}}function Yp(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=_createForOfIteratorHelper(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(CD){i.e(CD)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Jp(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided classWeight is an array of ".concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){a.push(t in e?e[t]:null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so classWeight must be either an array with "+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided classWeight not understood: ".concat(JSON.stringify(e)))}(e,t)}function $p(e,t,n,r){return Qp.apply(this,arguments)}function Qp(){return(Qp=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a){var i,o,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=12;break}return i=ma((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),va(i),s=[],e.abrupt("return",(o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),gu(s,"float32")));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t){return Na(e,t)}function tm(e,t){var n,a;n=t.xs,a=t.ys,r.assert(null!=n&&null!=a,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=nm("input",e.inputNames,n),o=nm("output",e.outputNames,a),s=i[0].shape[0];r.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),r.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){r.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){r.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},h=0;h<o.length;h++)l(h);return{xs:i,ys:o}}function nm(e,t,n){if(n instanceof Ct)return[n];if(Array.isArray(n))return r.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var a,i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(null==n[s])throw new zh("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(s,"'."));i.push(n[s])}}catch(CD){o.e(CD)}finally{o.f()}return i}function rm(e){return"function"==typeof e.iterator}function am(e){r.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function im(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Vf(e,t,n-t)})):Vf(e,t,n-t)}function om(e,t){return ma((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return om(e,t)})):Zf(e,"int32"===t.dtype?t:t.toInt())}))}function sm(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function um(e){var t=[];e instanceof Ct&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Uf(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function cm(e,t){if(null!=e){var n=[];if(t instanceof Ct)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t)n.push(t[r].id);var a=[];if(e instanceof Ct)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&a.push(e)}));else if(null!=e)for(var i in e){var o=e[i];-1===n.indexOf(o.id)&&a.push(o)}a.forEach((function(e){e.isDisposed||e.dispose()}))}}function lm(e){return Array.isArray(e)}function hm(e){return!function(e){return e instanceof Ct}(e)&&!lm(e)}function fm(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(lm(e)&&e.length>0)o=!0;else if(hm(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new zh("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(hm(e)){e=e,r=[];var u,c=_createForOfIteratorHelper(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new zh('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(CD){c.e(CD)}finally{c.f()}}else if(lm(e)){if((e=e).length!==t.length)throw new zh("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new zh("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=um(r),null!=n)for(var h=0;h<t.length;++h)if(null!=n[h]){var f=r[h];if(f.shape.length!==n[h].length)throw new zh("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var d=0;d<n[h].length;++d)if(0!==d||a){var p=f.shape[d],m=n[h][d];if(null!=m&&m>=0&&p!==m)throw new zh("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have shape [".concat(n[h],"], but got array with shape ")+"[".concat(f.shape,"]."))}}return r}function dm(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new zh("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new zh("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new zh("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new zh("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var pm=function(e){_inherits(l,e);var t,n,a,i,s,u,c=_createSuper(l);function l(e){var t;return _classCallCheck(this,l),(t=c.call(this,e)).isTraining=!1,t}return _createClass(l,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new zh("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,_toConsumableArray(s))}if(t){var u,c=_createForOfIteratorHelper(e.layers);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,f=!1,d=_createForOfIteratorHelper(h.inboundNodes);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(f){t=!1;break}f=!0}}}catch(CD){d.e(CD)}finally{d.f()}if(!t)break}}catch(CD){c.e(CD)}finally{c.f()}}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,_toConsumableArray(e.nodesByDepth[s]))}a("_".repeat(t)),Bp(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?Up(c[l],n,a):Vp(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var h=function(e){return qd(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights)}(e),f=qd(e.nonTrainableWeights);a("Total params: ".concat(h+f)),a("Trainable params: ".concat(h)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Vc.adagrad(.01)},Adadelta:function(){return Vc.adadelta(1,.95,Lh())},Adam:function(){return Vc.adam(.001,.9,.999,Lh())},Adamax:function(){return Vc.adamax(.002,.9,.999,Lh(),0)},RMSProp:function(){return Vc.rmsprop(.001,.9,0,Lh())},SGD:function(){return Vc.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new zh("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ga))throw new zh("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new zh("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));n=e.loss.map((function(e){return Tp(e)}))}else{var r=Tp(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var a in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(a))throw new zh('Unknown entry in loss dictionary: "'.concat(a,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,o=_createForOfIteratorHelper(this.outputNames);try{for(o.s();!(i=o.n()).done;){var s=i.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(s," during training")),n.push(Tp(e.loss[s]))}}catch(CD){o.e(CD)}finally{o.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var c=this.internalOutputShapes[u];this.feedOutputNames.push(this.outputNames[u]),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[u])}var l=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Mf("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===l.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(CD){i.e(CD)}finally{i.f()}return a}(e.metrics,this.outputNames),f=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};Mf("metric",(function(){for(var e=function(e){-1===l.indexOf(e)&&function(n){var r,a,i,o,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e],l=void 0;1===c[c.length-1]||t.lossFunctions[e]===kp?-1!==["accuracy","acc"].indexOf(u)?a=Ep:-1!==["crossentropy","ce"].indexOf(u)&&(a=Np):t.lossFunctions[e]===wp?-1!==["accuracy","acc"].indexOf(u)?a=Rp:-1!==["crossentropy","ce"].indexOf(u)&&(a=Op):-1!==["accuracy","acc"].indexOf(u)?a=Ap:-1!==["crossentropy","ce"].indexOf(u)&&(a=Dp),-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else{var h=Fp(u);i=h,r=""+Pp(u)}var d=void 0;Mf(r,(function(){d=i})),f(e,r,d)}}catch(CD){s.e(CD)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;am(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);return this.makeTestFunction(),Hh(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))}finally{cm(a[0],e),cm(a[1],t)}}},{key:"evaluateDataset",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.makeTestFunction(),function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,a){var i,o,s,u,c,l,h,f,d;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=(a=a||{}).batches,o=t.testFunction,s=[],!(a.verbose>0)){e.next=4;break}throw new Bh("Verbose mode is not implemented yet.");case 4:if(r.assert(!i||a.batches>0&&Number.isInteger(a.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(a.batches))})),"function"!=typeof n.next){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,n.iterator();case 11:e.t0=e.sent;case 12:u=e.t0,c=0,l=0,h=_regeneratorRuntime().mark((function e(){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.next();case 2:if(n=e.sent,s=ma((function(){return n.value&&function(){var e=tm(t,n.value),r=e.xs,a=e.ys,i=r.concat(a),u=ma((function(){return o(i)}));if(va(i),0===l)for(var h=0;h<u.length;++h)s.push(Wa(0));for(var f=i[0].shape[0],d=function(e){var t=u[e],n=s[e];s[e]=ma((function(){return Aa(s[e],Na(f,t))})),l>0&&va(n)},p=0;p<u.length;++p)d(p);va(u),c+=f,++l}(),s})),!n.done){e.next=6;break}return i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(a.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)}));case 15:if(i&&!(l<a.batches)){e.next=22;break}return e.delegateYield(h(),"t1",17);case 17:if("break"!==e.t1){e.next=20;break}return e.abrupt("break",22);case 20:e.next=15;break;case 22:for(f=0;f<s.length;++f)d=s[f],s[f]=Ia(s[f],c),va(d);return e.abrupt("return",Hh(s));case 24:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new zh("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new zh("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new zh("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),a=new Hp;if(e instanceof Ct&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new zh("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)a.add(this.inputs[i],e[i])}else{var o,s=_createForOfIteratorHelper(this.inputs);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=e[u.name];if(null==c)throw new zh("No value is provided for the model's input ".concat(u.name));a.add(u,c)}}catch(CD){s.e(CD)}finally{s.f()}}var l=Kp(r,a);return n?l:l[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Vh(null,e.length),r=e.length,a=_createForOfIteratorHelper(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(CD){a.e(CD)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new zh("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ma((function(){var a=t.checkNumSamples(e);if(r)throw new Bh("Verbose predictLoop() is not implemented yet.");for(var i=sm(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){ma((function(){var r=im(e,i[n][0],i[n][1]),a=[];if(Array.isArray(r))for(var o=0;o<r.length;++o)a.push({key:t.inputs[o],value:r[o]});else a.push({key:t.inputs[0],value:r});var s=new Hp(a);return Kp(t.outputs,s)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return Hh(o.map((function(e){return Di(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=um(e);dm(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return am(r),this.predictLoop(n,r)}finally{cm(n,e)}}},{key:"predictOnBatch",value:function(e){dm(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Ph("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],i=0;i<this.feedOutputShapes.length;++i){var o=this.feedOutputShapes[i];a.push(this.feedLossFns[i]===wp?o.slice(0,o.length-1).concat([1]):o)}if(function(e,t,n){var a=$h(e.map((function(e){return e.shape[0]})));a.sort();var i=$h(t.map((function(e){return e.shape[0]})));if(i.sort(),a.length>1)throw new zh("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(i.length>1)throw new zh("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(a.length>0&&i.length>0&&!r.arraysEqual(a,i))throw new zh("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(a[0]," input sample(s) and ").concat(i[0]," target ")+"sample(s).")}(e=fm(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=fm(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){for(var r=[yp,kp,xp],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===xp&&1===i.shape[i.shape.length-1])throw new zh("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var h=u[l],f=c[l];if(null!=f&&h!==f)throw new zh("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!=0)throw new zh("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=_slicedToArray(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(h=null,null==a){e.next=19;break}f=Jp(a,this.outputNames),h=[],d=0;case 10:if(!(d<f.length)){e.next=19;break}return e.t0=h,e.next=14,$p(l[d],null,f[d]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++d,e.next=10;break;case 19:return e.abrupt("return",[c,l,h]);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return s.apply(this,arguments)})},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return ma((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new Bh("Verbose mode is not implemented yet.");if(null!=i)throw new Bh("steps mode in testLoop() is not implemented yet");for(var u=sm(o,n),c=gu(zf(0,o)),l=0;l<u.length;++l){var h=u[l][0],f=u[l][1],d=Vf(c,h,f-h),p=om(t,d),m=e(p);if(0===l)for(var v=0;v<m.length;++v)s.push(Wa(0));for(var g=0;g<m.length;++g)s[g]=Aa(s[g],Na(f-h,m[g]))}for(var y=0;y<s.length;++y)s[y]=Ia(s[y],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;Gh(e,r)>1&&(a+="_".concat(Gh(e.slice(0,n),r))),t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new Hp(t),l=Kp(e.outputs,c,{training:!0}),h=0;h<e.lossFunctions.length;++h){var f=(0,e.lossFunctions[h])(a[h],l[h]);null!=i[h]&&(f=em(f,i[h]));var d=ss(f);n.push(d),u=0===h?f:Aa(u,f)}for(var p=0;p<e.metricsTensors.length;++p){var m=void 0;if(e.outputs.length>1&&p<e.outputs.length)m=n[p];else{var v=e.metricsTensors[p][1];m=ss((0,e.metricsTensors[p][0])(a[v],l[v]))}ga(m),o.push(m)}return u=ss(u),e.calculateLosses().forEach((function(e){u=Aa(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return ma((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new Hp(o),c=Kp(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var h=ss((0,e.lossFunctions[l])(i[l],c[l]));n=0===l?h:Aa(n,h),r.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var d=e.metricsTensors[f][1],p=ss((0,e.metricsTensors[f][0])(i[d],c[d]));r.push(p)}return r}))}}},{key:"fit",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var a,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,a){var i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w,k,C,S,T,E,A=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=A.length>3&&void 0!==A[3]?A[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,am(d=null==i.batchSize?32:i.batchSize),p=!1,e.next=10,t.standardizeUserData(n,a,i.sampleWeight,i.classWeight,p,d);case 10:if(m=e.sent,o=m[0],s=m[1],f=m[2],g=!1,!(null!=i.validationData&&i.validationData.length>0)){e.next=24;break}if(g=!0,2===i.validationData.length){e.next=16;break}throw 3===i.validationData.length?new Bh("validationData including sample weights is not supported yet."):new zh("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(i.validationData," is invalid."));case 16:return u=i.validationData[0],c=i.validationData[1],y=!0,e.next=20,t.standardizeUserData(u,c,null,null,y,d);case 20:_=e.sent,l=_[0],h=_[1],v=l.concat(h),e.next=25;break;case 24:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(g=!0,b=Math.floor(o[0].shape[0]*(1-i.validationSplit)),x=o[0].shape[0],l=im(o,b,x),o=im(o,0,b),h=im(s,b,x),s=im(s,0,b),v=l.concat(h)):null!=i.validationSteps&&(g=!0);case 25:return w=o.concat(s).concat(f),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),g?(t.makeTestFunction(),S=t.testFunction,T=C.slice().concat(C.map((function(e){return"val_"+e})))):(S=null,v=[],T=C.slice()),E=dp(i.callbacks,i.yieldEvery),e.next=32,function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,a,i,o,s,u,c,l,h,f,d,p,m,v){var g,y,_,b,x,w,k,C;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==o&&(o=32),null==s&&(s=1),null==f&&(f=!0),null==p&&(p=0),g=!1,null!=l&&null!=h&&(g=!0),null!=(y=t.checkNumSamples(a,o,null,"steps_per_epoch"))&&(_=zf(0,y)),null==u&&(u=1),b=mp(c,u,s,p,y,null,o,g,d),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=10,x.onTrainBegin();case 10:t.stopTraining_=!1,k=_regeneratorRuntime().mark((function e(s){var u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(s);case 2:return u={},e.delegateYield(_regeneratorRuntime().mark((function e(){var s,c,d,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=2;break}throw new Bh("batch shuffling is not implemneted yet");case 2:f&&r.shuffle(_),s=gu(_),c=sm(y,o),d=_regeneratorRuntime().mark((function e(r){var f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,x.onBatchBegin(r,f);case 3:return ma((function(){var e=c[r][0],d=c[r][1],p=Vf(s,e,d-e);f.batch=r,f.size=d-e;for(var m=om(a,p),v=n(m),y=0;y<i.length;++y){var _=v[y];f[i[y]]=_,ga(_)}if(r===c.length-1&&g)for(var b=t.testLoop(l,h,o),x=0;x<i.length;++x){var w=i[x],k=b[x];ga(k),u["val_"+w]=k}})),e.next=6,x.onBatchEnd(r,f);case 6:if(sp(f),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<c.length)){e.next=14;break}return e.delegateYield(d(p),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:++p,e.next=6;break;case 14:s.dispose();case 15:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:return e.next=6,x.onEpochEnd(s,u);case 6:if(!t.stopTraining_){e.next=8;break}return e.abrupt("return","break");case 8:case"end":return e.stop()}}),e)})),C=p;case 13:if(!(C<s)){e.next=21;break}return e.delegateYield(k(C),"t0",15);case 15:if("break"!==e.t0){e.next=18;break}return e.abrupt("break",21);case 18:++C,e.next=13;break;case 21:return e.next=23,x.onTrainEnd();case 23:return e.next=25,t.history.syncData();case 25:return e.abrupt("return",t.history);case 26:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o,s,u,c,l,h,f,d,p,m){return e.apply(this,arguments)}}()(t,k,w,C,d,i.epochs,i.verbose,E,S,v,i.shuffle,T,i.initialEpoch);case 32:return e.abrupt("return",e.sent);case 33:return e.prev=33,t.isTraining=!1,cm(o,n),cm(s,a),cm(l,u),cm(h,c),null!=f&&va(f),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[4,,33,36]])})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n,a));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"fitDataset",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,a){var i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w,k,C,S,T,E,A,M,I,N,R,D,O,L,F;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=a.batchesPerEpoch,r.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),r.assert(null!=a,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),r.assert(null!=a.epochs&&a.epochs>0&&Number.isInteger(a.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(a.epochs)})),r.assert(!i||a.batchesPerEpoch>0&&Number.isInteger(a.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(a.batchesPerEpoch)})),r.assert(null==a.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,(o=null!=a.validationData)&&(rm(a.validationData)?r.assert(null==a.validationBatches||a.validationBatches>0&&Number.isInteger(a.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(a.validationBatches)})):(c=function(e){if(3===e.length)throw new Bh("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(a.validationData),s=c.xs,u=c.ys)),l=t.makeTrainFunction(),h=t.getDedupedMetricsNames(),f=o?h.slice().concat(h.map((function(e){return"val_"+e}))):h.slice(),d=dp(a.callbacks,a.yieldEvery),p=null==a.verbose?1:a.verbose,m=mp(d,p,a.epochs,null,null,function(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(n,a),null,o,f),v=m.callbackList,g=m.history,v.setModel(t),t.history=g,e.next=14,v.onTrainBegin();case 14:return t.stopTraining_=!1,y=null==a.initialEpoch?0:a.initialEpoch,e.next=18,n.iterator();case 18:_=e.sent;case 19:if(!(y<a.epochs)){e.next=89;break}return b={},e.next=23,v.onEpochBegin(y);case 23:if(x=0,w=0,e.t0=i,e.t0){e.next=29;break}return e.next=28,n.iterator();case 28:_=e.sent;case 29:if(i&&!(x<a.batchesPerEpoch)){e.next=82;break}return e.next=32,_.next();case 32:if(k=e.sent,!i||!k.done){e.next=36;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(a.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(a.batchesPerEpoch*a.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",82);case 36:if(null==k.value){e.next=63;break}return C=tm(t,k.value),S=C.xs,T=C.ys,(E={}).batch=w,E.size=S[0].shape[0],e.next=42,v.onBatchBegin(w,E);case 42:if(A=[],null==a.classWeight){e.next=55;break}M=Jp(a.classWeight,t.outputNames),I=0;case 46:if(!(I<M.length)){e.next=55;break}return e.t1=A,e.next=50,$p(T[I],null,M[I]);case 50:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 52:++I,e.next=46;break;case 55:for(N=S.concat(T).concat(A),R=l(N),va(N),D=0;D<h.length;++D)O=R[D],E[h[D]]=O,ga(O);return e.next=60,v.onBatchEnd(w,E);case 60:sp(E),w++,x++;case 63:if(!(i?x>=a.batchesPerEpoch:k.done)){e.next=78;break}if(!o){e.next=77;break}if(L=void 0,!rm(a.validationData)){e.next=74;break}return e.t4=jh,e.next=70,t.evaluateDataset(a.validationData,{batches:a.validationBatches});case 70:e.t5=e.sent,e.t3=(0,e.t4)(e.t5),e.next=75;break;case 74:e.t3=jh(t.evaluate(s,u,{batchSize:null==a.validationBatchSize?32:a.validationBatchSize,verbose:0}));case 75:for(L=e.t3,F=0;F<t.metricsNames.length;++F)b["val_".concat(t.metricsNames[F])]=L[F];case 77:return e.abrupt("break",82);case 78:if(!t.stopTraining_){e.next=80;break}return e.abrupt("break",82);case 80:e.next=29;break;case 82:return e.next=84,v.onEpochEnd(y,b);case 84:if(y++,!t.stopTraining_){e.next=87;break}return e.abrupt("break",89);case 87:e.next=19;break;case 89:return e.next=91,v.onTrainEnd();case 91:return e.next=93,t.history.syncData();case 93:return e.abrupt("return",t.history);case 94:return e.prev=94,t.isTraining=!1,e.finish(94);case 97:case"end":return e.stop()}}),e,null,[[4,,94,97]])})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"trainOnBatch",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),s=[],u=_createForOfIteratorHelper(o),e.prev=8,u.s();case 10:if((c=u.n()).done){e.next=18;break}return l=c.value,e.next=14,l.data();case 14:h=e.sent,s.push(h[0]);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return e.abrupt("return",(va(o),Hh(s)));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=_get2(_getPrototypeOf(l.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=da().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-da().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=qh(this.loss);else if(Array.isArray(this.loss)){var t,n=_createForOfIteratorHelper(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(CD){n.e(CD)}finally{n.f()}e=this.loss.map((function(e){return qh(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=qh(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[qh(Pp(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return qh(Pp(e))}));var e={};for(var t in this.metrics)e[t]=qh(Pp(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=vp(Gp(e.optimizer_config));if("string"==typeof e.loss)t=Kh(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Kh(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Kh(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Kh(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Kh(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,s,u,c,l,h;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=o.getSaveHandlers(t)).length){e.next=4;break}throw new zh("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new zh("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new zh("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.next=11,o.encodeWeights(this.getNamedWeights(n));case 11:if(a=e.sent,i={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v3.1.0",convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=27;break}return i.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=o,e.next=19,this.optimizer.getWeights();case 19:return e.t1=e.sent,e.t2=u,e.next=23,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 23:c=e.sent,l=c.data,h=c.specs,(s=a.specs).push.apply(s,_toConsumableArray(h)),a.data=o.concatenateArrayBuffers([a.data,l]);case 27:return e.abrupt("return",(null!=this.userDefinedMetadata&&(zp(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,t.save(i)));case 28:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setUserDefinedMetadata",value:function(e){zp(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),l}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=Vd(a)}if(r.supportsMasking=!1,r.trainable_=!0,r.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],r.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],$h(r.inputs).length!==r.inputs.length)throw new zh("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));$h(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=_createForOfIteratorHelper(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(s.sourceLayer),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(c)}}catch(CD){o.e(CD)}finally{o.f()}var l,h=_createForOfIteratorHelper(r.inputs);try{for(h.s();!(l=h.n()).done;){var f=l.value,d=f.sourceLayer,p=f.nodeIndex,m=f.tensorIndex;Wh(0===p,"input layer has >1 nodes"),Wh(0===m,"input layer has >1 tensors"),r.inputLayers.push(d),r.inputLayersNodeIndices.push(p),r.inputLayersTensorIndices.push(m)}}catch(CD){h.e(CD)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var v=0;v<r.inputLayers.length;v++){var g=r.inputLayers[v];if(!(g instanceof rp))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(v," (0-based) originates ")+"from layer type ".concat(g.getClassName(),"."));r.inputNames.push(g.name),r.feedInputShapes.push(g.batchInputShape),r.feedInputNames.push(g.name)}var y,_=_createForOfIteratorHelper(r.outputLayers);try{for(_.s();!(y=_.n()).done;){var b=y.value;r.outputNames.push(b.name)}}catch(CD){_.e(CD)}finally{_.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var x,w={},k={},C={},S={},T={},E=[],A=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new Ph("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in T||(T[o.id]=Object.keys(T).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,h=0;h<l;h++)e(c.inputTensors[h],a,i,c.inboundLayers[h],c.nodeIndices[h],c.tensorIndices[h]);for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);E.push(c)}},M=[],I=[],N=_createForOfIteratorHelper(r.outputs);try{for(N.s();!(x=N.n()).done;){A(x.value,M,I)}}catch(CD){N.e(CD)}finally{N.f()}var R,D=_createForOfIteratorHelper(E.slice().reverse());try{for(D.s();!(R=D.n()).done;){var O=R.value;k[O.id]=O,O.id in w||(w[O.id]=0);var L=w[O.id];L=Math.max(L,null==C[O.outboundLayer.id]?0:C[O.outboundLayer.id]),C[O.outboundLayer.id]=L,S[O.outboundLayer.id]=O.outboundLayer,w[O.id]=L;for(var F=0;F<O.inboundLayers.length;F++){var P=O.inboundLayers[F].inboundNodes[O.nodeIndices[F]];w[P.id]=Math.max(L+1,null==w[P.id]?0:w[P.id]),k[P.id]=P}}}catch(CD){D.e(CD)}finally{D.f()}var z={};for(var B in w){var U=w[B];U in z||(z[U]=[]),z[U].push(k[B])}var V={};for(var W in C){var G=C[W];G in V||(V[G]=[]),V[G].push(S[W])}var H=Object.keys(V).map((function(e){return parseInt(e,10)})).sort(Jh);r.layers=[];var j,q=_createForOfIteratorHelper(H);try{for(q.s();!(j=q.n()).done;){var K=V[j.value];K.sort((function(e,t){var n=T[e.id],r=T[t.id];return n<r?-1:n>r?1:0}));var X,Z=_createForOfIteratorHelper(K);try{for(Z.s();!(X=Z.n()).done;){var Y=X.value;Y instanceof n&&r.internalContainerRefs.push(Y),r.layers.push(Y)}}catch(CD){Z.e(CD)}finally{Z.f()}}}catch(CD){q.e(CD)}finally{q.f()}r.layersByDepth=V,H=Object.keys(z).map((function(e){return parseInt(e,10)})).sort(Jh);var J,$=r.inputs.slice(),Q=[],ee=_createForOfIteratorHelper(H);try{for(ee.s();!(J=ee.n()).done;){var te,ne=_createForOfIteratorHelper(z[J.value]);try{for(ne.s();!(te=ne.n()).done;){var re=te.value,ae=re.outboundLayer;if(null!=ae){var ie,oe=_createForOfIteratorHelper(re.inputTensors);try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;if(-1===$.indexOf(se))throw new Ph("Graph disconnected: cannot obtain value for tensor ".concat(se)+' at layer "'.concat(ae.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(Q))}}catch(CD){oe.e(CD)}finally{oe.f()}var ue,ce=_createForOfIteratorHelper(re.outputTensors);try{for(ce.s();!(ue=ce.n()).done;){var le=ue.value;$.push(le)}}catch(CD){ce.e(CD)}finally{ce.f()}Q.push(ae.name)}}}catch(CD){ne.e(CD)}finally{ne.f()}}}catch(CD){ee.e(CD)}finally{ee.f()}r.nodesByDepth=z;var he,fe=r.layers.map((function(e){return e.name})),de=_createForOfIteratorHelper(fe);try{var pe=function(){var e=he.value,t=fe.filter((function(t){return t===e})).length;if(1!==t)throw new Ph('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(fe))};for(de.s();!(he=de.n()).done;)pe()}catch(CD){de.e(CD)}finally{de.f()}return r.outboundNodes=[],r.inboundNodes=[],new ep({outboundLayer:_assertThisInitialized(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,_possibleConstructorReturn(r)}return _createClass(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){var t,n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(CD){n.e(CD)}finally{n.f()}var a,i=_createForOfIteratorHelper(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(CD){i.e(CD)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new zh("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(CD){n.e(CD)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.nonTrainableWeights))}}catch(CD){n.e(CD)}finally{n.f()}if(!this.trainable){var a,i=[],o=_createForOfIteratorHelper(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,_toConsumableArray(s.trainableWeights))}}catch(CD){o.e(CD)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=_createForOfIteratorHelper(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new zh("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(CD){u.e(CD)}finally{u.f()}}}catch(CD){i.e(CD)}finally{i.f()}var l=[];for(var h in e){var f=h;if(null==r[h]){var d=h.split("/");f=d.slice(0,-2).concat([d[d.length-1]]).join("/")}if(null!=r[f])l.push([r[f],e[h]]);else if(n)throw new zh("Provided weight data has no target variable: ".concat(h));delete r[f]}if(n){var p=[];for(var m in r)p.push(m);if(p.length>0)throw new zh("".concat(p.length," of ").concat(a," weights are not set: ")+"".concat(p))}Zd(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers 3.1.0",t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function e(t,n){if(null==t)return null;if("string"==typeof t)return qh(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var r=[],a=t.length,i=0;i<a;++i){var o=t[i];Wp(n,i,o)?r.push(o):r.push(e(o,n))}return r}for(var s={},u=0,c=Object.keys(t);u<c.length;u++){var l=c[u],h=t[l];s[qh(l)]="name"!==l&&"className"!==l||"string"!=typeof h?e(h,l):h}return s}(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return ma((function(){e=jh(e);for(var r=new Hp,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Kp(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return ma((function(){var r;return e=jh(e),r=null==t?Vh(null,e.length):jh(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Gd(e);if(t.length!==this.inputLayers.length)throw new zh("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++)n[this.inputLayers[r].name+"_0_0"]=t[r];var a=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Jh);if(a.length>1){var i,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=_createForOfIteratorHelper(this.nodesByDepth[u]);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=l.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var f=[],d=0;d<l.inboundLayers.length;d++)f.push(n["".concat(l.inboundLayers[d].name,"_").concat(l.nodeIndices[d],"_").concat(l.tensorIndices[d])]);for(var p=Gd(h.computeOutputShape(Hh(f))),m=h.inboundNodes.indexOf(l),v=0;v<p.length;v++)n["".concat(h.name,"_").concat(m,"_").concat(v)]=p[v]}}}catch(CD){c.e(CD)}finally{c.f()}}}catch(CD){o.e(CD)}finally{o.f()}}for(var g=[],y=[],_=0;_<this.outputLayers.length;_++)y.push("".concat(this.outputLayers[_].name,"_").concat(this.outputLayersNodeIndices[_],"_").concat(this.outputLayersTensorIndices[_]));for(var b=0;b<y.length;b++){var x=y[b];Wh(x in n),g.push(n[x])}return Hh(g)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Vh(null,e.length));for(var n={},r=0;r<this.inputs.length;++r)n[this.inputs[r].id]=[e[r],t[r]];var a,i=_createForOfIteratorHelper(Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Jh));try{for(i.s();!(a=i.n()).done;){var o,s=a.value,u=_createForOfIteratorHelper(this.nodesByDepth[s]);try{for(u.s();!(o=u.n()).done;){var c,l=o.value,h=l.outboundLayer,f=l.inputTensors,d=l.outputTensors,p=new Array,m=_createForOfIteratorHelper(f);try{for(m.s();!(c=m.n()).done;){var v=c.value;v.id in n&&p.push(n[v.id])}}catch(CD){m.e(CD)}finally{m.f()}if(p.length===f.length){var g=void 0,y=void 0,_=void 0,b=void 0,x={};if(null!=l.callArgs&&(x=l.callArgs),1===p.length){var w=_slicedToArray(p[0],2),k=w[0],C=w[1];null==x.mask&&(x.mask=C),_=jh(h.call(k,x)),b=jh(h.computeMask(k,C)),g=[k],y=[C]}else g=p.map((function(e){return e[0]})),y=p.map((function(e){return e[1]})),null==x.mask&&(x.mask=y),_=jh(h.call(g,x)),b=jh(h.computeMask(g,y));if(h.activityRegularizer)throw new Bh("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var S=0;S<d.length;++S)n[d[S].id]=[_[S],b[S]]}}}catch(CD){u.e(CD)}finally{u.f()}}}catch(CD){i.e(CD)}finally{i.f()}var T,E=[],A=[],M=[],I=_createForOfIteratorHelper(this.outputs);try{for(I.s();!(T=I.n()).done;){var N=T.value;Wh(N.id in n,"Could not compute output ".concat(N.name," : ").concat(N.id));var R=_slicedToArray(n[N.id],2),D=R[0],O=R[1];M.push(D.shape),E.push(D),A.push(O)}}catch(CD){I.e(CD)}finally{I.f()}return[E,A,M]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(CD){i.e(CD)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new zh("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new zh("Provide either a layer name or layer index");var n,r=_createForOfIteratorHelper(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(CD){r.e(CD)}finally{r.f()}throw new zh("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return ma((function(){var t,r=[],a=_createForOfIteratorHelper(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,_toConsumableArray(i.calculateLosses()))}}catch(CD){a.e(CD)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var h=o.inboundNodes[l],f=n.nodeKey(o,l),d={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),d=h.callArgs}catch(CD){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(h.inboundLayers.length>0){for(var p=[],m=0;m<h.inboundLayers.length;m++){var v=h.inboundLayers[m],g=h.tensorIndices[m],y=r[n.nodeKey(v,h.nodeIndices[m])];null==y&&(y=0),p.push([v.name,y,g,d])}c.push(p)}}}var _={};_.name=o.name,_.className=s,_.config=u,_.inboundNodes=c,a.push(_)}}catch(CD){i.e(CD)}finally{i.f()}t.layers=a;for(var b=[],x=0;x<this.inputLayers.length;x++){var w=this.inputLayers[x],k=n.nodeKey(w,this.inputLayersNodeIndices[x]);if(this.containerNodes.has(k)){var C=r[k];null==C&&(C=0),b.push([w.name,C,this.inputLayersTensorIndices[x]])}}t.inputLayers=b;for(var S=[],T=0;T<this.outputLayers.length;T++){var E=this.outputLayers[T],A=n.nodeKey(E,this.outputLayersNodeIndices[T]);if(this.containerNodes.has(A)){var M=r[A];null==M&&(M=0),S.push([E.name,M,this.outputLayersTensorIndices[T]])}}return t.outputLayers=S,t}},{key:"stateful",get:function(){if(this._stateful)throw new zh("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=_createForOfIteratorHelper(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(CD){t.e(CD)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;ma((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=_createForOfIteratorHelper(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],h=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void i(e,t);o.push(f.inboundNodes[l].outputTensors[h])}}catch(CD){s.e(CD)}finally{s.f()}o.length>0&&e.apply(Hh(o),n)}function s(e){var a=e.name,o=vp(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new zh("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,h=_createForOfIteratorHelper(l);try{for(h.s();!(u=h.n()).done;){var f=u.value;s(f)}}catch(CD){h.e(CD)}finally{h.f()}for(;!Qh(a);){var d,p=_createForOfIteratorHelper(l);try{for(p.s();!(d=p.n()).done;){var m=d.value,v=r[m.name];if(v.name in a){var g=a[v.name];delete a[v.name];var y,_=_createForOfIteratorHelper(g);try{for(_.s();!(y=_.n()).done;){var b=y.value;o(v,b)}}catch(CD){_.e(CD)}finally{_.f()}}}}catch(CD){p.e(CD)}finally{p.f()}}var x,w=[],k=[],C=t.inputLayers,S=_createForOfIteratorHelper(C);try{for(S.s();!(x=S.n()).done;){var T=x.value,E=T[0],A=T[1],M=T[2];Wh(E in r),w.push(r[E].inboundNodes[A].outputTensors[M])}}catch(CD){S.e(CD)}finally{S.f()}var I,N=t.outputLayers,R=_createForOfIteratorHelper(N);try{for(R.s();!(I=R.n()).done;){var D=I.value,O=D[0],L=D[1],F=D[2];Wh(O in r),k.push(r[O].inboundNodes[L].outputTensors[F])}}catch(CD){R.e(CD)}finally{R.f()}return new e({inputs:w,outputs:k,name:c})}}]),n}(np));pm.className="Model",f.registerClass(pm);var mm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(pm);function vm(e,t){return gm.apply(this,arguments)}function gm(){return(gm=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,s,u,c,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=(t=t).modelTopology).model_config&&(r=r.model_config),a=vp(Gp(r),n),null==t.weightsManifest){e.next=12;break}return e.next=7,o.loadWeights(t.weightsManifest,t.pathPrefix,a.weights.map((function(e){return e.originalName})));case 7:i=e.sent,s={},u=_createForOfIteratorHelper(a.weights);try{for(u.s();!(c=u.n()).done;)l=c.value,s[l.originalName]=i[l.originalName]}catch(CD){u.e(CD)}finally{u.f()}a.loadWeights(s),va(i);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}mm.className="Functional",f.registerClass(mm);var ym=function(e){_inherits(s,e);var t,n,a,i,o=_createSuper(s);function s(e){var t;if(_classCallCheck(this,s),e=e||{},(t=o.call(this,{inputs:[],outputs:[]})).trainable=!0,t.built=!1,t.name=null!=e.name?e.name:Vd("sequential_"),null!=e.layers){var n,r=_createForOfIteratorHelper(e.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a)}}catch(CD){r.e(CD)}finally{r.f()}}return _possibleConstructorReturn(t)}return _createClass(s,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new zh("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,n=e instanceof s||e instanceof pm;if(n){if(1!==(t=e).outputs.length)throw new zh("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new zh("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new zh("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var r=ap({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new zh("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new zh("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];var a=n.inboundNodes[r];if(0===a.inboundLayers.length)return a.inputTensors;for(var i=[],o=0;o<a.inboundLayers.length;o++){var s,u=_createForOfIteratorHelper(e(a.inputTensors[o],a.inboundLayers[o],a.nodeIndices[o]));try{for(u.s();!(s=u.n()).done;){var c=s.value;-1===i.indexOf(c)&&i.push(c)}}catch(CD){u.e(CD)}finally{u.f()}}return i}(this.outputs[0])}this.inboundNodes=[],new ep({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Vh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(jd(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new pm({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),_get2(_getPrototypeOf(s.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),_get2(_getPrototypeOf(s.prototype),"summary",this).call(this,e,t,n)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Ph("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ph("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Ph("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fitDataset",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ph("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"trainOnBatch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"stopTraining",get:function(){if(null==this.model)throw new zh("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new zh("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(CD){n.e(CD)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new zh("Legacy serialization format not supported yet.");n=t}else r.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),n=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof s))throw new Bh("Sequential.fromConfig called on non-Sequential input: ".concat(o));var u,c=_createForOfIteratorHelper(n);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=vp(l,void 0,a);a&&h.setFastWeightInitDuringBuild(!0),o.add(h)}}catch(CD){c.e(CD)}finally{c.f()}return o}}]),s}(pm);function _m(e){return new pm(e)}function bm(e){return new ym(e)}function xm(e,t){return null==t&&(t={}),(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=9;break}if(0!==(r=o.getLoadHandlers(t,n)).length){e.next=6;break}r.push(o.browserHTTPRequest(t,n)),e.next=8;break;case 6:if(!(r.length>1)){e.next=8;break}throw new zh("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:return e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,s,u,c,l,h,f,d;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=2;break}throw new zh("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,t.load();case 4:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),s=null==r.strict||r.strict,u=null!=a.weightData&&null!=a.weightSpecs&&s,c=vp(Gp(i),void 0,u),null!=(l=a.trainingConfig)&&c.loadTrainingConfig(l),null!=a.userDefinedMetadata&&c.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=19;break}if(null!=a.weightSpecs){e.next=11;break}throw new zh("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 11:if(h=function(e,t){var n=o.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}(a.weightData,a.weightSpecs),f=h.modelWeights,d=h.optimizerWeights,c.loadWeights(f,s),e.t0=null!=c.optimizer&&d.length>0,!e.t0){e.next=17;break}return e.next=17,c.optimizer.setWeights(d);case 17:va(f),va(d.map((function(e){return e.tensor})));case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(t,0,n));case 10:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})(e,t);var n}function wm(e){return ap(e)}function km(e,t){pp.registerCallbackConstructor(e,t)}ym.className="Sequential",f.registerClass(ym);var Cm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getConfig",value:function(){return{}}}]),n}(f.Serializable),Sm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new Bh("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return go(e)}(e,t)}}]),n}(Cm);Sm.className="elu",f.registerClass(Sm);var Tm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Zs(e)}}]),n}(Cm);Tm.className="selu",f.registerClass(Tm);var Em=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Us(e)}}]),n}(Cm);Em.className="relu",f.registerClass(Em);var Am=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return ma((function(){return cs(6,Us(e))}))}}]),n}(Cm);Am.className="relu6",f.registerClass(Am);var Mm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return e}}]),n}(Cm);Mm.className="linear",f.registerClass(Mm);var Im=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Oi(e)}}]),n}(Cm);Im.className="sigmoid",f.registerClass(Im);var Nm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return function(e){return ma((function(){var t=Aa(.5,Na(.2,e));return qi(t,0,1)}))}(e)}}]),n}(Cm);Nm.className="hardSigmoid",f.registerClass(Nm);var Rm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Uo(e)}}]),n}(Cm);Rm.className="softplus",f.registerClass(Rm);var Dm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return function(e){return ma((function(){return Ia(e,Ya(e).add(1))}))}(e)}}]),n}(Cm);Dm.className="softsign",f.registerClass(Dm);var Om=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return Fi(e)}}]),n}(Cm);Om.className="tanh",f.registerClass(Om);var Lm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return iu(e,t)}}]),n}(Cm);Lm.className="softmax",f.registerClass(Lm);var Fm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Ho(e,t)}}]),n}(Cm);Fm.className="logSoftmax",f.registerClass(Fm);var Pm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ma((function(){return Oi(e.mul(t)).mul(e)}))}}]),n}(Cm);function zm(e){return e.getClassName()}function Bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yh(e,f.SerializationMap.getMap().classNameMap,t,"activation")}function Um(e){if(null==e)return Bm({className:"linear",config:{}});if("string"==typeof e){var t={};return t.className=e,t.config={},Bm(t)}return e instanceof Cm?e:Bm(e)}function Vm(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Pm.className="swish",f.registerClass(Pm);var Wm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(f.Serializable),Gm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this),Vm(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return ma((function(){var n=vs([1]);return t.hasL1&&(n=Aa(n,Go(Na(t.l1,Ya(e))))),t.hasL2&&(n=Aa(n,Go(Na(t.l2,Yf(e))))),n.asScalar()}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(Wm);Gm.className="L1L2",f.registerClass(Gm);var Hm={l1l2:"L1L2"};function jm(e){return Zh(e)}function qm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yh(e,f.SerializationMap.getMap().classNameMap,t,"regularizer")}function Km(e){return null==e?null:"string"==typeof e?qm({className:e in Hm?Hm[e]:e,config:{}}):e instanceof Wm?e:qm(e)}var Xm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return _createClass(n,[{key:"call",value:function(e,t){e=Hd(e);var n=Us(e);return null!=this.maxValue&&(n=qi(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Xm.className="ReLU",f.registerClass(Xm);var Zm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return _createClass(n,[{key:"call",value:function(e,t){var n=Hd(e);return Ro(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Zm.className="LeakyReLU",f.registerClass(Zm);var Ym=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=wd(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Km(e.alphaRegularizer),r.alphaConstraint=pf(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new zh("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return _possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=jd(e)).slice(1);if(null!=this.sharedAxes){var n,r=_createForOfIteratorHelper(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(CD){r.e(CD)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new Jd({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Hd(e),Es(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:xd(this.alphaInitializer),alphaRegularizer:jm(this.alphaRegularizer),alphaConstraint:ff(this.alphaConstraint),sharedAxes:this.sharedAxes},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Ym.className="PReLU",f.registerClass(Ym);var Jm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new Bh("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,_possibleConstructorReturn(r)}return _createClass(n,[{key:"call",value:function(e,t){var n=Hd(e);return go(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Jm.className="ELU",f.registerClass(Jm);var $m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return _createClass(n,[{key:"call",value:function(e,t){var n=Hd(e);return n.mul(Bf(n.greater(this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);$m.className="ThresholdedReLU",f.registerClass($m);var Qm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Lm).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return _createClass(n,[{key:"call",value:function(e,t){var n=Hd(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);function ev(e,t,n){if("number"==typeof e)return Vh(e,t);if(e.length!==t)throw new zh("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new zh("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function tv(e,t,n,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return null==e?e:(a="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((a+r-1)/r))}function nv(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Pf([n-t,0]);else{if("same"!==r)throw new zh("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function rv(e,t){return ma((function(){return Sf(t),"channelsFirst"===t?xr(e,[0,2,3,1]):e}))}function av(e,t){return ma((function(){return Sf(t),"channelsFirst"===t?xr(e,[0,2,3,4,1]):e}))}function iv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return ma((function(){if(null==i&&(i="channelsLast"),Sf(i),3!==e.rank&&4!==e.rank)throw new zh("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new zh("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=rv(e,i);if("causal"===a)throw new Bh("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=p.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=xr(u,[0,3,1,2])),u}))}Qm.className="Softmax",f.registerClass(Qm);var ov=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,nf(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new Bh("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=ev(r.kernelSize,e,"kernelSize"),a.strides=ev(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Tf(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Sf(a.dataFormat),a.activation=Um(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=wd(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=pf(r.biasConstraint),a.biasRegularizer=Km(r.biasRegularizer),a.activityRegularizer=Km(r.activityRegularizer),a.dilationRate=ev(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new zh("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new zh("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new zh("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return _possibleConstructorReturn(a)}return _createClass(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:zm(this.activation),useBias:this.useBias,biasInitializer:xd(this.biasInitializer),biasRegularizer:jm(this.biasRegularizer),activityRegularizer:jm(this.activityRegularizer),biasConstraint:ff(this.biasConstraint)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Wh("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!tf(e.kernelSize,"number",1,3))throw new zh("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(np),sv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,nf(a.filters,"filters"),a.kernelInitializer=wd(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=pf(r.kernelConstraint),a.kernelRegularizer=Km(r.kernelRegularizer),a}return _createClass(n,[{key:"build",value:function(e){e=jd(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new zh("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:_defineProperty({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var t;e=Hd(e);var r=null==n.bias?null:n.bias.read(),a=rf(n.activation.getClassName());if(null!=a&&2===n.rank)t=iv(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return ma((function(){if(null==i&&(i="channelsLast"),Sf(i),3!==e.shape.length)throw new zh("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new zh("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new zh("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=xr(e,[0,2,1])),"causal"===a)throw new Bh("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=$i(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=$f(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=iv(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new Bh("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return ma((function(){if(null==i&&(i="channelsLast"),Sf(i),4!==e.rank&&5!==e.rank)throw new zh("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new zh("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=av(e,i);if("causal"===a)throw new Bh("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=to(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=$f(s,n)),"channelsFirst"===i&&(s=xr(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=jd(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=tv(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:xd(this.kernelInitializer),kernelRegularizer:jm(this.kernelRegularizer),kernelConstraint:ff(this.kernelConstraint)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new zh("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(ov),uv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!tf(e.kernelSize,"number",1,2))throw new zh("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(sv);uv.className="Conv2D",f.registerClass(uv);var cv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new zh("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(sv);cv.className="Conv3D",f.registerClass(cv);var lv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[new Jd({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new zh("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return _possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){if(4!==(e=jd(e)).length)throw new zh("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new zh("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jd({ndim:4,axes:_defineProperty({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var t=Hd(e);if(4!==t.shape.length)throw new zh("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape;"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var o=i[a],s=n.kernelSize[1],u=n.strides[1],c=[i[0],nv(i[r],n.strides[0],n.kernelSize[0],n.padding),nv(o,u,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=xr(t,[0,2,3,1]));var l=eo(t,n.kernel.read(),c,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(l=xr(l,[0,3,1,2])),null!=n.bias&&(l=$f(l,n.bias.read(),n.dataFormat)),null!=n.activation&&(l=n.activation.apply(l)),l}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=jd(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=nv(a[n],s,i,this.padding),a[r]=nv(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(uv);lv.className="Conv2DTranspose",f.registerClass(lv);var hv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new zh("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new zh("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new zh("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=wd(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Km(r.depthwiseRegularizer),a.depthwiseConstraint=pf(r.depthwiseConstraint),a.pointwiseInitializer=wd(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Km(r.pointwiseRegularizer),a.pointwiseConstraint=pf(r.pointwiseConstraint),_possibleConstructorReturn(a)}return _createClass(n,[{key:"build",value:function(e){if((e=jd(e)).length<this.rank+2)throw new zh("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new zh("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new Jd({ndim:this.rank+2,axes:_defineProperty({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var t;if(e=Hd(e),1===n.rank)throw new Bh("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=xr(e,[0,2,3,1])),t=Ys(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=$f(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=xr(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=xd(this.depthwiseInitializer),e.pointwiseInitializer=xd(this.pointwiseInitializer),e.depthwiseRegularizer=jm(this.depthwiseRegularizer),e.pointwiseRegularizer=jm(this.pointwiseRegularizer),e.depthwiseConstraint=ff(this.depthwiseConstraint),e.pointwiseConstraint=ff(this.pointwiseConstraint),e}}]),n}(sv);hv.className="SeparableConv";var fv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,2,e)}return _createClass(n)}(hv);fv.className="SeparableConv2D",f.registerClass(fv);var dv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!tf(e.kernelSize,"number",1,1))throw new zh("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(sv);dv.className="Conv1D",f.registerClass(dv);var pv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(e=Hd(e),"channelsLast"===n.dataFormat){var t=Gf(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Gf(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Gf(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Gf(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);pv.className="Cropping2D",f.registerClass(pv);var mv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Sf(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,ef(bf,"InterpolationFormat",r.interpolation),r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){var t=Hd(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=xr(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?t.resizeNearestNeighbor([a,i]):t.resizeBilinear([a,i]);return xr(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?t.resizeNearestNeighbor([s,u]):t.resizeBilinear([s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);mv.className="UpSampling2D",f.registerClass(mv);var vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=wd(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=pf(e.depthwiseConstraint),r.depthwiseRegularizer=Km(e.depthwiseRegularizer),r}return _createClass(n,[{key:"build",value:function(e){if((e=jd(e)).length<4)throw new zh("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new zh("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return ma((function(){null==a&&(a="channelsLast"),Sf(a);var o=rv(e,a);if(4!==e.rank)throw new zh("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new zh("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=co(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=xr(o,[0,3,1,2])),o}))}(e=Hd(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=$f(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=jd(e);var t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=tv("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=tv(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,a]:[e[0],r,a,n]}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=xd(this.depthwiseInitializer),e.depthwiseRegularizer=jm(this.depthwiseRegularizer),e.depthwiseConstraint=ff(this.depthwiseRegularizer),e}}]),n}(ov);function gv(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new zh("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function yv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return ma((function(){var u=t.shape.length;if(u<3)throw new zh("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(zf(2,u));if(t=xr(t,c),null!=i)throw new Bh("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===u-1&&(a=bo(a,-1)),a=xr(a,c)),r&&(t=Ws(t,0),null!=a&&(a=Ws(a,0)));var l,h,f,d=[],p=n,m=t.shape[0],v=Tu(t);null!=a&&(h=Tu(a));for(var g=function(t){var n=v[t],r=ma((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var i=ma((function(){var e=h[t],n=ys(e).sub(e);return{output:r[0].mul(e).add(p[0].mul(n)),newStates:p.map((function(t,a){return r[1][a].mul(e).add(t.mul(n))}))}}));l=i.output,p=i.newStates}s&&d.push(l)},y=0;y<m;++y)g(y);return s&&(f=du(d,1)),[l,f,p]}))}vv.className="DepthwiseConv2D",f.registerClass(vv);var _v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a;if(_classCallCheck(this,n),r=t.call(this,e),null==e.cell)throw new zh("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new Ev({cells:e.cell}):e.cell).stateSize)throw new zh("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Jd({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],_possibleConstructorReturn(r)}return _createClass(n,[{key:"getStates",value:function(){return null==this.states_?zf(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Wd(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(CD){o.e(CD)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return ma((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new Bh("Constants support is not implemented in RNN yet.");Wd(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Jd({shape:[t,null].concat(_toConsumableArray(n))});var a,i=[e[0]].concat(e.slice(2));if(this.cell.build(i),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),a))throw new zh("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map((function(e){return new Jd({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ma((function(){if(!t.stateful)throw new Fh("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape[0];if(null==a)throw new zh("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)t.states_=Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return vs([a,e])})):[vs([a,t.cell.stateSize])];else if(null==e)va(t.states_),null!=t.keptStates&&(va(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return vs([a,e])})):t.states_[0]=vs([a,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new zh("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):va(t.states_);for(var i=0;i<t.states_.length;++i){var o=e[i],s=Array.isArray(t.cell.stateSize)?t.cell.stateSize[i]:t.cell.stateSize,u=[a,s];if(!r.arraysEqual(o.shape,u))throw new zh("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(o.shape));t.states_[i]=o}}t.states_=t.states_.map((function(e){return ga(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=gv(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=_createForOfIteratorHelper(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new Jd({shape:l.shape}))}}catch(CD){c.e(CD)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof $d){var h=[e].concat(o),f=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=f;var p=_get2(_getPrototypeOf(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=d,p}return _get2(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ma((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=Hd(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new zh("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=yv((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],h=u[2];n.stateful&&n.resetStates(h,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(h):f}))}},{key:"getInitialState",value:function(e){var t=this;return ma((function(){var n=vs(e.shape);return n=Uf(n=Go(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?qf(n,[1,e]):n})):t.cell.stateSize>1?[qf(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){_get2(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=vp(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(np);_v.className="RNN",f.registerClass(_v);var bv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(np),xv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,nf(r.units,"units"),r.activation=Um(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wd(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wd(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wd(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Km(e.kernelRegularizer),r.recurrentRegularizer=Km(e.recurrentRegularizer),r.biasRegularizer=Km(e.biasRegularizer),r.kernelConstraint=pf(e.kernelConstraint),r.recurrentConstraint=pf(e.recurrentConstraint),r.biasConstraint=pf(e.biasConstraint),r.dropout=Ff([1,Pf([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ff([1,Pf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return _createClass(n,[{key:"build",value:function(e){e=jd(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(2!==(e=e).length)throw new zh("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Av({ones:function(){return ys(e)},rate:n.dropout,training:i})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Av({ones:function(){return ys(r)},rate:n.recurrentDropout,training:i}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=Xf(null!=o?Na(e,o):e,n.kernel.read()),null!=n.bias&&(a=$f(a,n.bias.read())),null!=s&&(r=Na(r,s));var u=Aa(a,Xf(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:zm(this.activation),useBias:this.useBias,kernelInitializer:xd(this.kernelInitializer),recurrentInitializer:xd(this.recurrentInitializer),biasInitializer:xd(this.biasInitializer),kernelRegularizer:jm(this.kernelRegularizer),recurrentRegularizer:jm(this.recurrentRegularizer),biasRegularizer:jm(this.biasRegularizer),activityRegularizer:jm(this.activityRegularizer),kernelConstraint:ff(this.kernelConstraint),recurrentConstraint:ff(this.recurrentConstraint),biasConstraint:ff(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(bv);xv.className="SimpleRNNCell",f.registerClass(xv);var wv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),e.cell=new xv(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return ma((function(){return null!=r.cell.dropoutMask&&(va(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(va(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get2(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(_v);wv.className="SimpleRNN",f.registerClass(wv);var kv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new zh("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,nf(r.units,"units"),r.activation=Um(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Um(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wd(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wd(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wd(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Km(e.kernelRegularizer),r.recurrentRegularizer=Km(e.recurrentRegularizer),r.biasRegularizer=Km(e.biasRegularizer),r.kernelConstraint=pf(e.kernelConstraint),r.recurrentConstraint=pf(e.recurrentConstraint),r.biasConstraint=pf(e.biasConstraint),r.dropout=Ff([1,Pf([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ff([1,Pf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){e=jd(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(2!==(e=e).length)throw new zh("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Av({ones:function(){return ys(e)},rate:n.dropout,training:r,count:3})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Av({ones:function(){return ys(a)},rate:n.recurrentDropout,training:r,count:3}));var i,o,s,u=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Na(e,n.dropoutMask[0]));var c=Xf(e,n.kernel.read());n.useBias&&(c=$f(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Na(a,u[0]));var l=n.recurrentKernel.read(),h=_slicedToArray(cu(l,[2*n.units,n.units],l.rank-1),2),f=h[0],d=h[1],p=Xf(a,f),m=_slicedToArray(cu(c,3,c.rank-1),3),v=m[0],g=m[1],y=m[2],_=_slicedToArray(cu(p,2,p.rank-1),2),b=_[0],x=_[1];i=n.recurrentActivation.apply(Aa(v,b)),o=n.recurrentActivation.apply(Aa(g,x));var w=Xf(Na(o,a),d);s=n.activation.apply(Aa(y,w));var k=Aa(Na(i,a),Na(Aa(1,Bo(i)),s));return[k,k]}))}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:zm(this.activation),recurrentActivation:zm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xd(this.kernelInitializer),recurrentInitializer:xd(this.recurrentInitializer),biasInitializer:xd(this.biasInitializer),kernelRegularizer:jm(this.kernelRegularizer),recurrentRegularizer:jm(this.recurrentRegularizer),biasRegularizer:jm(this.biasRegularizer),activityRegularizer:jm(this.activityRegularizer),kernelConstraint:ff(this.kernelConstraint),recurrentConstraint:ff(this.recurrentConstraint),biasConstraint:ff(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(bv);kv.className="GRUCell",f.registerClass(kv);var Cv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new kv(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return ma((function(){return null!=r.cell.dropoutMask&&(va(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(va(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get2(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(_v);Cv.className="GRU",f.registerClass(Cv);var Sv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,nf(r.units,"units"),r.activation=Um(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Um(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wd(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wd(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wd(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Km(e.kernelRegularizer),r.recurrentRegularizer=Km(e.recurrentRegularizer),r.biasRegularizer=Km(e.biasRegularizer),r.kernelConstraint=pf(e.kernelConstraint),r.recurrentConstraint=pf(e.recurrentConstraint),r.biasConstraint=pf(e.biasConstraint),r.dropout=Ff([1,Pf([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ff([1,Pf([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return _createClass(n,[{key:"build",value:function(e){var t,n;if(e=jd(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var r=this.biasInitializer,a=this.units;n=new((t=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){var n=r.apply([a]),i=(new id).apply([a]),o=r.apply([2*a]);return jf(jf(n,i),o)}}]),n}(rd)).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new zh("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Av({ones:function(){return ys(e)},rate:n.dropout,training:r,count:4})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Av({ones:function(){return ys(a)},rate:n.recurrentDropout,training:r,count:4}));var o,s,u,c,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Na(e,n.dropoutMask[0]));var h=Xf(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Na(a,l[0])),h=Aa(h,Xf(a,n.recurrentKernel.read())),n.useBias&&(h=$f(h,n.bias.read()));var f=_slicedToArray(cu(h,4,h.rank-1),4),d=f[0],p=f[1],m=f[2],v=f[3];o=n.recurrentActivation.apply(d),s=n.recurrentActivation.apply(p),u=Aa(Na(s,i),Na(o,n.activation.apply(m))),c=n.recurrentActivation.apply(v);var g=Na(c,n.activation.apply(u));return[g,g,u]}))}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:zm(this.activation),recurrentActivation:zm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xd(this.kernelInitializer),recurrentInitializer:xd(this.recurrentInitializer),biasInitializer:xd(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jm(this.kernelRegularizer),recurrentRegularizer:jm(this.recurrentRegularizer),biasRegularizer:jm(this.biasRegularizer),activityRegularizer:jm(this.activityRegularizer),kernelConstraint:ff(this.kernelConstraint),recurrentConstraint:ff(this.recurrentConstraint),biasConstraint:ff(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(bv);Sv.className="LSTMCell",f.registerClass(Sv);var Tv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Sv(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return ma((function(){return null!=r.cell.dropoutMask&&(va(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(va(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get2(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(_v);Tv.className="LSTM",f.registerClass(Tv);var Ev=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).cells=e.cells,r}return _createClass(n,[{key:"stateSize",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,_toConsumableArray(r.stateSize)):t.push(r.stateSize)}}catch(CD){n.e(CD)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return ma((function(){var r,a=(e=e).slice(1),i=[],o=_createForOfIteratorHelper(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(CD){o.e(CD)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var h=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=h.call(u,t),c.push(u.slice(1))}a=[];var f,d=_createForOfIteratorHelper(c.slice().reverse());try{for(d.s();!(f=d.n()).done;){var p,m=f.value;(p=a).push.apply(p,_toConsumableArray(m))}}catch(CD){d.e(CD)}finally{d.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;Wd(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){Mf("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t=this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}));return Object.assign({},e,{cells:t})}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.trainableWeights))}}catch(CD){n.e(CD)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.nonTrainableWeights))}}catch(CD){n.e(CD)}finally{n.f()}if(!this.trainable){var a,i=[],o=_createForOfIteratorHelper(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,_toConsumableArray(s.trainableWeights))}}catch(CD){o.e(CD)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.weights))}}catch(CD){n.e(CD)}finally{n.f()}return Xd(t)}},{key:"setWeights",value:function(e){var t,n=[],r=_createForOfIteratorHelper(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=e.splice(a.weights.length),o=0;o<a.weights.length;++o)n.push([a.weights[o],i[o]])}catch(CD){r.e(CD)}finally{r.f()}Zd(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=_createForOfIteratorHelper(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(vp(o,r))}}catch(CD){i.e(CD)}finally{i.f()}return new e({cells:a})}}]),n}(bv);function Av(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=function(){return Qf(t(),n)},u=function(){return ed(s,t,a)};return!o||o<=1?ga(u().clone()):Array(o).fill(void 0).map(u).map((function(e){return ga(e.clone())}))}Ev.className="StackedRNNCells",f.registerClass(Ev);var Mv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),e.unroll)throw new Bh("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Bh("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Jd({ndim:5})],r}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return ma((function(){if(null!=r.cell.dropoutMask&&(va(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(va(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new zh("ConvRNN2D cell does not support constants");return _get2(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(_toConsumableArray(t.slice(2)))),this.returnState&&(t=[t].concat(_toConsumableArray(Array(2).fill([e[0]].concat(_toConsumableArray(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return ma((function(){var n=t.cell.stateSize,r=t.computeSingleOutputShape(e.shape),a=vs([r[0]].concat(_toConsumableArray(r.slice(2))));return Array.isArray(n)?Array(n.length).fill(a):[a]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ma((function(){if(!t.stateful)throw new Fh("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape,i=t.computeSingleOutputShape(a),o=[i[0]].concat(_toConsumableArray(i.slice(2)));if(null==a[0])throw new zh("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())t.states_=Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(){return vs(o)})):[vs(o)];else if(null==e)va(t.states_),null!=t.keptStates&&(va(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return vs(o)})):t.states_[0]=vs(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new zh("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):va(t.states_);for(var s=0;s<t.states_.length;++s){var u=e[s],c=o;if(!r.arraysEqual(u.shape,c))throw new zh("State ".concat(s," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(u.shape));t.states_[s]=u}}t.states_=t.states_.map((function(e){return ga(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?4:3],l=tv(e[u?3:2],a[0],i,o[0],s[0]),h=tv(c,a[1],i,o[1],s[1]);return[].concat(_toConsumableArray(e.slice(0,2)),_toConsumableArray(u?[r,l,h]:[l,h,r]))}}]),n}(_v);Mv.className="ConvRNN2D";var Iv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,nf(r.filters,"filters"),r.kernelSize=ev(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return nf(e,"kernelSize")})),r.strides=ev(o||1,2,"strides"),r.strides.forEach((function(e){return nf(e,"strides")})),r.padding=s||"valid",Tf(r.padding),r.dataFormat=u||"channelsLast",Sf(r.dataFormat),r.dilationRate=ev(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return nf(e,"dilationRate")})),r}return _createClass(n,[{key:"build",value:function(e){var t;e=jd(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new zh("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=this.kernelSize.concat([e[n],4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var o=this.biasInitializer,s=this.filters;i=new((t=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){return Hf([o.apply([s]),gs([s]),o.apply([2*s])])}}]),n}(rd)).className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(3!==e.length)throw new zh("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Av({ones:function(){return ys(a)},rate:n.dropout,training:r,count:4}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?Na(t[n],e):e},c=u(a,s,0),l=u(a,s,1),h=u(a,s,2),f=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Av({ones:function(){return ys(i)},rate:n.recurrentDropout,training:r,count:4}));var d=n.recurrentDropoutMask,p=u(i,d,0),m=u(i,d,1),v=u(i,d,2),g=u(i,d,3),y=_slicedToArray(cu(n.kernel.read(),4,3),4),_=y[0],b=y[1],x=y[2],w=y[3],k=_slicedToArray(n.useBias?cu(n.bias.read(),4):[null,null,null,null],4),C=k[0],S=k[1],T=k[2],E=k[3];c=n.inputConv(c,_,C,n.padding),l=n.inputConv(l,b,S,n.padding),h=n.inputConv(h,x,T,n.padding),f=n.inputConv(f,w,E,n.padding);var A=_slicedToArray(cu(n.recurrentKernel.read(),4,3),4),M=A[0],I=A[1],N=A[2],R=A[3];p=n.recurrentConv(p,M),m=n.recurrentConv(m,I),v=n.recurrentConv(v,N),g=n.recurrentConv(g,R);var D=n.recurrentActivation.apply(Aa(c,p)),O=n.recurrentActivation.apply(Aa(l,m)),L=Aa(Na(O,o),Na(D,n.activation.apply(Aa(h,v)))),F=Na(n.recurrentActivation.apply(Aa(f,g)),n.activation.apply(L));return[F,F,L]}))}},{key:"getConfig",value:function(){var e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),["units"]);return Object.assign({},e,{filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides})}},{key:"inputConv",value:function(e,t,n,r){var a=Ji(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?$f(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return Ji(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Sv);Iv.className="ConvLSTM2DCell",f.registerClass(Iv);var Nv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var r=new Iv(e);return t.call(this,Object.assign({},e,{cell:r}))}return _createClass(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Mv);Nv.className="ConvLSTM2D",f.registerClass(Nv);var Rv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return _createClass(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return ed((function(){return Qf(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return _get2(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(np);Rv.className="Dropout",f.registerClass(Rv);var Dv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return _createClass(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Rv);Dv.className="SpatialDropout1D",f.registerClass(Dv);var Ov=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,nf(r.units,"units"),r.activation=Um(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=wd(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=wd(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=pf(e.kernelConstraint),r.biasConstraint=pf(e.biasConstraint),r.kernelRegularizer=Km(e.kernelRegularizer),r.biasRegularizer=Km(e.biasRegularizer),r.activityRegularizer=Km(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=jd(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:_defineProperty({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=jd(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r,a=Hd(e),i=rf(n.activation.getClassName());return null!=i?r=Xf(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=Xf(a,n.kernel.read()),null!=n.bias&&(r=$f(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zm(this.activation),useBias:this.useBias,kernelInitializer:xd(this.kernelInitializer),biasInitializer:xd(this.biasInitializer),kernelRegularizer:jm(this.kernelRegularizer),biasRegularizer:jm(this.biasRegularizer),activityRegularizer:jm(this.activityRegularizer),kernelConstraint:ff(this.kernelConstraint),biasConstraint:ff(this.biasConstraint)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Ov.className="Dense",f.registerClass(Ov);var Lv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e=e||{})).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t,n=_createForOfIteratorHelper((e=jd(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new zh('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(CD){n.e(CD)}finally{n.f()}return[e[0],Of(e,1)]}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=r.transpose(a)}return function(e){if(e.rank<=1)throw new zh("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],Of(e.shape,1)];return e.reshape(t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Lv.className="Flatten",f.registerClass(Lv);var Fv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Um(e.activation),r}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:zm(this.activation)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Fv.className="Activation",f.registerClass(Fv);var Pv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){return e=Hd(e),t=e,r=n.n,ma((function(){if(2!==t.shape.length)throw new zh("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return qf(Uf(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Pv.className="RepeatVector",f.registerClass(Pv);var zv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return _createClass(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new zh("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=Of(e);if(null!==i){if(0===a||u%a!=0)throw new zh(n);r[i]=u/a}else if(u!==a)throw new zh(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);zv.className="Reshape",f.registerClass(zv);var Bv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;if(_classCallCheck(this,n),a=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var i=zf(1,e.dims.length+1);if(!r.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return a.dims=e.dims,a.dimsIncludingBatch=[0].concat(a.dims),a.inputSpec=[new Jd({ndim:a.dims.length+1})],_possibleConstructorReturn(a)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t=(e=jd(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return xr(Hd(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Bv.className="Permute",f.registerClass(Bv);var Uv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Hd(e);return ci(ms(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e),a=ci(ms(r,n.maskValue),-1,!0);return r.mul(a.asType(r.dtype))}))}}]),n}(np);Uv.className="Masking",f.registerClass(Uv);var Vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=null==e.inputLength?[a,null]:[a].concat(jh(e.inputLength))}return r.inputDim=e.inputDim,nf(r.inputDim,"inputDim"),r.outputDim=e.outputDim,nf(r.outputDim,"outputDim"),r.embeddingsInitializer=wd(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Km(e.embeddingsRegularizer),r.activityRegularizer=Km(e.activityRegularizer),r.embeddingsConstraint=pf(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return ma((function(){return n.maskZero?(e=Hd(e),ms(e,Oa(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=jd(e),null==this.inputLength)return[].concat(_toConsumableArray(e),[this.outputDim]);var t=jh(this.inputLength);if(t.length!==e.length-1)throw new zh('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new zh('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(_toConsumableArray(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);return"int32"!==r.dtype&&(r=Bf(r,"int32")),Zf(n.embeddings.read(),r.as1D()).reshape(jd(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:xd(this.embeddingsInitializer),embeddingsRegularizer:jm(this.embeddingsRegularizer),activityRegularizer:jm(this.activityRegularizer),embeddingsConstraint:ff(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);Vv.className="Embedding",f.registerClass(Vv);var Wv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return _createClass(n,[{key:"mergeFunction",value:function(e){throw new Bh}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new zh("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[jd(e)]),(e=e).length<2)throw new zh("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(CD){r.e(CD)}finally{r.f()}if((n=$h(n)).length>1)throw new zh("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));this.reshapeRequired=-1!==e.indexOf(null)||1!==$h(u).length}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=Pf(r),o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=Uf(s,1);t.push(s)}}catch(CD){o.e(CD)}finally{o.f()}return n.mergeFunction(t)}var l,h=!1,f=_createForOfIteratorHelper(e);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=d.rank;if(null==p){var m=d.shape,v=m[0],g=m.slice(1).concat([v]),y=d.reshape([v].concat(Of(m.slice(1))));y=(y=xr(y,[1,0])).reshape(g),t.push(y),h=!0}else if(p>1){var _=zf(1,p).concat([0]);t.push(xr(d,_)),h=!0}else t.push(d)}}catch(CD){f.e(CD)}finally{f.f()}var b=n.mergeFunction(t),x=b.rank;if(h)if(null==x){var w=b.shape,k=w[w.length-1],C=[k].concat(w.slice(0,w.length-1));b=xr(b.reshape([-1,k]),[1,0]).reshape(C)}else if(x>1){var S=[x-1].concat(zf(0,x-1));b=xr(b,S)}return b}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(CD){o.e(CD)}finally{o.f()}return t=1===(i=$h(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return ma((function(){if(null==t)return null;if(!Array.isArray(t))throw new zh("`mask` should be an Array");if(!Array.isArray(e))throw new zh("`inputs` should be an Array");if(t.length!==e.length)throw new zh("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:bo(e,0)})))[0],r=1;r<t.length-1;++r)n=es(n,t[r]);return n}))}}]),n}(np),Gv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return ma((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Aa(t,e[n]);return t}))}}]),n}(Wv);Gv.className="Add",f.registerClass(Gv);var Hv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return ma((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Na(t,e[n]);return t}))}}]),n}(Wv);Hv.className="Multiply",f.registerClass(Hv);var jv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return ma((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Aa(t,e[n]);return Na(1/e.length,t)}))}}]),n}(Wv);jv.className="Average",f.registerClass(jv);var qv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return ma((function(){for(var t=e[0],n=1;n<e.length;++n)t=ei(t,e[n]);return t}))}}]),n}(Wv);qv.className="Maximum",f.registerClass(qv);var Kv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return ma((function(){for(var t=e[0],n=1;n<e.length;++n)t=cs(t,e[n]);return t}))}}]),n}(Wv);Kv.className="Minimum",f.registerClass(Kv);var Xv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return _createClass(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new zh("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,a=_createForOfIteratorHelper(e=e);try{for(a.s();!(t=a.n()).done;){if(null!=t.value){n=!1;break}}}catch(CD){a.e(CD)}finally{a.f()}if(!n){for(var i=[],o=0;o<e.length;++o){var s=e[o].slice();s.splice(this.axis,1);var u,c=!1,l=_createForOfIteratorHelper(i);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(r.arraysEqual(h,s)){c=!0;break}}}catch(CD){l.e(CD)}finally{l.f()}c||i.push(s)}if(i.length>1)throw new zh("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return ma((function(){return Hf(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new zh("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=_createForOfIteratorHelper(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(CD){i.e(CD)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new zh("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new zh("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new zh("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return ma((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)a.push(null==t[i]?ys(e[i]).asType("bool"):t[i].rank<e[i].rank?bo(t[i],-1):t[i]);var o=Di(a,n.axis);return ui(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Wv);function Zv(e,t){for(;e<0;)e+=t;return e}Xv.className="Concatenate",f.registerClass(Xv);var Yv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return _createClass(n,[{key:"build",value:function(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Bh("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new zh("Dimension incompatibility: "+"".concat(t[a[0]]," !== ").concat(n[a[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new zh("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return Zv(t,e[n].shape.length)})):[Zv(this.axes,n.shape.length),Zv(this.axes,a.shape.length)],this.normalize&&(n=gp(n,t[0]),a=gp(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Bh("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),r.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Bh("batchDot is not implemented for complex64-type Tensors yet.");var a=e.shape.length,i=t.shape.length;null==n&&(n=[a-1,i-2]);var o=n;return ma((function(){var n,r;if(a>i){n=a-i;for(var s=[],u=0;u<n;++u)s.push(1);t=t.reshape(t.shape.concat(s))}else if(i>a){n=i-a;for(var c=[],l=0;l<n;++l)c.push(1);e=e.reshape(e.shape.concat(c))}else n=0;if(r=2===e.shape.length&&2===t.shape.length?o[0]===o[1]?e.mul(t).sum(o[0]):e.transpose([1,0]).mul(t).sum(o[1]):e.matMul(t,o[0]!==e.shape.length-1,o[1]===t.shape.length-1),n>0){for(var h,f=[],d=h=a>i?a+i-3:a-1;d<h+n;++d)f.push(d);r=r.squeeze(f)}return 1===r.shape.length&&(r=r.expandDims(1)),r}))}(n,a,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[Zv(this.axes,e.length),Zv(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Bh("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);var i=t.concat(n);return 1===i.length&&i.push(1),i}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Wv);Yv.className="Dot",f.registerClass(Yv);var Jv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);return ed((function(){return Kf(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))}}]),n}(np);Jv.className="GaussianNoise",f.registerClass(Jv);var $v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t);var r=Hd(e);return n.rate>0&&n.rate<1?ed((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul(Kf(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))}}]),n}(np);$v.className="GaussianDropout",f.registerClass($v);var Qv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return _createClass(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Hd(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ma((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return ed((function(){var t=Hd(e),a=-1.7580993408473766,i=Eo(Fs(r),n.rate);i=Bf(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate;return t.mul(i).add(i.add(-1).mul(a)).mul(o).add(s)}),(function(){return Hd(e)}),t.training||!1)}return e}))}}]),n}(np);function eg(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Ui(e,t,n,r,a,o);else if(3===e.rank)i=Vi(e,t,n,r,a,o);else{if(4!==e.rank)throw new Bh("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Wi(e,t,n,r,a,o)}return i}Qv.className="AlphaDropout",f.registerClass(Qv);var tg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=wd(e.betaInitializer||"zeros"),r.gammaInitializer=wd(e.gammaInitializer||"ones"),r.movingMeanInitializer=wd(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=wd(e.movingVarianceInitializer||"ones"),r.betaConstraint=pf(e.betaConstraint),r.gammaConstraint=pf(e.gammaConstraint),r.betaRegularizer=Km(e.betaRegularizer),r.gammaRegularizer=Km(e.gammaRegularizer),r}return _createClass(n,[{key:"build",value:function(e){e=jd(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new zh("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Jd({ndim:e.length,axes:_defineProperty({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return ma((function(){var a=null!=t.training&&t.training,i=Hd(e),o=i.shape,s=o.length,u=zf(0,s),c=n.axis>=0?n.axis:n.axis+s;u.splice(c,1);var l=Vh(1,s);l[c]=o[c];var h=u.slice();h.sort();var f=!r.arraysEqual(h,zf(0,s).slice(0,s-1));if(!a)return function(){if(f){var e=n.movingMean.read().reshape(l),t=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,a=n.scale?n.gamma.read().reshape(l):null;return eg(i,e,t,r,a,n.epsilon)}return eg(i,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=_slicedToArray(function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return r.arraysEqual(a.slice().sort(),zf(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ma((function(){var i=fs(e,r),o=i.mean,s=i.variance;return[eg(e,o,s,n,t,a),o,s]}))}(e,t,n,a,i):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ma((function(){var i,o=fs(e,r),s=o.mean,u=o.variance,c=[],l=_createForOfIteratorHelper(zf(0,e.rank));try{for(l.s();!(i=l.n()).done;){var h=i.value;-1!==r.indexOf(h)?c.push(1):c.push(e.shape[h])}}catch(CD){l.e(CD)}finally{l.f()}var f=s.reshape(c),d=u.reshape(c),p=null==t?null:t.reshape(c),m=null==n?null:n.reshape(c);return[eg(e,f,d,m,p,a),s,u]}))}(e,t,n,a,i)}(i,n.gamma.read(),n.beta.read(),u,n.epsilon),3),p=d[0],m=d[1],v=d[2],g=function(e,t,n){ma((function(){var r=1-n,a=e.read(),i=a.sub(t).mul(r);e.write(a.sub(i))}))};return g(n.movingMean,m,n.momentum),g(n.movingVariance,v,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xd(this.betaInitializer),gammaInitializer:xd(this.gammaInitializer),movingMeanInitializer:xd(this.movingMeanInitializer),movingVarianceInitializer:xd(this.movingVarianceInitializer),betaRegularizer:jm(this.betaRegularizer),gammaRegularizer:jm(this.gammaRegularizer),betaConstraint:ff(this.betaConstraint),gammaConstraint:ff(this.gammaConstraint)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);tg.className="BatchNormalization",f.registerClass(tg);var ng=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=_createForOfIteratorHelper(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(CD){i.e(CD)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=wd(e.betaInitializer||"zeros"),r.gammaInitializer=wd(e.gammaInitializer||"ones"),r.betaRegularizer=Km(e.betaRegularizer),r.gammaRegularizer=Km(e.gammaRegularizer),r.supportsMasking=!0,_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=jd(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=_createForOfIteratorHelper(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(CD){a.e(CD)}finally{a.f()}if(this.axis.length!==$h(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.gamma=this.scale?this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Hd(e),a=r.shape,i=a.length;return ma((function(){var e,t=fs(r,n.axis,!0),o=t.mean,s=t.variance,u=Vh(1,i),c=_createForOfIteratorHelper(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(CD){c.e(CD)}finally{c.f()}for(var h=function(e){return null!=e&&e.shape.length!==i&&n.axis!==[i-1]?e.reshape(u):e},f=h(n.gamma.read()),d=h(n.beta.read()),p=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(p.push(a[v]),m.push(1)):(p.push(1),m.push(a[v]));return o=o.tile(p),s=s.tile(p),f=f.tile(m),d=d.tile(m),eg(r,o,s,d,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xd(this.betaInitializer),gammaInitializer:xd(this.gammaInitializer),betaRegularizer:jm(this.betaRegularizer),gammaRegularizer:jm(this.gammaRegularizer)},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);ng.className="LayerNormalization",f.registerClass(ng);var rg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new zh("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new zh("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new zh("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new Jd({ndim:4})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=jd(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return ma((function(){return t=Hd(e),r=n.padding,a=n.dataFormat,ma((function(){if(4!==t.rank)throw new zh("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new zh("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new zh("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],bs(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np);function ag(e,t,n,r,a,i){return ma((function(){var o;Sf(a),Ef(i),Tf(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=rv(e,a);var s="same"===r?"same":"valid";return o="max"===i?as(e,t,n,s):Ni(e,t,n,s),"channelsFirst"===a&&(o=xr(o,[0,3,1,2])),o}))}function ig(e,t,n,r,a,i){return ma((function(){var o;Sf(a),Ef(i),Tf(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=av(e,a);var s="same"===r?"same":"valid";return o="max"===i?is(e,t,n,s):Ri(e,t,n,s),"channelsFirst"===a&&(o=xr(o,[0,4,1,2,3])),o}))}rg.className="ZeroPadding2D",f.registerClass(rg);var og=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new zh("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(nf(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new zh("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return nf(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Tf(r.padding),r.inputSpec=[new Jd({ndim:3})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t=tv((e=jd(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){n.invokeCallHook(e,t),e=Uf(Hd(e),2);var r=n.poolingFunction(Hd(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return fu(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np),sg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ag(e,t,n,r,a,"max")}}]),n}(og);sg.className="MaxPooling1D",f.registerClass(sg);var ug=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ag(e,t,n,r,a,"avg")}}]),n}(og);ug.className="AveragePooling1D",f.registerClass(ug);var cg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new zh("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return nf(r.poolSize,"poolSize"),nf(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Sf(r.dataFormat),Tf(r.padding),r.inputSpec=[new Jd({ndim:4})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){e=jd(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=tv(t,this.poolSize[0],this.padding,this.strides[0]),n=tv(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){return n.invokeCallHook(e,t),n.poolingFunction(Hd(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np),lg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ag(e,t,n,r,a,"max")}}]),n}(cg);lg.className="MaxPooling2D",f.registerClass(lg);var hg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ag(e,t,n,r,a,"avg")}}]),n}(cg);hg.className="AveragePooling2D",f.registerClass(hg);var fg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new zh("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return nf(r.poolSize,"poolSize"),nf(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Sf(r.dataFormat),Tf(r.padding),r.inputSpec=[new Jd({ndim:5})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){e=jd(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=tv(t,this.poolSize[0],this.padding,this.strides[0]),n=tv(n,this.poolSize[1],this.padding,this.strides[1]),r=tv(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return ma((function(){return n.invokeCallHook(e,t),n.poolingFunction(Hd(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np),dg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ig(e,t,n,r,a,"max")}}]),n}(fg);dg.className="MaxPooling3D",f.registerClass(dg);var pg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Sf(a),Tf(r),ig(e,t,n,r,a,"avg")}}]),n}(fg);pg.className="AveragePooling3D",f.registerClass(pg);var mg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[new Jd({ndim:3})],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new Bh}}]),n}(np),vg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e||{})}return _createClass(n,[{key:"call",value:function(e,t){return ma((function(){var t=Hd(e);return ss(t,1)}))}}]),n}(mg);vg.className="GlobalAveragePooling1D",f.registerClass(vg);var gg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e||{})}return _createClass(n,[{key:"call",value:function(e,t){return ma((function(){var t=Hd(e);return Wo(t,1)}))}}]),n}(mg);gg.className="GlobalMaxPooling1D",f.registerClass(gg);var yg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Sf(r.dataFormat),r.inputSpec=[new Jd({ndim:4})],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new Bh}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(np),_g=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return ma((function(){var t=Hd(e);return ss(t,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))}}]),n}(yg);_g.className="GlobalAveragePooling2D",f.registerClass(_g);var bg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return ma((function(){var t=Hd(e);return Wo(t,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))}}]),n}(yg);bg.className="GlobalMaxPooling2D",f.registerClass(bg);var xg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).layer=e.layer,r}return _createClass(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){_get2(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=vp(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(np),wg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return _createClass(n,[{key:"build",value:function(e){if((e=jd(e)).length<3)throw new zh("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),_get2(_getPrototypeOf(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=jd(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return ma((function(){return yv((function(e,r){return[Hd(n.layer.call(e,t)),[]]}),e=Hd(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(xg);wg.className="TimeDistributed",f.registerClass(wg);var kg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=vp(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=vp(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,ef(kf,"BidirectionalMergeMode",r.mergeMode),e.weights)throw new Bh("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return _createClass(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Hh(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=gv(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return _get2(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new zh("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,_toConsumableArray(r));var c=r.map((function(e){return new Jd({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,_toConsumableArray(c))}if(null!=a)throw new Bh("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof $d,h=0,f=o;h<f.length;h++){if(f[h]instanceof $d!==l)throw new zh("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var d=[e].concat(o),p=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=p;var v=_get2(_getPrototypeOf(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=m,v}return _get2(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ma((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Ws(a,1)),"concat"===n.mergeMode?o=Hf([r,a]):"sum"===n.mergeMode?o=Aa(r,a):"ave"===n.mergeMode?o=Na(.5,Aa(r,a)):"mul"===n.mergeMode?o=Na(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Mf(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Mf(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){_get2(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=_get2(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=vp(t.layer);if(delete t.layer,null!=t.numConstants)throw new Bh("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(xg);function Cg(e){return new rp(e)}function Sg(e){return new Jm(e)}function Tg(e){return new Xm(e)}function Eg(e){return new Zm(e)}function Ag(e){return new Ym(e)}function Mg(e){return new Qm(e)}function Ig(e){return new $m(e)}function Ng(e){return new dv(e)}function Rg(e){return new uv(e)}function Dg(e){return new lv(e)}function Og(e){return new cv(e)}function Lg(e){return new fv(e)}function Fg(e){return new pv(e)}function Pg(e){return new mv(e)}function zg(e){return new vv(e)}function Bg(e){return new Fv(e)}function Ug(e){return new Ov(e)}function Vg(e){return new Rv(e)}function Wg(e){return new Dv(e)}function Gg(e){return new Lv(e)}function Hg(e){return new Pv(e)}function jg(e){return new zv(e)}function qg(e){return new Bv(e)}function Kg(e){return new Vv(e)}function Xg(e){return new Gv(e)}function Zg(e){return new jv(e)}function Yg(e){return new Xv(e)}function Jg(e){return new qv(e)}function $g(e){return new Kv(e)}function Qg(e){return new Hv(e)}function ey(e){return new Yv(e)}function ty(e){return new tg(e)}function ny(e){return new ng(e)}function ry(e){return new rg(e)}function ay(e){return new ug(e)}function iy(e){return ay(e)}function oy(e){return ay(e)}function sy(e){return new hg(e)}function uy(e){return sy(e)}function cy(e){return sy(e)}function ly(e){return new pg(e)}function hy(e){return ly(e)}function fy(e){return ly(e)}function dy(e){return new vg(e)}function py(e){return new _g(e)}function my(e){return new gg(e)}function vy(e){return new bg(e)}function gy(e){return new sg(e)}function yy(e){return new lg(e)}function _y(e){return new dg(e)}function by(e){return new Cv(e)}function xy(e){return new kv(e)}function wy(e){return new Tv(e)}function ky(e){return new Sv(e)}function Cy(e){return new wv(e)}function Sy(e){return new xv(e)}function Ty(e){return new Nv(e)}function Ey(e){return new Iv(e)}function Ay(e){return new _v(e)}function My(e){return new Ev(e)}function Iy(e){return new kg(e)}function Ny(e){return new wg(e)}kg.className="Bidirectional",f.registerClass(kg);var Ry=my,Dy=vy,Oy=gy,Ly=yy;function Fy(e){return new Jv(e)}function Py(e){return new $v(e)}function zy(e){return new Qv(e)}function By(e){return new Uv(e)}function Uy(e,t){return Ep(e,t)}function Vy(e,t){return Np(e,t)}function Wy(e,t){return Rp(e,t)}function Gy(e,t){return Ap(e,t)}function Hy(e,t){return Dp(e,t)}function jy(e,t){return Ip(e,t)}function qy(e,t){return function(e,t){return ma((function(){var n=Mp(e,t),r=function(e,t){return ma((function(){return es(e.equal(1),t.equal(0)).sum().cast("float32")}))}(e,t),a=n.add(r);return po(To(a,0),n.div(a),0).cast("float32")}))}(e,t)}function Ky(e,t){return Cp(e,t)}function Xy(e,t){return _p(e,t)}function Zy(e,t){return bp(e,t)}function Yy(e,t){return bp(e,t)}function Jy(e,t){return bp(e,t)}function $y(e,t){return yp(e,t)}function Qy(e,t){return yp(e,t)}function e_(e,t){return yp(e,t)}function t_(e){return new Gm(e)}function n_(e){return Vm(t=e),new Gm({l1:null!=t?t.l1:null,l2:0});var t}function r_(e){return Vm(t=e),new Gm({l2:null!=t?t.l2:null,l1:0});var t}var a_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).model=null,e}return _createClass(n,[{key:"setModel",value:function(e){if(!(e instanceof pm))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(up);function i_(e,t){return e<t}function o_(e,t){return e>t}var s_,u_,c_=function(e){_inherits(i,e);var t,n,r,a=_createSuper(i);function i(e){var t;if(_classCallCheck(this,i),t=a.call(this),null==e&&(e={}),e.restoreBestWeights)throw new Bh("restoreBestWeights = True is not implemented in EarlyStopping yet.");return t.monitor=e.monitor||"val_loss",t.minDelta=Math.abs(e.minDelta||0),t.patience=e.patience||0,t.verbose=e.verbose||0,t.mode=e.mode||"auto",t.baseline=e.baseline,-1===["auto","min","max"].indexOf(t.mode)&&(console.warn("EarlyStopping mode '".concat(t.mode,"' is invalid. ")+"Falling back to mode 'auto'."),t.mode="auto"),t.monitorFunc="min"===t.mode?i_:"max"===t.mode?o_:-1!==t.monitor.indexOf("acc")?o_:i_,t.monitorFunc===i_&&(t.minDelta*=-1),_possibleConstructorReturn(t)}return _createClass(i,[{key:"onTrainBegin",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===i_?1/0:-1/0;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onEpochEnd",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ip(n);case 2:null!=(r=this.getMonitorValue(n))&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(e))),t}}]),i}(a_),l_={earlyStopping:function(e){return new c_(e)}};!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(s_||(s_={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(u_||(u_={}));var h_={};function f_(e,t){h_[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function d_(e){return h_[e]}function p_(e){delete h_[e]}function m_(e,t,n,a,i){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var s=o.inputIndexStart,u=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?s+1:o.inputIndexEnd;if("tensor"===o.type)return v_(t.inputNames[o.inputIndexStart],n,a,i);if("tensors"===o.type)return t.inputNames.slice(s,u).map((function(e){return v_(e,n,a,i)}));var c=v_(t.inputNames.slice(s)[0],n,a,i),l=c.dataSync();return"number"===o.type?l[0]:r.toNestedArray(c.shape,l)}var h=t.attrParams[e];return h&&h.value}function v_(e,t,n,r){var a=_slicedToArray(__(e),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[y_(i,e)]}));return void 0!==u?t[y_(i,u)][o]:void 0}function g_(e,t){var n=_slicedToArray(__(e),2),r=n[0],a=n[1];return[y_(r,t&&t.currentContextId),a]}function y_(e,t){return t?"".concat(e,"-").concat(t):e}function __(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function b_(e,t,n){var r=m_("pad",e,t,n);if("explicit"===r){r=m_("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function x_(e){return e.kept?e:Jn(e)}var w_=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],k_=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],C_=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],S_=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],T_=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],E_=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],A_=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],M_=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],I_=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],N_=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],R_=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],D_=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],O_=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],L_=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],F_=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],P_=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],z_=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],B_=function(){function e(){var t;_classCallCheck(this,e);var n=(t=[]).concat.apply(t,_toConsumableArray([C,S,T,E,A,M,I,O,D,N,L,F,P,z,B,U,R].map((function(e){return e.json}))));this.opMappers=n.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return _createClass(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],a=[],i=[],o=e.node.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?r.push(e[n.name]):"Const"===n.op?a.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),s=[],u=[],c={},l={};null!=n&&(c=this.mapSignatureEntries(n.inputs),l=this.mapSignatureEntries(n.outputs));var h=Object.keys(o);h.forEach((function(e){var t=o[e];t.inputNames.forEach((function(e){var n=_slicedToArray(g_(e),1)[0];t.inputs.push(o[n]),o[n].children.push(t)}))})),0===Object.keys(l).length?h.forEach((function(e){var t=o[e];0===t.children.length&&u.push(t)})):Object.keys(l).forEach((function(e){var t=_slicedToArray(g_(e),1)[0],n=o[t];null!=n&&(n.signatureKey=l[e],u.push(n))})),Object.keys(c).length>0?Object.keys(c).forEach((function(e){var t=_slicedToArray(g_(e),1)[0],n=o[t];n&&(n.signatureKey=c[e],s.push(n))})):s=r;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var d={nodes:o,inputs:s,outputs:u,weights:a,placeholders:r,signature:n,functions:f};return i.length>0&&(d.initNodes=i),d}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=d_(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=V_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=V_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=J_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=J_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=G_(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=G_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=Y_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Y_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=W_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=W_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Q_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Q_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=Z_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Z_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=$_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=$_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=q_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=q_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=K_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=K_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=j_(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=j_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=_slicedToArray(g_(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:H_(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e){var n=_slicedToArray(g_(e),1)[0];t.inputs.push(a[n]),a[n].children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=_slicedToArray(g_(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function U_(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Be().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function V_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?U_(a.s,r):n}function W_(e,t,n){var r=e[t];return r?r.b:n}function G_(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function H_(e){switch("string"==typeof e&&(e=s_[e]),e){case s_.DT_FLOAT:return"float32";case s_.DT_INT32:case s_.DT_INT64:case s_.DT_INT8:case s_.DT_UINT8:return"int32";case s_.DT_BOOL:return"bool";case s_.DT_DOUBLE:return"float32";case s_.DT_STRING:return"string";default:return null}}function j_(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function q_(e,t,n){var r=e[t];return r&&r.type?H_(r.type):n}function K_(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return H_(e)})):n}function X_(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function Z_(e,t,n){var r=e[t];return r&&r.shape?X_(r.shape):n}function Y_(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function J_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return U_(e,r)})):n}function $_(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return X_(e)})):n}function Q_(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var eb=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return _createClass(e,[{key:"getInput",value:function(e){return v_(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return v_(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return G_(this.node.rawAttrs,e,t);if(null!=n.s)return V_(this.node.rawAttrs,e,t);if(null!=n.b)return W_(this.node.rawAttrs,e,t);if(null!=n.shape)return Z_(this.node.rawAttrs,e,t);if(null!=n.type)return q_(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Y_(this.node.rawAttrs,e,t);if(null!=n.list.s)return J_(this.node.rawAttrs,e,t);if(null!=n.list.shape)return $_(this.node.rawAttrs,e,t);if(null!=n.list.b)return Q_(this.node.rawAttrs,e,t);if(null!=n.list.type)return K_(this.node.rawAttrs,e,t)}return t}}]),e}();function tb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){r.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var a=0;a<e.length;a++){var i=e[a],o=t[a];r.assert(i<0||o<0||i===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function nb(e){return"number"!=typeof e&&!e.some((function(e){return e<0}))}function rb(e,t,n){var r=ab(e,n),a=!nb(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=ab(e.shape,r)})),!nb(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function ab(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var ib=function(){function e(t,n,r,a,i,o,s){_classCallCheck(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Wa(0),ga(this.idTensor)}return _createClass(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),tb(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,ga(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return tn([],[0].concat(this.elementShape));var r=this.readMany(e);return tb(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),du(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return tn([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return tb(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Di(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,_toConsumableArray(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Tu(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];ma((function(){t=Ii(t,[1,r,i]);for(var s=0;s<e.length;++s)o[s]=Ii(Li(t,[0,0===s?0:a[s-1],0],[1,e[s],i]),n.elementShape);return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),ob=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;_classCallCheck(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));tb(n,e.shape,"TensorList shape mismatch: "),ga(e)})),this.idTensor=Wa(0),this.maxNumElements=a,ga(this.idTensor)}return _createClass(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(_toConsumableArray(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));tb(e,this.elementShape,"TensorList shape mismatch: ");var a=rb(this.elementShape,this.tensors,e);return ma((function(){var e=n.tensors.map((function(e){return Ii(e,a)}));return du(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=rb(this.elementShape,this.tensors,e),r=this.tensors.pop();return tb(r.shape,e,"TensorList shape mismatch: "),Ii(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(tb(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ga(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));tb(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=rb(this.elementShape,this.tensors,t);return Ii(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));tb(this.elementShape,t.shape,"TensorList shape mismatch: "),ga(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));tb(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=rb(this.elementShape,this.tensors,n);return 0===e.length?tn([],[0].concat(a)):ma((function(){var t=e.map((function(e){return Ii(r.tensors[e],a)}));return du(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));tb(this.elementShape,t,"TensorList shape mismatch: ");var r=rb(this.elementShape,this.tensors,t);return 0===this.size()?tn([],[0].concat(r)):ma((function(){var e=n.tensors.map((function(e){return Ii(e,r)}));return Di(e,0)}))}}]),e}();function sb(e,t,n){var r=_slicedToArray(m_("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u="fusedbatchnorm"===a,c=m_("numArgs",e,t,n);if(o){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var l=m_("strides",e,t,n),h=b_(e,t,n),f=m_("dataFormat",e,t,n).toUpperCase(),d=m_("dilations",e,t,n),p=_slicedToArray(m_("args",e,t,n),2);return{stride:l,pad:h,dataFormat:f,dilations:d,biasArg:p[0],preluArg:p[1],activationFunc:i,leakyreluAlpha:m_("leakyreluAlpha",e,t,n)}}function ub(e,t,n){return{boxes:m_("boxes",e,t,n),scores:m_("scores",e,t,n),maxOutputSize:m_("maxOutputSize",e,t,n),iouThreshold:m_("iouThreshold",e,t,n),scoreThreshold:m_("scoreThreshold",e,t,n),softNmsSigma:m_("softNmsSigma",e,t,n)}}var cb=function(){function e(t,n){_classCallCheck(this,e),this.keyDType=t,this.valueDType=n,this.handle=Wa(0),this.tensorMap=new Map,ga(this.handle)}var t,n;return _createClass(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"import",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var a,i=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return a=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),ma((function(){var e=Tu(n),t=a.length,o=e.length;r.assert(t===o,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(o," ")+"elements."}));for(var s=0;s<t;s++){var u=a[s],c=e[s];ga(c),i.tensorMap.set(u,c)}return i.handle}))));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"find",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",ma((function(){for(var e=[],t=0;t<r.length;t++){var i=a.findWithDefault(r[t],n);e.push(i)}return du(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}();function lb(e,t,n,a){var i=function(e,t,n){switch(e.category){case"arithmetic":return ma((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Aa(m_("a",e,t,n),m_("b",e,t,n))];case"AddN":return[si(m_("tensors",e,t,n))];case"FloorMod":case"Mod":return[hs(m_("a",e,t,n),m_("b",e,t,n))];case"Mul":return[Na(m_("a",e,t,n),m_("b",e,t,n))];case"RealDiv":case"Div":return[Ia(m_("a",e,t,n),m_("b",e,t,n))];case"DivNoNan":return[mo(m_("a",e,t,n),m_("b",e,t,n))];case"FloorDiv":return[Ma(m_("a",e,t,n),m_("b",e,t,n))];case"Sub":return[Xa(m_("a",e,t,n),m_("b",e,t,n))];case"Minimum":return[cs(m_("a",e,t,n),m_("b",e,t,n))];case"Maximum":return[ei(m_("a",e,t,n),m_("b",e,t,n))];case"Pow":return[Ka(m_("a",e,t,n),m_("b",e,t,n))];case"SquaredDifference":return[hu(m_("a",e,t,n),m_("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return ma((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Ya(m_("x",e,t,n))];case"Acos":return[ii(m_("x",e,t,n))];case"Acosh":return[oi(m_("x",e,t,n))];case"Asin":return[fi(m_("x",e,t,n))];case"Asinh":return[di(m_("x",e,t,n))];case"Atan":return[pi(m_("x",e,t,n))];case"Atan2":return[mi(m_("x",e,t,n),m_("y",e,t,n))];case"Atanh":return[vi(m_("x",e,t,n))];case"Ceil":return[ji(m_("x",e,t,n))];case"Complex":return[Qt(m_("real",e,t,n),m_("imag",e,t,n))];case"Cos":return[ao(m_("x",e,t,n))];case"Cosh":return[io(m_("x",e,t,n))];case"Elu":return[go(m_("x",e,t,n))];case"Erf":return[yo(m_("x",e,t,n))];case"Exp":return[_o(m_("x",e,t,n))];case"Expm1":return[xo(m_("x",e,t,n))];case"Floor":return[Co(m_("x",e,t,n))];case"Log":return[Po(m_("x",e,t,n))];case"Log1p":return[zo(m_("x",e,t,n))];case"Imag":return[Ao(m_("x",e,t,n))];case"Neg":return[Bo(m_("x",e,t,n))];case"Reciprocal":return[Bs(m_("x",e,t,n))];case"Real":return[zs(m_("x",e,t,n))];case"Relu":return[Us(m_("x",e,t,n))];case"Round":return[Ks(m_("x",e,t,n))];case"Selu":return[Zs(m_("x",e,t,n))];case"Sigmoid":return[Oi(m_("x",e,t,n))];case"Sin":return[Qs(m_("x",e,t,n))];case"Sign":return[$s(m_("x",e,t,n))];case"Sinh":return[eu(m_("x",e,t,n))];case"Softplus":return[Uo(m_("x",e,t,n))];case"Sqrt":return[Ra(m_("x",e,t,n))];case"Square":return[Da(m_("x",e,t,n))];case"Tanh":return[Fi(m_("x",e,t,n))];case"Tan":return[vu(m_("x",e,t,n))];case"ClipByValue":return[qi(m_("x",e,t,n),m_("clipValueMin",e,t,n),m_("clipValueMax",e,t,n))];case"Relu6":return[Vs(m_("x",e,t,n))];case"Rsqrt":return[Xs(v_(e.inputNames[0],t,n))];case"Prod":return[As(m_("x",e,t,n),m_("axes",e,t,n))];case"LeakyRelu":return[Ro(m_("x",e,t,n),m_("alpha",e,t,n))];case"Prelu":return[Es(m_("x",e,t,n),m_("alpha",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return(u=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w,k,C,S,T,E,A,M,I,N,R,D,O,L,F,P,z,B,U,V,W,G,H,j,q,K,X,Z,Y,J,$,Q,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,he,fe,de,pe,me,ve,ge,ye,_e,be,xe,we,ke,Ce,Se,Te,Ee,Ae;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0?3:"StatelessIf"===e.t0?3:"While"===e.t0?12:"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?17:"Merge"===e.t0?28:"Enter"===e.t0?30:"Exit"===e.t0?32:"NextIteration"===e.t0?34:"TensorArrayV3"===e.t0?36:"TensorArrayWriteV3"===e.t0?38:"TensorArrayReadV3"===e.t0?40:"TensorArrayGatherV3"===e.t0?42:"TensorArrayScatterV3"===e.t0?44:"TensorArrayConcatV3"===e.t0?46:"TensorArraySplitV3"===e.t0?48:"TensorArraySizeV3"===e.t0?50:"TensorArrayCloseV3"===e.t0?52:"TensorListSetItem"===e.t0?54:"TensorListGetItem"===e.t0?56:"TensorListScatterV2"===e.t0?58:"TensorListScatter"===e.t0?58:"TensorListReserve"===e.t0?60:"EmptyTensorList"===e.t0?60:"TensorListGather"===e.t0?64:"TensorListStack"===e.t0?66:"TensorListFromTensor"===e.t0?68:"TensorListConcat"===e.t0?70:"TensorListPushBack"===e.t0?72:"TensorListPopBack"===e.t0?74:"TensorListSplit"===e.t0?76:78;break;case 3:return a=m_("thenBranch",t,n,r),i=m_("elseBranch",t,n,r),o=m_("cond",t,n,r),s=m_("args",t,n,r),e.next=6,o.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(_regeneratorRuntime().mark((function e(){var a,i,o,s,u,c,l,h;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m_("body",t,n,r),i=m_("cond",t,n,r),o=m_("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,h=_regeneratorRuntime().mark((function e(){var t,n,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(h(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!=typeof(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return e.abrupt("return",[x_(m_("pred",t,n,r))]);case 17:return c=m_("pred",t,n,r),(l=m_("data",t,n,r)).kept||(l=x_(l)),e.next=22,c.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,l],e.next=27;break;case 26:e.t3=[l,void 0];case 27:return e.abrupt("return",e.t3);case 28:return h=t.inputNames.find((function(e){return void 0!==v_(e,n,r)})),e.abrupt("return",h?[x_(v_(h,n,r))]:void 0);case 30:return f=m_("frameName",t,n,r),d=m_("tensor",t,n,r),e.abrupt("return",(r.enterFrame(f),[x_(d)]));case 32:return p=m_("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[x_(p)]));case 34:return m=m_("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[x_(m)]));case 36:return v=m_("size",t,n,r),g=m_("dtype",t,n,r),y=m_("elementShape",t,n,r),_=m_("dynamicSize",t,n,r),b=m_("clearAfterRead",t,n,r),x=m_("identicalElementShapes",t,n,r),w=m_("name",t,n,r),k=new ib(w,g,v,y,x,_,b),e.abrupt("return",(r.addTensorArray(k),[k.idTensor,Wa(1)]));case 38:return C=m_("tensorArrayId",t,n,r),S=m_("index",t,n,r),T=m_("tensor",t,n,r),E=r.getTensorArray(C.id),e.abrupt("return",(E.write(S,T),[E.idTensor]));case 40:return A=m_("tensorArrayId",t,n,r),M=m_("index",t,n,r),e.abrupt("return",[r.getTensorArray(A.id).read(M)]);case 42:return I=m_("tensorArrayId",t,n,r),N=m_("indices",t,n,r),R=m_("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(I.id).gather(N,R)]);case 44:return D=m_("tensorArrayId",t,n,r),O=m_("indices",t,n,r),L=m_("tensor",t,n,r),F=r.getTensorArray(D.id),e.abrupt("return",(F.scatter(O,L),[F.idTensor]));case 46:return P=m_("tensorArrayId",t,n,r),z=r.getTensorArray(P.id),B=m_("dtype",t,n,r),e.abrupt("return",[z.concat(B)]);case 48:return U=m_("tensorArrayId",t,n,r),V=m_("tensor",t,n,r),W=m_("lengths",t,n,r),G=r.getTensorArray(U.id),e.abrupt("return",(G.split(W,V),[G.idTensor]));case 50:return H=m_("tensorArrayId",t,n,r),e.abrupt("return",[Wa(r.getTensorArray(H.id).size(),"int32")]);case 52:return j=m_("tensorArrayId",t,n,r),q=r.getTensorArray(j.id),e.abrupt("return",(q.clearAndClose(),[q.idTensor]));case 54:return K=m_("tensorListId",t,n,r),X=m_("index",t,n,r),Z=m_("tensor",t,n,r),Y=r.getTensorList(K.id),e.abrupt("return",(Y.setItem(X,Z),[Y.idTensor]));case 56:return J=m_("tensorListId",t,n,r),$=m_("index",t,n,r),Q=m_("elementShape",t,n,r),ee=m_("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(J.id).getItem($,Q,ee)]);case 58:return te=m_("indices",t,n,r),ne=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,_toConsumableArray(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new ob([],n,e.dtype,r),o=Tu(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}(m_("tensor",t,n,r),te,m_("elementShape",t,n,r),m_("numElements",t,n,r)),e.abrupt("return",(r.addTensorList(ne),[ne.idTensor]));case 60:return re=m_("elementShape",t,n,r),ae=m_("elementDType",t,n,r),ie="TensorListReserve"===t.op?"numElements":"maxNumElements",oe=function(e,t,n){return new ob([],e,t,n)}(re,ae,m_(ie,t,n,r)),e.abrupt("return",(r.addTensorList(oe),[oe.idTensor]));case 64:return se=m_("tensorListId",t,n,r),ue=m_("indices",t,n,r),ce=m_("elementShape",t,n,r),le=m_("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(se.id).gather(ue,le,ce)]);case 66:return he=m_("tensorListId",t,n,r),fe=m_("elementShape",t,n,r),de=m_("elementDType",t,n,r),pe=m_("numElements",t,n,r),e.abrupt("return",[r.getTensorList(he.id).stack(fe,de,pe)]);case 68:return me=function(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));tb(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Tu(e);return new ob(a,t,r)}(m_("tensor",t,n,r),m_("elementShape",t,n,r),m_("elementDType",t,n,r)),e.abrupt("return",(r.addTensorList(me),[me.idTensor]));case 70:return ve=m_("tensorListId",t,n,r),ge=r.getTensorList(ve.id),ye=m_("dtype",t,n,r),_e=m_("elementShape",t,n,r),e.abrupt("return",[ge.concat(ye,_e)]);case 72:return be=m_("tensorListId",t,n,r),xe=m_("tensor",t,n,r),we=r.getTensorList(be.id),e.abrupt("return",(we.pushBack(xe),[we.idTensor]));case 74:return ke=m_("tensorListId",t,n,r),Ce=m_("elementShape",t,n,r),Se=m_("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(ke.id).popBack(Ce,Se)]);case 76:return Te=m_("tensor",t,n,r),Ee=m_("elementShape",t,n,r),Ae=function(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=ab(e.shape.slice(1),n),o=0===r?0:e.size/r,s=ma((function(){var n=[];e=Ii(e,[1,r,o]);for(var s=0;s<t.length;++s)n[s]=Ii(Li(e,[0,0===s?0:a[s-1],0],[1,t[s],o]),i);return e.dispose(),n})),u=new ob([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}(Te,m_("lengths",t,n,r),Ee),e.abrupt("return",(r.addTensorList(Ae),[Ae.idTensor]));case 78:throw TypeError("Node type ".concat(t.op," is not implemented"));case 79:case"end":return e.stop()}}),e)}))),function(e,t,n){return u.apply(this,arguments)})(e,t,n);case"convolution":return ma((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=m_("stride",e,t,n),a=m_("pad",e,t,n),i=m_("dataFormat",e,t,n).toUpperCase(),o=m_("dilation",e,t,n);return[$i(m_("x",e,t,n),m_("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=m_("strides",e,t,n),u=b_(e,t,n),c=m_("dataFormat",e,t,n).toUpperCase(),l=m_("dilations",e,t,n);return[Ji(m_("x",e,t,n),m_("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var h=sb(e,t,n),f=h.stride,d=h.pad,m=h.dataFormat,v=h.dilations,g=h.biasArg,y=h.preluArg,_=h.activationFunc,b=h.leakyreluAlpha;return[p.conv2d({x:m_("x",e,t,n),filter:m_("filter",e,t,n),strides:[f[1],f[2]],pad:d,dataFormat:m,dilations:[v[1],v[2]],bias:g,activation:_,preluActivationWeights:y,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=sb(e,t,n),w=x.stride,k=x.pad,C=x.dataFormat,S=x.dilations,T=x.biasArg,E=x.preluArg,A=x.activationFunc,M=x.leakyreluAlpha;return[p.depthwiseConv2d({x:m_("x",e,t,n),filter:m_("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:C,dilations:[S[1],S[2]],bias:T,activation:A,preluActivationWeights:E,leakyreluAlpha:M})];case"Conv2DBackpropInput":case"Conv2dTranspose":var I=m_("outputShape",e,t,n),N=m_("strides",e,t,n),R=b_(e,t,n);return[eo(m_("x",e,t,n),m_("filter",e,t,n),I,[N[1],N[2]],R)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var D=m_("strides",e,t,n),O=b_(e,t,n),L=m_("dilations",e,t,n),F=m_("dataFormat",e,t,n).toUpperCase();return[co(m_("input",e,t,n),m_("filter",e,t,n),[D[1],D[2]],O,F,[L[1],L[2]])];case"Conv3D":var P=m_("strides",e,t,n),z=m_("pad",e,t,n),B=m_("dataFormat",e,t,n).toUpperCase(),U=m_("dilations",e,t,n);return[to(m_("x",e,t,n),m_("filter",e,t,n),[P[1],P[2],P[3]],z,B,[U[1],U[2],U[3]])];case"AvgPool":var V=m_("strides",e,t,n),W=m_("pad",e,t,n),G=m_("kernelSize",e,t,n);return[Ni(m_("x",e,t,n),[G[1],G[2]],[V[1],V[2]],W)];case"MaxPool":var H=m_("strides",e,t,n),j=m_("pad",e,t,n),q=m_("kernelSize",e,t,n);return[as(m_("x",e,t,n),[q[1],q[2]],[H[1],H[2]],j)];case"MaxPoolWithArgmax":var K=m_("strides",e,t,n),X=m_("pad",e,t,n),Z=m_("kernelSize",e,t,n),Y=m_("includeBatchInIndex",e,t,n),J=os(m_("x",e,t,n),[Z[1],Z[2]],[K[1],K[2]],X,Y);return[J.result,J.indexes];case"AvgPool3D":var $=m_("strides",e,t,n),Q=m_("pad",e,t,n),ee=m_("kernelSize",e,t,n);return[Ri(m_("x",e,t,n),[ee[1],ee[2],ee[3]],[$[1],$[2],$[3]],Q)];case"MaxPool3D":var te=m_("strides",e,t,n),ne=m_("pad",e,t,n),re=m_("kernelSize",e,t,n);return[is(m_("x",e,t,n),[re[1],re[2],re[3]],[te[1],te[2],te[3]],ne)];case"Dilation2D":var ae=m_("strides",e,t,n),ie=m_("pad",e,t,n),oe=m_("dilations",e,t,n),se=ae[1],ue=ae[2],ce=oe[1],le=oe[2];return[ho(m_("x",e,t,n),m_("filter",e,t,n),[se,ue],ie,[ce,le],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return ma((function(){return function(e,t,n){switch(e.op){case"Fill":var r=m_("shape",e,t,n),a=m_("dtype",e,t,n);return[ja(r,m_("value",e,t,n),a)];case"LinSpace":return[Lo(m_("start",e,t,n),m_("stop",e,t,n),m_("num",e,t,n))];case"Multinomial":var i=m_("logits",e,t,n),o=m_("numSamples",e,t,n),s=m_("seed",e,t,n);return[ps(i,o,s)];case"OneHot":var u=m_("indices",e,t,n),c=m_("depth",e,t,n),l=m_("onValue",e,t,n),h=m_("offValue",e,t,n);return[br(u,c,l,h)];case"Ones":return[gs(m_("shape",e,t,n),m_("dtype",e,t,n))];case"OnesLike":return[ys(m_("x",e,t,n))];case"RandomUniform":return[Fs(m_("shape",e,t,n),m_("minval",e,t,n),m_("maxval",e,t,n),m_("dtype",e,t,n))];case"Range":return[Ps(m_("start",e,t,n),m_("stop",e,t,n),m_("step",e,t,n),m_("dtype",e,t,n))];case"TruncatedNormal":var f=m_("shape",e,t,n),d=m_("mean",e,t,n),p=m_("stdDev",e,t,n),m=m_("seed",e,t,n);return[ku(f,d,p,m_("dtype",e,t,n),m)];case"Zeros":return[vs(m_("shape",e,t,n),m_("dtype",e,t,n))];case"ZerosLike":return[Oa(m_("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return(s=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w,k,C,S,T,E;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?14:"NonMaxSuppressionV3"===e.t0?25:"NonMaxSuppressionV2"===e.t0?25:"Where"===e.t0?30:"ListDiff"===e.t0?36:37;break;case 3:return a=ub(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=12,Pc.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 12:return h=e.sent,e.abrupt("return",[h.selectedIndices,h.selectedScores]);case 14:return f=ub(t,n,r),d=f.boxes,p=f.scores,m=f.maxOutputSize,v=f.iouThreshold,g=f.scoreThreshold,y=m_("padToMaxOutputSize",t,n,r),e.next=23,Pc.nonMaxSuppressionPaddedAsync(d,p,m,v,g,y);case 23:return _=e.sent,e.abrupt("return",[_.selectedIndices,_.validOutputs]);case 25:return b=ub(t,n,r),x=b.boxes,w=b.scores,k=b.maxOutputSize,C=b.iouThreshold,S=b.scoreThreshold,e.next=28,Pc.nonMaxSuppressionAsync(x,w,k,C,S);case 28:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 30:return T=Yn(m_("condition",t,n,r),"bool"),e.next=33,Mu(T);case 33:return e.t2=e.sent,E=[e.t2],e.abrupt("return",(T.dispose(),E));case 36:return e.abrupt("return",Js(m_("x",t,n,r),m_("y",t,n,r)));case 37:throw TypeError("Node type ".concat(t.op," is not implemented"));case 38:case"end":return e.stop()}}),e)}))),function(e,t,n){return s.apply(this,arguments)})(e,t,n);case"evaluation":return ma((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=m_("x",e,t,n),a=m_("k",e,t,n),i=m_("sorted",e,t,n),o=wu(r,a,i);return[o.values,o.indices];case"Unique":var s=m_("x",e,t,n),u=Cu(s);return[u.values,u.indices];case"UniqueV2":var c=m_("x",e,t,n),l=m_("axis",e,t,n),h=Cu(c,l);return[h.values,h.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return ma((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=m_("images",e,t,n),a=m_("size",e,t,n),i=m_("alignCorners",e,t,n),o=m_("halfPixelCenters",e,t,n);return[Pc.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=m_("images",e,t,n),u=m_("size",e,t,n),c=m_("alignCorners",e,t,n),l=m_("halfPixelCenters",e,t,n);return[Pc.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var h=m_("image",e,t,n),f=m_("boxes",e,t,n),d=m_("boxInd",e,t,n),p=m_("cropSize",e,t,n),m=m_("method",e,t,n),v=m_("extrapolationValue",e,t,n);return[Pc.cropAndResize(h,f,d,p,m,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return ma((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=m_("default",e,t,n);return[v_(e.name,t,n)||r];case"Placeholder":return[v_(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[x_(m_("x",e,t,n))];case"IdentityN":return m_("x",e,t,n).map((function(e){return x_(e)}));case"Snapshot":return[x_(m_("x",e,t,n))];case"Shape":return[gu(m_("x",e,t,n).shape,"int32")];case"ShapeN":return m_("x",e,t,n).map((function(e){return gu(e.shape)}));case"Size":return[Wa(m_("x",e,t,n).size,"int32")];case"Rank":return[Wa(m_("x",e,t,n).rank,"int32")];case"NoOp":return[Wa(1)];case"Print":var a=m_("x",e,t,n),i=m_("data",e,t,n),o=m_("message",e,t,n),s=m_("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return ma((function(){return function(e,t,n){switch(e.op){case"Equal":return[fo(m_("a",e,t,n),m_("b",e,t,n))];case"NotEqual":return[ms(m_("a",e,t,n),m_("b",e,t,n))];case"Greater":return[To(m_("a",e,t,n),m_("b",e,t,n))];case"GreaterEqual":return[Eo(m_("a",e,t,n),m_("b",e,t,n))];case"Less":return[Do(m_("a",e,t,n),m_("b",e,t,n))];case"LessEqual":return[Oo(m_("a",e,t,n),m_("b",e,t,n))];case"LogicalAnd":return[es(m_("a",e,t,n),m_("b",e,t,n))];case"LogicalNot":return[ts(m_("a",e,t,n))];case"LogicalOr":return[ns(m_("a",e,t,n),m_("b",e,t,n))];case"Select":case"SelectV2":return[po(m_("condition",e,t,n),m_("a",e,t,n),m_("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return ma((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[_r(m_("a",e,t,n),m_("b",e,t,n),m_("transposeA",e,t,n),m_("transposeB",e,t,n))];case"Transpose":return[xr(m_("x",e,t,n),m_("perm",e,t,n))];case"_FusedMatMul":var r=_slicedToArray(m_("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u=m_("numArgs",e,t,n),c=m_("leakyreluAlpha",e,t,n);if(o){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=_slicedToArray(m_("args",e,t,n),2),h=l[0],f=l[1];return[p.matMul({a:m_("a",e,t,n),b:m_("b",e,t,n),transposeA:m_("transposeA",e,t,n),transposeB:m_("transposeB",e,t,n),bias:h,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return ma((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Bi(m_("x",e,t,n),m_("mean",e,t,n),m_("variance",e,t,n),m_("offset",e,t,n),m_("scale",e,t,n),m_("epsilon",e,t,n))];case"LRN":return[Fo(m_("x",e,t,n),m_("radius",e,t,n),m_("bias",e,t,n),m_("alpha",e,t,n),m_("beta",e,t,n))];case"Softmax":return[iu(m_("x",e,t,n))];case"LogSoftmax":return[Ho(m_("x",e,t,n))];case"SparseToDense":return[Ou(m_("sparseIndices",e,t,n),m_("outputShape",e,t,n),m_("sparseValues",e,t,n),m_("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return ma((function(){return function(e,t,n){switch(e.op){case"Max":var r=m_("axis",e,t,n),a=m_("keepDims",e,t,n);return[Wo(m_("x",e,t,n),r,a)];case"Mean":var i=m_("axis",e,t,n),o=m_("keepDims",e,t,n);return[ss(m_("x",e,t,n),i,o)];case"Min":var s=m_("axis",e,t,n),u=m_("keepDims",e,t,n);return[us(m_("x",e,t,n),s,u)];case"Sum":var c=m_("axis",e,t,n),l=m_("keepDims",e,t,n);return[Go(m_("x",e,t,n),c,l)];case"All":var h=m_("axis",e,t,n),f=m_("keepDims",e,t,n);return[ui(m_("x",e,t,n),h,f)];case"Any":var d=m_("axis",e,t,n),p=m_("keepDims",e,t,n);return[ci(m_("x",e,t,n),d,p)];case"ArgMax":var m=m_("axis",e,t,n);return[li(m_("x",e,t,n),m)];case"ArgMin":var v=m_("axis",e,t,n);return[hi(m_("x",e,t,n),v)];case"Prod":var g=m_("axis",e,t,n),y=m_("keepDims",e,t,n);return[As(m_("x",e,t,n),g,y)];case"Cumsum":var _=m_("axis",e,t,n),b=m_("exclusive",e,t,n),x=m_("reverse",e,t,n);return[oo(m_("x",e,t,n),_,b,x)];case"Bincount":var w=m_("x",e,t,n),k=m_("weights",e,t,n),C=m_("size",e,t,n);return[Gi(w,k,C)];case"DenseBincount":var S=m_("x",e,t,n),T=m_("weights",e,t,n),E=m_("size",e,t,n),A=m_("binaryOutput",e,t,n);return[so(S,T,E,A)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return ma((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var a=m_("n",e,t,n),i=m_("axis",e,t,n),o=m_("tensors",e,t,n);return o=o.slice(0,a),[Di(o,i)];case"Gather":var s=m_("x",e,t,n),u=m_("indices",e,t,n);return[So(s,Yn(u,"int32"),0)];case"GatherV2":var c=m_("axis",e,t,n),l=m_("batchDims",e,t,n),h=m_("x",e,t,n),f=m_("indices",e,t,n);return[So(h,Yn(f,"int32"),c,l)];case"Reverse":for(var d=m_("dims",e,t,n),p=[],m=0;m<d.length;m++)d[m]&&p.push(m);var v=m_("x",e,t,n);return[Ws(v,p)];case"ReverseV2":var g=m_("axis",e,t,n),y=m_("x",e,t,n);return[Ws(y,g)];case"Slice":var _=m_("begin",e,t,n),b=m_("size",e,t,n);return[Li(m_("x",e,t,n),_,b)];case"StridedSlice":var x=m_("begin",e,t,n),w=m_("end",e,t,n),k=m_("strides",e,t,n),C=m_("beginMask",e,t,n),S=m_("endMask",e,t,n),T=m_("ellipsisMask",e,t,n),E=m_("newAxisMask",e,t,n),A=m_("shrinkAxisMask",e,t,n),M=m_("x",e,t,n);return[mu(M,x,w,k,C,S,T,E,A)];case"Pack":return ma((function(){var a=m_("axis",e,t,n),i=m_("tensors",e,t,n),o=i[0].shape,s=fu(i[0]).shape,u=i.map((function(e){var t=r.arraysEqual(e.shape,o);if(!t&&!r.arraysEqual(fu(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:Ii(e,o)}));return[du(u,a)]}));case"Unpack":var I=m_("axis",e,t,n),N=m_("tensor",e,t,n);return Tu(N,I);case"Tile":var R=m_("reps",e,t,n);return[wo(m_("x",e,t,n),R)];case"Split":case"SplitV":var D=m_("axis",e,t,n),O=m_("numOrSizeSplits",e,t,n),L=m_("x",e,t,n);return cu(L,O,D);case"ScatterNd":var F=m_("indices",e,t,n),P=m_("values",e,t,n),z=m_("shape",e,t,n);return[Du(F,P,z)];case"GatherNd":var B=m_("x",e,t,n),U=m_("indices",e,t,n);return[Lu(B,U)];case"SparseToDense":var V=m_("sparseIndices",e,t,n),W=m_("outputShape",e,t,n),G=m_("sparseValues",e,t,n),H=m_("defaultValue",e,t,n);return[Ou(V,G,W,G.dtype===H.dtype?H:Yn(H,G.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return ma((function(){return function(e,t,n){switch(e.op){case"FFT":return[ou(m_("x",e,t,n))];case"IFFT":return[su(m_("x",e,t,n))];case"RFFT":return[lu(m_("x",e,t,n))];case"IRFFT":return[uu(m_("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return ma((function(){return function(e,t,n){switch(e.op){case"Cast":return[Yn(m_("x",e,t,n),m_("dtype",e,t,n))];case"ExpandDims":var r=m_("axis",e,t,n);return[bo(m_("x",e,t,n),r)];case"Squeeze":var a=m_("axis",e,t,n);return[fu(m_("x",e,t,n),a)];case"Reshape":return[Ii(m_("x",e,t,n),m_("shape",e,t,n))];case"MirrorPad":return[ls(m_("x",e,t,n),m_("padding",e,t,n),m_("mode",e,t,n))];case"PadV2":case"Pad":return[bs(m_("x",e,t,n),m_("padding",e,t,n),m_("constantValue",e,t,n))];case"SpaceToBatchND":var i=m_("blockShape",e,t,n),o=m_("paddings",e,t,n);return[Ss(m_("x",e,t,n),i,o)];case"BatchToSpaceND":var s=m_("blockShape",e,t,n),u=m_("crops",e,t,n);return[zi(m_("x",e,t,n),s,u)];case"DepthToSpace":var c=m_("blockSize",e,t,n),l=m_("dataFormat",e,t,n).toUpperCase();return[uo(m_("x",e,t,n),c,l)];case"BroadcastTo":return[Hi(m_("x",e,t,n),m_("shape",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,m;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0?3:"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0?5:"LookupTableImportV2"===e.t0?5:"LookupTableFind"===e.t0?10:"LookupTableFindV2"===e.t0?10:15;break;case 3:return i=m_("keyDType",t,n,r),o=m_("valueDType",t,n,r),s=new cb(i,o),e.abrupt("return",(a.addHashTable(t.name,s),[s.handle]));case 5:return u=m_("tableHandle",t,n,r,a),c=m_("keys",t,n,r),l=m_("values",t,n,r),h=a.getHashTableById(u.id),e.next=8,h.import(c,l);case 8:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 10:return f=m_("tableHandle",t,n,r,a),d=m_("keys",t,n,r),p=m_("defaultValue",t,n,r),m=a.getHashTableById(f.id),e.next=13,m.find(d,p);case 13:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 15:throw TypeError("Node type ".concat(t.op," is not implemented"));case 16:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return o.apply(this,arguments)})(e,t,n,a);case"custom":var i=d_(e.op);if(i&&i.customExecutor)return i.customExecutor(new eb(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}var o,s,u}(e,t,n);return r.isPromise(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var hb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return _createClass(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function fb(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return __(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return __(e.name)[0]})));for(var h=_toConsumableArray(t);h.length>0;){var f=h.pop();(vb(f)||gb(f)||yb(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),h.push(e))})):i.push(f.name))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var db=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],pb=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],mb=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function vb(e){return db.indexOf(e.op)>=0}function gb(e){return pb.indexOf(e.op)>=0}function yb(e){return mb.indexOf(e.op)>=0}var _b=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}var t,n,a,i;return _createClass(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,_toConsumableArray(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=fb(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return __(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var a=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var i=a.map((function(e){return n.graph.nodes[__(e)[0]]})),o=t.map((function(e){return __(e)[0]})),s=o.map((function(e){return n.graph.nodes[e]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(i,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(e,s),this.compiledMap.set(u,c));var l={},h={};return ma((function(){var a=new hb(n.weightMap,l,h,n.functionExecutorMap),i=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=_slicedToArray(__(t),2),r=n[0],a=[];a[n[1]]=e[t],i[r]=a}));for(var s=n.getFrozenTensorIds(i),u={},f=0;f<c.length;f++){var d=c[f];if(!i[d.name]){var p=lb(d,i,a,n._resourceManager);if(r.isPromise(p))throw new Error("The execution of the op '".concat(d.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");i[d.name]=p,n.checkTensorForDisposal(d.name,d,i,a,s,o,u)}}return null==n.parent&&a.dispose(s),t.map((function(e){return v_(e,i,a)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[y_(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!a.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))}},{key:"executeAsync",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"_executeAsync",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),o=new hb(this.weightMap,a,i,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,o,n,r);case 7:return s=e.sent,u=n.map((function(e){return v_(e,s,o)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),h=new Set([].concat(_toConsumableArray(c),_toConsumableArray(l),_toConsumableArray(this.weightIds))),e.abrupt("return",(Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.isDisposed||h.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(h),u));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"executeFunctionAsync",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){var a,i=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"executeWithControlFlow",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,m,v,g,y,_,b,x,w=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[__(e)[0]]})),s=r.map((function(e){return __(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=fb(t,u,this.weightMap,this._initNodes),l=c.usedNodes,h=c.missingInputs,f=c.dynamicNode,d=c.syncInputs,p=[].concat(_toConsumableArray(o),_toConsumableArray(this.graph.weights),_toConsumableArray(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=_slicedToArray(__(e),2),r=n[0],a=[];a[n[1]]=t[e],m[r]=a})),v={},g=this.getFrozenTensorIds(m),y={};case 6:if(!(p.length>0)){e.next=12;break}return _=this.processStack(o,p,n,m,y,g,s,v,l),e.next=10,Promise.all(_);case 10:e.next=6;break;case 12:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((b=u.filter((function(e){return!vb(e)&&!v_(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=17;break}throw x="",null!=f&&(x="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(b,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(h,"]. ").concat(x));case 17:return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r,a){return t.apply(this,arguments)})},{key:"processStack",value:function(e,t,n,a,i,o,s,u,c){for(var l=this,h=[],f=function(){var e,f=t.pop();n.currentContext=f.contexts;var d="";if("Enter"===f.node.op&&m_("isConstant",f.node,a,n)&&(e=_slicedToArray(g_(f.node.name,n),1),d=e[0]),null==a[f.node.name]){var p,m=lb(f.node,a,n,l._resourceManager);d||(p=_slicedToArray(g_(f.node.name,n),1),d=p[0]);var v=n.currentContext;r.isPromise(m)?h.push(m.then((function(e){return a[d]=e,n.currentContext=v,l.checkTensorForDisposal(d,f.node,a,n,o,s,u),l.processChildNodes(f.node,t,n,a,i,c),e}))):(a[d]=m,l.checkTensorForDisposal(d,f.node,a,n,o,s,u),l.processChildNodes(f.node,t,n,a,i,c))}else l.processChildNodes(f.node,t,n,a,i,c)};t.length>0;)f();return h}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=_slicedToArray(g_(e.name,n),1)[0];!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!v_(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!v_(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var a=e[n],i=_slicedToArray(__(n),1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===a.shape.length&&a.shape.every((function(e,t){return-1===s[t]||s[t]===e}));r.assert(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(a.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&r.assert(a.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(a.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=_slicedToArray(__(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=_slicedToArray(__(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),bb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return _createClass(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),xb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new bb}var t,n,r;return _createClass(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=o.browserHTTPRequest(e,this.loadOptions);else{var t=o.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(o.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=2;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,this.handler.load();case 4:return t=e.sent,e.abrupt("return",this.loadSync(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=o.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new _b(B_.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=B_.Instance.transformGraph(e.modelInitializer);this.initializer=new _b(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=o.getSaveHandlers(t)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof Ct||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=3,this.executor.executeAsync(t,n);case 3:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function wb(e){return kb.apply(this,arguments)}function kb(){return(kb=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t,"model.json?tfjs-format=file")),r=new xb(t,n),e.next=7,r.load();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cb,Sb=n("YSVl");function Tb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(Ib(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=Tb(e[o],t,n,r);i[o]=s}return r.delete(e),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Eb(e){return null===e?null:Ib(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function Ab(e,t){return Mb.apply(this,arguments)}function Mb(){return(Mb=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var a,i,o,s,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Map,Tb(t,n,a),i=0,o=Array.from(a.keys());case 3:if(!(i<o.length)){e.next=14;break}if(s=o[i],u=a.get(s),!r.isPromise(u)){e.next=11;break}return e.next=9,u;case 9:c=e.sent,a.set(s,c);case 11:i++,e.next=3;break;case 14:return e.abrupt("return",Tb(t,n,a));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ib(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Ct))}function Nb(e){return e instanceof Ct?{value:e.clone(),recurse:!1}:Ib(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Rb=function(){function e(t){if(_classCallCheck(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return _createClass(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(CD){n.e(CD)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),Db=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,n.INITIAL_CAPACITY)}return _createClass(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){_get2(_getPrototypeOf(n.prototype),"isFull",this).call(this)&&this.expand(),_get2(_getPrototypeOf(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){_get2(_getPrototypeOf(n.prototype),"isFull",this).call(this)&&this.expand(),_get2(_getPrototypeOf(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(Rb);function Ob(e){return new Pb(e)}function Lb(e){return new zb(e)}Db.INITIAL_CAPACITY=32;var Fb=function(){function e(){_classCallCheck(this,e)}var t,n,r,a,i,o;return _createClass(e,[{key:"toArray",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"toArrayForTest",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=3,t.next();case 3:r=e.sent;case 4:if(r.done){e.next=11;break}return n.push(r.value),e.next=8,t.next();case 8:r=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"resolveFully",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent;case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"resolveWhile",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleErrors",value:function(e){return new jb(this,e)}},{key:"filter",value:function(e){return new Gb(this,e)}},{key:"map",value:function(e){return new Hb(this,e)}},{key:"mapAsync",value:function(e){return new qb(this,e)}},{key:"serialMapAsync",value:function(e){return new qb(this,e).serial()}},{key:"flatmap",value:function(e){return new Xb(this,e)}},{key:"forEachAsync",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"serialForEach",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Wb(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eb;return this.rowMajorBatch(e,t).map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eb;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=t[0];if(r.has(a))throw new Error("Circular references are not supported.");var i=n(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(Ib(a)){var o=Array.isArray(a)?[]:{};r.add(a);var s=function(a){var i=e(t.map((function(e){return e[a]})),n,r);o[a]=i};for(var u in a)s(u);return r.delete(a),o}throw new Error("Can't recurse into non-iterable type: ".concat(a))}return i.value}(e,t)}(e,n)}))}},{key:"concatenate",value:function(e,t){return new Zb(Ob([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new Vb(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new Ub(this,e)}},{key:"prefetch",value:function(e){return new Jb(this,e)}},{key:"shuffle",value:function(e,t){return new $b(this,e,t)}},{key:"serial",value:function(){return new Bb(this)}}]),e}(),Pb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).items=e,t.trav=0,t}return _createClass(r,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],e.abrupt("return",(this.trav++,{value:(n=t,Tb(n,Nb)),done:!1}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Fb),zb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).nextFn=e,t}return _createClass(r,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return t.apply(this,arguments)})}]),r}(Fb),Bb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=r.call(this)).upstream=e,t.lastRead=Promise.resolve({value:null,done:!1}),t}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Ub=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.maxCount=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:va(t.value);case 7:e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Vb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.maxCount=t,a.count=0,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Fb),Wb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.batchSize=t,n.enableSmallLastBatch=i,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=10;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=7;break}return e.abrupt("return",this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0});case 7:t.push(n.value);case 8:e.next=1;break;case 10:return e.abrupt("return",{value:t,done:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Gb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.predicate=t,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=5;break}return e.abrupt("return",t);case 5:va(t.value);case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Hb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,i,o,s,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=a.getTensorsInContainer(t.value),r=this.transform(t.value),i=a.getTensorsInContainer(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(CD){o.e(CD)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Fb),jb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.handler=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upstream.next();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),this.handler(e.t0)){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:e.next=0;break;case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return t.apply(this,arguments)})}]),a}(Fb),qb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,i,o,s,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=a.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,i=a.getTensorsInContainer(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(CD){o.e(CD)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Fb),Kb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(){var e;return _classCallCheck(this,a),(e=r.call(this)).outputQueue=new Db,e.lastRead=Promise.resolve({value:null,done:!1}),e}return _createClass(a,[{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Xb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,i,o,s,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=a.getTensorsInContainer(t.value),r=this.transform(t.value),i=a.getTensorsInContainer(r),this.outputQueue.pushAll(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(CD){o.e(CD)}finally{o.f()}return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Kb),Zb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).baseErrorHandler=t,n.lastRead=null,n.iterator=null,n.moreIterators=e,n}return _createClass(a,[{key:"summary",value:function(){return"TODO: fill in upstream of chained summaries -> Chained"}},{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.readFromChain(this.lastRead),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"readFromChain",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=9;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 9:return e.next=11,this.iterator.next();case 11:return r=e.sent,e.abrupt("return",r.done?(this.iterator=null,this.readFromChain(t)):r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(Fb);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(Cb||(Cb={}));var Yb=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cb.FAIL;return _classCallCheck(this,a),(t=r.call(this)).iterators=e,t.mismatchMode=n,t.count=0,t.currentPromise=null,t}return _createClass(a,[{key:"summary",value:function(){return"{TODO: fill in upstream of zip summaries} -> Zip"}},{key:"nextState",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=0,r=0,e.next=5,Ab(this.iterators,(function(e){return e instanceof Fb?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}}));case 5:if(a=e.sent,n!==r){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:if(!(r>0)){e.next=14;break}e.t0=this.mismatchMode,e.next=e.t0===Cb.FAIL?12:e.t0===Cb.SHORTEST?13:14;break;case 12:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 13:return e.abrupt("return",{value:null,done:!0});case 14:return e.abrupt("return",(this.count++,{value:a,done:!1}));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.currentPromise=this.nextState(this.currentPromise),this.currentPromise));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Fb),Jb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new Rb(r),a}return _createClass(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(Fb),$b=function(e){_inherits(i,e);var t,n,a=_createSuper(i);function i(e,t,n){var o;return _classCallCheck(this,i),(o=a.call(this,e,t)).upstream=e,o.windowSize=t,o.upstreamExhausted=!1,o.random=Sb.alea(n||r.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return _createClass(i,[{key:"next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=11;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if((n=e.sent).done){e.next=8;break}return e.abrupt("return",(this.refill(),n));case 8:this.upstreamExhausted=!0;case 9:e.next=1;break;case 11:return e.abrupt("return",{value:null,done:!0});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Jb),Qb=function(){function e(){_classCallCheck(this,e),this.size=null}var t,n,a;return _createClass(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;return r.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,rx));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return ma((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"map",value:function(e){var t=this;return ex(_asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return ma((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return ex(_asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return ex(_asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(r=Lb(_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.t1=!1,e.abrupt("return",{value:e.t0,done:e.t1});case 5:case"end":return e.stop()}}),e)})))).take(e),new Zb(r,void 0)));case 1:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var a=this,i=Sb.alea(t||r.now().toString());return ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.int32(),n&&(r+=i.int32()),t.next=4,a.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,r.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"toArrayForTest",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function ex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){_inherits(i,n);var r,a=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=a.apply(this,arguments)).size=t,e}return _createClass(i,[{key:"iterator",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}]),i}(Qb))}function tx(e){return ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ob(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function nx(e){if(!Ib(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cb.FAIL;return new Yb(e,t)},t.next=3,Ab(e,(function(e){if(e instanceof Qb)return{value:e.iterator(),recurse:!1};if(Ib(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 3:return t.t1=t.sent,t.t2=Cb.SHORTEST,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))),t)}function rx(e){return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof Ct||r.isTypedArray(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Ct?du(e):tn(e)}(e),recurse:!1}:{value:null,recurse:!0};var t,n}Qb.MAX_BUFFER_SIZE=1e4;var ax=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).input=e,t}return _createClass(r,[{key:"iterator",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return e.abrupt("return",e.sent.decodeUTF8().split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Qb),ix=Symbol("out"),ox=Symbol("field"),sx=Symbol("quote"),ux=Symbol("quoteafterquote"),cx=Symbol("quoteinquote"),lx=function(e){_inherits(s,e);var t,n,a,i,o=_createSuper(s);function s(e,t){var n;return _classCallCheck(this,s),(n=o.call(this)).input=e,n.hasHeader=!0,n.fullColumnNames=null,n.columnNamesValidated=!1,n.columnConfigs=null,n.configuredColumnsOnly=!1,n.delimiter=",",n.delimWhitespace=!1,n.base=new ax(e),t||(t={}),n.hasHeader=!1!==t.hasHeader,n.fullColumnNames=t.columnNames,n.columnConfigs=t.columnConfigs,n.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(r.assert(null==t.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),n.delimWhitespace=!0,n.delimiter=" "):n.delimiter=t.delimiter?t.delimiter:",",n}return _createClass(s,[{key:"columnNames",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setColumnNames",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,a,i,o,s,u=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=5;break}throw new Error("Column names must be provided if there is no header line.");case 5:if(this.fullColumnNames&&t&&r.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),a=Object.keys(n).filter((function(e){return n[e]>1})),r.assert(0===a.length,(function(){return"Duplicate column names found: "+a.toString()})),!this.columnConfigs){e.next=16;break}i=0,o=Object.keys(this.columnConfigs);case 9:if(!(i<o.length)){e.next=16;break}if(s=o[i],-1!==this.fullColumnNames.indexOf(s)){e.next=13;break}throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 13:i++,e.next=9;break;case 16:this.columnNamesValidated=!0;case 17:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"maybeReadHeaderLine",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=10;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return e.abrupt("return",this.parseRow(n.value,!1));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"iterator",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.next=6,this.base.iterator();case 6:return t=e.sent,e.abrupt("return",(this.hasHeader&&(t=t.skip(1)),t.map((function(e){return n.makeDataElement(e)}))));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));u=void 0}else{var c=Number(s);if(isNaN(c))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s);break;default:u=c}else u=c}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=ix,o=0;o<a;o++)switch(i){case ix:switch(e.charAt(o)){case'"':r=o+1,i=sx;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=ix;break;default:i=ox,r=o}break;case ox:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o)),i=ix,r=o+1}break;case sx:switch(e.charAt(o)){case'"':i=ux}break;case ux:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=ix,r=o+1;break;case'"':i=sx;break;default:i=cx}break;case cx:switch(e.charAt(o)){case'"':i=sx}}if(n.push(i===ux?e.substring(r,a-1):e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),s}(Qb),hx=function(e){_inherits(u,e);var t,n,a,i,o,s=_createSuper(u);function u(e){var t;_classCallCheck(this,u),(t=s.call(this)).microphoneConfig=e,t.isClosed=!1,t.fftSize=e.fftSize||1024;var n=Math.log2(t.fftSize);if(t.fftSize<0||n<4||n>14||!Number.isInteger(n))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(t.fftSize));if(t.numFrames=e.numFramesPerSpectrogram||43,t.sampleRateHz=e.sampleRateHz,t.columnTruncateLength=e.columnTruncateLength||t.fftSize,t.audioTrackConstraints=e.audioTrackConstraints,t.smoothingTimeConstant=e.smoothingTimeConstant||0,t.includeSpectrogram=!1!==e.includeSpectrogram,t.includeWaveform=!0===e.includeWaveform,!t.includeSpectrogram&&!t.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return t}return _createClass(u,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,!this.sampleRateHz){e.next=17;break}if(this.audioContext.sampleRate===this.sampleRateHz){e.next=15;break}throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));case 15:e.next=18;break;case 17:this.sampleRateHz=this.audioContext.sampleRate;case 18:n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize);case 20:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return o.apply(this,arguments)})},{key:"next",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"capture",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getAudioData",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(r.sizeFromShape(t));return n.set(e,n.length-e.length),tn(n,t)}}],[{key:"create",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!Be().get("IS_NODE")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return n=new u(t),e.next=6,n.start();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),u}(Fb),fx=function(e){_inherits(s,e);var t,n,a,i,o=_createSuper(s);function s(e,t){var n;if(_classCallCheck(this,s),(n=o.call(this)).webcamVideoElement=e,n.webcamConfig=t,n.isClosed=!0,n.resize=!1,n.needToResize())if(n.resize=!0,n.cropSize=[n.webcamConfig.resizeHeight,n.webcamConfig.resizeWidth],n.cropBoxInd=gu([0],"int32"),n.webcamConfig.centerCrop){var r=1*n.webcamConfig.resizeWidth/n.webcamVideoElement.width,a=1*n.webcamConfig.resizeHeight/n.webcamVideoElement.height,i=(1-r)/2,u=(1-a)/2;n.cropBox=yu([u,i,a+u,i+r],[1,4])}else n.cropBox=yu([0,0,1,1],[1,4]);return _possibleConstructorReturn(n)}return _createClass(s,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&r.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 10:if(this.stream){e.next=12;break}throw new Error("Could not obtain video from webcam.");case 12:try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return e.abrupt("return",(this.webcamVideoElement.play(),this.isClosed=!1,new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}}))));case 14:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return i.apply(this,arguments)})},{key:"next",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=u.fromPixels(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(this.resize){e.next=11;break}return e.abrupt("return",{value:t,done:!1});case 11:return e.prev=11,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 15:throw e.prev=15,e.t1=e.catch(11),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 18:return e.prev=18,t.dispose(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[2,6],[11,15,18,21]])}))),function(){return a.apply(this,arguments)})},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return ma((function(){var n,r=bo(Yn(e,"float32"),0);return n=Pc.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear"),Ii(n,n.shape.slice(1))}))}},{key:"capture",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},!Be().get("IS_NODE")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=7;break}if(t=document.createElement("video"),n.resizeWidth&&n.resizeHeight){e.next=6;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 6:t.width=n.resizeWidth,t.height=n.resizeHeight;case 7:return r=new s(t,n),e.next=10,r.start();case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),s}(Fb),dx=_createClass((function e(){_classCallCheck(this,e)})),px=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"split",value:function(e){return new mx(this,e)}}]),n}(Fb),mx=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.impl=new vx(e,t),a}return _createClass(r,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(px),vx=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.separator=t,a.carryover="",a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0));case 5:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=_createForOfIteratorHelper(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)i=a.value,this.outputQueue.push(i)}catch(CD){r.e(CD)}finally{r.f()}return e.abrupt("return",(this.carryover=n[n.length-1],!0));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Kb),gx=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"decodeUTF8",value:function(){return new yx(this)}}]),n}(Fb),yx=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).upstream=e,t.impl=new _x(e),t}return _createClass(r,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(px),_x=function(e){_inherits(a,e);var t,r=_createSuper(a);function a(e){var t;if(_classCallCheck(this,a),(t=r.call(this)).upstream=e,Be().get("IS_BROWSER"))t.decoder=new TextDecoder("utf-8");else{var i=n(5).StringDecoder;t.decoder=new i("utf8")}return _possibleConstructorReturn(t)}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:return t=e.sent,e.abrupt("return",!t.done&&(n=t.value,r=Be().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),!0));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Kb),bx=function(e){_inherits(a,e);var t,n=_createSuper(a);function a(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,a),(t=n.call(this)).file=e,t.options=i,r.assert(e instanceof Uint8Array||!!Be().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),t.offset=i.offset||0,t.chunkSize=i.chunkSize||1048576,t}return _createClass(a,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var i=n.file.slice(n.offset,r);a.readAsArrayBuffer(i)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.t1=!1,e.abrupt("return",{value:e.t0,done:e.t1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(gx);function xx(e){return"string"==typeof e&&"file://"===e.substr(0,7)}var wx=function(e){_inherits(a,e);var t,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,a),(t=r.call(this)).input=e,t.options=n,t}return _createClass(a,[{key:"iterator",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xx(this.input)&&Be().get("IS_NODE")&&(t=n(6),this.input=t.readFileSync(this.input.substr(7))),e.abrupt("return",new bx(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(dx),kx=function(e){_inherits(a,e);var t,n=_createSuper(a);function a(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,a),(t=n.call(this)).url=e,t.fileOptions=r,t}return _createClass(a,[{key:"iterator",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xx(this.url)?new wx(this.url,this.fileOptions).iterator():function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i,o,s,u,c=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},"string"==typeof t?a=t:(a=t.url,i={method:(o=t).method,headers:o.headers,body:o.body,mode:o.mode,credentials:o.credentials,cache:o.cache,redirect:o.redirect,referrer:o.referrer,integrity:o.integrity}),e.next=4,r.fetch(a,i);case 4:if(!(s=e.sent).ok){e.next=12;break}return e.t0=Uint8Array,e.next=9,s.arrayBuffer();case 9:return e.t1=e.sent,u=new e.t0(e.t1),e.abrupt("return",new bx(u,n));case 12:throw new Error(s.statusText);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.url,this.fileOptions));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(dx);function Cx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new lx(new kx(e),t)}function Sx(e){var t=Lb(e);return ex(_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function Tx(e){return ex(_asyncToGenerator(_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",Lb((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function Ex(e,t){return Ax.apply(this,arguments)}function Ax(){return(Ax=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fx.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mx(e){return Ix.apply(this,arguments)}function Ix(){return(Ix=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hx.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nx="3.1.0";function Rx(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&r.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var Dx=g.whereImpl,Ox=function(e){_inherits(i,e);var t,n,a=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=a.call(this)).blockSize=48,e.firstUse=!0,e.data=new G(_assertThisInitialized(e),fa()),e}return _createClass(i,[{key:"nextDataId",value:function(){return i.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Be().get("IS_NODE")&&v.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var a;if("string"===t&&null!=n&&n.length>0&&r.isString(n[0])){var i=n.map((function(e){return r.encodeString(e)}));a=this.write(i,e,t)}else a=this.write(n,e,t);return{dataId:a,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return v.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return r.decodeString(e)}))}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return Zn(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return fa().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.now(),e.abrupt("return",(t(),{kernelMs:r.now()-n}));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){Rx([e],"where");var t=this.readSync(e.dataId);return Dx(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return _get2(_getPrototypeOf(i.prototype),"epsilon",this).call(this)}}]),i}(H);function Lx(e,t,n){return function(a){var i=a.inputs,o=a.attrs,s=a.backend,u=i.x;if(Rx(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var c=s,l=c.data.get(u.dataId).values,h=r.sizeFromShape(u.shape),f=n||u.dtype,d=r.getArrayFromDType(f,h),p=0;p<h;++p)d[p]=t(l[p],o);return c.makeTensorInfo(u.shape,f,d)}}function Fx(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(Rx(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,h=t(c,l,i);return u.makeTensorInfo(s.shape,l,h)}}Ox.nextDataId=0,Sa("cpu",(function(){return new Ox}),1);var Px=Lx("Elu",(function(e){return e>=0?e:Math.exp(e)-1})),zx={kernelName:"Elu",backendName:"cpu",kernelFunc:Px};function Bx(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Ux={kernelName:"Identity",backendName:"cpu",kernelFunc:Bx};function Vx(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.alpha;Rx([i],"leakyRelu");for(var s=r.sizeFromShape(i.shape),u=n.data.get(i.dataId).values,c=r.getTypedArrayFromDType("float32",s),l=0;l<u.length;l++)c[l]=u[l]<0?o*u[l]:u[l];return n.makeTensorInfo(i.shape,"float32",c)}var Wx={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:Vx};function Gx(e){return function(t,n,a,i,o){var s=v.assertAndGetBroadcastShape(t,n),u=s.length,c=r.computeStrides(s),l=r.sizeFromShape(s),h=r.getTypedArrayFromDType(o,l),f=t.length,d=n.length,p=r.computeStrides(t),m=r.computeStrides(n),g=v.getBroadcastDims(t,s),y=v.getBroadcastDims(n,s);if(g.length+y.length===0)for(var _=0;_<h.length;++_)h[_]=e(a[_%a.length],i[_%i.length]);else for(var b=function(t){var n=r.indexToLoc(t,u,c),o=n.slice(-f);g.forEach((function(e){return o[e]=0}));var s=r.locToIndex(o,f,p),l=n.slice(-d);y.forEach((function(e){return l[e]=0}));var v=r.locToIndex(l,d,m);h[t]=e(a[s],i[v])},x=0;x<h.length;++x)b(x);return[h,s]}}var Hx=Gx((function(e,t){return e<0?t*e:e}));function jx(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;Rx([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=_slicedToArray(Hx(r.shape,a.shape,i,o,r.dtype),2),u=s[0],c=s[1];return n.makeTensorInfo(c,r.dtype,u)}var qx={kernelName:"Prelu",backendName:"cpu",kernelFunc:jx},Kx=Lx("Relu",(function(e){return Math.max(0,e)})),Xx={kernelName:"Relu",backendName:"cpu",kernelFunc:Kx},Zx=Lx("Relu6",(function(e){return Math.min(Math.max(0,e),6)})),Yx={kernelName:"Relu6",backendName:"cpu",kernelFunc:Zx};function Jx(e,t,n,r,a){if("linear"===n)return Bx({inputs:{x:t},backend:e});if("relu"===n)return Kx({inputs:{x:t},backend:e});if("elu"===n)return Px({inputs:{x:t},backend:e});if("relu6"===n)return Zx({inputs:{x:t},backend:e});if("prelu"===n)return jx({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Vx({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function $x(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var Qx={kernelName:"Complex",backendName:"cpu",kernelFunc:$x};function ew(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return $x({inputs:{real:ew(e,t,"float32"),imag:ew(e,t,"float32")},backend:e});var a=r.makeZerosTypedArray(r.sizeFromShape(t),n);return e.makeTensorInfo(t,n,a)}function tw(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var nw={kernelName:"Real",backendName:"cpu",kernelFunc:tw};function rw(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return Bx({inputs:{x:i},backend:n});var s=ew(n,i.shape,i.dtype),u=rw({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),c=$x({inputs:{real:u,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=tw({inputs:{input:i},backend:n}),h=rw({inputs:{x:l},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(l),h}if(!r.hasEncodingLoss(i.dtype,o)){var f=Bx({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o){var d=n.data.get(i.dataId).values,p=Int32Array.from(d);return n.makeTensorInfo(i.shape,"int32",p)}if("bool"===o){var m=n.data.get(i.dataId).values,v=r.toTypedArray([0],i.dtype),g=_slicedToArray(Gx((function(e,t){return e!==t?1:0}))(i.shape,[],m,v,"bool"),2),y=g[0],_=g[1];return n.makeTensorInfo(_,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}var aw={kernelName:"Cast",backendName:"cpu",kernelFunc:rw};function iw(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;Rx([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,h=r||o.dtype,f=_slicedToArray(t(o.shape,s.shape,c,l,h),2),d=f[0],p=f[1];return u.makeTensorInfo(p,h,d)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=rw({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),h=l.complexTensorInfos.imag,f=u.data.get(l.complexTensorInfos.real.dataId).values,d=u.data.get(h.dataId).values,p=rw({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(p.dataId),v=m.complexTensorInfos.imag,g=u.data.get(m.complexTensorInfos.real.dataId).values,y=u.data.get(v.dataId).values,_=_slicedToArray(n(o.shape,s.shape,f,d,g,y),3),b=_[0],x=_[1],w=_[2],k=u.makeTensorInfo(w,"float32",b),C=u.makeTensorInfo(w,"float32",x),S=$x({inputs:{real:k,imag:C},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(p),u.disposeIntermediateTensorInfo(k),u.disposeIntermediateTensorInfo(C),S}var T=u.data.get(o.dataId).values,E=u.data.get(s.dataId).values,A=r||o.dtype,M=_slicedToArray(t(o.shape,s.shape,T,E,A),2),I=M[0],N=M[1];return u.makeTensorInfo(N,A,I)}}function ow(e){return function(t,n,a,i,o,s){var u=v.assertAndGetBroadcastShape(t,n),c=r.sizeFromShape(u),l=u.length,h=r.computeStrides(u),f=r.getTypedArrayFromDType("float32",c),d=r.getTypedArrayFromDType("float32",c),p=v.getBroadcastDims(t,u),m=v.getBroadcastDims(n,u),g=v.mergeRealAndImagArrays(a,i),y=v.mergeRealAndImagArrays(o,s),_=t.length,b=r.computeStrides(t),x=n.length,w=r.computeStrides(n);if(p.length+m.length===0)for(var k=0;k<f.length;k++){var C=k%g.length,S=k%y.length,T=e(g[2*C],g[2*C+1],y[2*S],y[2*S+1]);f[k]=T.real,d[k]=T.imag}else for(var E=function(t){var n=r.indexToLoc(t,l,h),a=n.slice(-_);p.forEach((function(e){return a[e]=0}));var i=r.locToIndex(a,_,b),o=n.slice(-x);m.forEach((function(e){return o[e]=0}));var s=r.locToIndex(o,x,w),u=e(g[2*i],g[2*i+1],y[2*s],y[2*s+1]);f[t]=u.real,d[t]=u.imag},A=0;A<f.length;A++)E(A);return[f,d,u]}}var sw=Gx((function(e,t){return e+t})),uw=ow((function(e,t,n,r){return{real:e+n,imag:t+r}})),cw=iw("Add",sw,uw),lw={kernelName:"Add",backendName:"cpu",kernelFunc:cw};function hw(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.shape,s=r.sizeFromShape(i.shape),u=r.inferFromImplicitShape(o,s),c=r.sizeFromShape(u);r.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var l=n.data.get(i.dataId);if(null!=l.complexTensorInfos){var h=l.complexTensorInfos.imag;l.complexTensorInfos.real.shape=u,h.shape=u}return{dataId:i.dataId,shape:u,dtype:i.dtype}}var fw={kernelName:"Reshape",backendName:"cpu",kernelFunc:hw};function dw(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.a,o=t.b,s=a.transposeA,u=a.transposeB;Rx([i,o],"matMul");var c=i.shape.length,l=o.shape.length,h=s?i.shape[c-2]:i.shape[c-1],f=u?o.shape[l-1]:o.shape[l-2],d=s?i.shape[c-1]:i.shape[c-2],p=u?o.shape[l-2]:o.shape[l-1],m=i.shape.slice(0,-2),v=o.shape.slice(0,-2),g=r.sizeFromShape(m),y=r.sizeFromShape(v);r.assert(c>=2&&l>=2&&(g===y||1===g||1===y),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(m,") and (").concat(v,").")}));var _=(g>y?i.shape.slice(0,-2):o.shape.slice(0,-2)).concat([d,p]);r.assert(h===f,(function(){return"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(f,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var b=u?[y,p,f]:[y,f,p],x=hw({inputs:{x:i},backend:n,attrs:{shape:s?[g,h,d]:[g,d,h]}}),w=hw({inputs:{x:o},backend:n,attrs:{shape:b}}),k=s?x.shape[1]:x.shape[2],C=s?x.shape[2]:x.shape[1],S=u?w.shape[1]:w.shape[2],T=Math.max(g,y),E=n.data.get(x.dataId).values,A=n.data.get(w.dataId).values,M=r.computeStrides(x.shape),I=r.computeStrides(w.shape),N=_slicedToArray(s?[M[0],1,M[1]]:[M[0],M[1],1],3),R=N[0],D=N[1],O=N[2],L=_slicedToArray(u?[1,I[1],I[0]]:[I[1],1,I[0]],3),F=L[0],P=L[1],z=L[2],B=C*S,U=Zn([T,C,S],x.dtype),V=U.values,W=n.blockSize,G=0;G<T;G++)for(var H=0;H<C;H+=W)for(var j=0;j<S;j+=W)for(var q=0;q<k;q+=W)for(var K=Math.min(H+W,C),X=Math.min(j+W,S),Z=Math.min(q+W,k),Y=H;Y<K;Y++)for(var J=j;J<X;J++){for(var $=0,Q=q;Q<Z;Q++){var ee=Math.min(G,g-1)*R,te=Math.min(G,y-1)*z;$+=E[ee+Y*D+Q*O]*A[Q*F+J*P+te]}V[G*B+(Y*S+J)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(_,U.dtype,U.values)}var pw={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:dw},mw={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,h=o.transposeA,f=o.transposeB,d=o.activation,p=o.leakyreluAlpha,m=[];t=dw({inputs:{a:s,b:u},attrs:{transposeA:h,transposeB:f},backend:i}),c&&(n=cw({inputs:{a:t,b:c},backend:i}),m.push(t),t=n),d&&(r=Jx(i,t,d,l,p),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}};function vw(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var gw={kernelName:"Abs",backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;Rx(t,"abs");var a=new Float32Array(r.sizeFromShape(t.shape));return a=vw(n.data.get(t.dataId).values),n.makeOutput(a,t.shape,"float32")}},yw={kernelName:"Acos",backendName:"cpu",kernelFunc:Lx("Acos",(function(e){return Math.acos(e)}))},_w={kernelName:"Acosh",backendName:"cpu",kernelFunc:Lx("Acosh",(function(e){return Math.acosh(e)}))},bw={kernelName:"AddN",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;Rx(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Zn(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function xw(e,t,n,a,i){for(var o=t.length,s=r.sizeFromShape(t),u=r.computeStrides(t),c=r.computeStrides(i),l=r.getTypedArrayFromDType(n,r.sizeFromShape(i)),h=0;h<s;++h){for(var f=r.indexToLoc(h,o,u),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[a[p]];l[r.locToIndex(d,o,c)]=e[h]}return l}function ww(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;Rx(a,"transpose");for(var o=new Array(a.shape.length),s=0;s<o.length;s++)o[s]=a.shape[i[s]];var u=xw(r.data.get(a.dataId).values,a.shape,a.dtype,i,o);return{dataId:r.write(u,o,a.dtype),shape:o,dtype:a.dtype}}var kw={kernelName:"Transpose",backendName:"cpu",kernelFunc:ww},Cw={kernelName:"All",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims;Rx(i,"all");var u=r.parseAxisParam(o,i.shape),c=u,l=v.getAxesPermutation(c,i.shape.length),h=i;null!=l&&(h=ww({inputs:{x:i},backend:n,attrs:{perm:l}}),c=v.getInnerMostAxes(c.length,i.shape.length)),v.assertAxesAreInnerMostDims("all",c,h.shape.length);for(var f=_slicedToArray(v.computeOutAndReduceShapes(h.shape,c),2),d=f[0],p=f[1],m=r.sizeFromShape(p),g=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values,_=0;_<g.length;++_){for(var b=_*m,x=y[b],w=0;w<m;++w){var k=y[b+w];x=x&&k}g[_]=x}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(d,h.dtype,g);if(s){var S=hw({inputs:{x:C},backend:n,attrs:{shape:v.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(C),S}return C}},Sw={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims;Rx(i,"any");var u=r.parseAxisParam(o,i.shape),c=u,l=v.getAxesPermutation(c,i.shape.length),h=i;null!=l&&(h=ww({inputs:{x:i},backend:n,attrs:{perm:l}}),c=v.getInnerMostAxes(c.length,i.shape.length)),v.assertAxesAreInnerMostDims("any",c,h.shape.length);for(var f=_slicedToArray(v.computeOutAndReduceShapes(h.shape,c),2),d=f[0],p=f[1],m=r.sizeFromShape(p),g=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values,_=0;_<g.length;++_){for(var b=_*m,x=y[b],w=0;w<m;++w){var k=y[b+w];x=x||k}g[_]=x}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(d,h.dtype,g);if(s){var S=hw({inputs:{x:C},backend:n,attrs:{shape:v.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(C),S}return C}},Tw={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis;Rx(i,"argMax");var s=r.parseAxisParam(o,i.shape),u=v.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=ww({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=v.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],v.assertAxesAreInnerMostDims("argMax",s,c.shape.length);for(var h=_slicedToArray(v.computeOutAndReduceShapes(c.shape,s),2),f=h[0],d=h[1],p=r.sizeFromShape(f),m=r.makeZerosTypedArray(p,"int32"),g=r.sizeFromShape(d),y=n.data.get(c.dataId).values,_=0;_<m.length;++_){for(var b=_*g,x=y[b],w=0,k=0;k<g;++k){var C=y[b+k];C>x&&(x=C,w=k)}m[_]=w}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",m)}},Ew={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis;Rx(i,"argMin");var s=r.parseAxisParam(o,i.shape),u=v.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=ww({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=v.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],v.assertAxesAreInnerMostDims("argMin",s,c.shape.length);for(var h=_slicedToArray(v.computeOutAndReduceShapes(c.shape,s),2),f=h[0],d=h[1],p=r.sizeFromShape(f),m=r.makeZerosTypedArray(p,"int32"),g=r.sizeFromShape(d),y=n.data.get(c.dataId).values,_=0;_<m.length;++_){for(var b=_*g,x=y[b],w=0,k=0;k<g;++k){var C=y[b+k];C<x&&(x=C,w=k)}m[_]=w}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",m)}},Aw={kernelName:"Asin",backendName:"cpu",kernelFunc:Lx("Asin",(function(e){return Math.asin(e)}))},Mw={kernelName:"Asinh",backendName:"cpu",kernelFunc:Lx("Asinh",(function(e){return Math.asinh(e)}))},Iw={kernelName:"Atan",backendName:"cpu",kernelFunc:Lx("Atan",(function(e){return Math.atan(e)}))},Nw={kernelName:"Atan2",backendName:"cpu",kernelFunc:iw("Atan2",Gx((function(e,t){return Math.atan2(e,t)})))},Rw={kernelName:"Atanh",backendName:"cpu",kernelFunc:Lx("Atanh",(function(e){return Math.atanh(e)}))};function Dw(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.top,d=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Zn(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],_=a.outShape[3],b=0;b<a.batchSize;++b)for(var x=b*g,w=b*r[0],k=0;k<a.inChannels;++k)for(var C=0;C<a.outHeight;++C)for(var S=C*o-f,T=Math.max(0,S),E=Math.min(a.inHeight,l+S),A=x+C*y,M=0;M<a.outWidth;++M){for(var I=M*s-d,N=Math.max(0,I),R=Math.min(a.inWidth,h+I),D=p,O=0,L=0,F=T;F<E;F+=u){for(var P=w+F*r[1],z=N;z<R;z+=c){var B=e[P+z*r[2]+k];"max"===i&&B>D?D=B:"avg"===i&&(O+=B,L++)}if(isNaN(D))break}v[A+M*_+k]="avg"===i?O/L:D}return m}function Ow(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Zn(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,m=Zn(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var _=y*s-d,b=_;b<0;)b+=c;for(var x=Math.min(r.inHeight,h+_),w=0;w<r.outWidth;++w){for(var k=w*u-p,C=k;C<0;)C+=l;for(var S=Math.min(r.inWidth,f+k),T=Number.NEGATIVE_INFINITY,E=-1,A=b;A<x;A+=c)for(var M=A-_,I=C;I<S;I+=l){var N=I-k,R=m.get(v,A,I,g);R>T&&(T=R,E=a?i?((v*r.inHeight+A)*r.inWidth+I)*r.inChannels+g:(A*r.inWidth+I)*r.inChannels+g:M*f+N)}o.set(E,v,y,w,g)}}return o}function Lw(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,h=a.dilationWidth,f=a.effectiveFilterDepth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=Zn(a.outShape,n),b=_.values,x=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],C=a.outShape[4],S=0;S<a.batchSize;++S)for(var T=S*x,E=S*r[0],A=0;A<a.inChannels;++A)for(var M=0;M<a.outDepth;++M){for(var I=M*o-m,N=I;N<0;)N+=c;for(var R=Math.min(a.inDepth,f+I),D=T+M*w,O=0;O<a.outHeight;++O){for(var L=O*s-v,F=L;F<0;)F+=l;for(var P=Math.min(a.inHeight,d+L),z=D+O*k,B=0;B<a.outWidth;++B){for(var U=B*u-g,V=U;V<0;)V+=h;for(var W=Math.min(a.inWidth,p+U),G=z+B*C,H=y,j=0,q=0,K=N;K<R;K+=c){for(var X=E+K*r[1],Z=F;Z<P;Z+=l){for(var Y=X+Z*r[2],J=V;J<W;J+=h){var $=e[Y+J*r[3]+A];if("max"===i&&$>H?H=$:"avg"===i&&(j+=$,q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}b[G+A]="avg"===i?j/q:H}}}return _}var Fw={kernelName:"AvgPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x;Rx(i,"avgPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.assert(v.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '1'")}));var l,h=v.computePool2DInfo(i.shape,o,s,1,u,c);if(1===h.filterWidth&&1===h.filterHeight&&r.arraysEqual(h.inShape,h.outShape))l=Bx({inputs:{x:i},backend:n});else{var f=n.data.get(i.dataId).values,d=r.computeStrides(i.shape),p=Dw(f,0,i.dtype,d,h,"avg");l=n.makeTensorInfo(h.outShape,i.dtype,p.values)}return l}},Pw={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode,l=a.dataFormat;Rx(i,"avgPool3d");var h=v.computePool3DInfo(i.shape,o,s,1,u,c,l),f=Lw(n.data.get(i.dataId).values,0,i.dtype,r.computeStrides(i.shape),h,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}},zw={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;Rx([a,i],"avgPool3DGrad");for(var l=v.computePool3DInfo(i.shape,o,s,1,u,c),h=l.strideDepth,f=l.strideHeight,d=l.strideWidth,p=l.filterDepth,m=l.filterHeight,g=l.filterWidth,y=l.dilationDepth,_=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,C=x-1-l.padInfo.front,S=k-1-l.padInfo.left,T=w-1-l.padInfo.top,E=Zn(i.shape,"float32"),A=1/(p*m*g),M=n.bufferSync(a),I=0;I<l.batchSize;++I)for(var N=0;N<l.inChannels;++N)for(var R=0;R<l.inDepth;++R)for(var D=0;D<l.inHeight;++D)for(var O=0;O<l.inWidth;++O){for(var L=R-C,F=D-T,P=O-S,z=0,B=0;B<x;B+=y){var U=(L+B)/h;if(!(U<0||U>=l.outDepth||Math.floor(U)!==U))for(var V=0;V<w;V+=_){var W=(F+V)/f;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var G=0;G<k;G+=b){var H=(P+G)/d;H<0||H>=l.outWidth||Math.floor(H)!==H||(z+=M.get(I,U,W,H,N))}}}E.set(z*A,I,R,D,O,N)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},Bw={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Rx([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=v.computePool2DInfo(o.shape,s,u,1,c),h=l.strideHeight,f=l.strideWidth,d=l.filterHeight,p=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterHeight,_=l.effectiveFilterWidth,b=_-1-l.padInfo.left,x=y-1-l.padInfo.top,w=Zn(o.shape,"float32"),k=1/(d*p),C=n.data.get(a.dataId).values,S=Zn(a.shape,"float32",C),T=0;T<l.batchSize;++T)for(var E=0;E<l.inChannels;++E)for(var A=0;A<l.inHeight;++A)for(var M=0;M<l.inWidth;++M){for(var I=A-x,N=M-b,R=0,D=0;D<y;D+=m){var O=(I+D)/h;if(!(O<0||O>=l.outHeight||Math.floor(O)!==O))for(var L=0;L<_;L+=g){var F=(N+L)/f;F<0||F>=l.outWidth||Math.floor(F)!==F||(R+=S.get(T,O,F,E))}}w.set(R*k,T,A,M,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},Uw={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.scale,s=t.offset,u=t.mean,c=t.variance;r.assert(u.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),r.assert(null==s||u.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),r.assert(null==o||u.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Rx([i,u,c,o,s],"batchNorm");var l=a.varianceEpsilon;null==l&&(l=.001);for(var h=n.data.get(i.dataId).values,f=n.data.get(u.dataId).values,d=n.data.get(c.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),m=s?n.data.get(s.dataId).values:new Float32Array([0]),v=new Float32Array(h.length),g=m.length,y=p.length,_=d.length,b=f.length,x=0,w=0,k=0,C=0,S=0;S<h.length;++S)v[S]=m[x++]+(h[S]-f[w++])*p[k++]/Math.sqrt(d[C++]+l),x>=g&&(x=0),w>=b&&(w=0),k>=y&&(k=0),C>=_&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,v)}};function Vw(e,t,n,a,i){var o=h.isSliceContinous(a,t,n),s=r.sizeFromShape(n),u=r.computeStrides(a);if(o){var c=h.computeFlatOffset(t,u);return"string"===i?e.slice(c,c+s):e.subarray(c,c+s)}for(var l=Zn(a,i,"string"===i?v.fromUint8ToStringArray(e):e),f=Zn(n,i),d=0;d<f.size;++d){var p=f.indexToLoc(d),m=p.map((function(e,n){return e+t[n]}));f.set.apply(f,[l.get.apply(l,_toConsumableArray(m))].concat(_toConsumableArray(p)))}return"string"===i?v.fromStringArrayToUint8(f.values):f.values}function Ww(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;Rx(a,"slice");var s=_slicedToArray(h.parseSliceParams(a,i,o),2),u=s[0],c=s[1];h.assertParamsValid(a,u,c);var l=Vw(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var Gw={kernelName:"Slice",backendName:"cpu",kernelFunc:Ww},Hw={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Rx([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=v.getReshaped(a.shape,i,s),c=v.getPermuted(u.length,i.length),l=v.getReshapedPermuted(a.shape,i,s),h=v.getSliceBeginCoords(o,i.length),f=v.getSliceSize(l,o,i.length),d=hw({inputs:{x:a},backend:n,attrs:{shape:u}}),p=ww({inputs:{x:d},backend:n,attrs:{perm:c}}),m=hw({inputs:{x:p},backend:n,attrs:{shape:l}}),g=Ww({inputs:{x:m},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};function jw(e,t,n,a,i){for(var o=r.sizeFromShape(a),s=r.makeZerosTypedArray(i,n),u=0;u<e.length;u++){var c=e[u];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(s[c]+=o>0?t[u]:1)}return s}function qw(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Zn([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||o.set(r?1:t.size>0?o.get(s,c)+t.get(s,u):o.get(s,c)+1,s,c)}return o}var Kw={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=jw(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};function Xw(e){return function(t,n,a){for(var i=r.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)i[o]=e(t[o],a);return i}}var Zw=Xw((function(e){return Math.ceil(e)})),Yw={kernelName:"Ceil",backendName:"cpu",kernelFunc:Fx("Ceil",Zw)},Jw={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:Lx("ClipByValue",(function(e,t){return e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e}))},$w={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,a=new Float32Array(r.sizeFromShape(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.imag,s=n.data.get(i.complexTensorInfos.real.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++)a[c]=Math.hypot(s[c],u[c]);return n.makeOutput(a,t.shape,"float32")}};function Qw(e,t,n,a){var i=r.getArrayFromDType(n,r.sizeFromShape(t));if(a&&"string"!==n){var o=0;e.forEach((function(e){var t=r.sizeFromShape(e.shape);i.set(e.vals,o),o+=t}))}else{var s=0;e.forEach((function(e){for(var r="string"===n?v.fromUint8ToStringArray(e.vals):e.vals,a=0,o=0;o<e.shape[0];++o)for(var u=o*t[1]+s,c=0;c<e.shape[1];++c)i[u+c]=r[a++];s+=e.shape[1]}))}return i}function ek(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var tk={kernelName:"Imag",backendName:"cpu",kernelFunc:ek};function nk(e){var t=e.inputs,n=e.backend,a=e.attrs.axis,i=r.parseAxisParam(a,t[0].shape)[0],o=v.computeOutShape(t.map((function(e){return e.shape})),i);if(0===r.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var s=t.filter((function(e){return r.sizeFromShape(e.shape)>0}));if(1===s.length)return Bx({inputs:{x:s[0]},backend:n});var u=s.map((function(e){return e.shape}));if(v.assertParamsConsistent(u,i),"complex64"===s[0].dtype){var c=s.map((function(e){return tw({inputs:{input:e},backend:n})})),l=s.map((function(e){return ek({inputs:{input:e},backend:n})})),h=nk({inputs:c,backend:n,attrs:{axis:i}}),f=nk({inputs:l,backend:n,attrs:{axis:i}}),d=$x({inputs:{real:h,imag:f},backend:n});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),d}var p=s.map((function(e){var t=r.sizeFromShape(e.shape.slice(i));return hw({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),m=Qw(p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}})),o=v.computeOutShape(p.map((function(e){return e.shape})),1),t[0].dtype,1===p[0].shape[0]),g=v.computeOutShape(s.map((function(e){return e.shape})),i),y=n.makeTensorInfo(g,t[0].dtype,m);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var rk={kernelName:"Concat",backendName:"cpu",kernelFunc:nk};function ak(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,h=a.dimRoundingMode;Rx([i,o],"conv2d");for(var f=v.convertConv2DDataFormat(c),d=v.computeConv2DInfo(i.shape,o.shape,s,l,u,h,!1,f),p=d.filterHeight,m=d.filterWidth,g=d.dilationHeight,y=d.dilationWidth,_=d.padInfo.left,b=d.padInfo.top,x="channelsLast"===d.dataFormat,w=new xt(d.outShape,i.dtype),k=r.computeStrides(i.shape),C=r.computeStrides(o.shape),S=k[0],T=x?k[1]:k[2],E=x?k[2]:1,A=x?1:k[1],M=w.strides[0],I=x?w.strides[1]:w.strides[2],N=x?w.strides[2]:1,R=x?1:w.strides[1],D=n.data.get(i.dataId).values,O=n.data.get(o.dataId).values,L=w.values,F=0;F<d.batchSize;++F)for(var P=F*S,z=F*M,B=0;B<d.outHeight;++B)for(var U=z+B*I,V=B*d.strideHeight-b,W=0;W<p;++W){var G=V+W*g;if(!(G<0||G>=d.inHeight))for(var H=W*C[0],j=P+G*T,q=0;q<d.outWidth;++q)for(var K=U+q*N,X=q*d.strideWidth-_,Z=0;Z<m;++Z){var Y=X+Z*y;if(!(Y<0||Y>=d.inWidth))for(var J=j+Y*E,$=H+Z*C[1],Q=0;Q<d.inChannels;++Q){for(var ee=D[J+Q*A],te=0;te<d.outChannels;++te)L[K+te*R]+=ee*O[$+te];$+=d.outChannels}}}return n.makeTensorInfo(w.shape,w.dtype,L)}var ik={kernelName:"Conv2D",backendName:"cpu",kernelFunc:ak},ok={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;Rx([a,i],"conv2dBackpropFilter");for(var h=v.convertConv2DDataFormat(u),f=v.computeConv2DInfo(a.shape,l,o,1,s,c,!1,h),d=f.strideHeight,p=f.strideWidth,m=f.filterHeight,g=f.filterWidth,y="channelsLast"===f.dataFormat,_=new xt(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,C=new xt(a.shape,a.dtype,w),S=new xt(i.shape,i.dtype,k),T=0;T<m;++T)for(var E=Math.max(0,Math.ceil((x-T)/d)),A=Math.min(f.outHeight,(f.inHeight+x-T)/d),M=0;M<g;++M)for(var I=Math.max(0,Math.ceil((b-M)/p)),N=Math.min(f.outWidth,(f.inWidth+b-M)/p),R=0;R<f.inChannels;++R)for(var D=0;D<f.outChannels;++D){for(var O=0,L=0;L<f.batchSize;++L)for(var F=E;F<A;++F)for(var P=T+F*d-x,z=I;z<N;++z){var B=M+z*p-b;O+=y?C.get(L,P,B,R)*S.get(L,F,z,D):C.get(L,R,P,B)*S.get(L,D,F,z)}_.set(O,T,M,R,D)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},sk={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.dy,o=t.filter,s=a.inputShape,u=a.strides,c=a.pad,l=a.dataFormat,h=a.dimRoundingMode;Rx([i,o],"conv2dBackpropInput");var f=r.computeStrides(o.shape),d=r.computeStrides(i.shape),p=v.convertConv2DDataFormat(l),m=v.computeConv2DInfo(s,o.shape,u,1,c,h,!1,p),g=new xt(m.inShape,"float32"),y=g.values,_=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,x=_slicedToArray(f,3),w=x[0],k=x[1],C=x[2],S=m.batchSize,T=m.filterHeight,E=m.filterWidth,A=m.inChannels,M=m.inHeight,I=m.inWidth,N=m.outChannels,R=m.outHeight,D=m.outWidth,O=m.strideHeight,L=m.strideWidth;p=m.dataFormat;for(var F=T-1-m.padInfo.top,P=E-1-m.padInfo.left,z="channelsLast"===p,B=g.strides[0],U=z?g.strides[1]:g.strides[2],V=z?g.strides[2]:1,W=z?1:g.strides[1],G=d[0],H=z?d[1]:d[2],j=z?d[2]:1,q=z?1:d[1],K=0;K<S;++K)for(var X=0;X<A;++X)for(var Z=0;Z<M;++Z)for(var Y=Z-F,J=Math.max(0,Math.ceil(Y/O)),$=Math.min(R,(T+Y)/O),Q=0;Q<I;++Q){for(var ee=Q-P,te=Math.max(0,Math.ceil(ee/L)),ne=Math.min(D,(E+ee)/L),re=0,ae=J;ae<$;++ae)for(var ie=ae*O-Y,oe=te;oe<ne;++oe)for(var se=G*K+H*ae+j*oe,ue=w*(T-1-ie)+k*(E-1-(oe*L-ee))+C*X,ce=0;ce<N;++ce)re+=_[se+q*ce]*b[ue+ce];y[B*K+U*Z+V*Q+W*X]=re}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},uk={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=a.strides,u=a.pad,c=a.dilations;Rx([i,o],"conv3d");for(var l=v.computeConv3DInfo(i.shape,o.shape,s,c,u),h=l.filterDepth,f=l.filterHeight,d=l.filterWidth,p=l.dilationDepth,m=l.dilationHeight,g=l.dilationWidth,y=l.padInfo,_=y.front,b=y.left,x=y.top,w=new xt(l.outShape,i.dtype),k=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,S=w.values,T=r.computeStrides(i.shape),E=r.computeStrides(o.shape),A=0;A<l.batchSize;++A)for(var M=A*T[0],I=A*w.strides[0],N=0;N<l.outDepth;++N)for(var R=I+N*w.strides[1],D=N*l.strideDepth-_,O=0;O<h;++O){var L=D+O*p;if(!(L<0||L>=l.inDepth))for(var F=O*E[0],P=M+L*T[1],z=0;z<l.outHeight;++z)for(var B=R+z*w.strides[2],U=z*l.strideHeight-x,V=0;V<f;++V){var W=U+V*m;if(!(W<0||W>=l.inHeight))for(var G=F+V*E[1],H=P+W*T[2],j=0;j<l.outWidth;++j)for(var q=B+j*l.outChannels,K=j*l.strideWidth-b,X=0;X<d;++X){var Z=K+X*g;if(!(Z<0||Z>=l.inWidth))for(var Y=H+Z*l.inChannels,J=G+X*E[2],$=0;$<l.inChannels;++$){for(var Q=k[Y+$],ee=0;ee<l.outChannels;++ee)S[q+ee]+=Q*C[J+ee];J+=l.outChannels}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},ck={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.dy,s=a.strides,u=a.pad,c=a.filterShape;Rx([i,o],"conv3dBackpropFilterV2");for(var l=r.computeStrides(i.shape),h=r.computeStrides(o.shape),f=v.computeConv3DInfo(i.shape,c,s,1,u),d=f.strideDepth,p=f.strideHeight,m=f.strideWidth,g=f.filterDepth,y=f.filterHeight,_=f.filterWidth,b=new xt(f.filterShape,"float32"),x=b.values,w=_slicedToArray(b.strides,4),k=w[0],C=w[1],S=w[2],T=w[3],E=n.data.get(o.dataId).values,A=_slicedToArray(h,4),M=A[0],I=A[1],N=A[2],R=A[3],D=n.data.get(i.dataId).values,O=_slicedToArray(l,4),L=O[0],F=O[1],P=O[2],z=O[3],B=f.padInfo.front,U=f.padInfo.left,V=f.padInfo.top,W=0;W<g;++W)for(var G=Math.max(0,Math.ceil((B-W)/d)),H=Math.min(f.outDepth,(f.inDepth+B-W)/d),j=W*k,q=0;q<y;++q)for(var K=Math.max(0,Math.ceil((V-q)/p)),X=Math.min(f.outHeight,(f.inHeight+V-q)/p),Z=q*C+j,Y=0;Y<_;++Y)for(var J=Math.max(0,Math.ceil((U-Y)/m)),$=Math.min(f.outWidth,(f.inWidth+U-Y)/m),Q=Y*S+Z,ee=0;ee<f.inChannels;++ee)for(var te=ee*T+Q,ne=0;ne<f.outChannels;++ne){for(var re=0,ae=0;ae<f.batchSize;++ae)for(var ie=ae*L,oe=ae*M,se=G;se<H;++se)for(var ue=(W+se*d-B)*F+ie,ce=se*I+oe,le=K;le<X;++le)for(var he=(q+le*p-V)*P+ue,fe=le*N+ce,de=J;de<$;++de)re+=D[(Y+de*m-U)*z+he+ee]*E[de*R+fe+ne];x[te+ne]=re}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},lk={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.dy,o=t.filter,s=a.pad,u=a.strides,c=a.inputShape;Rx([i],"conv3dBackpropInputV2");for(var l=r.computeStrides(i.shape),h=r.computeStrides(o.shape),f=v.computeConv3DInfo(c,o.shape,u,1,s),d=new xt(f.inShape,"float32"),p=d.values,m=_slicedToArray(d.strides,4),g=m[0],y=m[1],_=m[2],b=m[3],x=n.data.get(i.dataId).values,w=_slicedToArray(l,4),k=w[0],C=w[1],S=w[2],T=w[3],E=n.data.get(o.dataId).values,A=_slicedToArray(h,4),M=A[0],I=A[1],N=A[2],R=A[3],D=f.batchSize,O=f.filterDepth,L=f.filterHeight,F=f.filterWidth,P=f.inChannels,z=f.inDepth,B=f.inHeight,U=f.inWidth,V=f.outChannels,W=f.outDepth,G=f.outHeight,H=f.outWidth,j=f.strideDepth,q=f.strideHeight,K=f.strideWidth,X=O-1-f.padInfo.front,Z=L-1-f.padInfo.top,Y=F-1-f.padInfo.left,J=0;J<D;++J)for(var $=0;$<P;++$)for(var Q=0;Q<z;++Q)for(var ee=Q-X,te=Math.max(0,Math.ceil(ee/j)),ne=Math.min(W,(O+ee)/j),re=0;re<B;++re)for(var ae=re-Z,ie=Math.max(0,Math.ceil(ae/q)),oe=Math.min(G,(L+ae)/q),se=0;se<U;++se){for(var ue=se-Y,ce=Math.max(0,Math.ceil(ue/K)),le=Math.min(H,(F+ue)/K),he=0,fe=te;fe<ne;++fe)for(var de=fe*j-ee,pe=ie;pe<oe;++pe)for(var me=pe*q-ae,ve=ce;ve<le;++ve)for(var ge=k*J+C*fe+S*pe+T*ve,ye=M*(O-1-de)+I*(L-1-me)+N*(F-1-(ve*K-ue))+R*$,_e=0;_e<V;++_e)he+=x[ge+_e]*E[ye+_e];p[g*J+y*Q+_*re+b*se+$]=he}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},hk=Lx(He,(function(e){return Math.cos(e)})),fk={kernelName:He,backendName:"cpu",kernelFunc:hk},dk={kernelName:"Cosh",backendName:"cpu",kernelFunc:Lx("Cosh",(function(e){return Math.cosh(e)}))},pk={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,i=t.image,o=t.boxes,s=t.boxInd,u=a.cropSize,c=a.method,l=a.extrapolationValue,h=_slicedToArray(i.shape,4),f=h[0],d=h[1],p=h[2],m=h[3],v=o.shape[0],g=_slicedToArray(u,2),y=g[0],_=g[1],b=Zn([v,y,_,m],"float32"),x=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,k=n.data.get(i.dataId).values,C=r.computeStrides(i.shape),S=r.computeStrides(b.shape),T=0;T<v;T++){var E=4*T,A=x[E],M=x[E+1],I=x[E+2],N=x[E+3],R=w[T];if(!(R>=f))for(var D=y>1?(I-A)*(d-1)/(y-1):0,O=_>1?(N-M)*(p-1)/(_-1):0,L=0;L<y;L++){var F=y>1?A*(d-1)+L*D:.5*(A+I)*(d-1);if(F<0||F>d-1)for(var P=0;P<_;P++)for(var z=0;z<m;z++)b.values[z+P*S[2]+L*S[1]+T*S[0]]=l;else if("bilinear"===c)for(var B=Math.floor(F),U=Math.ceil(F),V=F-B,W=0;W<_;W++){var G=_>1?M*(p-1)+W*O:.5*(M+N)*(p-1);if(G<0||G>p-1)for(var H=0;H<m;H++)b.values[H+W*S[2]+L*S[1]+T*S[0]]=l;else for(var j=Math.floor(G),q=Math.ceil(G),K=G-j,X=0;X<m;X++){var Z=X+j*C[2]+B*C[1]+R*C[0],Y=k[Z],J=k[Z=X+q*C[2]+B*C[1]+R*C[0]],$=k[Z=X+j*C[2]+U*C[1]+R*C[0]],Q=k[Z=X+q*C[2]+U*C[1]+R*C[0]],ee=Y+(J-Y)*K;Z=X+W*S[2]+L*S[1]+T*S[0],b.values[Z]=ee+($+(Q-$)*K-ee)*V}}else for(var te=0;te<_;++te){var ne=_>1?M*(p-1)+te*O:.5*(M+N)*(p-1);if(ne<0||ne>p-1)for(var re=0;re<m;re++)b.values[re+te*S[2]+L*S[1]+T*S[0]]=l;else for(var ae=Math.round(ne),ie=Math.round(F),oe=0;oe<m;oe++)b.values[oe+te*S[2]+L*S[1]+T*S[0]]=k[oe+ae*C[2]+ie*C[1]+R*C[0]]}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},mk={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.exclusive,u=a.reverse;Rx(i,"cumsum");var c=v.getAxesPermutation([o],i.shape.length),l=i;null!=c&&(l=ww({inputs:{x:i},backend:n,attrs:{perm:c}}));var h=v.getInnerMostAxes(1,i.shape.length)[0];if(h!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(h));for(var f=Dt(l.dtype,"int32"),d=r.makeZerosTypedArray(r.sizeFromShape(l.shape),f),p=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],g=u?function(e,t){return e+m-t-1}:function(e,t){return e+t},y=0;y<p.length;y+=m)for(var _=0;_<m;_++){var b=g(y,_);if(0===_)d[b]=s?0:p[b];else{var x=g(y,_-1);d[b]=s?p[x]+d[x]:p[b]+d[x]}}var w=n.makeTensorInfo(l.shape,f,d);if(null!=c){var k=ww({inputs:{x:w},backend:n,attrs:{perm:v.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(l),k}return w}},vk={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=jw(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=qw(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},gk={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.blockSize,s=a.dataFormat;r.assert("NHWC"===s,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s)})),r.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var u=i.shape[0],c=i.shape[1],l=i.shape[2],h=i.shape[3],f=c*o,d=l*o,p=h/(o*o),m=n.data.get(i.dataId).values,v=new Float32Array(u*f*d*p),g=0,y=0;y<u;++y)for(var _=0;_<f;++_)for(var b=Math.floor(_/o),x=_%o,w=0;w<d;++w)for(var k=Math.floor(w/o),C=(x*o+w%o)*p,S=0;S<p;++S)v[g++]=m[S+C+h*(k+l*(b+c*y))];return n.makeTensorInfo([u,f,d,p],i.dtype,v)}};function yk(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=a.strides,u=a.pad,c=a.dilations,l=a.dimRoundingMode;Rx([i,o],"depthwiseConv2DNative");var h=r.computeStrides(i.shape),f=r.computeStrides(o.shape),d=c;null==d&&(d=[1,1]),r.assert(v.eitherStridesOrDilationsAreOne(s,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(d,"'")}));for(var p=v.computeConv2DInfo(i.shape,o.shape,s,d,u,l,!0),m=p.filterHeight,g=p.filterWidth,y=p.dilationHeight,_=p.dilationWidth,b=p.padInfo,x=b.left,w=b.top,k=p.outChannels/p.inChannels,C=new xt(p.outShape,i.dtype),S=n.data.get(i.dataId).values,T=n.data.get(o.dataId).values,E=C.values,A=0;A<p.batchSize;++A)for(var M=A*h[0],I=A*C.strides[0],N=0;N<p.outHeight;++N)for(var R=I+N*C.strides[1],D=N*p.strideHeight-x,O=0;O<m;++O){var L=D+O*y;if(!(L<0||L>=p.inHeight))for(var F=O*f[0],P=M+L*h[1],z=0;z<p.outWidth;++z)for(var B=R+z*C.strides[2],U=z*p.strideWidth-w,V=0;V<g;++V){var W=U+V*_;if(!(W<0||W>=p.inWidth))for(var G=P+W*p.inChannels,H=B,j=F+V*f[1],q=0;q<p.inChannels;++q){for(var K=S[G+q],X=0;X<k;++X)E[H+X]+=K*T[j+X];H+=k,j+=k}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var _k={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:yk},bk={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;Rx([a,i],"depthwiseConv2dNativeBackpropFilter");for(var h=v.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=h.strideHeight,d=h.strideWidth,p=h.filterHeight,m=h.filterWidth,g=new xt(h.filterShape,"float32"),y=h.padInfo.left,_=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(a.dataId).values,w=new xt(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,C=new xt(i.shape,i.dtype,k),S=0;S<p;++S)for(var T=Math.max(0,Math.ceil((_-S)/f)),E=Math.min(h.outHeight,(h.inHeight+_-S)/f),A=0;A<m;++A)for(var M=Math.max(0,Math.ceil((y-A)/d)),I=Math.min(h.outWidth,(h.inWidth+y-A)/d),N=0;N<h.outChannels;++N){for(var R=Math.trunc(N/b),D=N%b,O=0,L=0;L<h.batchSize;++L)for(var F=T;F<E;++F)for(var P=S+F*f-_,z=M;z<I;++z)O+=w.get(L,P,A+z*d-y,R)*C.get(L,F,z,N);g.set(O,S,A,R,D)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},xk={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.dy,o=t.filter,s=a.strides,u=a.dilations,c=a.pad,l=a.dimRoundingMode,h=a.inputShape;Rx([i,o],"depthwiseConv2DNativeBackpropInput");for(var f=r.computeStrides(i.shape),d=r.computeStrides(o.shape),p=v.computeConv2DInfo(h,o.shape,s,u,c,l,!0),m=new xt(p.inShape,"float32"),g=m.values,y=_slicedToArray(m.strides,3),_=y[0],b=y[1],x=y[2],w=n.data.get(i.dataId).values,k=_slicedToArray(f,3),C=k[0],S=k[1],T=k[2],E=n.data.get(o.dataId).values,A=_slicedToArray(d,3),M=A[0],I=A[1],N=A[2],R=p.batchSize,D=p.filterHeight,O=p.filterWidth,L=p.inChannels,F=p.inHeight,P=p.inWidth,z=p.outChannels,B=p.outHeight,U=p.outWidth,V=p.strideHeight,W=p.strideWidth,G=D-1-p.padInfo.top,H=O-1-p.padInfo.left,j=z/L,q=0;q<R;++q)for(var K=0;K<L;++K)for(var X=0;X<F;++X)for(var Z=X-G,Y=Math.max(0,Math.ceil(Z/V)),J=Math.min(B,(D+Z)/V),$=0;$<P;++$){for(var Q=$-H,ee=Math.max(0,Math.ceil(Q/W)),te=Math.min(U,(O+Q)/W),ne=0,re=Y;re<J;++re)for(var ae=re*V-Z,ie=ee;ie<te;++ie)for(var oe=C*q+S*re+T*ie,se=M*(D-1-ae)+I*(O-1-(ie*W-Q))+N*K,ue=0;ue<j;++ue)ne+=w[oe+(K*j+ue)]*E[se+ue];g[_*q+b*X+x*$+K]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},wk={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=t.x,i=r.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,s=Zn([i,i],a.dtype),u=s.values,c=0;c<o.length;c++)u[c*i+c]=o[c];var l=[].concat(_toConsumableArray(a.shape),_toConsumableArray(a.shape));return n.makeTensorInfo(l,s.dtype,s.values)}},kk={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=a.strides,u=a.pad,c=a.dilations,l=n,h=l.data.get(i.dataId).values,f=i.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,m=v.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),g=m.batchSize,y=m.inHeight,_=m.inWidth,b=m.inChannels,x=m.outHeight,w=m.outWidth,k=m.padInfo,C=m.strideHeight,S=m.strideWidth,T=m.filterHeight,E=m.filterWidth,A=m.dilationHeight,M=m.dilationWidth,I=m.outShape,N=r.sizeFromShape(I),R=I.length,D=r.getArrayFromDType(i.dtype,N),O=0;O<g;++O)for(var L=0;L<x;++L)for(var F=L*C-k.top,P=0;P<w;++P)for(var z=P*S-k.left,B=0;B<b;++B){for(var U=Number.MIN_SAFE_INTEGER,V=0;V<T;++V){var W=F+V*A;if(W>=0&&W<y)for(var G=0;G<E;++G){var H=z+G*M;if(H>=0&&H<_){var j=r.locToIndex([O,W,H,B],f,r.computeStrides(i.shape)),q=r.locToIndex([V,G,B],p,r.computeStrides(o.shape)),K=h[j]+d[q];K>U&&(U=K)}}}D[r.locToIndex([O,L,P,B],R,r.computeStrides(I))]=U}return{dataId:l.write(r.toTypedArray(D,i.dtype),I,i.dtype),shape:I,dtype:i.dtype}}},Ck={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=t.dy,u=a.strides,c=a.pad,l=a.dilations,h=n,f=r.toNestedArray(i.shape,h.data.get(i.dataId).values),d=r.toNestedArray(o.shape,h.data.get(o.dataId).values),p=v.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),m=p.batchSize,g=p.inHeight,y=p.inWidth,_=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,C=p.strideWidth,S=p.filterHeight,T=p.filterWidth,E=p.dilationHeight,A=p.dilationWidth,M=p.outShape;r.assert(s.rank===M.length,(function(){return"Error in Dilation2DBackpropFilter, dy "+"must have the same rank as output ".concat(M.length,", but got ")+"".concat(s.rank)}));for(var I=r.toNestedArray(M,h.data.get(s.dataId).values),N=r.makeZerosNestedTypedArray(o.shape,o.dtype),R=0;R<m;++R)for(var D=0;D<b;++D)for(var O=D*k-w.top,L=0;L<x;++L)for(var F=L*C-w.left,P=0;P<_;++P){for(var z=Number.MIN_SAFE_INTEGER,B=0,U=0,V=0;V<S;++V){var W=O+V*E;if(W>=0&&W<g)for(var G=0;G<T;++G){var H=F+G*A;if(H>=0&&H<y){var j=f[R][W][H][P]+d[V][G][P];j>z&&(z=j,B=V,U=G)}}}N[B][U][P]+=I[R][D][L][P]}return{dataId:h.write(r.toTypedArray(N,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Sk={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=t.dy,u=a.strides,c=a.pad,l=a.dilations,h=n,f=r.toNestedArray(i.shape,h.data.get(i.dataId).values),d=r.toNestedArray(o.shape,h.data.get(o.dataId).values),p=v.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),m=p.batchSize,g=p.inHeight,y=p.inWidth,_=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,C=p.strideWidth,S=p.filterHeight,T=p.filterWidth,E=p.dilationHeight,A=p.dilationWidth,M=p.outShape;r.assert(s.rank===M.length,(function(){return"Error in Dilation2DBackpropInput, dy "+"must have the same rank as output ".concat(M.length,", but got ")+"".concat(s.rank)}));for(var I=r.toNestedArray(M,h.data.get(s.dataId).values),N=r.makeZerosNestedTypedArray(i.shape,i.dtype),R=0;R<m;++R)for(var D=0;D<b;++D)for(var O=D*k-w.top,L=0;L<x;++L)for(var F=L*C-w.left,P=0;P<_;++P){for(var z=Number.MIN_SAFE_INTEGER,B=O<0?0:O,U=F<0?0:F,V=0;V<S;++V){var W=O+V*E;if(W>=0&&W<g)for(var G=0;G<T;++G){var H=F+G*A;if(H>=0&&H<y){var j=f[R][W][H][P]+d[V][G][P];j>z&&(z=j,B=W,U=H)}}}N[R][B][U][P]+=I[R][D][L][P]}return{dataId:h.write(r.toTypedArray(N,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Tk={kernelName:"EluGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.dy,i=t.y;Rx([a,i],"eluGrad");for(var o=new Float32Array(r.sizeFromShape(i.shape)),s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=0;c<s.length;++c){var l=s[c];o[c]=l>=1?u[c]:u[c]*(l+1)}return n.makeTensorInfo(i.shape,"float32",o)}},Ek=iw("Equal",Gx((function(e,t){return e===t?1:0})),null,"bool"),Ak={kernelName:"Equal",backendName:"cpu",kernelFunc:Ek},Mk=v.ERF_P,Ik=v.ERF_A1,Nk=v.ERF_A2,Rk=v.ERF_A3,Dk=v.ERF_A4,Ok=v.ERF_A5,Lk=Lx(je,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+Mk*n);return t*(1-((((Ok*r+Dk)*r+Rk)*r+Nk)*r+Ik)*r*Math.exp(-n*n))})),Fk={kernelName:je,backendName:"cpu",kernelFunc:Lk},Pk=Xw((function(e){return Math.exp(e)})),zk=Fx(qe,Pk),Bk={kernelName:qe,backendName:"cpu",kernelFunc:zk};function Uk(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.input,o=a.dim,s=i.shape.length,u=i.shape.slice(),c=o;return o<0&&(r.assert(-(s+1)<=o,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+o+1),u.splice(c,0,1),hw({inputs:{x:i},backend:n,attrs:{shape:u}})}var Vk={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:Uk},Wk=Xw((function(e){return Math.expm1(e)})),Gk={kernelName:"Expm1",backendName:"cpu",kernelFunc:Fx("Expm1",Wk)},Hk=Gx((function(e,t){return e*t})),jk=ow((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),qk=iw("Multiply",Hk,jk),Kk={kernelName:"Multiply",backendName:"cpu",kernelFunc:qk},Xk=iw("RealDiv",Gx((function(e,t){return e/t}))),Zk={kernelName:"RealDiv",backendName:"cpu",kernelFunc:Xk},Yk=Gx((function(e,t){return e-t})),Jk=ow((function(e,t,n,r){return{real:e-n,imag:t-r}})),$k=iw(Je,Yk,Jk),Qk={kernelName:Je,backendName:"cpu",kernelFunc:$k};function eC(e,t,n){for(var a=e.shape,i=a[0],o=a[1],s=n.data.get(e.dataId),u=s.complexTensorInfos.real,c=s.complexTensorInfos.imag,l=[i,o],h=r.sizeFromShape(l),f=r.getTypedArrayFromDType("float32",h),d=r.getTypedArrayFromDType("float32",h),p=0;p<i;p++){for(var m=Ww({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),g=Ww({inputs:{x:c},backend:n,attrs:{begin:[p,0],size:[1,o]}}),y=$x({inputs:{real:m,imag:g},backend:n}),_=tC(y,t,n),b=_.real,x=_.imag,w=v.mergeRealAndImagArrays(b,x),k=0;k<o;k++){var C=v.getComplexWithIndex(w,k);f[p*o+k]=C.real,d[p*o+k]=C.imag}n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y)}var S=n.makeTensorInfo(l,"float32",f),T=n.makeTensorInfo(l,"float32",d),E=$x({inputs:{real:S,imag:T},backend:n});return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(T),E}function tC(e,t,n){var a=r.sizeFromShape(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0==((_=a)&_-1)){var u=function e(t,n,r,a,i){if(1===r)return{real:t,imag:n};var o=v.mergeRealAndImagArrays(t,n),s=r/2,u=v.complexWithEvenIndex(o),c=u.real,l=u.imag,h=[c.length],f=i.makeTensorInfo(h,"float32",c),d=i.makeTensorInfo(h,"float32",l),p=$x({inputs:{real:f,imag:d},backend:i}),m=v.complexWithOddIndex(o),g=m.real,y=m.imag,_=[g.length],b=i.makeTensorInfo(_,"float32",g),x=i.makeTensorInfo(_,"float32",y),w=$x({inputs:{real:b,imag:x},backend:i}),k=e(c,l,s,a,i),C=k.real,S=k.imag,T=[C.length],E=i.makeTensorInfo(T,"float32",C),A=i.makeTensorInfo(T,"float32",S),M=$x({inputs:{real:E,imag:A},backend:i}),I=e(g,y,s,a,i),N=I.real,R=I.imag,D=[N.length],O=i.makeTensorInfo(D,"float32",N),L=i.makeTensorInfo(D,"float32",R),F=$x({inputs:{real:O,imag:L},backend:i}),P=v.exponents(r,a),z=[P.real.length],B=i.makeTensorInfo(z,"float32",P.real),U=i.makeTensorInfo(z,"float32",P.imag),V=$x({inputs:{real:B,imag:U},backend:i}),W=qk({inputs:{a:V,b:F},backend:i}),G=cw({inputs:{a:M,b:W},backend:i}),H=$k({inputs:{a:M,b:W},backend:i}),j=tw({inputs:{input:G},backend:i}),q=tw({inputs:{input:H},backend:i}),K=ek({inputs:{input:G},backend:i}),X=ek({inputs:{input:H},backend:i}),Z=nk({inputs:[j,q],backend:i,attrs:{axis:0}}),Y=nk({inputs:[K,X],backend:i,attrs:{axis:0}}),J=i.data.get(Z.dataId).values,$=i.data.get(Y.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(Y),{real:J,imag:$}}(o,s,a,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),h=n.makeTensorInfo(c,"float32",u.imag),f=n.makeTensorInfo([],"float32",r.createScalarValue(a,"float32")),d=Bx({inputs:{x:f},backend:n}),p=Zk.kernelFunc({inputs:{a:l,b:f},backend:n}),m=Zk.kernelFunc({inputs:{a:h,b:d},backend:n}),g=n.data.get(p.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return u}var _,b=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=v.exponent(a*s,t,n),c=v.getComplexWithIndex(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),v.assignToTypedArray(r,i,o,a)}return r}(v.mergeRealAndImagArrays(o,s),a,t);return v.splitRealAndImagArrays(b)}var nC={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.input,i=r.sizeFromShape(a.shape),o=a.shape[a.shape.length-1],s=hw({inputs:{x:a},backend:n,attrs:{shape:[i/o,o]}}),u=eC(s,!1,n),c=hw({inputs:{x:u},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}};function rC(e){var t=e.backend,n=e.attrs,a=n.shape,i=n.value,o=n.dtype||r.inferDtype(i),s=r.getArrayFromDType(o,r.sizeFromShape(a));return function(e,t,n){e.fill(t)}(s,i),t.makeTensorInfo(a,o,s)}var aC={kernelName:"Fill",backendName:"cpu",kernelFunc:rC},iC={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=t.image,i=n,o=r.getTypedArrayFromDType(a.dtype,r.sizeFromShape(a.shape)),s=_slicedToArray(a.shape,4),u=s[0],c=s[1],l=s[2],h=s[3],f=i.data.get(a.dataId).values,d=0;d<u;d++)for(var p=d*l*c*h,m=0;m<c;m++)for(var v=m*(l*h),g=0;g<l;g++)for(var y=g*h,_=0;_<h;_++){var b=Math.round(l-[u,m,g,_][2]),x=p+v+y+_,w=f[x];b>=0&&b<l&&(w=f[p+v+b*h+_]),o[x]=w}return{dataId:i.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},oC=Xw((function(e){return Math.floor(e)})),sC={kernelName:"Floor",backendName:"cpu",kernelFunc:Fx("Floor",oC)},uC={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:iw("FloorDiv",Gx((function(e,t){return Math.floor(e/t)})),null,"int32")},cC={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,m=ak({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:f}});if(o){var v=m;m=cw({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(d){var g=m;m=Jx(n,m,d,s,p),n.disposeIntermediateTensorInfo(g)}return m}},lC={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,m=yk({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:f}});if(o){var v=m;m=cw({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(d){var g=m;m=Jx(n,m,d,s,p),n.disposeIntermediateTensorInfo(g)}return m}},hC={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,i=t.indices,o=r.sizeFromShape(a.shape),s=i.shape,u=s[s.length-1],c=_slicedToArray(v.prepareAndValidate(a,i),4),l=c[0],h=c[1],f=c[2],d=c[3];if(0===h)return n.makeTensorInfo(l,a.dtype,[]);for(var p=Zn([h,f],a.dtype),m=n.data.get(i.dataId).values,g=n.data.get(a.dataId).values,y=0;y<h;y++){for(var _=[],b=0,x=0;x<u;x++){var w=m[y*u+x];b+=w*d[x],_.push(w)}if(b<0||b>=o/f)throw new Error("Invalid indices: ".concat(_," does not index into ").concat(a.shape));for(var k=0;k<f;k++)p.values[y*f+k]=g[b*f+k]}return n.makeTensorInfo(l,p.dtype,p.values)}};function fC(e,t,n){for(var r=Zn(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=t.locToIndex([i[0],i[2]]);i[2]=t.values[o];var s=e.locToIndex(i);r.values[a]=e.values[s]}return r}var dC={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.indices,s=a.axis,u=a.batchDims;Rx([i,o],"gatherV2");var c=u;null==u&&(c=0);var l=r.sizeFromShape(o.shape),h=r.parseAxisParam(s,i.shape)[0],f=v.segment_util.collectGatherOpShapeInfo(i,o,h,c),d=hw({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),p=hw({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,l/f.batchSize]}}),m=[f.batchSize,f.outerSize,l/f.batchSize,f.sliceSize],g=n.bufferSync(p),y=fC(n.bufferSync(d),g,m);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(f.outputShape,y.dtype,y.values)}},pC=Gx((function(e,t){return e>t?1:0})),mC={kernelName:"Greater",backendName:"cpu",kernelFunc:iw("Greater",pC,null,"bool")},vC={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:iw("GreaterEqual",Gx((function(e,t){return e>=t?1:0})),null,"bool")},gC={kernelName:"IFFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.input,i=r.sizeFromShape(a.shape),o=a.shape[a.shape.length-1],s=hw({inputs:{x:a},backend:n,attrs:{shape:[i/o,o]}}),u=eC(s,!0,n),c=hw({inputs:{x:u},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}},yC={kernelName:"IsFinite",backendName:"cpu",kernelFunc:Lx("IsFinite",(function(e){return Number.isFinite(e)?1:0}),"bool")},_C={kernelName:"IsInf",backendName:"cpu",kernelFunc:Lx("IsInf",(function(e){return Math.abs(e)===1/0?1:0}),"bool")},bC={kernelName:"IsNan",backendName:"cpu",kernelFunc:Lx("IsNan",(function(e){return Number.isNaN(e)?1:0}),"bool")},xC=Gx((function(e,t){return e<t?1:0})),wC={kernelName:"Less",backendName:"cpu",kernelFunc:iw("Less",xC,null,"bool")},kC={kernelName:"LessEqual",backendName:"cpu",kernelFunc:iw("LessEqual",Gx((function(e,t){return e<=t?1:0})),null,"bool")};function CC(e,t,n){var a=(t-e)/(n-1),i=r.makeZerosTypedArray(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+a;return i}var SC={kernelName:"LinSpace",backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=CC(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},TC=Xw((function(e){return Math.log(e)})),EC=Fx(Ke,TC),AC={kernelName:Ke,backendName:"cpu",kernelFunc:EC},MC={kernelName:"Log1p",backendName:"cpu",kernelFunc:Lx("Log1p",(function(e){return Math.log1p(e)}))},IC={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:iw("LogicalAnd",Gx((function(e,t){return e&&t})),null,"bool")},NC={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:Lx("LogicalNot",(function(e){return e?0:1}),"bool")},RC={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:iw("LogicalOr",Gx((function(e,t){return e||t})),null,"bool")},DC={kernelName:"LRN",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.depthRadius,s=a.bias,u=a.alpha,c=a.beta;Rx(i,"LRN");var l=i.shape[3],h=l-1,f=n.data.get(i.dataId).values,d=r.sizeFromShape(i.shape),p=new Float32Array(d);function m(e){for(var t=e%l,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,h),a=0;n<=r;n++){var i=f[n];a+=i*i}return a}for(var v=0;v<d;v++){var g=m(v),y=f[v]*Math.pow(s+u*g,-c);p[v]=y}return n.makeTensorInfo(i.shape,i.dtype,p)}},OC={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.y,s=t.dy,u=a.depthRadius,c=a.bias,l=a.alpha,h=a.beta;Rx(s,"LRNGrad");for(var f=r.sizeFromShape(s.shape),d=s.shape[3],p=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,g=new Float32Array(f),y=f,_=0;_<y;_++){for(var b=_%d,x=_-b+Math.max(0,b-u),w=_-b+Math.min(d,b+u+1),k=0,C=x;C<w;C++)k+=Math.pow(m[C],2);k=l*k+c;for(var S=x;S<w;S++){var T=-2*l*h*m[S]*v[_]/k;_===S&&(T+=Math.pow(k,-h)),T*=p[_],g[S]+=T}}return n.makeTensorInfo(s.shape,i.dtype,g)}};function LC(e,t,n,a){for(var i=r.getTypedArrayFromDType(a,r.sizeFromShape(n)),o=0;o<i.length;++o){for(var s=o*t,u=e[s],c=0;c<t;++c){var l=e[s+c];l>u&&(u=l)}i[o]=u}return i}function FC(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.reductionIndices,s=a.keepDims,u=n,c=i.shape,l=c.length,h=r.parseAxisParam(o,c),f=h,d=v.getAxesPermutation(f,l),p=u.data.get(i.dataId).values;if(null!=d){for(var m=new Array(l),g=0;g<m.length;g++)m[g]=c[d[g]];p=xw(p,c,i.dtype,d,m),f=v.getInnerMostAxes(f.length,l),c=m}Rx(i,"max"),v.assertAxesAreInnerMostDims("max",f,l);var y=_slicedToArray(v.computeOutAndReduceShapes(c,f),2),_=y[0],b=y[1],x=LC(p,r.sizeFromShape(b),_,i.dtype),w=u.write(x,_,i.dtype),k=_;return s&&(k=v.expandShapeToKeepDim(_,h)),{dataId:w,shape:k,dtype:i.dtype}}var PC={kernelName:"Max",backendName:"cpu",kernelFunc:FC},zC=Gx((function(e,t){return Math.max(e,t)})),BC={kernelName:"Maximum",backendName:"cpu",kernelFunc:iw("Maximum",zC)},UC={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x;Rx(i,"maxPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.assert(v.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '1'")}));var l,h=v.computePool2DInfo(i.shape,o,s,1,u,c);if(1===h.filterWidth&&1===h.filterHeight&&r.arraysEqual(h.inShape,h.outShape))l=Bx({inputs:{x:i},backend:n});else{var f=n.data.get(i.dataId).values,d=r.computeStrides(i.shape),p=Dw(f,0,i.dtype,d,h,"max");l=n.makeTensorInfo(h.outShape,i.dtype,p.values)}return l}},VC={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode,l=a.dataFormat;Rx(i,"maxPool3d");var h=v.computePool3DInfo(i.shape,o,s,1,u,c,l),f=Lw(n.data.get(i.dataId).values,0,i.dtype,r.computeStrides(i.shape),h,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}},WC={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;Rx([a,i],"maxPool3DGrad");for(var l=v.computePool3DInfo(i.shape,o,s,1,u,c),h=function(e,t){for(var n=Zn(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-f,_=y;_<0;)_+=o;for(var b=Math.min(t.inDepth,c+y),x=0;x<t.outHeight;++x){for(var w=x*a-d,k=w;k<0;)k+=s;for(var C=Math.min(t.inHeight,l+w),S=0;S<t.outWidth;++S){for(var T=S*i-p,E=T;E<0;)E+=u;for(var A=Math.min(t.inWidth,h+T),M=Number.NEGATIVE_INFINITY,I=-1,N=_;N<b;N+=o)for(var R=N-y,D=k;D<C;D+=s)for(var O=D-w,L=E;L<A;L+=u){var F=L-T,P=e.get(m,N,D,L,v);P>=M&&(M=P,I=R*l*h+O*l+F)}n.set(I,m,g,x,S,v)}}}return n}(n.bufferSync(i),l),f=l.strideDepth,d=l.strideHeight,p=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,y=l.dilationWidth,_=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=_-1-l.padInfo.front,k=x-1-l.padInfo.left,C=b-1-l.padInfo.top,S=Zn(i.shape,"float32"),T=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var A=0;A<l.inChannels;++A)for(var M=0;M<l.inDepth;++M)for(var I=0;I<l.inHeight;++I)for(var N=0;N<l.inWidth;++N){for(var R=M-w,D=I-C,O=N-k,L=0,F=0;F<_;F+=m){var P=(R+F)/f;if(!(P<0||P>=l.outDepth||Math.floor(P)!==P))for(var z=0;z<b;z+=g){var B=(D+z)/d;if(!(B<0||B>=l.outHeight||Math.floor(B)!==B))for(var U=0;U<x;U+=y){var V=(O+U)/p;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=_*b*x-1-h.get(E,P,B,V,A)===F*b*x+z*x+U?1:0;0!==W&&(L+=T.get(E,P,B,V,A)*W)}}}}S.set(L,E,M,I,N,A)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},GC={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Rx([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=v.computePool2DInfo(o.shape,s,u,1,c,l),f=n.data.get(o.dataId).values,d=Zn(h.outShape,o.dtype,Ow(f,o.shape,o.dtype,h).values),p=h.strideHeight,m=h.strideWidth,g=h.dilationHeight,y=h.dilationWidth,_=h.effectiveFilterHeight,b=h.effectiveFilterWidth,x=b-1-h.padInfo.left,w=_-1-h.padInfo.top,k=Zn(o.shape,"float32"),C=n.data.get(a.dataId).values,S=Zn(a.shape,"float32",C),T=0;T<h.batchSize;++T)for(var E=0;E<h.inChannels;++E)for(var A=0;A<h.inHeight;++A)for(var M=0;M<h.inWidth;++M){for(var I=A-w,N=M-x,R=0,D=0;D<_;D+=g){var O=(I+D)/p;if(!(O<0||O>=h.outHeight||Math.floor(O)!==O))for(var L=0;L<b;L+=y){var F=(N+L)/m;if(!(F<0||F>=h.outWidth||Math.floor(F)!==F)){var P=_*b-1-d.get(T,O,F,E)===D*b+L?1:0;0!==P&&(R+=S.get(T,O,F,E)*P)}}}k.set(R,T,A,M,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},HC={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=a;Rx(i,"MaxPoolWithArgmax");var h=l.data.get(i.dataId).values,f=v.computePool2DInfo(i.shape,o,s,[1,1],u),d=_slicedToArray(function(e,t,n,a,i){var o=Dw(e,0,n,r.computeStrides(t),i,"max"),s=Ow(e,t,n,i,!0,a);return[o.values,s.values]}(h,i.shape,i.dtype,c,f),2),p=d[0],m=d[1],g=l.write(p,f.outShape,i.dtype),y=l.write(m,f.outShape,i.dtype);return[{dataId:g,shape:f.outShape,dtype:i.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}};function jC(e){var t,n=e.inputs,a=e.backend,i=e.attrs,o=n.x,s=i.axis,u=i.keepDims;Rx(o,"sum");var c=(t="bool"===o.dtype?rw({inputs:{x:o},backend:a,attrs:{dtype:"int32"}}):Bx({inputs:{x:o},backend:a})).shape.length,l=r.parseAxisParam(s,t.shape),h=v.getAxesPermutation(l,c),f=l,d=t;null!=h&&(d=ww({inputs:{x:t},backend:a,attrs:{perm:h}}),f=v.getInnerMostAxes(f.length,c)),v.assertAxesAreInnerMostDims("sum",f,d.shape.length);for(var p=_slicedToArray(v.computeOutAndReduceShapes(d.shape,f),2),m=p[0],g=p[1],y=ew(a,m,v.upcastType(d.dtype,"int32")),_=r.sizeFromShape(g),b=a.data.get(y.dataId).values,x=a.data.get(d.dataId).values,w=0;w<b.length;++w){for(var k=w*_,C=0,S=0;S<_;++S)C+=x[k+S];b[w]=C}if(u){var T=y;y=hw({inputs:{x:y},backend:a,attrs:{shape:v.expandShapeToKeepDim(y.shape,l)}}),a.disposeIntermediateTensorInfo(T)}return a.disposeIntermediateTensorInfo(t),null!=h&&a.disposeIntermediateTensorInfo(d),y}var qC={kernelName:"Sum",backendName:"cpu",kernelFunc:jC},KC={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims,u=r.parseAxisParam(o,i.shape),c=v.computeOutAndReduceShapes(i.shape,u),l=r.sizeFromShape(c[1]),h=[],f=n.makeTensorInfo([],"float32",new Float32Array([l]));h.push(f);var d=rw({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});h.push(d);var p=Xk({inputs:{a:d,b:f},backend:n});h.push(p);var m=jC({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:s}});return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},XC={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims;Rx(i,"min");var u=r.parseAxisParam(o,i.shape),c=u,l=v.getAxesPermutation(c,i.shape.length),h=i;null!=l&&(h=ww({inputs:{x:i},backend:n,attrs:{perm:l}}),c=v.getInnerMostAxes(c.length,i.shape.length)),v.assertAxesAreInnerMostDims("min",c,h.shape.length);for(var f=_slicedToArray(v.computeOutAndReduceShapes(h.shape,c),2),d=f[0],p=f[1],m=r.sizeFromShape(p),g=r.makeZerosTypedArray(r.sizeFromShape(d),h.dtype),y=n.data.get(h.dataId).values,_=0;_<g.length;++_){for(var b=_*m,x=y[b],w=0;w<m;++w){var k=y[b+w];k<x&&(x=k)}g[_]=x}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(d,h.dtype,g);if(s){var S=hw({inputs:{x:C},backend:n,attrs:{shape:v.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(C),S}return C}},ZC=Gx((function(e,t){return Math.min(e,t)})),YC={kernelName:"Minimum",backendName:"cpu",kernelFunc:iw("Minimum",ZC)},JC={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.paddings,s=a.mode;Rx(i,"mirrorPad");for(var u=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=o.map((function(e,t){return e[0]+i.shape[t]})),h="reflect"===s?0:1,f=n.data.get(i.dataId).values,d=i.shape.length,p=r.computeStrides(i.shape),m=r.sizeFromShape(u),v=u.length,g=r.computeStrides(u),y=r.getTypedArrayFromDType(i.dtype,m),_=0;_<m;_++){for(var b=r.indexToLoc(_,v,g),x=0;x<v;x++)b[x]<c[x]?b[x]=2*c[x]-b[x]-h:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+h);b=b.map((function(e,t){return e-c[t]}));var w=r.locToIndex(b,d,p);y[_]=f[w]}return{dataId:n.write(y,u,i.dtype),shape:u,dtype:i.dtype}}},$C=Gx((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),QC=iw(Xe,$C),eS={kernelName:Xe,backendName:"cpu",kernelFunc:QC},tS=n("4xPs");function nS(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.logits,o=a.dim,s=i.shape.length,u=o;if(-1===u&&(u=s-1),u!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(u));var c=r.parseAxisParam([u],i.shape),l=FC({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),h=v.expandShapeToKeepDim(l.shape,c),f=hw({inputs:{x:l},backend:n,attrs:{shape:h}}),d=$k({inputs:{a:i,b:f},backend:n}),p=zk({inputs:{x:d},backend:n}),m=jC({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),g=hw({inputs:{x:m},backend:n,attrs:{shape:h}}),y=Xk({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var rS={kernelName:"Softmax",backendName:"cpu",kernelFunc:nS},aS={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.logits,o=a.numSamples,s=a.seed,u=a.normalized;Rx(i,"multinomial");for(var c=u?i:nS({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=c.shape[0],h=c.shape[1],f=n.data.get(c.dataId).values,d=[l,o],p=r.makeZerosTypedArray(r.sizeFromShape(d),"int32"),m=0;m<l;++m){var v=m*h,g=new Float32Array(h-1);g[0]=f[v];for(var y=1;y<g.length;++y)g[y]=g[y-1]+f[v+y];for(var _=tS.alea(s.toString()),b=m*o,x=0;x<o;++x){var w=_();p[b+x]=g.length;for(var k=0;k<g.length;k++)if(w<g[k]){p[b+x]=k;break}}}return u||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(d,"int32",p)}};function iS(e,t,n){var a=r.createScalarValue(-1,n);return Hk([],t,a,e,n)}var oS={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;Rx(r,"neg");var a=_slicedToArray(iS(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},sS=g.nonMaxSuppressionV3Impl,uS={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;Rx(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=sS(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},cS=g.nonMaxSuppressionV4Impl,lS={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;Rx(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=cS(l,h,o,s,u,c),d=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},hS=g.nonMaxSuppressionV5Impl,fS={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;Rx(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=hS(l,h,o,s,u,c),d=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},dS=Gx((function(e,t){return e!==t?1:0})),pS={kernelName:"NotEqual",backendName:"cpu",kernelFunc:iw("NotEqual",dS,null,"bool")},mS={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.indices,o=a.depth,s=a.onValue,u=a.offValue;Rx(i,"oneHot");var c=r.sizeFromShape(i.shape),l=new Float32Array(c*o);l.fill(u);for(var h=n.data.get(i.dataId).values,f=0;f<c;++f)h[f]>=0&&h[f]<o&&(l[f*o+h[f]]=s);return n.makeTensorInfo([].concat(_toConsumableArray(i.shape),[o]),"int32",l)}};function vS(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=tw({inputs:{input:r},backend:n}),i=vS({inputs:{x:a},backend:n}),o=ek({inputs:{input:r},backend:n}),s=vS({inputs:{x:o},backend:n}),u=$x({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return rC({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var gS={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:vS},yS={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=tw({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=ek({inputs:{input:a},backend:r}),u=vS({inputs:{x:s},backend:r}),c=$x({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return rC({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function _S(e){var t=e.inputs,n=e.backend,a=e.attrs.axis;if(1===t.length)return Uk({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){r.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),r.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=nk({inputs:t.map((function(e){var t=Uk({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t})),backend:n,attrs:{axis:a}});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var bS={kernelName:"Pack",backendName:"cpu",kernelFunc:_S},xS={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.paddings,s=a.constantValue;Rx(i,"pad");var u=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=n.data.get(i.dataId).values,h=r.sizeFromShape(i.shape),f=i.shape.length,d=r.computeStrides(i.shape),p=r.sizeFromShape(u),m=u.length,v=r.computeStrides(u),g=r.getTypedArrayFromDType(i.dtype,p);0!==s&&g.fill(s);for(var y=0;y<h;y++){var _=r.indexToLoc(y,f,d).map((function(e,t){return e+c[t]}));g[r.locToIndex(_,m,v)]=l[y]}return{dataId:n.write(g,u,i.dtype),shape:u,dtype:i.dtype}}},wS=Gx((function(e,t){return Math.pow(e,t)})),kS=iw(Ze,wS),CS={kernelName:Ze,backendName:"cpu",kernelFunc:kS};function SS(e,t,n,a){for(var i=_slicedToArray(v.computeOutAndReduceShapes(e,a),2),o=i[0],s=i[1],u=Dt(t,"int32"),c=r.makeZerosTypedArray(r.sizeFromShape(o),u),l=r.sizeFromShape(s),h=0;h<c.length;++h){for(var f=h*l,d=1,p=0;p<l;++p)d*=n[f+p];c[h]=d}return{outVals:c,outShape:o,outDtype:u}}var TS={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims;Rx(i,"prod");var u=i.shape.length,c=r.parseAxisParam(o,i.shape),l=v.getAxesPermutation(c,u),h=c,f=i,d=[];null!=l&&(f=ww({inputs:{x:i},backend:n,attrs:{perm:l}}),d.push(f),h=v.getInnerMostAxes(h.length,u));var p=n.data.get(f.dataId).values,m=SS(f.shape,f.dtype,p,h),g=m.outVals,y=m.outShape,_=m.outDtype,b=y;return s&&(b=v.expandShapeToKeepDim(y,c)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(b,_,g)}};function ES(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return r.makeZerosTypedArray(0,a);var i=Math.abs(Math.ceil((t-e)/n)),o=r.makeZerosTypedArray(i,a);t<e&&1===n&&(n=-1),o[0]=e;for(var s=1;s<o.length;s++)o[s]=o[s-1]+n;return o}var AS={kernelName:"Range",backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=ES(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},MS={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:Lx("Reciprocal",(function(e){return 1/e}))},IS={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size;Rx(i,"resizeBilinear");for(var c=r.computeStrides(i.shape),l=_slicedToArray(u,2),h=l[0],f=l[1],d=_slicedToArray(i.shape,4),p=d[0],m=d[1],v=d[2],g=d[3],y=n.data.get(i.dataId).values,_=new Float32Array(r.sizeFromShape([p,h,f,g])),b=[o&&h>1?m-1:m,o&&f>1?v-1:v],x=[o&&h>1?h-1:h,o&&f>1?f-1:f],w=0,k=b[0]/x[0],C=b[1]/x[1],S=0;S<p;S++)for(var T=0;T<h;T++){var E;E=s?k*(T+.5)-.5:k*T;for(var A=Math.max(0,Math.floor(E)),M=E-A,I=Math.min(m-1,Math.ceil(E)),N=S*c[0]+A*c[1],R=S*c[0]+I*c[1],D=0;D<f;D++){var O;O=s?C*(D+.5)-.5:C*D;for(var L=Math.max(0,Math.floor(O)),F=O-L,P=Math.min(v-1,Math.ceil(O)),z=N+L*c[2],B=R+L*c[2],U=N+P*c[2],V=R+P*c[2],W=0;W<g;W++){var G=y[z+W],H=y[B+W],j=G+(y[U+W]-G)*F;_[w++]=j+(H+(y[V+W]-H)*F-j)*M}}}return n.makeTensorInfo([p,h,f,g],"float32",_)}},NS={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.images,o=t.dy,s=a.alignCorners;Rx([o,i],"resizeBilinearGrad");for(var u=r.computeStrides(i.shape),c=_slicedToArray(i.shape,4),l=c[0],h=c[1],f=c[2],d=c[3],p=_slicedToArray(o.shape,3),m=p[1],v=p[2],g=new Float32Array(l*h*f*d),y=[s&&m>1?h-1:h,s&&v>1?f-1:f],_=[s&&m>1?m-1:m,s&&v>1?v-1:v],b=y[0]/_[0],x=y[1]/_[1],w=n.data.get(o.dataId).values,k=0,C=0;C<l;C++)for(var S=C*u[0],T=0;T<m;T++)for(var E=T*b,A=Math.floor(E),M=Math.min(Math.ceil(E),h-1),I=S+A*u[1],N=S+M*u[1],R=E-A,D=1-R,O=0;O<v;O++)for(var L=O*x,F=Math.floor(L),P=Math.min(Math.ceil(L),f-1),z=L-F,B=1-z,U=I+F*u[2],V=I+P*u[2],W=N+F*u[2],G=N+P*u[2],H=D*B,j=D*z,q=R*B,K=R*z,X=0;X<d;X++){var Z=w[k++];g[U+X]+=Z*H,g[V+X]+=Z*j,g[W+X]+=Z*q,g[G+X]+=Z*K}return n.makeTensorInfo([l,f,h,d],"float32",g)}},RS={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size;Rx(i,"resizeNearestNeighbor");for(var c=r.computeStrides(i.shape),l=_slicedToArray(u,2),h=l[0],f=l[1],d=_slicedToArray(i.shape,4),p=d[0],m=d[1],v=d[2],g=d[3],y=n.data.get(i.dataId).values,_=new Float32Array(p*h*f*g),b=[o&&h>1?m-1:m,o&&f>1?v-1:v],x=[o&&h>1?h-1:h,o&&f>1?f-1:f],w=b[0]/x[0],k=b[1]/x[1],C=0,S=0;S<p;S++)for(var T=S*c[0],E=0;E<h;E++){var A=s?w*(E+.5):w*E,M=Math.min(m-1,o?Math.round(A):Math.floor(A));s&&(M=Math.max(0,M));for(var I=T+M*c[1],N=0;N<f;N++){var R=s?k*(N+.5):k*N,D=Math.min(v-1,o?Math.round(R):Math.floor(R));s&&(D=Math.max(0,D));for(var O=I+D*c[2],L=0;L<g;L++)_[C++]=y[O+L]}}return n.makeTensorInfo([p,h,f,g],i.dtype,_)}},DS={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.images,o=t.dy,s=a.alignCorners;Rx([o,i],"resizeNearestNeighborGrad");for(var u=r.computeStrides(i.shape),c=r.computeStrides(o.shape),l=_slicedToArray(i.shape,4),h=l[0],f=l[1],d=l[2],p=l[3],m=_slicedToArray(o.shape,3),v=m[1],g=m[2],y=new Float32Array(h*f*d*p),_=n.data.get(o.dataId).values,b=[s&&v>1?f-1:f,s&&g>1?d-1:d],x=[s&&v>1?v-1:v,s&&g>1?g-1:g],w=b[0]/x[0],k=b[1]/x[1],C=1/w,S=1/k,T=2*Math.ceil(C)+2,E=2*Math.ceil(S)+2,A=0;A<h;A++)for(var M=A*u[0],I=0;I<f;I++)for(var N=M+I*u[1],R=Math.floor(I*C),D=Math.floor(R-T/2),O=0;O<d;O++)for(var L=N+O*u[2],F=Math.floor(O*S),P=Math.floor(F-E/2),z=0;z<p;z++){for(var B=0,U=0;U<T;U++){var V=U+D;if(!(V<0||V>=v)){var W=M+V*c[1],G=V*w;if(I===Math.min(f-1,s?Math.round(G):Math.floor(G)))for(var H=0;H<E;H++){var j=H+P;if(!(j<0||j>=g)){var q=W+j*c[2],K=j*k;O===Math.min(d-1,s?Math.round(K):Math.floor(K))&&(B+=_[q+z])}}}}y[L+z]=B}return n.makeTensorInfo(i.shape,i.dtype,y)}},OS={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.dims;Rx(i,"reverse");var s=i.shape.length,u=r.parseAxisParam(o,i.shape);if(0===s)return Bx({inputs:{x:i},backend:n});for(var c=new xt(i.shape,i.dtype),l=n.bufferSync(i),h=function(e){var t=c.indexToLoc(e),n=t.slice();u.forEach((function(e){return n[e]=i.shape[e]-1-n[e]})),c.set.apply(c,[l.get.apply(l,_toConsumableArray(n))].concat(_toConsumableArray(t)))},f=0;f<c.size;f++)h(f);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},LS={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,a=e.backend,i=t.image,o=n.radians,s=n.fillValue,u=n.center,c=a,l=r.getTypedArrayFromDType(i.dtype,r.sizeFromShape(i.shape)),h=_slicedToArray(i.shape,4),f=h[0],d=h[1],p=h[2],m=h[3],g=_slicedToArray(v.getImageCenter(u,d,p),2),y=g[0],_=g[1],b=Math.sin(o),x=Math.cos(o),w=c.data.get(i.dataId).values,k=0;k<f;k++)for(var C=k*p*d*m,S=0;S<d;S++)for(var T=S*(p*m),E=0;E<p;E++)for(var A=E*m,M=0;M<m;M++){var I=[f,S,E,M],N=I[2],R=I[1],D=(N-y)*x-(R-_)*b,O=(N-y)*b+(R-_)*x;D=Math.round(D+y),O=Math.round(O+_);var L=s;"number"!=typeof s&&(L=3===M?255:s[M]),D>=0&&D<p&&O>=0&&O<d&&(L=w[C+O*(p*m)+D*m+M]),l[C+T+A+M]=L}return{dataId:c.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},FS={kernelName:"Round",backendName:"cpu",kernelFunc:Lx("Round",(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}))},PS=Xw((function(e){return 1/Math.sqrt(e)})),zS={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:Fx("Rsqrt",PS)};function BS(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],h=e.values,f=t.values;if(0===r)return Zn(n,t.dtype);var d=Zn(l,t.dtype);d.values.fill(u);for(var p=0;p<i;p++){for(var m=[],v=0,g=0;g<o;g++){var y=h[p*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var _=0;_<a;_++)c?d.values[v*a+_]+=f[p*a+_]:d.values[v*a+_]=0===t.rank?f[0]:f[p*a+_]}return d}var US={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=v.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,f=s.outputSize,d=BS(n.bufferSync(a),n.bufferSync(i),o,f,l,c,u,h,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}},VS={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.condition,i=t.t,o=t.e;Rx([a,i,o],"select");for(var s=a.shape.length,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,h=Dt(i.dtype,o.dtype),f=r.makeZerosTypedArray(r.sizeFromShape(i.shape),h),d=0,p=0===s||s>1||1===i.shape.length?1:r.sizeFromShape(i.shape.slice(1)),m=0;m<u.length;m++)for(var v=0;v<p;v++)f[d++]=1===u[m]?c[m]:l[m];return n.makeTensorInfo(i.shape,h,f)}},WS=v.SELU_SCALEALPHA,GS=v.SELU_SCALE,HS={kernelName:"Selu",backendName:"cpu",kernelFunc:Lx("Selu",(function(e){return e>=0?GS*e:WS*(Math.exp(e)-1)}))},jS={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:Lx("Sigmoid",(function(e){return 1/(1+Math.exp(-e))}))},qS={kernelName:"Sign",backendName:"cpu",kernelFunc:Lx("Sign",(function(e){return e<0?-1:e>0?1:0}))},KS=Lx(Ye,(function(e){return Math.sin(e)})),XS={kernelName:Ye,backendName:"cpu",kernelFunc:KS},ZS={kernelName:"Sinh",backendName:"cpu",kernelFunc:Lx("Sinh",(function(e){return Math.sinh(e)}))},YS=Math.log(1.1920928955078125e-7)+2,JS={kernelName:"Softplus",backendName:"cpu",kernelFunc:Lx("Softplus",(function(e){var t=e>-YS,n=e<YS,r=Math.exp(e);return n?r:t?e:Math.log(1+r)}))},$S={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.blockShape,s=a.paddings;Rx([i],"spaceToBatchND");var u=r.sizeFromShape(o),c=[[0,0]];c.push.apply(c,_toConsumableArray(s));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var h=xS.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),f=v.getReshaped(h.shape,o,u,!1),d=v.getPermuted(f.length,o.length,!1),p=v.getReshapedPermuted(h.shape,o,u,!1),m=hw({inputs:{x:h},backend:n,attrs:{shape:f}}),g=ww({inputs:{x:m},backend:n,attrs:{perm:d}}),y=hw({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}},QS={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=v.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,h=u.sliceSize,f=u.strides,d=u.outputSize,p=BS(n.bufferSync(a),n.bufferSync(i),s,d,h,l,c,f,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(s,p.dtype,p.values)}},eT={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.numOrSizeSplits,s=a.axis,u=r.parseAxisParam(s,i.shape)[0],c=v.prepareSplitSize(i,o,u),l=new Array(i.shape.length).fill(0),h=i.shape.slice();return c.map((function(e){var t=_toConsumableArray(h);t[u]=e;var r=Ww({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,r}))}},tT={kernelName:"Sqrt",backendName:"cpu",kernelFunc:Lx("Sqrt",(function(e){return Math.sqrt(e)}))},nT={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Rx(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},rT=Gx((function(e,t){var n=e-t;return n*n})),aT={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:iw("SquaredDifference",rT)},iT={kernelName:"Step",backendName:"cpu",kernelFunc:Lx("Step",(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}))};function oT(e,t,n,r){for(var a=Zn(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(_toConsumableArray(o)))}return a}var sT={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,d=r.shrinkAxisMask;Rx(a,"stridedSlice");var p,m=h.sliceInfo(a.shape,i,o,s,u,c,l,f,d),v=m.nonStrided,g=m.$begin,y=m.$strides,_=m.size,b=m.newShape,x=m.outShape,w=hw({inputs:{x:a},backend:n,attrs:{shape:b}});if(v){var k=Ww({inputs:{x:w},backend:n,attrs:{begin:g,size:_}});p=hw({inputs:{x:k},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))p=n.makeTensorInfo(x,a.dtype,[]);else{var C=oT(x,n.bufferSync(w),y,g);p=n.makeTensorInfo(C.shape,C.dtype,C.values)}var S=hw({inputs:{x:p},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(p),S}},uT=Lx($e,(function(e){return Math.tan(e)})),cT={kernelName:$e,backendName:"cpu",kernelFunc:uT},lT=Lx("Tanh",(function(e){return Math.tanh(e)}));function hT(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Zn(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}function fT(e,t,n,a,i){for(var o=t[t.length-1],s=e.length/o,u=o,c=r.getTypedArrayFromDType(n,s*a),l=r.getTypedArrayFromDType("int32",s*a),h=0;h<s;h++){for(var f=h*u,d=e.subarray(f,f+u),p=[],m=0;m<d.length;m++)p.push({value:d[m],index:m});p.sort((function(e,t){return t.value-e.value}));for(var v=h*a,g=c.subarray(v,v+a),y=l.subarray(v,v+a),_=0;_<a;_++)g[_]=p[_].value,y[_]=p[_].index}var b=t.slice();return b[b.length-1]=a,[Zn(b,n,c),Zn(b,"int32",l)]}function dT(e,t,n,a){for(var i=r.parseAxisParam(t,n)[0],o=[1,n[0],1],s=0;s<i;s++)o[0]*=n[s];o[1]=n[i];for(var u=i+1;u<n.length;u++)o[2]*=n[u];for(var c={},l=new Int32Array(n[i]),h=new xt(o,a,e),f=[],d=1===o[0]&&1===o[2],p=0;p<n[i];p++){var m=void 0;if(d)m=e[p].toString();else{for(var v=[],g=0;g<o[0];g++)for(var y=0;y<o[2];y++)v.push(h.get(g,p,y));m=v.join(",")}if(void 0!==c[m])l[p]=c[m];else{var _=Object.keys(c).length;c[m]=_,l[p]=_,f.push(p)}}var b=o.slice();b[1]=Object.keys(c).length;var x=new xt(b,a);f.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(h.get(n,e,r),n,t,r)}));var w=n.slice();return w[i]=b[1],{outputValues:x.values,outputShape:w,indices:l}}for(var pT=0,mT=[mw,gw,yw,_w,lw,bw,Cw,Sw,Tw,Ew,Aw,Mw,Iw,Nw,Rw,Fw,Pw,zw,Bw,pw,Uw,Hw,Kw,aw,Yw,Jw,Qx,$w,rk,ok,sk,ik,ck,lk,uk,fk,dk,pk,mk,vk,gk,_k,bk,xk,wk,kk,Sk,Ck,Zk,zx,Tk,Ak,Fk,Bk,Vk,Gk,nC,aC,iC,sC,uC,cC,lC,hC,dC,mC,vC,Ux,gC,tk,yC,_C,bC,Wx,wC,kC,SC,AC,MC,IC,NC,RC,DC,OC,BC,UC,VC,WC,GC,HC,PC,KC,XC,YC,JC,eS,aS,Kk,oS,uS,lS,fS,pS,mS,yS,bS,xS,CS,qx,TS,AS,nw,MS,Xx,Yx,fw,IS,NS,RS,DS,OS,LS,FS,zS,US,VS,HS,jS,qS,XS,ZS,Gw,rS,JS,$S,QS,eT,tT,nT,aT,iT,sT,Qk,qC,cT,{kernelName:"Tanh",backendName:"cpu",kernelFunc:lT},{kernelName:"Tile",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;Rx(a,"tile");var o=hT(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k;Rx(a,"topk");var o=_slicedToArray(fT(n.data.get(a.dataId).values,a.shape,a.dtype,i),2),s=o[0],u=o[1];return[n.makeTensorInfo(s.shape,s.dtype,s.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},kw,{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Rx(i,"unique");var o=dT(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var h=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var d=new Array(s),p=0;p<d.length;p++){h[i]=p;var m=Ww({inputs:{x:a},backend:n,attrs:{begin:h,size:f}});d[p]=hw({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return d}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.segmentIds,s=a.numSegments;Rx(i,"unsortedSegmentSum");for(var u=[],c=[],l=i.shape.length-o.shape.length,h=o,f=0;f<l;++f){var d=Uk({inputs:{input:h},backend:n,attrs:{dim:f+1}});h=d,c.push(d)}for(var p=0;p<s;++p){var m=r.createScalarValue(p,"int32"),v=n.makeTensorInfo([],"int32",m),g=Ek({inputs:{a:v,b:h},backend:n}),y=rw({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),_=qk({inputs:{a:y,b:i},backend:n}),b=jC({inputs:{x:_},backend:n,attrs:{axis:0,keepDims:!1}});u.push(b),c.push(v),c.push(g),c.push(y),c.push(_),c.push(b)}var x=_S({inputs:u,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},gS];pT<mT.length;pT++){at(mT[pT])}var vT,gT,yT,_T={},bT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function xT(e){if(!(e in _T)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete _T[e]}),!1),1===e?t.getContext("webgl",bT)||t.getContext("experimental-webgl",bT):t.getContext("webgl2",bT)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;_T[e]=t}var n=_T[e];return n.isContextLost()?(delete _T[e],xT(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),_T[e])}function wT(e,t){return[t,e]}function kT(e){var t=r.sizeFromShape(e),n=Math.ceil(t/4);return r.sizeToSquarishShape(n)}function CT(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ST(e,t){var n,r,a,i,o,s,u,c,l,h=e;return 2===Be().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,s=4,u=1,c=h.HALF_FLOAT,l=h.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function TT(e,t){var n=t();return Be().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}function ET(e){return!!(Be().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function AT(e,t){return PT(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(vT||(vT={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(gT||(gT={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(yT||(yT={}));var MT,IT,NT=/ERROR: [0-9]+:([0-9]+):/g;function RT(e,t){if(TT(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function DT(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(TT(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),TT(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),TT(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function OT(e,t,n){TT(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),TT(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function LT(e,t){TT(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),TT(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function FT(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function PT(e,t,n){var r=TT(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function zT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r.sizeFromShape(e.slice(0,e.length-t))}function BT(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function UT(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[zT(e)].concat(_toConsumableArray(BT(e)))),t}function VT(e){return e%2==0}function WT(e,t){if(e=e.slice(-2),t=t.slice(-2),r.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],a=t.slice(-1)[0];if(n===a)return!0;if(VT(n)&&VT(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&VT(e[0])&&VT(t[0])}function GT(e,t){return null!=e.getExtension(t)}function HT(e){try{if(null!=xT(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function jT(e){var t=ST(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function qT(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&r.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var KT=Be();function XT(){var e,t,n,r,a,i,o,s,u,c;return 2===Be().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function ZT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=r.computeStrides(t);return a.map((function(t,r){return"".concat("int ".concat(e[r]," = ").concat(n," / ").concat(t),"; ",r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t),";")})).join("")}function YT(e){var t=r.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}KT.registerFlag("HAS_WEBGL",(function(){return KT.getNumber("WEBGL_VERSION")>0})),KT.registerFlag("WEBGL_VERSION",(function(){return HT(2)?2:HT(1)?1:0})),KT.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),KT.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===KT.get("WEBGL_VERSION")})),KT.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),KT.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),KT.registerFlag("WEBGL_PACK",(function(){return KT.getBool("HAS_WEBGL")})),KT.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_CLIP",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),KT.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_PACK_REDUCE",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_CONV_IM2COL",(function(){return KT.getBool("WEBGL_PACK")})),KT.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==MT){var t=xT(e);MT=t.getParameter(t.MAX_TEXTURE_SIZE)}return MT}(KT.getNumber("WEBGL_VERSION"))})),KT.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==IT){var t=xT(e);IT=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,IT)}(KT.getNumber("WEBGL_VERSION"))})),KT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=KT.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=xT(e);return GT(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:GT(t,"EXT_disjoint_timer_query")?1:0}(e)})),KT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return KT.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!i.isMobile()})),KT.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=xT(e);if(1===e){if(!GT(t,"OES_texture_float"))return!1}else if(!GT(t,"EXT_color_buffer_float"))return!1;return jT(t)}(KT.getNumber("WEBGL_VERSION"))})),KT.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!KT.getBool("WEBGL_FORCE_F16_TEXTURES")&&KT.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),KT.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return function(e){if(0===e)return!1;var t=xT(e);if(1!==e){if(GT(t,"EXT_color_buffer_float"))return jT(t);if(GT(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=ST(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!!GT(t,"OES_texture_float")&&!!GT(t,"WEBGL_color_buffer_float")&&jT(t)}(KT.getNumber("WEBGL_VERSION"))})),KT.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=KT.getNumber("WEBGL_VERSION"))&&null!=xT(e).fenceSync;var e})),KT.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return KT.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),KT.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}));var JT="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",$T=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=vT.DENSE;var n=kT(t),r=XT();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(ZT(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")})),QT=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=vT.DENSE;var n=kT(t),r=XT();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(ZT(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")})),eE=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.outTexUsage=gT.DOWNLOAD;var n=XT();this.outputShape=t,this.userCode="\n      ".concat(JT,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),tE=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gT.DOWNLOAD;var n=XT();this.outputShape=t,this.userCode="\n      ".concat(JT,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),nE=_createClass((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.variableNames=["A"];var a=XT(),i=_slicedToArray(n,2),o=i[0],s=i[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(YT(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")})),rE=_createClass((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=XT(),i=_slicedToArray(n,2),o=i[0],s=i[1];this.outputShape=t;var u="",c="result";r&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var h=0;h<=1;h++){var f=2*l+h;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(h," < ").concat(t[2],") {\n            localCoords[2] += ").concat(h,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(f,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(f,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(f,"] = values[2];\n              } else {\n                result[").concat(f,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(YT(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(c,";\n      }\n    ")}));function aE(e,t,n,r,a,i){!function(e,t){var n=Be().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size "+"[".concat(e,"x").concat(t,"]")+" is invalid.");if(e>n||t>n)throw new Error("Requested texture size "+"[".concat(e,"x").concat(t,"]")+" greater than WebGL maximum on this browser / GPU "+"[".concat(n,"x").concat(n,"]")+".")}(t,n);var o=function(e){return PT(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return TT(e,(function(){return e.bindTexture(s,o)})),TT(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),TT(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),TT(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),TT(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),TT(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})),TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),o}function iE(e){return e.internalFormatFloat}function oE(e){return e.internalFormatHalfFloat}function sE(e){return e.downloadTextureFormat}function uE(e){return e.internalFormatPackedFloat}function cE(e){return e.internalFormatPackedHalfFloat}var lE=function(){function e(t){_classCallCheck(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Be().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){_T[e]=t}(n,t)):this.gl=xT(n);var r="WEBGL_color_buffer_float";if(1===Be().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=AT(this.gl,"OES_texture_float"),GT(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=AT(this.gl,"OES_texture_half_float");else if(Be().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),GT(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=AT(this.gl,"EXT_color_buffer_half_float");else if(Be().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",GT(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!GT(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=function(e){return function(e,t){var n=PT(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return TT(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),TT(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){var n=PT(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return TT(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),TT(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return PT(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=ST(this.gl,this.textureHalfFloatExtension)}var t;return _createClass(e,[{key:"debug",get:function(){return Be().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;TT(t,(function(){return t.finish()})),TT(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),TT(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),TT(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),TT(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),TT(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=_slicedToArray(wT(t,n),2);return aE(e,a[0],a[1],iE(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=_slicedToArray(wT(t,n),2);return aE(e,a[0],a[1],oE(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=_slicedToArray(wT(t,n),2);return aE(e,a[0],a[1],sE(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?TT(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):TT(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),TT(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=_slicedToArray(CT(t,n),2);return aE(e,a[0],a[1],cE(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=_slicedToArray(CT(t,n),2);return aE(e,a[0],a[1],uE(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(LT(this.gl,this.framebuffer),this.outputTexture=null),TT(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=_slicedToArray(wT(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return TT(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return function(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=_slicedToArray(CT(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}(this.gl,e,0,0,0,a,i)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();TT(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return TT(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),TT(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),TT(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Be().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return TT(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=function(e,t){var n=PT(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(TT(e,(function(){return e.shaderSource(n,t)})),TT(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=NT.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var a=+n[1],i=e.split("\n"),o=i.length.toString().length+2,s=i.map((function(e,t){return r.rightPad((t+1).toString(),o)+e})),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var l=s.slice(0,a-1),h=s.slice(a-1,a),f=s.slice(a);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(r.rightPad(h[0],u)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(t,e),a=function(e){var t=XT();return function(e,t){var n=PT(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(TT(e,(function(){return e.shaderSource(n,t)})),TT(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}(t),i=function(e){return PT(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return TT(t,(function(){return t.attachShader(i,a)})),TT(t,(function(){return t.attachShader(i,n)})),function(e,t){if(TT(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,i),this.debug&&RT(t,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=function(e,t,n){return TT(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),DT(e,t,"clipSpacePos",n,3,20,0)&&DT(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),i}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&TT(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&RT(this.gl,this.program),TT(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return PT(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),TT(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){TT(e,(function(){return function(e,t,n){(function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))})(e,n),TT(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),TT(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),TT(e,(function(){return e.uniform1i(n,r)}))}(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=_slicedToArray(CT(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&RT(this.gl,this.program),FT(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),TT(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),TT(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=AT(this.gl,2===Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||r.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),OT(this.gl,e,this.framebuffer),this.debug&&FT(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(OT(this.gl,this.outputTexture,this.framebuffer),this.debug&&FT(this.gl)):LT(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;OT(r,e,this.framebuffer),this.debug&&FT(r),this.outputTexture=e,TT(r,(function(){return r.viewport(0,0,t,n)})),TT(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),TT(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}(),hE=v.getBroadcastDims,fE="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",dE="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",pE="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",mE="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function vE(e){return"offset".concat(e)}function gE(e){var t=e.name,n=r.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function yE(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function _E(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function bE(e,t){return t.map((function(t){return e[t]})).join(", ")}function xE(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var a=e.logicalShape,i=t[n],o=i.shape;if(!r.arraysEqual(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(!e.isUniform||!i.isUniform){var s=e.texShape,u=i.isUniform?null:i.texData.texShape;if(!r.arraysEqual(s,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(u," must match"))}}))}var wE=W.addImpl,kE=W.bincountImpl,CE=W.bincountReduceImpl,SE=W.ceilImpl,TE=W.concatImpl,EE=W.expImpl,AE=W.expm1Impl,ME=W.floorImpl,IE=W.gatherV2Impl,NE=W.greaterImpl,RE=W.lessImpl,DE=W.linSpaceImpl,OE=W.logImpl,LE=W.maxImpl,FE=W.maximumImpl,PE=W.minimumImpl,zE=W.multiplyImpl,BE=W.negImpl,UE=W.prodImpl,VE=W.rangeImpl,WE=W.rsqrtImpl,GE=W.simpleAbsImpl,HE=W.sliceImpl,jE=W.stridedSliceImpl,qE=W.subImpl,KE=W.tileImpl,XE=W.topKImpl,ZE=W.transposeImpl,YE=W.uniqueImpl;function JE(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function $E(e,t){return 1===t?[e]:JE(e,t)}var QE=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=$E("rc",n),a=yE(n),i=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<e;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}})),eA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",i=0;i<4;i++){var o="thisRC = rc;";i%2==1&&(o+="thisRC.z += 1;"),i>1&&(o+="thisRC.y += 1;"),a+="\n        ".concat(o,"\n        ").concat(i>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(i,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(i>0?"}":"","\n      ")}this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(ZT(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(YT(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")})),tA=function(){function e(t){_classCallCheck(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return _createClass(e,[{key:"acquireTexture",value:function(e,t,n){var r=rA(t,n),a=aA(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=nA(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===yT.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===yT.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===yT.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===yT.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===yT.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=rA(n,r),i=aA(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=nA(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Be().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(this.numFreeTextures+this.numUsedTextures,")"));var e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*e),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function nA(e,t,n,r,a){var i,o=function(e,t){switch(e){case yT.PACKED_2X2_FLOAT32:return uE(t);case yT.PACKED_2X2_FLOAT16:return cE(t);case yT.UNPACKED_FLOAT32:return iE(t);case yT.UNPACKED_FLOAT16:return oE(t);case yT.PACKED_4X1_UNSIGNED_BYTE:return sE(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=_slicedToArray(CT(e[0],e[1]),2);i=s[0]*s[1]}else{var u=_slicedToArray(wT(e[0],e[1]),2);i=u[0]*u[1]}return i*function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,o)}function rA(e,t){if(e===gT.UPLOAD)return yT.PACKED_2X2_FLOAT32;if(e===gT.RENDER||null==e)return function(e){return Be().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?yT.PACKED_2X2_FLOAT32:yT.UNPACKED_FLOAT32:e?yT.PACKED_2X2_FLOAT16:yT.UNPACKED_FLOAT16}(t);if(e===gT.DOWNLOAD||e===gT.PIXELS)return yT.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function aA(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var iA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),oA="return abs(x);",sA="return x;",uA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),cA=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=$E("rc",n),a=yE(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),lA=g.whereImpl,hA={},fA=function(e){_inherits(o,e);var t,n,a,i=_createSuper(o);function o(e){var t,n;if(_classCallCheck(this,o),(t=i.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.warnedAboutMemory=!1,t.warnedAboutCPUBackend=!1,t.pendingDeletes=0,t.disposed=!1,!Be().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=xT(Be().getNumber("WEBGL_VERSION"));t.binaryCache=(n=Be().getNumber("WEBGL_VERSION"))in hA?hA[n]:(hA[n]={},hA[n]),t.gpgpu=new lE(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new tA(t.gpgpu),t.numMBBeforeWarning=null==Be().global.screen?1024:Be().global.screen.height*Be().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new G(_assertThisInitialized(t),fa()),_possibleConstructorReturn(t)}return _createClass(o,[{key:"nextDataId",value:function(){return o.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Be().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Be().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:gT.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(Be().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:gT.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,a=t.dtype,i=t.complexTensorInfos,o=t.slice,s=t.shape,u=t.isPacked;if(null!=o){var c;c=u?new uA(s,sA):new iA(s,sA);var l=this.runWebGLProgram(c,[{dataId:e,shape:s,dtype:a}],a),h=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),h}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;var f,d,p=null!=this.activeTimers;if(p&&(f=r.now()),"complex64"===a){var m=this.readSync(i.real.dataId),g=this.readSync(i.imag.dataId);d=v.mergeRealAndImagArrays(m,g)}else d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=r.now()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i,o,s,u,c,l,h,f,d,p,m,g,y,_,b,x,w,k;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(a=this.texData.get(t),i=a.values,o=a.shape,s=a.slice,u=a.dtype,c=a.complexTensorInfos,l=a.isPacked,null==s){e.next=8;break}return h=l?new uA(o,sA):new iA(o,sA),f=this.runWebGLProgram(h,[{dataId:t,shape:o,dtype:u}],u),d=this.read(f.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(f),d));case 8:if(null==i){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(Be().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Be().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(g=null,"complex64"!==u&&Be().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),_=this.texData.get(p.dataId),g=(y=this.gpgpu).createBufferFromTexture.apply(y,[_.texture].concat(_toConsumableArray(kT(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==u,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==u){e.next=26;break}return e.next=22,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 22:b=e.sent,m=v.mergeRealAndImagArrays(b[0],b[1]),e.next=27;break;case 26:null==g?m=this.getValuesFromTexture(t):(x=r.sizeFromShape(o),m=this.gpgpu.downloadFloat32MatrixFromBuffer(g,x));case 27:return null!=p&&this.disposeIntermediateTensorInfo(p),w=this.convertAndCacheOnCPU(t,m),k=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),k.forEach((function(e){return e(w)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&fa().removeDataId(t,this),this.pendingDeletes--),w));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return r.decodeString(e)}))}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return Zn(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!ET(n)){if(Be().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,i=t.isPacked,o=r.sizeFromShape(n);if(Be().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s,u=this.decode(e),c=this.texData.get(u.dataId),l=(s=this.gpgpu).downloadMatrixFromPackedTexture.apply(s,[c.texture].concat(_toConsumableArray(kT(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(u),l}var h=Be().getBool("WEBGL_PACK")&&!0===i,f=h?UT(n):n,d=h?new tE(f):new eE(f),p=this.runWebGLProgram(d,[{shape:f,dtype:a,dataId:e}],"float32"),m=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),v}},{key:"timerAvailable",value:function(){return Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,a,i,o,s,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,a=[],i=!1,null==this.programTimersStack?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=r.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=r.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,i&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:c=e.sent,u.kernelMs=r.sum(c),u.getExtraProfileInfo=function(){return c.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,u));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}},{key:"endTimer",value:function(e){return Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=r.now(),e)}},{key:"getQueryTime",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Be().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(t):t.endMs-t.startMs);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return Be().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=fa().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,a=this.getCPUBackend();return Be().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=a||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=a&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&r.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){v.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return lA(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new uA(e.shape,t),a=this.compileAndRun(r,[e],n);return fa().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=GE(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Be().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oA,e.dtype);var n=new iA(e.shape,oA),r=this.compileAndRun(n,[e]);return fa().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var a;if("string"===t&&null!=n&&n.length>0&&r.isString(n[0])){var i=n.map((function(e){return r.encodeString(e)}));a=this.write(i,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return fa().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new cA(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new QE(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[zT(e.shape)].concat(_toConsumableArray(BT(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[zT(t)].concat(_toConsumableArray(BT(t))),i=new eA(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=UT(a);return t=r?new QT(o):new $T(o),{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===vT.DENSE){var c=kT(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===r.sizeFromShape(s.shape))return u.values=r.getTypedArrayFromDType(s.dtype,0),s;var l=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&r.sizeFromShape(t.shape)<=Be().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!WT(n.shape,t.shape)){var a=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),l.push(t),n=i.texData.get(t.dataId),a.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,d={shape:s.shape,texData:u,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){r+="".concat(e.shape,"_").concat(e.isUniform?"uniform":e.texData.texShape,"_").concat(null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0)}));var a=e.constructor.name;return a+="_"+r+"_"+e.userCode}(e,h,d),m=this.getAndSaveBinary(p,(function(){return function(e,t,n,a){var i=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),s=o.map((function(e){return e.shapeInfo})),u={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},c=function(e,t,n,a){var i=[];e.forEach((function(e){var t=r.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(i.push("uniform sampler2D ".concat(e.name,";")),i.push("uniform int offset".concat(e.name,";")))}));var o,s,u=i.join("\n"),c=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="";return a+=n?function e(t){switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,"\n    vec4 ".concat("get"+n.charAt(0).toUpperCase()+n.slice(1),"() {\n      return ").concat(XT().texture2D,"(").concat(n,", halfCR);\n    }\n  ");case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=XT();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }\n  ")}(t);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=XT();if(null!=i&&r.arraysEqual(t,i))return"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(n,", uv);\n      }\n    ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(Math.ceil(t[1]/2),", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=_E(t,n.slice(1));return"\n        ".concat(e(s),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(bE(["b","row","col"],[1,2]),");\n        }\n      ")}var u=o[0],c=o[1],l=Math.ceil(n[2]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(c,", ").concat(l*Math.ceil(n[1]/2),", ").concat(l,", b, row, col);\n      return ").concat(XT().texture2D,"(").concat(r,", uv);\n    }\n  ")}(t);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),h="int b, int row, int col",f="b * ".concat(l," + (row / 2) * ").concat(c," + (col / 2)"),d=2;d<n-1;d++)h="int b".concat(d,", ")+h,l*=t[n-d-1],f="b".concat(d," * ").concat(l," + ")+f;return"\n    vec4 ".concat(a,"(").concat(h,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(s,");\n      return ").concat(XT().texture2D,"(").concat(r,", uv);\n    }\n  ")}(t)}var n}(e):function e(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=_slicedToArray(e.shapeInfo.texShape,2),a=r[0],i=r[1];if(1===a&&1===i)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=_slicedToArray(e.shapeInfo.texShape,2),s=o[0],u=o[1];return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", ").concat(vE(t),");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(t);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(gE(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=vE(t);return 1===i?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):1===a?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(t);case 2:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(null!=o&&r.arraysEqual(n,o))return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o[1],".0, ").concat(o[0],".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");var s=r.squeezeShape(n),u=s.newShape,c=s.keptDims;if(u.length<n.length){var l=_E(t,u);return"\n      ".concat(e(l),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(bE(["row","col"],c),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(gE(t),"\n      }\n    ");var h=o[0],f=o[1],d=vE(a);return 1===f?"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):1===h?"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(f,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[1]*n[2],s=n[2],u=r.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var h=_E(t,c);return"\n        ".concat(e(h),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(bE(["row","col","depth"],l),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(s,", 1)));\n        ").concat(gE(t),"\n      }\n    ");var f=t.shapeInfo.texShape,d=f[0],p=f[1],m=t.shapeInfo.flatOffset;return p===o&&null==m?"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      "):p===s&&null==m?"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(s," + depth + ").concat(vE(a),";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(t);case 4:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[3],s=n[2]*o,u=n[1]*s,c=r.squeezeShape(n),l=c.newShape,h=c.keptDims;if(l.length<n.length){var f=_E(t,l);return"\n      ".concat(e(f),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(bE(["row","col","depth","depth2"],h),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(u,", ").concat(s,", ").concat(o,", 1)));\n        ").concat(gE(t),"\n      }\n    ");var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],v=p[1];return v===u&&null==d?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):v===o&&null==d?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(s," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(vE(a),");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);case 5:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[4],s=n[3]*o,u=n[2]*s,c=n[1]*u,l=r.squeezeShape(n),h=l.newShape,f=l.keptDims;if(h.length<n.length){var d=_E(t,h);return"\n      ".concat(e(d),"\n      float ").concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(i,"(").concat(bE(["row","col","depth","depth2","depth3"],f),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(c,", ").concat(u,", ").concat(s,", ").concat(o,")) +\n          depth3;\n        ").concat(gE(t),"\n      }\n    ");var p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,v=m[0],g=m[1];return g===c&&null==p?"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(u,", ").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):g===o&&null==p?"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(n[1]*n[2]*n[3],",\n               ").concat(n[2]*n[3],", ").concat(n[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(c," + col * ").concat(u," + depth * ").concat(s," +\n          depth2 * ").concat(o," + depth3 + ").concat(vE(a),";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);case 6:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r.squeezeShape(n),s=o.newShape,u=o.keptDims;if(s.length<n.length){var c=_E(t,s);return"\n      ".concat(e(c),"\n      float ").concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(i,"(").concat(bE(["row","col","depth","depth2","depth3","depth4"],u),");\n      }\n    ")}var l=n[5],h=n[4]*l,f=n[3]*h,d=n[2]*f,p=n[1]*d;if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(d,", ").concat(f,", ").concat(h,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(gE(t),"\n      }\n    ");var m=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,g=v[0],y=v[1];return y===p&&null==m?"\n      float ".concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(f,", ").concat(h,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(y,".0, ").concat(g,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):y===l&&null==m?"\n      float ".concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(n[1]*n[2]*n[3]*n[4],",\n               ").concat(n[2]*n[3]*n[4],",\n               ").concat(n[3]*n[4],",\n               ").concat(n[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(y,".0, ").concat(g,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(d," + depth * ").concat(f," +\n          depth2 * ").concat(h," + depth3 * ").concat(l," + depth4 + ").concat(vE(a),";\n      vec2 uv = uvFromFlat(").concat(g,", ").concat(y,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}(e),e.shapeInfo.logicalShape.length<=t.logicalShape.length&&(a+=n?function(e,t){var n,a=e.name,i=a.charAt(0).toUpperCase()+a.slice(1),o="get"+i+"AtOutCoords",s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,c=hE(e.shapeInfo.logicalShape,t.logicalShape),l=yE(u),h=u-s,f=["x","y","z","w","u","v"];n=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var d;d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+h])})).join(", ");var p="return outputValue;",m=1===r.sizeFromShape(e.shapeInfo.logicalShape),v=1===r.sizeFromShape(t.logicalShape);if(1!==s||m||v){if(m&&!v)p=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var g=s-2,y=s-1;c.indexOf(g)>-1&&c.indexOf(y)>-1?p="return vec4(outputValue.x);":c.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(y)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(i,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===s&&null==e.shapeInfo.flatOffset&&r.arraysEqual(e.shapeInfo.texShape,t.texShape))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var u,c=yE(s),l=hE(e.shapeInfo.logicalShape,t.logicalShape),h=s-o,f=["x","y","z","w","u","v"];u=0===o?"":s<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var d;return d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+h])})).join(", "),"\n    float ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(u,"\n      return get").concat(a,"(").concat(d,");\n    }\n  ")}(e,t)),a}(e,t,a)})).join("\n"),l=t.texShape,h=XT(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(h),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(fE,"\n    ").concat(dE,"\n    ").concat(pE,"\n  ")}(h);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return n=t,1===(a=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)])[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    "):1===a[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ");case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(r.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",u=2;u<e.length-1;u++)i*=e[e.length-u-1],o="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+o,s="b".concat(u,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t)}var n,a}(t.logicalShape,l),s=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(h)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=t)[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(n[1],".0);\n      }\n    "):1===n[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(n[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return resTexRC.x * ").concat(n[1]," + resTexRC.y;\n    }\n  ");case 2:return function(e,t){return r.arraysEqual(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=ZT(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=ZT(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=ZT(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=ZT(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}var n}(t.logicalShape,l),s=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(h)),a&&(d+=mE),[d,f,s,u,o,c,n].join("\n")}(o,u,i,t.packedInputs),l=e.createProgram(c),h=null,f=e.getUniformLocation(l,"NAN",!1);1===Be().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(l,"INFINITY",!1));for(var d={},p=0;p<t.variableNames.length;p++){var m=t.variableNames[p];d[m]=e.getUniformLocation(l,m,!1),d["offset".concat(m)]=e.getUniformLocation(l,"offset".concat(m),!1)}return{program:t,source:c,webGLProgram:l,uniformLocations:d,inShapeInfos:s,outShapeInfo:u,infLoc:h,nanLoc:f}}(i.gpgpu,e,h,d)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),function(e,t,n,a,i){xE(t.inShapeInfos,n),xE([t.outShapeInfo],[a]);var o=a.texData.texture,s=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(o,s[0],s[1]):e.setOutputMatrixTexture(o,s[0],s[1]),e.setProgram(t.webGLProgram),1===Be().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,a){var i=t.program.variableNames[a],o=t.uniformLocations[i],s=t.uniformLocations["offset".concat(i)];if(null!=o)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(o,u)}else null!=n.texData.slice&&null!=s&&e.gl.uniform1i(s,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,a)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,m,h,d,a),l.forEach((function(e){return i.disposeIntermediateTensorInfo(e)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!Be().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.runWebGLProgram(e,t,n=n||t[0].dtype,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(Be().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=ma((function(){if(!Be().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Be().getBool("DEBUG");Be().set("DEBUG",!1);var n=e.abs(Wa(1e-8)).dataSync()[0];if(Be().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,i=t.values,o=t.texture,s=t.usage,u=t.isPacked;if(null==o){var c,l=null!=this.activeTimers;l&&(c=r.now());var h=t.texShape;if(null==h&&(h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Be().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?r.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=r.squeezeShape(e);e=a.newShape}var i=r.sizeFromShape(e);if(e.length<=1&&i<=n)return[1,i];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,s=zT(e),u=2,c=2;return e.length&&(u=(o=_slicedToArray(BT(e),2))[0],c=o[1]),i=s*(u/2)*(c/2),r.sizeToSquarishShape(i).map((function(e){return 2*e}))}return r.sizeToSquarishShape(i)}(n,u),t.texShape=h),null!=i){var f,d,p=UT(n),m=h[1],v=h[0],g=i instanceof Uint8Array;u?(m=(f=_slicedToArray(CT(h[0],h[1]),2))[0],v=f[1],d=new rE(p,[v,m],g)):d=new nE(p,[v,m],g);var y=this.makeTensorInfo([v,m],a);this.texData.get(y.dataId).usage=g?gT.PIXELS:gT.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,v,i);var _=this.runWebGLProgram(d,[y],a,null,!0),b=this.texData.get(_.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(y),this.texData.delete(_.dataId),t.values=null,l&&(this.uploadWaitMs+=r.now()-c)}else{var x=this.acquireTexture(h,s,a,u);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*r.bytesPerElement(t)}}]),o}(H);fA.nextDataId=0,i.isBrowser()&&Sa("webgl",(function(){return new fA}),2);var dA=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A","B"],this.outputShape=v.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),pA=_createClass((function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=v.assertAndGetBroadcastShape(n,a);var o=this.outputShape.length,s="";if(i)if(0===o||1===r.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s="\n          ".concat(yE(o)," coords = getOutputCoords();\n        "),1===o)s+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=$E("coords",o);s+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(s,"\n\n        setOutput(result);\n      }\n    ")}));function mA(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var vA={kernelName:"Identity",backendName:"webgl",kernelFunc:mA};function gA(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=mA({inputs:{x:r},backend:n}),u=mA({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var yA={kernelName:"Complex",backendName:"webgl",kernelFunc:gA},_A="return (a < 0.) ? b * a : a;",bA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",xA={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.alpha,s=n.makeTensorInfo([],"float32",r.createScalarValue(o,"float32")),u=Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pA(bA,i.shape,s.shape):new dA(_A,i.shape,s.shape),c=n.runWebGLProgram(u,[i,s],i.dtype);return n.disposeIntermediateTensorInfo(s),c}},wA="return (a < 0.) ? b * a : a;",kA="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",CA={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pA(kA,r.shape,a.shape):new dA(wA,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}};function SA(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var h=c.texData.get(u.dataId),f=r(h.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=Be().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new uA(u.shape,n):new iA(u.shape,t),c.runWebGLProgram(i,[u],l)}}function TA(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,h=i;if(o&&"complex64"===c.dtype){var f=h.texData.get(c.dataId),d=h.texData.get(l.dataId),p=[[f.complexTensorInfos.real,d.complexTensorInfos.real],[f.complexTensorInfos.imag,d.complexTensorInfos.imag]].map((function(e){var n=_slicedToArray(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new dA(t,c.shape,l.shape);return h.runWebGLProgram(s,[i,o],Dt(r.dtype,a.dtype))})),m=_slicedToArray(p,2),v=m[0],g=m[1],y=gA({inputs:{real:v,imag:g},backend:h});return h.disposeIntermediateTensorInfo(v),h.disposeIntermediateTensorInfo(g),y}var _,b=u||Dt(c.dtype,l.dtype);if(h.shouldExecuteOnCPU([c,l])&&null!=s){var x=h.texData.get(c.dataId),w=h.texData.get(l.dataId),k=_slicedToArray(s(c.shape,l.shape,x.values,w.values,b),2),C=k[0],S=k[1],T=h.makeTensorInfo(S,b);return h.texData.get(T.dataId).values=C,T}return _=Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new pA(n,c.shape,l.shape,a):new dA(t,c.shape,l.shape),h.runWebGLProgram(_,[c,l],b)}}function EA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?kA:wA;if("leakyrelu"===e)return t?bA:_A;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var AA=_createClass((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];_classCallCheck(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=Math.ceil((a?t[1]:t[2])/2),h=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",d=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",v="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var y="rc.x",_="rc.x";t[0]<n[0]?y="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(_="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n\n      const float sharedDimension = ").concat(l,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(l,"; i++) {\n          int batchA = ").concat(y,";\n          int batchB = ").concat(_,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(d[0]," * ").concat(p[0],");\n          result += (").concat(d[1]," * ").concat(p[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")})),MA=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=v.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),IA="return a * b;";function NA(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=v.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new MA("return areal * breal - aimag * bimag;",a.shape,i.shape),l=new MA("return areal * bimag + aimag * breal;",a.shape,i.shape),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(c,h,"float32"),d=r.runWebGLProgram(l,h,"float32"),p=gA({inputs:{real:f,imag:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(d),p}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),g=r.texData.get(i.dataId),y=_slicedToArray(zE(a.shape,i.shape,m.values,g.values,o),2),_=y[0],b=y[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=_,x}return t=Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pA(IA,a.shape,i.shape):new dA(IA,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var RA={kernelName:"Multiply",backendName:"webgl",kernelFunc:NA};function DA(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.shape,s=n,u=r.sizeFromShape(i.shape),c=r.inferFromImplicitShape(o,u),l=r.sizeFromShape(c);r.assert(u===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(i.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."}));var h=s.texData.get(i.dataId);return!h.isPacked||WT(i.shape,c)||null!==h.texture&&WT(h.shape,c)?(s.incRef(i.dataId),{dataId:i.dataId,shape:c,dtype:i.dtype}):function(e,t,n){var r=[zT(e.shape)].concat(_toConsumableArray(BT(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[zT(t)].concat(_toConsumableArray(BT(t))),o=new eA(i,r),s=n.runWebGLProgram(o,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(i,c,s)}var OA={kernelName:"Reshape",backendName:"webgl",kernelFunc:DA},LA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["x"];var a=t.windowSize,i=t.batchSize,o=t.inSize,s=t.outSize;this.outputShape=[i,s];var u=4*Math.floor(a/4),c=a%4,l="sumValue += dot(values, ones);";if(null!=n){var h=1/n;l="sumValue += dot(values * ".concat(r.isInt(h)?h.toPrecision(2):h,", ones);")}var f="";o%a>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(a,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),FA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),h=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n      }\n    "),d="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function PA(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=v.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u,c=a[o],l=c.inSize,h=c.windowSize,f=c.outSize;s="mean"===n?0===o?new LA({windowSize:h,inSize:l,batchSize:e.shape[0],outSize:f},l):new LA({windowSize:h,inSize:l,batchSize:e.shape[0],outSize:f}):new FA({windowSize:h,inSize:l,batchSize:e.shape[0],outSize:f},n),u=i,i=r.runWebGLProgram(s,[i],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return i}var zA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=yE(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")})),BA=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=yE(this.rank),o=JE("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),h="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(h,";\n      if(").concat(l,") {\n        result[1] = ").concat(h,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(h,";\n        if(").concat(l,") {\n          result[3] = ").concat(h,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function UA(e,t,n){var r=Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BA(e.shape,t):new zA(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function VA(e){var t=e.inputs,n=e.backend,a=e.attrs;return function(e,t,n,a){var i=e.shape.length,o=r.parseAxisParam(t,e.shape),s=o,u=v.getAxesPermutation(s,i),c=null!=u,l=e;c&&(l=UA(e,u,a),s=v.getInnerMostAxes(s.length,i)),v.assertAxesAreInnerMostDims("sum",s,i);var h=_slicedToArray(v.computeOutAndReduceShapes(l.shape,s),2),f=h[0],d=h[1],p=f;n&&(p=v.expandShapeToKeepDim(f,o));var m=r.sizeFromShape(d),g=DA({inputs:{x:l},attrs:{shape:[r.sizeFromShape(e.shape)/m,m]},backend:a}),y=PA(g,Ot(e.dtype),"sum",a),_=DA({inputs:{x:y},attrs:{shape:p},backend:a});return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(y),c&&a.disposeIntermediateTensorInfo(l),_}(t.x,a.axis,a.keepDims,n)}var WA={kernelName:"Sum",backendName:"webgl",kernelFunc:VA};function GA(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=new Array(i.shape.length),c=0;c<u.length;c++)u[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var l=s.texData.get(i.dataId),h=ZE(l.values,i.shape,i.dtype,o,u);t=s.makeTensorInfo(u,i.dtype),s.texData.get(t.dataId).values=h}else t=UA(i,o,s);return t}var HA={kernelName:"Transpose",backendName:"webgl",kernelFunc:GA};function jA(e){var t=e.a,n=e.b,a=e.transposeA,i=e.transposeB,o=e.backend,s=e.bias,u=void 0===s?null:s,c=e.preluActivationWeights,l=void 0===c?null:c,h=e.leakyreluAlpha,f=void 0===h?0:h,d=e.activation,p=void 0===d?null:d,m=t.shape.length,v=n.shape.length,g=a?t.shape[m-2]:t.shape[m-1],y=i?n.shape[v-1]:n.shape[v-2],_=a?t.shape[m-1]:t.shape[m-2],b=i?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=r.sizeFromShape(x),C=r.sizeFromShape(w);r.assert(m>=2&&v>=2&&(k===C||1===k||1===C),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(x,") and (").concat(w,").")}));var S=(k>C?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([_,b]);r.assert(g===y,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(i," must match.")}));var T,E=a?[k,g,_]:[k,_,g],A=i?[C,b,y]:[C,y,b],M=DA({inputs:{x:t},backend:o,attrs:{shape:E}}),I=DA({inputs:{x:n},backend:o,attrs:{shape:A}}),N=[M,I],R=Math.max(k,C),D=a?M.shape[1]:M.shape[2],O=null!=u,L=null!=l,F="leakyrelu"===p,P=null!=p?EA(p,!0):null;if((1===_||1===b)&&D>1e3&&!1===(O||L||F||null!=P)){var z=M,B=I;a&&(z=GA({inputs:{x:M},backend:o,attrs:{perm:[0,2,1]}}),N.push(z)),i&&(B=GA({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),N.push(B));var U=1===b,V=z;1!==b&&(V=DA({inputs:{x:z},backend:o,attrs:{shape:[R,D,1]}}),N.push(V));var W=1===b?2:1,G=B;U&&(G=DA({inputs:{x:B},backend:o,attrs:{shape:[R,1,D]}}),N.push(G));var H=NA({inputs:{a:V,b:G},backend:o});T=VA({inputs:{x:H},backend:o,attrs:{axis:W,keepDims:!0}}),N.push(H)}else{var j=Dt(t.dtype,n.dtype),q=new AA(E,A,[R,_,b],a,i,O,P,L,F),K=[M,I];if(null!=u&&K.push(u),L&&K.push(l),F){var X=o.makeTensorInfo([],"float32",r.createScalarValue(f,"float32"));K.push(X),N.push(X)}T=o.runWebGLProgram(q,K,j)}var Z=DA({inputs:{x:T},backend:o,attrs:{shape:S}});N.push(T);for(var Y=0,J=N;Y<J.length;Y++){var $=J[Y];o.disposeIntermediateTensorInfo($)}return Z}var qA={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return jA({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},KA={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=GE(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Be().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new uA(a.shape,"return abs(x);"):new iA(a.shape,"return abs(x);"),r.runWebGLProgram(t,[a],a.dtype)}},XA={kernelName:"Acos",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},ZA={kernelName:"Acosh",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},YA="return a + b;",JA={kernelName:"Add",backendName:"webgl",kernelFunc:TA({opSnippet:YA,packedOpSnippet:YA,supportsComplex:!0,cpuKernelImpl:wE})},$A=_createClass((function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),QA=_createClass((function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),eM={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return mA({inputs:{x:a[0]},backend:r});if(a.length>Be().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return Dt(e,t)})),c=a.map((function(e){return e.shape})),l=Be().getBool("WEBGL_PACK")?new QA(a[0].shape,c):new $A(a[0].shape,c);return r.runWebGLProgram(l,a,u)}},tM={kernelName:"All",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=r.parseAxisParam(o,i.shape),l=c,h=v.getAxesPermutation(l,u),f=i;null!=h&&(f=GA({inputs:{x:i},backend:n,attrs:{perm:h}}),l=v.getInnerMostAxes(l.length,u)),v.assertAxesAreInnerMostDims("all",l,u);var d,p=_slicedToArray(v.computeOutAndReduceShapes(f.shape,l),2),m=p[0],g=p[1],y=DA({inputs:{x:f},backend:n,attrs:{shape:[-1,r.sizeFromShape(g)]}}),_=PA(y,y.dtype,"all",n);return d=DA(s?{inputs:{x:_},backend:n,attrs:{shape:v.expandShapeToKeepDim(m,c)}}:{inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(_),null!=h&&n.disposeIntermediateTensorInfo(f),d}},nM={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=r.parseAxisParam(o,i.shape),l=c,h=v.getAxesPermutation(l,u),f=i;null!=h&&(f=GA({inputs:{x:i},backend:n,attrs:{perm:h}}),l=v.getInnerMostAxes(l.length,u)),v.assertAxesAreInnerMostDims("any",l,u);var d,p=_slicedToArray(v.computeOutAndReduceShapes(f.shape,l),2),m=p[0],g=p[1],y=DA({inputs:{x:f},backend:n,attrs:{shape:[-1,r.sizeFromShape(g)]}}),_=PA(y,y.dtype,"any",n);return d=DA(s?{inputs:{x:_},backend:n,attrs:{shape:v.expandShapeToKeepDim(m,c)}}:{inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(_),null!=h&&n.disposeIntermediateTensorInfo(f),d}},rM=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));",";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat("max"===n?">":"<"," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),aM=_createClass((function e(t,n,a,i){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(t.length>2,(function(){return"Packed arg".concat(a.charAt(0).toUpperCase()+a.slice(1)," supports only inputs with rank above 2.")}));var o=Math.ceil(t[t.length-1]/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,h=yE(l),f=$E("coords",l);if(1===o){var d=yE(u=l+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(h," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(h," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(h," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(h," sourceLocB = coords;\n        --").concat(f[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),m="."+p[u-1],v=p.map((function(e){return"int "+e})),g=$E("sourceLocR",u-1).concat("inIdx.r"),y=$E("sourceLocG",u-1).concat("inIdx.g"),_=$E("sourceLocB",u-1).concat("inIdx.b"),b=$E("sourceLocA",u-1).concat("inIdx.a"),x="max"===a?"greaterThan":"lessThan",w=i?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(_.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),k="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(_.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),C=i?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(h," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(x,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function iM(e,t,n,a){var i=[n];if(v.assertAxesAreInnerMostDims("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.shape.length),!Be().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],s=_slicedToArray(v.computeOutAndReduceShapes(t.shape,i),2),u=s[0],c=s[1],l=r.sizeFromShape(c),h=DA({inputs:{x:t},backend:e,attrs:{shape:[-1,l]}});o.push(h);var f=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=n.shape[0],o=n.shape[1];null!=a&&(i=a.shape[0],o=a.shape[1]);var s=v.computeOptimalWindowSize(o),u={windowSize:s,inSize:o,batchSize:i,outSize:Math.ceil(o/s)},c=new rM(u,r,null==a),l=[n];null!=a&&l.push(a);var h=t.runWebGLProgram(c,l,"int32");if(1===h.shape[1])return h;var f=e(t,n,r,h);return t.disposeIntermediateTensorInfo(h),f}(e,h,a);o.push(f);var d=DA({inputs:{x:f},backend:e,attrs:{shape:u}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=a?a.shape:n.shape,o=v.computeOptimalWindowSize(i[i.length-1]),s=new aM(i,o,r,null==a),u=t.runWebGLProgram(s,null==a?[n]:[n,a],"int32");if(u.shape.length===n.shape.length){var c=e(t,n,r,u);return t.disposeIntermediateTensorInfo(u),c}return u}(e,t,a)}var oM={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=r.parseAxisParam(o,i.shape),u=v.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=GA({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=v.getInnerMostAxes(s.length,c.shape.length)),v.assertAxesAreInnerMostDims("argMax",[s[0]],c.shape.length);var h=iM(n,c,s[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}},sM={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=r.parseAxisParam(o,i.shape),u=v.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=GA({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=v.getInnerMostAxes(s.length,c.shape.length)),v.assertAxesAreInnerMostDims("argMin",[s[0]],c.shape.length);var h=iM(n,c,s[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}},uM={kernelName:"Asin",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},cM={kernelName:"Asinh",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},lM={kernelName:"Atan",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},hM={kernelName:"Atan2",backendName:"webgl",kernelFunc:TA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},fM={kernelName:"Atanh",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})},dM=_createClass((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="0.0";if(m||(v="-1.0 / 1e-20"),r)this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?"((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"):"(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"):"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var g="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(g="avgValue / count");var y=4*Math.floor(o/4),_=o%4,b="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(b,"\n          }\n\n          int xC = xCCorner + ").concat(y,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(b,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(b,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(b,"\n          }\n        }\n        setOutput(").concat(g,");\n      }\n    ")}})),pM=_createClass((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,h=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var _="avg"===n,b="0.0";if(_||(b="-1.0 / 1e-20"),r)this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(h,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var x="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(x="avgValue / count");var w=4*Math.floor(o/4),k=o%4,C="\n      if (".concat(_,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(h,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n          setOutput(").concat(x,");\n        }\n      }\n    ")}})),mM={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x;qT(i,"avgPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.assert(v.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '1'")}));var l=v.computePool2DInfo(i.shape,o,s,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&r.arraysEqual(l.inShape,l.outShape))return mA({inputs:{x:i},backend:n});var h=new dM(l,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}},vM={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=v.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,c),h=new pM(l,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},gM=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n      const float avgMultiplier = float(").concat(1/(t.filterHeight*t.filterWidth),");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,";\n            wR += ").concat(t.dilationHeight,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(r,";\n            wC+= ").concat(t.dilationWidth,") {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),yM=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.effectiveFilterDepth,r=t.effectiveFilterHeight,a=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n      const float avgMultiplier = float(").concat(1/(t.filterDepth*t.filterHeight*t.filterWidth),");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(n,";\n            wD += ").concat(t.dilationDepth,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t.strideDepth,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(r,";\n              wR += ").concat(t.dilationHeight,") {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(a,";\n                wC += ").concat(t.dilationWidth,") {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),_M={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=v.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),h=new yM(l);return n.runWebGLProgram(h,[a],i.dtype)}},bM={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qT([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=v.computePool2DInfo(o.shape,s,u,1,c),h=new gM(l);return n.runWebGLProgram(h,[a],o.dtype)}},xM={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return jA({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},wM=_createClass((function e(t,n,r,a,i,o){_classCallCheck(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],v.assertAndGetBroadcastShape(t,n),v.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(v.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(v.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),kM=_createClass((function e(t,n,r,a,i,o){_classCallCheck(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],v.assertAndGetBroadcastShape(t,n),v.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(v.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(v.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),CM={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.mean,s=t.variance,u=t.offset,c=t.scale;r.assert(o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),r.assert(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),r.assert(null==c||o.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=a.varianceEpsilon;null==l&&(l=.001);var h=[i,o,s],f=null;null!=u&&(f=u.shape,h.push(u));var d=null;null!=c&&(d=c.shape,h.push(c));var p=Be().getBool("WEBGL_PACK_NORMALIZATION")?new kM(i.shape,o.shape,s.shape,f,d,l):new wM(i.shape,o.shape,s.shape,f,d,l);return n.runWebGLProgram(p,h,h[0].dtype)}},SM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=yE(this.rank),a="uniform int start[".concat(this.rank,"];"),i=function(e){if(1===e)return"sourceLoc";if(e<=6)return TM.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(TM[t]," = start[").concat(t,"] + coords.").concat(TM[t],";")})).join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(i,"));\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),TM=["x","y","z","w","u","v"],EM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=yE(this.rank),r=$E("coords",this.rank),a=$E("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}();function AM(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.begin,s=a.size,u=_slicedToArray(h.parseSliceParams(i,o,s),2),c=u[0],l=u[1];if(h.assertParamsValid(i,c,l),0===r.sizeFromShape(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){var f=n.texData.get(i.dataId),d=HE(f.values,c,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,d)}var p=n.texData.get(i.dataId).isPacked,m=h.isSliceContinous(i.shape,c,l);if(p||!m){var v=Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EM(l):new SM(l),g=v.getCustomSetupFunc(c);return n.runWebGLProgram(v,[i],i.dtype,g)}return n.uploadToGPU(i.dataId),function(e,t,n,a){var i=a.texData.get(e.dataId),o=a.makeTensorInfo(n,e.dtype),s=a.texData.get(o.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=e.dtype;var u=h.computeFlatOffset(t,r.computeStrides(e.shape));i.slice&&(u+=i.slice.flatOffset),s.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||e.dataId};var c=a.dataRefCount.get(s.slice.origDataId)||1;return a.dataRefCount.set(s.slice.origDataId,c+1),o}(i,c,l,n)}var MM={kernelName:"Slice",backendName:"webgl",kernelFunc:AM},IM={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.blockShape,s=a.crops;r.assert(i.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var u=o.reduce((function(e,t){return e*t})),c=v.getReshaped(i.shape,o,u),l=v.getPermuted(c.length,o.length),h=v.getReshapedPermuted(i.shape,o,u),f=v.getSliceBeginCoords(s,o.length),d=v.getSliceSize(h,s,o.length),p=[],m=DA({inputs:{x:i},backend:n,attrs:{shape:c}}),g=GA({inputs:{x:m},backend:n,attrs:{perm:l}}),y=DA({inputs:{x:g},backend:n,attrs:{shape:h}}),_=AM({inputs:{x:y},backend:n,attrs:{begin:f,size:d}});return p.push(m),p.push(g),p.push(y),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},NM={kernelName:"Bincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=kE(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}},RM=TA({opSnippet:"return float(a != b);",dtype:"bool"}),DM={kernelName:"NotEqual",backendName:"webgl",kernelFunc:RM};function OM(e){var t=e.inputs,n=e.backend,r=t.input;return mA({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var LM={kernelName:"Real",backendName:"webgl",kernelFunc:OM},FM={kernelName:"Cast",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,a=t.backend,i=t.attrs,o=n.x,s=i.dtype;if("complex64"===s){if("complex64"===o.dtype)return mA({inputs:{x:o},backend:a});var u=vs(o.shape),c=e({inputs:{x:o},backend:a,attrs:{dtype:"float32"}}),l=gA({inputs:{real:c,imag:u},backend:a});return u.dispose(),a.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var h=OM({inputs:{input:o},backend:a}),f=e({inputs:{x:h},backend:a,attrs:{dtype:s}});return a.disposeIntermediateTensorInfo(h),f}if(!r.hasEncodingLoss(o.dtype,s)){var d=mA({inputs:{x:o},backend:a});return{dataId:d.dataId,shape:d.shape,dtype:s}}if("int32"===s)return function(e,t){var n=new iA(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,a);if("bool"===s){var p=a.makeTensorInfo([],"bool",r.getTypedArrayFromDType("bool",1)),m=RM({inputs:{a:o,b:p},backend:a});return a.disposeIntermediateTensorInfo(p),m}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(s))}},PM="return ceil(x);",zM={kernelName:"Ceil",backendName:"webgl",kernelFunc:SA({opSnippet:PM,packedOpSnippet:PM,cpuKernelImpl:SE})},BM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),UM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),VM={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax,u=(t=Be().getBool("WEBGL_PACK_CLIP")?new UM(i.shape):new BM(i.shape)).getCustomSetupFunc(o,s);return r.runWebGLProgram(t,[i],i.dtype,u)}},WM=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function GM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var HM={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new WM(r.shape),o=[GM(r,a.complexTensorInfos.real),GM(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},jM=_createClass((function e(t){_classCallCheck(this,e),this.outputShape=[],this.outputShape=v.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++)a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(n[i-1],"));"));a.push("else setOutput(getT".concat(n.length,"(yR, yC-").concat(n[n.length-1],"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),qM=_createClass((function e(t,n){_classCallCheck(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=v.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=yE(a),o=$E("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],h=s.slice(-2),f=s.join(),d="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(h.join(),"));\n        }"),p=1;p<u.length;p++){var m=u[p-1];d+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(KM(s,l,m),"),\n            vec2(").concat(KM(h,l,m),"));\n        }")}var g=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(u.length,"(").concat(KM(s,l,g),"),\n          vec2(").concat(KM(h,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function KM(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function XM(e){var t=e.inputs,n=e.backend,r=t.input;return mA({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var ZM={kernelName:"Imag",backendName:"webgl",kernelFunc:XM};function YM(e,t,n){var a=v.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return DA({inputs:{x:e},attrs:{shape:[-1,r.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:a}}function JM(e){var t=e.inputs,n=e.backend,a=e.attrs.axis,i=r.parseAxisParam(a,t[0].shape)[0],o=v.computeOutShape(t.map((function(e){return e.shape})),i);if(0===r.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var s=t.filter((function(e){return r.sizeFromShape(e.shape)>0}));if(1===s.length)return mA({inputs:{x:s[0]},backend:n});var u=s.map((function(e){return e.shape}));return v.assertParamsConsistent(u,i),function e(t,n,r){var a=t[0].dtype;if("complex64"===a){var i=t.map((function(e){return OM({inputs:{input:e},backend:r})})),o=t.map((function(e){return XM({inputs:{input:e},backend:r})})),s=e(i,n,r),u=e(o,n,r),c=gA({inputs:{real:s,imag:u},backend:r});return i.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}if("string"===a){var l=YM(t,n,r),h=l.tensors2D,f=l.outShape,d=h.map((function(e){return{vals:r.readSync(e.dataId),shape:e.shape}})),p=TE(d,f,a,1===h[0].shape[0]),m=v.computeOutShape(t.map((function(e){return e.shape})),n),g=r.makeTensorInfo(m,a,p);return h.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),g}if(t.length>Be().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var y=Math.floor(t.length/2),_=e(t.slice(0,y),n,r),b=e(t.slice(y),n,r),x=e([_,b],n,r);return r.disposeIntermediateTensorInfo(_),r.disposeIntermediateTensorInfo(b),x}if(Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){var w=new qM(t.map((function(e){return e.shape})),n);return r.runWebGLProgram(w,t,a)}var k=YM(t,n,r),C=k.tensors2D,S=k.outShape,T=new jM(C.map((function(e){return e.shape}))),E=r.runWebGLProgram(T,C,a);C.forEach((function(e){return r.disposeIntermediateTensorInfo(e)}));var A=DA({inputs:{x:E},attrs:{shape:S},backend:r});return r.disposeIntermediateTensorInfo(E),A}(s,i,n)}var $M={kernelName:"Concat",backendName:"webgl",kernelFunc:JM},QM=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,_=v?3:1,b="",x="";r&&(b=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(_,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")})),eI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,h=t.filterDepth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(h,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),tI=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,i=r.inChannels,o=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,l=r.dilationWidth,h=r.dilationHeight,f=r.dataFormat,d=u.left,p=u.top,m=i*a,v=XT(),g="channelsLast"===f,y=g?0:1,_=g?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(x,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(p,";\n            d0 = offsetY + ").concat(h," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(o,". - ").concat(d,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(m,".) / ").concat(i,".));\n\n              if(d1 < ").concat(n[_]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(i,".));\n\n                if (").concat(g,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*x+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*x+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(b,"\n\n        ").concat(v.output," = result;\n      }\n    ")}));function nI(e){var t,n=e.x,a=e.filter,i=e.convInfo,o=e.backend,s=e.bias,u=void 0===s?null:s,c=e.preluActivationWeights,l=void 0===c?null:c,h=e.leakyreluAlpha,f=void 0===h?0:h,d=e.activation,p=void 0===d?null:d,m=n.shape,v=o.texData.get(n.dataId),g="channelsLast"===i.dataFormat,y=[],_=m[2]%2!=0&&!!v.isPacked;if((1!=m[0]*m[1]*m[2]&&1!==i.outChannels||!(i.inChannels>1e3))&&Be().getBool("WEBGL_LAZILY_UNPACK")&&Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&_){var b={dataId:n.dataId,shape:[1,g?m[0]*m[1]*(m[2]+1):m[0]*m[2]*(m[3]+1),i.inChannels],dtype:n.dtype},x=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,r.assert(WT(v.shape,b.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(b.shape," isn't free")}));var w=DA({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});y.push(w);var k=jA({a:b,b:w,backend:o,transposeA:!1,transposeB:!1,bias:u,activation:p,preluActivationWeights:l,leakyreluAlpha:f}),C=o.texData.get(k.dataId);r.assert(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=x,C.shape=i.outShape,(t=mA({inputs:{x:k},backend:o})).shape=i.outShape,y.push(k)}else{var S=DA({inputs:{x:n},backend:o,attrs:{shape:[1,g?m[0]*m[1]*m[2]:m[0]*m[2]*m[3],i.inChannels]}}),T=DA({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}}),E=jA({a:S,b:T,transposeA:!1,transposeB:!1,backend:o,bias:u,activation:p,preluActivationWeights:l,leakyreluAlpha:f});t=DA({inputs:{x:E},backend:o,attrs:{shape:i.outShape}}),y.push(S),y.push(T),y.push(E)}for(var A=0,M=y;A<M.length;A++){var I=M[A];o.disposeIntermediateTensorInfo(I)}return t}function rI(e){var t=e.x,n=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,p=a.filterWidth,m=a.filterHeight,v=a.inChannels,g=a.outWidth,y=a.outHeight,_="channelsLast"===a.dataFormat,b=p*m*v,x=y*g,w=[b,x],k=[],C=DA({inputs:{x:t},backend:i,attrs:{shape:t.shape.slice(1)}}),S=DA({inputs:{x:n},backend:i,attrs:{shape:[1,b,r.sizeFromShape(n.shape)/b]}});k.push(C),k.push(S);var T=new tI(w,C.shape,a),E=i.runWebGLProgram(T,[C],"float32"),A=DA({inputs:{x:E},backend:i,attrs:{shape:[1,w[0],w[1]]}});k.push(E),k.push(A);var M=null!=s,I=null!=c,N="leakyrelu"===d,R=d?EA(d,!0):null,D=new AA(A.shape,S.shape,[1,x,a.outChannels],!0,!1,M,R,I,N),O=[A,S];if(s&&O.push(s),I&&O.push(c),N){var L=i.makeTensorInfo([],"float32",r.createScalarValue(h,"float32"));O.push(L),k.push(L)}var F=i.runWebGLProgram(D,O,"float32"),P=DA({inputs:{x:F},backend:i,attrs:{shape:_?[1,y,g,a.outChannels]:[1,a.outChannels,y,g]}});k.push(F);for(var z=0,B=k;z<B.length;z++){var U=B[z];i.disposeIntermediateTensorInfo(U)}return P}var aI={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,h=a.dimRoundingMode,f=v.convertConv2DDataFormat(c),d=v.computeConv2DInfo(i.shape,o.shape,s,l,u,h,!1,f);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(Be().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=rI({x:i,filter:o,convInfo:d,backend:r});else{var p=new QM(d);t=r.runWebGLProgram(p,[i,o],"float32")}else t=nI({x:i,filter:o,convInfo:d,backend:r});var m=DA({inputs:{x:t},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),m}},iI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat("channelsLast"===t.dataFormat,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),oI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(a?3:1,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(a?1:2,"], coords[").concat(a?2:3,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(a,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),sI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t.strideDepth," - ").concat(t.padInfo.front,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),uI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(t.strideDepth,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),cI={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,h=v.convertConv2DDataFormat(u),f=v.computeConv2DInfo(a.shape,l,o,1,s,c,!1,h),d=new iI(f);return n.runWebGLProgram(d,[a,i],"float32")}},lI={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,h=v.convertConv2DDataFormat(c),f=v.computeConv2DInfo(o,i.shape,s,1,u,l,!1,h),d=new oI(f);return n.runWebGLProgram(d,[a,i],"float32")}},hI={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=v.computeConv3DInfo(a.shape,i.shape,o,u,s),l=new eI(c);return n.runWebGLProgram(l,[a,i],"float32")}},fI={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=v.computeConv3DInfo(a.shape,u,o,1,s),l=new sI(c);return n.runWebGLProgram(l,[a,i],"float32")}},dI={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,c=v.computeConv3DInfo(u,i.shape,s,1,o),l=new uI(c);return n.runWebGLProgram(l,[a,i],"float32")}},pI=SA({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),mI={kernelName:He,backendName:"webgl",kernelFunc:pI},vI={kernelName:"Cosh",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})},gI=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=_slicedToArray(t,4),s=o[0],u=o[1],c=o[2],l=o[3],h=_slicedToArray(n,1)[0],f=_slicedToArray(r,2),d=f[0],p=f[1];this.outputShape=[h,d,p,l];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),g="".concat(c-1,".0"),y=_slicedToArray(d>1?["".concat((u-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],3),_=y[0],b=y[1],x=y[2],w=_slicedToArray(p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],3),k=w[0],C=w[1],S=w[2];this.userCode="\n      const float height_ratio = float(".concat(_,");\n      const float width_ratio = float(").concat(k,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(b,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(S,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),yI={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new gI(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},_I=function(){function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(bI(a,"coords"),")"),o=t[t.length-1],s="",u="";n?(s=r?"end != ".concat(o-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(yE(a)," coords = getOutputCoords();\n        int end = ").concat(xI(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(xI(a,"coords")," = idx;\n          val += getX(").concat(bI(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}}}]),e}();function bI(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function xI(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var wI={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length,c=v.getAxesPermutation([i],u),l=a;null!=c&&(l=GA({inputs:{x:a},backend:n,attrs:{perm:c}}));var h=v.getInnerMostAxes(1,u)[0];if(h!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var f=l.shape[h],d=mA({inputs:{x:l},backend:n}),p=0;p<=Math.ceil(Math.log2(f))-1;p++){var m=new _I(l.shape,!1,s),g=m.getCustomSetupFunc(p),y=d;d=n.runWebGLProgram(m,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(o){var _=new _I(l.shape,o,s),b=d;d=n.runWebGLProgram(_,[d],d.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=GA({inputs:{x:d},backend:n,attrs:{perm:v.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),x}return d}},kI={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=kE(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var h=n.bufferSync(a),f=n.bufferSync(i),d=CE(h,f,o,s);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},CI=function(){function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return _createClass(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),SI={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.blockSize,s=a.dataFormat;r.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var u=i.shape[0],c=("NHWC"===s?i.shape[1]:i.shape[2])*o,l=("NHWC"===s?i.shape[2]:i.shape[3])*o,h=("NHWC"===s?i.shape[3]:i.shape[1])/(o*o),f=new CI("NHWC"===s?[u,c,l,h]:[u,h,c,l],o,s);return n.runWebGLProgram(f,[i],i.dtype)}},TI=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,h=t.strideWidth,f=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,v=t.outChannels/t.inChannels,g="",y="";r&&(g=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(g,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(h,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(v,";\n        int q = d2 - d1 * ").concat(v,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(f,";\n\n          if (xR < 0 || xR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(m,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(_,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")})),EI=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var s=t.inHeight,u=t.inWidth,c=t.padInfo.top,l=t.padInfo.left,h=t.strideHeight,f=t.strideWidth,d=t.dilationHeight,p=t.dilationWidth,m=t.filterHeight,v=t.filterWidth,g=v,y="int xR; int xC; int xCOffset;",_=0;_<m;_++)for(var b=0;b<v;b++)y+="\n          vec4 xTexelR".concat(_,"C").concat(2*b," = vec4(0.);\n          vec4 wR").concat(_,"C").concat(b," = vec4(0.);\n          vec4 xR").concat(_,"C").concat(b," = vec4(0.);");for(var x=0;x<m;x++)for(var w=0;w<g;w++){var k=2*w;if(y+="\n          xR = xRCorner + ".concat(x*d,";\n          xC = xCCorner + ").concat(k*p,";\n        "),1===f){if(k<v&&(y+=l%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(s," && xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(x,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(u,") {\n                    xTexelR").concat(x,"C").concat(k,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(x,"C").concat(k," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(s," && xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(u,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(x,"C").concat(k," = vec4(previous.zw, xTexelR").concat(x,"C").concat(k,".xy);\n                } else {\n                  xR").concat(x,"C").concat(k," = vec4(0, 0, xTexelR").concat(x,"C").concat(k,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(s," && xC >= 0 && xC < ").concat(u,") {\n                  xTexelR").concat(x,"C").concat(k," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(k," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(k," = xTexelR").concat(x,"C").concat(k,";\n              "),k+1<v)){var C=l%2==0?r.nearestLargerEven(p):p;p%2==0&&l%2==1||p%2!=0&&l%2!=1?(y+="\n                  xCOffset = xC + ".concat(l%2," + ").concat(C,";\n\n                  if(xR >= 0 && xR < ").concat(s," &&\n                    xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    xTexelR").concat(x,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),p>1&&(y+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(s," &&\n                      xCOffset >= 0 && xCOffset < ").concat(u,") {\n                      xTexelR").concat(x,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(x,"C").concat(k," = vec4(0.);\n                    }\n                  ")),y+="\n                  xR".concat(x,"C").concat(k+1," = vec4(\n                    xTexelR").concat(x,"C").concat(k,".zw, xTexelR").concat(x,"C").concat(k+2,".xy);\n                ")):y+="\n                  xCOffset = xC + ".concat(C,";\n\n                  if(xR >= 0 && xR < ").concat(s," &&\n                    xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    xTexelR").concat(x,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(x,"C").concat(k+1," = xTexelR").concat(x,"C").concat(k+2,";\n                ")}}else k<v&&(y+="\n              if(xR >= 0 && xR < ".concat(s,") {\n            "),l%2==1?(y+="\n                xCOffset = xC + 1 - ".concat(f,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(x,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(k," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(u,") {\n                  xTexelR").concat(x,"C").concat(k+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(k+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(k," = vec4(\n                  xTexelR").concat(x,"C").concat(k,".zw, xTexelR").concat(x,"C").concat(k+2,".zw);\n              "),k+1<v&&(y+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(f,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(x,"C").concat(k+1," = vec4(xTexelR").concat(x,"C").concat(k+2,".xy, final.xy);\n                "))):(y+="\n                if(xC >= 0 && xC < ".concat(u,") {\n                  xTexelR").concat(x,"C").concat(k," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(k," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(f,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(x,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(k+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(k," = vec4(\n                  xTexelR").concat(x,"C").concat(k,".xy, xTexelR").concat(x,"C").concat(k+2,".xy);\n              "),k+1<v&&(y+="\n                  xR".concat(x,"C").concat(k+1," = vec4(\n                    xTexelR").concat(x,"C").concat(k,".zw, xTexelR").concat(x,"C").concat(k+2,".zw);\n                "))),y+="}");k<v&&(y+="\n            vec4 wTexelR".concat(x,"C").concat(k," = getW(").concat(x,", ").concat(k,", d1, q);\n            wR").concat(x,"C").concat(k," = vec4(wTexelR").concat(x,"C").concat(k,".xz, wTexelR").concat(x,"C").concat(k,".xz);\n          "),k+1<v&&(y+="\n              vec4 wTexelR".concat(x,"C").concat(k+1," = getW(").concat(x,", ").concat(k+1,", d1, q);\n              wR").concat(x,"C").concat(k+1," =\n                vec4(wTexelR").concat(x,"C").concat(k+1,".xz, wTexelR").concat(x,"C").concat(k+1,".xz);")))}for(var S=0;S<m;S++)for(var T=0;T<v;T++)y+="dotProd += xR".concat(S,"C").concat(T," * wR").concat(S,"C").concat(T,";");var E="",A="";a&&(E=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),A="result = activation(result);");var M=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(E,"\n\n      const ivec2 strides = ivec2(").concat(h,", ").concat(f,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(l,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(y,"\n\n        vec4 result = dotProd;\n        ").concat(M,"\n        ").concat(A,"\n        setOutput(result);\n      }\n    ")})),AI={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=a.strides,u=a.pad,c=a.dilations,l=a.dimRoundingMode,h=c;null==h&&(h=[1,1]),r.assert(v.eitherStridesOrDilationsAreOne(s,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(h,"'")}));var f,d=v.computeConv2DInfo(i.shape,o.shape,s,h,u,l,!0);return f=Be().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new EI(d):new TI(d),n.runWebGLProgram(f,[i,o],"float32")}},MI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(t.outChannels/t.inChannels," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),II=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(a,"; dm++) {\n              int d2 = d1 * ").concat(a," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),NI={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,h=v.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=new MI(h);return n.runWebGLProgram(f,[a,i],"float32")}},RI={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,h=v.computeConv2DInfo(l,i.shape,o,s,u,c,!0),f=new II(h);return n.runWebGLProgram(f,[a,i],"float32")}},DI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "})),OI={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,i=[].concat(_toConsumableArray(a.shape),_toConsumableArray(a.shape)),o=r.sizeFromShape(a.shape),s=DA({inputs:{x:a},backend:n,attrs:{shape:[o]}}),u=new DI(o),c=n.runWebGLProgram(u,[s],s.dtype),l=DA({inputs:{x:c},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}},LI=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,h=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")})),FI={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=v.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),h=new LI(l),f=DA({inputs:{x:t=r.runWebGLProgram(h,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}},PI={kernelName:"Elu",backendName:"webgl",kernelFunc:SA({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},zI={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Be().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pA("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new dA("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},BI={kernelName:"Equal",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"})},UI=SA({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(v.ERF_P,";\n  float a1 = ").concat(v.ERF_A1,";\n  float a2 = ").concat(v.ERF_A2,";\n  float a3 = ").concat(v.ERF_A3,";\n  float a4 = ").concat(v.ERF_A4,";\n  float a5 = ").concat(v.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),VI={kernelName:je,backendName:"webgl",kernelFunc:UI},WI="return exp(x);",GI=SA({opSnippet:WI,packedOpSnippet:WI,cpuKernelImpl:EE}),HI={kernelName:qe,backendName:"webgl",kernelFunc:GI};function jI(e){var t=e.inputs,n=e.attrs,a=e.backend,i=n.dim,o=t.input,s=o.shape.length,u=o.shape.slice(),c=i;return i<0&&(r.assert(-(s+1)<=i,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+i+1),u.splice(c,0,1),DA({inputs:{x:o},backend:a,attrs:{shape:u}})}var qI={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:jI},KI="return exp(x) - 1.0;",XI={kernelName:"Expm1",backendName:"webgl",kernelFunc:SA({opSnippet:KI,packedOpSnippet:KI,cpuKernelImpl:AE})},ZI=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function YI(e,t,n){var a=n.texData.get(e.dataId),i=r.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],s=DA({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),u=s.shape,c=new ZI("real",u,t),l=new ZI("imag",u,t),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:u},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:u}],f=n.runWebGLProgram(c,h,"float32"),d=n.runWebGLProgram(l,h,"float32"),p=gA({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);var m=DA({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),m}var JI={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return YI(t.input,!1,n)}},$I=function(){function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}();function QI(e){var t=e.backend,n=e.attrs,a=n.shape,i=n.value,o=n.dtype;if("string"===(o=o||r.inferDtype(i))){var s=r.getArrayFromDType(o,r.sizeFromShape(a));return s.fill(i),t.makeTensorInfo(a,o,s)}var u=new $I(a,i),c=u.getCustomSetupFunc(i);return t.runWebGLProgram(u,[],o,c)}var eN,tN={kernelName:"Fill",backendName:"webgl",kernelFunc:QI},nN=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),rN={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new nN(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},aN="return floor(x);",iN={kernelName:"Floor",backendName:"webgl",kernelFunc:SA({opSnippet:aN,packedOpSnippet:aN,cpuKernelImpl:ME})},oN={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:TA({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})},sN=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"];var n=XT(),r=_slicedToArray(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),uN=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=XT(),r=_slicedToArray(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),cN={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u="undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap,c=_slicedToArray(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=c[0],h=c[1],f=[h,l],d=[h,l,i];(s||o||u)&&(null==eN&&(eN=document.createElement("canvas").getContext("2d")),eN.canvas.width=l,eN.canvas.height=h,eN.drawImage(a,0,0,l,h),a=eN.canvas);var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=gT.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var m=Be().getBool("WEBGL_PACK")?new uN(d):new sN(d),v=n.runWebGLProgram(m,[p],"int32");return n.disposeData(p.dataId),v}},lN={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,i=e.attrs,o=n.x,s=n.filter,u=n.bias,c=n.preluActivationWeights,l=i.strides,h=i.pad,f=i.dataFormat,d=i.dilations,p=i.dimRoundingMode,m=i.activation,g=i.leakyreluAlpha,y=v.convertConv2DDataFormat(f),_=v.computeConv2DInfo(o.shape,s.shape,l,d,h,p,!1,y),b=[];if(1!==_.filterHeight||1!==_.filterWidth||1!==_.dilationHeight||1!==_.dilationWidth||1!==_.strideHeight||1!==_.strideWidth||"SAME"!==_.padInfo.type&&"VALID"!==_.padInfo.type)if(Be().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=rI({x:o,filter:s,convInfo:_,backend:a,bias:u,activation:m,preluActivationWeights:c,leakyreluAlpha:g});else{var x=null!=u,w=null!=c,k="leakyrelu"===m,C=m?EA(m,!1):null,S=new QM(_,x,C,w,k),T=[o,s];if(u&&T.push(u),c&&T.push(c),k){var E=a.makeTensorInfo([],"float32",r.createScalarValue(g,"float32"));T.push(E),b.push(E)}t=a.runWebGLProgram(S,T,"float32")}else t=nI({x:o,filter:s,convInfo:_,backend:a,bias:u,activation:m,preluActivationWeights:c,leakyreluAlpha:g});var A=DA({inputs:{x:t},backend:a,attrs:{shape:_.outShape}});return b.push(t),b.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),A}},hN={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.filter,s=t.bias,u=t.preluActivationWeights,c=a.strides,l=a.pad,h=a.dilations,f=a.dimRoundingMode,d=a.activation,p=a.leakyreluAlpha,m=[],g=h;null==g&&(g=[1,1]),r.assert(v.eitherStridesOrDilationsAreOne(c,g),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(g,"'")}));var y,_=v.computeConv2DInfo(i.shape,o.shape,c,g,l,f,!0),b=Be().getBool("WEBGL_PACK_DEPTHWISECONV")&&_.strideWidth<=2&&_.outChannels/_.inChannels==1,x=d?EA(d,b):null,w=[i,o],k=null!=s,C=null!=u,S="leakyrelu"===d;if(k&&w.push(s),C&&w.push(u),S){var T=n.makeTensorInfo([],"float32",r.createScalarValue(p,"float32"));w.push(T),m.push(T)}y=b?new EI(_,k,x,C,S):new TI(_,k,x,C,S);var E=n.runWebGLProgram(y,w,"float32");return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},fN=_createClass((function e(t,n,r){_classCallCheck(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=yE(n.length),i=yE(r.length);this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(this.sliceDim>1?"strides[j]":"strides",";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")})),dN={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,i=t.indices,o=i.shape,s=o[o.length-1],u=_slicedToArray(v.prepareAndValidate(a,i),4),c=u[0],l=u[1],h=u[2],f=u[3],d=DA({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),p=DA({inputs:{x:a},backend:n,attrs:{shape:[r.sizeFromShape(a.shape)/h,h]}}),m=new fN(s,f,[l,h]),g=n.runWebGLProgram(m,[p,d],p.dtype),y=DA({inputs:{x:g},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}},pN=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=yE(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)r.push(2===a?"int(getIndices(resRC.x, resRC.z))":"".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")})),mN={kernelName:"GatherV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.indices,s=a.axis,u=a.batchDims,c=r.parseAxisParam(s,i.shape)[0],l=v.segment_util.collectGatherOpShapeInfo(i,o,c,u),h=r.sizeFromShape(o.shape),f=[],d=DA({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=DA({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,h/l.batchSize]}});f.push(d),f.push(p);var m=[l.batchSize,l.outerSize,h/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){var g=n.bufferSync(p),y=n.bufferSync(d),_=IE(y,g,m);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,_.dtype,_.values)}var b=new pN(d.shape,m),x=n.runWebGLProgram(b,[d,p],d.dtype);f.push(x);var w=DA({inputs:{x:x},backend:n,attrs:{shape:l.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),w}},vN={kernelName:"Greater",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:NE,dtype:"bool"})},gN={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"})},yN={kernelName:"IFFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return YI(t.input,!0,n)}},_N={kernelName:"IsFinite",backendName:"webgl",kernelFunc:SA({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},bN={kernelName:"IsInf",backendName:"webgl",kernelFunc:SA({opSnippet:"return float(isinf(x));",dtype:"bool"})},xN={kernelName:"IsNan",backendName:"webgl",kernelFunc:SA({opSnippet:"return float(isnan(x));",dtype:"bool"})},wN={kernelName:"Less",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:RE,dtype:"bool"})},kN={kernelName:"LessEqual",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"})},CN={kernelName:"LinSpace",backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=DE(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},SN=SA({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:OE}),TN={kernelName:Ke,backendName:"webgl",kernelFunc:SN},EN={kernelName:"Log1p",backendName:"webgl",kernelFunc:SA({opSnippet:"return log(1.0 + x);"})},AN={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},MN={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:SA({opSnippet:"return float(!(x >= 1.0));"})},IN={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:TA({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})},NN=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),RN=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),DN={kernelName:"LRN",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=Be().getBool("WEBGL_PACK_NORMALIZATION")?new RN(a.shape,i,o,s,u):new NN(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},ON=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),LN={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,h=new ON(a.shape,s,u,c,l);return n.runWebGLProgram(h,[a,i,o],a.dtype)}};function FN(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.reductionIndices,s=a.keepDims,u=i.shape.length,c=r.parseAxisParam(o,i.shape),l=c,h=v.getAxesPermutation(l,u),f=null!=h,d=n.shouldExecuteOnCPU([i]),p=i;if(f){if(d){for(var m=n.texData.get(p.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=i.shape[h[y]];var _=ZE(m,i.shape,i.dtype,h,g);p=n.makeTensorInfo(g,i.dtype),n.texData.get(p.dataId).values=_}else p=UA(i,h,n);l=v.getInnerMostAxes(l.length,u)}v.assertAxesAreInnerMostDims("max",l,u);var b,x=_slicedToArray(v.computeOutAndReduceShapes(p.shape,l),2),w=x[0],k=x[1],C=w;if(s&&(C=v.expandShapeToKeepDim(w,c)),d){var S=n.texData.get(p.dataId),T=LE(S.values,r.sizeFromShape(k),C,i.dtype);b=n.makeTensorInfo(C,i.dtype),n.texData.get(b.dataId).values=T}else b=function(e,t,n,a){var i=r.sizeFromShape(t),o=DA({inputs:{x:e},attrs:{shape:[r.sizeFromShape(e.shape)/i,i]},backend:a}),s=PA(o,e.dtype,"max",a),u=DA({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),u}(p,k,C,n);return f&&n.disposeIntermediateTensorInfo(p),b}var PN={kernelName:"Max",backendName:"webgl",kernelFunc:FN},zN={kernelName:"Maximum",backendName:"webgl",kernelFunc:TA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:FE})},BN={kernelName:"MaxPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x;qT(i,"maxPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.assert(v.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '1'")}));var l=v.computePool2DInfo(i.shape,o,s,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&r.arraysEqual(l.inShape,l.outShape))return mA({inputs:{x:i},backend:n});var h=new dM(l,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}},UN={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=v.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,u),h=new pM(l,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},VN=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,";\n          wR += ").concat(t.dilationHeight,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(n*r-1," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(r," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),WN=_createClass((function e(t){_classCallCheck(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.effectiveFilterDepth,r=t.effectiveFilterHeight,a=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(n,";\n           wD += ").concat(t.dilationDepth,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t.strideDepth,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(r,";\n              wR += ").concat(t.dilationHeight,") {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(a,";\n                wC += ").concat(t.dilationWidth,") {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(n*r*a-1," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(r," * ").concat(a," +\n                  wR * ").concat(a," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),GN={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=v.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),h=new pM(l,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),d=new WN(l),p=n.runWebGLProgram(d,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),p}},HN={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qT([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=v.computePool2DInfo(o.shape,s,u,1,c,l),f=new dM(h,"max",!0),d=n.runWebGLProgram(f,[o],o.dtype),p=new VN(h),m=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),m}},jN={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=a;r.assert(4===i.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.shape.length,".")}));var h=[1,1];r.assert(v.eitherStridesOrDilationsAreOne(s,h),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(h,"'")}));var f=v.computePool2DInfo(i.shape,o,s,h,u),d=_slicedToArray(function(e,t,n,r){var a=new dM(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new dM(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(i,c,f,l),2);return[d[0],d[1]]}},qN={kernelName:"Mean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.keepDims,s=n.axis,u=a,c=i.shape.length,l=r.parseAxisParam(s,i.shape),h=l,f=v.getAxesPermutation(h,c),d=null!=f,p=u.shouldExecuteOnCPU([i]),m=[],g=i;if(d){if(p){for(var y=u.texData.get(g.dataId).values,_=new Array(c),b=0;b<_.length;b++)_[b]=i.shape[f[b]];var x=ZE(y,i.shape,i.dtype,f,_);g=u.makeTensorInfo(_,i.dtype),u.texData.get(g.dataId).values=x}else g=UA(i,f,u);m.push(g),h=v.getInnerMostAxes(h.length,c)}v.assertAxesAreInnerMostDims("sum",h,c);var w=_slicedToArray(v.computeOutAndReduceShapes(g.shape,h),2),k=w[0],C=w[1],S=k;o&&(S=v.expandShapeToKeepDim(k,l));for(var T=function(e,t,n,a){var i=r.sizeFromShape(t),o=DA({inputs:{x:e},attrs:{shape:[r.sizeFromShape(e.shape)/i,i]},backend:a}),s=PA(o,"float32","mean",a),u=DA({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),u}(g,C,S,u),E=0,A=m;E<A.length;E++){b=A[E];u.disposeIntermediateTensorInfo(b)}return T}},KN={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=r.parseAxisParam(o,i.shape),l=c,h=v.getAxesPermutation(l,u),f=i;null!=h&&(f=GA({inputs:{x:i},backend:n,attrs:{perm:h}}),l=v.getInnerMostAxes(l.length,i.shape.length)),v.assertAxesAreInnerMostDims("min",l,u);var d,p=_slicedToArray(v.computeOutAndReduceShapes(f.shape,l),2),m=p[0],g=p[1],y=DA({inputs:{x:f},backend:n,attrs:{shape:[-1,r.sizeFromShape(g)]}}),_=PA(y,y.dtype,"min",n);return d=DA(s?{inputs:{x:_},backend:n,attrs:{shape:v.expandShapeToKeepDim(m,c)}}:{inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(_),null!=h&&n.disposeIntermediateTensorInfo(f),d}},XN={kernelName:"Minimum",backendName:"webgl",kernelFunc:TA({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:PE})},ZN=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=yE(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),YN=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=yE(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$E("rc",a),c=$E("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,d="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),JN={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YN(a.shape,i,o):new ZN(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},$N=TA({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),QN={kernelName:Xe,backendName:"webgl",kernelFunc:$N},eR=function(){function e(t,n,r){_classCallCheck(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),tR=TA({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),nR={kernelName:"RealDiv",backendName:"webgl",kernelFunc:tR},rR="return a - b;",aR=TA({opSnippet:rR,packedOpSnippet:rR,supportsComplex:!0,cpuKernelImpl:qE}),iR={kernelName:Je,backendName:"webgl",kernelFunc:aR};function oR(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.logits,o=a.dim,s=r.parseAxisParam([o],i.shape),u=FN({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),c=v.expandShapeToKeepDim(u.shape,s),l=DA({inputs:{x:u},backend:n,attrs:{shape:c}}),h=aR({inputs:{a:i,b:l},backend:n}),f=GI({inputs:{x:h},backend:n}),d=VA({inputs:{x:f},backend:n,attrs:{axis:s,keepDims:!1}}),p=DA({inputs:{x:d},backend:n,attrs:{shape:c}}),m=tR({inputs:{a:f,b:p},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}var sR={kernelName:"Softmax",backendName:"webgl",kernelFunc:oR},uR={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:oR({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=new eR(u.shape[0],u.shape[1],i),l=c.getCustomSetupFunc(o),h=n.runWebGLProgram(c,[u],"int32",l);return s||n.disposeIntermediateTensorInfo(u),h}},cR="return -x;",lR={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=_slicedToArray(BE(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=Be().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new uA(a.shape,cR):new iA(a.shape,cR),r.runWebGLProgram(t,[a],a.dtype)}},hR=g.nonMaxSuppressionV3Impl,fR={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){v.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=hR(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},dR=g.nonMaxSuppressionV4Impl,pR={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){v.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=dR(l,h,o,s,u,c),d=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},mR=g.nonMaxSuppressionV5Impl,vR={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){v.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=mR(l,h,o,s,u,c),d=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},gR=_createClass((function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),yR={kernelName:"OneHot",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.indices,o=a.depth,s=a.onValue,u=a.offValue,c=r.sizeFromShape(i.shape),l=new gR(c,o,s,u),h=DA({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(l,[h],i.dtype);n.disposeIntermediateTensorInfo(h);var d=DA({inputs:{x:f},backend:n,attrs:{shape:[].concat(_toConsumableArray(i.shape),[o])}});return n.disposeIntermediateTensorInfo(f),d}};function _R(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=OM({inputs:{input:r},backend:n}),i=_R({inputs:{x:a},backend:n}),o=XM({inputs:{input:r},backend:n}),s=_R({inputs:{x:o},backend:n}),u=gA({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return QI({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var bR={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:_R},xR={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=OM({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=XM({inputs:{input:a},backend:r}),u=_R({inputs:{x:s},backend:r}),c=gA({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return QI({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},wR={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.axis;if(1===t.length)return jI({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){r.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),r.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=JM({inputs:t.map((function(e){var t=jI({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t})),backend:n,attrs:{axis:a}});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},kR=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=yE(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(").concat(r,"));\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(").concat(r,"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),CR=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=yE(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$E("rc",a),c=$E("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",m=0,v=1===a?2:4;m<v;m++)p+="\n        ".concat(f[m],"\n        if (").concat(d,") {\n          result[").concat(m,"] = float(").concat(r,");\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),SR=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue,s=Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CR(a.shape,i,o):new kR(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)},TR={kernelName:"PadV2",backendName:"webgl",kernelFunc:SR},ER=TA({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),AR={kernelName:Ze,backendName:"webgl",kernelFunc:ER},MR={kernelName:"Prod",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,i=e.attrs,o=n.x,s=i.axis,u=i.keepDims,c=o.shape.length,l=[],h=r.parseAxisParam(s,o.shape),f=h,d=v.getAxesPermutation(f,c),p=o;if(null!=d&&(p=GA({inputs:{x:o},backend:a,attrs:{perm:d}}),f=v.getInnerMostAxes(f.length,c),l.push(p)),v.assertAxesAreInnerMostDims("prod",f,c),a.shouldExecuteOnCPU([p])){var m=a.texData.get(p.dataId).values,g=UE(p.shape,p.dtype,m,f),y=g.outVals,_=g.outShape,b=g.outDtype;t=a.makeTensorInfo(_,b,y)}else{var x=_slicedToArray(v.computeOutAndReduceShapes(p.shape,f),2),w=x[0],k=x[1],C=r.sizeFromShape(k),S=DA({inputs:{x:p},backend:a,attrs:{shape:[-1,C]}}),T=PA(S,Ot(o.dtype),"prod",a);t=DA({inputs:{x:T},backend:a,attrs:{shape:w}}),l.push(S),l.push(T)}if(u){l.push(t);var E=v.expandShapeToKeepDim(t.shape,h);t=DA({inputs:{x:t},backend:a,attrs:{shape:E}})}return l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),t}},IR=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=VE(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},NR={kernelName:"Range",backendName:"webgl",kernelFunc:IR},RR={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:SA({opSnippet:"return 1.0 / x;"})},DR={kernelName:"Relu",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},OR={kernelName:"Relu6",backendName:"webgl",kernelFunc:SA({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},LR=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=[];var o=_slicedToArray(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),FR=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=_slicedToArray(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],",\n          ").concat(f[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")})),PR={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=_slicedToArray(r.size,2),u=s[0],c=s[1],l=Be().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FR(a.shape,u,c,i,o):new LR(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],"float32")}},zR=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=_slicedToArray(n,3),i=a[1],o=a[2],s=_slicedToArray(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],h=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/h[0],d=l[1]/h[1],p=1/f,m=1/d,v=2*Math.ceil(p)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")})),BR={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new zR(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},UR=_createClass((function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=[];var o=_slicedToArray(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(a?"0.5":"0.0",")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),VR={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=_slicedToArray(r.size,2),u=s[0],c=s[1],l=new UR(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],a.dtype)}},WR=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=_slicedToArray(n,3),i=a[1],o=a[2],s=_slicedToArray(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],h=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/h[0],d=l[1]/h[1],p=1/f,m=1/d,v=2*Math.ceil(p)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(h[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(h[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")})),GR={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new WR(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},HR=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=yE(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),jR=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=$E("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=yE(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")})),qR={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.dims,s=i.shape.length,u=r.parseAxisParam(o,i.shape);if(0===s)return mA({inputs:{x:i},backend:n});var c=Be().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jR(i.shape,u):new HR(i.shape,u);return n.runWebGLProgram(c,[i],i.dtype)}},KR=_createClass((function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["Image"],this.outputShape=[];var i=t[1],o=t[2],s=Math.sin(n).toFixed(3),u=Math.cos(n).toFixed(3);this.outputShape=t;var c,l=_slicedToArray(v.getImageCenter(a,i,o),2),h=l[0],f=l[1],d=h.toFixed(3),p=f.toFixed(3);c="number"==typeof r?"float outputValue = ".concat(r.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(r.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ".concat(d,") * ").concat(u," - (float(y) - ").concat(p,") * ").concat(s,";\n          float coordYFloat = (float(x) - ").concat(d,") * ").concat(s," + (float(y) - ").concat(p,") * ").concat(u,";\n          int coordX = int(round(coordXFloat + ").concat(d,"));\n          int coordY = int(round(coordYFloat + ").concat(p,"));\n          ").concat(c,"\n          if(coordX >= 0 && coordX < ").concat(o," && coordY >= 0 && coordY < ").concat(i,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),XR={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new KR(a.shape,i,o,s);return u.runWebGLProgram(c,[a],a.dtype)}},ZR={kernelName:"Round",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},YR={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:SA({opSnippet:"return inversesqrt(x);",cpuKernelImpl:WE})},JR=_createClass((function e(t,n,r,a,i,o){!(arguments.length>6&&void 0!==arguments[6])||arguments[6];_classCallCheck(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=yE(i.length),u=yE(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="";1===a?l="i":2===a&&(l="i, coords[1]"),this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(","getIndices(".concat(c,")"),");\n              flattenedIndex += index * ").concat(n>1?"strides[j]":"strides",";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ","getUpdates(".concat(l,")"),";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")})),$R={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=v.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,f=s.outputSize,d=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var p=DA({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=DA({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new JR(c,u,p.shape.length,m.shape.length,h,d),_=n.runWebGLProgram(y,[m,p,g],m.dtype),b=DA({inputs:{x:_},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(g),b}},QR=_createClass((function e(t,n,r){var a,i;if(_classCallCheck(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=yE(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")})),eD={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new QR(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Dt(a.dtype,i.dtype))}},tD={kernelName:"Selu",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(v.SELU_SCALEALPHA,";\n  float scale = ").concat(v.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")})},nD={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:SA({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},rD={kernelName:"Sign",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},aD=SA({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),iD={kernelName:Ye,backendName:"webgl",kernelFunc:aD},oD={kernelName:"Sinh",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},sD={kernelName:"Softplus",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},uD={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.blockShape,s=a.paddings;r.assert(i.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var u=o.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,_toConsumableArray(s));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var h=[],f=SR({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),d=v.getReshaped(f.shape,o,u,!1),p=v.getPermuted(d.length,o.length,!1),m=v.getReshapedPermuted(f.shape,o,u,!1),g=DA({inputs:{x:f},backend:n,attrs:{shape:d}}),y=GA({inputs:{x:g},backend:n,attrs:{perm:p}}),_=DA({inputs:{x:y},backend:n,attrs:{shape:m}});return h.push(f),h.push(g),h.push(y),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},cD={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=v.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,h=u.strides,f=u.outputSize,d=new JR(l,c,a.shape.length,i.shape.length,h,[f,1],!1),p=n.runWebGLProgram(d,[i,a,o],i.dtype),m=DA({inputs:{x:p},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),m}},lD={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.numOrSizeSplits,s=a.axis,u=r.parseAxisParam(s,i.shape)[0],c=v.prepareSplitSize(i,o,u),l=new Array(i.shape.length).fill(0),h=i.shape.slice();return c.map((function(e){var t=_toConsumableArray(h);t[u]=e;var r=AM({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,r}))}},hD={kernelName:"Sqrt",backendName:"webgl",kernelFunc:SA({opSnippet:"return sqrt(x);"})},fD={kernelName:"Square",backendName:"webgl",kernelFunc:SA({opSnippet:"return x * x;"})},dD={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:TA({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},pD={kernelName:"Step",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=new iA(a.shape,"if (isnan(x)) return x;"+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "));return r.runWebGLProgram(i,[a],a.dtype)}},mD=_createClass((function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=yE(r.length),o=yE(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")})),vD={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,d=a.newAxisMask,p=a.shrinkAxisMask,m=h.sliceInfo(i.shape,o,s,u,c,l,f,d,p),v=m.nonStrided,g=m.$begin,y=m.$strides,_=m.size,b=m.newShape,x=m.outShape,w=DA({inputs:{x:i},backend:r,attrs:{shape:b}});if(v){var k=AM({inputs:{x:w},backend:r,attrs:{begin:g,size:_}});t=DA({inputs:{x:k},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,i.dtype,[]);else if(r.shouldExecuteOnCPU([w])){var C=r.texData.get(w.dataId),S=Zn(w.shape,w.dtype,C.values),T=jE(x,S,y,g);t=r.makeTensorInfo(x,w.dtype,T.values)}else{var E=new mD(g,y,x);t=r.runWebGLProgram(E,[w],w.dtype)}var A=DA({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(t),A}},gD=SA({opSnippet:"return tan(x);"}),yD=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=yE(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function _D(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=a.reps;if("string"===i.dtype){var s=n.readSync(i.dataId).map((function(e){return r.decodeString(e)})),u=Zn(i.shape,i.dtype,s),c=KE(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new yD(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}for(var bD=_createClass((function e(t,n){_classCallCheck(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),xD=0,wD=[DN,LN,qA,KA,XA,ZA,JA,eM,tM,nM,oM,sM,uM,cM,hM,lM,fM,vM,mM,_M,bM,xM,CM,IM,NM,FM,zM,VM,HM,yA,$M,cI,lI,aI,fI,dI,hI,mI,vI,yI,wI,kI,SI,NI,RI,AI,OI,FI,PI,zI,BI,VI,HI,qI,XI,JI,tN,rN,iN,oN,cN,lN,hN,dN,mN,vN,gN,vA,yN,ZM,_N,bN,xN,xA,wN,kN,CN,EN,TN,AN,MN,IN,PN,UN,BN,GN,HN,jN,zN,qN,KN,XN,JN,QN,uR,RA,lR,fR,pR,vR,DM,yR,xR,wR,TR,AR,CA,MR,NR,LM,nR,RR,OR,DR,OA,PR,BR,VR,GR,qR,XR,ZR,YR,$R,eD,tD,nD,rD,iD,oD,MM,sR,sD,uD,cD,lD,hD,fD,dD,pD,vD,iR,WA,{kernelName:$e,backendName:"webgl",kernelFunc:gD},{kernelName:"Tanh",backendName:"webgl",kernelFunc:SA({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},{kernelName:"Tile",backendName:"webgl",kernelFunc:_D},{kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.readSync(a.dataId),u=_slicedToArray(XE(s,a.shape,a.dtype,i,o),2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},HA,{kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;qT(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=YE(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}},{kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,h=0;h<s;h++)h!==i&&(c[l++]=o.shape[h]);var f=[],d=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){d[i]=v;var g=AM({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),y=DA({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,i=t.x,o=t.segmentIds,s=a.numSegments,u=i.shape.length,c=[],l=0,h=v.getAxesPermutation([l],u),f=i;null!=h&&(f=GA({inputs:{x:i},backend:n,attrs:{perm:h}}),c.push(f),l=v.getInnerMostAxes(1,u)[0]);var d=v.segment_util.computeOutShape(f.shape,l,s),p=r.sizeFromShape([f.shape[l]]),m=DA({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}});c.push(m);var g=DA({inputs:{x:function e(t,r,a,i,o){var s=t.shape[0],u=t.shape[1],l=v.segment_util.segOpComputeOptimalWindowSize(u,o),h=new bD({windowSize:l,inSize:u,batchSize:s,numSegments:o},r),f=n.compileAndRun(h,[t,a],i);if(c.push(f),f.shape[1]===o)return f;var d=IR({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=_D({inputs:{x:d},backend:n,attrs:{reps:[u/l]}});return c.push(d),c.push(p),e(f,r,p,i,o)}(m,"unsortedSegmentSum",o,Ot(i.dtype),s)},backend:n,attrs:{shape:d}}),y=g;if(null!=h){c.push(g);var _=v.getUndoAxesPermutation(h);y=GA({inputs:{x:y},backend:n,attrs:{perm:_}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}},bR];xD<wD.length;xD++){at(wD[xD])}n.d(t,"version",(function(){return kD})),n.d(t,"AdadeltaOptimizer",(function(){return Ha})),n.d(t,"AdagradOptimizer",(function(){return qa})),n.d(t,"AdamOptimizer",(function(){return Za})),n.d(t,"AdamaxOptimizer",(function(){return ti})),n.d(t,"MomentumOptimizer",(function(){return ri})),n.d(t,"Optimizer",(function(){return Ga})),n.d(t,"RMSPropOptimizer",(function(){return ai})),n.d(t,"SGDOptimizer",(function(){return ni})),n.d(t,"Tensor",(function(){return Ct})),n.d(t,"TensorBuffer",(function(){return xt})),n.d(t,"Variable",(function(){return Nt})),n.d(t,"Rank",(function(){return Tt})),n.d(t,"sumOutType",(function(){return Ot})),n.d(t,"upcastType",(function(){return Dt})),n.d(t,"Reduction",(function(){return xc})),n.d(t,"getKernel",(function(){return tt})),n.d(t,"getGradient",(function(){return nt})),n.d(t,"getKernelsForBackend",(function(){return rt})),n.d(t,"registerKernel",(function(){return at})),n.d(t,"registerGradient",(function(){return it})),n.d(t,"unregisterKernel",(function(){return ot})),n.d(t,"unregisterGradient",(function(){return st})),n.d(t,"copyRegisteredKernels",(function(){return ut})),n.d(t,"customGrad",(function(){return Ua})),n.d(t,"grad",(function(){return La})),n.d(t,"grads",(function(){return Fa})),n.d(t,"valueAndGrad",(function(){return Pa})),n.d(t,"valueAndGrads",(function(){return za})),n.d(t,"variableGrads",(function(){return Ba})),n.d(t,"Environment",(function(){return ze})),n.d(t,"env",(function(){return Be})),n.d(t,"ENV",(function(){return Ve})),n.d(t,"version_core",(function(){return"3.1.0"})),n.d(t,"nextFrame",(function(){return Gc})),n.d(t,"browser",(function(){return u})),n.d(t,"io",(function(){return o})),n.d(t,"math",(function(){return s})),n.d(t,"serialization",(function(){return f})),n.d(t,"test_util",(function(){return d})),n.d(t,"util",(function(){return r})),n.d(t,"backend_util",(function(){return v})),n.d(t,"tensor_util",(function(){return a})),n.d(t,"slice_util",(function(){return h})),n.d(t,"gather_util",(function(){return c})),n.d(t,"scatter_util",(function(){return l})),n.d(t,"device_util",(function(){return i})),n.d(t,"kernel_impls",(function(){return g})),n.d(t,"KernelBackend",(function(){return H})),n.d(t,"DataStorage",(function(){return G})),n.d(t,"abs",(function(){return Ya})),n.d(t,"acos",(function(){return ii})),n.d(t,"acosh",(function(){return oi})),n.d(t,"add",(function(){return Aa})),n.d(t,"addN",(function(){return si})),n.d(t,"all",(function(){return ui})),n.d(t,"any",(function(){return ci})),n.d(t,"argMax",(function(){return li})),n.d(t,"argMin",(function(){return hi})),n.d(t,"asin",(function(){return fi})),n.d(t,"asinh",(function(){return di})),n.d(t,"atan",(function(){return pi})),n.d(t,"atan2",(function(){return mi})),n.d(t,"atanh",(function(){return vi})),n.d(t,"avgPool",(function(){return Ni})),n.d(t,"avgPool3d",(function(){return Ri})),n.d(t,"basicLSTMCell",(function(){return Pi})),n.d(t,"batchToSpaceND",(function(){return zi})),n.d(t,"batchNorm",(function(){return Bi})),n.d(t,"batchNorm2d",(function(){return Ui})),n.d(t,"batchNorm3d",(function(){return Vi})),n.d(t,"batchNorm4d",(function(){return Wi})),n.d(t,"bincount",(function(){return Gi})),n.d(t,"broadcastTo",(function(){return Hi})),n.d(t,"buffer",(function(){return Zn})),n.d(t,"cast",(function(){return Yn})),n.d(t,"ceil",(function(){return ji})),n.d(t,"clipByValue",(function(){return qi})),n.d(t,"clone",(function(){return Jn})),n.d(t,"complex",(function(){return Qt})),n.d(t,"concat",(function(){return Di})),n.d(t,"concat1d",(function(){return Ki})),n.d(t,"concat2d",(function(){return Xi})),n.d(t,"concat3d",(function(){return Zi})),n.d(t,"concat4d",(function(){return Yi})),n.d(t,"conv1d",(function(){return $i})),n.d(t,"conv2d",(function(){return Ji})),n.d(t,"conv2dTranspose",(function(){return eo})),n.d(t,"conv3d",(function(){return to})),n.d(t,"conv3dTranspose",(function(){return ro})),n.d(t,"cos",(function(){return ao})),n.d(t,"cosh",(function(){return io})),n.d(t,"cumsum",(function(){return oo})),n.d(t,"denseBincount",(function(){return so})),n.d(t,"depthToSpace",(function(){return uo})),n.d(t,"depthwiseConv2d",(function(){return co})),n.d(t,"diag",(function(){return lo})),n.d(t,"dilation2d",(function(){return ho})),n.d(t,"div",(function(){return Ia})),n.d(t,"divNoNan",(function(){return mo})),n.d(t,"dot",(function(){return vo})),n.d(t,"elu",(function(){return go})),n.d(t,"equal",(function(){return fo})),n.d(t,"erf",(function(){return yo})),n.d(t,"exp",(function(){return _o})),n.d(t,"expandDims",(function(){return bo})),n.d(t,"expm1",(function(){return xo})),n.d(t,"eye",(function(){return ko})),n.d(t,"fill",(function(){return ja})),n.d(t,"floor",(function(){return Co})),n.d(t,"floorDiv",(function(){return Ma})),n.d(t,"gather",(function(){return So})),n.d(t,"greater",(function(){return To})),n.d(t,"greaterEqual",(function(){return Eo})),n.d(t,"imag",(function(){return Ao})),n.d(t,"isFinite",(function(){return Mo})),n.d(t,"isInf",(function(){return Io})),n.d(t,"isNaN",(function(){return No})),n.d(t,"leakyRelu",(function(){return Ro})),n.d(t,"less",(function(){return Do})),n.d(t,"lessEqual",(function(){return Oo})),n.d(t,"linspace",(function(){return Lo})),n.d(t,"localResponseNormalization",(function(){return Fo})),n.d(t,"log",(function(){return Po})),n.d(t,"log1p",(function(){return zo})),n.d(t,"logSigmoid",(function(){return Vo})),n.d(t,"logSoftmax",(function(){return Ho})),n.d(t,"logSumExp",(function(){return Qo})),n.d(t,"logicalAnd",(function(){return es})),n.d(t,"logicalNot",(function(){return ts})),n.d(t,"logicalOr",(function(){return ns})),n.d(t,"logicalXor",(function(){return rs})),n.d(t,"matMul",(function(){return _r})),n.d(t,"max",(function(){return Wo})),n.d(t,"maxPool",(function(){return as})),n.d(t,"maxPool3d",(function(){return is})),n.d(t,"maxPoolWithArgmax",(function(){return os})),n.d(t,"maximum",(function(){return ei})),n.d(t,"mean",(function(){return ss})),n.d(t,"min",(function(){return us})),n.d(t,"minimum",(function(){return cs})),n.d(t,"mirrorPad",(function(){return ls})),n.d(t,"mod",(function(){return hs})),n.d(t,"moments",(function(){return fs})),n.d(t,"mul",(function(){return Na})),n.d(t,"multiRNNCell",(function(){return ds})),n.d(t,"multinomial",(function(){return ps})),n.d(t,"neg",(function(){return Bo})),n.d(t,"notEqual",(function(){return ms})),n.d(t,"oneHot",(function(){return br})),n.d(t,"ones",(function(){return gs})),n.d(t,"onesLike",(function(){return ys})),n.d(t,"outerProduct",(function(){return _s})),n.d(t,"pad",(function(){return bs})),n.d(t,"pad1d",(function(){return xs})),n.d(t,"pad2d",(function(){return ws})),n.d(t,"pad3d",(function(){return ks})),n.d(t,"pad4d",(function(){return Cs})),n.d(t,"pool",(function(){return Ts})),n.d(t,"pow",(function(){return Ka})),n.d(t,"prelu",(function(){return Es})),n.d(t,"print",(function(){return $n})),n.d(t,"prod",(function(){return As})),n.d(t,"rand",(function(){return Ms})),n.d(t,"randomGamma",(function(){return Os})),n.d(t,"randomNormal",(function(){return Ls})),n.d(t,"randomUniform",(function(){return Fs})),n.d(t,"range",(function(){return Ps})),n.d(t,"real",(function(){return zs})),n.d(t,"reciprocal",(function(){return Bs})),n.d(t,"relu",(function(){return Us})),n.d(t,"relu6",(function(){return Vs})),n.d(t,"reshape",(function(){return Ii})),n.d(t,"reverse",(function(){return Ws})),n.d(t,"reverse1d",(function(){return Gs})),n.d(t,"reverse2d",(function(){return Hs})),n.d(t,"reverse3d",(function(){return js})),n.d(t,"reverse4d",(function(){return qs})),n.d(t,"round",(function(){return Ks})),n.d(t,"rsqrt",(function(){return Xs})),n.d(t,"scalar",(function(){return Wa})),n.d(t,"selu",(function(){return Zs})),n.d(t,"separableConv2d",(function(){return Ys})),n.d(t,"setdiff1dAsync",(function(){return Js})),n.d(t,"sigmoid",(function(){return Oi})),n.d(t,"sign",(function(){return $s})),n.d(t,"sin",(function(){return Qs})),n.d(t,"sinh",(function(){return eu})),n.d(t,"slice",(function(){return Li})),n.d(t,"slice1d",(function(){return tu})),n.d(t,"slice2d",(function(){return nu})),n.d(t,"slice3d",(function(){return ru})),n.d(t,"slice4d",(function(){return au})),n.d(t,"softmax",(function(){return iu})),n.d(t,"softplus",(function(){return Uo})),n.d(t,"spaceToBatchND",(function(){return Ss})),n.d(t,"fft",(function(){return ou})),n.d(t,"ifft",(function(){return su})),n.d(t,"irfft",(function(){return uu})),n.d(t,"rfft",(function(){return lu})),n.d(t,"split",(function(){return cu})),n.d(t,"sqrt",(function(){return Ra})),n.d(t,"square",(function(){return Da})),n.d(t,"squaredDifference",(function(){return hu})),n.d(t,"squeeze",(function(){return fu})),n.d(t,"stack",(function(){return du})),n.d(t,"step",(function(){return pu})),n.d(t,"stridedSlice",(function(){return mu})),n.d(t,"sub",(function(){return Xa})),n.d(t,"sum",(function(){return Go})),n.d(t,"tan",(function(){return vu})),n.d(t,"tanh",(function(){return Fi})),n.d(t,"tensor",(function(){return tn})),n.d(t,"tensor1d",(function(){return gu})),n.d(t,"tensor2d",(function(){return yu})),n.d(t,"tensor3d",(function(){return kr})),n.d(t,"tensor4d",(function(){return _u})),n.d(t,"tensor5d",(function(){return bu})),n.d(t,"tensor6d",(function(){return xu})),n.d(t,"tile",(function(){return wo})),n.d(t,"topk",(function(){return wu})),n.d(t,"truncatedNormal",(function(){return ku})),n.d(t,"unique",(function(){return Cu})),n.d(t,"unsortedSegmentSum",(function(){return Su})),n.d(t,"unstack",(function(){return Tu})),n.d(t,"variable",(function(){return Eu})),n.d(t,"where",(function(){return po})),n.d(t,"whereAsync",(function(){return Mu})),n.d(t,"zeros",(function(){return vs})),n.d(t,"zerosLike",(function(){return Oa})),n.d(t,"op",(function(){return $t})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return"__op"})),n.d(t,"image",(function(){return Pc})),n.d(t,"linalg",(function(){return zc})),n.d(t,"losses",(function(){return Bc})),n.d(t,"spectral",(function(){return Lc})),n.d(t,"fused",(function(){return p})),n.d(t,"signal",(function(){return Fc})),n.d(t,"train",(function(){return Vc})),n.d(t,"enableProdMode",(function(){return sa})),n.d(t,"enableDebugMode",(function(){return ua})),n.d(t,"disableDeprecationWarnings",(function(){return ca})),n.d(t,"deprecationWarn",(function(){return la})),n.d(t,"disposeVariables",(function(){return ha})),n.d(t,"engine",(function(){return fa})),n.d(t,"memory",(function(){return da})),n.d(t,"profile",(function(){return pa})),n.d(t,"tidy",(function(){return ma})),n.d(t,"dispose",(function(){return va})),n.d(t,"keep",(function(){return ga})),n.d(t,"time",(function(){return ya})),n.d(t,"setBackend",(function(){return _a})),n.d(t,"ready",(function(){return ba})),n.d(t,"getBackend",(function(){return xa})),n.d(t,"removeBackend",(function(){return wa})),n.d(t,"findBackend",(function(){return ka})),n.d(t,"findBackendFactory",(function(){return Ca})),n.d(t,"registerBackend",(function(){return Sa})),n.d(t,"backend",(function(){return Ta})),n.d(t,"setPlatform",(function(){return Ea})),n.d(t,"Abs",(function(){return"Abs"})),n.d(t,"Acos",(function(){return"Acos"})),n.d(t,"Acosh",(function(){return"Acosh"})),n.d(t,"Add",(function(){return"Add"})),n.d(t,"AddN",(function(){return"AddN"})),n.d(t,"All",(function(){return"All"})),n.d(t,"Any",(function(){return"Any"})),n.d(t,"ArgMax",(function(){return"ArgMax"})),n.d(t,"ArgMin",(function(){return"ArgMin"})),n.d(t,"Asin",(function(){return"Asin"})),n.d(t,"Asinh",(function(){return"Asinh"})),n.d(t,"Atan",(function(){return"Atan"})),n.d(t,"Atanh",(function(){return"Atanh"})),n.d(t,"Atan2",(function(){return"Atan2"})),n.d(t,"AvgPool",(function(){return"AvgPool"})),n.d(t,"AvgPoolGrad",(function(){return"AvgPoolGrad"})),n.d(t,"AvgPool3D",(function(){return"AvgPool3D"})),n.d(t,"AvgPool3DGrad",(function(){return"AvgPool3DGrad"})),n.d(t,"BatchMatMul",(function(){return"BatchMatMul"})),n.d(t,"BatchToSpaceND",(function(){return"BatchToSpaceND"})),n.d(t,"Bincount",(function(){return"Bincount"})),n.d(t,"BroadcastTo",(function(){return"BroadcastTo"})),n.d(t,"Cast",(function(){return"Cast"})),n.d(t,"Ceil",(function(){return"Ceil"})),n.d(t,"ClipByValue",(function(){return"ClipByValue"})),n.d(t,"Complex",(function(){return"Complex"})),n.d(t,"ComplexAbs",(function(){return"ComplexAbs"})),n.d(t,"Concat",(function(){return"Concat"})),n.d(t,"Conv2D",(function(){return"Conv2D"})),n.d(t,"Conv2DBackpropFilter",(function(){return"Conv2DBackpropFilter"})),n.d(t,"Conv2DBackpropInput",(function(){return"Conv2DBackpropInput"})),n.d(t,"Conv3D",(function(){return"Conv3D"})),n.d(t,"Conv3DBackpropFilterV2",(function(){return"Conv3DBackpropFilterV2"})),n.d(t,"Conv3DBackpropInputV2",(function(){return"Conv3DBackpropInputV2"})),n.d(t,"Cos",(function(){return He})),n.d(t,"Cosh",(function(){return"Cosh"})),n.d(t,"Cumsum",(function(){return"Cumsum"})),n.d(t,"CropAndResize",(function(){return"CropAndResize"})),n.d(t,"DenseBincount",(function(){return"DenseBincount"})),n.d(t,"DepthToSpace",(function(){return"DepthToSpace"})),n.d(t,"DepthwiseConv2dNative",(function(){return"DepthwiseConv2dNative"})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return"DepthwiseConv2dNativeBackpropFilter"})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return"DepthwiseConv2dNativeBackpropInput"})),n.d(t,"Diag",(function(){return"Diag"})),n.d(t,"Dilation2D",(function(){return"Dilation2D"})),n.d(t,"Dilation2DBackpropInput",(function(){return"Dilation2DBackpropInput"})),n.d(t,"Dilation2DBackpropFilter",(function(){return"Dilation2DBackpropFilter"})),n.d(t,"RealDiv",(function(){return"RealDiv"})),n.d(t,"Elu",(function(){return"Elu"})),n.d(t,"EluGrad",(function(){return"EluGrad"})),n.d(t,"Erf",(function(){return je})),n.d(t,"Equal",(function(){return"Equal"})),n.d(t,"Exp",(function(){return qe})),n.d(t,"ExpandDims",(function(){return"ExpandDims"})),n.d(t,"Expm1",(function(){return"Expm1"})),n.d(t,"FFT",(function(){return"FFT"})),n.d(t,"Fill",(function(){return"Fill"})),n.d(t,"FlipLeftRight",(function(){return"FlipLeftRight"})),n.d(t,"Floor",(function(){return"Floor"})),n.d(t,"FloorDiv",(function(){return"FloorDiv"})),n.d(t,"FusedBatchNorm",(function(){return"FusedBatchNorm"})),n.d(t,"GatherV2",(function(){return"GatherV2"})),n.d(t,"GatherNd",(function(){return"GatherNd"})),n.d(t,"Greater",(function(){return"Greater"})),n.d(t,"GreaterEqual",(function(){return"GreaterEqual"})),n.d(t,"Identity",(function(){return"Identity"})),n.d(t,"IFFT",(function(){return"IFFT"})),n.d(t,"Imag",(function(){return"Imag"})),n.d(t,"IsFinite",(function(){return"IsFinite"})),n.d(t,"IsInf",(function(){return"IsInf"})),n.d(t,"IsNan",(function(){return"IsNan"})),n.d(t,"LeakyRelu",(function(){return"LeakyRelu"})),n.d(t,"Less",(function(){return"Less"})),n.d(t,"LessEqual",(function(){return"LessEqual"})),n.d(t,"LinSpace",(function(){return"LinSpace"})),n.d(t,"Log",(function(){return Ke})),n.d(t,"Log1p",(function(){return"Log1p"})),n.d(t,"LogicalAnd",(function(){return"LogicalAnd"})),n.d(t,"LogicalNot",(function(){return"LogicalNot"})),n.d(t,"LogicalOr",(function(){return"LogicalOr"})),n.d(t,"LogSoftmax",(function(){return"LogSoftmax"})),n.d(t,"LRN",(function(){return"LRN"})),n.d(t,"LRNGrad",(function(){return"LRNGrad"})),n.d(t,"Max",(function(){return"Max"})),n.d(t,"Maximum",(function(){return"Maximum"})),n.d(t,"MaxPool",(function(){return"MaxPool"})),n.d(t,"MaxPoolGrad",(function(){return"MaxPoolGrad"})),n.d(t,"MaxPool3D",(function(){return"MaxPool3D"})),n.d(t,"MaxPool3DGrad",(function(){return"MaxPool3DGrad"})),n.d(t,"MaxPoolWithArgmax",(function(){return"MaxPoolWithArgmax"})),n.d(t,"Mean",(function(){return"Mean"})),n.d(t,"Min",(function(){return"Min"})),n.d(t,"Minimum",(function(){return"Minimum"})),n.d(t,"MirrorPad",(function(){return"MirrorPad"})),n.d(t,"Mod",(function(){return Xe})),n.d(t,"Multinomial",(function(){return"Multinomial"})),n.d(t,"Multiply",(function(){return"Multiply"})),n.d(t,"Neg",(function(){return"Neg"})),n.d(t,"NotEqual",(function(){return"NotEqual"})),n.d(t,"NonMaxSuppressionV3",(function(){return"NonMaxSuppressionV3"})),n.d(t,"NonMaxSuppressionV4",(function(){return"NonMaxSuppressionV4"})),n.d(t,"NonMaxSuppressionV5",(function(){return"NonMaxSuppressionV5"})),n.d(t,"OnesLike",(function(){return"OnesLike"})),n.d(t,"OneHot",(function(){return"OneHot"})),n.d(t,"Pack",(function(){return"Pack"})),n.d(t,"PadV2",(function(){return"PadV2"})),n.d(t,"Pool",(function(){return"Pool"})),n.d(t,"Pow",(function(){return Ze})),n.d(t,"Prelu",(function(){return"Prelu"})),n.d(t,"Prod",(function(){return"Prod"})),n.d(t,"Range",(function(){return"Range"})),n.d(t,"Real",(function(){return"Real"})),n.d(t,"Reciprocal",(function(){return"Reciprocal"})),n.d(t,"Relu",(function(){return"Relu"})),n.d(t,"Reshape",(function(){return"Reshape"})),n.d(t,"ResizeNearestNeighbor",(function(){return"ResizeNearestNeighbor"})),n.d(t,"ResizeNearestNeighborGrad",(function(){return"ResizeNearestNeighborGrad"})),n.d(t,"ResizeBilinear",(function(){return"ResizeBilinear"})),n.d(t,"ResizeBilinearGrad",(function(){return"ResizeBilinearGrad"})),n.d(t,"Relu6",(function(){return"Relu6"})),n.d(t,"Reverse",(function(){return"Reverse"})),n.d(t,"Round",(function(){return"Round"})),n.d(t,"Rsqrt",(function(){return"Rsqrt"})),n.d(t,"ScatterNd",(function(){return"ScatterNd"})),n.d(t,"Select",(function(){return"Select"})),n.d(t,"Selu",(function(){return"Selu"})),n.d(t,"Slice",(function(){return"Slice"})),n.d(t,"Sin",(function(){return Ye})),n.d(t,"Sinh",(function(){return"Sinh"})),n.d(t,"Sign",(function(){return"Sign"})),n.d(t,"Sigmoid",(function(){return"Sigmoid"})),n.d(t,"Softplus",(function(){return"Softplus"})),n.d(t,"Sqrt",(function(){return"Sqrt"})),n.d(t,"Sum",(function(){return"Sum"})),n.d(t,"SpaceToBatchND",(function(){return"SpaceToBatchND"})),n.d(t,"SplitV",(function(){return"SplitV"})),n.d(t,"Softmax",(function(){return"Softmax"})),n.d(t,"SquaredDifference",(function(){return"SquaredDifference"})),n.d(t,"Square",(function(){return"Square"})),n.d(t,"Sub",(function(){return Je})),n.d(t,"SparseToDense",(function(){return"SparseToDense"})),n.d(t,"StridedSlice",(function(){return"StridedSlice"})),n.d(t,"Tan",(function(){return $e})),n.d(t,"Tanh",(function(){return"Tanh"})),n.d(t,"Tile",(function(){return"Tile"})),n.d(t,"TopK",(function(){return"TopK"})),n.d(t,"Transpose",(function(){return"Transpose"})),n.d(t,"Unique",(function(){return"Unique"})),n.d(t,"Unpack",(function(){return"Unpack"})),n.d(t,"UnsortedSegmentSum",(function(){return"UnsortedSegmentSum"})),n.d(t,"ZerosLike",(function(){return"ZerosLike"})),n.d(t,"Step",(function(){return"Step"})),n.d(t,"FromPixels",(function(){return"FromPixels"})),n.d(t,"RotateWithOffset",(function(){return"RotateWithOffset"})),n.d(t,"_FusedMatMul",(function(){return"_FusedMatMul"})),n.d(t,"FusedConv2D",(function(){return"FusedConv2D"})),n.d(t,"FusedDepthwiseConv2D",(function(){return"FusedDepthwiseConv2D"})),n.d(t,"booleanMaskAsync",(function(){return Iu})),n.d(t,"transpose",(function(){return xr})),n.d(t,"norm",(function(){return Nu})),n.d(t,"movingAverage",(function(){return Ru})),n.d(t,"scatterND",(function(){return Du})),n.d(t,"sparseToDense",(function(){return Ou})),n.d(t,"gatherND",(function(){return Lu})),n.d(t,"dropout",(function(){return Fu})),n.d(t,"enclosingPowerOfTwo",(function(){return Pu})),n.d(t,"cosineWindow",(function(){return zu})),n.d(t,"inTopKAsync",(function(){return Bu})),n.d(t,"CallbackList",(function(){return cp})),n.d(t,"CustomCallback",(function(){return fp})),n.d(t,"History",(function(){return hp})),n.d(t,"Callback",(function(){return a_})),n.d(t,"callbacks",(function(){return l_})),n.d(t,"EarlyStopping",(function(){return c_})),n.d(t,"InputSpec",(function(){return Jd})),n.d(t,"SymbolicTensor",(function(){return $d})),n.d(t,"LayersModel",(function(){return pm})),n.d(t,"input",(function(){return wm})),n.d(t,"loadLayersModel",(function(){return xm})),n.d(t,"model",(function(){return _m})),n.d(t,"registerCallbackConstructor",(function(){return km})),n.d(t,"sequential",(function(){return bm})),n.d(t,"RNN",(function(){return _v})),n.d(t,"Sequential",(function(){return ym})),n.d(t,"LayerVariable",(function(){return Kd})),n.d(t,"version_layers",(function(){return"3.1.0"})),n.d(t,"constraints",(function(){return y})),n.d(t,"initializers",(function(){return _})),n.d(t,"layers",(function(){return b})),n.d(t,"metrics",(function(){return x})),n.d(t,"models",(function(){return w})),n.d(t,"regularizers",(function(){return k})),n.d(t,"GraphModel",(function(){return xb})),n.d(t,"loadGraphModel",(function(){return wb})),n.d(t,"deregisterOp",(function(){return p_})),n.d(t,"registerOp",(function(){return f_})),n.d(t,"version_converter",(function(){return"3.1.0"})),n.d(t,"data",(function(){return V}));var kD={"tfjs-core":"3.1.0","tfjs-backend-cpu":"3.1.0","tfjs-backend-webgl":"3.1.0","tfjs-data":Nx,"tfjs-layers":"3.1.0","tfjs-converter":"3.1.0",tfjs:"3.1.0"}},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zuR4:function(e,t,n){"use strict";var r=n("xTJ+"),a=n("HSsa"),i=n("CgaS"),o=n("SntB"),s=function e(t){var n=new i(t),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n("JEQr"));s.Axios=i,s.Cancel=n("endd"),s.CancelToken=n("jfS+"),s.isCancel=n("Lmem"),s.VERSION=n("XM5P").version,s.all=function(e){return Promise.all(e)},s.spread=n("DfZB"),s.isAxiosError=n("XwJu"),e.exports=s,e.exports.default=s}},[[0,0]]]);